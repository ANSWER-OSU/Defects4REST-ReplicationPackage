<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19559</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/19559</ISSUEURL>
  <TITLE>Custom excerpts containing escaped characters are truncated inappropriately</TITLE>
  <DESCRIPTION>### Issue Summary ref dc7e2b9, https://ghost.slack.com/archives/CTH5NDJMS/p1706034566392689 Customers using custom excerpts containing quotes and other escaped characters were seeing the text cut short, sometimes in the middle of words. ### Steps to Reproduce 1. Create a custom excerpt using quotes 2. Publish the post 3. View the excerpt from the home page ### Ghost Version v5.76.1 ### Node.js Version 18 ### How did you install Ghost? Mac Sonoma ### Database type MySQL 5.7 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed in-editor style regressions (#19558) closes https://github.com/TryGhost/Ghost/issues/19557 - bumps `@tryghost/koenig-lexical` which includes fix for some mangled class names following a previous Tailwind update</MESSAGE>
    <SHA>b15534690ce0c2d7636b4de1ff181a7d9fd381ac</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed custom excerpts sometimes being cut off refs TryGhost/Ghost#19559 - custom excerpts are truncated based on character length - escaped characters added extra length but we didn't account for this, resulting in poor truncation of excerpts</MESSAGE>
      <SHA>33a11f560d27079ffd425b4c07c675689f3eba1c</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/frontend/helpers/excerpt.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed custom excerpts sometimes being cut off (#19560) refs TryGhost/Ghost#19559 - custom excerpts are truncated based on character length - escaped characters added extra length but we didn't account for this, resulting in poor truncation of excerpts</MESSAGE>
      <SHA>40891272dcb7d8f481456cc7496f46538e6aaada</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/frontend/helpers/excerpt.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed custom excerpts sometimes being cut off (#19560) refs TryGhost/Ghost#19559 - custom excerpts are truncated based on character length - escaped characters added extra length but we didn't account for this, resulting in poor truncation of excerpts</MESSAGE>
      <SHA>278e92427436c24747bde13e3f42a207673e2540</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/frontend/helpers/excerpt.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed custom excerpts sometimes being cut off (#19560) refs TryGhost/Ghost#19559 - custom excerpts are truncated based on character length - escaped characters added extra length but we didn't account for this, resulting in poor truncation of excerpts</MESSAGE>
      <SHA>f9adc597748bd246afabf31a080589cf841eb9a9</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/frontend/helpers/excerpt.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
