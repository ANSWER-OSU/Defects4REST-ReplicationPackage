<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15542</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/15542</ISSUEURL>
  <TITLE>Custom theme settings (Site Design settings) not restored from import</TITLE>
  <DESCRIPTION>### Issue Summary (Probably not too relevant, but worth mentioning just in case) I upgraded an ancient &lt; v1 by exporting its data into a fresh v1.26.2 (I think), I then exported the data from the v1.26.2 instance and imported it into the latest version v5.17.2. All was well. Its using the default theme casper (v5.3.1), I fiddled with the admin ui a little including changing some of the things under Site Design such as enabling Show logo in navigation, disabling Show publication cover and changing a few other things. I added a twitter url, added some primary and secondary navigation links. That was about it. I realised that I would need to make some changes to the theme, so I installed ghost locally with ghost install local. I took an export from the other system and imported it into the local one. Everything seems to have imported with the exception of the changes made under Site Design. The navigation menus are there, the twitter url is there, the posts are there. I took a look in the export file I can see things like: &quot;custom_theme_settings&quot;: [..., {&quot;id&quot;:&quot;633dae33554f811bb2335f53&quot;,&quot;theme&quot;:&quot;casper&quot;,&quot;key&quot;:&quot;show_logo_in_navigation&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;value&quot;:&quot;true&quot;}, ...] I checked a few of the other settings that are missing too and they look correct in the export. There were a few warnings during import for things that were ignored. My User, Newsletter, a couple of Product and 'Settings: Theme not imported, please upload in Settings - Design'. The last one is a little suspicious, but I think it's just the theme itself not being imported due to it already existing rather than the Site Design settings themselves? On the off chance doing this from an export was wrong, I use ghost backup to create a backup and imported the data file within it to a clean local instance of ghost instead of the exported one. It has the exact same issue. To rule out the rest of my content as a problem I setup a fresh local instance, changed the settings under Site Design. Exported the data. Setup another fresh local instance. Imported the data. Looked at the settings under Site Design. They are not set to the ones in the export which I would expect them to be. Am I doing something wrong? Should I expect these settings to import ok? Thanks ### Steps to Reproduce 1. Install ghost with ghost cli: ghost install local 2. Open resultant ghost in browser and setup 3. Go to settings -&gt; Design 4. Under Homepage, disable Show publication cover 5. Save changes 6. Go to Settings -&gt; Labs, Export 7. Install another ghost instance (I did ghost stop, removed the entire first instance) using ghost cli: ghost install local 8. Open resultant ghost in browser and setup 9. Go to Settings -&gt; Labs, Import... Select the file exported a moment go 10. Go to Settings -&gt; Design. 11. Under Homepage, note Show publication cover is enabled whereas it should be disabled ### Ghost Version v5.17.2 ### Node.js Version v16.13.1 ### How did you install Ghost? ghost cli: ghost install local ### Database type SQLite3 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [x] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update dependency husky to v8.0.1</MESSAGE>
    <SHA>9cd15ec9fb53c1ed0fde2607071aba04a6184639</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>import custom theme settings from json closes #15542</MESSAGE>
      <SHA>c3243d0640e8f7421af279bc4160f32ef8e7c31b</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/data/importer/importers/data/custom-theme-settings.js</FILE>
        <FILE>ghost/core/core/server/data/importer/importers/data/data-importer.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Added importer for custom theme settings (#15596) closes: https://github.com/TryGhost/Ghost/issues/15542 - custom theme settings were not reinstated on import - importing custom theme settings for the current active theme requires the theme be re-activated</MESSAGE>
      <SHA>a701f2114d5b3d3df4b872bac2ef0e8492879378</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/data/importer/importers/data/custom-theme-settings.js</FILE>
        <FILE>ghost/core/core/server/data/importer/importers/data/data-importer.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
