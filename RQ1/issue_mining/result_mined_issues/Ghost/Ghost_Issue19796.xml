<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19796</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/19796</ISSUEURL>
  <TITLE>{{tiers}} helper has regression in 5.80 - &quot;free&quot; tier shown in list.</TITLE>
  <DESCRIPTION>### Issue Summary The {{tiers}} helper is including the Free tier in the list of tiers with access, even for posts set only to a paid tier. These are posts set to a specific tier access only. Here’s 5.80 (running Source latest) ![image](https://github.com/TryGhost/Ghost/assets/42299862/70d52ab8-7744-479e-832e-d1ebad81814f) And here’s 5.79, also Source latest: ![image](https://github.com/TryGhost/Ghost/assets/42299862/84f8d663-c33d-4df9-867f-3b56ad9c8073) Both are on Ghost Pro - it’s just a difference between whether they’re in the early or late roll-out group, looks like! ### Steps to Reproduce Install 5.80, hook up to Stripe, create a tier. Create a post restricted to that tier. Browse to the post while not logged in as a user with access. ### Ghost Version Ghost Pro ### Node.js Version Ghost Pro ### How did you install Ghost? Ghost Pro ### Database type MySQL 8 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix a French translation error in portal.json (#19803) In this context, &quot;save&quot; should be translated as &quot;économiser&quot;.</MESSAGE>
    <SHA>5f80e9f7dbd939b7dde104bc530ac5dc34831c4f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>00cff0aece943e7026f3be36de2f97c3919ccf82</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
        <FILE>ghost/core/core/server/models/post.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/pages.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/posts.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/pages.test.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/posts.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>69466ecab952b89ee447643689cc772a8fec6ae0</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
        <FILE>ghost/core/core/server/models/post.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/pages.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/posts.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/pages.test.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/posts.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>551d16745c0bcb3593dc1faf0a969c8bc926fa9b</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>5ae0ce983e82993762c1eff9a36126034a975303</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>bd3125873bccb96ae11a95d3c6abc8a20bc09cc6</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>c8c4619652c08271e56cf5e1e7b806075f2fe273</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
        <FILE>ghost/core/core/server/models/post.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/pages.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/__snapshots__/posts.test.js.snap</FILE>
        <FILE>ghost/core/test/e2e-api/admin/pages.test.js</FILE>
        <FILE>ghost/core/test/e2e-api/admin/posts.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed free tier showing in the tiers-only paywall in posts (#19807) refs INC-36 fixes https://github.com/TryGhost/Ghost/issues/19796 - The tiers-only paywall was incorrectly rendering &quot;Free&quot;. Example: &quot;This post is for subscribers of the Free, Silver and Gold tiers only&quot; - Steps to reproduce the issue: 1. Create a post with public visibility, publish it 2. Then swap the visibility to specific tiers. The default selects all paid tiers. Leave it like that 3. Update the post. The paywall show Free, even though it should be showing only the paid tiers - This fix filters out the &quot;free&quot; tier when visibility is set to tiers, before updating a Post or a Page. The fix includes bulk updates from the list of Posts and Pages (right-click on a Post/Page &gt; Change Access).</MESSAGE>
      <SHA>bbf438cf76bfffe9a5412817858fefdd80fc15c4</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/api/endpoints/utils/serializers/output/mappers/posts.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
