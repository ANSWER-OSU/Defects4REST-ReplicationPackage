<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15470</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/15470</ISSUEURL>
  <TITLE>Saving different settings screens open in different tabs can overwrite with old values</TITLE>
  <DESCRIPTION>### Issue Summary If you open two settings screens in different tabs, make changes in the first and save, make changes in the second and save, then the second save will have overwritten your changes from the first save with the old values. Related forum discussion: https://forum.ghost.org/t/editing-code-injection-and-navigation-at-the-same-time-does-not-work/32984/7 ### Steps to Reproduce 1. Open &quot;Code injection&quot; settings screen in one tab 2. Open &quot;Navigation&quot; settings screen in another tab 3. Enter some text into the code injection fields and save 4. Make a change on the navigation screen and save 5. Refresh the code injection screen After doing this you'll find that the changes you made on the code injection screen have been &quot;undone&quot;. ### Ghost Version 5.16.0 ### Node.js Version 16.15.0 ### How did you install Ghost? Local ### Database type MySQL 8 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>16</TIMEDIFFERENCEDAYS>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>:bug:Fixed settings overriden when updated from multiple tabs closes #15470 When multiple browser tabs are open, each manipulate a different copy of ember data model, changes to the model in one tab are not reflected in the model of the other tab. When updating some settings, all current settings were sent to the API. As a result, when updating two different categories of settings (navigation/code inspection) in different tabs, the second update was overriding the first one. From a user perspective, this is not a natural behaviour. Only settings visible on-screen when clicking save should be modified.</MESSAGE>
      <SHA>e811d4c6b551cca6456910cb15e31536689defaa</SHA>
      <PATCHEDFILES>
        <FILE>ghost/admin/app/adapters/setting.js</FILE>
        <FILE>ghost/admin/app/controllers/settings/navigation.js</FILE>
        <FILE>ghost/admin/app/serializers/setting.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/code-injection-test.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/slack-test.js</FILE>
        <FILE>ghost/core/test/regression/api/admin/settings.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>:bug:Fixed settings overriden when updated from multiple tabs closes #15470 When multiple browser tabs are open, each manipulate a different copy of ember data model, changes to the model in one tab are not reflected in the model of the other tab. When updating some settings, all current settings were sent to the API. As a result, when updating two different categories of settings (navigation/code inspection) in different tabs, the second update was overriding the first one. From a user perspective, this is not a natural behaviour. Only settings visible on-screen when clicking save should be modified.</MESSAGE>
      <SHA>52fabfb3fbd748d976ef5197b5c0c2eaeb9933ed</SHA>
      <PATCHEDFILES>
        <FILE>ghost/admin/app/adapters/setting.js</FILE>
        <FILE>ghost/admin/app/controllers/settings/navigation.js</FILE>
        <FILE>ghost/admin/app/serializers/setting.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/code-injection-test.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/slack-test.js</FILE>
        <FILE>ghost/core/test/regression/api/admin/settings.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed settings overriden when updated from multiple tabs (#15536) closes: https://github.com/TryGhost/Ghost/issues/15470 - When multiple browser tabs are open, each manipulate a different copy of ember data model, changes to the model in one tab are not reflected in the model of the other tab. - When updating some settings, all current settings were sent to the API. - As a result, when updating two different categories of settings (navigation/code inspection) in different tabs, the second update was overriding the first one. - From a user perspective, this is not a natural behaviour. Only settings visible on-screen when clicking save should be modified. Co-authored-by: Kevin Ansfield &lt;kevin@lookingsideways.co.uk&gt;</MESSAGE>
      <SHA>b9dd9f066d2b1fd683bc288e1f3984b1cee35e2b</SHA>
      <PATCHEDFILES>
        <FILE>ghost/admin/app/adapters/setting.js</FILE>
        <FILE>ghost/admin/app/controllers/settings/navigation.js</FILE>
        <FILE>ghost/admin/app/serializers/setting.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/code-injection-test.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/slack-test.js</FILE>
        <FILE>ghost/core/test/regression/api/admin/settings.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed settings overriden when updated from multiple tabs (#15536) closes: https://github.com/TryGhost/Ghost/issues/15470 - When multiple browser tabs are open, each manipulate a different copy of ember data model, changes to the model in one tab are not reflected in the model of the other tab. - When updating some settings, all current settings were sent to the API. - As a result, when updating two different categories of settings (navigation/code inspection) in different tabs, the second update was overriding the first one. - From a user perspective, this is not a natural behaviour. Only settings visible on-screen when clicking save should be modified. Co-authored-by: Kevin Ansfield &lt;kevin@lookingsideways.co.uk&gt;</MESSAGE>
      <SHA>31d5448ec9c5e53a01d40c7d8a5b98214f65ecea</SHA>
      <PATCHEDFILES>
        <FILE>ghost/admin/app/adapters/setting.js</FILE>
        <FILE>ghost/admin/app/controllers/settings/navigation.js</FILE>
        <FILE>ghost/admin/app/serializers/setting.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/code-injection-test.js</FILE>
        <FILE>ghost/admin/tests/acceptance/settings/slack-test.js</FILE>
        <FILE>ghost/core/test/regression/api/admin/settings.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
