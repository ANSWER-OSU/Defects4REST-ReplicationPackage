<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2864</ISSUENO>
  <ISSUEURL>https://github.com/nightscout/cgm-remote-monitor/issues/2864</ISSUEURL>
  <TITLE>Distribution report miscalculates percentages when filtered by hour</TITLE>
  <DESCRIPTION>When filtered by hours, the distribution report miscalculates the percentages of readings that correspond to low, normal, and high. Specifically, the percentage calculation uses the total unfiltered number of daily readings as the denominator in the calculation even when the readings have been filtered. You can see this in the two images attached below. In the one labeled &quot;All Hours Selected&quot; 92 of the readings were high and the total number of readings were 285. The percentage of high readings is correctly displayed as 32.3% (92 / 286 = 0.323). However, in the image labeled &quot;Hours Filtered,&quot; 50 of the readings were high and the total number of filtered readings was 104. The correct percentage of high readings for the hours selected is 51.92% (50 / 104 = 0.5192). However, the percentage of high readings is incorrectly displayed in the distribution report as 17.5% (50 / 286 = 0.1750) because the percentage calculation is using the total unfiltered number of daily readings as the denominator rather than using the total number of filtered readings. The pie graph on the left correctly displays the visual representation of the filtered percentage, even though the percentage of readings in incorrectly displayed in the chart. ![capture2ann](https://user-images.githubusercontent.com/8519000/30974899-d80367e6-a43e-11e7-8d28-287c8fb1729c.jpg) ![captureann](https://user-images.githubusercontent.com/8519000/30974877-ca7346d2-a43e-11e7-9b7f-b7656dc6cee8.jpg)</DESCRIPTION>
  <REPONAME>cgm-remote-monitor</REPONAME>
  <TIMEDIFFERENCEDAYS>145</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Bump Nightscout version number to 0.10.1-dev</MESSAGE>
    <SHA>a7cb4c2f8e9620cf1b59e53da7dbd756f5408c05</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes hourly filtering in distrubution reports, reported in #2864</MESSAGE>
      <SHA>6adb76e81ee18b1294064e1fe7a64345a43bec9d</SHA>
      <PATCHEDFILES>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update 25.01.2018 (#1) * Data cleaning pass 1 * * Glucose data smoothing / patching before calculating variability to reduce the effects of CGM noise * Added calculation for GVI, PGS and Total Absolute Change calculation * Refactored the server to use Webpack for the bundle generation instead of Browserify (since browserify-express seems to not work with Node 8 and is not maintained) * Improved caching &amp; compression of JS and CSS resources * If NODE_ENV=&quot;development”, don’t cache resources for more than 10 seconds &amp; generate a report about Bundle size * Run packaging in post install instead of runtime * CSS bundling * Fix templates that linked to old bundle.js location * Removing Bower part 1 * Flot plugins * jQuery packaging has changed, adding these to the repo * Generate source map, use a small font subset instead of loading complex CSS / font set from Google * Added missing icons, changed how jQuery and jQuery-UI is packaged * Bower is gone * Remove Crossfilter (needed by /reports/compare, which is not supported right now) * Oops forgot package-lock.json * Revert back to using Open Sans, but embedded * Re-enabled Ubuntu to fix the layouts. Icon font embedded. * Update cache busters * Added variability measure explanations to reporting * Finnish localization * Fix battery icon, some tests * Added app cache manifest to speed things further * Launch PNG was missing * Return 404 on app cache request when in development mode, added bold weight Ubuntu * Formatting improvements to app.js * Added sync-exec in an attempt to appease Azure * Added --scripts-prepend-node-path to Azure deploy script * IT Language * update language.js update Russian translation * RO update August, 27th - 2017 RO update * Trigger app on DOM ready event (as recommended by HTML5 spec). Detect if app is completely offline, auto-reload if needed. * Better looking loader screen, prevent CSS blocking * Use ejs to render the app cache and cache buster tokens * Forgot cache buster generator script * Image had ugly artifacts * Upgrade Travis to build with Node 8.4, update package.json to 8.4 * Doh, 8.1.4 is the latest version of Node available in Azure * Added note on configuring Azure to README * Separate messages for loading the client and connecting to server * Hide loader on auth fail * Support both node 8.1.4 (Azure) and node 8.4.0 (Heroku). Make sure travis builds / tests both versions. Got this syntax from: https://github.com/SAP/chevrotain/commit/cedbffd3261a4f2bfe142ea11d62b9af4fd8d0cb and https://docs.microsoft.com/en-us/azure/nodejs-specify-node-version-azure-apps * Unit tests fixed * Increasing test timeout significantly due to Travis fails * And add the longer timeout to Travis, too… * Now it works * Fixed Coverage running parameter order * Report tests takes over 40 seconds to run in Travis, timeout increased * More test fixes * Increasing Travis timeouts ridiculously, we need to do something to this * minor css fixes * see if document ready is the problem when testing on travis * Revert &quot;see if document ready is the problem when testing on travis&quot; This reverts commit 7428040e0536b55dff48f9b72ea783c25e5afb3c. * Update openaps.js * Update openaps.js * Update openaps.test.js Test for devicestatus-entries containing the correct spelling of the word &quot;received&quot; instead of &quot;recieved&quot; in OpenAPS versions 0.6.0 and later * change node-uuid to uuid * npm update * add environment variables to .travis.yml * increase timeout to 30 secs for admintools test and change environment variables for travis * create bundle before tests and time tests execution for travis * Makefiles requires tabs not space. I knew that... * change Makefile * last try for today * set timeout of profileeditor.test to 30 seconds * increase timeout for profileeditor tests * only support node 8.4.0 and drop support for node 8.1.4 * bundle creation is done by npm postinstall, so should not be called explicit. * revert tests/fixtures/headless.js * revert test/fixtures/headless.js (now without changing indent) * remove env's from .travis.yml (because they might not be needed) * Move all html files to views folder, update to use the rendered cache buster * Fix tests to uses the view path :D * Update README to reflect correct Node version * Implements #2689 * Implements #2456 * One cache buster wasn't updated to dynamic form * decrease timeouts to detect regressions faster in future * Admintools and profileeditor test fails with 20 sec timeout. Increasing to 25 sec. ``` not ok 1 admintools &quot;before all&quot; hook Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/admintools.test.js:177:7 at Object.done (node_modules/benv/index.js:32:21) at process.nextTick (node_modules/jsdom/lib/old-api.js:347:18) at _combinedTickCallback (internal/process/next_tick.js:131:7) at process._tickCallback (internal/process/next_tick.js:180:9) not ok 203 Profile editor &quot;before each&quot; hook for &quot;should produce some html&quot; Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/fixtures/headless.js:160:7 at Object.module.exports.setup (node_modules/benv/index.js:24:56) at Function.init [as setup] (tests/fixtures/headless.js:16:10) at Context.&lt;anonymous&gt; (tests/profileeditor.test.js:94:14) ``` * optimize travis tests. see if 5 sec per test is enough (in stead of 50 sec per test) * the following tests don't complete in 5 sec. increase timeout to 25 sec. * increase profileeditor tests to 40 sec * hasauth.test.js fails with 25 sec. increasing to 40 sec * Small fix to CGM data noise filtering * Add Node version to DEV Azure deploy json * Testing Node 8.1.4 for Azure * Testing disabling heap dumps * Update to 8.5.0 to see if that works without the problematic module * add food to websockets * add node env for deploy in azure * change node to 8.5.0 * Prepare for 0.10 release * Revert part of changes from previous merge * Bump Nightscout version number to 0.10.1-dev * Create issue_template.md Adding an issue template to help solve bugs * Fixes hourly filtering in distrubution reports, reported in #2864 * SVG dimension fix Somehow the NONE.svg ended up with an incorrect rectangle shape; fixed to match the aspect ratio of the other symbols. * preserve original treatment collection * add ZT (zero temp) prediction line * package-lock.json * display ZT PredBGs, and forecast tooltips * remove extra-big tooltip target around treatments; reduce font sizes * make R3/R4 elements into very short arcs to reposition labels * Remove pattern regex from basal change field Having the regex require integers means that only the numeric keypad will pop on iOS. This prevents the entry of negative values, which is pretty critical for temp basals. * filter to only use actual SGV's (not rawbg's) to set the view window * remove console.log * Use lodash cloneDeep instead of JSON serialize/desearialize * update Russian * Cleanup: move cache buster token generation to /bin, remove /scripts * Fix express-minify file cache path to reduce the memory footprint of the runtime * Display RSSI on Loop pill * Add missing fontello icons to main CSS * Update version to release * Loop RSSI fix * One more Loop RSSI fix * Always show RSSI * Update dev version to 0.10.2 * exclude package-lock.json from git * add package-lock.json to .gitignore to avoid merge conflicts * comments * revert font change * Adding some test coverage for /lib/client/renderer.js * send foods via websockets * use websockeets instead of rest api for food * add fat,protein,energy to food editor * Re-enable source maps * replace 3HR with 2HR and (default) 4HR views * only show focusHours' worth of predictions; strip leading zero from bolus amounts * fix spelling of focusRangeMS * change default back to 3HR * try larger label font: 35 instead of 25 (vs. 40) * allow treatment bubbles to scale up past 1U/20g size * change font size back to default in this branch * change Bolus Snooze to Bolus IOB * change Bolus Snooze to Bolus IOB * back to smaller treatment dots * handle AAPS profile switches well * Fix URLs of [mongostring] and [autoconfigure] * update nodejs to 8.7.0 and npm update * do not upload temporary profiles from store * also update nodjes used by travis from 8.5.0 to 8.7.0 * Increase timeout for careportal.test.js and pluginbase.test from 25 to 30 sec., just to be sure. I seem to work once with Node 8.7.0, but the test did a timeout once on Node 8.5.0 on Travis. * increase timeout of admintools.test.js from 25 to 30 seconds * pluginbase.test.js fails with 30 sec. upping to 40 sec timeout ``` not ok 188 pluginbase &quot;before each&quot; hook for &quot;does stuff&quot; Error: timeout of 30000ms exceeded. Ensure the done() callback is being called in this test. ``` * update to nodejs 8.8.0 and npm update * npm update with nodejs 8.8.0 * Update version, remove package-lock.json * upgrade node in .nvmrc from 8.1.4 to 8.8.0 set travis container to dist: trusty and give sudo: false a try * set sudo back to required (used for docker and mongodb commands) * more node upgrade stuff * Update README.md * Fix a bug with time comparison on if-modified-since support for treatments * Check both created_at and timestamp fields for treatments in if-modified-since logic * Add Total daily pasal to profile editor. Small improvoment to profile editor while geting familiar about the code. Added a simple estimated total daily basal field. * Bump 8.8.0 to 8.8.1 * cherry pick 33f16f4439262da2ec74c196bfa7f244910bb6fe * merge rendering * Revert &quot;add package-lock.json to .gitignore to avoid merge conflicts&quot; This reverts commit ec2513084594c851bf9f1d00cc6f3387e75e177b. We now use npm-shrinkwrap.json * fix merge errors, up version and fix test fix merge errros by reverting views/index.html and lib/client/renderer.js, up version in bower.json, npm-shrinkwrap.json and package.json fix test/client.renderer.test.js * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * Revert &quot;bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs)&quot; This reverts commit edbf22b67e178910a76805208b4e011fa21a8ad4. * fix typo foucusRangeMS to focusRangeMS in lib/client/chart.js * for some reasone change from foucusRangeMS to focusRangeMS was not implemented in lib/client/index.js This was fixed on ZT branch in https://github.com/nightscout/cgm-remote-monitor/commit/38d35398d13812cf41d43daeacd2a20c82d5b71d * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * More test coverage for /lib/client/renderer.js (highlightBrushPoints) * display Sensitivity Ratio in OpenAPS pill * add comma * Fix SAGE pill test failing due to summer time change * Upgrading to 8.9.0 LTS (first LTS release!) and also let travis run on both Node 8.9.0 and Node 9.0.0 (to make sure we don't introduce future problems with Node 9.0.0). Node 8.9.0 LTS will be the recommended version. * Drop building with nodejs 9.0.0 for now. Once NodeJS v10 almost appears were gonna test against that version. * Update German translation * Update German translation * added dutch translations * Update Loop pill RSSI (#3034) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Upgrade to node 8.9.1 and npm update and some dutch translation fixes (#3037) * upgrade to node 8.9.1 * further improve dutch language * remove duplicate dutch line Filter * remove dutch language.js record that was defined two times * fix duplicate german language record * reapply npm-shrinkwrap.json to fix unit tests * another try to get a proper npm-shrinkwrap.json * shorten minutes ago in dutch to improve formatting of status pills * deviceInfo.recent null check (#3048) * add root mean squared out of range metric (#3045) * Add recommended bolus and eventual BG to Loop pill (#3040) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Add recommended bolus to Loop pill * Add eventual BG to Loop pill * Update test for Loop pill with eventual BG * Update test for Loop pill with eventual BG * Update bgclock.html (#3039) * Update index.html * Update index.html * Update index.html * Update index.html Remove alarms. * Update index.html * Update index.html Removed alarms: Line 669 &amp; 670 &lt;audio src=&quot;audio/alarm.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;alarm mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; &lt;audio src=&quot;audio/alarm2.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;urgent alarm2 mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; * Add Trend Arrow Add Trend Arrow to glucose value * Update index.html * Update version, improvements to glucose distribution filtering * fix reports (#3078) * fix profile functions * fix loading of profile switch treatments * Shrinkwrap update * Downgrade npm to fix deployment issues * Smarter formatting based on amount of data (#3086) * Smarter formatting based on amount of data, to make sure the rendering works for both SMB and non-SMB users * Move comment to where it belongs, changed math so first 10 treatments don't reduce scaling * better rendering of treatments with duration (#3082) * fix profile functions * fix loading of profile switch treatments * better rendering treatments with duration * * Update Finnish localization * Change SMB visualization to be more friendly * Add BG Clock to navigation * Updated release version * 24 hour clock support for bgclock.html * Going down to 8.9.0 for Azure * Alternate versions in package.json * One final change that should run on both Heroku and Azure</MESSAGE>
      <SHA>46d835b525b8dd42265222911227a7164d3f19c3</SHA>
      <PATCHEDFILES>
        <FILE>.dockerignore</FILE>
        <FILE>.gitignore</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>COPYRIGHT</FILE>
        <FILE>Dockerfile.example</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>azuredeploy.json</FILE>
        <FILE>bin/generateCacheBuster.js</FILE>
        <FILE>bower.json</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>bundle/index.js</FILE>
        <FILE>deploy.sh</FILE>
        <FILE>docs/issue_template.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/client/boluscalc.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/browser-utils.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/data/calcdelta.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/data/ddata.js</FILE>
        <FILE>lib/devicestatus.js</FILE>
        <FILE>lib/hashauth.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/plugins/alexa.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bridge.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pluginbase.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/treatmentnotify.js</FILE>
        <FILE>lib/plugins/upbat.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report_plugins/dailystats.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/hourlystats.js</FILE>
        <FILE>lib/report_plugins/index.js</FILE>
        <FILE>lib/report_plugins/profiles.js</FILE>
        <FILE>lib/report_plugins/treatments.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/treatments.js</FILE>
        <FILE>lib/utils.js</FILE>
        <FILE>lib/websocket.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>setup.sh</FILE>
        <FILE>static/colorbrewer/LICENSE.txt</FILE>
        <FILE>static/colorbrewer/README.md</FILE>
        <FILE>static/colorbrewer/colorbrewer.css</FILE>
        <FILE>static/colorbrewer/colorbrewer.js</FILE>
        <FILE>static/colorbrewer/index.js</FILE>
        <FILE>static/colorbrewer/package.json</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/css/report.css</FILE>
        <FILE>static/css/ui-darkness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_30_cccccc_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_50_5c5c5c_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_20_555555_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_0078a3_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_ffc73d_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_gloss-wave_25_333333_500x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_highlight-soft_80_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_25_000000_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_30_f58400_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_4b8e0b_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_a83300_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_cccccc_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.css</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-darkness/theme.css</FILE>
        <FILE>static/css/ui-lightness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_18_b81900_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_20_666666_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_flat_10_000000_40x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_f6f6f6_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_fdf5ce_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_65_ffffff_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_gloss-wave_35_f6a828_500x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_100_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_75_ffe45c_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_228ef1_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ef8c08_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffd27a_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.css</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-lightness/theme.css</FILE>
        <FILE>static/font/nsicons.eot</FILE>
        <FILE>static/font/nsicons.svg</FILE>
        <FILE>static/font/nsicons.ttf</FILE>
        <FILE>static/font/nsicons.woff</FILE>
        <FILE>static/font/nsicons.woff2</FILE>
        <FILE>static/food/js/food.js</FILE>
        <FILE>static/glyphs/demo.html</FILE>
        <FILE>static/images/DoubleDown.svg</FILE>
        <FILE>static/images/DoubleUp.svg</FILE>
        <FILE>static/images/Flat.svg</FILE>
        <FILE>static/images/FortyFiveDown.svg</FILE>
        <FILE>static/images/FortyFiveUp.svg</FILE>
        <FILE>static/images/NONE.svg</FILE>
        <FILE>static/images/SingleDown.svg</FILE>
        <FILE>static/images/SingleUp.svg</FILE>
        <FILE>static/images/launch.png</FILE>
        <FILE>static/js/client.js</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/radio.html</FILE>
        <FILE>static/report/compare.html</FILE>
        <FILE>static/report/js/flotcandle.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/ar2.test.js</FILE>
        <FILE>tests/basalprofileplugin.test.js</FILE>
        <FILE>tests/bgnow.test.js</FILE>
        <FILE>tests/careportal.test.js</FILE>
        <FILE>tests/client.renderer.test.js</FILE>
        <FILE>tests/fixtures/headless.js</FILE>
        <FILE>tests/fixtures/localstorage.js</FILE>
        <FILE>tests/hashauth.test.js</FILE>
        <FILE>tests/iob.test.js</FILE>
        <FILE>tests/loop.test.js</FILE>
        <FILE>tests/openaps-storage.test.js</FILE>
        <FILE>tests/openaps.test.js</FILE>
        <FILE>tests/pluginbase.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/sensorage.test.js</FILE>
        <FILE>tests/utils.test.js</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/bgclock.html</FILE>
        <FILE>views/clock-color.html</FILE>
        <FILE>views/clock.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/nightscout.appcache</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/translationsindex.html</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update from original (#4) * Data cleaning pass 1 * * Glucose data smoothing / patching before calculating variability to reduce the effects of CGM noise * Added calculation for GVI, PGS and Total Absolute Change calculation * Refactored the server to use Webpack for the bundle generation instead of Browserify (since browserify-express seems to not work with Node 8 and is not maintained) * Improved caching &amp; compression of JS and CSS resources * If NODE_ENV=&quot;development”, don’t cache resources for more than 10 seconds &amp; generate a report about Bundle size * Run packaging in post install instead of runtime * CSS bundling * Fix templates that linked to old bundle.js location * Removing Bower part 1 * Flot plugins * jQuery packaging has changed, adding these to the repo * Generate source map, use a small font subset instead of loading complex CSS / font set from Google * Added missing icons, changed how jQuery and jQuery-UI is packaged * Bower is gone * Remove Crossfilter (needed by /reports/compare, which is not supported right now) * Oops forgot package-lock.json * Revert back to using Open Sans, but embedded * Re-enabled Ubuntu to fix the layouts. Icon font embedded. * Update cache busters * Added variability measure explanations to reporting * Finnish localization * Fix battery icon, some tests * Added app cache manifest to speed things further * Launch PNG was missing * Return 404 on app cache request when in development mode, added bold weight Ubuntu * Formatting improvements to app.js * Added sync-exec in an attempt to appease Azure * Added --scripts-prepend-node-path to Azure deploy script * IT Language * update language.js update Russian translation * RO update August, 27th - 2017 RO update * Trigger app on DOM ready event (as recommended by HTML5 spec). Detect if app is completely offline, auto-reload if needed. * Better looking loader screen, prevent CSS blocking * Use ejs to render the app cache and cache buster tokens * Forgot cache buster generator script * Image had ugly artifacts * Upgrade Travis to build with Node 8.4, update package.json to 8.4 * Doh, 8.1.4 is the latest version of Node available in Azure * Added note on configuring Azure to README * Separate messages for loading the client and connecting to server * Hide loader on auth fail * Support both node 8.1.4 (Azure) and node 8.4.0 (Heroku). Make sure travis builds / tests both versions. Got this syntax from: https://github.com/SAP/chevrotain/commit/cedbffd3261a4f2bfe142ea11d62b9af4fd8d0cb and https://docs.microsoft.com/en-us/azure/nodejs-specify-node-version-azure-apps * Unit tests fixed * Increasing test timeout significantly due to Travis fails * And add the longer timeout to Travis, too… * Now it works * Fixed Coverage running parameter order * Report tests takes over 40 seconds to run in Travis, timeout increased * More test fixes * Increasing Travis timeouts ridiculously, we need to do something to this * minor css fixes * see if document ready is the problem when testing on travis * Revert &quot;see if document ready is the problem when testing on travis&quot; This reverts commit 7428040e0536b55dff48f9b72ea783c25e5afb3c. * Update openaps.js * Update openaps.js * Update openaps.test.js Test for devicestatus-entries containing the correct spelling of the word &quot;received&quot; instead of &quot;recieved&quot; in OpenAPS versions 0.6.0 and later * change node-uuid to uuid * npm update * add environment variables to .travis.yml * increase timeout to 30 secs for admintools test and change environment variables for travis * create bundle before tests and time tests execution for travis * Makefiles requires tabs not space. I knew that... * change Makefile * last try for today * set timeout of profileeditor.test to 30 seconds * increase timeout for profileeditor tests * only support node 8.4.0 and drop support for node 8.1.4 * bundle creation is done by npm postinstall, so should not be called explicit. * revert tests/fixtures/headless.js * revert test/fixtures/headless.js (now without changing indent) * remove env's from .travis.yml (because they might not be needed) * Move all html files to views folder, update to use the rendered cache buster * Fix tests to uses the view path :D * Update README to reflect correct Node version * Implements #2689 * Implements #2456 * One cache buster wasn't updated to dynamic form * decrease timeouts to detect regressions faster in future * Admintools and profileeditor test fails with 20 sec timeout. Increasing to 25 sec. ``` not ok 1 admintools &quot;before all&quot; hook Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/admintools.test.js:177:7 at Object.done (node_modules/benv/index.js:32:21) at process.nextTick (node_modules/jsdom/lib/old-api.js:347:18) at _combinedTickCallback (internal/process/next_tick.js:131:7) at process._tickCallback (internal/process/next_tick.js:180:9) not ok 203 Profile editor &quot;before each&quot; hook for &quot;should produce some html&quot; Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/fixtures/headless.js:160:7 at Object.module.exports.setup (node_modules/benv/index.js:24:56) at Function.init [as setup] (tests/fixtures/headless.js:16:10) at Context.&lt;anonymous&gt; (tests/profileeditor.test.js:94:14) ``` * optimize travis tests. see if 5 sec per test is enough (in stead of 50 sec per test) * the following tests don't complete in 5 sec. increase timeout to 25 sec. * increase profileeditor tests to 40 sec * hasauth.test.js fails with 25 sec. increasing to 40 sec * Small fix to CGM data noise filtering * Add Node version to DEV Azure deploy json * Testing Node 8.1.4 for Azure * Testing disabling heap dumps * Update to 8.5.0 to see if that works without the problematic module * add food to websockets * add node env for deploy in azure * change node to 8.5.0 * Prepare for 0.10 release * Revert part of changes from previous merge * Bump Nightscout version number to 0.10.1-dev * Create issue_template.md Adding an issue template to help solve bugs * Fixes hourly filtering in distrubution reports, reported in #2864 * SVG dimension fix Somehow the NONE.svg ended up with an incorrect rectangle shape; fixed to match the aspect ratio of the other symbols. * preserve original treatment collection * add ZT (zero temp) prediction line * package-lock.json * display ZT PredBGs, and forecast tooltips * remove extra-big tooltip target around treatments; reduce font sizes * make R3/R4 elements into very short arcs to reposition labels * Remove pattern regex from basal change field Having the regex require integers means that only the numeric keypad will pop on iOS. This prevents the entry of negative values, which is pretty critical for temp basals. * filter to only use actual SGV's (not rawbg's) to set the view window * remove console.log * Use lodash cloneDeep instead of JSON serialize/desearialize * update Russian * Cleanup: move cache buster token generation to /bin, remove /scripts * Fix express-minify file cache path to reduce the memory footprint of the runtime * Display RSSI on Loop pill * Add missing fontello icons to main CSS * Update version to release * Loop RSSI fix * One more Loop RSSI fix * Always show RSSI * Update dev version to 0.10.2 * exclude package-lock.json from git * add package-lock.json to .gitignore to avoid merge conflicts * comments * revert font change * Adding some test coverage for /lib/client/renderer.js * send foods via websockets * use websockeets instead of rest api for food * add fat,protein,energy to food editor * Re-enable source maps * replace 3HR with 2HR and (default) 4HR views * only show focusHours' worth of predictions; strip leading zero from bolus amounts * fix spelling of focusRangeMS * change default back to 3HR * try larger label font: 35 instead of 25 (vs. 40) * allow treatment bubbles to scale up past 1U/20g size * change font size back to default in this branch * change Bolus Snooze to Bolus IOB * change Bolus Snooze to Bolus IOB * back to smaller treatment dots * handle AAPS profile switches well * Fix URLs of [mongostring] and [autoconfigure] * update nodejs to 8.7.0 and npm update * do not upload temporary profiles from store * also update nodjes used by travis from 8.5.0 to 8.7.0 * Increase timeout for careportal.test.js and pluginbase.test from 25 to 30 sec., just to be sure. I seem to work once with Node 8.7.0, but the test did a timeout once on Node 8.5.0 on Travis. * increase timeout of admintools.test.js from 25 to 30 seconds * pluginbase.test.js fails with 30 sec. upping to 40 sec timeout ``` not ok 188 pluginbase &quot;before each&quot; hook for &quot;does stuff&quot; Error: timeout of 30000ms exceeded. Ensure the done() callback is being called in this test. ``` * update to nodejs 8.8.0 and npm update * npm update with nodejs 8.8.0 * Update version, remove package-lock.json * upgrade node in .nvmrc from 8.1.4 to 8.8.0 set travis container to dist: trusty and give sudo: false a try * set sudo back to required (used for docker and mongodb commands) * more node upgrade stuff * Update README.md * Fix a bug with time comparison on if-modified-since support for treatments * Check both created_at and timestamp fields for treatments in if-modified-since logic * Add Total daily pasal to profile editor. Small improvoment to profile editor while geting familiar about the code. Added a simple estimated total daily basal field. * Bump 8.8.0 to 8.8.1 * cherry pick 33f16f4439262da2ec74c196bfa7f244910bb6fe * merge rendering * Revert &quot;add package-lock.json to .gitignore to avoid merge conflicts&quot; This reverts commit ec2513084594c851bf9f1d00cc6f3387e75e177b. We now use npm-shrinkwrap.json * fix merge errors, up version and fix test fix merge errros by reverting views/index.html and lib/client/renderer.js, up version in bower.json, npm-shrinkwrap.json and package.json fix test/client.renderer.test.js * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * Revert &quot;bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs)&quot; This reverts commit edbf22b67e178910a76805208b4e011fa21a8ad4. * fix typo foucusRangeMS to focusRangeMS in lib/client/chart.js * for some reasone change from foucusRangeMS to focusRangeMS was not implemented in lib/client/index.js This was fixed on ZT branch in https://github.com/nightscout/cgm-remote-monitor/commit/38d35398d13812cf41d43daeacd2a20c82d5b71d * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * More test coverage for /lib/client/renderer.js (highlightBrushPoints) * display Sensitivity Ratio in OpenAPS pill * add comma * Fix SAGE pill test failing due to summer time change * Upgrading to 8.9.0 LTS (first LTS release!) and also let travis run on both Node 8.9.0 and Node 9.0.0 (to make sure we don't introduce future problems with Node 9.0.0). Node 8.9.0 LTS will be the recommended version. * Drop building with nodejs 9.0.0 for now. Once NodeJS v10 almost appears were gonna test against that version. * Update German translation * Update German translation * added dutch translations * Update Loop pill RSSI (#3034) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Upgrade to node 8.9.1 and npm update and some dutch translation fixes (#3037) * upgrade to node 8.9.1 * further improve dutch language * remove duplicate dutch line Filter * remove dutch language.js record that was defined two times * fix duplicate german language record * reapply npm-shrinkwrap.json to fix unit tests * another try to get a proper npm-shrinkwrap.json * shorten minutes ago in dutch to improve formatting of status pills * deviceInfo.recent null check (#3048) * add root mean squared out of range metric (#3045) * Add recommended bolus and eventual BG to Loop pill (#3040) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Add recommended bolus to Loop pill * Add eventual BG to Loop pill * Update test for Loop pill with eventual BG * Update test for Loop pill with eventual BG * Update bgclock.html (#3039) * Update index.html * Update index.html * Update index.html * Update index.html Remove alarms. * Update index.html * Update index.html Removed alarms: Line 669 &amp; 670 &lt;audio src=&quot;audio/alarm.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;alarm mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; &lt;audio src=&quot;audio/alarm2.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;urgent alarm2 mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; * Add Trend Arrow Add Trend Arrow to glucose value * Update index.html * Update version, improvements to glucose distribution filtering * fix reports (#3078) * fix profile functions * fix loading of profile switch treatments * Shrinkwrap update * Downgrade npm to fix deployment issues * Smarter formatting based on amount of data (#3086) * Smarter formatting based on amount of data, to make sure the rendering works for both SMB and non-SMB users * Move comment to where it belongs, changed math so first 10 treatments don't reduce scaling * better rendering of treatments with duration (#3082) * fix profile functions * fix loading of profile switch treatments * better rendering treatments with duration * * Update Finnish localization * Change SMB visualization to be more friendly * Add BG Clock to navigation * Updated release version * 24 hour clock support for bgclock.html * Going down to 8.9.0 for Azure * Alternate versions in package.json * One final change that should run on both Heroku and Azure</MESSAGE>
      <SHA>bbf01a8aba9ff8021fb040d1faa3255eb09e6466</SHA>
      <PATCHEDFILES>
        <FILE>.dockerignore</FILE>
        <FILE>.gitignore</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>COPYRIGHT</FILE>
        <FILE>Dockerfile.example</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>azuredeploy.json</FILE>
        <FILE>bin/generateCacheBuster.js</FILE>
        <FILE>bower.json</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>bundle/index.js</FILE>
        <FILE>deploy.sh</FILE>
        <FILE>docs/issue_template.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/client/boluscalc.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/browser-utils.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/data/calcdelta.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/data/ddata.js</FILE>
        <FILE>lib/devicestatus.js</FILE>
        <FILE>lib/hashauth.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/plugins/alexa.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bridge.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pluginbase.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/treatmentnotify.js</FILE>
        <FILE>lib/plugins/upbat.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report_plugins/dailystats.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/hourlystats.js</FILE>
        <FILE>lib/report_plugins/index.js</FILE>
        <FILE>lib/report_plugins/profiles.js</FILE>
        <FILE>lib/report_plugins/treatments.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/treatments.js</FILE>
        <FILE>lib/utils.js</FILE>
        <FILE>lib/websocket.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>setup.sh</FILE>
        <FILE>static/colorbrewer/LICENSE.txt</FILE>
        <FILE>static/colorbrewer/README.md</FILE>
        <FILE>static/colorbrewer/colorbrewer.css</FILE>
        <FILE>static/colorbrewer/colorbrewer.js</FILE>
        <FILE>static/colorbrewer/index.js</FILE>
        <FILE>static/colorbrewer/package.json</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/css/report.css</FILE>
        <FILE>static/css/ui-darkness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_30_cccccc_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_50_5c5c5c_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_20_555555_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_0078a3_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_ffc73d_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_gloss-wave_25_333333_500x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_highlight-soft_80_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_25_000000_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_30_f58400_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_4b8e0b_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_a83300_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_cccccc_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.css</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-darkness/theme.css</FILE>
        <FILE>static/css/ui-lightness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_18_b81900_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_20_666666_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_flat_10_000000_40x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_f6f6f6_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_fdf5ce_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_65_ffffff_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_gloss-wave_35_f6a828_500x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_100_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_75_ffe45c_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_228ef1_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ef8c08_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffd27a_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.css</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-lightness/theme.css</FILE>
        <FILE>static/font/nsicons.eot</FILE>
        <FILE>static/font/nsicons.svg</FILE>
        <FILE>static/font/nsicons.ttf</FILE>
        <FILE>static/font/nsicons.woff</FILE>
        <FILE>static/font/nsicons.woff2</FILE>
        <FILE>static/food/js/food.js</FILE>
        <FILE>static/glyphs/demo.html</FILE>
        <FILE>static/images/DoubleDown.svg</FILE>
        <FILE>static/images/DoubleUp.svg</FILE>
        <FILE>static/images/Flat.svg</FILE>
        <FILE>static/images/FortyFiveDown.svg</FILE>
        <FILE>static/images/FortyFiveUp.svg</FILE>
        <FILE>static/images/NONE.svg</FILE>
        <FILE>static/images/SingleDown.svg</FILE>
        <FILE>static/images/SingleUp.svg</FILE>
        <FILE>static/images/launch.png</FILE>
        <FILE>static/js/client.js</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/radio.html</FILE>
        <FILE>static/report/compare.html</FILE>
        <FILE>static/report/js/flotcandle.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/ar2.test.js</FILE>
        <FILE>tests/basalprofileplugin.test.js</FILE>
        <FILE>tests/bgnow.test.js</FILE>
        <FILE>tests/careportal.test.js</FILE>
        <FILE>tests/client.renderer.test.js</FILE>
        <FILE>tests/fixtures/headless.js</FILE>
        <FILE>tests/fixtures/localstorage.js</FILE>
        <FILE>tests/hashauth.test.js</FILE>
        <FILE>tests/iob.test.js</FILE>
        <FILE>tests/loop.test.js</FILE>
        <FILE>tests/openaps-storage.test.js</FILE>
        <FILE>tests/openaps.test.js</FILE>
        <FILE>tests/pluginbase.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/sensorage.test.js</FILE>
        <FILE>tests/utils.test.js</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/bgclock.html</FILE>
        <FILE>views/clock-color.html</FILE>
        <FILE>views/clock.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/nightscout.appcache</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/translationsindex.html</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Beforeupg 1404 (#3) * RO update August, 27th - 2017 RO update * Trigger app on DOM ready event (as recommended by HTML5 spec). Detect if app is completely offline, auto-reload if needed. * Better looking loader screen, prevent CSS blocking * Use ejs to render the app cache and cache buster tokens * Forgot cache buster generator script * Image had ugly artifacts * Upgrade Travis to build with Node 8.4, update package.json to 8.4 * Doh, 8.1.4 is the latest version of Node available in Azure * Added note on configuring Azure to README * Separate messages for loading the client and connecting to server * Hide loader on auth fail * Support both node 8.1.4 (Azure) and node 8.4.0 (Heroku). Make sure travis builds / tests both versions. Got this syntax from: https://github.com/SAP/chevrotain/commit/cedbffd3261a4f2bfe142ea11d62b9af4fd8d0cb and https://docs.microsoft.com/en-us/azure/nodejs-specify-node-version-azure-apps * Unit tests fixed * Increasing test timeout significantly due to Travis fails * And add the longer timeout to Travis, too… * Now it works * Fixed Coverage running parameter order * Report tests takes over 40 seconds to run in Travis, timeout increased * More test fixes * Increasing Travis timeouts ridiculously, we need to do something to this * minor css fixes * see if document ready is the problem when testing on travis * Revert &quot;see if document ready is the problem when testing on travis&quot; This reverts commit 7428040e0536b55dff48f9b72ea783c25e5afb3c. * Update openaps.js * Update openaps.js * Update openaps.test.js Test for devicestatus-entries containing the correct spelling of the word &quot;received&quot; instead of &quot;recieved&quot; in OpenAPS versions 0.6.0 and later * change node-uuid to uuid * npm update * add environment variables to .travis.yml * increase timeout to 30 secs for admintools test and change environment variables for travis * create bundle before tests and time tests execution for travis * Makefiles requires tabs not space. I knew that... * change Makefile * last try for today * set timeout of profileeditor.test to 30 seconds * increase timeout for profileeditor tests * only support node 8.4.0 and drop support for node 8.1.4 * bundle creation is done by npm postinstall, so should not be called explicit. * revert tests/fixtures/headless.js * revert test/fixtures/headless.js (now without changing indent) * remove env's from .travis.yml (because they might not be needed) * Move all html files to views folder, update to use the rendered cache buster * Fix tests to uses the view path :D * Update README to reflect correct Node version * Implements #2689 * Implements #2456 * One cache buster wasn't updated to dynamic form * decrease timeouts to detect regressions faster in future * Admintools and profileeditor test fails with 20 sec timeout. Increasing to 25 sec. ``` not ok 1 admintools &quot;before all&quot; hook Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/admintools.test.js:177:7 at Object.done (node_modules/benv/index.js:32:21) at process.nextTick (node_modules/jsdom/lib/old-api.js:347:18) at _combinedTickCallback (internal/process/next_tick.js:131:7) at process._tickCallback (internal/process/next_tick.js:180:9) not ok 203 Profile editor &quot;before each&quot; hook for &quot;should produce some html&quot; Error: timeout of 20000ms exceeded. Ensure the done() callback is being called in this test. at tests/fixtures/headless.js:160:7 at Object.module.exports.setup (node_modules/benv/index.js:24:56) at Function.init [as setup] (tests/fixtures/headless.js:16:10) at Context.&lt;anonymous&gt; (tests/profileeditor.test.js:94:14) ``` * optimize travis tests. see if 5 sec per test is enough (in stead of 50 sec per test) * the following tests don't complete in 5 sec. increase timeout to 25 sec. * increase profileeditor tests to 40 sec * hasauth.test.js fails with 25 sec. increasing to 40 sec * Small fix to CGM data noise filtering * Add Node version to DEV Azure deploy json * Testing Node 8.1.4 for Azure * Testing disabling heap dumps * Update to 8.5.0 to see if that works without the problematic module * add food to websockets * add node env for deploy in azure * change node to 8.5.0 * Prepare for 0.10 release * Revert part of changes from previous merge * Bump Nightscout version number to 0.10.1-dev * Create issue_template.md Adding an issue template to help solve bugs * Fixes hourly filtering in distrubution reports, reported in #2864 * SVG dimension fix Somehow the NONE.svg ended up with an incorrect rectangle shape; fixed to match the aspect ratio of the other symbols. * preserve original treatment collection * add ZT (zero temp) prediction line * package-lock.json * display ZT PredBGs, and forecast tooltips * remove extra-big tooltip target around treatments; reduce font sizes * make R3/R4 elements into very short arcs to reposition labels * Remove pattern regex from basal change field Having the regex require integers means that only the numeric keypad will pop on iOS. This prevents the entry of negative values, which is pretty critical for temp basals. * filter to only use actual SGV's (not rawbg's) to set the view window * remove console.log * Use lodash cloneDeep instead of JSON serialize/desearialize * update Russian * Cleanup: move cache buster token generation to /bin, remove /scripts * Fix express-minify file cache path to reduce the memory footprint of the runtime * Display RSSI on Loop pill * Add missing fontello icons to main CSS * Update version to release * Loop RSSI fix * One more Loop RSSI fix * Always show RSSI * Update dev version to 0.10.2 * exclude package-lock.json from git * add package-lock.json to .gitignore to avoid merge conflicts * comments * revert font change * Adding some test coverage for /lib/client/renderer.js * send foods via websockets * use websockeets instead of rest api for food * add fat,protein,energy to food editor * Re-enable source maps * replace 3HR with 2HR and (default) 4HR views * only show focusHours' worth of predictions; strip leading zero from bolus amounts * fix spelling of focusRangeMS * change default back to 3HR * try larger label font: 35 instead of 25 (vs. 40) * allow treatment bubbles to scale up past 1U/20g size * change font size back to default in this branch * change Bolus Snooze to Bolus IOB * change Bolus Snooze to Bolus IOB * back to smaller treatment dots * handle AAPS profile switches well * Fix URLs of [mongostring] and [autoconfigure] * update nodejs to 8.7.0 and npm update * do not upload temporary profiles from store * also update nodjes used by travis from 8.5.0 to 8.7.0 * Increase timeout for careportal.test.js and pluginbase.test from 25 to 30 sec., just to be sure. I seem to work once with Node 8.7.0, but the test did a timeout once on Node 8.5.0 on Travis. * increase timeout of admintools.test.js from 25 to 30 seconds * pluginbase.test.js fails with 30 sec. upping to 40 sec timeout ``` not ok 188 pluginbase &quot;before each&quot; hook for &quot;does stuff&quot; Error: timeout of 30000ms exceeded. Ensure the done() callback is being called in this test. ``` * update to nodejs 8.8.0 and npm update * npm update with nodejs 8.8.0 * Update version, remove package-lock.json * upgrade node in .nvmrc from 8.1.4 to 8.8.0 set travis container to dist: trusty and give sudo: false a try * set sudo back to required (used for docker and mongodb commands) * more node upgrade stuff * Update README.md * Fix a bug with time comparison on if-modified-since support for treatments * Check both created_at and timestamp fields for treatments in if-modified-since logic * Add Total daily pasal to profile editor. Small improvoment to profile editor while geting familiar about the code. Added a simple estimated total daily basal field. * Bump 8.8.0 to 8.8.1 * cherry pick 33f16f4439262da2ec74c196bfa7f244910bb6fe * merge rendering * Revert &quot;add package-lock.json to .gitignore to avoid merge conflicts&quot; This reverts commit ec2513084594c851bf9f1d00cc6f3387e75e177b. We now use npm-shrinkwrap.json * fix merge errors, up version and fix test fix merge errros by reverting views/index.html and lib/client/renderer.js, up version in bower.json, npm-shrinkwrap.json and package.json fix test/client.renderer.test.js * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * Revert &quot;bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs)&quot; This reverts commit edbf22b67e178910a76805208b4e011fa21a8ad4. * fix typo foucusRangeMS to focusRangeMS in lib/client/chart.js * for some reasone change from foucusRangeMS to focusRangeMS was not implemented in lib/client/index.js This was fixed on ZT branch in https://github.com/nightscout/cgm-remote-monitor/commit/38d35398d13812cf41d43daeacd2a20c82d5b71d * bring back the ' U' for non-SMB's (&gt; 1U insulin and with carbs) * test new api * name as parameter * req.params -&gt; req.query * handle no param value * More test coverage for /lib/client/renderer.js (highlightBrushPoints) * display Sensitivity Ratio in OpenAPS pill * add comma * Fix SAGE pill test failing due to summer time change * Upgrading to 8.9.0 LTS (first LTS release!) and also let travis run on both Node 8.9.0 and Node 9.0.0 (to make sure we don't introduce future problems with Node 9.0.0). Node 8.9.0 LTS will be the recommended version. * Drop building with nodejs 9.0.0 for now. Once NodeJS v10 almost appears were gonna test against that version. * Update German translation * Update German translation * added dutch translations * Update Loop pill RSSI (#3034) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Upgrade to node 8.9.1 and npm update and some dutch translation fixes (#3037) * upgrade to node 8.9.1 * further improve dutch language * remove duplicate dutch line Filter * remove dutch language.js record that was defined two times * fix duplicate german language record * reapply npm-shrinkwrap.json to fix unit tests * another try to get a proper npm-shrinkwrap.json * shorten minutes ago in dutch to improve formatting of status pills * исправление перевода * опечатки * deviceInfo.recent null check (#3048) * add root mean squared out of range metric (#3045) * Add recommended bolus and eventual BG to Loop pill (#3040) * Update package.json * update package.json * Update loop.js * test * add BLE RSSI * add BLE RSSI * update RSSI time stamp * update Loop RSSI reporting * update Loop RSSI reporting * show RSSI and pumpRSSI in Loop pill, if available * update Loop pill RSSI * Update RSSI in Loop pill * Add recommended bolus to Loop pill * Add eventual BG to Loop pill * Update test for Loop pill with eventual BG * Update test for Loop pill with eventual BG * Update bgclock.html (#3039) * Update index.html * Update index.html * Update index.html * Update index.html Remove alarms. * Update index.html * Update index.html Removed alarms: Line 669 &amp; 670 &lt;audio src=&quot;audio/alarm.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;alarm mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; &lt;audio src=&quot;audio/alarm2.mp3&quot; preload=&quot;auto&quot; loop=&quot;true&quot; class=&quot;urgent alarm2 mp3&quot; type=&quot;audio/mp3&quot;&gt;&lt;/audio&gt; * Add Trend Arrow Add Trend Arrow to glucose value * Update index.html * Update version, improvements to glucose distribution filtering * fix reports (#3078) * fix profile functions * fix loading of profile switch treatments * Shrinkwrap update * Downgrade npm to fix deployment issues * Smarter formatting based on amount of data (#3086) * Smarter formatting based on amount of data, to make sure the rendering works for both SMB and non-SMB users * Move comment to where it belongs, changed math so first 10 treatments don't reduce scaling * better rendering of treatments with duration (#3082) * fix profile functions * fix loading of profile switch treatments * better rendering treatments with duration * * Update Finnish localization * Change SMB visualization to be more friendly * Add BG Clock to navigation * Updated release version * 24 hour clock support for bgclock.html * Going down to 8.9.0 for Azure * Alternate versions in package.json * One final change that should run on both Heroku and Azure * smb commands * +get smb * fix params * fix params * allowed 0 * fixed req.body.units &gt;= 0 * fix translation with %1 * fix &quot;%1h ago&quot; * lastCarbsReq - show req value of carbs by openaps * add debug output for carbsReq * fix debug trigger * some debug * more debug * debug * last attempt to debug * updateVisualisation debug log * change to carbsReq = -10; * cancel last changing * remove debug log * Update timeago.js * Update timeago.js * Update timeago.js Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; Co-authored-by: Tanja Schmidt &lt;schreibtanja@gmail.com&gt; Co-authored-by: Bog Dan &lt;bogdangorescu@gmail.com&gt; Co-authored-by: boysim &lt;18055382+boysim@users.noreply.github.com&gt; Co-authored-by: PieterGit &lt;pieterg@gmail.com&gt; Co-authored-by: Jason Calabrese &lt;jason@cbrese.com&gt; Co-authored-by: drnoname82 &lt;skyrock@web.de&gt; Co-authored-by: PieterGit &lt;PieterGit@pieterb.com&gt; Co-authored-by: MilosKozak &lt;m.kozak@sysop.cz&gt; Co-authored-by: John Weston &lt;john@sixtyten.ca&gt; Co-authored-by: Scott &lt;scottleibrand@gmail.com&gt; Co-authored-by: fedor apanasenko &lt;apanasef@gmail.com&gt; Co-authored-by: Christopher Fredregill &lt;fredr154@gmail.com&gt; Co-authored-by: Nico Schmitz &lt;post@schmitz-nico.de&gt; Co-authored-by: Alim Hassam &lt;alim.hassam@gmail.com&gt; Co-authored-by: alexvolo &lt;alexvolo@gmail.com&gt; Co-authored-by: Simon Pauwels &lt;boysim.diabeteshacking@gmail.com&gt; Co-authored-by: Dragan Maksimovic &lt;maksimov@colorado.edu&gt; Co-authored-by: PieterGit &lt;Pieterb@pieterb.com&gt; Co-authored-by: Jake Pusateri &lt;jakepusateri@gmail.com&gt; Co-authored-by: Daniel Harrelson &lt;email@danielharrelson.com&gt; Co-authored-by: alexvolo &lt;alexvolo@mail.ru&gt;</MESSAGE>
      <SHA>85a341c09d6853ef277a3d4a50a5e1e74cf4c2a7</SHA>
      <PATCHEDFILES>
        <FILE>.gitignore</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>Dockerfile.example</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>azuredeploy.json</FILE>
        <FILE>bin/generateCacheBuster.js</FILE>
        <FILE>bower.json</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>deploy.sh</FILE>
        <FILE>docs/issue_template.md</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/experiments/index.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/client/boluscalc.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/data/ddata.js</FILE>
        <FILE>lib/devicestatus.js</FILE>
        <FILE>lib/hashauth.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/plugins/alexa.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bridge.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/timeago.js</FILE>
        <FILE>lib/plugins/treatmentnotify.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/treatments.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>setup.sh</FILE>
        <FILE>static/colorbrewer/LICENSE.txt</FILE>
        <FILE>static/colorbrewer/README.md</FILE>
        <FILE>static/colorbrewer/colorbrewer.css</FILE>
        <FILE>static/colorbrewer/colorbrewer.js</FILE>
        <FILE>static/colorbrewer/index.js</FILE>
        <FILE>static/colorbrewer/package.json</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/css/report.css</FILE>
        <FILE>static/css/ui-darkness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_30_cccccc_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_flat_50_5c5c5c_40x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_20_555555_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_0078a3_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_glass_40_ffc73d_1x400.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_gloss-wave_25_333333_500x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_highlight-soft_80_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_25_000000_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-bg_inset-soft_30_f58400_1x100.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_4b8e0b_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_a83300_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_cccccc_256x240.png</FILE>
        <FILE>static/css/ui-darkness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.css</FILE>
        <FILE>static/css/ui-darkness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-darkness/theme.css</FILE>
        <FILE>static/css/ui-lightness/images/animated-overlay.gif</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_18_b81900_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_diagonals-thick_20_666666_40x40.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_flat_10_000000_40x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_f6f6f6_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_100_fdf5ce_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_glass_65_ffffff_1x400.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_gloss-wave_35_f6a828_500x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_100_eeeeee_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-bg_highlight-soft_75_ffe45c_1x100.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_222222_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_228ef1_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ef8c08_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffd27a_256x240.png</FILE>
        <FILE>static/css/ui-lightness/images/ui-icons_ffffff_256x240.png</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.css</FILE>
        <FILE>static/css/ui-lightness/jquery-ui.min.css</FILE>
        <FILE>static/css/ui-lightness/theme.css</FILE>
        <FILE>static/font/nsicons.eot</FILE>
        <FILE>static/font/nsicons.svg</FILE>
        <FILE>static/font/nsicons.ttf</FILE>
        <FILE>static/font/nsicons.woff</FILE>
        <FILE>static/font/nsicons.woff2</FILE>
        <FILE>static/food/js/food.js</FILE>
        <FILE>static/glyphs/demo.html</FILE>
        <FILE>static/images/NONE.svg</FILE>
        <FILE>static/images/launch.png</FILE>
        <FILE>static/js/client.js</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/radio.html</FILE>
        <FILE>static/report/compare.html</FILE>
        <FILE>static/report/js/flotcandle.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/ar2.test.js</FILE>
        <FILE>tests/basalprofileplugin.test.js</FILE>
        <FILE>tests/careportal.test.js</FILE>
        <FILE>tests/client.renderer.test.js</FILE>
        <FILE>tests/fixtures/headless.js</FILE>
        <FILE>tests/fixtures/localstorage.js</FILE>
        <FILE>tests/hashauth.test.js</FILE>
        <FILE>tests/iob.test.js</FILE>
        <FILE>tests/loop.test.js</FILE>
        <FILE>tests/openaps.test.js</FILE>
        <FILE>tests/pluginbase.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/sensorage.test.js</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/bgclock.html</FILE>
        <FILE>views/clock-color.html</FILE>
        <FILE>views/clock.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/nightscout.appcache</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/translationsindex.html</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
