<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4050</ISSUENO>
  <ISSUEURL>https://github.com/nightscout/cgm-remote-monitor/issues/4050</ISSUEURL>
  <TITLE>Hyperlink to GVI and PGS explanations doesn't work anymore</TITLE>
  <DESCRIPTION>**Describe the bug** Link to GVI explanations doesn't work anymore ![screenshot_20181105-232216_1](https://user-images.githubusercontent.com/28366579/48030644-0c04a900-e152-11e8-98e9-fa446384ddd7.jpg)</DESCRIPTION>
  <REPONAME>cgm-remote-monitor</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #4030 from apanasef/patch-23 Update Russian</MESSAGE>
    <SHA>36ac89aeda5637f873976c1ad6de35b95776a38f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore)</MESSAGE>
      <SHA>24b093f5d55d40301932b74563ef97f9e627144e</SHA>
      <PATCHEDFILES>
        <FILE>lib/language.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>v1 (#1) * travis. always build latest lts and latest stable source: https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#specifying-nodejs-versions * make travis more clear to build for node js 8 and 10 * add cgm sensor stop * Update alexa-plugin.md Add note about using mmol/L * fix daylight saving bug in profile editor where From time select lists are showing duplicate/missing entries * Update Russian this one looks ok --- there was a typo in my previous pr -- https://github.com/nightscout/cgm-remote-monitor/pull/3795 * Fixes day to day rendering crashing if data contains a Profile Switch event without a profile * Previous fix actually appended a blank note, this checks if the data is correct and bails out early if not * redirect HTTP to HTTPS unless explicitly instructed not to do this redirection * add support for HSTS and other security related HTTP headers via helmet * fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore) * Added new phrase to language.js * Missed initializing one. * Grammar and typo updates. External links included where necessary. * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * add contributor table and rerun doctoc * make links to github profile * last fixes to CONTRIBUTING.md for tonight * fix toc * npm update and manual upgrade to newer versions * Add jpcunningh to some plugins in CONTRIBUTING * Reduce the amount of Profile Switch treatments being loaded, to fix #4055 * After discussing with Milos, actually only guarantee 1 duration 0 profile change object in addition to the default 8 days of treatments * Wrong keyword in how the limit is applied * npm update and remove mqtt * remove sgvdata * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * Add treatments delete id debug. * Fix devicestatus ObjectID usage. * Use new objId in api call * Make ObjectID initialization consistent * Fix syntax errors in websocket.js (cherry picked from commit c945c2e4e0b2f8a7121a1afa8d2af758f2805c6a) * update fontello use fontello-cli --config ./config.json install and move the files to the staic/glyphs directory * minor german language changes * Adding me to list of translators * improve helmet use * add default security settings and test * add default for hsts extendsettings * fix app.json * redirect by default * test * test csp * allow 'unsafe-inline' for stylesSrc and scriptSrc * Turkish language support added * npm update, disable Content Security Policy headers for now. Currently Nightscout is not yet compatible with CSP. * fix settings.test.js * fix INSECURE_USE_HTTP * Some correction * Some corrections * Some corrections-1 * Some corrections-2 * Some corrections-3 * clean Turkish language support * Fix identation * Initial weektoweek * More updates for weektoweek * Add weektoweek report to index * Fix syntax error * Fix syntax error * Fix spelling for localeData * Fix initialization of weekstoshow array * Initialize new week * Fix call to prepareHtml * Make new sgv array for each week * Fix reference into datastorage array * Increment currDay as required * error correction rising/falling * Add weektoweek debug logs * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * clean Turkish language support * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Fix syntax error * Fixed index error * Handle sort order differences * Sort week before prepareHtml * Fix syntax error * Test fix for week partition * Fix first day of week getting squashed * Fix it for real this time * Update app.json * Fix missing comma * Adds back the support for loading Entries with CSV and TEXT formats (#4114) * Adds back the support for loading Entries with CSV and TEXT formats * Add default JSON processing MIME type to request formatting * Cleanly return a blank string if no entries are found * Restore TSV output extension, better logging * Initial Japanese Additions * Don't move to next week if current week is empty * Fix syntax error * Color by day and week report specific size and scale * Comment out some debug * style format update * Use from and to dates to set week span for week2week * Fix newest on top start point * Fix newest on top * Don't render week to week if not selected * Add unit test for weektoweek report * Remove weektoweek logging code * Add clean treatments admin tool. * Fix clean treatments status html id name * Return status to treatments delete by query * Add clean entries db admin tool (cherry picked from commit f56f0b3ba42e2472069775507402e6309d29c26c) * Correct delete query fields for entries db * Make devicestatus delete consistent with entries * cleanup devicestatus delete * Add isId to api/devicestatus * Set query options correctly for devicestatus * Use dateString for devicestatus date field * Fix devicestatus default date field * Fix devicestatus delete query handling * No 'model' concept for devicestatus * initialize query find by id correctly for devicestatus delete * Match devicestatus api indention * Make treatments delete match devicestatus * Remove old treatments id api path * Add entries support for delete query * Remove unused function. * Removed unused function. * Add API updates for new delete options. * Reload data when entries or treatments are deleted * Fix week 2 week report when not all weekdays are selected * Fix weekNum calculation * Make week2week more resilient to date selections * Fix codacy findings * Remove more unused variables * Add new strings to language.js * Prevent deleting entries or treatments more recent than 2 days ago * Add unit test for removing old devicestatus records * Fix codacy finding * Add unit test for cleantreatmentsdb.js * Add unit test for cleanentriesdb.js * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Add insert, query, delete test for treatments api * Add insert, query, delete test for entries api * Add insert, query, delete test for devicestatus api * Japanese! Adding myself as a Japanese Translator. ^_^ * More Japanese Trying to add an additional update. Having issues with the process. Hopefully I got it this time! * Add support for Node 10. Upgrade to node 8.14.x . Don't start on older Node versions (except Node 8.11.1 from Azure) - incorporates https://github.com/nightscout/cgm-remote-monitor/pull/4134 and https://github.com/nightscout/cgm-remote-monitor/pull/4129 * allow node ^10.4.2 || ^8.14.1 || ~8.11.1 * fix version typo and add missing parts of PR * Additions and improvements for Danish language * Update bgclock.html Fix for clock showing &quot;24:xx&quot; in 24-hour mode. * Pad 24h hours with zero * Upgrade to Node 10 for Azure. Upgrade to version Node 8.15.0 for Node 8 users. According to Darren Lee @balshor Node 10.14.1 is available on Azure, see https://gitter.im/nightscout/public?at=5c2a50c70b7fc97caaca6211 or https://gist.github.com/balshor/f3bbb86ff98eeecefc5dd4bdb4118b1b * update code comments on Node versions thanks @jpcunningh https://github.com/nightscout/cgm-remote-monitor/pull/4155#discussion_r244617986 * Updated rawbg settings to use a single setting tri-state variable. * upgrade share2nightscout-bridge to ~0.2.0-dev-20190102 Use npm released version instead of wip/generalize branch. This version will also make sure Nightscout won't crash if Dexcom servers are down. * update to released version of share2nightscout-bridge and update webpck-cli to 3.2.0 * Added Japanese Added Japanese and myself to the list of editors. :) Hope I got the details right! * add jsdom pinned to 11.11.0 (required for benv unit tests) * Make weektoweek use SCALE_Y system setting correctly * Make default scale y initialize correctly * Cleanup code for initializing weektoweek scale * Add mmconnect note to the ENABLE description * Add MMCONNECT_ vars * Update minimed-connect-to-nightscout reference * Update moment dependency to match dev * Removed advanced entries for clarity Didn't get any feedback either way on this change after multiple enquiries, so going ahead with simplification here. If anyone sorely misses any of these items from the default form, can always put them back in. Also added SHOW_PLUGINS, as it's a useful starter setting. * Tweak mLab/Mongo wording * Have the UI fully update immediately after new data update. Debounce the Mongo loading for 5 seconds after data has been updated (#4189) * Update --bug-report.md Adding auto-labeling of bugs with the bug label * Update README.md Added clarity to ssl config details, and specifics for the use of letsencrypt * Update README.md Feedback from @unsoluble * Fixed the spacing. I see what you mean. Fixed it. :) * Semiquote Used the wrong semiquote.. urg. sorry! All better now. * spacing check. * Spacing Test x2 * This should do it! * Norwegian language corrections and translations * make Saving profile translatable * revert minimed-connect version * two small tweaks * fix readENVTruthy and make INSECURE_USE_HTTP, SECURE_HSTS_HEADER, SECURE_HSTS_HEADER_* and SECURE_CSP work as expected. readENVTruthy never returned defaultValue. if not set to on|off|true|false the default value is returned * npm update * add missing env * upgrade to minmum of Node 10.15.1 * fix ident and add extra test to env.test.js * remove mqtt leftover * ie8 is not compatible with Terser, so make that explicit * npm update and integrate terser-webpack-plugin as minimizer Stick to `terser` version `~3.14.1` instead of `^3.16.0`, because of ``` ERROR in js/bundle.js from Terser TypeError: Cannot read property 'minify' of undefined at minify (E:\path\toc\cgm-remote-monitor\node_modules\terser-webpack-plugin\dist\minify.js:175:23) ``` See https://github.com/terser-js/terser/pull/254 for details on that bug * user correct env * Update IFTTT maker-setup.md docs (#4206) * Create test.md Create folder maker-setup-images * Add files via upload Added images to maker-setup-images * Delete test.md Delete temp file * Update maker-setup.md * Update README.md Altered the IFTTT section * Loopalyzer enhanced (#4215) * Added table with profiles First attempt * Prettified profiles table, ensured last profile displayed * 1st attempt add showing active profile * Finalized support for displaying multiple profiles * Improved deduplication of profiles * Restored formatting * Made profiles table a selectable option * Tolerant in case profile is missing data * More tolerant on bad profiles * Refactored the deduplication Note - needs to be thoroughly tested * Fixed the profiles table and deduplication of profiles * Fixed enable/disable of time shift checkbox * Added explanation of time shift feature * Added timeshift explanation Need to run through a last verification before merging to NS, but my NS currently won't build b/c of npm issues. * Final Loopalyzer-enhanced Profiles table works, information on time shift feature added, time shift disabled when only single day. * Maker docs copyedit &amp; cleanup (#4256) * copyedit-and-cleanup * fix filename typo * Reimplement Predictions support to Reports (#4254) * reimplement https://github.com/nightscout/cgm-remote-monitor/pull/3179 (Predictions support to Reports) * add predictions.js * set version to release candidate 1: 0.11.0-rc1-20190205 (#4259) * Tag matafiles with 0.10.3-master-20180805 * Fixes the site for iOS 9 and older * Name too long, please switch back to BWP * Create issue templates for NS repo * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Update --bug-report.md Adding auto-labeling of bugs with the bug label * fix contributors (#4260) * fix typo in contributors * fix typo * Fix auth button ui &amp; update cache busting for App Cache (#4270) * small doc fix to comments on Node versions * Update README.md * * Fixes authentication dialog UI on Mobile Safari * Improves app cache busting, so after deploy the app is guaranteed to notice it has to reload content * Small fix to Finnish language related to auth UI * Merge master to dev (#4273) Merging changes made to Master since last release into Dev for a release * Update release version * release 0.11.1 (#4279) * Update dev version to 0.11.1 * remove + from version, make way for 0.11.1, upgrade webpack (#4277)</MESSAGE>
      <SHA>c3a143fa233e6c80494b00e18bdf1f66ae2072d4</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/--bug-report.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--feature-request--.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--individual-troubleshooting-help.md</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>app.json</FILE>
        <FILE>bundle/index.js</FILE>
        <FILE>docs/plugins/alexa-plugin.md</FILE>
        <FILE>docs/plugins/maker-setup-images/action_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/blue_that.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/config_vars_enable.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/config_vars_maker.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/maker_key.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/notification_message.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/service_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/service_settings_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/set_trigger.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/webhooks_settings.jpg</FILE>
        <FILE>docs/plugins/maker-setup.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/admin_plugins/cleanentriesdb.js</FILE>
        <FILE>lib/admin_plugins/cleanstatusdb.js</FILE>
        <FILE>lib/admin_plugins/cleantreatmentsdb.js</FILE>
        <FILE>lib/admin_plugins/index.js</FILE>
        <FILE>lib/api/devicestatus/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/profile/index.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/hashauth.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/maker-setup.md</FILE>
        <FILE>lib/plugins/rawbg.js</FILE>
        <FILE>lib/plugins/xdrip-js.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/index.js</FILE>
        <FILE>lib/report_plugins/loopalyzer.js</FILE>
        <FILE>lib/report_plugins/weektoweek.js</FILE>
        <FILE>lib/server/activity.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/server/devicestatus.js</FILE>
        <FILE>lib/server/entries.js</FILE>
        <FILE>lib/server/food.js</FILE>
        <FILE>lib/server/mqtt.js</FILE>
        <FILE>lib/server/profile.js</FILE>
        <FILE>lib/server/treatments.js</FILE>
        <FILE>lib/server/websocket.js</FILE>
        <FILE>lib/settings.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>server.js</FILE>
        <FILE>setup.sh</FILE>
        <FILE>static/colorbrewer/README.md</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/glyphs/css/fontello-embedded.css</FILE>
        <FILE>static/glyphs/css/fontello.css</FILE>
        <FILE>static/glyphs/demo.html</FILE>
        <FILE>static/glyphs/font/fontello.eot</FILE>
        <FILE>static/glyphs/font/fontello.svg</FILE>
        <FILE>static/glyphs/font/fontello.ttf</FILE>
        <FILE>static/glyphs/font/fontello.woff</FILE>
        <FILE>static/glyphs/font/fontello.woff2</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/report/js/loopalyzer.js</FILE>
        <FILE>static/report/js/predictions.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>swagger.json</FILE>
        <FILE>swagger.yaml</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.devicestatus.test.js</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/env.test.js</FILE>
        <FILE>tests/mqtt.test.js</FILE>
        <FILE>tests/pluginbase.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/settings.test.js</FILE>
        <FILE>update.png</FILE>
        <FILE>views/bgclock.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>1 (#2) * travis. always build latest lts and latest stable source: https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#specifying-nodejs-versions * make travis more clear to build for node js 8 and 10 * add cgm sensor stop * Update alexa-plugin.md Add note about using mmol/L * fix daylight saving bug in profile editor where From time select lists are showing duplicate/missing entries * Update Russian this one looks ok --- there was a typo in my previous pr -- https://github.com/nightscout/cgm-remote-monitor/pull/3795 * Fixes day to day rendering crashing if data contains a Profile Switch event without a profile * Previous fix actually appended a blank note, this checks if the data is correct and bails out early if not * redirect HTTP to HTTPS unless explicitly instructed not to do this redirection * add support for HSTS and other security related HTTP headers via helmet * fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore) * Added new phrase to language.js * Missed initializing one. * Grammar and typo updates. External links included where necessary. * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * add contributor table and rerun doctoc * make links to github profile * last fixes to CONTRIBUTING.md for tonight * fix toc * npm update and manual upgrade to newer versions * Add jpcunningh to some plugins in CONTRIBUTING * Reduce the amount of Profile Switch treatments being loaded, to fix #4055 * After discussing with Milos, actually only guarantee 1 duration 0 profile change object in addition to the default 8 days of treatments * Wrong keyword in how the limit is applied * npm update and remove mqtt * remove sgvdata * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * Add treatments delete id debug. * Fix devicestatus ObjectID usage. * Use new objId in api call * Make ObjectID initialization consistent * Fix syntax errors in websocket.js (cherry picked from commit c945c2e4e0b2f8a7121a1afa8d2af758f2805c6a) * update fontello use fontello-cli --config ./config.json install and move the files to the staic/glyphs directory * minor german language changes * Adding me to list of translators * improve helmet use * add default security settings and test * add default for hsts extendsettings * fix app.json * redirect by default * test * test csp * allow 'unsafe-inline' for stylesSrc and scriptSrc * Turkish language support added * npm update, disable Content Security Policy headers for now. Currently Nightscout is not yet compatible with CSP. * fix settings.test.js * fix INSECURE_USE_HTTP * Some correction * Some corrections * Some corrections-1 * Some corrections-2 * Some corrections-3 * clean Turkish language support * Fix identation * Initial weektoweek * More updates for weektoweek * Add weektoweek report to index * Fix syntax error * Fix syntax error * Fix spelling for localeData * Fix initialization of weekstoshow array * Initialize new week * Fix call to prepareHtml * Make new sgv array for each week * Fix reference into datastorage array * Increment currDay as required * error correction rising/falling * Add weektoweek debug logs * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * clean Turkish language support * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Fix syntax error * Fixed index error * Handle sort order differences * Sort week before prepareHtml * Fix syntax error * Test fix for week partition * Fix first day of week getting squashed * Fix it for real this time * Update app.json * Fix missing comma * Adds back the support for loading Entries with CSV and TEXT formats (#4114) * Adds back the support for loading Entries with CSV and TEXT formats * Add default JSON processing MIME type to request formatting * Cleanly return a blank string if no entries are found * Restore TSV output extension, better logging * Initial Japanese Additions * Don't move to next week if current week is empty * Fix syntax error * Color by day and week report specific size and scale * Comment out some debug * style format update * Use from and to dates to set week span for week2week * Fix newest on top start point * Fix newest on top * Don't render week to week if not selected * Add unit test for weektoweek report * Remove weektoweek logging code * Add clean treatments admin tool. * Fix clean treatments status html id name * Return status to treatments delete by query * Add clean entries db admin tool (cherry picked from commit f56f0b3ba42e2472069775507402e6309d29c26c) * Correct delete query fields for entries db * Make devicestatus delete consistent with entries * cleanup devicestatus delete * Add isId to api/devicestatus * Set query options correctly for devicestatus * Use dateString for devicestatus date field * Fix devicestatus default date field * Fix devicestatus delete query handling * No 'model' concept for devicestatus * initialize query find by id correctly for devicestatus delete * Match devicestatus api indention * Make treatments delete match devicestatus * Remove old treatments id api path * Add entries support for delete query * Remove unused function. * Removed unused function. * Add API updates for new delete options. * Reload data when entries or treatments are deleted * Fix week 2 week report when not all weekdays are selected * Fix weekNum calculation * Make week2week more resilient to date selections * Fix codacy findings * Remove more unused variables * Add new strings to language.js * Prevent deleting entries or treatments more recent than 2 days ago * Add unit test for removing old devicestatus records * Fix codacy finding * Add unit test for cleantreatmentsdb.js * Add unit test for cleanentriesdb.js * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Add insert, query, delete test for treatments api * Add insert, query, delete test for entries api * Add insert, query, delete test for devicestatus api * Japanese! Adding myself as a Japanese Translator. ^_^ * More Japanese Trying to add an additional update. Having issues with the process. Hopefully I got it this time! * Add support for Node 10. Upgrade to node 8.14.x . Don't start on older Node versions (except Node 8.11.1 from Azure) - incorporates https://github.com/nightscout/cgm-remote-monitor/pull/4134 and https://github.com/nightscout/cgm-remote-monitor/pull/4129 * allow node ^10.4.2 || ^8.14.1 || ~8.11.1 * fix version typo and add missing parts of PR * Additions and improvements for Danish language * Update bgclock.html Fix for clock showing &quot;24:xx&quot; in 24-hour mode. * Pad 24h hours with zero * Upgrade to Node 10 for Azure. Upgrade to version Node 8.15.0 for Node 8 users. According to Darren Lee @balshor Node 10.14.1 is available on Azure, see https://gitter.im/nightscout/public?at=5c2a50c70b7fc97caaca6211 or https://gist.github.com/balshor/f3bbb86ff98eeecefc5dd4bdb4118b1b * update code comments on Node versions thanks @jpcunningh https://github.com/nightscout/cgm-remote-monitor/pull/4155#discussion_r244617986 * Updated rawbg settings to use a single setting tri-state variable. * upgrade share2nightscout-bridge to ~0.2.0-dev-20190102 Use npm released version instead of wip/generalize branch. This version will also make sure Nightscout won't crash if Dexcom servers are down. * update to released version of share2nightscout-bridge and update webpck-cli to 3.2.0 * Added Japanese Added Japanese and myself to the list of editors. :) Hope I got the details right! * add jsdom pinned to 11.11.0 (required for benv unit tests) * Make weektoweek use SCALE_Y system setting correctly * Make default scale y initialize correctly * Cleanup code for initializing weektoweek scale * Add mmconnect note to the ENABLE description * Add MMCONNECT_ vars * Update minimed-connect-to-nightscout reference * Update moment dependency to match dev * Removed advanced entries for clarity Didn't get any feedback either way on this change after multiple enquiries, so going ahead with simplification here. If anyone sorely misses any of these items from the default form, can always put them back in. Also added SHOW_PLUGINS, as it's a useful starter setting. * Tweak mLab/Mongo wording * Have the UI fully update immediately after new data update. Debounce the Mongo loading for 5 seconds after data has been updated (#4189) * Update --bug-report.md Adding auto-labeling of bugs with the bug label * Update README.md Added clarity to ssl config details, and specifics for the use of letsencrypt * Update README.md Feedback from @unsoluble * Fixed the spacing. I see what you mean. Fixed it. :) * Semiquote Used the wrong semiquote.. urg. sorry! All better now. * spacing check. * Spacing Test x2 * This should do it! * Norwegian language corrections and translations * make Saving profile translatable * revert minimed-connect version * two small tweaks * fix readENVTruthy and make INSECURE_USE_HTTP, SECURE_HSTS_HEADER, SECURE_HSTS_HEADER_* and SECURE_CSP work as expected. readENVTruthy never returned defaultValue. if not set to on|off|true|false the default value is returned * npm update * add missing env * upgrade to minmum of Node 10.15.1 * fix ident and add extra test to env.test.js * remove mqtt leftover * ie8 is not compatible with Terser, so make that explicit * npm update and integrate terser-webpack-plugin as minimizer Stick to `terser` version `~3.14.1` instead of `^3.16.0`, because of ``` ERROR in js/bundle.js from Terser TypeError: Cannot read property 'minify' of undefined at minify (E:\path\toc\cgm-remote-monitor\node_modules\terser-webpack-plugin\dist\minify.js:175:23) ``` See https://github.com/terser-js/terser/pull/254 for details on that bug * user correct env * Update IFTTT maker-setup.md docs (#4206) * Create test.md Create folder maker-setup-images * Add files via upload Added images to maker-setup-images * Delete test.md Delete temp file * Update maker-setup.md * Update README.md Altered the IFTTT section * Loopalyzer enhanced (#4215) * Added table with profiles First attempt * Prettified profiles table, ensured last profile displayed * 1st attempt add showing active profile * Finalized support for displaying multiple profiles * Improved deduplication of profiles * Restored formatting * Made profiles table a selectable option * Tolerant in case profile is missing data * More tolerant on bad profiles * Refactored the deduplication Note - needs to be thoroughly tested * Fixed the profiles table and deduplication of profiles * Fixed enable/disable of time shift checkbox * Added explanation of time shift feature * Added timeshift explanation Need to run through a last verification before merging to NS, but my NS currently won't build b/c of npm issues. * Final Loopalyzer-enhanced Profiles table works, information on time shift feature added, time shift disabled when only single day. * Maker docs copyedit &amp; cleanup (#4256) * copyedit-and-cleanup * fix filename typo * Reimplement Predictions support to Reports (#4254) * reimplement https://github.com/nightscout/cgm-remote-monitor/pull/3179 (Predictions support to Reports) * add predictions.js * set version to release candidate 1: 0.11.0-rc1-20190205 (#4259) * Tag matafiles with 0.10.3-master-20180805 * Fixes the site for iOS 9 and older * Name too long, please switch back to BWP * Create issue templates for NS repo * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Update --bug-report.md Adding auto-labeling of bugs with the bug label * fix contributors (#4260) * fix typo in contributors * fix typo * Fix auth button ui &amp; update cache busting for App Cache (#4270) * small doc fix to comments on Node versions * Update README.md * * Fixes authentication dialog UI on Mobile Safari * Improves app cache busting, so after deploy the app is guaranteed to notice it has to reload content * Small fix to Finnish language related to auth UI * Merge master to dev (#4273) Merging changes made to Master since last release into Dev for a release * Update release version * release 0.11.1 (#4279) * Update dev version to 0.11.1 * remove + from version, make way for 0.11.1, upgrade webpack (#4277)</MESSAGE>
      <SHA>81a32875c4d1991a77a8bf769f37e98fd2c99c58</SHA>
      <PATCHEDFILES/>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge (#1) * Leap forward... remove npm 5.x support, upgrade packages and also test Node 10 with Travis - Due to Azure we had several supported npm version 5.6.x, 5.7.x, 5.8.x. Since Node 8.12.0 ships with npm 6.4.x we should stop supporting npm 5.x - Azure currently does not have Node 8.12.x and probably does not work at this moment. Microsoft should stay current - upgrades several packages, most notable mongodb - move file-loader, expose-loader, style-loader to devDependencies - remove webpack-command because it's not longer maintained and has security issues. Moving to webpack-cli - upgrade version to 0.11.0-dev-20181022 * mongodb. add newNewUrlParser: true to mongo options resolves (node:24176) DeprecationWarning: current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect. * travis. always build latest lts and latest stable source: https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#specifying-nodejs-versions * make travis more clear to build for node js 8 and 10 * add cgm sensor stop * Update alexa-plugin.md Add note about using mmol/L * fix daylight saving bug in profile editor where From time select lists are showing duplicate/missing entries * Update Russian this one looks ok --- there was a typo in my previous pr -- https://github.com/nightscout/cgm-remote-monitor/pull/3795 * Fixes day to day rendering crashing if data contains a Profile Switch event without a profile * Previous fix actually appended a blank note, this checks if the data is correct and bails out early if not * redirect HTTP to HTTPS unless explicitly instructed not to do this redirection * add support for HSTS and other security related HTTP headers via helmet * fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore) * Added new phrase to language.js * Missed initializing one. * Grammar and typo updates. External links included where necessary. * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * add contributor table and rerun doctoc * make links to github profile * last fixes to CONTRIBUTING.md for tonight * fix toc * npm update and manual upgrade to newer versions * Add jpcunningh to some plugins in CONTRIBUTING * Reduce the amount of Profile Switch treatments being loaded, to fix #4055 * After discussing with Milos, actually only guarantee 1 duration 0 profile change object in addition to the default 8 days of treatments * Wrong keyword in how the limit is applied * npm update and remove mqtt * remove sgvdata * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * Add treatments delete id debug. * Fix devicestatus ObjectID usage. * Use new objId in api call * Make ObjectID initialization consistent * Fix syntax errors in websocket.js (cherry picked from commit c945c2e4e0b2f8a7121a1afa8d2af758f2805c6a) * update fontello use fontello-cli --config ./config.json install and move the files to the staic/glyphs directory * minor german language changes * Adding me to list of translators * improve helmet use * add default security settings and test * add default for hsts extendsettings * fix app.json * redirect by default * test * test csp * allow 'unsafe-inline' for stylesSrc and scriptSrc * Turkish language support added * npm update, disable Content Security Policy headers for now. Currently Nightscout is not yet compatible with CSP. * fix settings.test.js * fix INSECURE_USE_HTTP * Some correction * Some corrections * Some corrections-1 * Some corrections-2 * Some corrections-3 * clean Turkish language support * Fix identation * Initial weektoweek * More updates for weektoweek * Add weektoweek report to index * Fix syntax error * Fix syntax error * Fix spelling for localeData * Fix initialization of weekstoshow array * Initialize new week * Fix call to prepareHtml * Make new sgv array for each week * Fix reference into datastorage array * Increment currDay as required * error correction rising/falling * Add weektoweek debug logs * clean Turkish language support * Fix syntax error * Fixed index error * Handle sort order differences * Sort week before prepareHtml * Fix syntax error * Test fix for week partition * Fix first day of week getting squashed * Fix it for real this time * Update app.json * Fix missing comma * Adds back the support for loading Entries with CSV and TEXT formats (#4114) * Adds back the support for loading Entries with CSV and TEXT formats * Add default JSON processing MIME type to request formatting * Cleanly return a blank string if no entries are found * Restore TSV output extension, better logging * Initial Japanese Additions * Don't move to next week if current week is empty * Fix syntax error * Color by day and week report specific size and scale * Comment out some debug * style format update * Use from and to dates to set week span for week2week * Fix newest on top start point * Fix newest on top * Don't render week to week if not selected * Add unit test for weektoweek report * Remove weektoweek logging code * Add clean treatments admin tool. * Fix clean treatments status html id name * Return status to treatments delete by query * Add clean entries db admin tool (cherry picked from commit f56f0b3ba42e2472069775507402e6309d29c26c) * Correct delete query fields for entries db * Make devicestatus delete consistent with entries * cleanup devicestatus delete * Add isId to api/devicestatus * Set query options correctly for devicestatus * Use dateString for devicestatus date field * Fix devicestatus default date field * Fix devicestatus delete query handling * No 'model' concept for devicestatus * initialize query find by id correctly for devicestatus delete * Match devicestatus api indention * Make treatments delete match devicestatus * Remove old treatments id api path * Add entries support for delete query * Remove unused function. * Removed unused function. * Add API updates for new delete options. * Reload data when entries or treatments are deleted * Fix week 2 week report when not all weekdays are selected * Fix weekNum calculation * Make week2week more resilient to date selections * Fix codacy findings * Remove more unused variables * Add new strings to language.js * Prevent deleting entries or treatments more recent than 2 days ago * Add unit test for removing old devicestatus records * Fix codacy finding * Add unit test for cleantreatmentsdb.js * Add unit test for cleanentriesdb.js * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Add insert, query, delete test for treatments api * Add insert, query, delete test for entries api * Add insert, query, delete test for devicestatus api * Japanese! Adding myself as a Japanese Translator. ^_^ * More Japanese Trying to add an additional update. Having issues with the process. Hopefully I got it this time! * Add support for Node 10. Upgrade to node 8.14.x . Don't start on older Node versions (except Node 8.11.1 from Azure) - incorporates https://github.com/nightscout/cgm-remote-monitor/pull/4134 and https://github.com/nightscout/cgm-remote-monitor/pull/4129 * allow node ^10.4.2 || ^8.14.1 || ~8.11.1 * fix version typo and add missing parts of PR * Additions and improvements for Danish language * Update bgclock.html Fix for clock showing &quot;24:xx&quot; in 24-hour mode. * Pad 24h hours with zero * Upgrade to Node 10 for Azure. Upgrade to version Node 8.15.0 for Node 8 users. According to Darren Lee @balshor Node 10.14.1 is available on Azure, see https://gitter.im/nightscout/public?at=5c2a50c70b7fc97caaca6211 or https://gist.github.com/balshor/f3bbb86ff98eeecefc5dd4bdb4118b1b * update code comments on Node versions thanks @jpcunningh https://github.com/nightscout/cgm-remote-monitor/pull/4155#discussion_r244617986 * Updated rawbg settings to use a single setting tri-state variable. * upgrade share2nightscout-bridge to ~0.2.0-dev-20190102 Use npm released version instead of wip/generalize branch. This version will also make sure Nightscout won't crash if Dexcom servers are down. * update to released version of share2nightscout-bridge and update webpck-cli to 3.2.0 * Added Japanese Added Japanese and myself to the list of editors. :) Hope I got the details right! * add jsdom pinned to 11.11.0 (required for benv unit tests) * Make weektoweek use SCALE_Y system setting correctly * Make default scale y initialize correctly * Cleanup code for initializing weektoweek scale * Add mmconnect note to the ENABLE description * Add MMCONNECT_ vars * Update minimed-connect-to-nightscout reference * Update moment dependency to match dev * Removed advanced entries for clarity Didn't get any feedback either way on this change after multiple enquiries, so going ahead with simplification here. If anyone sorely misses any of these items from the default form, can always put them back in. Also added SHOW_PLUGINS, as it's a useful starter setting. * Tweak mLab/Mongo wording * Have the UI fully update immediately after new data update. Debounce the Mongo loading for 5 seconds after data has been updated (#4189) * Update --bug-report.md Adding auto-labeling of bugs with the bug label * Update README.md Added clarity to ssl config details, and specifics for the use of letsencrypt * Update README.md Feedback from @unsoluble * Fixed the spacing. I see what you mean. Fixed it. :) * Semiquote Used the wrong semiquote.. urg. sorry! All better now. * spacing check. * Spacing Test x2 * This should do it! * Norwegian language corrections and translations * make Saving profile translatable * revert minimed-connect version * two small tweaks * fix readENVTruthy and make INSECURE_USE_HTTP, SECURE_HSTS_HEADER, SECURE_HSTS_HEADER_* and SECURE_CSP work as expected. readENVTruthy never returned defaultValue. if not set to on|off|true|false the default value is returned * npm update * add missing env * upgrade to minmum of Node 10.15.1 * fix ident and add extra test to env.test.js * remove mqtt leftover * ie8 is not compatible with Terser, so make that explicit * npm update and integrate terser-webpack-plugin as minimizer Stick to `terser` version `~3.14.1` instead of `^3.16.0`, because of ``` ERROR in js/bundle.js from Terser TypeError: Cannot read property 'minify' of undefined at minify (E:\path\toc\cgm-remote-monitor\node_modules\terser-webpack-plugin\dist\minify.js:175:23) ``` See https://github.com/terser-js/terser/pull/254 for details on that bug * user correct env * Update IFTTT maker-setup.md docs (#4206) * Create test.md Create folder maker-setup-images * Add files via upload Added images to maker-setup-images * Delete test.md Delete temp file * Update maker-setup.md * Update README.md Altered the IFTTT section * Loopalyzer enhanced (#4215) * Added table with profiles First attempt * Prettified profiles table, ensured last profile displayed * 1st attempt add showing active profile * Finalized support for displaying multiple profiles * Improved deduplication of profiles * Restored formatting * Made profiles table a selectable option * Tolerant in case profile is missing data * More tolerant on bad profiles * Refactored the deduplication Note - needs to be thoroughly tested * Fixed the profiles table and deduplication of profiles * Fixed enable/disable of time shift checkbox * Added explanation of time shift feature * Added timeshift explanation Need to run through a last verification before merging to NS, but my NS currently won't build b/c of npm issues. * Final Loopalyzer-enhanced Profiles table works, information on time shift feature added, time shift disabled when only single day. * Maker docs copyedit &amp; cleanup (#4256) * copyedit-and-cleanup * fix filename typo * Reimplement Predictions support to Reports (#4254) * reimplement https://github.com/nightscout/cgm-remote-monitor/pull/3179 (Predictions support to Reports) * add predictions.js * set version to release candidate 1: 0.11.0-rc1-20190205 (#4259) * Tag matafiles with 0.10.3-master-20180805 * Fixes the site for iOS 9 and older * Name too long, please switch back to BWP * Create issue templates for NS repo * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Update --bug-report.md Adding auto-labeling of bugs with the bug label * fix contributors (#4260) * fix typo in contributors * fix typo * Fix auth button ui &amp; update cache busting for App Cache (#4270) * small doc fix to comments on Node versions * Update README.md * * Fixes authentication dialog UI on Mobile Safari * Improves app cache busting, so after deploy the app is guaranteed to notice it has to reload content * Small fix to Finnish language related to auth UI * Merge master to dev (#4273) Merging changes made to Master since last release into Dev for a release * Update release version * release 0.11.1 (#4279) * Update dev version to 0.11.1 * remove + from version, make way for 0.11.1, upgrade webpack (#4277)</MESSAGE>
      <SHA>b1fb8c88d6e8457a1d38bdd8ac7374c2fd47f356</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/--bug-report.md</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>app.json</FILE>
        <FILE>bundle/index.js</FILE>
        <FILE>docs/plugins/alexa-plugin.md</FILE>
        <FILE>docs/plugins/maker-setup-images/action_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/blue_that.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/config_vars_enable.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/config_vars_maker.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/maker_key.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/notification_message.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/service_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/service_settings_search.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/set_trigger.jpg</FILE>
        <FILE>docs/plugins/maker-setup-images/webhooks_settings.jpg</FILE>
        <FILE>docs/plugins/maker-setup.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/admin_plugins/cleanentriesdb.js</FILE>
        <FILE>lib/admin_plugins/cleanstatusdb.js</FILE>
        <FILE>lib/admin_plugins/cleantreatmentsdb.js</FILE>
        <FILE>lib/admin_plugins/index.js</FILE>
        <FILE>lib/api/devicestatus/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/profile/index.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/hashauth.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/maker-setup.md</FILE>
        <FILE>lib/plugins/rawbg.js</FILE>
        <FILE>lib/plugins/xdrip-js.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/index.js</FILE>
        <FILE>lib/report_plugins/loopalyzer.js</FILE>
        <FILE>lib/report_plugins/weektoweek.js</FILE>
        <FILE>lib/server/activity.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/server/devicestatus.js</FILE>
        <FILE>lib/server/entries.js</FILE>
        <FILE>lib/server/food.js</FILE>
        <FILE>lib/server/mqtt.js</FILE>
        <FILE>lib/server/profile.js</FILE>
        <FILE>lib/server/treatments.js</FILE>
        <FILE>lib/server/websocket.js</FILE>
        <FILE>lib/settings.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>server.js</FILE>
        <FILE>setup.sh</FILE>
        <FILE>static/colorbrewer/README.md</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/glyphs/css/fontello-embedded.css</FILE>
        <FILE>static/glyphs/css/fontello.css</FILE>
        <FILE>static/glyphs/demo.html</FILE>
        <FILE>static/glyphs/font/fontello.eot</FILE>
        <FILE>static/glyphs/font/fontello.svg</FILE>
        <FILE>static/glyphs/font/fontello.ttf</FILE>
        <FILE>static/glyphs/font/fontello.woff</FILE>
        <FILE>static/glyphs/font/fontello.woff2</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/report/js/loopalyzer.js</FILE>
        <FILE>static/report/js/predictions.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>swagger.json</FILE>
        <FILE>swagger.yaml</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.devicestatus.test.js</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/env.test.js</FILE>
        <FILE>tests/mqtt.test.js</FILE>
        <FILE>tests/pluginbase.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/settings.test.js</FILE>
        <FILE>update.png</FILE>
        <FILE>views/bgclock.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Jshs (#2) * Leap forward... remove npm 5.x support, upgrade packages and also test Node 10 with Travis - Due to Azure we had several supported npm version 5.6.x, 5.7.x, 5.8.x. Since Node 8.12.0 ships with npm 6.4.x we should stop supporting npm 5.x - Azure currently does not have Node 8.12.x and probably does not work at this moment. Microsoft should stay current - upgrades several packages, most notable mongodb - move file-loader, expose-loader, style-loader to devDependencies - remove webpack-command because it's not longer maintained and has security issues. Moving to webpack-cli - upgrade version to 0.11.0-dev-20181022 * mongodb. add newNewUrlParser: true to mongo options resolves (node:24176) DeprecationWarning: current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect. * travis. always build latest lts and latest stable source: https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#specifying-nodejs-versions * make travis more clear to build for node js 8 and 10 * add cgm sensor stop * Update alexa-plugin.md Add note about using mmol/L * fix daylight saving bug in profile editor where From time select lists are showing duplicate/missing entries * Update Russian this one looks ok --- there was a typo in my previous pr -- https://github.com/nightscout/cgm-remote-monitor/pull/3795 * Fixes day to day rendering crashing if data contains a Profile Switch event without a profile * Previous fix actually appended a blank note, this checks if the data is correct and bails out early if not * redirect HTTP to HTTPS unless explicitly instructed not to do this redirection * add support for HSTS and other security related HTTP headers via helmet * fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore) * Added new phrase to language.js * Missed initializing one. * Grammar and typo updates. External links included where necessary. * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * add contributor table and rerun doctoc * make links to github profile * last fixes to CONTRIBUTING.md for tonight * fix toc * npm update and manual upgrade to newer versions * Add jpcunningh to some plugins in CONTRIBUTING * Reduce the amount of Profile Switch treatments being loaded, to fix #4055 * After discussing with Milos, actually only guarantee 1 duration 0 profile change object in addition to the default 8 days of treatments * Wrong keyword in how the limit is applied * npm update and remove mqtt * remove sgvdata * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * Add treatments delete id debug. * Fix devicestatus ObjectID usage. * Use new objId in api call * Make ObjectID initialization consistent * Fix syntax errors in websocket.js (cherry picked from commit c945c2e4e0b2f8a7121a1afa8d2af758f2805c6a) * update fontello use fontello-cli --config ./config.json install and move the files to the staic/glyphs directory * minor german language changes * Adding me to list of translators * improve helmet use * add default security settings and test * add default for hsts extendsettings * fix app.json * redirect by default * test * test csp * allow 'unsafe-inline' for stylesSrc and scriptSrc * Turkish language support added * npm update, disable Content Security Policy headers for now. Currently Nightscout is not yet compatible with CSP. * fix settings.test.js * fix INSECURE_USE_HTTP * Some correction * Some corrections * Some corrections-1 * Some corrections-2 * Some corrections-3 * clean Turkish language support * Fix identation * Initial weektoweek * More updates for weektoweek * Add weektoweek report to index * Fix syntax error * Fix syntax error * Fix spelling for localeData * Fix initialization of weekstoshow array * Initialize new week * Fix call to prepareHtml * Make new sgv array for each week * Fix reference into datastorage array * Increment currDay as required * error correction rising/falling * Add weektoweek debug logs * clean Turkish language support * Fix syntax error * Fixed index error * Handle sort order differences * Sort week before prepareHtml * Fix syntax error * Test fix for week partition * Fix first day of week getting squashed * Fix it for real this time * Update app.json * Fix missing comma * Adds back the support for loading Entries with CSV and TEXT formats (#4114) * Adds back the support for loading Entries with CSV and TEXT formats * Add default JSON processing MIME type to request formatting * Cleanly return a blank string if no entries are found * Restore TSV output extension, better logging * Initial Japanese Additions * Don't move to next week if current week is empty * Fix syntax error * Color by day and week report specific size and scale * Comment out some debug * style format update * Use from and to dates to set week span for week2week * Fix newest on top start point * Fix newest on top * Don't render week to week if not selected * Add unit test for weektoweek report * Remove weektoweek logging code * Add clean treatments admin tool. * Fix clean treatments status html id name * Return status to treatments delete by query * Add clean entries db admin tool (cherry picked from commit f56f0b3ba42e2472069775507402e6309d29c26c) * Correct delete query fields for entries db * Make devicestatus delete consistent with entries * cleanup devicestatus delete * Add isId to api/devicestatus * Set query options correctly for devicestatus * Use dateString for devicestatus date field * Fix devicestatus default date field * Fix devicestatus delete query handling * No 'model' concept for devicestatus * initialize query find by id correctly for devicestatus delete * Match devicestatus api indention * Make treatments delete match devicestatus * Remove old treatments id api path * Add entries support for delete query * Remove unused function. * Removed unused function. * Add API updates for new delete options. * Reload data when entries or treatments are deleted * Fix week 2 week report when not all weekdays are selected * Fix weekNum calculation * Make week2week more resilient to date selections * Fix codacy findings * Remove more unused variables * Add new strings to language.js * Prevent deleting entries or treatments more recent than 2 days ago * Add unit test for removing old devicestatus records * Fix codacy finding * Add unit test for cleantreatmentsdb.js * Add unit test for cleanentriesdb.js * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Add insert, query, delete test for treatments api * Add insert, query, delete test for entries api * Add insert, query, delete test for devicestatus api * Japanese! Adding myself as a Japanese Translator. ^_^ * More Japanese Trying to add an additional update. Having issues with the process. Hopefully I got it this time! * Add support for Node 10. Upgrade to node 8.14.x . Don't start on older Node versions (except Node 8.11.1 from Azure) - incorporates https://github.com/nightscout/cgm-remote-monitor/pull/4134 and https://github.com/nightscout/cgm-remote-monitor/pull/4129 * allow node ^10.4.2 || ^8.14.1 || ~8.11.1 * fix version typo and add missing parts of PR * Additions and improvements for Danish language * Update bgclock.html Fix for clock showing &quot;24:xx&quot; in 24-hour mode. * Pad 24h hours with zero * Upgrade to Node 10 for Azure. Upgrade to version Node 8.15.0 for Node 8 users. According to Darren Lee @balshor Node 10.14.1 is available on Azure, see https://gitter.im/nightscout/public?at=5c2a50c70b7fc97caaca6211 or https://gist.github.com/balshor/f3bbb86ff98eeecefc5dd4bdb4118b1b * update code comments on Node versions thanks @jpcunningh https://github.com/nightscout/cgm-remote-monitor/pull/4155#discussion_r244617986 * Updated rawbg settings to use a single setting tri-state variable. * upgrade share2nightscout-bridge to ~0.2.0-dev-20190102 Use npm released version instead of wip/generalize branch. This version will also make sure Nightscout won't crash if Dexcom servers are down. * update to released version of share2nightscout-bridge and update webpck-cli to 3.2.0 * Added Japanese Added Japanese and myself to the list of editors. :) Hope I got the details right! * add jsdom pinned to 11.11.0 (required for benv unit tests) * Make weektoweek use SCALE_Y system setting correctly * Make default scale y initialize correctly * Cleanup code for initializing weektoweek scale * Add mmconnect note to the ENABLE description * Add MMCONNECT_ vars * Update minimed-connect-to-nightscout reference * Update moment dependency to match dev * Removed advanced entries for clarity Didn't get any feedback either way on this change after multiple enquiries, so going ahead with simplification here. If anyone sorely misses any of these items from the default form, can always put them back in. Also added SHOW_PLUGINS, as it's a useful starter setting. * Tweak mLab/Mongo wording * Have the UI fully update immediately after new data update. Debounce the Mongo loading for 5 seconds after data has been updated (#4189) * Update --bug-report.md Adding auto-labeling of bugs with the bug label * Update README.md Added clarity to ssl config details, and specifics for the use of letsencrypt * Update README.md Feedback from @unsoluble * Fixed the spacing. I see what you mean. Fixed it. :) * Semiquote Used the wrong semiquote.. urg. sorry! All better now. * spacing check. * Spacing Test x2 * This should do it! * Norwegian language corrections and translations * make Saving profile translatable * revert minimed-connect version * two small tweaks * fix readENVTruthy and make INSECURE_USE_HTTP, SECURE_HSTS_HEADER, SECURE_HSTS_HEADER_* and SECURE_CSP work as expected. readENVTruthy never returned defaultValue. if not set to on|off|true|false the default value is returned * npm update * add missing env * upgrade to minmum of Node 10.15.1 * fix ident and add extra test to env.test.js * remove mqtt leftover * ie8 is not compatible with Terser, so make that explicit * npm update and integrate terser-webpack-plugin as minimizer Stick to `terser` version `~3.14.1` instead of `^3.16.0`, because of ``` ERROR in js/bundle.js from Terser TypeError: Cannot read property 'minify' of undefined at minify (E:\path\toc\cgm-remote-monitor\node_modules\terser-webpack-plugin\dist\minify.js:175:23) ``` See https://github.com/terser-js/terser/pull/254 for details on that bug * user correct env * Update IFTTT maker-setup.md docs (#4206) * Create test.md Create folder maker-setup-images * Add files via upload Added images to maker-setup-images * Delete test.md Delete temp file * Update maker-setup.md * Update README.md Altered the IFTTT section * Loopalyzer enhanced (#4215) * Added table with profiles First attempt * Prettified profiles table, ensured last profile displayed * 1st attempt add showing active profile * Finalized support for displaying multiple profiles * Improved deduplication of profiles * Restored formatting * Made profiles table a selectable option * Tolerant in case profile is missing data * More tolerant on bad profiles * Refactored the deduplication Note - needs to be thoroughly tested * Fixed the profiles table and deduplication of profiles * Fixed enable/disable of time shift checkbox * Added explanation of time shift feature * Added timeshift explanation Need to run through a last verification before merging to NS, but my NS currently won't build b/c of npm issues. * Final Loopalyzer-enhanced Profiles table works, information on time shift feature added, time shift disabled when only single day. * Maker docs copyedit &amp; cleanup (#4256) * copyedit-and-cleanup * fix filename typo * Reimplement Predictions support to Reports (#4254) * reimplement https://github.com/nightscout/cgm-remote-monitor/pull/3179 (Predictions support to Reports) * add predictions.js * set version to release candidate 1: 0.11.0-rc1-20190205 (#4259) * Tag matafiles with 0.10.3-master-20180805 * Fixes the site for iOS 9 and older * Name too long, please switch back to BWP * Create issue templates for NS repo * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Update --bug-report.md Adding auto-labeling of bugs with the bug label * fix contributors (#4260) * fix typo in contributors * fix typo * Fix auth button ui &amp; update cache busting for App Cache (#4270) * small doc fix to comments on Node versions * Update README.md * * Fixes authentication dialog UI on Mobile Safari * Improves app cache busting, so after deploy the app is guaranteed to notice it has to reload content * Small fix to Finnish language related to auth UI * Merge master to dev (#4273) Merging changes made to Master since last release into Dev for a release * Update release version * release 0.11.1 (#4279) * Update dev version to 0.11.1 * remove + from version, make way for 0.11.1, upgrade webpack (#4277)</MESSAGE>
      <SHA>c4b7fc73da803573b8b331159d5f5e9f936510e9</SHA>
      <PATCHEDFILES/>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore)</MESSAGE>
      <SHA>a4b43454143bca19139a0273d00b45b36cee4cc9</SHA>
      <PATCHEDFILES>
        <FILE>lib/language.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>a (#3) * travis. always build latest lts and latest stable source: https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#specifying-nodejs-versions * make travis more clear to build for node js 8 and 10 * add cgm sensor stop * Update alexa-plugin.md Add note about using mmol/L * fix daylight saving bug in profile editor where From time select lists are showing duplicate/missing entries * Update Russian this one looks ok --- there was a typo in my previous pr -- https://github.com/nightscout/cgm-remote-monitor/pull/3795 * Fixes day to day rendering crashing if data contains a Profile Switch event without a profile * Previous fix actually appended a blank note, this checks if the data is correct and bails out early if not * redirect HTTP to HTTPS unless explicitly instructed not to do this redirection * add support for HSTS and other security related HTTP headers via helmet * fix for https://github.com/nightscout/cgm-remote-monitor/issues/4050 (Hyperlink to GVI explanations doesn't work anymore) * Added new phrase to language.js * Missed initializing one. * Grammar and typo updates. External links included where necessary. * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * add contributor table and rerun doctoc * make links to github profile * last fixes to CONTRIBUTING.md for tonight * fix toc * npm update and manual upgrade to newer versions * Add jpcunningh to some plugins in CONTRIBUTING * Reduce the amount of Profile Switch treatments being loaded, to fix #4055 * After discussing with Milos, actually only guarantee 1 duration 0 profile change object in addition to the default 8 days of treatments * Wrong keyword in how the limit is applied * npm update and remove mqtt * remove sgvdata * Fix re-loading bug in profile editor and ensure changes made by the user aren't lost * Add treatments delete id debug. * Fix devicestatus ObjectID usage. * Use new objId in api call * Make ObjectID initialization consistent * Fix syntax errors in websocket.js (cherry picked from commit c945c2e4e0b2f8a7121a1afa8d2af758f2805c6a) * update fontello use fontello-cli --config ./config.json install and move the files to the staic/glyphs directory * minor german language changes * Adding me to list of translators * improve helmet use * add default security settings and test * add default for hsts extendsettings * fix app.json * redirect by default * test * test csp * allow 'unsafe-inline' for stylesSrc and scriptSrc * Turkish language support added * npm update, disable Content Security Policy headers for now. Currently Nightscout is not yet compatible with CSP. * fix settings.test.js * fix INSECURE_USE_HTTP * Some correction * Some corrections * Some corrections-1 * Some corrections-2 * Some corrections-3 * clean Turkish language support * Fix identation * Initial weektoweek * More updates for weektoweek * Add weektoweek report to index * Fix syntax error * Fix syntax error * Fix spelling for localeData * Fix initialization of weekstoshow array * Initialize new week * Fix call to prepareHtml * Make new sgv array for each week * Fix reference into datastorage array * Increment currDay as required * error correction rising/falling * Add weektoweek debug logs * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * clean Turkish language support * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Fix syntax error * Fixed index error * Handle sort order differences * Sort week before prepareHtml * Fix syntax error * Test fix for week partition * Fix first day of week getting squashed * Fix it for real this time * Update app.json * Fix missing comma * Adds back the support for loading Entries with CSV and TEXT formats (#4114) * Adds back the support for loading Entries with CSV and TEXT formats * Add default JSON processing MIME type to request formatting * Cleanly return a blank string if no entries are found * Restore TSV output extension, better logging * Initial Japanese Additions * Don't move to next week if current week is empty * Fix syntax error * Color by day and week report specific size and scale * Comment out some debug * style format update * Use from and to dates to set week span for week2week * Fix newest on top start point * Fix newest on top * Don't render week to week if not selected * Add unit test for weektoweek report * Remove weektoweek logging code * Add clean treatments admin tool. * Fix clean treatments status html id name * Return status to treatments delete by query * Add clean entries db admin tool (cherry picked from commit f56f0b3ba42e2472069775507402e6309d29c26c) * Correct delete query fields for entries db * Make devicestatus delete consistent with entries * cleanup devicestatus delete * Add isId to api/devicestatus * Set query options correctly for devicestatus * Use dateString for devicestatus date field * Fix devicestatus default date field * Fix devicestatus delete query handling * No 'model' concept for devicestatus * initialize query find by id correctly for devicestatus delete * Match devicestatus api indention * Make treatments delete match devicestatus * Remove old treatments id api path * Add entries support for delete query * Remove unused function. * Removed unused function. * Add API updates for new delete options. * Reload data when entries or treatments are deleted * Fix week 2 week report when not all weekdays are selected * Fix weekNum calculation * Make week2week more resilient to date selections * Fix codacy findings * Remove more unused variables * Add new strings to language.js * Prevent deleting entries or treatments more recent than 2 days ago * Add unit test for removing old devicestatus records * Fix codacy finding * Add unit test for cleantreatmentsdb.js * Add unit test for cleanentriesdb.js * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Update Makefile Regenerated the Codacy Token and gave the new token to Travis * Add insert, query, delete test for treatments api * Add insert, query, delete test for entries api * Add insert, query, delete test for devicestatus api * Japanese! Adding myself as a Japanese Translator. ^_^ * More Japanese Trying to add an additional update. Having issues with the process. Hopefully I got it this time! * Add support for Node 10. Upgrade to node 8.14.x . Don't start on older Node versions (except Node 8.11.1 from Azure) - incorporates https://github.com/nightscout/cgm-remote-monitor/pull/4134 and https://github.com/nightscout/cgm-remote-monitor/pull/4129 * allow node ^10.4.2 || ^8.14.1 || ~8.11.1 * fix version typo and add missing parts of PR * Additions and improvements for Danish language * Update bgclock.html Fix for clock showing &quot;24:xx&quot; in 24-hour mode. * Pad 24h hours with zero * Upgrade to Node 10 for Azure. Upgrade to version Node 8.15.0 for Node 8 users. According to Darren Lee @balshor Node 10.14.1 is available on Azure, see https://gitter.im/nightscout/public?at=5c2a50c70b7fc97caaca6211 or https://gist.github.com/balshor/f3bbb86ff98eeecefc5dd4bdb4118b1b * update code comments on Node versions thanks @jpcunningh https://github.com/nightscout/cgm-remote-monitor/pull/4155#discussion_r244617986 * Updated rawbg settings to use a single setting tri-state variable. * upgrade share2nightscout-bridge to ~0.2.0-dev-20190102 Use npm released version instead of wip/generalize branch. This version will also make sure Nightscout won't crash if Dexcom servers are down. * update to released version of share2nightscout-bridge and update webpck-cli to 3.2.0 * Added Japanese Added Japanese and myself to the list of editors. :) Hope I got the details right! * add jsdom pinned to 11.11.0 (required for benv unit tests) * Make weektoweek use SCALE_Y system setting correctly * Make default scale y initialize correctly * Cleanup code for initializing weektoweek scale * Add mmconnect note to the ENABLE description * Add MMCONNECT_ vars * Update minimed-connect-to-nightscout reference * Update moment dependency to match dev * Removed advanced entries for clarity Didn't get any feedback either way on this change after multiple enquiries, so going ahead with simplification here. If anyone sorely misses any of these items from the default form, can always put them back in. Also added SHOW_PLUGINS, as it's a useful starter setting. * Tweak mLab/Mongo wording * Have the UI fully update immediately after new data update. Debounce the Mongo loading for 5 seconds after data has been updated (#4189) * Update --bug-report.md Adding auto-labeling of bugs with the bug label * Update README.md Added clarity to ssl config details, and specifics for the use of letsencrypt * Update README.md Feedback from @unsoluble * Fixed the spacing. I see what you mean. Fixed it. :) * Semiquote Used the wrong semiquote.. urg. sorry! All better now. * spacing check. * Spacing Test x2 * This should do it! * Norwegian language corrections and translations * make Saving profile translatable * revert minimed-connect version * two small tweaks * fix readENVTruthy and make INSECURE_USE_HTTP, SECURE_HSTS_HEADER, SECURE_HSTS_HEADER_* and SECURE_CSP work as expected. readENVTruthy never returned defaultValue. if not set to on|off|true|false the default value is returned * npm update * add missing env * upgrade to minmum of Node 10.15.1 * fix ident and add extra test to env.test.js * remove mqtt leftover * ie8 is not compatible with Terser, so make that explicit * npm update and integrate terser-webpack-plugin as minimizer Stick to `terser` version `~3.14.1` instead of `^3.16.0`, because of ``` ERROR in js/bundle.js from Terser TypeError: Cannot read property 'minify' of undefined at minify (E:\path\toc\cgm-remote-monitor\node_modules\terser-webpack-plugin\dist\minify.js:175:23) ``` See https://github.com/terser-js/terser/pull/254 for details on that bug * user correct env * Update IFTTT maker-setup.md docs (#4206) * Create test.md Create folder maker-setup-images * Add files via upload Added images to maker-setup-images * Delete test.md Delete temp file * Update maker-setup.md * Update README.md Altered the IFTTT section * Loopalyzer enhanced (#4215) * Added table with profiles First attempt * Prettified profiles table, ensured last profile displayed * 1st attempt add showing active profile * Finalized support for displaying multiple profiles * Improved deduplication of profiles * Restored formatting * Made profiles table a selectable option * Tolerant in case profile is missing data * More tolerant on bad profiles * Refactored the deduplication Note - needs to be thoroughly tested * Fixed the profiles table and deduplication of profiles * Fixed enable/disable of time shift checkbox * Added explanation of time shift feature * Added timeshift explanation Need to run through a last verification before merging to NS, but my NS currently won't build b/c of npm issues. * Final Loopalyzer-enhanced Profiles table works, information on time shift feature added, time shift disabled when only single day. * Maker docs copyedit &amp; cleanup (#4256) * copyedit-and-cleanup * fix filename typo * Reimplement Predictions support to Reports (#4254) * reimplement https://github.com/nightscout/cgm-remote-monitor/pull/3179 (Predictions support to Reports) * add predictions.js * set version to release candidate 1: 0.11.0-rc1-20190205 (#4259) * Tag matafiles with 0.10.3-master-20180805 * Fixes the site for iOS 9 and older * Name too long, please switch back to BWP * Create issue templates for NS repo * Update CONTRIBUTING.md Added notes on expectations on Pull Requests * Update CONTRIBUTING.md Added note on README updates * Update CONTRIBUTING.md Clarified plugins, bug fixing parts * Update --bug-report.md Adding auto-labeling of bugs with the bug label * fix contributors (#4260) * fix typo in contributors * fix typo * Fix auth button ui &amp; update cache busting for App Cache (#4270) * small doc fix to comments on Node versions * Update README.md * * Fixes authentication dialog UI on Mobile Safari * Improves app cache busting, so after deploy the app is guaranteed to notice it has to reload content * Small fix to Finnish language related to auth UI * Merge master to dev (#4273) Merging changes made to Master since last release into Dev for a release * Update release version * release 0.11.1 (#4279) * Update dev version to 0.11.1 * remove + from version, make way for 0.11.1, upgrade webpack (#4277)</MESSAGE>
      <SHA>fe6b2c5a88822c5ee304db2e008de66d81996e90</SHA>
      <PATCHEDFILES/>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
