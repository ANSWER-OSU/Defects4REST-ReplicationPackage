<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1612</ISSUENO>
  <ISSUEURL>https://github.com/WP-API/WP-API/issues/1612</ISSUEURL>
  <TITLE>How to implement comment threading using `GET /comments` ?</TITLE>
  <DESCRIPTION>I'm working on a plugin featuring viewport-based infinite scrolling of comments using WP API v2. As the endpoint `GET /comments` responds paged data in descending order of date (which is reasonable), I am wondering how could I display comment threads properly before everything is loaded? For example, like the hierarchical looks of the theme twenty-fifteen. For example, suppose there are 5 comments in descending order: c4, c3, c2, c1, c0, and the parent of c4 is c0. If I set `page=1, per_page=4`, there is no way I can show c4 as a reply of c0 before c0 is actually loaded. Currently I only have thought of two possible ways: - Do not use viewport-based infinite scrolling. Load new pages automatically instead, and refresh the comment hierarchy as needed. - I think this can solve the problem, but what if users' prefer viewport-based way, like I do? - Add a `child` field in the response data. - I think this might be the weirdest, because there is no such a data in WP database. Also, the thread setting might be changed. I'm wondering, is there any other way? Do I miss any helpful feature of WP API for this? Thanks.</DESCRIPTION>
  <REPONAME>WP-API</REPONAME>
  <TIMEDIFFERENCEDAYS>365</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge remote-tracking branch 'refs/remotes/WP-API/develop' into develop</MESSAGE>
    <SHA>73d3cc93c3f6650881720ed15563cd0806522024</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#1612-threaded-comment-links Solves #1612. Adds children links for comments that are a child of the parent comment. Links are embeddable. There is a strange thing in the unit tests happening that I will most likely need help with before merge.</MESSAGE>
      <SHA>5a00df20c0df2a11c8266b3a6474f74f308b7b6e</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-comments-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixes #1612 by adding link to collection sharing comment parent. Fixes #1612, This patch adds a `children` link to the response when the comment has children. The link is to a collection of comments who share the same parent as the original comment resource. This enables a client to then recursively move through the links, with pagination parameters to boot, to performantly collect all threaded comments of a single comment.</MESSAGE>
      <SHA>39cc02150dbbbc050aa53915c9509d5be451a0d5</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-comments-controller.php</FILE>
        <FILE>tests/test-rest-comments-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge remote-tracking branch 'refs/remotes/WP-API/develop' into #1612-comment-children-links</MESSAGE>
      <SHA>4a04f013c071622481071edab074f8540bffe3ee</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>bin/readme.txt</FILE>
        <FILE>lib/endpoints/class-wp-rest-attachments-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-comments-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-posts-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-revisions-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-terms-controller.php</FILE>
        <FILE>lib/endpoints/class-wp-rest-users-controller.php</FILE>
        <FILE>plugin.php</FILE>
        <FILE>tests/test-rest-comments-controller.php</FILE>
        <FILE>tests/test-rest-controller.php</FILE>
        <FILE>tests/test-rest-posts-controller.php</FILE>
        <FILE>tests/test-rest-revisions-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
