<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>436</ISSUENO>
  <ISSUEURL>https://github.com/openstf/stf/issues/436</ISSUEURL>
  <TITLE>ZUK Z1 fails on minitouch</TITLE>
  <DESCRIPTION>Moved from #407: ``` INF/device:plugins:touch 14966 [c806b880] Touch origin is top left INF/device:plugins:touch 14966 [c806b880] Requesting touch consumer to start INF/device:plugins:touch 14966 [c806b880] Launching screen service INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service INF/device:plugins:touch 14966 [c806b880] minitouch says: &quot;/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied&quot; WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service INF/device:plugins:touch 14966 [c806b880] Launching screen service INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service INF/device:plugins:touch 14966 [c806b880] minitouch says: &quot;/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied&quot; WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service INF/device:plugins:touch 14966 [c806b880] Launching screen service INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service INF/device:plugins:touch 14966 [c806b880] minitouch says: &quot;/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied&quot; INF/device:support:push 14990 [LE67A06180224872] Sending output to &quot;tcp://10.241.54.16:7270&quot; INF/device 14990 [LE67A06180224872] Preparing device WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service INF/device:plugins:touch 14966 [c806b880] Launching screen service INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service INF/device:plugins:touch 14966 [c806b880] minitouch says: &quot;/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied&quot; WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service WRN/device:plugins:touch 14966 [c806b880] Will not apply desired state due to too many failures INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service FTL/device 14966 [c806b880] Setup had an error Error: Failed more than 3 times in 10000ms at TouchConsumer._failLimitExceeded (/app/lib/units/device/plugins/touch/index.js:230:26) at FailCounter.emit (/app/node_modules/eventemitter3/index.js:117:35) at FailCounter.inc (/app/lib/util/failcounter.js:29:10) at TouchConsumer._outputEnded (/app/lib/units/device/plugins/touch/index.js:223:24) at RiskyStream.emit (/app/node_modules/eventemitter3/index.js:115:35) at RiskyStream.&lt;anonymous&gt; (/app/lib/util/riskystream.js:14:12) at emitNone (events.js:91:20) at Socket.emit (events.js:185:7) at endReadableNT (_stream_readable.js:973:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) From previous event: at startConsumer (/app/lib/units/device/plugins/touch/index.js:511:14) at /app/lib/units/device/plugins/touch/index.js:526:12 at SerialSyrup.ParallelSyrup.invoke (/app/node_modules/stf-syrup/lib/parallel.js:54:24) at /app/node_modules/stf-syrup/lib/serial.js:43:33 at _combinedTickCallback (internal/process/next_tick.js:67:7) at process._tickCallback (internal/process/next_tick.js:98:9) FTL/util:lifecycle 14966 [c806b880] Shutting down due to fatal error INF/provider 1 [*] Cleaning up device worker &quot;c806b880&quot; ERR/provider 1 [*] Device worker &quot;c806b880&quot; died with code 1 ```</DESCRIPTION>
  <REPONAME>stf</REPONAME>
  <TIMEDIFFERENCEDAYS>133</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Seems we forgot to update STFService.apk to 2.0.0 and it was getting reinstalled every time.</MESSAGE>
    <SHA>27428dc838ff203d35159830f629bd751e47d850</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add an alternate install location for binary resources. Fixes devices where /data/local/tmp is mounted as noexec, like ZUK Z1. Closes #436.</MESSAGE>
      <SHA>51a09bd0b2bb8e743d6fa63daeb2862540e6b541</SHA>
      <PATCHEDFILES>
        <FILE>lib/units/device/resources/minicap.js</FILE>
        <FILE>lib/units/device/resources/minirev.js</FILE>
        <FILE>lib/units/device/resources/minitouch.js</FILE>
        <FILE>lib/units/device/resources/util/resource.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add an alternate install location for binary resources. Fixes devices where /data/local/tmp is mounted as noexec, like ZUK Z1. Closes #436.</MESSAGE>
      <SHA>884c51b9b40474c9431bd178d122cc20cd6e663a</SHA>
      <PATCHEDFILES>
        <FILE>lib/units/device/resources/minicap.js</FILE>
        <FILE>lib/units/device/resources/minirev.js</FILE>
        <FILE>lib/units/device/resources/minitouch.js</FILE>
        <FILE>lib/units/device/resources/util/resource.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
