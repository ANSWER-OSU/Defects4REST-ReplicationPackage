<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>735</ISSUENO>
  <ISSUEURL>https://github.com/openstf/stf/issues/735</ISSUEURL>
  <TITLE>Bad filtering of Battery Level and Battery Temp</TITLE>
  <DESCRIPTION>&lt;!-- *Before creating an issue please make sure you are using the latest version of STF.* --&gt; **Description:** During filtering devices via Battery Level or Battery Temp filer, I noticed, that results for query like: batteryLevel: &gt; 20 Did not return Android devices passing this criteria. The same issue I observed when I tried to filter devices using this query: batteryTemp: &gt;20 STF source code checkout with : d5ab5fd83d2e9a1dab2c61dc42b0ba999a6dbb1a **Steps to reproduce** A) Insert in input tag with name=&quot;deviceFilter&quot; this query: batteryLevel: &gt;50 **What is the expected behavior?** We should expect to see only devices which battery level is bigger then 50%. But we see only devices, which body contains 50%. B) Insert in input tag with name=&quot;deviceFilter&quot; this query: batteryTemp: &lt;40 **What is the expected behavior?** We should expect to see only devices which battery temp is lower then 40°C. But we see only devices, which body contains 40. **Investigation**: The problem is mostly connected with using text filtering for both of params: Battery Level and Battery Temp. stf/res/app/device-list/column/device-column-service.js: ln340 As we can see both of params are marked as TextCell. To parse them as values we might to add additional extra checking in : stf/res/app/device-list/column/device-column-service.js: ln340 to parse those data properly by adding this part: , filter: function(item, filter) { if ( options.title == &quot;Battery Level&quot; || options.title == &quot;Battery Temp&quot; ) { //Exception in TextCell. We want to filter after integer values for two columns, Battery Level and Battery Temp var remove_unit_character = '' switch (options.title){ case &quot;Battery Level&quot;: remove_unit_character = &quot;%&quot; break case &quot;Battery Temp&quot;: remove_unit_character = &quot;°C&quot; break } var parsed_value = parseInt((options.value(item)).replace(remove_unit_character,'')) return filterOps[filter.op || '=']( parsed_value , Number(filter.query) ) } else{ return filterIgnoreCase(options.value(item), filter.query) } }</DESCRIPTION>
  <REPONAME>stf</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'thasegaw-ldap_search_filter'</MESSAGE>
    <SHA>d5ab5fd83d2e9a1dab2c61dc42b0ba999a6dbb1a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Battery level and temperature are now formatted number colums instead of plain text columns, which makes them usable with the search comparison operators. Closes #735 and #736.</MESSAGE>
      <SHA>a1866b0409a9abef755b0c78e48a74f493374700</SHA>
      <PATCHEDFILES>
        <FILE>res/app/device-list/column/device-column-service.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
