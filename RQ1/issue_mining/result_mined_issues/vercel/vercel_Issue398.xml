<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>398</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/398</ISSUEURL>
  <TITLE>If remote build / start has an error code, shouldn't the cli exit with non 0?</TITLE>
  <DESCRIPTION>When running a deployment, if something does not deploy correctly on the server due to a missing dep or npm not working right (hey, it happens)... IMHO the CLI should exit with a non zero. Currently the log output will show npm exiting with non zero... but then things just keep going right along...</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>599</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add fetchTokenWithRetry for bad json response (#403) This is a quick fix for our token problem by attempting to retry the fetch. &gt; FetchError: invalid json response body at NOW_TOKEN_FACTORY_URL reason: Unexpected token A in JSON at position 0 The root cause is in the token factory because it throws `Confirmation incomplete` but that will be harder to track down and fix.</MESSAGE>
    <SHA>ee179b9b52a7f494ff3527f53bba976157087311</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Made `now-next` invoke `next dev` (#398) * Made `now-next` invoke `next dev` * Even cleaner * Fixed some types * Fixed dirs * Start server if initial build * Added remaining types * Added missing type * Made property optional * Fixed types * Expose that the Builder is continuous * Added more details * Removed useless code * Made it work * Removed useless crap * Added new version * Synced up * Refined logging * Fixed routes * Correctly parse request paths * Fixed routes * Fixed GET parameter issues</MESSAGE>
      <SHA>a8bf77091f6a0c8fdd8a5af273e75212d11c7a46</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-build-utils/src/types.ts</FILE>
        <FILE>packages/now-next/package.json</FILE>
        <FILE>packages/now-next/src/index.ts</FILE>
        <FILE>packages/now-next/src/utils.ts</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
