<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>594</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/594</ISSUEURL>
  <TITLE>Question on Path Aliasing</TITLE>
  <DESCRIPTION>When you create following rules: ```js { &quot;rules&quot;: [ { &quot;pathname&quot;: &quot;/foo/**&quot;, &quot;dest&quot;: &quot;foo.another.com&quot; } ] } ``` Why do I still have to use `foo.example.com/foo/bar` instead of just using `foo.example.com/bar`? The problem is that the app running on foo.another.com needs to be aware of the path used in `rules.json` which makes it kinda coupled.</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>532</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-node-bridge] Make normalized events consumable by server (#598) * add `consumeProxyRequest` to bridge * refactor * fix tests * Update packages/now-node-bridge/test/bridge.test.js Co-Authored-By: Leo Lamprecht &lt;mindrun@icloud.com&gt; * Update packages/now-node-bridge/src/bridge.ts Co-Authored-By: Leo Lamprecht &lt;mindrun@icloud.com&gt;</MESSAGE>
    <SHA>6a7de860dbed0e7ff9c0ab8968acc7fd58fb6ae5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-node] Helpers compatibility with express, micro, etc (#594) * copy bridge into now-node * pass body buffer to listener * only send addon when helpers are added * ship bridge.js to deployment * remove raw-body deps * fix not waiting for server `listening` event * add test for express compat * add test for micro compat * update now-node-bridge * remove unnecessary yarn.lock * fix wrong replacement in launcher.ts * fix listener not defined * fix unit tests * add &quot;test&quot; for exports * add console.log * add test in node-bridge * log error before throwing * revert now-node-bridge to canary state * remove unused code * refactor consumeProxyRequests -&gt; consumeEvent * remove ts-jest * update tests * do not transform body to string if not necessary * fix tests * remove jest from deps in now-node * x-bridge-reqid -&gt; x-now-bridge-request-id * add test for consumeEvent * do not expose request id header to the client * pin node-bridge version * update node-bridge deps to 1.2.0-canary.1 * update yarn.lock * add await for user's listener * refactor * pass async function to `Server`</MESSAGE>
      <SHA>c2f95de3ecd262a5cbfa5f87f59d7dcbd7bfc46d</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-node/build.sh</FILE>
        <FILE>packages/now-node/jest.config.js</FILE>
        <FILE>packages/now-node/package.json</FILE>
        <FILE>packages/now-node/src/example-import.ts</FILE>
        <FILE>packages/now-node/src/helpers.ts</FILE>
        <FILE>packages/now-node/src/index.ts</FILE>
        <FILE>packages/now-node/src/launcher.ts</FILE>
        <FILE>packages/now-node/test/fixtures/15-helpers/express-compat/index.js</FILE>
        <FILE>packages/now-node/test/fixtures/15-helpers/express-compat/package.json</FILE>
        <FILE>packages/now-node/test/fixtures/15-helpers/micro-compat/index.js</FILE>
        <FILE>packages/now-node/test/fixtures/15-helpers/micro-compat/package.json</FILE>
        <FILE>packages/now-node/test/fixtures/15-helpers/now.json</FILE>
        <FILE>packages/now-node/test/helpers.test.js</FILE>
        <FILE>packages/now-node/test/helpers.test.ts</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
