<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2289</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2289</ISSUEURL>
  <TITLE>Route parameters not passed to getInitialProps({ query }) (NextJS)</TITLE>
  <DESCRIPTION>``` { &quot;src&quot;: &quot;/(?&lt;locale&gt;[^/]*)/registration/&quot;, &quot;dest&quot;: &quot;/registration/?locale=$locale&quot; }, ``` parameters are not into NextJS from route to `query`.</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>9</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Adjust `now init` and `now dev` to not require a login token (#2325) * Adjust `now init` and `now dev` to not require a login token These two commands should not require a login token because they do not interact with the Now API. * Remove `config` from `subcommandsWithoutToken` array It's not an existing command.</MESSAGE>
    <SHA>b53d907b745126113bc3e251ac2451088026a363</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now dev] Mix in routes query params when proxying to a URL Fixes #2289.</MESSAGE>
      <SHA>0a747db25f2f6633b9702b41e06b6f37d9e9c584</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-server.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Mix in routes query params when proxying to a URL (#2330) * [now dev] Mix in routes query params when proxying to a URL Fixes #2289. * Refactor unit tests and add a unit test for proxy passing with query params * Fix TypeScript compile error * [DEBUG] Disable proxy pass unit test * Run unit tests serially * Remove `console.error()` in unit test * Temporarily disable integration test &quot;try to create a builds deployments with wrong config&quot;</MESSAGE>
      <SHA>9ed897c6bedf923b0f716dd4bad8ced3272cc9a2</SHA>
      <PATCHEDFILES>
        <FILE>package.json</FILE>
        <FILE>src/commands/dev/lib/dev-server.ts</FILE>
        <FILE>test/dev-server.unit.js</FILE>
        <FILE>test/fixtures/unit/now-dev-query-invoke/index.js</FILE>
        <FILE>test/fixtures/unit/now-dev-query-invoke/now.json</FILE>
        <FILE>test/fixtures/unit/now-dev-query-proxy/index.js</FILE>
        <FILE>test/fixtures/unit/now-dev-query-proxy/now.json</FILE>
        <FILE>test/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
