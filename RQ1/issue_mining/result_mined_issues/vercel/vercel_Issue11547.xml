<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>11547</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/11547</ISSUEURL>
  <TITLE>[34.1.8] `vercel build` Error: Cannot read properties of null (reading 'trim')</TITLE>
  <DESCRIPTION>we're using the Vercel CLI in our CI, but we recently got the following error, and we haven't changed any codes, dependencies or configurations. ```shell # vercel build --token=${{ secrets.VERCEL_TOKEN }} Vercel CLI 34.1.8 Detected `pnpm-lock.yaml` version 6 generated by pnpm 8 Running &quot;install&quot; command: `pnpm i`... Scope: all 10 workspace projects ... ...: Done Done in 6.6s Error: Cannot read properties of null (reading 'trim') Error: Process completed with exit code 1. ``` possible reason is that we are using `vercel@canary` and when I downgrade to `vercel@34.1.7` everything works fine. I tried to add the `--debug` flag, but there was no helpful information. looking at the changelog, I suspect this commit has something to do with it. https://github.com/vercel/vercel/commit/dc974b6797de0b6e90373c92e1f2bbdafcfc6687#diff-466c3ca84fb92d65cf8c3c9dfb99bd904425f3a527b86dd7f2b1d79096213318R592</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[next] Support Incremental Partial Prerendering (#11560) This fixes the logic that detects if partial prerendering (PPR) has been enabled for a project. The new incremental adoption pathway allows setting the `experimental.ppr = 'incremental'` which the previous code did not support.</MESSAGE>
    <SHA>119f80e9611a7a5a755aa689502dcdab323194aa</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[static-build] Fix `Cannot read properties of null` error (#11559) A bug was introduced in #11529 that causes the build to fail if `ruby` is not installed. The fix here accounts for that scenario. Closes #11547.</MESSAGE>
      <SHA>0e774b6be0c832213a64124e1f4fc6d150e87d9f</SHA>
      <PATCHEDFILES>
        <FILE>.changeset/rude-peas-do.md</FILE>
        <FILE>packages/static-build/src/index.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
