<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2711</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2711</ISSUEURL>
  <TITLE>`now` is giving an error using Mojave and Node 8 LTS</TITLE>
  <DESCRIPTION>``` $ now (node:32756) ExperimentalWarning: The http2 module is an experimental API. (node:32756) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 nowExit listeners added. Use emitter.setMaxListeners() to increase limit &gt; Error! An unexpected error occurred! TypeError: e.ref is not a function at f.ref (/usr/local/lib/node_modules/now/dist/index.js:2:491203) at H2Context.getOrCreateHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:488764) at Context.getOrCreateHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:1713162) at Context.getHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:1713387) at Object.get (/usr/local/lib/node_modules/now/dist/index.js:2:1711928) at fetchImpl (/usr/local/lib/node_modules/now/dist/index.js:2:3785448) at &lt;anonymous&gt; TypeError: e.ref is not a function at f.ref (/usr/local/lib/node_modules/now/dist/index.js:2:491203) at H2Context.getOrCreateHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:488764) at Context.getOrCreateHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:1713162) at Context.getHttp2 (/usr/local/lib/node_modules/now/dist/index.js:2:1713387) at Object.get (/usr/local/lib/node_modules/now/dist/index.js:2:1711928) at fetchImpl (/usr/local/lib/node_modules/now/dist/index.js:2:3785448) at &lt;anonymous&gt; ``` The error was originally reported by @leourbina. ``` node version is v8.9.0 now version is 16.0.0 ```</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix `format-modified` script (#2708) Before it was only updating _non-staged_ files. Now, it updates _all_ modified files, staged or not.</MESSAGE>
    <SHA>b31ab033c2a71c7cf68ae7a553e6a70834e4d157</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Require Node.js `&gt;= 8.11` in &quot;engines&quot; Closes #2711.</MESSAGE>
      <SHA>b9da2528304f150865a23bfeed143bc1e454615f</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>package.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Require Node.js `&gt;= 8.11` in &quot;engines&quot; (#2714) Closes #2711.</MESSAGE>
      <SHA>c133e81f6ed5fac55c5db9100e2941f4a3fd09cf</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>package.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Require Node.js `&gt;= 8.11` in &quot;engines&quot; (#2714) Closes #2711.</MESSAGE>
      <SHA>5860645cdbf71444f9d2825d93fc8220399b0da3</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>package.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Loosen &quot;engines&quot; requirement to Node `&gt;= 8` Now that `now-client` does not use `fetch-h2`, any version of Node 8 or newer should work with `now-cli`. Related to #2711.</MESSAGE>
      <SHA>39614c722524e6cd1f51299dd657c7d15be39512</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>packages/now-cli/package.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Loosen &quot;engines&quot; requirement to Node `&gt;= 8` (#3195) Now that `now-client` does not use `fetch-h2`, any version of Node 8 or newer should work with `now-cli`. Related to #2711.</MESSAGE>
      <SHA>34dce350bedef661bf3ce2d0afa6485d820f33cd</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>packages/now-cli/package.json</FILE>
        <FILE>packages/now-cli/test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Loosen &quot;engines&quot; requirement to Node `&gt;= 8` (#3195) Now that `now-client` does not use `fetch-h2`, any version of Node 8 or newer should work with `now-cli`. Related to #2711.</MESSAGE>
      <SHA>99f3ab8b6403a1800942e896620b6b8eada36283</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/config.yml</FILE>
        <FILE>packages/now-cli/package.json</FILE>
        <FILE>packages/now-cli/test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
