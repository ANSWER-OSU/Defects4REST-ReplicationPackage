<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3159</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/3159</ISSUEURL>
  <TITLE>[now-dev] &quot;Invalid `builds` property&quot; when property not set</TITLE>
  <DESCRIPTION>I get the following error when running `now dev` in a directory where there's a `build/` directory alongside the `now.json` file : ```bash &gt; Error! Invalid `builds` property: should NOT have more than 128 items ``` I don't have any `builds` property defined in my `now.json` : ```json { &quot;version&quot;: 2, &quot;name&quot;: &quot;my-website&quot;, &quot;routes&quot;: [ { &quot;src&quot;: &quot;/catalogue&quot;, &quot;dest&quot;: &quot;index.html&quot; }, { &quot;src&quot;: &quot;/contactez-nous&quot;, &quot;dest&quot;: &quot;index.html&quot; }, { &quot;src&quot;: &quot;/qui-sommes-nous&quot;, &quot;dest&quot;: &quot;index.html&quot; } ] } ``` But the `build/` directory indeed contains more than 128 files, and `now dev` is confusing it with a `builds` property. Unfortunately I can't change the name of this directory because it's automatically generated by [Stencil.js](https://github.com/ionic-team/stencil).</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Publish - now@16.1.4-canary.19 - @now/next@1.0.0-canary.12 - @now/routing-utils@1.2.3-canary.2</MESSAGE>
    <SHA>fb0f4beca6cd65d71d90e5d109a95977a5769237</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-build-utils] Fix static file serving from `now dev` (#3167) This PR does a few things - Separate tests into `integration.test.js` and `unit.test.js` - Use one static build instead of many to avoid `should NOT have more than 128 items` error - Add a new unit test so we don't regress Fixes #3159</MESSAGE>
      <SHA>c8c960f7855cea5216571bd1ebbfb5d23757b5d0</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-build-utils/package.json</FILE>
        <FILE>packages/now-build-utils/src/detect-builders.ts</FILE>
        <FILE>packages/now-build-utils/test/integration.test.js</FILE>
        <FILE>packages/now-build-utils/test/unit.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-build-utils] Fix static file serving from `now dev` (#3167) This PR does a few things - Separate tests into `integration.test.js` and `unit.test.js` - Use one static build instead of many to avoid `should NOT have more than 128 items` error - Add a new unit test so we don't regress Fixes #3159</MESSAGE>
      <SHA>58eef7f3940eb8613eeeb546391ef2b90c5f9fcf</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-build-utils/package.json</FILE>
        <FILE>packages/now-build-utils/src/detect-builders.ts</FILE>
        <FILE>packages/now-build-utils/test/integration.test.js</FILE>
        <FILE>packages/now-build-utils/test/unit.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
