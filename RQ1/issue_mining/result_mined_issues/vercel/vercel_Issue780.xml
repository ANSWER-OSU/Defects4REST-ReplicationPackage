<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>780</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/780</ISSUEURL>
  <TITLE>Extrange error in server (internal/streams/legacy.js:59)</TITLE>
  <DESCRIPTION>_From @tomyo on July 17, 2017 20:54_ internal/streams/legacy.js:59 throw er; // Unhandled stream error in pipe. ^ Error: write EPROTO 140217767479104:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:../deps/openssl/openssl/ssl/s23_clnt.c:769: at exports._errnoException (util.js:1018:11) at WriteWrap.afterWrite (net.js:800:14) _Copied from original issue: zeit/now#28_</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>437</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-node] Use ncc before publishing to npm (#755) * [now-node] Use ncc before publishing * Copy entire bridge source file * Remove node-bridge dependency * add typescript to build * ensure typescript reference is not analyzed * remove duplicate build * typescript as a compiler * Revert &quot;typescript as a compiler&quot; This reverts commit f51178e641b09ea6aff0dc98185c86e8d27de2cc. * exclude langs * fixup mkdir * fixup mv command * fixup typescript reference * Change require to use bridge * Remove copy step for bridge defs * Change back to require * Copy bridge again * Remove dependency on @now/node-bridge</MESSAGE>
    <SHA>a9427bbe76c93de623a8367f1d80b514755215da</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Regenerate yarn.lock and pin dependencies (#780) * Regenerate yarn.lock * Fix typings for bridge and helpers * Remove top level dependencies and pin version * Add missing @types/multistream * Add @types/node * Add @types/node * Fix child.stdout null check * Add global types * Move types to root, generate lock file * Remove unused tests inside the integration tests</MESSAGE>
      <SHA>e9632699e1f057f892d6bc031cf389250607c514</SHA>
      <PATCHEDFILES>
        <FILE>package.json</FILE>
        <FILE>packages/now-build-utils/package.json</FILE>
        <FILE>packages/now-build-utils/src/fs/run-user-scripts.ts</FILE>
        <FILE>packages/now-next/package.json</FILE>
        <FILE>packages/now-node-bridge/package.json</FILE>
        <FILE>packages/now-node-bridge/src/bridge.ts</FILE>
        <FILE>packages/now-node/build.sh</FILE>
        <FILE>packages/now-node/src/helpers.ts</FILE>
        <FILE>packages/now-static-build/src/index.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular-configured/e2e/src/app.e2e-spec.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular-configured/src/app/app.component.spec.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular-configured/src/test.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular/e2e/src/app.e2e-spec.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular/src/app/app.component.spec.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/14-angular/src/test.ts</FILE>
        <FILE>packages/now-static-build/test/fixtures/18-umi/src/layouts/__tests__/index.test.tsx</FILE>
        <FILE>packages/now-static-build/test/fixtures/18-umi/src/pages/__tests__/index.test.tsx</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
