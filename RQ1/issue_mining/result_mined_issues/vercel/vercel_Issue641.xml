<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>641</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/641</ISSUEURL>
  <TITLE>Deployment Failures</TITLE>
  <DESCRIPTION>Hi, I'm loving now. I'm just having a fair amount of failed deployments since last night that just hang on 'initializing' in the cli and 'preparing container' in the dashboard. I'm just wondering what I can do to debug this issue. It doesn't seem that the --debug setting in the cli reveals much about the issue just that there is often an unexpected internal error after '[debug] Computing Hashes' and a similar error after [debug] /now/create also quite often but both seem inconsistant. It seems like it all started when the cil first encountered a Dockerfile in one of my repos but that may be a coincidence. edit: But also if I just keep trying eventually they seem to work. Except for my create-react-app which never seem to work. edit2: For the failed create-react-app deployments I get the following error on repeated retries until it fails. /now/create: 50841.727ms &gt; [debug] Retrying: Error: An unexpected internal error occurred Error: An unexpected internal error occurred at deployment.retry (/snapshot/home/travis/build/zeit/now-cli/lib/index.js:201:15) at process._tickCallback (internal/process/next_tick.js:103:7)</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-ruby] Use BUNDLE_JOBS=4 for parallel Ruby gem downloads (#689)</MESSAGE>
    <SHA>880ef77b7b58fc3fde6f9ce2696cf5730567d25d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bumps ncc to 0.20.x (#641) * bumps ncc to 0.20.0 * upgrades to ncc@0.20.2 this includes the fixes for https://github.com/zeit/ncc/issues/434 * defines filterAssetBase when calling ncc This prevents assets from being evicted by ncc's filtering. * scopes includeFiles under the package root it was previously scoped under the directory of the input file currently being processed. This should fix #522 along with fixing the 09-include-files tests for now-node * Bump to ncc 0.20.3 * Bump ncc-watcher to 1.1.0</MESSAGE>
      <SHA>df2769717baa50d82dcb7633172b19f366642358</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-node-server/index.js</FILE>
        <FILE>packages/now-node-server/package.json</FILE>
        <FILE>packages/now-node/@types/zeit__ncc/index.d.ts</FILE>
        <FILE>packages/now-node/package.json</FILE>
        <FILE>packages/now-node/src/index.ts</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Revert &quot;Bumps ncc to 0.20.x (#641)&quot; This reverts commit cd45dce724405968e9e6f58ae4fad983c5d35f20.</MESSAGE>
      <SHA>9198b72382eddff7ec6d5eec3892af471664ccae</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-node-server/index.js</FILE>
        <FILE>packages/now-node-server/package.json</FILE>
        <FILE>packages/now-node/@types/zeit__ncc/index.d.ts</FILE>
        <FILE>packages/now-node/package.json</FILE>
        <FILE>packages/now-node/src/index.ts</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
