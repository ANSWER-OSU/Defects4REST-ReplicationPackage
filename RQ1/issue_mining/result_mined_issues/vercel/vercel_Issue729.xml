<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>729</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/729</ISSUEURL>
  <TITLE>Fails install on Windows</TITLE>
  <DESCRIPTION>`npm i now -g` On windows, yields ``` C:\Users\User\test&gt;npm i now -g C:\Program Files\nodejs\now -&gt; C:\Program Files\nodejs\node_modules\now\download\dist\now &gt; now@7.3.0 postinstall C:\Program Files\nodejs\node_modules\now &gt; node download/install.js &gt; For the source code, check out: https://github.com/zeit/now-cli &gt; Downloading now CLI 7.3.0 [====================] 100% { Error: ENOENT: no such file or directory, open 'C:\Users\User\AppData\Roaming\npm\now' at Error (native) at Object.fs.openSync (fs.js:641:18) at Object.fs.readFileSync (fs.js:509:33) at _callee2$ (C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:2138:249) at tryCatch (C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:2328:40) at GeneratorFunctionPrototype.invoke [as _invoke] (C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:2566:22) at GeneratorFunctionPrototype.prototype.(anonymous function) [as next] (C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:2380:21) at step (C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:3023:30) at C:\ProgramData\nvm\v6.11.1\node_modules\now\download\dist\download.js:3034:13 at process._tickCallback (internal/process/next_tick.js:109:7) errno: -4058, code: 'ENOENT', syscall: 'open', path: 'C:\\Users\\User\\AppData\\Roaming\\npm\\now' } npm ERR! Windows_NT 10.0.15063 npm ERR! argv &quot;C:\\Program Files\\nodejs\\node.exe&quot; &quot;C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js&quot; &quot;i&quot; &quot;now&quot; &quot;-g&quot; npm ERR! node v6.11.1 npm ERR! npm v3.10.10 npm ERR! code ELIFECYCLE npm ERR! now@7.3.0 postinstall: `node download/install.js` npm ERR! Exit status 2 npm ERR! npm ERR! Failed at the now@7.3.0 postinstall script 'node download/install.js'. npm ERR! Make sure you have the latest version of node.js and npm installed. npm ERR! If you do, this is most likely a problem with the now package, npm ERR! not with npm itself. npm ERR! Tell the author that this fails on your system: npm ERR! node download/install.js npm ERR! You can get information on how to open an issue for this project with: npm ERR! npm bugs now npm ERR! Or if that isn't available, you can get their info via: npm ERR! npm owner ls now npm ERR! There is likely additional logging output above. npm ERR! Please include the following file with any support request: npm ERR! C:\Users\User\test\npm-debug.log ``` Steps to reproduce: - [virtualbox image from microsoft](https://developer.microsoft.com/en-us/windows/downloads/virtual-machines). - [Install Chocolatey](https://chocolatey.org/install) - `choco install nvm -y` - `nvm install 6.11.1` - `nvm use 6.11.1` - `npm i now -g` Fails to install 7.3.0</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>96</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>secrets: treat any 4xx error code as &quot;user error&quot; (#744) The Secrets endpoints used to inappropriately return a 400 error code when a secret name collision occurred (i.e. when creating a secret with a name that already exists, or when trying to rename a secret to a name that is already in use). Now they return 409 Conflict which is more correct for those scenarios. So while we're at it, just treat all 4xx error codes as user errors.</MESSAGE>
    <SHA>d8de1bcd9126e848eb3f43fd988dfa0091bfcc27</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix for #729 (#745) * use 'which' to detect the path of global cmd * fix downloading apline binaries</MESSAGE>
      <SHA>7336c8cb0ece0c5559e87bd713eba4f13dff0d11</SHA>
      <PATCHEDFILES>
        <FILE>download/src/index.js</FILE>
        <FILE>package-lock.json</FILE>
        <FILE>package.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
