<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3069</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/3069</ISSUEURL>
  <TITLE>Now should detect the home folder or warn users about the default behavior.</TITLE>
  <DESCRIPTION>## Summary It is very common that users run, by mistake, the `now` command in the home folder. This is especially common with new users and, even the deployment will likely fail, it can be a security issue for those users. ## Ideas 1. We can detect the home folder and avoid the command to exit successfully. 2. When deploying static files only, we can introduce a warning. 3. Detect the first run of the user and showcase the usage of the tool for the user. Something like a &quot;video&quot; tutorial but right in the terminal. We could ask the user to run the following steps: 3.1 Would you like to run a tutorial y/n? 3.2 If yes, then show a list of available examples and the user could select them. 3.3 Explain what is happening and useful URLs.</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-static-build] Add test for `BUNDLE_WITHOUT` env var (#3070) This adds a test which confirms that `BUNDLE_WITHOUT=&quot;test:development&quot;` works properly. This env var is equivalent to `bundle install --without test development`. There's no code change here because groups are defined by the user, therefore they must define which ones to ignore (if any). - Groups Guide: https://bundler.io/v2.0/guides/groups.html - BUNDLER_WITHOUT: https://bundler.io/v2.0/bundle_config.html#LIST-OF-AVAILABLE-KEYS - Example Gemfile: https://github.com/thoughtbot/administrate/blob/master/Gemfile PRODUCT-133 #close</MESSAGE>
    <SHA>651429cb524b82d080c8aa9ddadb083b512d649e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-cli] Render prompt when deploying home directory (#3057) Fixes #3069 PRODUCT-160 #close</MESSAGE>
      <SHA>cc643e373d4edcc5ffeb593539bc1bcc9343726f</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/commands/deploy/latest.js</FILE>
        <FILE>packages/now-cli/src/commands/deploy/legacy.ts</FILE>
        <FILE>packages/now-cli/src/util/deploy/should-deploy-dir.ts</FILE>
        <FILE>packages/now-cli/test/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Render prompt when deploying home directory (#3057) Fixes #3069 PRODUCT-160 #close</MESSAGE>
      <SHA>53e4b71f89132249117f00bd324e35aeabda746d</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/commands/deploy/latest.js</FILE>
        <FILE>packages/now-cli/src/commands/deploy/legacy.ts</FILE>
        <FILE>packages/now-cli/src/util/deploy/should-deploy-dir.ts</FILE>
        <FILE>packages/now-cli/test/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
