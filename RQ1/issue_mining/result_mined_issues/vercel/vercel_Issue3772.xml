<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3772</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/3772</ISSUEURL>
  <TITLE>now dev requires login and is missing --token from help</TITLE>
  <DESCRIPTION>`now dev` requires login now. If you don't log in it gives you a fun error like this: ``` Error! An unexpected error occurred! Error: The specified token is not valid at Object.getUser (/home/user/.config/yarn/global/node_modules/now/dist/index.js:2:2248948) at processTicksAndRejections (internal/process/task_queues.js:94:5) Error: The specified token is not valid at Object.getUser (/home/user/.config/yarn/global/node_modules/now/dist/index.js:2:2248948) at processTicksAndRejections (internal/process/task_queues.js:94:5) ``` In CI you can specify a token using `-t` or `--token`, but this is not listed in the description shown by specifying `--help`.</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>33</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Publish Canary - @now/next@2.4.1-canary.1 - @now/routing-utils@1.7.1-canary.1</MESSAGE>
    <SHA>b7943e83d278cab4158b7f85ebfd86a8d5a555db</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-cli] Fix invalid token error message during project link (#3907) This PR improves the error message and prevents &quot;An unexpected error occurred&quot; when the token is invalid during a project link step. I also added the `--token` option to `now dev --help` . Lastly, I updated `now logout` to work correctly when the token is invalid. - Fixes #3772 - Fixes #3786</MESSAGE>
      <SHA>f37edbc670c72a651fde3517b162d32fb3343f60</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/commands/dev/index.ts</FILE>
        <FILE>packages/now-cli/src/commands/logout.ts</FILE>
        <FILE>packages/now-cli/src/index.js</FILE>
        <FILE>packages/now-cli/src/util/errors.ts</FILE>
        <FILE>packages/now-cli/src/util/projects/link.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
