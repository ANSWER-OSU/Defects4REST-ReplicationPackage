<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3147</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/3147</ISSUEURL>
  <TITLE>UnicodeDecodeError in python builder</TITLE>
  <DESCRIPTION>This is essentially the opposite of #3091, there's no way to return anything but UTF-8 (such as a binary file) from the handler class. The WSGI handler works around this by encoding the output as a base64 string, and then supplying `encoding` in the result dict, but there's no way to do that from the simpler handler class right now.</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Publish - @now/build-utils@1.0.0-canary.11 - now@16.1.4-canary.17 - @now/next@1.0.0-canary.11</MESSAGE>
    <SHA>de48e28fa12303e6f1cd2bfb76cf285769a3bdae</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-python] Fix UnicodeDecodeError for binary response from handler (#3148) Fixes #3147</MESSAGE>
      <SHA>9ecb011732fb2d018651d9770df50d8623efed99</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-python/now_init.py</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/index.py</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/now.json</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/probe.js</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/zeit-white-triangle.png</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-python] Fix UnicodeDecodeError for binary response from handler (#3148) Fixes #3147</MESSAGE>
      <SHA>90c59d6ae2d6b99a8e245552b735af4e41d3043c</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-python/now_init.py</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/index.py</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/now.json</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/probe.js</FILE>
        <FILE>packages/now-python/test/fixtures/15-binary-handler/zeit-white-triangle.png</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
