<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>893</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/893</ISSUEURL>
  <TITLE>Cryptic error message if package.json contains an error</TITLE>
  <DESCRIPTION>I accidentally forgot to remove a trailing comma in my `package.json`. When trying to deploy with a faulty `package.json` file, now returns this cryptic error message. It would be nice if that error at least mentioned `package.json`. ```` &gt; Error! An unexpected error occurred! SyntaxError: Unexpected token } in JSON at position 133 at JSON.parse (&lt;anonymous&gt;) at readJSON (/snapshot/now-cli/dist/now.js:4484:17) SyntaxError: Unexpected token } in JSON at position 133 at JSON.parse (&lt;anonymous&gt;) at readJSON (/snapshot/now-cli/dist/now.js:4484:17) ````</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>44</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Use second generation of API for creating deployments (#906) * Fix `now alias` for domains without DNS records (#898) * 8.3.9 * Escape @ in MX record example (#900) * Remove duplication of deployment complete print out * Use v2 now API v2 API requires the client to upload files before creating a deployment.</MESSAGE>
    <SHA>4338c6a205e13c99197bfe47396eef76051b5716</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Overhaul JSON reading, parsing, and writing (#899) * Fix `now alias` for domains without DNS records (#898) * 8.3.9 * Overhaul JSON loading and parsing Reading JSON files from disk is now simpler, with clearer error messages. Fixes #893 * More robust JSON writing Make directories if needed and write to disk atomically. * Remove unused import * Escape @ in MX record example (#900) * Pinned dependencies</MESSAGE>
      <SHA>3f0b06a642bafd91a96164281f67561766346ac6</SHA>
      <PATCHEDFILES>
        <FILE>download/src/index.js</FILE>
        <FILE>package.json</FILE>
        <FILE>src/describe-project.js</FILE>
        <FILE>src/get-default-auth-cfg.js</FILE>
        <FILE>src/get-default-cfg.js</FILE>
        <FILE>src/now.js</FILE>
        <FILE>src/providers/sh/commands/logout.js</FILE>
        <FILE>src/providers/sh/util/alias.js</FILE>
        <FILE>src/providers/sh/util/read-metadata.js</FILE>
        <FILE>src/providers/sh/util/sort-deployments.js</FILE>
        <FILE>src/util/config-files.js</FILE>
        <FILE>test/_fixtures/json-syntax-error/package.json</FILE>
        <FILE>test/index.js</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Overhaul JSON reading, parsing, and writing (#899) * Fix `now alias` for domains without DNS records (#898) * 8.3.9 * Overhaul JSON loading and parsing Reading JSON files from disk is now simpler, with clearer error messages. Fixes #893 * More robust JSON writing Make directories if needed and write to disk atomically. * Remove unused import * Escape @ in MX record example (#900) * Pinned dependencies</MESSAGE>
      <SHA>bcce2c5ffc3dd810b2ee1162e1df51fd8a770591</SHA>
      <PATCHEDFILES>
        <FILE>download/src/index.js</FILE>
        <FILE>package.json</FILE>
        <FILE>src/describe-project.js</FILE>
        <FILE>src/get-default-auth-cfg.js</FILE>
        <FILE>src/get-default-cfg.js</FILE>
        <FILE>src/now.js</FILE>
        <FILE>src/providers/sh/commands/logout.js</FILE>
        <FILE>src/providers/sh/util/alias.js</FILE>
        <FILE>src/providers/sh/util/read-metadata.js</FILE>
        <FILE>src/providers/sh/util/sort-deployments.js</FILE>
        <FILE>src/util/config-files.js</FILE>
        <FILE>test/_fixtures/json-syntax-error/package.json</FILE>
        <FILE>test/index.js</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[tests] Add automerge (#893)</MESSAGE>
      <SHA>9258a749867eb2c5e38edcff6658f0f90a6e316f</SHA>
      <PATCHEDFILES>
        <FILE>.kodiak.toml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
