<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2021</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2021</ISSUEURL>
  <TITLE>`now dev` .gitignore bug</TITLE>
  <DESCRIPTION>See this repo https://github.com/daohoangson/now-cli-gitignore-bug for reproducible steps. The error is `Cannot read property 'fsPath' of undefined` at https://github.com/zeit/now-builders/blob/145e5a10c2f827c14d680e5b7323d2f3cec3884e/packages/now-node/src/index.ts#L60 ```js const entrypointPath = downloadedFiles[entrypoint].fsPath; ``` `@now/node` was trying to get the path for `entrypoint` but `downloadedFiles` doesn't have that key because `now dev` incorrectly excludes &quot;src/test/index.ts&quot;. I think it's a bug with `createIgnoreList` https://github.com/zeit/now-cli/blob/f693acbaa95fab89c1c9665b9a8f4df82ea78a11/src/commands/dev/lib/dev-builder.ts#L244</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>14.3.0-canary.19</MESSAGE>
    <SHA>99790b1560d1fc61ec89031da4c5bada1e519ba1</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now dev] Don't add `.gitignore` to the ignore list `.gitignore` is not respected anymore for Now v2, so this was a bug. Also removes `ncc` and `user` from the ignore list, since that issue was fixed a while back as well. Fixes #2021.</MESSAGE>
      <SHA>364ff18bdb01e0774a897377a146a666a0090b4e</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-builder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Don't add `.gitignore` to the ignore list (#2025) `.gitignore` is not respected anymore for Now v2, so this was a bug. Also removes `ncc` and `user` from the ignore list, since that issue was fixed a while back as well. Fixes #2021.</MESSAGE>
      <SHA>b3bd8c592987e81ff16dde485f115a586a57e6dd</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-builder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Don't add `.gitignore` to the ignore list (#2025) `.gitignore` is not respected anymore for Now v2, so this was a bug. Also removes `ncc` and `user` from the ignore list, since that issue was fixed a while back as well. Fixes #2021.</MESSAGE>
      <SHA>4c6ffeaebc8ca92e2ba2e1a723c1a6584fed02f5</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-builder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Don't add `.gitignore` to the ignore list (#2025) `.gitignore` is not respected anymore for Now v2, so this was a bug. Also removes `ncc` and `user` from the ignore list, since that issue was fixed a while back as well. Fixes #2021.</MESSAGE>
      <SHA>3f57d1381e29a0223e348b36b2f6b03b524ed8d8</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-builder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
