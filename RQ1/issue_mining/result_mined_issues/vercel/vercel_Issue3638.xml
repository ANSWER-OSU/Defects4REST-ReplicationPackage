<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3638</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/3638</ISSUEURL>
  <TITLE>Cannot Deploy Python Runtime</TITLE>
  <DESCRIPTION>Hi, I wanted to set up a simple Python crawler so I resorted to the **Python runtime**. When I tried to run the demo from the [official documentation](https://zeit.co/docs/runtimes#official-runtimes/python), it turned out that the demos all failed. I followed exactly the same procedure, and used `now dev` to build locally. When I attempted to visit http://localhost:3000/api/, it gave me a `502` error as follows. I tried all three examples and none of them worked. ![image](https://user-images.githubusercontent.com/26131764/72917564-08713800-3d7f-11ea-841e-0faa2531d57a.png) There went the second problem when I tried to `now` it to check if it was a local error, but it seemed zeit was inaccessible. ![image](https://user-images.githubusercontent.com/26131764/72917706-4a9a7980-3d7f-11ea-977b-bea3b2580e93.png) Thank you very much!</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>8</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-cli] Add support for the `rootDirectory` property (#3686) * [now-cli] Add support for the `rootDirectory` property * Only check if rootDirectory exists * Add test * Support now dev * Use defaults * Comment * Normalize the path input * Adjust test * Remove .only * Adjust more tests * Adjust test * Fix test * Remove unused import * Update packages/now-cli/src/util/validate-paths.ts Co-Authored-By: Luc &lt;luc.leray@gmail.com&gt; * Run check on normalized path * Add more checks * Change error message * Use basename as prefix * Use correct path when linking * Update packages/now-cli/src/util/input/input-root-directory.ts Co-Authored-By: Luc &lt;luc.leray@gmail.com&gt; Co-authored-by: Luc &lt;luc.leray@gmail.com&gt;</MESSAGE>
    <SHA>554cc42d83ae1398e8f2e6ac466055dcc881dc0b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-cli] Fix `now dev` file output renaming (#3703) There was a bug where python src files were being renamed when it really should be the output files only. This is a tricky bug because production deployments build all files first and then perform routing. So we simply rename lambda outputs with prod deployments. But `now dev` matches a request URL to a build before performing the build lazily so we have to rename source files. The solution is to add both the original file name and the renamed file name in the `files` map so that it matches correctly but `zeit/fun` will still copy the original source files in the output correctly. Routing will match on the extensionless file, the builder will use the file with extension (it doesn't know about file renaming), then the build results in a lambda output which is renamed to extensionless. I added a test for `@now/python` and updated the `@now/bash` test. Fixes #3638</MESSAGE>
      <SHA>4ca0ff8426f67bbbecc525fdf99e98bfcf5e6e52</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/util/dev/builder.ts</FILE>
        <FILE>packages/now-cli/src/util/dev/server.ts</FILE>
        <FILE>packages/now-cli/src/util/dev/types.ts</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/custom-runtime/.gitignore</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/custom-runtime/api/user.sh</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/custom-runtime/now.json</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/python-flask/.gitignore</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/python-flask/api/date.py</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/python-flask/api/user.py</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/python-flask/index.html</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/python-flask/requirements.txt</FILE>
        <FILE>packages/now-cli/test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
