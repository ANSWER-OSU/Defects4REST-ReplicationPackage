<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>36</ISSUENO>
  <ISSUEURL>https://github.com/enviroCar/enviroCar-server/issues/36</ISSUEURL>
  <TITLE>Incorrect removal of friends</TITLE>
  <DESCRIPTION>Remove friend has a invalid rest endpoint at `DELETE /rest/users/:user/friends` with a entity reference to the removed friend. `DELETE /rest/users/:user/friends/:friend` would be the right choice. Currently `DELETE /rest/users/:user/friends/:friend` would entirely delete the user `friend`. Solution would be to create a new `FriendResource` that extends `UserResource` and overrides the `DELETE` operation. Also there currently isn't any check whether the current user is authorized to do so. Context: - [FriendsResource](https://github.com/car-io/car.io-server/blob/master/rest/src/main/java/io/car/server/rest/resources/FriendsResource.java#L75)</DESCRIPTION>
  <REPONAME>enviroCar-server</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>more efficient user removal</MESSAGE>
    <SHA>16d6e9b2442fb7dd8edce1df471f84a449a8e409</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed #36: Incorrect removal of friends</MESSAGE>
      <SHA>9f47f8bcd2e2c539f7d11a0c319b7dcb9607b2a5</SHA>
      <PATCHEDFILES>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/AbstractMongoDao.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/ResourceFactory.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/UserResource.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch 'dev' * dev: 404 for users that are not friends configuration options for input/output validation removed unnecessary factory bindings compared wrong media type Fixed #36: Incorrect removal of friends more efficient user removal cleaned statistics dao dependencies remove user references on delete delete track references on measurements added todos for #35 seperated encoders and decoders do not store measurement refs in track bulk upload completed Fixes #30</MESSAGE>
      <SHA>8c653b788d95548ca18d45b254fa8fdd649b58e0</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/io/car/server/core/Service.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/dao/StatisticsDao.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/dao/TrackDao.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/entities/Track.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/entities/User.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/statistics/StatisticsService.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/statistics/StatisticsServiceImpl.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/util/Pagination.java</FILE>
        <FILE>create.sh</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/AbstractMongoDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoGroupDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoMeasurementDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoStatisticsDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoTrackDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoUserDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/entity/MongoTrack.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/entity/MongoUser.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/util/Ops.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/CodingFactory.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/JSONConstants.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/PaginationFilter.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/AbstractEntityDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/EntityDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/GeoJSONDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/GroupDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/MeasurementDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/PhenomenonDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/SensorDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/TrackDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/UserDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/AbstractEntityEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/EntityEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GeoJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GroupEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GroupsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/MeasurementEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/MeasurementsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/PhenomenonEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/PhenomenonsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/SensorEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/SensorsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/StatisticEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/StatisticsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/TrackEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/TracksEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/UserEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/UsersEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JSONSchemaModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyCodingModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyProviderModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyResourceModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/provider/AbstracJsonProvider.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/provider/AbstractJsonEntityProvider.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/MeasurementsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/ResourceFactory.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/RootResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/StatisticsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/TrackResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/TracksResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/UserResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/util/GeoJSON.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/validation/JSONSchemaResourceFilterFactory.java</FILE>
        <FILE>rest/src/main/resources/schema/track.create.json</FILE>
        <FILE>rest/src/test/java/io/car/server/rest/provider/GeoJSONTest.java</FILE>
        <FILE>webapp/src/test/java/io/car/server/RootResourceTest.java</FILE>
        <FILE>webapp/src/test/java/io/car/server/UsersResourceTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
