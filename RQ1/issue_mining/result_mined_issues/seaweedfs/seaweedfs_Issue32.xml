<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/32</ISSUEURL>
  <TITLE>-filer.redirectOnRead should imply -filer</TITLE>
  <DESCRIPTION>If I start a 'weed server -filer.redirectOnRead' without specifying -filer, it gives a puzzling error message because the filer does not start. If the user sets -filer.redirectOnRead, make it start the filer too.</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #31 from chrislusf/master sync</MESSAGE>
    <SHA>ab1105c52472946efab9713bf15df45e14ff4514</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #32 from chrislusf/master sync</MESSAGE>
      <SHA>cf7a1c722fa82fa78c546f68e4814fff7dc6d1e2</SHA>
      <PATCHEDFILES>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>weed/command/filer.go</FILE>
        <FILE>weed/command/s3.go</FILE>
        <FILE>weed/command/server.go</FILE>
        <FILE>weed/filer/filer_notify.go</FILE>
        <FILE>weed/filer/reader_at.go</FILE>
        <FILE>weed/filesys/dirty_page.go</FILE>
        <FILE>weed/filesys/dirty_page_interval.go</FILE>
        <FILE>weed/s3api/s3api_server.go</FILE>
        <FILE>weed/shell/command_ec_balance.go</FILE>
        <FILE>weed/shell/command_volume_fsck.go</FILE>
        <FILE>weed/storage/erasure_coding/ec_volume.go</FILE>
        <FILE>weed/topology/topology.go</FILE>
        <FILE>weed/topology/volume_layout.go</FILE>
        <FILE>weed/topology/volume_location_list.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #18 from chrislusf/master Merge pull request chrislusf#32 from chrislusf/master</MESSAGE>
      <SHA>31247bdaa0d5fd166ce0fbbd14e4d0ba50877ff2</SHA>
      <PATCHEDFILES>
        <FILE>.github/workflows/release.yml</FILE>
        <FILE>Makefile</FILE>
        <FILE>README.md</FILE>
        <FILE>docker/Makefile</FILE>
        <FILE>docker/entrypoint.sh</FILE>
        <FILE>docker/local-cluster-compose.yml</FILE>
        <FILE>docker/local-registry-compose.yml</FILE>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>k8s/seaweedfs/Chart.yaml</FILE>
        <FILE>k8s/seaweedfs/dashboards/seaweedfs-grafana-dashboard.json</FILE>
        <FILE>k8s/seaweedfs/templates/_helpers.tpl</FILE>
        <FILE>k8s/seaweedfs/templates/cronjob.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/filer-statefulset.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/s3-deployment.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/s3-service.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/s3-servicemonitor.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/seaweedfs-grafana-dashboard.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/seaweefs-grafana-dashboard.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/volume-service.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/volume-servicemonitor.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/volume-statefulset.yaml</FILE>
        <FILE>k8s/seaweedfs/values.yaml</FILE>
        <FILE>other/java/client/pom.xml</FILE>
        <FILE>other/java/client/pom.xml.deploy</FILE>
        <FILE>other/java/client/pom_debug.xml</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/ChunkCache.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/FileChunkManifest.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/FilerClient.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/SeaweedRead.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/SeaweedWrite.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/VolumeIdCache.java</FILE>
        <FILE>other/java/client/src/main/proto/filer.proto</FILE>
        <FILE>other/java/examples/pom.xml</FILE>
        <FILE>other/java/examples/src/main/java/com/seaweedfs/examples/UnzipFile.java</FILE>
        <FILE>other/java/examples/src/main/java/com/seaweedfs/examples/WatchFiles.java</FILE>
        <FILE>other/java/hdfs2/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs2/pom.xml</FILE>
        <FILE>other/java/hdfs2/src/main/java/seaweed/hdfs/SeaweedFileSystem.java</FILE>
        <FILE>other/java/hdfs2/src/main/java/seaweed/hdfs/SeaweedFileSystemStore.java</FILE>
        <FILE>other/java/hdfs2/src/main/java/seaweed/hdfs/SeaweedOutputStream.java</FILE>
        <FILE>other/java/hdfs3/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs3/pom.xml</FILE>
        <FILE>other/java/hdfs3/src/main/java/seaweed/hdfs/SeaweedFileSystem.java</FILE>
        <FILE>other/java/hdfs3/src/main/java/seaweed/hdfs/SeaweedFileSystemStore.java</FILE>
        <FILE>other/java/hdfs3/src/main/java/seaweed/hdfs/SeaweedOutputStream.java</FILE>
        <FILE>other/metrics/grafana_seaweedfs.json</FILE>
        <FILE>other/metrics/grafana_seaweedfs_k8s.json</FILE>
        <FILE>unmaintained/s3/benchmark/hsbench.sh</FILE>
        <FILE>unmaintained/stress_filer_upload/write_files/write_files.go</FILE>
        <FILE>weed/command/benchmark.go</FILE>
        <FILE>weed/command/filer.go</FILE>
        <FILE>weed/command/filer_copy.go</FILE>
        <FILE>weed/command/master.go</FILE>
        <FILE>weed/command/mount.go</FILE>
        <FILE>weed/command/mount_std.go</FILE>
        <FILE>weed/command/s3.go</FILE>
        <FILE>weed/command/scaffold.go</FILE>
        <FILE>weed/command/server.go</FILE>
        <FILE>weed/command/volume.go</FILE>
        <FILE>weed/filer/filechunk_manifest.go</FILE>
        <FILE>weed/filer/filer.go</FILE>
        <FILE>weed/filer/filer_conf.go</FILE>
        <FILE>weed/filer/filer_conf_test.go</FILE>
        <FILE>weed/filer/filer_delete_entry.go</FILE>
        <FILE>weed/filer/filer_deletion.go</FILE>
        <FILE>weed/filer/filer_notify.go</FILE>
        <FILE>weed/filer/filer_notify_append.go</FILE>
        <FILE>weed/filer/filer_on_meta_event.go</FILE>
        <FILE>weed/filer/leveldb/leveldb_store.go</FILE>
        <FILE>weed/filer/leveldb/leveldb_store_test.go</FILE>
        <FILE>weed/filer/leveldb2/leveldb2_store.go</FILE>
        <FILE>weed/filer/leveldb2/leveldb2_store_test.go</FILE>
        <FILE>weed/filer/meta_aggregator.go</FILE>
        <FILE>weed/filer/postgres/postgres_store.go</FILE>
        <FILE>weed/filer/reader_at.go</FILE>
        <FILE>weed/filer/stream.go</FILE>
        <FILE>weed/filesys/dir.go</FILE>
        <FILE>weed/filesys/dir_link.go</FILE>
        <FILE>weed/filesys/dirty_page.go</FILE>
        <FILE>weed/filesys/dirty_page_interval.go</FILE>
        <FILE>weed/filesys/file.go</FILE>
        <FILE>weed/filesys/filehandle.go</FILE>
        <FILE>weed/filesys/meta_cache/meta_cache.go</FILE>
        <FILE>weed/filesys/meta_cache/meta_cache_init.go</FILE>
        <FILE>weed/filesys/meta_cache/meta_cache_subscribe.go</FILE>
        <FILE>weed/filesys/wfs.go</FILE>
        <FILE>weed/filesys/wfs_filer_client.go</FILE>
        <FILE>weed/filesys/wfs_write.go</FILE>
        <FILE>weed/ftpd/ftp_server.go</FILE>
        <FILE>weed/operation/assign_file_id.go</FILE>
        <FILE>weed/operation/needle_parse_test.go</FILE>
        <FILE>weed/operation/upload_content.go</FILE>
        <FILE>weed/pb/filer.proto</FILE>
        <FILE>weed/pb/filer_pb/filer.pb.go</FILE>
        <FILE>weed/pb/filer_pb/filer_pb_helper.go</FILE>
        <FILE>weed/pb/grpc_client_server.go</FILE>
        <FILE>weed/pb/master.proto</FILE>
        <FILE>weed/pb/master_pb/master.pb.go</FILE>
        <FILE>weed/replication/sink/filersink/fetch_write.go</FILE>
        <FILE>weed/replication/sink/filersink/filer_sink.go</FILE>
        <FILE>weed/replication/sink/s3sink/s3_write.go</FILE>
        <FILE>weed/s3api/auth_credentials.go</FILE>
        <FILE>weed/s3api/filer_util.go</FILE>
        <FILE>weed/s3api/filer_util_tags.go</FILE>
        <FILE>weed/s3api/http/header.go</FILE>
        <FILE>weed/s3api/s3api_bucket_handlers.go</FILE>
        <FILE>weed/s3api/s3api_object_copy_handlers.go</FILE>
        <FILE>weed/s3api/s3api_object_handlers.go</FILE>
        <FILE>weed/s3api/s3api_object_multipart_handlers.go</FILE>
        <FILE>weed/s3api/s3api_objects_list_handlers.go</FILE>
        <FILE>weed/s3api/s3api_server.go</FILE>
        <FILE>weed/s3api/s3err/s3api_errors.go</FILE>
        <FILE>weed/server/common.go</FILE>
        <FILE>weed/server/filer_grpc_server.go</FILE>
        <FILE>weed/server/filer_server.go</FILE>
        <FILE>weed/server/filer_server_handlers.go</FILE>
        <FILE>weed/server/filer_server_handlers_read.go</FILE>
        <FILE>weed/server/filer_server_handlers_tagging.go</FILE>
        <FILE>weed/server/filer_server_handlers_write.go</FILE>
        <FILE>weed/server/filer_server_handlers_write_autochunk.go</FILE>
        <FILE>weed/server/filer_server_handlers_write_cipher.go</FILE>
        <FILE>weed/server/filer_ui/templates.go</FILE>
        <FILE>weed/server/master_grpc_server.go</FILE>
        <FILE>weed/server/master_server.go</FILE>
        <FILE>weed/server/master_ui/templates.go</FILE>
        <FILE>weed/server/raft_server.go</FILE>
        <FILE>weed/server/volume_grpc_client_to_master.go</FILE>
        <FILE>weed/server/volume_grpc_copy.go</FILE>
        <FILE>weed/server/volume_server_handlers.go</FILE>
        <FILE>weed/server/volume_server_handlers_read.go</FILE>
        <FILE>weed/server/webdav_server.go</FILE>
        <FILE>weed/shell/command_collection_delete.go</FILE>
        <FILE>weed/shell/command_ec_balance.go</FILE>
        <FILE>weed/shell/command_fs_configure.go</FILE>
        <FILE>weed/shell/command_fs_meta_cat.go</FILE>
        <FILE>weed/shell/command_volume_balance.go</FILE>
        <FILE>weed/shell/command_volume_balance_test.go</FILE>
        <FILE>weed/shell/command_volume_fix_replication.go</FILE>
        <FILE>weed/shell/command_volume_fsck.go</FILE>
        <FILE>weed/shell/command_volume_mark.go</FILE>
        <FILE>weed/shell/command_volume_move.go</FILE>
        <FILE>weed/shell/commands.go</FILE>
        <FILE>weed/stats/metrics.go</FILE>
        <FILE>weed/storage/disk_location.go</FILE>
        <FILE>weed/storage/erasure_coding/ec_volume.go</FILE>
        <FILE>weed/storage/needle/needle_parse_upload.go</FILE>
        <FILE>weed/storage/needle/needle_read_write.go</FILE>
        <FILE>weed/storage/store.go</FILE>
        <FILE>weed/storage/volume.go</FILE>
        <FILE>weed/storage/volume_checking.go</FILE>
        <FILE>weed/storage/volume_loading.go</FILE>
        <FILE>weed/storage/volume_read_write.go</FILE>
        <FILE>weed/topology/store_replicate.go</FILE>
        <FILE>weed/topology/topology.go</FILE>
        <FILE>weed/topology/topology_vacuum.go</FILE>
        <FILE>weed/topology/volume_layout.go</FILE>
        <FILE>weed/topology/volume_location_list.go</FILE>
        <FILE>weed/util/bytes.go</FILE>
        <FILE>weed/util/compression.go</FILE>
        <FILE>weed/util/config.go</FILE>
        <FILE>weed/util/constants.go</FILE>
        <FILE>weed/util/http_util.go</FILE>
        <FILE>weed/util/limiter.go</FILE>
        <FILE>weed/util/retry.go</FILE>
        <FILE>weed/wdclient/masterclient.go</FILE>
        <FILE>weed/wdclient/vid_map.go</FILE>
        <FILE>weed/wdclient/vid_map_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
