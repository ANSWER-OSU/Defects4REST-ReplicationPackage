<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>93</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/93</ISSUEURL>
  <TITLE>Lots of &quot;volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01&quot; errors in our production server log files</TITLE>
  <DESCRIPTION>Here is the ### Deploy structure ``` 10.252.130.159:9333(master) 10.252.130.159:5088(haproxy) / \ 10.252.133.22:5083 (volume1) 10.252.135.207:5084(volume2) Replication Stratage: 001 ``` So, it always gets the content via haproxy from the volume server. But after running few days, we get a 404 error sometimes from the 10.252.130.159:5088 for a special fid such as :5,1001e1b02c1b01. And we did a check and found that one of volume server(different fid on the random different server) always output the following logs: ``` I0303 15:44:23 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:45:14 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:52:52 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:52:52 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:53:05 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:53:06 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:53:07 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:53:07 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 I0303 15:53:18 21828 volume_server_handlers.go:75] read error: &lt;nil&gt; /5,1001e1b02c1b01 ``` It means that the file for [fid:5,1001e1b02c1b01] has be damaged? And how to fix this? How could be happened? any suggestions?</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Avoid wrong way to delete on replication failure Avoid wrong way to delete on replication failure. This deletion has bug to write. The better fix is not to use the deletion on failure at all.</MESSAGE>
    <SHA>853701cb6b13c0e56c0b9c242aa027003e32f6c2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>adding special handling to recover data if possible For bug #87 and #93, add special handling to recover data if possible.</MESSAGE>
      <SHA>d48d76cb4f419a58539fb84c7a45c7eb863b854f</SHA>
      <PATCHEDFILES>
        <FILE>go/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>one-off fix for issues/93 https://github.com/chrislusf/weed-fs/issues/93</MESSAGE>
      <SHA>981c981fa8862c34f0a56ec2823f66a029c17826</SHA>
      <PATCHEDFILES>
        <FILE>unmaintained/README.txt</FILE>
        <FILE>unmaintained/fix_dat/fix_dat.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
