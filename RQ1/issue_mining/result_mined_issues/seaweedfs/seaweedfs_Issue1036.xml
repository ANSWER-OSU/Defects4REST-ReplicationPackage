<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1036</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/1036</ISSUEURL>
  <TITLE>Update existing file fails - Even possible?</TITLE>
  <DESCRIPTION>**Describe the bug** I want to perform updates to existing files by uploading the data to the already existing fid. The first upload works, but then all following updates will fail with an HTTP error: **System Setup** Running version 1.4.2 on Linux64 ./weed master -mdir=&quot;master01&quot; -defaultReplication=002 ./weed volume -port=8081 -mserver=&quot;localhost:9333&quot; -dir=&quot;volume01&quot; -max=100 ./weed volume -port=8082 -mserver=&quot;localhost:9333&quot; -dir=&quot;volume02&quot; -max=100 ./weed volume -port=8083 -mserver=&quot;localhost:9333&quot; -dir=&quot;volume03&quot; -max=100 **Expected behavior** I would expect that the file upload works like the first with this file. But maybe I'm wrong and the update of an existing file is not possible. An other way would be to assign a new file id for every update and to delete the old. **Sequence** _Client:_ curl -F file=myFile http://127.0.0.1:8083/3,02b3f5780c Response: `{&quot;size&quot;:8,&quot;error&quot;:&quot;failed to write to replicas for volume 3: [127.0.0.1:8081]: unexpected end of JSON input\n[127.0.0.1:8082]: unexpected end of JSON input&quot;,&quot;eTag&quot;:&quot;0ca153a6&quot;}` _Master:_ No related console output _volume01:_ `I0809 23:03:11 11674 common.go:73] error writing JSON {Name: Size:8 Error: ETag:0ca153a6} status 304: http: req` _volume02:_ `I0809 23:03:11 11704 common.go:73] error writing JSON {Name: Size:8 Error: ETag:0ca153a6} status 304: http: request method or response status code does not allow body` _volume03:_ ``` I0809 23:03:11 11688 upload_content.go:136] failing to read upload response http://127.0.0.1:8081/3,02b3f5780c?ts=1565384591&amp;ttl=&amp;type=replicate I0809 23:03:11 11688 upload_content.go:136] failing to read upload response http://127.0.0.1:8082/3,02b3f5780c?ts=1565384591&amp;ttl=&amp;type=replicate ``` Thank you!</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>filer: fix typo fix https://github.com/chrislusf/seaweedfs/issues/1031</MESSAGE>
    <SHA>b9f6236f8ac4931f29747b6dd1d952dd541887ad</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>skip writing content if not modified related to https://github.com/chrislusf/seaweedfs/issues/1036</MESSAGE>
      <SHA>0dc43ecdcaa72e74cc46f667127d0e36fc3d2883</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/common.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
