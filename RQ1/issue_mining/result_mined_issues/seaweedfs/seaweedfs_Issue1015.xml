<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1015</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/1015</ISSUEURL>
  <TITLE>delete or vacuum leads to data loss?</TITLE>
  <DESCRIPTION>**Describe the bug** i transfing image and lossy compression image to another filer one by one in the same volume 。I'm sure all image before transfer in the volume 2 are correct. volume 2 is old filer valume and no longer post image, last Inspection，volume 2 is 29GB, free space less than 10 GB, after error log volume 2 is 8.9GB。 only seaweedfs in the server, I'm not sure which node occupies all the disks then released disk and causes errors. **System Setup** version 30GB 1.41 linux amd64 volume `volume -max=45 -index=leveldb -mserver=&quot;master:9333&quot; -port=8080` old filer `filer -master=&quot;master:9333&quot; -collection &quot;image&quot;` new filer `filer -master=&quot;master:9333&quot; -collection &quot;img&quot;` **Screenshots** ``` I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 12:14:46 1 volume_read_write.go:226] visit needle error: cannot append needle: write /data/image_2.cpd: no space left on device I0717 14:10:55 1 volume_server_handlers_read.go:92] read /2,01273e96d6df53 isNormalVolume true error: not found I0717 14:11:05 1 volume_server_handlers_read.go:92] read /2,0172465fa26580 isNormalVolume true error: not found I0717 14:11:10 1 volume_server_handlers_read.go:92] read /2,0179b6e78fbfcf isNormalVolume true error: not found I0717 14:11:16 1 volume_server_handlers_read.go:92] read /2,0131fa097437d1 isNormalVolume true error: not found I0717 14:12:08 1 volume_server_handlers_read.go:92] read /2,011c073186daa1 isNormalVolume true error: not found I0717 14:12:08 1 volume_server_handlers_read.go:92] read /2,019f705fb54a37 isNormalVolume true error: not found I0717 14:12:12 1 volume_server_handlers_read.go:92] read /2,01120f96fbabdb isNormalVolume true error: not found I0717 14:12:13 1 volume_server_handlers_read.go:92] read /2,013242ee91232e isNormalVolume true error: not found I0717 14:12:40 1 volume_server_handlers_read.go:92] read /2,f63dbc874d94 isNormalVolume true error: not found I0717 14:13:16 1 volume_server_handlers_read.go:92] read /2,013af69a752e8a isNormalVolume true error: not found I0717 14:13:30 1 volume_server_handlers_read.go:92] read /2,0113d387393be6 isNormalVolume true error: not found I0717 14:13:40 1 volume_server_handlers_read.go:92] read /2,014aabddb480fb isNormalVolume true error: not found I0717 14:14:50 1 volume_server_handlers_read.go:92] read /2,014bcc428ad833 isNormalVolume true error: not found I0717 14:15:05 1 volume_server_handlers_read.go:92] read /2,ed6990252da4 isNormalVolume true error: EOF I0717 14:15:12 1 volume_server_handlers_read.go:92] read /2,ec43b0ba540a isNormalVolume true error: EOF I0717 14:15:12 1 volume_server_handlers_read.go:92] read /2,013e9808e11abb isNormalVolume true error: not found I0717 14:15:13 1 volume_server_handlers_read.go:92] read /2,010f5fcc1055e8 isNormalVolume true error: not found ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>skip all azuresb</MESSAGE>
    <SHA>aff911c00d2934cf0841856b0aff05f909ab93c8</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>stop early if compaction fails fix https://github.com/chrislusf/seaweedfs/issues/1015</MESSAGE>
      <SHA>c33f4239557f9031c3390a4bc38b7b4623c4941d</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/volume_read_write.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
