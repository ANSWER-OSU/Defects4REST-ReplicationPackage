<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1752</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/1752</ISSUEURL>
  <TITLE>mount: data inconsistencies between multiple hosts</TITLE>
  <DESCRIPTION>**Describe the bug** Mount SeaweedFS on two hosts. Modify the contents of the file on the first host. Data cannot be synchronized to the second host. But by changing the contents of the file on the second host, the data can be synchronized to the first host. ``` # 1. init seaweedfs root@192.168.1.1# weed server -filer=true root@192.168.1.2# weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t1 -dir=./t1 -filer.path=/ root@192.168.1.3# weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t2 -dir=./t2 -filer.path=/ # 2. init test data root@192.168.1.2# echo &quot;1&quot; &gt; ./t1/1 root@192.168.1.2# cat ./t1/1 1 root@192.168.1.3# cat ./t2/1 1 # 3. host2 =&gt; host3 root@192.168.1.2# echo &quot;2&quot; &gt;&gt; ./t1/1 root@192.168.1.2# cat ./t1/1 1 2 root@192.168.1.3# cat ./t2/1 1 # 4. host3 =&gt; host2 root@192.168.1.3# echo &quot;3&quot; &gt;&gt; ./t2/1 root@192.168.1.3# cat ./t2/1 1 3 root@192.168.1.2# cat ./t1/1 1 3 ``` **System Setup** - root@192.168.1.1# `weed server -filer=true` - root@192.168.1.2# `weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t1 -dir=./t1 -filer.path=/` - root@192.168.1.3# `weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t2 -dir=./t2 -filer.path=/` - linux amd64 - version 30GB 2.11 linux amd64 **Expected behavior** The data on the two hosts are consistent **Additional context** When the three commands are run on the same host, the data is consistent ``` root@192.168.1.1# weed server -filer=true root@192.168.1.1# weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t1 -dir=./t1 -filer.path=/ root@192.168.1.1# weed mount -filer=192.168.1.1:8888 -cacheDir=./cache/t2 -dir=./t2 -filer.path=/ ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>update help message see https://github.com/chrislusf/seaweedfs/issues/1758#issuecomment-768123224</MESSAGE>
    <SHA>f20ec82a286973a7e3658830637e2e1675729fc5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>mount: invalidate kernel cache when mounted to a filer path fix https://github.com/chrislusf/seaweedfs/issues/1752#issuecomment-768178422</MESSAGE>
      <SHA>b81956bcb573166a505d87c2f085e298639fe227</SHA>
      <PATCHEDFILES>
        <FILE>weed/filesys/meta_cache/meta_cache.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
