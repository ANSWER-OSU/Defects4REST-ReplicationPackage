<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>717</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/717</ISSUEURL>
  <TITLE>Invalid memory address or nil pointer dereference</TITLE>
  <DESCRIPTION>Hi, When starting SeaweedFS using pre-built binary (**v0.94 linux_386**) on _Ubuntu Xenial_, it ends with an `invalid memory address or nil pointer dereference` error. **Describe the bug** ``` $ weed server -dir=/data I0829 12:37:52 9413 file_util.go:20] Folder /data Permission: -rwxr-xr-x I0829 12:37:52 9413 file_util.go:20] Folder /data Permission: -rwxr-xr-x I0829 12:37:52 9413 master_server.go:68] Volume Size Limit is 30000 MB I0829 12:37:52 9413 server.go:186] Start Seaweed Master 0.94 at localhost:9333 I0829 12:37:52 9413 raft_server.go:47] Starting RaftServer with localhost:9333 I0829 12:37:52 9413 raft_server.go:51] Peers Change: [] =&gt; [] I0829 12:37:54 9413 raft_server.go:75] Initializing new cluster I0829 12:37:54 9413 raft_server.go:83] raft: Has been stopped panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0xc0f163] goroutine 25 [running]: github.com/chrislusf/seaweedfs/weed/server.(*MasterServer).SetRaftServer(0xc0001dab40, 0x0) /home/travis/gopath/src/github.com/chrislusf/seaweedfs/weed/server/master_server.go:95 +0x43 github.com/chrislusf/seaweedfs/weed/command.runServer.func2.1(0xc000192af0, 0xc000263dc0, 0xc0001dab40, 0xc000192b00) /home/travis/gopath/src/github.com/chrislusf/seaweedfs/weed/command/server.go:197 +0x10c created by github.com/chrislusf/seaweedfs/weed/command.runServer.func2 /home/travis/gopath/src/github.com/chrislusf/seaweedfs/weed/command/server.go:192 +0x407 ``` **System Setup** `$ weed server -dir=/data` **Expected behavior** Expecting `seaweed` to start properly **Additional context** ``` OS: Ubuntu 16.04.4 LTS Kernel: 4.4.0-1049-aws Architecture: x86_64 CPU op-mode(s): 32-bit, 64-bit Byte Order: Little Endian CPU(s): 2 On-line CPU(s) list: 0,1 Thread(s) per core: 1 Core(s) per socket: 2 Socket(s): 1 NUMA node(s): 1 Vendor ID: GenuineIntel CPU family: 6 Model: 63 Model name: Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz Stepping: 2 CPU MHz: 2400.038 BogoMIPS: 4800.07 Hypervisor vendor: Xen Virtualization type: full L1d cache: 32K L1i cache: 32K L2 cache: 256K L3 cache: 30720K NUMA node0 CPU(s): 0,1 ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>247</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>refactor: remove logger</MESSAGE>
    <SHA>5681208f2dd3c87c66becf077f09bd325030448c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>better error handling for nil raftServer addressing https://github.com/chrislusf/seaweedfs/issues/717</MESSAGE>
      <SHA>3fbe22b203841ea7b5cc13d9aecaa42efefcb8ed</SHA>
      <PATCHEDFILES>
        <FILE>weed/command/master.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
