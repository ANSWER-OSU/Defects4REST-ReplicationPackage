<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4559</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/4559</ISSUEURL>
  <TITLE>[data lost][shell] cmd `volume.deleteEmpty` occasionally deletes non-empty volume</TITLE>
  <DESCRIPTION>**Describe the bug** Occasionally some files are corrupted, if the `volume.deleteEmpty` maintenance command is executed when putting files to filer. **System Setup** - weed version: 3.51 - include `volume.deleteEmpty` command in `master.maintenance`, like [the default `master.maintenance`](https://github.com/seaweedfs/seaweedfs/blob/5ee04d20fac54daf3ceba7469adce824f30dc678/weed/command/scaffold/master.toml#L14) **Scene** - Put some files to filer when the maintenance script is about to be executed(which is unnoticed) - `volume.deleteEmpty` maintenance command is executed when putting files - Put finished - Some of these files are unreadable(`stream.go:97 operation LookupFileId 32,017966854c964a failed, err: urls not found` error in log), although in the filer's file list **Expected behavior** All the files newly put to the filer are readable. **Additional context** Real scene `weed.INFO` logs (see `volume 32`, `32,` and `volume.deleteEmpty`): ``` Log file created at: 2023/06/05 03:17:52 Running on machine: 720cf4b7c503 Binary: Built with gc go1.20.4 for linux/amd64 Log line format: [IWEF]mmdd hh:mm:ss threadid file:line] msg I0605 03:17:52.268844 master.go:269 current: 172.17.0.8:9333 peers: I0605 03:17:52.269008 file_util.go:23 Folder /data_master_meta Permission: -rwx------ I0605 03:17:52.269139 file_util.go:23 Folder /data Permission: -rwx------ I0605 03:17:52.269181 s3_backend.go:60 created backend storage s3.storage1 for region cn-east-1 bucket seaweedfs1storage1 I0605 03:17:52.269189 master.go:269 current: 172.17.0.8:9333 peers:172.17.0.8:9333 I0605 03:17:52.269304 master_server.go:127 Volume Size Limit is 1024 MB I0605 03:17:52.269443 master_server.go:265 adminScripts: lock volume.deleteEmpty -quietFor=24h -force volume.balance -force volume.fix.replication s3.clean.uploads -timeAgo=24h unlock I0605 03:17:52.269486 master.go:150 Start Seaweed Master 30GB 3.51 4310e1fac at 172.17.0.8:9333 I0605 03:17:52.269704 volume_grpc_client_to_master.go:43 checkWithMaster 172.17.0.8:9333: get master 172.17.0.8:9333 configuration: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.8:19333: connect: connection refused&quot; I0605 03:17:52.269723 raft_server.go:118 Starting RaftServer with 172.17.0.8:9333 I0605 03:17:52.273131 raft_server.go:167 current cluster leader: I0605 03:17:54.061095 volume_grpc_client_to_master.go:43 checkWithMaster 172.17.0.8:9333: get master 172.17.0.8:9333 configuration: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.8:19333: connect: connection refused&quot; skip... I0605 07:22:22.313206 master_server.go:323 executing: lock [] I0605 07:22:22.313584 master_server.go:323 executing: volume.deleteEmpty [-quietFor=24h -force] I0605 07:22:22.313852 master_server.go:323 executing: volume.balance [-force] I0605 07:22:37.314914 master_server.go:323 executing: volume.fix.replication [] I0605 07:22:52.315764 master_server.go:323 executing: s3.clean.uploads [-timeAgo=24h] I0605 07:22:52.316443 master_server.go:323 executing: unlock [] I0605 07:39:18.051688 store.go:166 In dir /data adds volume:31 collection:juicefs4 replicaPlacement:000 ttl: I0605 07:39:18.051787 volume_loading.go:142 loading memory index /data_volume_index/juicefs4_31.idx to memory I0605 07:39:18.055494 store.go:170 add volume 31 I0605 07:39:18.055517 volume_grpc_client_to_master.go:179 volume server 172.17.0.8:8080 adds volume 31 I0605 07:39:18.055553 volume_growth.go:244 Created Volume 31 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:18.055567 volume_layout.go:393 Volume 31 becomes writable I0605 07:39:18.055576 volume_growth.go:257 Registered Volume 31 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:24.019433 volume_layout.go:380 Volume 30 becomes unwritable I0605 07:39:24.019442 volume_layout.go:472 Volume 30 reaches full capacity. I0605 07:39:51.358467 store.go:166 In dir /data adds volume:32 collection:juicefs4 replicaPlacement:000 ttl: I0605 07:39:51.358584 volume_loading.go:142 loading memory index /data_volume_index/juicefs4_32.idx to memory I0605 07:39:51.369318 store.go:170 add volume 32 I0605 07:39:51.369359 volume_grpc_client_to_master.go:179 volume server 172.17.0.8:8080 adds volume 32 I0605 07:39:51.369392 volume_growth.go:244 Created Volume 32 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:51.369409 volume_layout.go:393 Volume 32 becomes writable I0605 07:39:51.369420 volume_growth.go:257 Registered Volume 32 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:52.316741 master_server.go:323 executing: lock [] I0605 07:39:52.317054 master_server.go:323 executing: volume.deleteEmpty [-quietFor=24h -force] I0605 07:39:52.338801 store.go:526 DeleteVolume 32 I0605 07:39:52.338852 volume_grpc_client_to_master.go:210 volume server 172.17.0.8:8080 deletes volume 32 I0605 07:39:52.338949 master_server.go:323 executing: volume.balance [-force] I0605 07:39:52.338976 topology.go:258 removing volume info: Id:32, Size:0, ReplicaPlacement:000, Collection:juicefs4, Version:3, FileCount:0, DeleteCount:0, DeletedByteCount:0, ReadOnly:false from 172.17.0.8:8080 I0605 07:39:52.338994 volume_layout.go:223 volume 32 does not have enough copies I0605 07:39:52.338996 volume_layout.go:228 volume 32 remove from writable I0605 07:39:52.338998 volume_layout.go:380 Volume 32 becomes unwritable I0605 07:39:52.369975 store.go:166 In dir /data adds volume:33 collection:juicefs4 replicaPlacement:000 ttl: I0605 07:39:52.370081 volume_loading.go:142 loading memory index /data_volume_index/juicefs4_33.idx to memory I0605 07:39:52.373846 store.go:170 add volume 33 I0605 07:39:52.373864 volume_grpc_client_to_master.go:179 volume server 172.17.0.8:8080 adds volume 33 I0605 07:39:52.373908 volume_growth.go:244 Created Volume 33 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:52.373919 volume_layout.go:393 Volume 33 becomes writable I0605 07:39:52.373923 volume_growth.go:257 Registered Volume 33 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:39:56.650085 volume_layout.go:380 Volume 31 becomes unwritable I0605 07:39:56.650097 volume_layout.go:472 Volume 31 reaches full capacity. I0605 07:40:07.339434 master_server.go:323 executing: volume.fix.replication [] I0605 07:40:22.340328 master_server.go:323 executing: s3.clean.uploads [-timeAgo=24h] I0605 07:40:22.340933 master_server.go:323 executing: unlock [] I0605 07:40:26.247358 volume_layout.go:484 Volume 33 becomes crowded I0605 07:40:26.360142 store.go:166 In dir /data adds volume:34 collection:juicefs4 replicaPlacement:000 ttl: I0605 07:40:26.360245 volume_loading.go:142 loading memory index /data_volume_index/juicefs4_34.idx to memory I0605 07:40:26.366895 store.go:170 add volume 34 I0605 07:40:26.366924 volume_grpc_client_to_master.go:179 volume server 172.17.0.8:8080 adds volume 34 I0605 07:40:26.366957 volume_growth.go:244 Created Volume 34 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:40:26.366972 volume_layout.go:393 Volume 34 becomes writable I0605 07:40:26.366977 volume_growth.go:257 Registered Volume 34 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:40:33.908426 volume_layout.go:380 Volume 33 becomes unwritable I0605 07:40:33.908437 volume_layout.go:472 Volume 33 reaches full capacity. I0605 07:41:06.249505 store.go:166 In dir /data adds volume:35 collection:juicefs4 replicaPlacement:000 ttl: I0605 07:41:06.249648 volume_loading.go:142 loading memory index /data_volume_index/juicefs4_35.idx to memory I0605 07:41:06.260440 store.go:170 add volume 35 I0605 07:41:06.260471 volume_grpc_client_to_master.go:179 volume server 172.17.0.8:8080 adds volume 35 I0605 07:41:06.260544 volume_growth.go:244 Created Volume 35 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:41:06.260562 volume_layout.go:393 Volume 35 becomes writable I0605 07:41:06.260570 volume_growth.go:257 Registered Volume 35 on topo:dc1:rack1:172.17.0.8:8080 I0605 07:41:13.770598 volume_layout.go:380 Volume 34 becomes unwritable I0605 07:41:13.770616 volume_layout.go:472 Volume 34 reaches full capacity. E0605 07:42:14.301994 stream.go:97 operation LookupFileId 32,017965c5ce6d4e failed, err: urls not found E0605 07:42:14.302183 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs4/juicefs4/chunks/0/1/1035_11_4194304: operation LookupFileId 32,017965c5ce6d4e failed, err: urls not found E0605 07:42:14.302199 common.go:297 processRangeRequest: operation LookupFileId 32,017965c5ce6d4e failed, err: urls not found E0605 07:42:15.513498 stream.go:97 operation LookupFileId 32,017966854c964a failed, err: urls not found E0605 07:42:15.513521 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs4/juicefs4/chunks/0/1/1036_2_4194304: operation LookupFileId 32,017966854c964a failed, err: urls not found E0605 07:42:15.513531 common.go:297 processRangeRequest: operation LookupFileId 32,017966854c964a failed, err: urls not found E0605 07:42:15.513501 stream.go:97 operation LookupFileId 32,0179643b8a24c7 failed, err: urls not found E0605 07:42:15.513588 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs4/juicefs4/chunks/0/1/1036_1_4194304: operation LookupFileId 32,0179643b8a24c7 failed, err: urls not found E0605 07:42:15.513595 common.go:297 processRangeRequest: operation LookupFileId 32,0179643b8a24c7 failed, err: urls not found skip... I0605 08:22:38.321250 common.go:75 response method:GET URL:/dir/lookup?fileId=32,0179643b8a24c7 with httpStatus:404 and JSON:{&quot;volumeOrFileId&quot;:&quot;32&quot;,&quot;error&quot;:&quot;volume id 32 not found&quot;} I0605 08:23:49.336870 common.go:75 response method:GET URL:/dir/lookup?fileId=32,0179643b8a24c7&amp;collection=juicefs4 with httpStatus:404 and JSON:{&quot;volumeOrFileId&quot;:&quot;32&quot;,&quot;error&quot;:&quot;volume id 32 not found&quot;} ``` Test for this issue scene `weed.INFO` logs (see `volume 59`, `2778_4_4194304` and `volume.deleteEmpty`): ``` Log file created at: 2023/06/10 01:46:10 Running on machine: 25901906dec2 Binary: Built with gc go1.20.4 for linux/amd64 Log line format: [IWEF]mmdd hh:mm:ss threadid file:line] msg I0610 01:46:10.113090 config.go:46 Reading : Config File &quot;security&quot; Not Found in &quot;[/data /root/.seaweedfs /usr/local/etc/seaweedfs /etc/seaweedfs]&quot; I0610 01:46:10.113421 config.go:59 Reading master.toml from /etc/seaweedfs/master.toml I0610 01:46:10.113431 master.go:269 current: 172.17.0.16:9333 peers: I0610 01:46:10.113446 file_util.go:23 Folder /data_master_meta Permission: -rwx------ I0610 01:46:10.113558 file_util.go:23 Folder /data Permission: -rwx------ I0610 01:46:10.113654 s3_backend.go:60 created backend storage s3.storage1 for region cn-east-1 bucket seaweedfs1storage1 I0610 01:46:10.113663 master.go:269 current: 172.17.0.16:9333 peers:172.17.0.16:9333 I0610 01:46:10.113718 master_server.go:335 [master.sequencer.type] : [] I0610 01:46:10.113730 master_server.go:127 Volume Size Limit is 128 MB I0610 01:46:10.113882 master_server.go:265 adminScripts: lock volume.vacuum -garbageThreshold=0.000001 -collection=juicefs5 volume.deleteEmpty -quietFor=1s -force volume.balance -force volume.fix.replication s3.clean.uploads -timeAgo=24h unlock I0610 01:46:10.113917 master.go:150 Start Seaweed Master 30GB 3.51 4310e1fac at 172.17.0.16:9333 I0610 01:46:10.113941 masterclient.go:127 .adminShell masterClient bootstraps with masters map[172.17.0.16:9333:172.17.0.16:9333] I0610 01:46:10.113956 masterclient.go:172 .adminShell masterClient Connecting to master 172.17.0.16:9333 I0610 01:46:10.114055 volume_grpc_client_to_master.go:43 checkWithMaster 172.17.0.16:9333: get master 172.17.0.16:9333 configuration: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; I0610 01:46:10.114147 masterclient.go:180 .adminShell masterClient failed to keep connected to 172.17.0.16:9333: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; I0610 01:46:10.114167 masterclient.go:260 .adminShell masterClient failed to connect with master 172.17.0.16:9333: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; I0610 01:46:10.114190 raft_server.go:118 Starting RaftServer with 172.17.0.16:9333 I0610 01:46:10.126603 raft_server.go:167 current cluster leader: I0610 01:46:11.114567 masterclient.go:172 .adminShell masterClient Connecting to master 172.17.0.16:9333 I0610 01:46:11.115288 masterclient.go:180 .adminShell masterClient failed to keep connected to 172.17.0.16:9333: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; I0610 01:46:11.115325 masterclient.go:260 .adminShell masterClient failed to connect with master 172.17.0.16:9333: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; I0610 01:46:11.904728 volume_grpc_client_to_master.go:43 checkWithMaster 172.17.0.16:9333: get master 172.17.0.16:9333 configuration: rpc error: code = Unavailable desc = connection error: desc = &quot;transport: Error while dialing: dial tcp 172.17.0.16:19333: connect: connection refused&quot; skip... I0610 02:02:10.255037 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_2_4194304 I0610 02:02:10.255163 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.297570 volume_grpc_client_to_master.go:232 volume server 172.17.0.16:8080 heartbeat I0610 02:02:10.297610 store.go:589 disk /data max 11943 unclaimedSpace:1528003MB, unused:17592186043623MB volumeSizeLimit:128MB I0610 02:02:10.297618 volume.go:273 collectStatus volume 53 I0610 02:02:10.297623 volume.go:273 collectStatus volume 56 I0610 02:02:10.297626 volume.go:273 collectStatus volume 57 I0610 02:02:10.297628 volume.go:273 collectStatus volume 55 I0610 02:02:10.297630 volume.go:273 collectStatus volume 2 I0610 02:02:10.297632 volume.go:273 collectStatus volume 58 I0610 02:02:10.297634 volume.go:273 collectStatus volume 54 I0610 02:02:10.297798 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 public_url:&quot;seaweedfs-lab5-volume1.xxx.io&quot; max_file_key:8820 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; volumes:{id:53 size:351311008 collection:&quot;juicefs5&quot; file_count:98 version:3 modified_at_second:1686362507} volumes:{id:56 size:364910720 collection:&quot;juicefs5&quot; file_count:87 version:3 modified_at_second:1686362527} volumes:{id:57 size:213913184 collection:&quot;juicefs5&quot; file_count:51 version:3 modified_at_second:1686362526} volumes:{id:55 size:356523472 collection:&quot;juicefs5&quot; file_count:86 version:3 modified_at_second:1686362516} volumes:{id:2 size:4789384 file_count:28 version:3 modified_at_second:1686362291} volumes:{id:58 size:297800704 collection:&quot;juicefs5&quot; file_count:71 version:3 modified_at_second:1686362530} volumes:{id:54 size:181406824 collection:&quot;juicefs5&quot; file_count:44 version:3 modified_at_second:1686362507} max_volume_counts:{key:&quot;&quot; value:11943} grpc_port:18080 location_uuids:&quot;5d846bf0-9b0c-4178-9301-ec200e3c84b1&quot; I0610 02:02:10.300708 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.300888 master_grpc_server_volume.go:54 starting automatic volume grow I0610 02:02:10.300980 cluster_commands.go:32 max volume id 58 ==&gt; 59 I0610 02:02:10.301138 store.go:166 In dir /data adds volume:59 collection:juicefs5 replicaPlacement:000 ttl: I0610 02:02:10.301160 volume_info.go:21 maybeLoadVolumeInfo checks /data/juicefs5_59.vif I0610 02:02:10.301265 volume_loading.go:121 open to write file /data_volume_index/juicefs5_59.idx I0610 02:02:10.301297 volume_loading.go:142 loading memory index /data_volume_index/juicefs5_59.idx to memory I0610 02:02:10.301311 needle_map_memory.go:54 max file key: 0 for file: /data_volume_index/juicefs5_59.idx I0610 02:02:10.311008 filer_server_handlers_write_upload.go:123 uploaded 2778_2_4194304 chunk 1 to 58,2275ad7334fb [0,4194304) I0610 02:02:10.311039 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_2_4194304 I0610 02:02:10.311053 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.311076 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_2_4194304: new entry: 2778_2_4194304 I0610 02:02:10.311126 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_2_4194304: created I0610 02:02:10.311222 error_handler.go:96 status 200 : I0610 02:02:10.313978 store.go:170 add volume 59 I0610 02:02:10.313991 volume_grpc_admin.go:60 assign volume volume_id:59 collection:&quot;juicefs5&quot; replication:&quot;000&quot; I0610 02:02:10.314030 volume_grpc_client_to_master.go:179 volume server 172.17.0.16:8080 adds volume 59 I0610 02:02:10.314113 volume_growth.go:244 Created Volume 59 on topo:dc1:rack1:172.17.0.16:8080 I0610 02:02:10.314132 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; new_volumes:{id:59 collection:&quot;juicefs5&quot; version:3} I0610 02:02:10.314132 volume_layout.go:393 Volume 59 becomes writable I0610 02:02:10.314141 volume_growth.go:257 Registered Volume 59 on topo:dc1:rack1:172.17.0.16:8080 I0610 02:02:10.314148 master_grpc_server_volume.go:57 finished automatic volume grow, cost 13.253062ms I0610 02:02:10.314212 masterclient.go:278 .master: 172.17.0.16:8080 masterClient adds volume 59 I0610 02:02:10.314224 vid_map.go:160 + volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:10.314235 masterclient.go:293 updateVidMap(dc1) .master: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:10.314245 masterclient.go:278 .master: 172.17.0.16:8080 masterClient adds volume 59 I0610 02:02:10.314245 masterclient.go:278 .filer: 172.17.0.16:8080 masterClient adds volume 59 I0610 02:02:10.314252 vid_map.go:160 + volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:10.314254 vid_map.go:160 + volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:10.314259 masterclient.go:293 updateVidMap(dc1) .master: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:10.314261 masterclient.go:293 updateVidMap(dc1) .filer: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:10.314271 masterclient.go:278 .filer: 172.17.0.16:8080 masterClient adds volume 59 I0610 02:02:10.314278 vid_map.go:160 + volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:10.314284 masterclient.go:293 updateVidMap(dc1) .filer: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:10.335126 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_3_4194304 I0610 02:02:10.335226 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.381414 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.391830 filer_server_handlers_write_upload.go:123 uploaded 2778_3_4194304 chunk 1 to 58,2276f615a530 [0,4194304) I0610 02:02:10.391859 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_3_4194304 I0610 02:02:10.391880 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.391910 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_3_4194304: new entry: 2778_3_4194304 I0610 02:02:10.391972 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_3_4194304: created I0610 02:02:10.392068 error_handler.go:96 status 200 : I0610 02:02:10.415360 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_4_4194304 I0610 02:02:10.415484 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.461860 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.473749 filer_server_handlers_write_upload.go:123 uploaded 2778_4_4194304 chunk 1 to 59,2277719b1e43 [0,4194304) I0610 02:02:10.473777 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304 I0610 02:02:10.473790 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.473819 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304: new entry: 2778_4_4194304 I0610 02:02:10.473867 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304: created I0610 02:02:10.473958 error_handler.go:96 status 200 : I0610 02:02:10.494892 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_5_4194304 I0610 02:02:10.494996 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.541004 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.551757 filer_server_handlers_write_upload.go:123 uploaded 2778_5_4194304 chunk 1 to 59,2278b138056e [0,4194304) I0610 02:02:10.551796 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304 I0610 02:02:10.551817 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.551854 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304: new entry: 2778_5_4194304 I0610 02:02:10.551932 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304: created I0610 02:02:10.552023 error_handler.go:96 status 200 : I0610 02:02:10.575416 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_6_4194304 I0610 02:02:10.575546 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.621928 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.632082 filer_server_handlers_write_upload.go:123 uploaded 2778_6_4194304 chunk 1 to 58,227905727806 [0,4194304) I0610 02:02:10.632105 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_6_4194304 I0610 02:02:10.632119 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.632140 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_6_4194304: new entry: 2778_6_4194304 I0610 02:02:10.632199 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_6_4194304: created I0610 02:02:10.632288 error_handler.go:96 status 200 : I0610 02:02:10.654974 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_7_4194304 I0610 02:02:10.655092 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.703499 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.715016 filer_server_handlers_write_upload.go:123 uploaded 2778_7_4194304 chunk 1 to 59,227af658f241 [0,4194304) I0610 02:02:10.715054 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304 I0610 02:02:10.715068 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.715096 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304: new entry: 2778_7_4194304 I0610 02:02:10.715160 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304: created I0610 02:02:10.715279 error_handler.go:96 status 200 : I0610 02:02:10.735581 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_8_4194304 I0610 02:02:10.735706 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.782947 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.793441 filer_server_handlers_write_upload.go:123 uploaded 2778_8_4194304 chunk 1 to 58,227b66ca4947 [0,4194304) I0610 02:02:10.793471 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_8_4194304 I0610 02:02:10.793491 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.793509 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_8_4194304: new entry: 2778_8_4194304 I0610 02:02:10.793557 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_8_4194304: created I0610 02:02:10.793667 error_handler.go:96 status 200 : I0610 02:02:10.815333 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_9_4194304 I0610 02:02:10.815451 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.863066 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.873599 filer_server_handlers_write_upload.go:123 uploaded 2778_9_4194304 chunk 1 to 58,227cac005e0c [0,4194304) I0610 02:02:10.873626 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_9_4194304 I0610 02:02:10.873640 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.873662 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_9_4194304: new entry: 2778_9_4194304 I0610 02:02:10.873713 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_9_4194304: created I0610 02:02:10.873799 error_handler.go:96 status 200 : I0610 02:02:10.895645 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_10_4194304 I0610 02:02:10.895767 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:10.941907 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:10.952838 filer_server_handlers_write_upload.go:123 uploaded 2778_10_4194304 chunk 1 to 59,227d582687c5 [0,4194304) I0610 02:02:10.952869 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304 I0610 02:02:10.952886 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:10.952908 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304: new entry: 2778_10_4194304 I0610 02:02:10.952970 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304: created I0610 02:02:10.953062 error_handler.go:96 status 200 : I0610 02:02:10.957717 webdav_server.go:382 WebDavFileSystem.Stat / I0610 02:02:10.957867 filer_grpc_server.go:22 LookupDirectoryEntry / I0610 02:02:10.957981 webdav_server.go:209 WebDavFileSystem.OpenFile / 0 I0610 02:02:10.958065 filer_grpc_server.go:22 LookupDirectoryEntry / I0610 02:02:10.958126 webdav_server.go:615 WebDavFile.Stat / I0610 02:02:10.958203 filer_grpc_server.go:22 LookupDirectoryEntry / I0610 02:02:10.958263 webdav_server.go:498 WebDavFileSystem.Close / I0610 02:02:10.958272 webdav_server.go:209 WebDavFileSystem.OpenFile / 0 I0610 02:02:10.958334 filer_grpc_server.go:22 LookupDirectoryEntry / I0610 02:02:10.958389 webdav_server.go:615 WebDavFile.Stat / I0610 02:02:10.958454 filer_grpc_server.go:22 LookupDirectoryEntry / I0610 02:02:10.958499 webdav_server.go:498 WebDavFileSystem.Close / I0610 02:02:10.975310 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_11_4194304 I0610 02:02:10.975440 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.022860 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.034451 filer_server_handlers_write_upload.go:123 uploaded 2778_11_4194304 chunk 1 to 58,227e9f9e0643 [0,4194304) I0610 02:02:11.034486 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_11_4194304 I0610 02:02:11.034501 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.034537 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_11_4194304: new entry: 2778_11_4194304 I0610 02:02:11.034593 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_11_4194304: created I0610 02:02:11.034691 error_handler.go:96 status 200 : I0610 02:02:11.055623 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_12_4194304 I0610 02:02:11.055742 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.102900 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.113771 filer_server_handlers_write_upload.go:123 uploaded 2778_12_4194304 chunk 1 to 58,227f4768efcb [0,4194304) I0610 02:02:11.113800 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_12_4194304 I0610 02:02:11.113815 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.113836 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_12_4194304: new entry: 2778_12_4194304 I0610 02:02:11.113881 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_12_4194304: created I0610 02:02:11.113986 error_handler.go:96 status 200 : I0610 02:02:11.126210 filer.go:236 find uncached directory: /topics/.system/log/2023-06-10 I0610 02:02:11.126225 filer.go:200 InsertEntry /topics/.system/log/2023-06-10/02-01.67ac9a39: new entry: 02-01.67ac9a39 I0610 02:02:11.126252 filer.go:221 CreateEntry /topics/.system/log/2023-06-10/02-01.67ac9a39: created I0610 02:02:11.136760 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_13_4194304 I0610 02:02:11.136863 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.185153 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.195553 filer_server_handlers_write_upload.go:123 uploaded 2778_13_4194304 chunk 1 to 59,22819cb0460c [0,4194304) I0610 02:02:11.195580 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_13_4194304 I0610 02:02:11.195596 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.195617 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_13_4194304: new entry: 2778_13_4194304 I0610 02:02:11.195680 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_13_4194304: created I0610 02:02:11.195778 error_handler.go:96 status 200 : I0610 02:02:11.215147 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_14_4194304 I0610 02:02:11.215269 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.262501 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.273419 filer_server_handlers_write_upload.go:123 uploaded 2778_14_4194304 chunk 1 to 58,22827cca16dd [0,4194304) I0610 02:02:11.273448 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_14_4194304 I0610 02:02:11.273466 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.273496 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_14_4194304: new entry: 2778_14_4194304 I0610 02:02:11.273565 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_14_4194304: created I0610 02:02:11.273645 error_handler.go:96 status 200 : I0610 02:02:11.295644 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_15_4194304 I0610 02:02:11.295774 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.336342 master_server.go:323 executing: lock [] I0610 02:02:11.336629 master_server.go:323 executing: volume.vacuum [-garbageThreshold=0.000001 -collection=juicefs5] I0610 02:02:11.336751 master_grpc_server_admin.go:93 isLocked 172.17.0.16: I0610 02:02:11.336760 master_grpc_server_admin.go:135 LeaseAdminToken 172.17.0.16 I0610 02:02:11.336775 topology_vacuum.go:225 Start vacuum on demand with threshold: 0.000001 collection: juicefs5 volumeId: 0 I0610 02:02:11.336792 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:58 I0610 02:02:11.336899 store_vacuum.go:13 volume 58 garbage level: 0.000000 I0610 02:02:11.336951 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:59 I0610 02:02:11.337021 store_vacuum.go:13 volume 59 garbage level: 0.000000 I0610 02:02:11.337074 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:53 I0610 02:02:11.337148 store_vacuum.go:13 volume 53 garbage level: 0.000000 I0610 02:02:11.337199 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:54 I0610 02:02:11.337277 store_vacuum.go:13 volume 54 garbage level: 0.000000 I0610 02:02:11.337343 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:55 I0610 02:02:11.337420 store_vacuum.go:13 volume 55 garbage level: 0.000000 I0610 02:02:11.337484 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:56 I0610 02:02:11.337550 store_vacuum.go:13 volume 56 garbage level: 0.000000 I0610 02:02:11.337604 topology_vacuum.go:275 check vacuum on collection:juicefs5 volume:57 I0610 02:02:11.337693 store_vacuum.go:13 volume 57 garbage level: 0.000000 I0610 02:02:11.337796 master_server.go:323 executing: volume.deleteEmpty [-quietFor=1s -force] I0610 02:02:11.346417 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.369826 store.go:526 DeleteVolume 59 I0610 02:02:11.369855 volume_grpc_client_to_master.go:210 volume server 172.17.0.16:8080 deletes volume 59 I0610 02:02:11.369841 volume_grpc_admin.go:108 volume delete volume_id:59 I0610 02:02:11.370036 master_server.go:323 executing: volume.balance [-force] I0610 02:02:11.370051 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; deleted_volumes:{id:59 collection:&quot;juicefs5&quot; version:3} I0610 02:02:11.370072 topology.go:258 removing volume info: Id:59, Size:0, ReplicaPlacement:000, Collection:juicefs5, Version:3, FileCount:0, DeleteCount:0, DeletedByteCount:0, ReadOnly:false from 172.17.0.16:8080 I0610 02:02:11.370092 volume_layout.go:223 volume 59 does not have enough copies I0610 02:02:11.370101 volume_layout.go:228 volume 59 remove from writable I0610 02:02:11.370106 volume_layout.go:380 Volume 59 becomes unwritable I0610 02:02:11.370193 masterclient.go:282 .master: 172.17.0.16:8080 masterClient removes volume 59 I0610 02:02:11.370204 vid_map.go:208 - volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.370211 vid_map.go:208 - volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.370219 masterclient.go:293 updateVidMap(dc1) .master: 172.17.0.16:8080 volume add: 0, del: 1, add ec: 0 del ec: 0 I0610 02:02:11.370194 masterclient.go:282 .filer: 172.17.0.16:8080 masterClient removes volume 59 I0610 02:02:11.370228 vid_map.go:208 - volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.370234 vid_map.go:208 - volume id 59: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.370240 masterclient.go:293 updateVidMap(dc1) .filer: 172.17.0.16:8080 volume add: 0, del: 1, add ec: 0 del ec: 0 I0610 02:02:11.372032 filer_server_handlers_write_upload.go:123 uploaded 2778_15_4194304 chunk 1 to 58,22833375ffc4 [0,4194304) I0610 02:02:11.372061 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2778_15_4194304 I0610 02:02:11.372078 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.372098 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_15_4194304: new entry: 2778_15_4194304 I0610 02:02:11.372155 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2778_15_4194304: created I0610 02:02:11.372236 error_handler.go:96 status 200 : I0610 02:02:11.378169 s3api_object_handlers.go:50 PutObjectHandler juicefs5 /juicefs5/chunks/0/2/2779_0_4194304 I0610 02:02:11.378280 filer_server_handlers_write_upload.go:68 received byte buffer 1 I0610 02:02:11.424544 filer_server_handlers_write_upload.go:68 received byte buffer 2 I0610 02:02:11.424721 master_grpc_server_volume.go:54 starting automatic volume grow I0610 02:02:11.424792 cluster_commands.go:32 max volume id 59 ==&gt; 60 I0610 02:02:11.424906 store.go:166 In dir /data adds volume:60 collection:juicefs5 replicaPlacement:000 ttl: I0610 02:02:11.424927 volume_info.go:21 maybeLoadVolumeInfo checks /data/juicefs5_60.vif I0610 02:02:11.425000 volume_loading.go:121 open to write file /data_volume_index/juicefs5_60.idx I0610 02:02:11.425026 volume_loading.go:142 loading memory index /data_volume_index/juicefs5_60.idx to memory I0610 02:02:11.425047 needle_map_memory.go:54 max file key: 0 for file: /data_volume_index/juicefs5_60.idx I0610 02:02:11.428584 store.go:170 add volume 60 I0610 02:02:11.428594 volume_grpc_admin.go:60 assign volume volume_id:60 collection:&quot;juicefs5&quot; replication:&quot;000&quot; I0610 02:02:11.428629 volume_grpc_client_to_master.go:179 volume server 172.17.0.16:8080 adds volume 60 I0610 02:02:11.428697 volume_growth.go:244 Created Volume 60 on topo:dc1:rack1:172.17.0.16:8080 I0610 02:02:11.428712 volume_layout.go:393 Volume 60 becomes writable I0610 02:02:11.428719 volume_growth.go:257 Registered Volume 60 on topo:dc1:rack1:172.17.0.16:8080 I0610 02:02:11.428719 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; new_volumes:{id:60 collection:&quot;juicefs5&quot; version:3} I0610 02:02:11.428723 master_grpc_server_volume.go:57 finished automatic volume grow, cost 3.995524ms I0610 02:02:11.428816 masterclient.go:278 .filer: 172.17.0.16:8080 masterClient adds volume 60 I0610 02:02:11.428819 masterclient.go:278 .master: 172.17.0.16:8080 masterClient adds volume 60 I0610 02:02:11.428825 vid_map.go:160 + volume id 60: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.428827 vid_map.go:160 + volume id 60: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.428835 masterclient.go:293 updateVidMap(dc1) .filer: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:11.428838 masterclient.go:293 updateVidMap(dc1) .master: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:11.428843 masterclient.go:278 .filer: 172.17.0.16:8080 masterClient adds volume 60 I0610 02:02:11.428846 vid_map.go:160 + volume id 60: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.428849 masterclient.go:278 .master: 172.17.0.16:8080 masterClient adds volume 60 I0610 02:02:11.428853 vid_map.go:160 + volume id 60: {Url:172.17.0.16:8080 PublicUrl:seaweedfs-lab5-volume1.xxx.io DataCenter:dc1 GrpcPort:0} I0610 02:02:11.428853 masterclient.go:293 updateVidMap(dc1) .filer: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:11.428857 masterclient.go:293 updateVidMap(dc1) .master: 172.17.0.16:8080 volume add: 1, del: 0, add ec: 0 del ec: 0 I0610 02:02:11.434899 filer_server_handlers_write_upload.go:123 uploaded 2779_0_4194304 chunk 1 to 58,22843c35dc98 [0,4194304) I0610 02:02:11.434929 filer_server_handlers_write_autochunk.go:202 saving /buckets/juicefs5/juicefs5/chunks/0/2/2779_0_4194304 I0610 02:02:11.434949 filer.go:236 find uncached directory: /buckets/juicefs5/juicefs5/chunks/0/2 I0610 02:02:11.434981 filer.go:200 InsertEntry /buckets/juicefs5/juicefs5/chunks/0/2/2779_0_4194304: new entry: 2779_0_4194304 I0610 02:02:11.435052 filer.go:221 CreateEntry /buckets/juicefs5/juicefs5/chunks/0/2/2779_0_4194304: created I0610 02:02:11.435134 error_handler.go:96 status 200 : skip... I0610 02:02:41.371853 master_server.go:323 executing: s3.clean.uploads [-timeAgo=24h] I0610 02:02:41.371993 filer_grpc_server_admin.go:104 GetFilerConfiguration: masters:&quot;172.17.0.16:9333&quot; max_mb:4 dir_buckets:&quot;/buckets&quot; cipher:true signature:-1177174368 metrics_interval_sec:15 version:&quot;30GB 3.51 4310e1fac&quot; I0610 02:02:41.372100 filer_client.go:120 read directory: directory:&quot;/buckets&quot; limit:2147483647 I0610 02:02:41.372218 filer_grpc_server.go:40 ListEntries directory:&quot;/buckets&quot; limit:2147483647 I0610 02:02:41.372354 filer_client.go:120 read directory: directory:&quot;/buckets/juicefs5/.uploads&quot; limit:2147483647 I0610 02:02:41.372439 filer_grpc_server.go:40 ListEntries directory:&quot;/buckets/juicefs5/.uploads&quot; limit:2147483647 I0610 02:02:41.372538 master_server.go:323 executing: unlock [] I0610 02:02:42.340022 volume_layout.go:380 Volume 64 becomes unwritable I0610 02:02:42.340040 volume_layout.go:472 Volume 64 reaches full capacity. I0610 02:02:45.298013 volume_grpc_client_to_master.go:232 volume server 172.17.0.16:8080 heartbeat I0610 02:02:45.298074 store.go:589 disk /data max 11943 unclaimedSpace:1527235MB, unused:17592186042872MB volumeSizeLimit:128MB I0610 02:02:45.298085 volume.go:273 collectStatus volume 56 I0610 02:02:45.298092 volume.go:273 collectStatus volume 60 I0610 02:02:45.298096 volume.go:273 collectStatus volume 57 I0610 02:02:45.298099 volume.go:273 collectStatus volume 61 I0610 02:02:45.298103 volume.go:273 collectStatus volume 62 I0610 02:02:45.298109 volume.go:273 collectStatus volume 63 I0610 02:02:45.298112 volume.go:273 collectStatus volume 64 I0610 02:02:45.298114 volume.go:273 collectStatus volume 54 I0610 02:02:45.298117 volume.go:273 collectStatus volume 55 I0610 02:02:45.298121 volume.go:273 collectStatus volume 2 I0610 02:02:45.298124 volume.go:273 collectStatus volume 58 I0610 02:02:45.298127 volume.go:273 collectStatus volume 65 I0610 02:02:45.298130 volume.go:273 collectStatus volume 53 I0610 02:02:45.298369 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 public_url:&quot;seaweedfs-lab5-volume1.xxx.io&quot; max_file_key:9206 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; volumes:{id:56 size:364910720 collection:&quot;juicefs5&quot; file_count:87 version:3 modified_at_second:1686362527} volumes:{id:60 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362538} volumes:{id:57 size:213913184 collection:&quot;juicefs5&quot; file_count:51 version:3 modified_at_second:1686362526} volumes:{id:61 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362547} volumes:{id:62 size:209718808 collection:&quot;juicefs5&quot; file_count:50 version:3 modified_at_second:1686362547} volumes:{id:63 size:327161336 collection:&quot;juicefs5&quot; file_count:78 version:3 modified_at_second:1686362555} volumes:{id:64 size:397417152 collection:&quot;juicefs5&quot; file_count:95 version:3 modified_at_second:1686362560} volumes:{id:54 size:181406824 collection:&quot;juicefs5&quot; file_count:44 version:3 modified_at_second:1686362507} volumes:{id:55 size:356523472 collection:&quot;juicefs5&quot; file_count:86 version:3 modified_at_second:1686362516} volumes:{id:2 size:4929760 file_count:29 version:3 modified_at_second:1686362531} volumes:{id:58 size:356521968 collection:&quot;juicefs5&quot; file_count:85 version:3 modified_at_second:1686362532} volumes:{id:65 size:12583136 collection:&quot;juicefs5&quot; file_count:3 version:3 modified_at_second:1686362560} volumes:{id:53 size:351311008 collection:&quot;juicefs5&quot; file_count:98 version:3 modified_at_second:1686362507} max_volume_counts:{key:&quot;&quot; value:11943} grpc_port:18080 location_uuids:&quot;5d846bf0-9b0c-4178-9301-ec200e3c84b1&quot; I0610 02:02:50.298447 volume_grpc_client_to_master.go:232 volume server 172.17.0.16:8080 heartbeat I0610 02:02:50.298518 store.go:589 disk /data max 11943 unclaimedSpace:1527235MB, unused:17592186042872MB volumeSizeLimit:128MB I0610 02:02:50.298531 volume.go:273 collectStatus volume 53 I0610 02:02:50.298540 volume.go:273 collectStatus volume 60 I0610 02:02:50.298545 volume.go:273 collectStatus volume 56 I0610 02:02:50.298549 volume.go:273 collectStatus volume 61 I0610 02:02:50.298552 volume.go:273 collectStatus volume 62 I0610 02:02:50.298558 volume.go:273 collectStatus volume 63 I0610 02:02:50.298562 volume.go:273 collectStatus volume 64 I0610 02:02:50.298565 volume.go:273 collectStatus volume 57 I0610 02:02:50.298569 volume.go:273 collectStatus volume 55 I0610 02:02:50.298572 volume.go:273 collectStatus volume 2 I0610 02:02:50.298577 volume.go:273 collectStatus volume 58 I0610 02:02:50.298582 volume.go:273 collectStatus volume 65 I0610 02:02:50.298588 volume.go:273 collectStatus volume 54 I0610 02:02:50.298826 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 public_url:&quot;seaweedfs-lab5-volume1.xxx.io&quot; max_file_key:9206 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; volumes:{id:53 size:351311008 collection:&quot;juicefs5&quot; file_count:98 version:3 modified_at_second:1686362507} volumes:{id:60 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362538} volumes:{id:56 size:364910720 collection:&quot;juicefs5&quot; file_count:87 version:3 modified_at_second:1686362527} volumes:{id:61 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362547} volumes:{id:62 size:209718808 collection:&quot;juicefs5&quot; file_count:50 version:3 modified_at_second:1686362547} volumes:{id:63 size:327161336 collection:&quot;juicefs5&quot; file_count:78 version:3 modified_at_second:1686362555} volumes:{id:64 size:397417152 collection:&quot;juicefs5&quot; file_count:95 version:3 modified_at_second:1686362560} volumes:{id:57 size:213913184 collection:&quot;juicefs5&quot; file_count:51 version:3 modified_at_second:1686362526} volumes:{id:55 size:356523472 collection:&quot;juicefs5&quot; file_count:86 version:3 modified_at_second:1686362516} volumes:{id:2 size:4929760 file_count:29 version:3 modified_at_second:1686362531} volumes:{id:58 size:356521968 collection:&quot;juicefs5&quot; file_count:85 version:3 modified_at_second:1686362532} volumes:{id:65 size:12583136 collection:&quot;juicefs5&quot; file_count:3 version:3 modified_at_second:1686362560} volumes:{id:54 size:181406824 collection:&quot;juicefs5&quot; file_count:44 version:3 modified_at_second:1686362507} max_volume_counts:{key:&quot;&quot; value:11943} grpc_port:18080 location_uuids:&quot;5d846bf0-9b0c-4178-9301-ec200e3c84b1&quot; skip... I0610 02:03:19.231519 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_0_4194304 I0610 02:03:19.231543 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_0_4194304 I0610 02:03:19.231737 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.265913 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_2_4194304 I0610 02:03:19.265937 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_2_4194304 I0610 02:03:19.266090 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.362210 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_3_4194304 I0610 02:03:19.362232 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_3_4194304 I0610 02:03:19.362378 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.370622 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_1_4194304 I0610 02:03:19.370638 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_1_4194304 I0610 02:03:19.370758 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.379584 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:19.379606 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:19.379812 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.380124 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:19.472238 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:19.472254 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:19.472428 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.472671 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:19.480845 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_6_4194304 I0610 02:03:19.480859 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_6_4194304 I0610 02:03:19.480979 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.481813 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_7_4194304 I0610 02:03:19.481825 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304 I0610 02:03:19.481942 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.482105 stream.go:89 waiting for chunk: 59,227af658f241 I0610 02:03:19.507197 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_8_4194304 I0610 02:03:19.507213 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_8_4194304 I0610 02:03:19.507343 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.530024 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_9_4194304 I0610 02:03:19.530043 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_9_4194304 I0610 02:03:19.530186 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.530428 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:19.568549 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_10_4194304 I0610 02:03:19.568572 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304 I0610 02:03:19.568549 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_11_4194304 I0610 02:03:19.568610 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_11_4194304 I0610 02:03:19.568704 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.568706 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.569001 stream.go:89 waiting for chunk: 59,227d582687c5 I0610 02:03:19.593964 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_12_4194304 I0610 02:03:19.593986 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_12_4194304 I0610 02:03:19.594144 stream.go:75 start to stream content for chunks: 1 I0610 02:03:19.623503 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:19.632820 stream.go:89 waiting for chunk: 59,227af658f241 I0610 02:03:19.719809 stream.go:89 waiting for chunk: 59,227d582687c5 I0610 02:03:20.131116 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:20.223830 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:20.233399 stream.go:89 waiting for chunk: 59,227af658f241 I0610 02:03:20.297937 volume_grpc_client_to_master.go:232 volume server 172.17.0.16:8080 heartbeat I0610 02:03:20.297988 store.go:589 disk /data max 11943 unclaimedSpace:1527235MB, unused:17592186042872MB volumeSizeLimit:128MB I0610 02:03:20.297998 volume.go:273 collectStatus volume 56 I0610 02:03:20.298004 volume.go:273 collectStatus volume 60 I0610 02:03:20.298008 volume.go:273 collectStatus volume 63 I0610 02:03:20.298010 volume.go:273 collectStatus volume 64 I0610 02:03:20.298013 volume.go:273 collectStatus volume 57 I0610 02:03:20.298015 volume.go:273 collectStatus volume 61 I0610 02:03:20.298017 volume.go:273 collectStatus volume 62 I0610 02:03:20.298022 volume.go:273 collectStatus volume 58 I0610 02:03:20.298024 volume.go:273 collectStatus volume 65 I0610 02:03:20.298027 volume.go:273 collectStatus volume 54 I0610 02:03:20.298029 volume.go:273 collectStatus volume 55 I0610 02:03:20.298031 volume.go:273 collectStatus volume 2 I0610 02:03:20.298033 volume.go:273 collectStatus volume 53 I0610 02:03:20.298242 master_grpc_server.go:162 master received heartbeat ip:&quot;172.17.0.16&quot; port:8080 public_url:&quot;seaweedfs-lab5-volume1.xxx.io&quot; max_file_key:9207 data_center:&quot;dc1&quot; rack:&quot;rack1&quot; volumes:{id:56 size:364910720 collection:&quot;juicefs5&quot; file_count:87 version:3 modified_at_second:1686362527} volumes:{id:60 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362538} volumes:{id:63 size:327161336 collection:&quot;juicefs5&quot; file_count:78 version:3 modified_at_second:1686362555} volumes:{id:64 size:397417152 collection:&quot;juicefs5&quot; file_count:95 version:3 modified_at_second:1686362560} volumes:{id:57 size:213913184 collection:&quot;juicefs5&quot; file_count:51 version:3 modified_at_second:1686362526} volumes:{id:61 size:293606328 collection:&quot;juicefs5&quot; file_count:70 version:3 modified_at_second:1686362547} volumes:{id:62 size:209718808 collection:&quot;juicefs5&quot; file_count:50 version:3 modified_at_second:1686362547} volumes:{id:58 size:356521968 collection:&quot;juicefs5&quot; file_count:85 version:3 modified_at_second:1686362532} volumes:{id:65 size:12583136 collection:&quot;juicefs5&quot; file_count:3 version:3 modified_at_second:1686362560} volumes:{id:54 size:181406824 collection:&quot;juicefs5&quot; file_count:44 version:3 modified_at_second:1686362507} volumes:{id:55 size:356523472 collection:&quot;juicefs5&quot; file_count:86 version:3 modified_at_second:1686362516} volumes:{id:2 size:5047368 file_count:30 version:3 modified_at_second:1686362591} volumes:{id:53 size:351311008 collection:&quot;juicefs5&quot; file_count:98 version:3 modified_at_second:1686362507} max_volume_counts:{key:&quot;&quot; value:11943} grpc_port:18080 location_uuids:&quot;5d846bf0-9b0c-4178-9301-ec200e3c84b1&quot; I0610 02:03:20.320520 stream.go:89 waiting for chunk: 59,227d582687c5 E0610 02:03:21.931464 stream.go:97 operation LookupFileId 59,2277719b1e43 failed, err: urls not found E0610 02:03:21.931719 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304: operation LookupFileId 59,2277719b1e43 failed, err: urls not found E0610 02:03:21.931734 common.go:297 processRangeRequest: operation LookupFileId 59,2277719b1e43 failed, err: urls not found I0610 02:03:21.931886 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF I0610 02:03:21.977787 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:21.977808 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:21.977974 stream.go:75 start to stream content for chunks: 1 I0610 02:03:21.978197 stream.go:89 waiting for chunk: 59,2277719b1e43 E0610 02:03:22.024472 stream.go:97 operation LookupFileId 59,2278b138056e failed, err: urls not found E0610 02:03:22.024485 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304: operation LookupFileId 59,2278b138056e failed, err: urls not found E0610 02:03:22.024492 common.go:297 processRangeRequest: operation LookupFileId 59,2278b138056e failed, err: urls not found I0610 02:03:22.024590 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF E0610 02:03:22.033660 stream.go:97 operation LookupFileId 59,227af658f241 failed, err: urls not found E0610 02:03:22.033671 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304: operation LookupFileId 59,227af658f241 failed, err: urls not found E0610 02:03:22.033677 common.go:297 processRangeRequest: operation LookupFileId 59,227af658f241 failed, err: urls not found I0610 02:03:22.033768 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF I0610 02:03:22.068682 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:22.068693 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:22.068786 stream.go:75 start to stream content for chunks: 1 I0610 02:03:22.068991 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:22.080083 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_7_4194304 I0610 02:03:22.080093 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304 I0610 02:03:22.080210 stream.go:75 start to stream content for chunks: 1 I0610 02:03:22.080381 stream.go:89 waiting for chunk: 59,227af658f241 E0610 02:03:22.121560 stream.go:97 operation LookupFileId 59,227d582687c5 failed, err: urls not found E0610 02:03:22.121578 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304: operation LookupFileId 59,227d582687c5 failed, err: urls not found E0610 02:03:22.121586 common.go:297 processRangeRequest: operation LookupFileId 59,227d582687c5 failed, err: urls not found I0610 02:03:22.121664 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF I0610 02:03:22.128904 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:22.162302 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_10_4194304 I0610 02:03:22.162317 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304 I0610 02:03:22.162426 stream.go:75 start to stream content for chunks: 1 I0610 02:03:22.162616 stream.go:89 waiting for chunk: 59,227d582687c5 I0610 02:03:22.219153 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:22.230544 stream.go:89 waiting for chunk: 59,227af658f241 I0610 02:03:22.313054 stream.go:89 waiting for chunk: 59,227d582687c5 I0610 02:03:22.729968 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:22.819452 stream.go:89 waiting for chunk: 59,2278b138056e I0610 02:03:22.830716 stream.go:89 waiting for chunk: 59,227af658f241 I0610 02:03:22.914313 stream.go:89 waiting for chunk: 59,227d582687c5 E0610 02:03:24.530581 stream.go:97 operation LookupFileId 59,2277719b1e43 failed, err: urls not found E0610 02:03:24.530607 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304: operation LookupFileId 59,2277719b1e43 failed, err: urls not found E0610 02:03:24.530619 common.go:297 processRangeRequest: operation LookupFileId 59,2277719b1e43 failed, err: urls not found I0610 02:03:24.530758 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF E0610 02:03:24.619885 stream.go:97 operation LookupFileId 59,2278b138056e failed, err: urls not found E0610 02:03:24.619899 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304: operation LookupFileId 59,2278b138056e failed, err: urls not found E0610 02:03:24.619906 common.go:297 processRangeRequest: operation LookupFileId 59,2278b138056e failed, err: urls not found I0610 02:03:24.620003 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF I0610 02:03:24.630463 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:24.630479 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_4_4194304 I0610 02:03:24.630625 stream.go:75 start to stream content for chunks: 1 E0610 02:03:24.630835 stream.go:97 operation LookupFileId 59,227af658f241 failed, err: urls not found E0610 02:03:24.630847 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_7_4194304: operation LookupFileId 59,227af658f241 failed, err: urls not found E0610 02:03:24.630859 common.go:297 processRangeRequest: operation LookupFileId 59,227af658f241 failed, err: urls not found I0610 02:03:24.630876 stream.go:89 waiting for chunk: 59,2277719b1e43 I0610 02:03:24.630935 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF I0610 02:03:24.702655 s3api_object_handlers.go:177 GetObjectHandler juicefs5 /juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:24.702670 s3api_object_handlers.go:357 s3 proxying GET to http://172.17.0.16:8888/buckets/juicefs5/juicefs5/chunks/0/2/2778_5_4194304 I0610 02:03:24.702880 stream.go:75 start to stream content for chunks: 1 I0610 02:03:24.703050 stream.go:89 waiting for chunk: 59,2278b138056e E0610 02:03:24.715283 stream.go:97 operation LookupFileId 59,227d582687c5 failed, err: urls not found E0610 02:03:24.715296 filer_server_handlers_read.go:257 failed to stream content /buckets/juicefs5/juicefs5/chunks/0/2/2778_10_4194304: operation LookupFileId 59,227d582687c5 failed, err: urls not found E0610 02:03:24.715303 common.go:297 processRangeRequest: operation LookupFileId 59,227d582687c5 failed, err: urls not found I0610 02:03:24.715396 s3api_object_handlers.go:455 passthrough response read 67 bytes: unexpected EOF skip... ``` `volume.deleteEmpty` triggers `DeleteVolume 59`, but volume 59 is not empty(already have chunks been uploaded to volume 59) when `volume.deleteEmpty` is executed.</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>109</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: fid mismatch (#4554) Co-authored-by: wang wusong &lt;wangwusong@virtaitech.com&gt;</MESSAGE>
    <SHA>670e2185e4e4a69ce9c55bf0cc843423526a5f40</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>use onlyEmpty for deleteVolume https://github.com/seaweedfs/seaweedfs/issues/4559</MESSAGE>
      <SHA>647f60152497c6b403dde810d8304e367601dd73</SHA>
      <PATCHEDFILES>
        <FILE>weed/pb/volume_server.proto</FILE>
        <FILE>weed/pb/volume_server_pb/volume_server.pb.go</FILE>
        <FILE>weed/server/volume_grpc_admin.go</FILE>
        <FILE>weed/shell/command_ec_encode.go</FILE>
        <FILE>weed/shell/command_volume_delete.go</FILE>
        <FILE>weed/shell/command_volume_delete_empty.go</FILE>
        <FILE>weed/shell/command_volume_fix_replication.go</FILE>
        <FILE>weed/shell/command_volume_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_upload.go</FILE>
        <FILE>weed/storage/store.go</FILE>
        <FILE>weed/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Delete volume is empty (#4561) * use onlyEmpty for deleteVolume https://github.com/seaweedfs/seaweedfs/issues/4559 * fix IsEmpty * fix test --------- Co-authored-by: Konstantin Lebedev &lt;9497591+kmlebedev@users.noreply.github.co&gt;</MESSAGE>
      <SHA>25535e9c36ad55b4e75f88ed01ca0c5e3947663e</SHA>
      <PATCHEDFILES>
        <FILE>weed/pb/volume_server.proto</FILE>
        <FILE>weed/pb/volume_server_pb/volume_server.pb.go</FILE>
        <FILE>weed/server/volume_grpc_admin.go</FILE>
        <FILE>weed/server/volume_grpc_copy.go</FILE>
        <FILE>weed/shell/command_ec_encode.go</FILE>
        <FILE>weed/shell/command_volume_delete.go</FILE>
        <FILE>weed/shell/command_volume_delete_empty.go</FILE>
        <FILE>weed/shell/command_volume_fix_replication.go</FILE>
        <FILE>weed/shell/command_volume_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_upload.go</FILE>
        <FILE>weed/storage/store.go</FILE>
        <FILE>weed/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Delete volume is empty (#4561) * use onlyEmpty for deleteVolume https://github.com/seaweedfs/seaweedfs/issues/4559 * fix IsEmpty * fix test --------- Co-authored-by: Konstantin Lebedev &lt;9497591+kmlebedev@users.noreply.github.co&gt;</MESSAGE>
      <SHA>6bc81569a0d391d0c01989d9deaa79107849276a</SHA>
      <PATCHEDFILES>
        <FILE>weed/pb/volume_server.proto</FILE>
        <FILE>weed/pb/volume_server_pb/volume_server.pb.go</FILE>
        <FILE>weed/server/volume_grpc_admin.go</FILE>
        <FILE>weed/server/volume_grpc_copy.go</FILE>
        <FILE>weed/shell/command_ec_encode.go</FILE>
        <FILE>weed/shell/command_volume_delete.go</FILE>
        <FILE>weed/shell/command_volume_delete_empty.go</FILE>
        <FILE>weed/shell/command_volume_fix_replication.go</FILE>
        <FILE>weed/shell/command_volume_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_move.go</FILE>
        <FILE>weed/shell/command_volume_tier_upload.go</FILE>
        <FILE>weed/storage/store.go</FILE>
        <FILE>weed/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
