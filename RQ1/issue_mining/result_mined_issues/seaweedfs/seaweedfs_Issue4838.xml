<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4838</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/4838</ISSUEURL>
  <TITLE>how to deploy a high-availability cluster</TITLE>
  <DESCRIPTION>**System Setup** - seaweedfs helm chart (3 master ,3 volume ,2 filer) - kubernetes 1.26 **Expected behavior** deploy the cluster in kubernetes 1.26;use s3cmd to make bucket and upload file &lt;img width=&quot;480&quot; alt=&quot;image&quot; src=&quot;https://github.com/seaweedfs/seaweedfs/assets/132719524/498298a7-cde6-4550-a153-8c01de2985f6&quot;&gt; &lt;img width=&quot;503&quot; alt=&quot;image&quot; src=&quot;https://github.com/seaweedfs/seaweedfs/assets/132719524/57014a0c-0f5b-4673-a1b6-502e2c79cbee&quot;&gt; when i stop a master pod ,i can't upload file to filer &lt;img width=&quot;588&quot; alt=&quot;image&quot; src=&quot;https://github.com/seaweedfs/seaweedfs/assets/132719524/a517be1d-eeba-4332-b7e3-148fecd2cf31&quot;&gt; &lt;img width=&quot;465&quot; alt=&quot;image&quot; src=&quot;https://github.com/seaweedfs/seaweedfs/assets/132719524/cc11c4ec-9d88-44b4-94ee-2b8659ec4e97&quot;&gt; **Additional context** my question is how to deploy the high-availability cluster, even if one node goes down, the cluster should still work normally</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Revert &quot;turn on streaming assign file id&quot; This reverts commit 733db2bc8846b98bb191e0cacc1e910104a0cfde.</MESSAGE>
    <SHA>520b8c01ed91b1bab250024485dd44463febc279</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>revert to non-streaming mode to assign file id fix https://github.com/seaweedfs/seaweedfs/issues/4838#issuecomment-1722290685</MESSAGE>
      <SHA>0c1ae8d013a34a558957b7b2f5823c086f6ba6d0</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/filer_server.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>revert to non-streaming mode to assign file id fix https://github.com/seaweedfs/seaweedfs/issues/4838#issuecomment-1722290685</MESSAGE>
      <SHA>b590a68e7537c8989fa5e1fe9a125c930c8355b8</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/filer_server.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
