<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5864</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/5864</ISSUEURL>
  <TITLE>[webdav] When the webdav service stops, a 404 is returned for an existing file</TITLE>
  <DESCRIPTION>**Describe the bug** When the webdav service stops, a 404 is returned for an existing file **System Setup** `3.71` **Expected behavior** Returning always 200 or return nothing **Additional context** ``` 1. make server with -webdav option 2. while true; do curl -sI &quot;http://127.0.0.1:7333/buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd&quot; | grep HTTP; done 3. Crtl+C stop server 4. Got HTTP/1.1 200 OK HTTP/1.1 404 Not Found ``` logs: ``` I0806 14:38:20.436016 filer_grpc_server.go:31 LookupDirectoryEntry /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd: get /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd : leveldb: closed, I0806 14:38:20.436090 filer_pb_helper.go:139 read /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd: rpc error: code = Unknown desc = get /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd : leveldb: closed I0806 14:38:20.436096 filer_client.go:42 read /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd &lt;nil&gt;: LookupEntry1: rpc error: code = Unknown desc = get /buckets/warp-benchmark-bucket/xyla1SAS/99.dIWkjopAvnLG(3VR.rnd : leveldb: closed ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>chore(deps): bump docker/setup-buildx-action from 3.6.0 to 3.6.1 (#5856) Bumps [docker/setup-buildx-action](https://github.com/docker/setup-buildx-action) from 3.6.0 to 3.6.1. - [Release notes](https://github.com/docker/setup-buildx-action/releases) - [Commits](https://github.com/docker/setup-buildx-action/compare/3d68780484996aa9d417bb9016193885cdf1f299...988b5a0280414f521da01fcc63a27aeeb4b104db) --- updated-dependencies: - dependency-name: docker/setup-buildx-action dependency-type: direct:production update-type: version-update:semver-patch ... Signed-off-by: dependabot[bot] &lt;support@github.com&gt; Co-authored-by: dependabot[bot] &lt;49699333+dependabot[bot]@users.noreply.github.com&gt;</MESSAGE>
    <SHA>8a1052cc5ee5717e3045a8ae0628f395596a9e08</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>status code 500 if internal error https://github.com/seaweedfs/seaweedfs/issues/5864</MESSAGE>
      <SHA>b499df229683ef33e50c38279e089cd7b300779b</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/webdav_server.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
