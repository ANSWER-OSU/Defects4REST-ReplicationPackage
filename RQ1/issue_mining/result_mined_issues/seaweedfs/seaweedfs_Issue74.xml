<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>74</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/74</ISSUEURL>
  <TITLE>single point of failure</TITLE>
  <DESCRIPTION>3 master server: mA mB mC 2 volume server: vA vB mA is the leader of (mA,mB,mC) cluster. and vA and vB are connected with mA; (replication is &quot;001&quot;) If mA is down, mB become the leader of (mB,mC) as my expectation. But why don't vA and vB is still looking up for mA when writing replication? When vA and vB will realize to looking up for mB for writing replication? In this case, when mA is down and then I submit file to mB; it always returns e.g. `{&quot;error&quot;:&quot;Failed to write to replicas for volume 3&quot;}` How to solve this problem about SPOF?</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #73 from chrislusf/master sync</MESSAGE>
    <SHA>620b91f23eaf5718088dc9ddcf91540967d0c8a6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #74 from chrislusf/master sync</MESSAGE>
      <SHA>17d02264f33f501e124060ade7b0b39e687aaa3d</SHA>
      <PATCHEDFILES>
        <FILE>.github/workflows/release.yml</FILE>
        <FILE>README.md</FILE>
        <FILE>backers.md</FILE>
        <FILE>docker/Dockerfile.go_build</FILE>
        <FILE>docker/Dockerfile.go_build_large</FILE>
        <FILE>docker/Makefile</FILE>
        <FILE>docker/compose/dev.env</FILE>
        <FILE>docker/compose/local-clusters-compose.yml</FILE>
        <FILE>docker/compose/local-dev-compose.yml</FILE>
        <FILE>docker/compose/master-cloud.toml</FILE>
        <FILE>docker/compose/tls.env</FILE>
        <FILE>docker/entrypoint.sh</FILE>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>k8s/README.md</FILE>
        <FILE>k8s/seaweedfs/Chart.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/_helpers.tpl</FILE>
        <FILE>k8s/seaweedfs/templates/cronjob.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/filer-service-client.yaml</FILE>
        <FILE>k8s/seaweedfs/templates/volume-statefulset.yaml</FILE>
        <FILE>k8s/seaweedfs/values.yaml</FILE>
        <FILE>note/SeaweedFS_Architecture.png</FILE>
        <FILE>note/SeaweedFS_Cluster_Backup.png</FILE>
        <FILE>note/SeaweedFS_XDR.png</FILE>
        <FILE>other/java/client/pom.xml</FILE>
        <FILE>other/java/client/pom.xml.deploy</FILE>
        <FILE>other/java/client/pom_debug.xml</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/SeaweedOutputStream.java</FILE>
        <FILE>other/java/examples/pom.xml</FILE>
        <FILE>other/java/hdfs2/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs2/pom.xml</FILE>
        <FILE>other/java/hdfs3/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs3/pom.xml</FILE>
        <FILE>weed/Makefile</FILE>
        <FILE>weed/command/benchmark.go</FILE>
        <FILE>weed/command/command.go</FILE>
        <FILE>weed/command/filer_backup.go</FILE>
        <FILE>weed/command/filer_meta_backup.go</FILE>
        <FILE>weed/command/filer_meta_tail.go</FILE>
        <FILE>weed/command/filer_replication.go</FILE>
        <FILE>weed/command/filer_sync.go</FILE>
        <FILE>weed/command/master.go</FILE>
        <FILE>weed/command/mount_std.go</FILE>
        <FILE>weed/command/msg_broker.go</FILE>
        <FILE>weed/command/s3.go</FILE>
        <FILE>weed/command/scaffold.go</FILE>
        <FILE>weed/command/server.go</FILE>
        <FILE>weed/command/volume.go</FILE>
        <FILE>weed/command/webdav.go</FILE>
        <FILE>weed/filer/filer_delete_entry.go</FILE>
        <FILE>weed/filer/filer_on_meta_event.go</FILE>
        <FILE>weed/filer/meta_aggregator.go</FILE>
        <FILE>weed/filer/stream.go</FILE>
        <FILE>weed/filesys/dir.go</FILE>
        <FILE>weed/filesys/dir_link.go</FILE>
        <FILE>weed/filesys/dirty_page.go</FILE>
        <FILE>weed/filesys/file.go</FILE>
        <FILE>weed/filesys/filehandle.go</FILE>
        <FILE>weed/filesys/fscache.go</FILE>
        <FILE>weed/operation/upload_content.go</FILE>
        <FILE>weed/pb/filer_pb/filer_client.go</FILE>
        <FILE>weed/pb/grpc_client_server.go</FILE>
        <FILE>weed/pb/volume_info.go</FILE>
        <FILE>weed/replication/repl_util/replication_util.go</FILE>
        <FILE>weed/replication/replicator.go</FILE>
        <FILE>weed/replication/sink/azuresink/azure_sink.go</FILE>
        <FILE>weed/replication/sink/b2sink/b2_sink.go</FILE>
        <FILE>weed/replication/sink/filersink/filer_sink.go</FILE>
        <FILE>weed/replication/sink/gcssink/gcs_sink.go</FILE>
        <FILE>weed/replication/sink/localsink/local_sink.go</FILE>
        <FILE>weed/replication/sink/replication_sink.go</FILE>
        <FILE>weed/replication/sink/s3sink/s3_sink.go</FILE>
        <FILE>weed/replication/sink/s3sink/s3_write.go</FILE>
        <FILE>weed/replication/source/filer_source.go</FILE>
        <FILE>weed/s3api/filer_util.go</FILE>
        <FILE>weed/s3api/s3api_bucket_handlers.go</FILE>
        <FILE>weed/s3api/s3api_object_handlers.go</FILE>
        <FILE>weed/s3api/s3api_object_handlers_postpolicy.go</FILE>
        <FILE>weed/security/tls.go</FILE>
        <FILE>weed/server/filer_server.go</FILE>
        <FILE>weed/server/filer_server_handlers_read.go</FILE>
        <FILE>weed/server/filer_server_handlers_write_autochunk.go</FILE>
        <FILE>weed/server/master_grpc_server_volume.go</FILE>
        <FILE>weed/server/volume_server_tcp_handlers_write.go</FILE>
        <FILE>weed/shell/command_ec_encode.go</FILE>
        <FILE>weed/shell/command_s3_clean_uploads.go</FILE>
        <FILE>weed/shell/command_volume_tier_move.go</FILE>
        <FILE>weed/storage/backend/backend.go</FILE>
        <FILE>weed/storage/backend/disk_file.go</FILE>
        <FILE>weed/storage/backend/s3_backend/s3_sessions.go</FILE>
        <FILE>weed/storage/erasure_coding/ec_volume.go</FILE>
        <FILE>weed/storage/needle/crc.go</FILE>
        <FILE>weed/storage/needle/needle_read_write.go</FILE>
        <FILE>weed/storage/needle_map_leveldb.go</FILE>
        <FILE>weed/storage/needle_map_sorted_file.go</FILE>
        <FILE>weed/storage/store.go</FILE>
        <FILE>weed/storage/super_block/replica_placement.go</FILE>
        <FILE>weed/storage/volume_loading.go</FILE>
        <FILE>weed/storage/volume_read_write.go</FILE>
        <FILE>weed/storage/volume_stream_write.go</FILE>
        <FILE>weed/storage/volume_tier.go</FILE>
        <FILE>weed/storage/volume_vacuum.go</FILE>
        <FILE>weed/topology/data_node_ec.go</FILE>
        <FILE>weed/topology/volume_layout.go</FILE>
        <FILE>weed/topology/volume_location_list.go</FILE>
        <FILE>weed/util/constants.go</FILE>
        <FILE>weed/util/fasthttp_util.go</FILE>
        <FILE>weed/util/fla9/fla9.go</FILE>
        <FILE>weed/wdclient/net2/base_connection_pool.go</FILE>
        <FILE>weed/wdclient/net2/connection_pool.go</FILE>
        <FILE>weed/wdclient/net2/doc.go</FILE>
        <FILE>weed/wdclient/net2/ip.go</FILE>
        <FILE>weed/wdclient/net2/managed_connection.go</FILE>
        <FILE>weed/wdclient/net2/port.go</FILE>
        <FILE>weed/wdclient/resource_pool/doc.go</FILE>
        <FILE>weed/wdclient/resource_pool/managed_handle.go</FILE>
        <FILE>weed/wdclient/resource_pool/multi_resource_pool.go</FILE>
        <FILE>weed/wdclient/resource_pool/resource_pool.go</FILE>
        <FILE>weed/wdclient/resource_pool/semaphore.go</FILE>
        <FILE>weed/wdclient/resource_pool/simple_resource_pool.go</FILE>
        <FILE>weed/wdclient/volume_tcp_client.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
