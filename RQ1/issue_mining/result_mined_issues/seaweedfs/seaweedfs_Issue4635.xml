<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4635</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/4635</ISSUEURL>
  <TITLE>Vacuum: invalid cross-device link</TITLE>
  <DESCRIPTION>**Describe the bug** I thought it was a clever idea to have the index files on another hard drive than the data. But that lead to errors while committing vacuum. The files are now shown with 0 bytes. Can I somehow &quot;restore&quot; them or are they completely gone?? **System Setup** Two mounted devices: `/meta` is an NVME and `/data` is a &quot;normal&quot; SSD. Command: ```bash weed server -dataCenter=app1 -ip=app1 -master.dir=/meta -master.peers=app1:9333,app2:9333,app3:9333 -dir=/data -volume.dir.idx=/meta -volume.index=leveldbLarge -volume.max=0 -rack=1 -filer.encryptVolumeData -volume.fileSizeLimitMB=4096 -master.volumeSizeLimitMB=1024 -filer.defaultReplicaPlacement=100 -filer.saveToFilerLimit=4096 -filer ``` Version: 3.52 **Expected behavior** I could live with a warning/error or something but SeaweedFS should try to handle that without losing data at least. **Screenshots** ```bash topology_vacuum.go:138 Error when committing vacuum 3 on app1:8080: rpc error: code = Unknown desc = rename /meta/3.ldb: rename /data/3.cpldb /meta/3.ldb: invalid cross-device link volume_grpc_vacuum.go:87 failed commit volume 3: rename /meta/3.ldb: rename /data/3.cpldb /meta/3.ldb: invalid cross-device link ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Bump cloud.google.com/go/storage from 1.30.1 to 1.31.0 (#4632)</MESSAGE>
    <SHA>08ba5ce4bcd06a3aeaf1b264fe81f9eb911af7e8</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix copying level db files during commi fix https://github.com/seaweedfs/seaweedfs/issues/4635</MESSAGE>
      <SHA>b2d384b6408f78db05e16252dc8a4733d5897e89</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix copying level db files during commi fix https://github.com/seaweedfs/seaweedfs/issues/4635</MESSAGE>
      <SHA>2aa59ab37cf70b7f0ee8d4c5078be064e0e1a190</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/volume.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
