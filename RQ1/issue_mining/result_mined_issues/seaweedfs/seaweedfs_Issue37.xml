<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>37</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/37</ISSUEURL>
  <TITLE>redirectOnRead goes to localhost</TITLE>
  <DESCRIPTION>I've got it running as a server: ./weed server -filer.redirectOnRead -filer Here's the curl. Note the hostname in the Location header: bash-3.2$ curl -vI http://weed1:8888/path/to/sources/README.md &gt; /dev/null &gt; HEAD /path/to/sources/README.md HTTP/1.1 &gt; User-Agent: curl/7.30.0 &gt; Host: weed1:8888 &gt; Accept: _/_ &gt; &gt; &lt; HTTP/1.1 302 Found &gt; &lt; Location: http://localhost:8080/5,01afbd8c36 &gt; &lt; Date: Sat, 20 Dec 2014 17:15:34 GMT &gt; &lt; Content-Type: text/plain; charset=utf-8 &gt; &lt; &gt; 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0 &gt; - Connection #0 to host weed1 left intact &gt; bash-3.2$</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #36 from chrislusf/master sync</MESSAGE>
    <SHA>e0d5207ed9ff6350e83497586ac9859d841a711a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #37 from chrislusf/master sync</MESSAGE>
      <SHA>218561c206943d179740a80d8bb21e1f42b35daa</SHA>
      <PATCHEDFILES>
        <FILE>.github/workflows/release.yml</FILE>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>k8s/seaweedfs/Chart.yaml</FILE>
        <FILE>k8s/seaweedfs/values.yaml</FILE>
        <FILE>other/java/client/pom.xml</FILE>
        <FILE>other/java/client/pom.xml.deploy</FILE>
        <FILE>other/java/client/pom_debug.xml</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/FilerClient.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/SeaweedRead.java</FILE>
        <FILE>other/java/client/src/main/java/seaweedfs/client/VolumeIdCache.java</FILE>
        <FILE>other/java/client/src/main/proto/filer.proto</FILE>
        <FILE>other/java/examples/pom.xml</FILE>
        <FILE>other/java/examples/src/main/java/com/seaweedfs/examples/UnzipFile.java</FILE>
        <FILE>other/java/examples/src/main/java/com/seaweedfs/examples/WatchFiles.java</FILE>
        <FILE>other/java/hdfs2/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs2/pom.xml</FILE>
        <FILE>other/java/hdfs3/dependency-reduced-pom.xml</FILE>
        <FILE>other/java/hdfs3/pom.xml</FILE>
        <FILE>weed/filer/filer.go</FILE>
        <FILE>weed/filer/filer_conf.go</FILE>
        <FILE>weed/filer/filer_conf_test.go</FILE>
        <FILE>weed/filer/filer_notify_append.go</FILE>
        <FILE>weed/filer/filer_on_meta_event.go</FILE>
        <FILE>weed/filer/meta_aggregator.go</FILE>
        <FILE>weed/filesys/file.go</FILE>
        <FILE>weed/operation/assign_file_id.go</FILE>
        <FILE>weed/pb/filer.proto</FILE>
        <FILE>weed/pb/filer_pb/filer.pb.go</FILE>
        <FILE>weed/pb/filer_pb/filer_pb_helper.go</FILE>
        <FILE>weed/s3api/http/header.go</FILE>
        <FILE>weed/s3api/s3api_bucket_handlers.go</FILE>
        <FILE>weed/server/common.go</FILE>
        <FILE>weed/server/filer_grpc_server.go</FILE>
        <FILE>weed/server/filer_server.go</FILE>
        <FILE>weed/server/filer_server_handlers.go</FILE>
        <FILE>weed/server/filer_server_handlers_write.go</FILE>
        <FILE>weed/server/filer_server_handlers_write_autochunk.go</FILE>
        <FILE>weed/server/filer_server_handlers_write_cipher.go</FILE>
        <FILE>weed/shell/command_fs_configure.go</FILE>
        <FILE>weed/util/constants.go</FILE>
        <FILE>weed/util/http_util.go</FILE>
        <FILE>weed/util/retry.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
