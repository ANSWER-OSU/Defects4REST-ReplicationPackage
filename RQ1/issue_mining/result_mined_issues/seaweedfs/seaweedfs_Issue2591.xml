<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2591</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/2591</ISSUEURL>
  <TITLE>Parallel migration between tiers?</TITLE>
  <DESCRIPTION>We've been using tiered storage for a quite time already, even in production. But as our storage grows, we have faced the bottleneck in the current scheme. Hot storage is filling up quite fast, and as far as `volume.tier.move ` move one volume at time, `master` script simply can't keep up with that pace. I've already disabled almost all other operations on cluster and forced script rerun to every 30 minutes, but still. So it would be cool to be able to move volumes to another tier in parallel. Say, I have 3 ssd servers and 6 hdd servers. I think I can move up to 3 volumes at time without greatly affecting performance. Could this be implemented or I have missed something and it can be done already?</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>18</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>revert &quot;POSIX: should not delete if a directory is not empty&quot; revert 0c75f15062c931d457fb52a079ca22fbb4679247 Reported: Hi, about commit: 0c75f15062c931d457fb52a079ca22fbb4679247 POSIX: should not delete if a directory is not empty It should still delete with a command like rm -rf &quot;${path}&quot;/ because it is a forced delete, but now it gets fail to delete non-empty folder: [...] Can you enable the delete if it is forced?</MESSAGE>
    <SHA>7328962009f301a4c7d5d6f4c2107841d62c5441</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>https://github.com/chrislusf/seaweedfs/issues/2591</MESSAGE>
      <SHA>cda5d2dc5ecf900ad4825e76e82dcc246f521829</SHA>
      <PATCHEDFILES>
        <FILE>weed/shell/command_volume_tier_move.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
