<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>399</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/399</ISSUEURL>
  <TITLE>weed backup tool would miss syncing the updated fids</TITLE>
  <DESCRIPTION>Chris: The weed backup tool now only remove the fids which the src do not have but dest have, and add the ones which src have but desc does not have at the backup place. For those files which are updated many times, I think that the backup tool will do nothing for them. If this is a bug, do you have any good suggestion to fix it? e.g . Add the file crc32 checksum value in fetchVolumeFileEntries() function(This need to scan the whole volume and get it from each needle),and for the fid keys in both src and dest index, if the corresponding file size and checksum value are both same, ignore syncing. Hope for your suggestions.Thanks!</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>859</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'master' into add_volume_follow</MESSAGE>
    <SHA>c913583e2d8de645c5dc36bd048d8e6e51f71ed2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>weed backup: efficient delta backup fix https://github.com/chrislusf/seaweedfs/issues/399</MESSAGE>
      <SHA>df95ce0b6cc5e4dc91f7dcb0d2fe1ad2bbe47dd7</SHA>
      <PATCHEDFILES>
        <FILE>weed/command/export.go</FILE>
        <FILE>weed/command/fix.go</FILE>
        <FILE>weed/server/volume_grpc_follow.go</FILE>
        <FILE>weed/storage/volume_follow.go</FILE>
        <FILE>weed/storage/volume_read_write.go</FILE>
        <FILE>weed/storage/volume_vacuum.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
