<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6139</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/6139</ISSUEURL>
  <TITLE>[volume] avoid reset volume metrics after one volume unmoun/mount</TITLE>
  <DESCRIPTION>**Describe the bug** ``` &gt; volume.unmount -node 192.168.131.2:8112 -volumeId 6227 &gt; volume.mount -node 192.168.131.2:8112 -volumeId 6227 ``` ``` curl -s http://192.168.131.2:9533/metrics | grep -A 1 SeaweedFS_volumeServer_volumes SeaweedFS_volumeServer_volumes{collection=&quot;my-collection&quot;,type=&quot;volume&quot;} 1 ``` volume.list ``` &gt; volume.list -dataNode 192.168.131.2:8112 Rack rack1 hdd(volume:4136/7272 active:4130 free:3136 remote:0) DataNode 192.168.131.2:8112 hdd(volume:35/64 active:33 free:29 remote:0) Disk hdd(volume:35/64 active:33 free:29 remote:0) volume id:4227 size:524666641560 collection:&quot;my-collection&quot; file_count:118552 delete_count:7289 deleted_byte_count:41575914268 replica_placement:100 version:3 modified_at_second:1725538853 volume id:6046 size:524522236696 collection:&quot;my-collection-input&quot; file_count:6847 replica_placement:100 version:3 ttl:773 modified_at_second:1728384834 volume id:5547 size:524579140400 collection:&quot;my-collection&quot; file_count:118413 delete_count:353 deleted_byte_count:2246319497 replica_placement:100 version:3 modified_at_second:1727111949 volume id:4694 size:525070612688 collection:&quot;my-collection&quot; file_count:124936 delete_count:434 deleted_byte_count:2383978651 replica_placement:100 version:3 modified_at_second:1728491653 volume id:1627 size:524505885232 collection:&quot;my-collection&quot; file_count:124123 delete_count:1719 deleted_byte_count:8356372944 replica_placement:100 version:3 modified_at_second:1716101128 volume id:3618 size:524370776344 collection:&quot;my-collection&quot; file_count:125363 delete_count:193 deleted_byte_count:1065707659 replica_placement:100 version:3 modified_at_second:1723345341 volume id:1413 size:524291310736 collection:&quot;my-collection&quot; file_count:116528 delete_count:1374 deleted_byte_count:5209549886 replica_placement:100 version:3 modified_at_second:1715198141 volume id:5032 size:524581322208 collection:&quot;my-collection&quot; file_count:120317 delete_count:328 deleted_byte_count:1402831216 replica_placement:100 version:3 modified_at_second:1725943362 volume id:906 size:524292484128 collection:&quot;my-collection&quot; file_count:111421 delete_count:1448 deleted_byte_count:5706539056 replica_placement:100 version:3 modified_at_second:1713102922 volume id:6687 size:70257581888 collection:&quot;my-collection&quot; file_count:16714 delete_count:71 deleted_byte_count:333474260 replica_placement:100 version:3 modified_at_second:1729159438 volume id:4401 size:524350256200 collection:&quot;my-collection&quot; file_count:112710 delete_count:1250 deleted_byte_count:5874601161 replica_placement:100 version:3 modified_at_second:1724676525 volume id:3862 size:524314982824 collection:&quot;my-collection&quot; file_count:110262 delete_count:1449 deleted_byte_count:5674259268 replica_placement:100 version:3 modified_at_second:1724265140 volume id:6075 size:524606948000 collection:&quot;my-collection&quot; file_count:125414 delete_count:45 deleted_byte_count:305243771 replica_placement:100 version:3 modified_at_second:1728816997 volume id:5949 size:524638812384 collection:&quot;my-collection&quot; file_count:127395 delete_count:614 deleted_byte_count:3265396686 replica_placement:100 version:3 modified_at_second:1728666530 volume id:5605 size:524369813168 collection:&quot;my-collection&quot; file_count:114716 delete_count:781 deleted_byte_count:3983525661 replica_placement:100 version:3 modified_at_second:1727265389 volume id:1333 size:524292265112 collection:&quot;my-collection&quot; file_count:113512 delete_count:1140 deleted_byte_count:4500796599 replica_placement:100 version:3 modified_at_second:1714748274 volume id:796 size:524297707144 collection:&quot;my-collection&quot; file_count:118024 delete_count:1242 deleted_byte_count:4845767135 replica_placement:100 version:3 modified_at_second:1711834937 volume id:1126 size:524303654824 collection:&quot;my-collection&quot; file_count:115865 delete_count:1288 deleted_byte_count:4801031923 replica_placement:100 version:3 modified_at_second:1713827432 volume id:6227 size:525990556400 collection:&quot;my-collection&quot; file_count:101742 delete_count:9047 deleted_byte_count:47840032756 replica_placement:100 version:3 modified_at_second:1729157963 volume id:3195 size:171930574160 collection:&quot;my-collection-output&quot; file_count:55176 delete_count:2951 deleted_byte_count:7525746104 replica_placement:100 version:3 modified_at_second:1729159297 volume id:1830 size:524665121136 collection:&quot;my-collection&quot; file_count:108666 delete_count:4241 deleted_byte_count:10842042380 replica_placement:100 version:3 modified_at_second:1717175079 volume id:5948 size:524570121152 collection:&quot;my-collection&quot; file_count:110114 delete_count:6481 deleted_byte_count:33210132848 replica_placement:100 version:3 modified_at_second:1728658531 volume id:6305 size:401338127120 collection:&quot;my-collection&quot; file_count:82598 delete_count:1181 deleted_byte_count:5698647056 replica_placement:100 version:3 modified_at_second:1729159408 volume id:1180 size:524305101960 collection:&quot;my-collection&quot; file_count:112105 delete_count:1351 deleted_byte_count:4871534320 replica_placement:100 version:3 modified_at_second:1728997689 volume id:4778 size:524299679136 collection:&quot;my-collection&quot; file_count:110091 delete_count:1996 deleted_byte_count:9301864062 replica_placement:100 version:3 modified_at_second:1728648117 volume id:3980 size:524786259744 collection:&quot;my-collection&quot; file_count:124478 delete_count:517 deleted_byte_count:1859926130 replica_placement:100 version:3 modified_at_second:1728305454 volume id:5338 size:525228600024 collection:&quot;my-collection&quot; file_count:117852 delete_count:1211 deleted_byte_count:6514592693 replica_placement:100 version:3 modified_at_second:1728995110 volume id:3822 size:524343632008 collection:&quot;my-collection&quot; file_count:124290 delete_count:289 deleted_byte_count:988984636 replica_placement:100 version:3 modified_at_second:1728662585 volume id:3790 size:524290532424 collection:&quot;my-collection&quot; file_count:110430 delete_count:1878 deleted_byte_count:8083825662 replica_placement:100 version:3 modified_at_second:1724239203 volume id:3891 size:524423173760 collection:&quot;my-collection&quot; file_count:110449 delete_count:1345 deleted_byte_count:5273260971 replica_placement:100 version:3 modified_at_second:1724265784 volume id:1082 size:524297969664 collection:&quot;my-collection&quot; file_count:116086 delete_count:1425 deleted_byte_count:5262847708 replica_placement:100 version:3 modified_at_second:1727695115 volume id:5927 size:525679650408 collection:&quot;my-collection&quot; file_count:120318 delete_count:8909 deleted_byte_count:47747182390 replica_placement:100 version:3 modified_at_second:1729045960 volume id:197 size:524298443584 collection:&quot;my-collection&quot; file_count:112403 delete_count:1331 deleted_byte_count:5209914081 replica_placement:100 version:3 modified_at_second:1728648320 volume id:1657 size:524356840576 collection:&quot;my-collection&quot; file_count:116195 delete_count:1348 deleted_byte_count:5772579130 replica_placement:100 version:3 modified_at_second:1716304447 volume id:385 size:524299876832 collection:&quot;my-collection&quot; file_count:114172 delete_count:1434 deleted_byte_count:5218008452 replica_placement:100 version:3 modified_at_second:1710141512 Disk hdd total size:17429416691624 file_count:3768277 deleted_file:67953 deleted_bytes:312752431020 DataNode 192.168.131.2:8112 total size:17429416691624 file_count:3768277 deleted_file:67953 deleted_bytes:312752431020 Rack rack1 total size:17429416691624 file_count:3768277 deleted_file:67953 deleted_bytes:312752431020 ``` **System Setup** ``` version 8000GB 3.77 b28b1a34025a2f2ed80883e245250d00783bfea7 linux amd64 ``` **Expected behavior** Metrics always shows the correct amount of volumes &lt;img width=&quot;1123&quot; alt=&quot;image&quot; src=&quot;https://github.com/user-attachments/assets/ce648fb2-2a45-40a8-a6a8-5a1378b6c08f&quot;&gt;</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>consistent sorted tags elastic,gocdk,rclone,sqlite,tikv,ydb</MESSAGE>
    <SHA>6c7824c813d6184d894817d9073249066072cee9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>do not delete collection metrics when unmount a volume fix https://github.com/seaweedfs/seaweedfs/issues/6139</MESSAGE>
      <SHA>d38456dc06d354d5c395519fb2f8185b2456a82e</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/store.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
