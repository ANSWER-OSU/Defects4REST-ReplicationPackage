<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4640</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/4640</ISSUEURL>
  <TITLE>Volumes crash when run vacuum</TITLE>
  <DESCRIPTION>**Describe the bug** runtime error: invalid memory address or nil pointer dereference **System Setup** ``` weed master -mdir=&quot;E:\Seaweedfs&quot; -peers=10.1.11.7:2323 -ip=10.1.11.7 -port=2323 -defaultReplication=100 -volumeSizeLimitMB=500 weed volume -mserver=10.1.11.7:2323 -dataCenter=GPS1 -rack=DATA -dir=&quot;D:\Seaweedfs1&quot; -ip=10.1.11.7 -max=0 -port=8085 -dir.idx=&quot;E:\Seaweedfs1&quot; weed volume -mserver=10.1.11.7:2323 -dataCenter=GPS -rack=DATA -dir=&quot;D:\Seaweedfs&quot; -ip=10.1.11.7 -max=0 -port=8086 -dir.idx=&quot;E:\Seaweedfs&quot; weed filer -defaultStoreDir=&quot;E:\Seaweedfs&quot; -ip=10.1.11.7 -master=10.1.11.7:2323 -s3 -s3.config=&quot;config.json&quot; -s3.port=8333 ``` - OS version `Windows 10 ` - output of `weed version` `version 8000GB 3.53 2c4c2f0994604510631920f4d0d9ee817ec29224 windows amd64` - if using filer, show the content of `filer.toml` ``` [leveldb2] enabled = true dir = &quot;E:/Seaweedfs/filerldb2&quot; ``` **Expected behavior** i try to overwrite files by filer and run vacuum (vol/vacuum?garbageThreshold=0). **Screenshots** ![image](https://github.com/seaweedfs/seaweedfs/assets/13940206/4a74c329-62ca-4270-87ee-5210b13f0699)</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>mount: create mount root on filer fix https://github.com/seaweedfs/seaweedfs-csi-driver/issues/127</MESSAGE>
    <SHA>0606b59a3e546ee5a2b1d777350dbe5e2529b8b5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>avoid nil needle map fix https://github.com/seaweedfs/seaweedfs/issues/4640</MESSAGE>
      <SHA>c278bac26388bb35030e87562bc91a13290ec68e</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/volume_write.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>avoid nil needle map fix https://github.com/seaweedfs/seaweedfs/issues/4640</MESSAGE>
      <SHA>1bbb9adfb3b2d0a5f46e9042a55388b65b0dfda0</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/volume_write.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
