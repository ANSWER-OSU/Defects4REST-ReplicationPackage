<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>447</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/447</ISSUEURL>
  <TITLE>Store.VolumeSizeLimit is always 0?</TITLE>
  <DESCRIPTION>This makes every write operation triggers a log. ```bash $ weed server -dir=./weed -volume.max=10 I0123 11:43:28 7219 file_util.go:20] Folder ./weed Permission: -rwxrwxr-x I0123 11:43:28 7219 file_util.go:20] Folder ./weed Permission: -rwxrwxr-x I0123 11:43:28 7219 topology.go:81] Using default configurations. I0123 11:43:28 7219 master_server.go:67] Volume Size Limit is 30000 MB I0123 11:43:28 7219 server.go:217] Start Seaweed Master 0.74 at localhost:9333 I0123 11:43:28 7219 raft_server.go:56] Peers Change: [localhost:9333] =&gt; [] I0123 11:43:28 7219 raft_server.go:98] Initializing new cluster I0123 11:43:28 7219 master_server.go:100] [ localhost:9333 ] I am the leader! I0123 11:43:28 7219 disk_location.go:106] Store started on dir: ./weed with 0 volumes max 10 I0123 11:43:28 7219 server.go:290] Start Seaweed volume server 0.74 at localhost:8080 I0123 11:43:28 7219 volume_grpc_client.go:17] Volume server bootstraps with master localhost:9333 I0123 11:43:28 7219 volume_grpc_client.go:52] Heartbeat to localhost:9333 I0123 11:43:28 7219 node.go:223] topo adds child DefaultDataCenter I0123 11:43:28 7219 node.go:223] topo:DefaultDataCenter adds child DefaultRack I0123 11:43:28 7219 node.go:223] topo:DefaultDataCenter:DefaultRack adds child localhost:8080 I0123 11:43:28 7219 master_grpc_server.go:36] added volume server localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:1 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_1.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 1 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:2 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_2.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 2 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:3 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_3.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 3 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:4 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_4.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 4 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:5 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_5.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 5 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:6 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_6.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 6 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:169] In dir ./weed adds volume:7 collection:IMAGE_STORE_default replicaPlacement:000 ttl: I0123 11:43:30 7219 volume_loading.go:73] loading index file weed/IMAGE_STORE_default_7.idx readonly false I0123 11:43:30 7219 volume_growth.go:205] Created Volume 7 on topo:DefaultDataCenter:DefaultRack:localhost:8080 I0123 11:43:30 7219 store.go:279] volume 3 size 48 will exceed limit 0 I0123 11:43:30 7219 store.go:279] volume 3 size 96 will exceed limit 0 I0123 11:43:31 7219 store.go:279] volume 5 size 48 will exceed limit 0 I0123 11:43:31 7219 store.go:279] volume 7 size 67 will exceed limit 0 I0123 11:43:31 7219 store.go:279] volume 7 size 155 will exceed limit 0 I0123 11:43:31 7219 store.go:279] volume 1 size 89 will exceed limit 0 I0123 11:43:33 7219 volume_server.go:93] Shutting down volume server... I0123 11:43:33 7219 volume_server.go:95] Shut down successfully! ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>always send the leader info on each heartbeat</MESSAGE>
    <SHA>f302c9fda27a955ae676003ab4afe3e44fceca2a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>set the volume size limit fixing https://github.com/chrislusf/seaweedfs/issues/447</MESSAGE>
      <SHA>c2ce97785ff193f3a5a69518bbabf04c05b6efc8</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/volume_grpc_client.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>set the volume size limit fixing https://github.com/chrislusf/seaweedfs/issues/447</MESSAGE>
      <SHA>5f2adc2ceca76f0e9817bb0f646aa9ebd3005088</SHA>
      <PATCHEDFILES>
        <FILE>weed/server/volume_grpc_client.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
