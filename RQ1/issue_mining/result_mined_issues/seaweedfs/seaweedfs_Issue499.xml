<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>499</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/499</ISSUEURL>
  <TITLE>lost volume server always after Volume xyz becomes unwritable</TITLE>
  <DESCRIPTION>Hi We're seeing very frequest volume server disconnects. I've tried running the master with different pulseSeconds. The latest attempt was master with pulseSeconds=60 and volumes with pulseSeconds=1 ( based on https://github.com/chrislusf/seaweedfs/issues/408 ) As far as I can tell it always happens after volumes become unwritable: I0523 20:52:43 12295 volume_layout.go:203] Volume 188233 becomes unwritable I0523 20:52:43 12295 volume_layout.go:203] Volume 188232 becomes unwritable I0523 20:52:43 12295 volume_layout.go:203] Volume 188234 becomes unwritable I0523 20:52:43 12295 volume_layout.go:203] Volume 188235 becomes unwritable I0523 20:52:43 12295 volume_layout.go:203] Volume 188236 becomes unwritable I0523 20:52:44 12295 master_grpc_server.go:63] lost volume server 10.1.14.22:8082 I0523 20:52:44 12295 topology_event_handling.go:52] Removing Volume 1241 from the dead volume server 10.1.14.22:8082 I0523 20:52:44 12295 volume_layout.go:227] Volume 1241 has 0 replica, less than required 2 I0523 20:52:44 12295 topology_event_handling.go:52] Removing Volume 1541 from the dead volume server 10.1.14.22:8082 I0523 20:52:44 12295 volume_layout.go:227] Volume 1541 has 1 replica, less than required 2 . . I0523 20:53:59 12295 node.go:237] topo:DefaultDataCenter:DefaultRack removes 10.1.14.22:8082 . . I0523 20:54:00 12295 volume_growth.go:205] Created Volume 188240 on 10.1.14.27:8080 I0523 20:54:00 12295 volume_growth.go:205] Created Volume 188241 on topo:DefaultDataCenter:DefaultRack:10.1.14.24:8081 I0523 20:54:00 12295 volume_growth.go:205] Created Volume 188241 on topo:DefaultDataCenter:DefaultRack:10.1.14.23:8081 I0523 20:54:00 12295 volume_growth.go:205] Created Volume 188242 on topo:DefaultDataCenter:DefaultRack:10.1.14.23:8083 I0523 20:54:00 12295 volume_growth.go:205] Created Volume 188242 on topo:DefaultDataCenter:DefaultRack:10.1.14.27:8083 I0523 20:54:00 12295 node.go:223] topo:DefaultDataCenter:DefaultRack adds child 10.1.14.22:8082 I0523 20:54:00 12295 master_grpc_server.go:36] added volume server 10.1.14.22:8082 I0523 20:54:00 12295 node.go:223] topo:DefaultDataCenter:DefaultRack adds child 10.1.14.24:8083 I0523 20:54:00 12295 master_grpc_server.go:36] added volume server 10.1.14.24:8083 I0523 20:54:00 12295 volume_layout.go:203] Volume 187989 becomes unwritable I0523 20:54:00 12295 volume_layout.go:203] Volume 187519 becomes unwritable I0523 20:54:01 12295 node.go:223] topo:DefaultDataCenter:DefaultRack adds child 10.1.14.27:8080 I0523 20:54:01 12295 master_grpc_server.go:36] added volume server 10.1.14.27:8080</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>add 1.8.1</MESSAGE>
    <SHA>c5f23b26fcd6561ef9522764ca93b3a622d6fbdb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>skip busy reporting back to master possible fix for https://github.com/chrislusf/seaweedfs/issues/499</MESSAGE>
      <SHA>bd97cbc5230215ca91d280e7a2254674a9efd4ce</SHA>
      <PATCHEDFILES>
        <FILE>weed/storage/store.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
