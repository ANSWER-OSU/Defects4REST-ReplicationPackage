<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>188</ISSUENO>
  <ISSUEURL>https://github.com/NatLibFi/Annif/issues/188</ISSUEURL>
  <TITLE>Merge results using NumPy operations</TITLE>
  <DESCRIPTION>Currently Annif merges hits using annif.util.merge_hits. It is used both by AnnifProject and the ensemble backend. The current implementation is unnecessarily complex. Nowadays we can use as_vector and from_vector to turn hits (AnalysisResult objects) into a NumPy array and back. The merging should be done with NumPy operations.</DESCRIPTION>
  <REPONAME>Annif</REPONAME>
  <TIMEDIFFERENCEDAYS>28</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Set Markdown content type and add Trove classifiers, to help with eventual PyPI release (#195)</MESSAGE>
    <SHA>3a6f1a758e617e4250c0758f43c910249193fe8f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge results using NumPy operations. Part of #188</MESSAGE>
      <SHA>2578c22f08542f73c0140fe04780f8d19ad5fbc5</SHA>
      <PATCHEDFILES>
        <FILE>annif/backend/ensemble.py</FILE>
        <FILE>annif/hit.py</FILE>
        <FILE>annif/project.py</FILE>
        <FILE>annif/util.py</FILE>
        <FILE>tests/test_cli.py</FILE>
        <FILE>tests/test_project.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #197 from NatLibFi/issue188-numpy-merge-results Merge results using NumPy operations. Part of #188</MESSAGE>
      <SHA>2ab107f056fefb0b33ce0825b39a606539de2b9c</SHA>
      <PATCHEDFILES>
        <FILE>annif/backend/ensemble.py</FILE>
        <FILE>annif/hit.py</FILE>
        <FILE>annif/project.py</FILE>
        <FILE>annif/util.py</FILE>
        <FILE>tests/conftest.py</FILE>
        <FILE>tests/corpora/dummy-subjects.tsv</FILE>
        <FILE>tests/projects.cfg</FILE>
        <FILE>tests/test_cli.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Initial code which lazily converts between vectors and lists-of-hits. Part of #188</MESSAGE>
      <SHA>843a14a5d76dc021cb67384ea8a38d272edc989a</SHA>
      <PATCHEDFILES>
        <FILE>annif/hit.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Different representation of list-based and vector-based AnalysisResults and efficient operations on them, including conversion. Fixes #188</MESSAGE>
      <SHA>265248bdeb776bc3178bf9a645b73b119ba7678b</SHA>
      <PATCHEDFILES>
        <FILE>annif/backend/dummy.py</FILE>
        <FILE>annif/backend/fasttext.py</FILE>
        <FILE>annif/backend/http.py</FILE>
        <FILE>annif/backend/tfidf.py</FILE>
        <FILE>annif/eval.py</FILE>
        <FILE>annif/hit.py</FILE>
        <FILE>annif/util.py</FILE>
        <FILE>tests/conftest.py</FILE>
        <FILE>tests/test_backend.py</FILE>
        <FILE>tests/test_backend_fasttext.py</FILE>
        <FILE>tests/test_backend_http.py</FILE>
        <FILE>tests/test_eval.py</FILE>
        <FILE>tests/test_hit.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
