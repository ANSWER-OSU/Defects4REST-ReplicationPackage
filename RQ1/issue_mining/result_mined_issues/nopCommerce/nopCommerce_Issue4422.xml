<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4422</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4422</ISSUEURL>
  <TITLE>Send Private message button should be hidden when setting is disable and be displayed only for registered users</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Steps to reproduce the problem: Go to admin &gt; Configuration &gt; Settings &gt; Forum Settings Disable setting Permission section &gt; **Allow private messages** and save. ![17_forum_setting](https://user-images.githubusercontent.com/13154058/78059355-5326b600-73a7-11ea-918f-9d2f3b18d2b6.png) Now navigate to any customer edit page. There is button for send private message but it not sending any message due to setting is disable. So I think this button should not be there. ![18_sendprivate](https://user-images.githubusercontent.com/13154058/78059502-94b76100-73a7-11ea-9a12-8d6f125be291.png) Also it should not in the guest customer edit page.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#4441 Added EPPlus licensing config section to the appsettings.json file</MESSAGE>
    <SHA>cd8f066552691fbbfb26fff0818a212cbef810a6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4422 Hide &quot;Send private message&quot; button when the appropriate setting is disable</MESSAGE>
      <SHA>6b59f67344f72f960dc0be0df828698e34e9046e</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/CustomerModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Infrastructure/Mapper/AdminMapperConfiguration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Customers/CustomerModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Customer/Edit.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
