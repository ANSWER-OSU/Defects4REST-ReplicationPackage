<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6591</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6591</ISSUEURL>
  <TITLE>There is a bug at ReturnRequest GetReturnRequestAvailabilityAsync method</TITLE>
  <DESCRIPTION>nopCommerce version: 4.6, 4.5 Steps to reproduce the problem: At GetReturnRequestAvailabilityAsync method in ReturnRequestService class; the Quantity in the groupby field is wrong, it only needs to be grouped by only orderItemId. You can create the bug with this case: after creating at least two return requests with different numbers separately for a product , then the relevant product appears as more than one line on the new return form page. For example we ordered five &quot;product A&quot; in an order, then we create a return request with 1(one) Product A item, then create second return request with 2(two) &quot;Product A&quot; item, then open a new return request page you can see &quot;Product A&quot; lines are doubled. I commented the relevant line in my project, you may check and fix in your repository Screenshot is: ![image](https://user-images.githubusercontent.com/5729171/217838134-8ba47c6b-92d8-4c86-871a-adf3478067c8.png)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>26</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#6631 Added address validator for the CustomerAddressModel model</MESSAGE>
    <SHA>d0b9017b9c3446049611f8285936856ccab57f86</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6591 Fixed grouping in the return request accessibility get method</MESSAGE>
      <SHA>84a011deccb9e8ec5d5aa98ec81d29cfa5305844</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Orders/ReturnRequestService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6591 Fixed grouping in the return request accessibility get method</MESSAGE>
      <SHA>3292d7582db90d95a581230494bcbfd009773b95</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Orders/ReturnRequestService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
