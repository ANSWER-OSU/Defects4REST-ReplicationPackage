<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4382</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4382</ISSUEURL>
  <TITLE>Shipping Calculation BUG</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 beta Set Shipping By Ground X$ Set Additional shipping charge Y$ On Product page- Estimate shipping price show X$ Lets add to cart In Cart lets select Estimate shipping to Ground and Total Price is X$+Y$+Product Price, and Shipping: (Ground) is X$+Y$ -- lets Buy select payment ....... On step 6.Confirm Order Total Price is X$+Product Price, and Shipping: (Ground) is X$</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>30</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#4455 Kendo grid styles were removed from nopCommerce since we don't use kendo grids anymore.</MESSAGE>
    <SHA>2bc9e0052cd58128ea422502a8caae8cf14d6229</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4382 fixed estimate shipping calculation bug</MESSAGE>
      <SHA>31f03dcd92c6462909adf33f3e34a43d1103ab14</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs</FILE>
        <FILE>upgradescripts/4.20-4.30 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4382 fixed address used for estimate shipping</MESSAGE>
      <SHA>924190d517a041ee878bd89a730e7e3ba43dafca</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4382 cache offered shipping options only for shopping cart</MESSAGE>
      <SHA>9b8b3e14126d3e08ac0a95a32b4cc17df064dd2f</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Controllers/ProductController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/IShoppingCartModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4382 use first address from customer's addresses if shipping address is not selected yet</MESSAGE>
      <SHA>fdec0c2b153c0dc0c609bce3a2af02698f67d482</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Factories/OverriddenShoppingCartModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
