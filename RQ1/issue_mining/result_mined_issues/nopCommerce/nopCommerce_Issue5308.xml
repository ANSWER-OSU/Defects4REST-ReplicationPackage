<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5308</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5308</ISSUEURL>
  <TITLE>NopEditorTagHelper not working with LocalizedEditor and HtmlPrefix</TITLE>
  <DESCRIPTION>nopCommerce version: 4.3 Steps to reproduce the problem: - Create a Localized Editor in a Partial View - Pass the model with a Prefix in &quot;ViewData.TemplateInfo.HtmlFieldPrefix&quot; - Prefix is ignored and Model can not be bound to controls of type NopEditorTagHelper The reason is because they are bound over ViewData Attributes in nop-editor. By the time the ViewData Entries are created, the prefix ist not there. **Example:** ViewData Key = &quot;Locales[0].DefaultTitle&quot; HtmlFieldPrefix = &quot;SeoSettings&quot; Added ViewData = &quot;Locales[0].DefaultTitle&quot; but should be =&gt; &quot;SeoSettings.Locales[0].DefaultTitle&quot; To fix this issue we added the prefix in the NopEditorTagHelper. ``` //generate editor var pattern = $&quot;{nameof(ILocalizedModel&lt;object&gt;.Locales)}&quot; + @&quot;(?=\[\w+\]\.)&quot;; if (!_htmlHelper.ViewData.ContainsKey(For.Name) &amp;&amp; Regex.IsMatch(For.Name, pattern)) { var prefix = _htmlHelper.ViewData.TemplateInfo.HtmlFieldPrefix; _htmlHelper.ViewData.Add(string.IsNullOrEmpty(prefix) ? For.Name : $&quot;{prefix}.{For.Name}&quot;, For.Model); } ```</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>202</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update states.txt #5796 Added a missing state</MESSAGE>
    <SHA>b83f2a40fd9cc9a9058b64aaa8be3ec123cdc5de</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5308 Added support HtmlPrefix for LocalizedEditor</MESSAGE>
      <SHA>51b78554ad71e6d50eaae06a85cb4a28ab788dc1</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/TagHelpers/Admin/NopEditorTagHelper.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
