<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6572</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6572</ISSUEURL>
  <TITLE>ValidatePictureAsync throws an exception when decoding an SVG image</TITLE>
  <DESCRIPTION>nopCommerce version: 4.60 Steps to reproduce the problem: 1. Go to _Catalog -&gt; Products page_ 2. Choose any product 3. Press _Edit_ button 4. Press _Upload files_ button and choose an SVG image 5. Press _Save_ (or don't - it doesn't matter) 6. Go to _System -&gt; Log page_ 7. There is a message with &quot;Cannot decode picture binary (file name: filename)&quot; Full text: ``` System.ArgumentNullException: Value cannot be null. (Parameter 'codec') at SkiaSharp.SKBitmap.Decode(SKCodec codec) at SkiaSharp.SKBitmap.Decode(ReadOnlySpan`1 buffer) at SkiaSharp.SKBitmap.Decode(Byte[] buffer) at Nop.Services.Media.PictureService.ValidatePictureAsync(Byte[] pictureBinary, String mimeType, String fileName) in C:\directory\nopCommrece_clean\nopCommerce\src\Libraries\Nop.Services\Media\PictureService.cs:line 1066 ``` If _Display order_ of uploaded SVG image isn't 0 (and this is not a single product image), then the above error will be repeated for all product images (any format, not just SVG).</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>use existing customer paramter for GetCustomerTaxDisplayTypeAsync</MESSAGE>
    <SHA>b81f9bb714b4d646e9c592d2fffe70335633e6cc</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>avoid validation picture binary for svg images #6572</MESSAGE>
      <SHA>e39521de88e34477b6c8a5f42758dfdbf547f63d</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Media/PictureService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>avoid validation picture binary for svg images #6572</MESSAGE>
      <SHA>9b73b0972306bcf24cd0f719b80ccb2c072cda7f</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Media/PictureService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6572 SVG image decoding is not required and has been disabled</MESSAGE>
      <SHA>6cf4136cbc95d2b719c7f7c11fe51dec6f098f70</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Media/PictureService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
