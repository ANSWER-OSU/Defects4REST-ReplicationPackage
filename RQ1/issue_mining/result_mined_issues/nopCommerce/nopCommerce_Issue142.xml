<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>142</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/142</ISSUEURL>
  <TITLE>TinyMCE picture browser does not work in a virtual directory and plugins</TITLE>
  <DESCRIPTION>TinyMCE picture browser does not work in a virtual directory. Now a store owner have to edit the \Administration\Views\Shared\EditorTemplates\RichEditor.cshtml file. Just uncomment the code below: ``` //allowJbimages = true; //allowRoxyFileman = false; ``` in order to support ANY picture uploading (not picture browsing). We should find a way to detect whether a site is run in a virtual directory. And then configure \Administration\Views\Shared\EditorTemplates\RichEditor.cshtml file based on it. How can it be done programmatically? also see http://www.nopcommerce.com/boards/t/35370/virtual-directory-not-included-in-the-images-urls.aspx and http://www.nopcommerce.com/boards/t/35370/virtual-directory-not-included-in-the-images-urls.aspx#177873 (contribution to be checked) regarding plugins - http://www.nopcommerce.com/boards/t/42272/error-at-richeditor-at-arvixe-server.aspx ![roxy_file_man](https://cloud.githubusercontent.com/assets/5019111/15934339/e4704598-2e6b-11e6-9f9f-a56ba93b23c4.png)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>651</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#2687 Fixed bug with occasional non-extraction of the first file from the archive</MESSAGE>
    <SHA>9af73fd50808d125117bd1faaad47f64770cb8c6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#142 Support virtual directory in RoxyFileman</MESSAGE>
      <SHA>3358e4cffa45e8c9b51a183efc2c4a5d84312552</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/RoxyFilemanController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/EditorTemplates/RichEditor.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/wwwroot/lib/Roxy_Fileman/conf.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#142 Add comment</MESSAGE>
      <SHA>2695da20190f32bf0cc8e9f79a115d84517e9b10</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/RoxyFilemanController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/EditorTemplates/RichEditor.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/wwwroot/lib/Roxy_Fileman/conf.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
