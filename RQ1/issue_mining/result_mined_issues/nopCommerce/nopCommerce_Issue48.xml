<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>48</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/48</ISSUEURL>
  <TITLE>Support conditions in message templates</TITLE>
  <DESCRIPTION>1. Some message templates contain shipping method. It should be hidden for non-shippable orders (without shipping address) 2. Message templates for anonymous customers (e.g. Service.EmailAFriend) We need to be able to use expressions such as &quot;&lt;if ()&gt;&lt;/&gt;&quot; also see http://www.nopcommerce.com/boards/t/32276/feature-request-message-template-expressions.aspx and http://www.nopcommerce.com/boards/t/38322/email-templates-for-downloadable-products.aspx also see https://github.com/nopSolutions/nopCommerce/issues/1801</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>360</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#1913 Return to use TinyMCE editor for queued emails</MESSAGE>
    <SHA>78e41fbe487eb108a5113bfad439a04f4334e912</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#48 Support conditions in message templates</MESSAGE>
      <SHA>80de0d73ecd0a1fd0884e18da37c6c56e751ceae</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/Tokenizer.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Nop.Services.csproj</FILE>
        <FILE>src/Libraries/Nop.Services/packages.config</FILE>
        <FILE>src/Presentation/Nop.Web/Administration/Controllers/MessageTemplateController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Administration/Views/MessageTemplate/_CreateOrUpdate.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Tests/Nop.Services.Tests/Messages/TokenizerTests.cs</FILE>
        <FILE>src/packages/System.Linq.Dynamic.1.0.7/System.Linq.Dynamic.1.0.7.nupkg</FILE>
        <FILE>src/packages/System.Linq.Dynamic.1.0.7/lib/net40/System.Linq.Dynamic.dll</FILE>
        <FILE>upgradescripts/3.80-the next version/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#48 Tokens with non-string values</MESSAGE>
      <SHA>e6da1ebe84af1cdc55718d3710771cab42ddc1ae</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/Token.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/Tokenizer.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Administration/Controllers/MessageTemplateController.cs</FILE>
        <FILE>src/Tests/Nop.Services.Tests/Messages/TokenizerTests.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#48 Add conditions to the default message templates</MESSAGE>
      <SHA>64ee133476dafac03a58c341db536cbff2a80c57</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Installation/CodeFirstInstallationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#48 Return deleted ID in token</MESSAGE>
      <SHA>8ea4036b271dac67a13d9ff5c7111726d6bb3777</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
