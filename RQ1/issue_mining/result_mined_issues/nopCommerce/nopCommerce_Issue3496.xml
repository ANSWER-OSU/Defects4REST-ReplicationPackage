<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3496</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3496</ISSUEURL>
  <TITLE>Support for multiple reCAPTCHAs on one page</TITLE>
  <DESCRIPTION>I was working on implementing a reCaptcha in one of our products and faced a really bad problem. The plugin I was working on was integrating on a page that already has a reCaptcha and that causes an error: &quot;Uncaught Error: reCAPTCHA has already been rendered in this element&quot;. The error is caused by the fact that both of the reCaptchas controls had the same id in the HTML - &quot;recaptcha&quot;. If the reCaptcha elements have different id's there would be no problem to have several of the on one page. I've dug in nopCommerce source code and found the GenerateCaptcha method in Nop.Web.Framework\Security\Captcha\HtmlExtensions.cshtml file. In line 45 an id of &quot;recaptcha&quot; is set for the Id property when creating a new GRecaptchControl. If a unique string is passed each time a new control is created this issue would not be present. Source: https://www.nopcommerce.com/boards/t/57675/support-for-multiple-recaptchas-on-one-page.aspx</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>7</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#3341 Fixed one language default value bug</MESSAGE>
    <SHA>2264abf2ca55227cfaffcb41f13fa39bb0a78735</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3496 Added support for multiple reCAPTCHAs on one page</MESSAGE>
      <SHA>022686de9db128128d93621e170a29a0306d9fa7</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Security/Captcha/GRecaptchaControl.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Security/Captcha/HtmlExtensions.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3496 Some fixes for reCAPTCHAs</MESSAGE>
      <SHA>40b4522fef9bbc5947b47a057eb45e9467921b53</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Security/Captcha/GRecaptchaControl.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Security/Captcha/HtmlExtensions.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
