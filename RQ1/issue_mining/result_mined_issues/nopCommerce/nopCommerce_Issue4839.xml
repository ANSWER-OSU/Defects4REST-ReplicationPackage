<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4839</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4839</ISSUEURL>
  <TITLE>Stop using the upgrade.sql</TITLE>
  <DESCRIPTION>it is necessary to switch to updating through the migration model, this will add flexibility and will allow updating the system on any supported database without any problems</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>34</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '4.30-bug-fixes' into develop</MESSAGE>
    <SHA>9a805b9439e049c64115f7ddf1f8fd6025b1d0ac</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4839 Stop using the upgrade.sql (cherry picked from commit 1fa4860edcda271d3d2f674b78152b874654e6cb)</MESSAGE>
      <SHA>2585ee5018121d898e637bb1857a28d0ffeff50e</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/NopVersion.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationManager.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationType.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/NopMigrationAttribute.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/PreventFixMigrationException.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo440/DataMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Common/NopHttpClient.cs</FILE>
        <FILE>src/Libraries/Nop.Services/ExportImport/ExportManager.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Localization/ILocalizationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Localization/LocalizationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Plugins/UploadService.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.DiscountRules.CustomerRoles/CustomerRoleDiscountRequirementRule.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.ExchangeRate.EcbExchange/EcbExchangeRateProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.ExternalAuth.Facebook/FacebookAuthenticationMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.SendinBlue/SendinBlueDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.SendinBlue/SendinBluePlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.CheckMoneyOrder/CheckMoneyOrderPaymentProcessor.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Manual/ManualPaymentProcessor.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalSmartPaymentButtons/Defaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalSmartPaymentButtons/PaymentMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalStandard/PayPalStandardPaymentProcessor.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalStandard/Services/PayPalStandardHttpClient.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Pickup.PickupInStore/PickupInStoreProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Shipping.FixedByWeightByTotal/FixedByWeightByTotalComputationMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Shipping.ShipStation/ShipStationComputationMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Shipping.UPS/UPSComputationMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.FixedOrByCountryStateZip/FixedOrByCountryStateZipTaxProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.FacebookPixel/FacebookPixelPlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/GoogleAnalyticsPlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.NivoSlider/NivoSliderPlugin.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ApplicationBuilderExtensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ApplicationPartManagerExtensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/SettingMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Security/Captcha/CaptchaHttpClient.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/CommonModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/PluginModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/_AdminLayout.cshtml</FILE>
        <FILE>upgradescripts/4.30-4.40 (under development)/Readme.txt</FILE>
        <FILE>upgradescripts/4.30-4.40 (under development)/upgrade.sql</FILE>
        <FILE>upgradescripts/upgarade_to_4.40_and_above_readme.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4839 Next changes on &quot;Stop using the upgrade.sql&quot;</MESSAGE>
      <SHA>dfcc6ec2f91a324f46637fb4171148b5a7a51848</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/NopVersion.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationManager.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationType.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/NopMigrationAttribute.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/SkipMigrationOnInstallAttribute.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo440/DataMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/SettingMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4839 Code refactoring on &quot;Stop using the upgrade.sql&quot;</MESSAGE>
      <SHA>5963421c8ebf028e45053b43d53ac551543c10d7</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/NopVersion.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationManager.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationType.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/NopMigrationAttribute.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/NopMigrationDefaults.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/PreventFixMigrationException.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo440/DataMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ApplicationBuilderExtensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/SettingMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
