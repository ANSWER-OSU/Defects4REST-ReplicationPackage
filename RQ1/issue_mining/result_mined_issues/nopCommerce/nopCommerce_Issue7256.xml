<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7256</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7256</ISSUEURL>
  <TITLE>Avoid using the sitemap.config file when creating a menu in the admin area</TITLE>
  <DESCRIPTION>We switched to a new menu in the administration area long ago. However, we still use the inconvenient approach of storing the tree structure in the XML file. It is necessary to rewrite this mechanism to a simpler one, using classes and services. We should also abandon IAdminMenuPlugin in favor of using events. Both of these steps will simplify the logic of adding new menu items to the administration area and add control over changes</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>124</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#7276 Made some of Configure methods synchronous</MESSAGE>
    <SHA>e1301ed9e22733d20fd5ed5fedd171747795bfd0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7256 Refactoring of creating admin menu</MESSAGE>
      <SHA>43de522e2816df17fd98888d5bec7614d2d44eb9</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/NopMobilePlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/PowerBIPlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/WebApiFrontendPlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/ZettlePlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/LuceneSearchProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/plugin.json</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Events/AdminMenuCreatedEvent.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Events/BaseMenuItemCreatedEvent.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Events/ThirdPartyPluginsMenuItemCreatedEvent.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/NopStartup.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenu.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenuItem.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/Extensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/IAdminMenu.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/IAdminMenuPlugin.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/IXmlSiteMap.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/SiteMapNode.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/XmlSiteMap.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/SecurityController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/Menu.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/_ConfigurePlugin.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/_MenuItem.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/_ViewImports.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/sitemap.config</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7256 Update omnibus plugin to use new way of creating admin menu</MESSAGE>
      <SHA>f37057a48b678edb85ae635f960afc4882ce47aa</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/OmnibusDirectivePlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/plugin.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7256 Update PayPal Commerce plugin to use new way of creating admin menu</MESSAGE>
      <SHA>7ae7995d07071ef2de428fd8a9f9b6f37aa514cf</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/PayPalCommercePaymentMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/plugin.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7256 Fix typos</MESSAGE>
      <SHA>962216b6d4c09ed2cd806651db8f8ab01dacac7b</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Events/BaseMenuItemCreatedEvent.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenu.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenuItem.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/IAdminMenu.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/_MenuItem.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7256 Refactoring of adding an admin menu item from plugins</MESSAGE>
      <SHA>99e3fc1cae5d4c065ef38aec16f6e0ae18515010</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/NopMobileAppDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.NopMobileApp/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/OmnibusDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.OmnibusDirective/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/PowerBIDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.PowerBI/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/WebApiFrontendDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.WebApi.Frontend/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Misc.Zettle/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalCommerce/plugin.json</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/Infrastructure/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/LuceneDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Search.Lucene/plugin.json</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Events/BaseAdminMenuCreatedEventConsumer.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Events/MenuItemInsertType.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenu.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/AdminMenuItem.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Menu/PluginAdminMenuExtensions.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
