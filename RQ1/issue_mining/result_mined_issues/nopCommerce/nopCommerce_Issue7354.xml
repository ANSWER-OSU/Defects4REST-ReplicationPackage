<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7354</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7354</ISSUEURL>
  <TITLE>Current mysql-docker-compose.yml configuration doesn't work</TITLE>
  <DESCRIPTION>nopCommerce version: 4.70+ mysql doesn't starts it restarts in the loop because it doesn't know about the parameter &quot;default-authentication-plugin&quot; logs from MySQL: ``` 2024-10-01 12:13:10+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 9.0.1-1.el9 started. 2024-10-01 12:13:10+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql' 2024-10-01 12:13:10+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 9.0.1-1.el9 started. '/var/lib/mysql/mysql.sock' -&gt; '/var/run/mysqld/mysqld.sock' 2024-10-01T12:13:10.964731Z 0 [System] [MY-015015] [Server] MySQL Server - start. 2024-10-01T12:13:11.178454Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 9.0.1) starting as process 1 2024-10-01T12:13:11.189552Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. 2024-10-01T12:13:11.596026Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended. mysqld: Table 'mysql.plugin' doesn't exist 2024-10-01T12:13:11.753577Z 0 [ERROR] [MY-010735] [Server] Could not open the mysql.plugin table. Please perform the MySQL upgrade procedure. 2024-10-01T12:13:11.754001Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.754288Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.754553Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.754985Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.755201Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.755425Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.755640Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.810194Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened. 2024-10-01T12:13:11.882363Z 0 [Warning] [MY-010015] [Repl] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened. 2024-10-01T12:13:11.894050Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed. 2024-10-01T12:13:11.894099Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel. 2024-10-01T12:13:11.901653Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory. 2024-10-01T12:13:11.902131Z 0 [Warning] [MY-010441] [Server] Failed to open optimizer cost constant tables 2024-10-01T12:13:11.902411Z 0 [ERROR] [MY-013129] [Server] A message intended for a client cannot be sent there as no client-session is attached. Therefore, we're sending the information to the error-log instead: MY-001146 - Table 'mysql.component' doesn't exist 2024-10-01T12:13:11.902442Z 0 [Warning] [MY-013129] [Server] A message intended for a client cannot be sent there as no client-session is attached. Therefore, we're sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition. 2024-10-01T12:13:11.902641Z 0 [ERROR] [MY-000067] [Server] unknown variable 'default-authentication-plugin=mysql_native_password'. 2024-10-01T12:13:11.903945Z 0 [ERROR] [MY-010119] [Server] Aborting 2024-10-01T12:13:13.460652Z 0 [System] [MY-010910] [Server] /usr/sbin/mysqld: Shutdown complete (mysqld 9.0.1) MySQL Community Server - GPL. 2024-10-01T12:13:13.460675Z 0 [System] [MY-015016] [Server] MySQL Server - end. ``` see details on [this comment](https://github.com/nopSolutions/nopCommerce/pull/7352#issuecomment-2385609027)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>16</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'issue-7281-must-change-password' into develop # Conflicts: # src/Libraries/Nop.Data/Migrations/UpgradeTo480/SchemaMigration.cs # src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo480/LocalizationMigration.cs</MESSAGE>
    <SHA>20485011f1bedf51eb810fed120e1df36171c76f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7354 Fixed mysql-docker-compose.yml configuration file</MESSAGE>
      <SHA>a3d25e472c9676e63ca940e478e60262bcef990c</SHA>
      <PATCHEDFILES>
        <FILE>mysql-docker-compose.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
