<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4992</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4992</ISSUEURL>
  <TITLE>GetAllCountries Caching bug</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Steps to reproduce the problem: We have a 2 Store site, with just 1 country per store. When a user goes to any page which displays a Countries drop down, it caches that list of countries for that store. Go to the other store and you get the wrong list of countries. Clear the cache and refresh and you get the right list of countries. Switch store again and you now see the countries from the other store. See details on [this post](https://www.nopcommerce.com/en/boards/topic/86881/nop-430-countryservice-getallcountries-caching-bug)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>43</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5067 from MarkTallentire/issue-5041-use-tel-and-email-types-for-inputs #5041 Updated missing DataTypes on Email Fields</MESSAGE>
    <SHA>3dd53ac0cb9ca6b0f078bbd956f6fc5e10b9e75b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #5068 from Krnlsoft/develop #4992 GetAllCountries cache by store</MESSAGE>
      <SHA>751a3b5f735cedc03a72af82fe7580427ba0d3a5</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Directory/CountryService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Directory/NopDirectoryDefaults.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
