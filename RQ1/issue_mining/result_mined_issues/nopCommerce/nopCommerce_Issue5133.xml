<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5133</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5133</ISSUEURL>
  <TITLE>Add a generic method to filter hidden entries</TITLE>
  <DESCRIPTION>nopCommerce version: develop We copy `FilterHiddenEntries()` method in some services, but we could make this method as a generic one and use it for any entity. Where we can place it, in what service? Also, we could improve this method to avoid redundant `EXISTS` in the produced SQL in some cases.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>105</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5102 Reworked featured product getting methods</MESSAGE>
    <SHA>409bc12d587b13e356f88085cbcfc1d2014512ab</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5133 Move TODO to the work item</MESSAGE>
      <SHA>25f3e33b6545b4ef8486ac33977cffaa781d28c2</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/CategoryService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ManufacturerService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductTagService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Topics/TopicService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4980 #5133 Improved performance when too many hidden entries</MESSAGE>
      <SHA>25494c28ad65a38159c9be8084046b7aa97b8486</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/IProductTagService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductTagService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/AclService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Stores/StoreMappingService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5301 Fixed condition for checking the existence of ACL rules and store mappings in DB. #5133 The ACL and store mapping methods moved directly to their call places. Correct entity filter by store in the admin area. Rename variable.</MESSAGE>
      <SHA>9a5023699bb0a5585b5d9a6a3392bde11456a936</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Blogs/BlogService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/CategoryService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ManufacturerService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductTagService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Directory/CountryService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTemplateService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/News/NewsService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderReportService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Polls/PollService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/AclService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/Caching/AclRecordCacheEventConsumer.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/IAclService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/NopSecurityDefaults.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Stores/Caching/StoreMappingCacheEventConsumer.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Stores/IStoreMappingService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Stores/NopStoreDefaults.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Stores/StoreMappingService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Topics/TopicService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Customer/_CreateOrUpdate.Info.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/CatalogModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/CommonModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/WidgetModelFactory.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
