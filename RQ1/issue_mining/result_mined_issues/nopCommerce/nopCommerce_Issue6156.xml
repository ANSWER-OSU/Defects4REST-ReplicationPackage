<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6156</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6156</ISSUEURL>
  <TITLE>Product link image preview not displayed in WhatsApp with HTML minification enabled</TITLE>
  <DESCRIPTION>nopCommerce version: 4.4 Steps to reproduce the problem: NOTE: You can jump to step 6 and use specified link from nopCommerce demo website. 1. Go to Admin&gt;Configuration&gt;Settings&gt;General Settings&gt; 2. Check &quot;HTML minification&quot; setting 3. Check &quot;Twitter META tags&quot; setting 4. Check &quot;Open Graph META tags&quot; setting 5. Save and restart website 6. Copy link of any product details public page that has an image. You can use the link from nopCommerce demo website: https://demo.nopcommerce.com/build-your-own-computer 7. Go to WhatsApp in your phone and paste this link in the text box of any chat conversation. You will see that product image is not displayed in WhatsApp link preview like expected. Solution: HTML minification has removed double-quote characters from meta tag attribute values so it looks like this: `&lt;meta property=og:image content=https://demo.nopcommerce.com/images/thumbs/0000020_build-your-own-computer_550.jpeg&gt;` If we add double quotes to **all** &quot;og:image&quot; meta tag attributes or to &quot;twitter:image&quot; meta tag attributes then image preview will work: `&lt;meta property=&quot;og:image&quot; content=&quot;https://demo.nopcommerce.com/images/thumbs/0000020_build-your-own-computer_550.jpeg&quot;&gt;` In addition to another issue I posted about problem caused by HTML minification #6155. Maybe there should be a set of settings for how &quot;intense&quot; minification should be applied on HTML. for example some settings: - Keep attribute double quotes - Keep text new lines Even with both checked page will still minify significantly due to removal of closing tags. Simplified valid/invalid HTML for WhatsApp for testing: [whatsapp-valid-image.html.txt](https://github.com/nopSolutions/nopCommerce/files/8173391/whatsapp-valid-image.html.txt) [whatsapp-invalid-image.html.txt](https://github.com/nopSolutions/nopCommerce/files/8173392/whatsapp-invalid-image.html.txt)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>32</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Deleted travis badge from readme</MESSAGE>
    <SHA>1ecba2811fe8d018e9ae7e9348f088dfba0dcf1e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6156 Keep attribute quotes during HTML minification</MESSAGE>
      <SHA>4c5dccd8372846f598894a0821b2de6734f58c9d</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ServiceCollectionExtensions.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
