<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3192</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3192</ISSUEURL>
  <TITLE>non-ASCII chars in URL don't work</TITLE>
  <DESCRIPTION>nopCommerce version: 4.10 the issue again was fixed recently (https://github.com/nopSolutions/nopCommerce/issues/2731). But it again appeared in 4.10 as per See https://www.nopcommerce.com/boards/t/52224/nopcommerce-410-bug-fixes-and-improvements.aspx?p=5#209419 For some reasons \Nop.Web.Framework\Mvc\Routing\NopRedirectResultExecutor.cs is not used</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1216</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Updated installation SQL scripts</MESSAGE>
    <SHA>e4690510823d67943fcbadbb34ab6243c7734943</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3192 Fixed an issue with non-ASCII chars in URL</MESSAGE>
      <SHA>91dc93e64657c82ef47f4b8b23f141b6602b91f7</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Seo/GenericPathRoute.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Fixed an issue with non-ASCII chars in URL (with &quot;SEO friendly URLs with multiple languages enabled&quot; enabled)</MESSAGE>
      <SHA>e974d89f501e3e7a224daea2cdc4ae56d46d5db6</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/SecuritySettings.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Installation/CodeFirstInstallationService.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ServiceCollectionExtensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/NopMvcStartup.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Localization/LocalizedRoute.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Mvc/Filters/CheckLanguageSeoCodeAttribute.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Mvc/Routing/NopRedirectResultExecutor.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Install/Fast/create_required_data.sql</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/CommonController.cs</FILE>
        <FILE>upgradescripts/4.00-4.10 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Reverted back two recent commits</MESSAGE>
      <SHA>bba79508a73e077b372c5ac9b8abe344ab654f0e</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/SecuritySettings.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Installation/CodeFirstInstallationService.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ServiceCollectionExtensions.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/NopMvcStartup.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Localization/LocalizedRoute.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Mvc/Filters/CheckLanguageSeoCodeAttribute.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Mvc/Routing/NopRedirectResultExecutor.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Seo/GenericPathRoute.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Install/Fast/create_required_data.sql</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/CommonController.cs</FILE>
        <FILE>upgradescripts/4.00-4.10 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Fixed an issue with non-ASCII chars in URL</MESSAGE>
      <SHA>b16776c35972faf7b72d47bd11197264030874c4</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Infrastructure/Extensions/ServiceCollectionExtensions.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Fixed URL encoding on redirect</MESSAGE>
      <SHA>909b48259095dab66f376ae0f25fb98dfdf82ed2</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Mvc/Routing/NopRedirectResultExecutor.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Updated RouteUrlAsync method to correctly handle non-ASCII characters in URLs</MESSAGE>
      <SHA>3b76ab210eb9f4704673503245593ca9392382a7</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3192 Added exception handling when route URL in MessageTokenProvider</MESSAGE>
      <SHA>8b4554e84e51ae70cca38dbabeae24589358b81d</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
