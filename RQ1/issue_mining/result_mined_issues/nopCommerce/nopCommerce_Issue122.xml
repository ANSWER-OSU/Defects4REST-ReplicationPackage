<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>122</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/122</ISSUEURL>
  <TITLE>User-friendly message for &quot;maximum discount quantity&quot;</TITLE>
  <DESCRIPTION>nopCommerce Version 3.6 using the latest supported SQL Server version The maximum discount quantity feature does not quite work in the basket and product detail pages. The discount is applied accurately, but the display is a bit confusing to the end user. Repro: 1. Create a max discount quantity discount that applies to a few products: in this specific case, I used a role requirement) with a 100% discount for a max discount quantity of 1 because I would like to have a subscription membership where users can purchase 1 of a specific products, but not multiples. The regular price of the items is $150 2. Add the role to a user 3. Login as that user and add a qty of 2 for the specific products to your basket 4. Complete your purchase 5. Repeat steps 2 - 4 and place another order for the same products Issues: There are several issues: A. The product detail page shows a $0.00 price which really only applies to the first quantity of that item B. The basket page shows a price of $0.00, but since I have 2 qty, the total column shows $150, which is right, but misleading because of the price. If I were a user, I would think that I should get 2 for $0 C. Same issue with the order confirmation as the basket page D. When I place another order, then I get another &quot;1&quot; free so it appears that the max only applies to the current basket Suggested/Desired Fix/Enhancement: A. Messaging that informs the user that only one quantity will receive the discount and all others will be regular price - we have on the books to extend discounts to include discount messaging so this will be handled via our customization, but could this PLEASE be a nopCommerce base feature?? For each discount, we will add the custom messaging on the product detail and basket page and/or have custom messaging for each discount specified by page (basket, detail, etc.) B. Two line items in the order summaries on the basket, order confirmation pages: one with the 100% discount and another the same item with regular price C. Same desired solution as above D. Add an option to consider order history as well as what's in the basket for max discount qty Thanks for reading my novel! Source: http://www.nopcommerce.com/boards/t/38357/maximum-discount-quantity.aspx P.S. Do not forget about wishlist</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>304</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Minor refactoring. Moved colons to locale (wishlist and shopping cart pages)</MESSAGE>
    <SHA>835921953320dcb50e990a8ef93e744f78ed6006</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#122 Display user-friendly message for &quot;maximum discount quantity&quot; (when applied)</MESSAGE>
      <SHA>3b383264fb98d7a727ae111aadc1d9f1e7c3b5e3</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/IPriceCalculationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/PriceCalculationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderProcessingService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/ShoppingCart/ShoppingCartModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/ShoppingCart/WishlistModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Themes/DefaultClean/Content/css/styles.css</FILE>
        <FILE>src/Presentation/Nop.Web/Themes/DefaultClean/Content/css/styles.rtl.css</FILE>
        <FILE>src/Presentation/Nop.Web/Views/ShoppingCart/OrderSummary.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/ShoppingCart/Wishlist.cshtml</FILE>
        <FILE>upgradescripts/3.80-the next version/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
