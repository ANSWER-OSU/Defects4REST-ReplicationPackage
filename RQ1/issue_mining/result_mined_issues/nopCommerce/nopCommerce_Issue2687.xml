<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2687</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/2687</ISSUEURL>
  <TITLE>Upload plugin. Ensure all files are extracted</TITLE>
  <DESCRIPTION>I tried to upload several plugins from a single zip and some of the files from the Zip were not copied. By quickly looking at the code I noticed this in the UploadMultiplePlugins method: if (!Directory.Exists(directoryPath)) Directory.CreateDirectory(directoryPath); else entry.ExtractToFile(entryPath); the code above skips the first file in a folder. It should be without the else clause in order to work properly. if (!Directory.Exists(directoryPath)) { Directory.CreateDirectory(directoryPath); } entry.ExtractToFile(entryPath); Unfortunately we don't have much time to test this more as we are busy with the upgrade of the themes and plugins but I would suggest you to test this functionality a bit more. Source: https://www.nopcommerce.com/boards/t/48672/nopcommerce-40-bug-fixes-and-improvements.aspx?p=5#195182</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#2686 Changed description for uploading plugins</MESSAGE>
    <SHA>ea1e68a8b42e7c17d280446dce1fdd183a5a8f1c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2687 Fixed bug with occasional non-extraction of the first file from the archive</MESSAGE>
      <SHA>9af73fd50808d125117bd1faaad47f64770cb8c6</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Plugins/PluginManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
