<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6740</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6740</ISSUEURL>
  <TITLE>Publish event on changing the encryption key</TITLE>
  <DESCRIPTION>nopCommerce version: 4.50+ Hello, I think it would be nice to publish a custom event on a successful encryption key change with both keys after [src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs#1821](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs#L1821). This way, plugins would be able to reliably encrypt their sensitive data with the global key using `IEncryptionService` and act properly on key changes. What do you think? The only issue I can think of is if the application dies somewhere in the middle of the action, but in that case a DB rollback is mandatory anyways.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>152</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Length restriction on frontend inputs #6552</MESSAGE>
    <SHA>52b3a9652e3660753cd5d1c95539e89f1b8a9be2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Publish event on changing the encryption key #6740</MESSAGE>
      <SHA>68257b0ba929075f685387f60fe6689c49aabeb6</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/Events.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Publish event on changing the encryption key #6740</MESSAGE>
      <SHA>3397da0d28d67a5baf5a46edfe37573eedc6ee15</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/Events.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6740 Some code refactoring</MESSAGE>
      <SHA>c2aaaacc5ef6815191a39f8ba3d59c7c46143cd2</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/Events.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6740 Renamed event class file</MESSAGE>
      <SHA>05624a645b68e2a93cecc66b6a4b5d33983b203a</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Security/SecuritySettingsChangedEvent.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
