<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7206</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7206</ISSUEURL>
  <TITLE>Bug with AutomaticallyAddRequiredProducts when RequireOtherProducts is disabled</TITLE>
  <DESCRIPTION>nopCommerce version: 4.70 &gt; Example &gt; You configured &gt; RequireOtherProducts - True &gt; RequiredProductIds - the list of products &gt; AutomaticallyAddRequiredProducts - True &gt; Save. &gt; &gt; After it you disabled &gt; RequireOtherProducts - False &gt; &gt; Nopcommerce will try to add the required products in the shopping cart. It doesn't check the RequireOtherProducts &gt; &gt; The fix is to add the checking RequireOtherProducts &gt; The File ShoppingCartService.cs &gt; &gt; async Task addRequiredProductsToCartAsync(int qty = 0) &gt; { &gt; if (!product.RequireOtherProducts) &gt; return; &gt; //get these required products &gt; var requiredProducts = await _productService.GetProductsByIdsAsync(_productService.ParseRequiredProductIds(product)); &gt; if (!requiredProducts.Any()) &gt; return; &gt; var finalRequiredProducts = requiredProducts.GroupBy(p =&gt; p.Id) &gt; .Select(g =&gt; new { Product = g.First(), Count = g.Count() }); Source: https://www.nopcommerce.com/boards/topic/99131/bug-with-adding-required-products</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#7203 Suppressed clearing the form when entering the wrong billing/shipping address on the checkout page</MESSAGE>
    <SHA>36ff3e4c58ea8fca0106d3282e9bbb2f09ae2243</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7206 Fixed auto adding required products when the RequireOtherProducts is disabled</MESSAGE>
      <SHA>6455b0c65c2efb7d82f389f1d6f67bcfb5bc2ef0</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Orders/ShoppingCartService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
