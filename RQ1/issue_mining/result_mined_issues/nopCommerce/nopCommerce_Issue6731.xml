<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6731</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6731</ISSUEURL>
  <TITLE>Issue with checkout page when no payment method is required</TITLE>
  <DESCRIPTION>nopCommerce version: latest from develop Steps to reproduce the problem: **1.** add a product with a zero price to the cart. Notice that you also have to use a free shipping product or a zero price shipping method ![image](https://github.com/nopSolutions/nopCommerce/assets/52314713/860c3387-a9df-488a-a7b2-1a5c570f4680) **2.** go to the checkout page. **3.** fill up all information and proceed to the next steps. **4.** the error will occur before we reach the payment method step. ![image](https://github.com/nopSolutions/nopCommerce/assets/52314713/3b8679d5-2714-4466-9228-e62976867577) ![image](https://github.com/nopSolutions/nopCommerce/assets/52314713/0e267ea2-2c8b-49c8-b819-2092e5aceb03) `_______________________________________________________________________________________________________` In my opinion, when no payment method is required: -&gt; the result of this task: _httpContextAccessor.HttpContext?.Session?.GetAsync&lt;ProcessPaymentRequest&gt;(&quot;OrderPaymentInfo&quot;) will be null. [code](https://github.com/nopSolutions/nopCommerce/blob/cd2398293680b4eee56cf5be7418d7af13c2c895/src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs#L749) -&gt; we should do a null check when we assign value in [this line](https://github.com/nopSolutions/nopCommerce/blob/cd2398293680b4eee56cf5be7418d7af13c2c895/src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs#L751): `model.CustomValues = (await processPaymentRequestTask)?.CustomValues;`</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'issue-6688-Set-previously-selected-pickup-point-when-returning-to-shipping-methods-page' into develop</MESSAGE>
    <SHA>5d985a9489618097a356b66aaaf12f33c67ffca6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6731 Fixed issue with checkout page when no payment method is required</MESSAGE>
      <SHA>18eac9d7226354b44153d974b8157ec397a2427b</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Factories/ShoppingCartModelFactory.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
