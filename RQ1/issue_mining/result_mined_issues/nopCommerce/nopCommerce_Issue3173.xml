<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3173</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3173</ISSUEURL>
  <TITLE>robots txt file generation does not query for sitemap enabled flag</TITLE>
  <DESCRIPTION>Even if commonsettings.sitemapenabled = false sitemap line will be added to robots.txt file (but should not) ``` if (_localizationSettings.SeoFriendlyUrlsForLanguagesEnabled) { //URLs are localizable. Append SEO code foreach (var language in _languageService.GetAllLanguages(storeId: _storeContext.CurrentStore.Id)) { sb.AppendFormat(&quot;Sitemap: {0}{1}/sitemap.xml&quot;, _storeContext.CurrentStore.Url, language.UniqueSeoCode); sb.Append(newLine); } } else { //localizable paths (without SEO code) sb.AppendFormat(&quot;Sitemap: {0}sitemap.xml&quot;, _storeContext.CurrentStore.Url); sb.Append(newLine); } ```</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Updated third-party libraries</MESSAGE>
    <SHA>11a31dfc20135ee01ee596b20dd2b669501b6d52</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3173 robots.txt always included sitemap.xml (&quot;sitemap enabled&quot; setting wasn't used)</MESSAGE>
      <SHA>6fae781b465e5f01a85fa13fb212c3dcfd7578ac</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Factories/CommonModelFactory.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
