<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4762</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4762</ISSUEURL>
  <TITLE>RoxyFileman thumbnails on rollover don't show up</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Upload an image in a topic page using Roxy Fileman. Roll over that image in the Roxy Fileman file browser. Error: System.NotSupportedException: 'Stream does not support reading.' The error happens in Nop.Services.Media.RoxyFileman.FileRoxyFilemanService, at this point: `cropImg.GetThumbnailImage(width, height, () =&gt; false, IntPtr.Zero).Save(GetHttpContext().Response.Body, ImageFormat.Png);` Changing it to something along the lines of this, will work: ``` using (MemoryStream ms = new MemoryStream()) { cropImg.GetThumbnailImage(width, height, () =&gt; false, IntPtr.Zero).Save(ms, ImageFormat.Png); byte[] msa = ms.ToArray(); GetHttpContext().Response.Body.WriteAsync(msa, 0, msa.Length); } ```</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Removed unnecessary &quot;using&quot; statements</MESSAGE>
    <SHA>c3edb29fe9306777db85e98d221299629e0f8aa6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4762 fixed problem with showing up thumbnails on rollover in the RoxyFileman</MESSAGE>
      <SHA>f583fdcb88c1dcf77cbd8ae0186a9f2cadd08618</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Media/RoxyFileman/FileRoxyFilemanService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
