<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6686</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6686</ISSUEURL>
  <TITLE>Wrong product URL in email message</TITLE>
  <DESCRIPTION>nopCommerce version: 4.60 Steps to reproduce the problem: We have created new message template for products and in MessageTokenProvide.cs at method AddProductTokensAsync the line ``` await RouteUrlAsync(routeName: &quot;Product&quot;, routeValues: new { SeName = await _urlRecordService.GetSeNameAsync(product) }); ``` returns always empty string. We changed the route name to &quot;ProductDetails&quot; and the URL is now correct. But I think, here should be used something similar like in the RouteProductUrlAsync (NopUrlHelper.cs) where is much complex logic for creating product url.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#6684 Fixed file extension on print selected packingslips</MESSAGE>
    <SHA>9abdecf75527b773ce28aa123189cf765b2ac299</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6686 Fixed wrong product URL in email message</MESSAGE>
      <SHA>98cecbf0c70465ae17b5a6a8cad99968cd215115</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6686 Fixed wrong product URL in email message</MESSAGE>
      <SHA>935de7272e7e7bd352c850d0141d78b16844ea1d</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
