<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4444</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4444</ISSUEURL>
  <TITLE>Cannot delete all tables in database</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 beta Steps to reproduce the problem: 1. Install nopCommerce 2. Go to the database with SSMS 3. Try to delete all tables (you could need it sometimes). Previously you can delete all of them (with several interations) 4. Now there are several tables 9Address, Country, Customer, Order, RewardPointsHistory, StateProvince) that cannot be deleted until you manually remove some foreign keys I presume it's related to wrong creation of foreign keys (references) between these tables</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of https://github.com/nopSolutions/nopCommerce into develop</MESSAGE>
    <SHA>93fe12ade153261d6513e8f4ab86a3cb1d0f582b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4444 Code refactoring of the reward points system</MESSAGE>
      <SHA>f018882d327fd6a72c16bfdb58567aea5d6703d9</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Customers/RewardPointsHistory.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/Builders/Customers/RewardPointsHistoryBuilder.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderTotalCalculationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/RewardPointService.cs</FILE>
        <FILE>upgradescripts/4.20-4.30 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4444 Next changes &quot;Code refactoring of the reward points system&quot;</MESSAGE>
      <SHA>5330cd5c135b0dd30f684b999bfb10aaa83571b0</SHA>
      <PATCHEDFILES>
        <FILE>upgradescripts/4.20-4.30 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
