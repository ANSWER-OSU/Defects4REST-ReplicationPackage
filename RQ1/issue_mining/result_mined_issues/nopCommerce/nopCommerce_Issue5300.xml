<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5300</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5300</ISSUEURL>
  <TITLE>Review the use of events in the NewsLetterSubscription service</TITLE>
  <DESCRIPTION>nopCommerce version: develop We moved the generic events publishing from services to the [repository](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Data/EntityRepository.cs), but for some reason left for the above [service](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Services/Messages/NewsLetterSubscriptionService.cs). We also have a separate [EmailSubscribedEvent](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Core/Domain/Messages/EmailSubscribedEvent.cs) and [EmailUnsubscribedEvent](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Core/Domain/Messages/EmailUnsubscribedEvent.cs) events for this. This all leads to duplicate events and the impossibility of using them correctly in plugins. So, let's check and review using all of these events in the service. Source: https://www.nopcommerce.com/en/boards/topic/90037/handleevententityinsertedeventnewslettersubscription-eventmessage-gets-called-twice</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5092 Activate newsletter subscription only after email validation</MESSAGE>
    <SHA>6fbcbeb2056e2c27c58c793e14cfc79f24fd4891</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5300 Removed unnecessary event publications</MESSAGE>
      <SHA>1d6d8cb72cd9afadc2eca040bcdf54a3a42654b2</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Messages/NewsLetterSubscriptionService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
