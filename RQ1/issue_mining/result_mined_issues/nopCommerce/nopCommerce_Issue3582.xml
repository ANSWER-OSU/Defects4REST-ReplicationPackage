<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3582</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3582</ISSUEURL>
  <TITLE>Update Square to use the new &quot;renew token&quot; API</TITLE>
  <DESCRIPTION>We are releasing new OAuth functionality this month where we will be providing OAuth refresh tokens along with our access tokens. Currently, developers call our RenewToken endpoint (https://docs.connect.squareup.com/api/oauth#endpoint-oauth-renewtoken) with an existing access token to obtain a new access token. We will begin deprecating RenewToken after this release. Instead, developers will call ObtainToken (https://docs.connect.squareup.com/api/oauth#endpoint-oauth-obtaintoken) with the new refresh tokens to replace expired access tokens. However, RenewToken will continue to work in its current form as long as you do not update your Square Connect API version in the Square Developer Portal (https://connect.squareup.com/apps). Once you update your API version to the version that will be released this month, you will need to modify your SDK to work with the new OAuth changes. We will have a migration guide available soon that outlines the steps on moving your existing OAuth access tokens to refresh tokens. Again, as long as you do not update your Square API version, everything will continue to function as it does today. You may update / migrate at your convenience. We will send a more detailed email out to all developers later with more information once this new feature is available. UPDATE (March 14th 2019) - We released this today. See our changelog for more details, and let me know if you have any questions - https://docs.connect.squareup.com/changelog/authorization-logs/2019-03-13</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>45</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add value attribute to nop-editor tag helper</MESSAGE>
    <SHA>ca32e8c5ebb57c9d3b51225b7fc5097690e0fe79</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3582 Update Square payment plugin to use the new &quot;renew token&quot; API</MESSAGE>
      <SHA>9178e7596a23f572e8bbd153b86ee7ee0e183e87</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Components/PaymentSquareViewComponent.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Content/styles.css</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Controllers/PaymentSquareController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/GrantType.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/ObtainAccessTokenRequest.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/ObtainAccessTokenResponse.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/RenewAccessTokenRequest.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/RenewAccessTokenResponse.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Domain/RevokeAccessTokenRequest.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Infrastructure/DependencyRegistrar.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Infrastructure/NopStartup.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Infrastructure/RouteProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Models/ConfigurationModel.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Models/PaymentInfoModel.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Nop.Plugin.Payments.Square.csproj</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Services/EventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Services/RenewAccessTokenTask.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Services/SquareAuthorizationHttpClient.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Services/SquareHttpClient.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Services/SquarePaymentManager.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/SquarePaymentDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/SquarePaymentMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/SquarePaymentSettings.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Validators/ConfigurationValidator.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Views/PaymentInfo.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/Views/_ViewImports.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Square/plugin.json</FILE>
        <FILE>upgradescripts/4.10-4.20 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
