<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>18605</ISSUENO>
  <ISSUEURL>https://github.com/netbox-community/netbox/issues/18605</ISSUEURL>
  <TITLE>Prefix vlan assignment shows vlan for all sites but not only prefix's site</TITLE>
  <DESCRIPTION>### Discussed in https://github.com/netbox-community/netbox/discussions/18597 &lt;div type='discussions-op-text'&gt; &lt;sup&gt;Originally posted by **eudjinnl** February 7, 2025&lt;/sup&gt; ### Deployment Type Self-hosted ### NetBox Version v4.2.3 ### Python Version 3.10 ### Steps to Reproduce I have site Site1 configured Vlan Group for site configured: name VlanGroup1 Scope type: DCIM &gt; Site Site: Site1 Vlan configured: ID: 506 Vlan Group: VlanGroup1 Site: Site1 Now I create prefix and try to link it to vlan Scope type: DCIM &gt; Site Site: Site1 ### Expected Behavior Drop down list with vlans shows only vlans for VlanGroup1 (linked to Site1) like in NetBox v4.1.10 ### Observed Behavior Drop down list with vlans shows all vlans &lt;/div&gt;</DESCRIPTION>
  <REPONAME>netbox</REPONAME>
  <TIMEDIFFERENCEDAYS>17</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #18703 from netbox-community/release-v4.2.4 Release v4.2.4</MESSAGE>
    <SHA>c4304d059cf1a43efb52b1e2f3529d36092836e3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes #18605: only VLANs at selected Site are shown in VLAN select</MESSAGE>
      <SHA>64270d6a4e99770dab38870a866e14c72518b27b</SHA>
      <PATCHEDFILES>
        <FILE>netbox/ipam/forms/model_forms.py</FILE>
        <FILE>netbox/ipam/tests/test_forms.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #18724 from netbox-community/18605-prefix-vlan-assignment-display Fixes #18605: only VLANs at selected Site are shown in VLAN select</MESSAGE>
      <SHA>4fb42ac7b34e7314f0f818e31cb06f942e6ac854</SHA>
      <PATCHEDFILES>
        <FILE>netbox/ipam/forms/model_forms.py</FILE>
        <FILE>netbox/ipam/tests/test_forms.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixes #18605: only VLANs at selected Site are shown in VLAN select</MESSAGE>
      <SHA>ddc42a0fa929db070e83ce8150da1c5bfc66a20d</SHA>
      <PATCHEDFILES>
        <FILE>netbox/ipam/forms/model_forms.py</FILE>
        <FILE>netbox/ipam/tests/test_forms.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
