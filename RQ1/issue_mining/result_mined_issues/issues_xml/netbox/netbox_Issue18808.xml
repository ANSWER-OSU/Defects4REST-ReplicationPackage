<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>18808</ISSUENO>
  <ISSUEURL>https://github.com/netbox-community/netbox/issues/18808</ISSUEURL>
  <TITLE>Clean up nonexistent squashed migrations</TITLE>
  <DESCRIPTION>### Proposed Changes The `sqlmigrate` command fails with errors such as: `django.db.migrations.exceptions.NodeNotFoundError: Migration extras.0002_squashed_0059 dependencies reference nonexistent parent node ('dcim', '0002_auto_20160622_1821')` This results from migration squashing where the `dependencies` list was not updated to point to the new squashed migrations. Proposed change is to fix all `dependencies` pointers in existing migrations to ensure they point to the existing migrations containing the original (missing) parent nodes. ### Justification Though `sqlmigrate` is rarely used (it produces the native SQL operations to be applied during migrations in case they need to be run manually), it is useful as a diagnostic tool and ought to work properly. (Note: `migrate` itself does not seem to have this issue.)</DESCRIPTION>
  <REPONAME>netbox</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Closes #17608: Adds L2VPN.status field (#18791)</MESSAGE>
    <SHA>6bc9302ce5ecd9ce008cab9a61f26e0d54e76c34</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes: #18808 - Fix incorrect dependencies on squashed migrations (#18827)</MESSAGE>
      <SHA>bbf4eea76c8a77db070763a5b7e63221842c23f1</SHA>
      <PATCHEDFILES>
        <FILE>netbox/account/migrations/0001_initial.py</FILE>
        <FILE>netbox/circuits/migrations/0002_squashed_0029.py</FILE>
        <FILE>netbox/circuits/migrations/0038_squashed_0042.py</FILE>
        <FILE>netbox/circuits/migrations/0043_circuittype_color.py</FILE>
        <FILE>netbox/core/migrations/0006_datasource_type_remove_choices.py</FILE>
        <FILE>netbox/dcim/migrations/0002_squashed.py</FILE>
        <FILE>netbox/dcim/migrations/0003_squashed_0130.py</FILE>
        <FILE>netbox/dcim/migrations/0131_squashed_0159.py</FILE>
        <FILE>netbox/dcim/migrations/0160_squashed_0166.py</FILE>
        <FILE>netbox/dcim/migrations/0167_squashed_0182.py</FILE>
        <FILE>netbox/dcim/migrations/0183_devicetype_exclude_from_utilization.py</FILE>
        <FILE>netbox/extras/migrations/0002_squashed_0059.py</FILE>
        <FILE>netbox/extras/migrations/0060_squashed_0086.py</FILE>
        <FILE>netbox/extras/migrations/0087_squashed_0098.py</FILE>
        <FILE>netbox/extras/migrations/0099_cachedvalue_ordering.py</FILE>
        <FILE>netbox/ipam/migrations/0001_squashed.py</FILE>
        <FILE>netbox/ipam/migrations/0002_squashed_0046.py</FILE>
        <FILE>netbox/ipam/migrations/0047_squashed_0053.py</FILE>
        <FILE>netbox/ipam/migrations/0054_squashed_0067.py</FILE>
        <FILE>netbox/ipam/migrations/0068_move_l2vpn.py</FILE>
        <FILE>netbox/tenancy/migrations/0001_squashed_0012.py</FILE>
        <FILE>netbox/tenancy/migrations/0012_contactassignment_custom_fields.py</FILE>
        <FILE>netbox/virtualization/migrations/0001_squashed_0022.py</FILE>
        <FILE>netbox/virtualization/migrations/0023_squashed_0036.py</FILE>
        <FILE>netbox/virtualization/migrations/0037_protect_child_interfaces.py</FILE>
        <FILE>netbox/vpn/migrations/0001_initial.py</FILE>
        <FILE>netbox/wireless/migrations/0001_squashed_0008.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
