<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>73</ISSUENO>
  <ISSUEURL>https://github.com/openstf/stf/issues/73</ISSUEURL>
  <TITLE>Difficulty starting rethinkdb-proxy-28015.service</TITLE>
  <DESCRIPTION>Hi there Again, hope I'm not missing something obvious, but it turned out to be a good idea to write here when I couldn't get adbd.service working. When I start rethinkdb-proxy-28015 I get an error that I have tried to troubleshoot all day. Using the same rethinkdb-proxy-28015.service as DEPLOYMENT.md, changed the authkey to 1234 and the ip to the ip of this same machine (running everything on one machine) RethinkDB is running with --bind all, and I can access the web interface from my browser on the same ip, port 8080. Here is what happens when I try to start the service: ``` Sep 07 15:44:26 ubuntu systemd[1]: Starting rethinkdb-proxy-28015.service... Sep 07 15:44:28 ubuntu docker[568]: latest: Pulling from ctlc/ambassador Sep 07 15:44:28 ubuntu docker[568]: 093e01545ca5: Already exists Sep 07 15:44:28 ubuntu docker[568]: 639d60300768: Already exists Sep 07 15:44:28 ubuntu docker[568]: 50e9f95f98f1: Already exists Sep 07 15:44:28 ubuntu docker[568]: 6d021018145f: Already exists Sep 07 15:44:28 ubuntu docker[568]: c33211982f7d: Already exists Sep 07 15:44:28 ubuntu docker[568]: 0da04ef149d0: Already exists Sep 07 15:44:28 ubuntu docker[568]: c56de9c5a0d2: Already exists Sep 07 15:44:28 ubuntu docker[568]: 410000273ccc: Already exists Sep 07 15:44:28 ubuntu docker[568]: 1c9abde34886: Already exists Sep 07 15:44:28 ubuntu docker[568]: 53e2694bc9d6: Already exists Sep 07 15:44:28 ubuntu docker[568]: a853fbf35ee2: Already exists Sep 07 15:44:28 ubuntu docker[568]: cea471227545: Already exists Sep 07 15:44:28 ubuntu docker[568]: cea471227545: Already exists Sep 07 15:44:28 ubuntu docker[568]: Digest: sha256:f1648fa46b91d757b7cdd681ff134284e9903849faab0d30f3d8179c2429340c Sep 07 15:44:28 ubuntu docker[568]: Status: Image is up to date for ctlc/ambassador:latest Sep 07 15:44:28 ubuntu docker[701]: Error response from daemon: Cannot kill container rethinkdb-proxy-28015: no such id: rethinkdb-proxy-28015 Sep 07 15:44:28 ubuntu docker[701]: Error: failed to kill containers: [rethinkdb-proxy-28015] Sep 07 15:44:28 ubuntu docker[709]: Error response from daemon: no such id: rethinkdb-proxy-28015 Sep 07 15:44:28 ubuntu docker[709]: Error: failed to remove containers: [rethinkdb-proxy-28015] Sep 07 15:44:28 ubuntu systemd[1]: Started rethinkdb-proxy-28015.service. Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,963 CRIT Supervisor running as root (no user in config file) Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,963 WARN Included extra file &quot;/etc/supervisor/conf.d/supervisord-socat.conf&quot; during parsing Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,988 INFO RPC interface 'supervisor' initialized Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,988 WARN cElementTree not installed, using slower XML parser for XML-RPC Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,988 CRIT Server 'unix_http_server' running without any HTTP authentication checking Sep 07 15:44:28 ubuntu docker[716]: 2015-09-07 14:44:28,988 INFO supervisord started with pid 1 Sep 07 15:44:29 ubuntu docker[716]: 2015-09-07 14:44:29,992 INFO spawned: 'socat' with pid 7 Sep 07 15:44:30 ubuntu docker[716]: 2015-09-07 14:44:29,999 INFO exited: socat (exit status 0; not expected) Sep 07 15:44:31 ubuntu docker[716]: 2015-09-07 14:44:31,002 INFO spawned: 'socat' with pid 13 Sep 07 15:44:31 ubuntu docker[716]: 2015-09-07 14:44:31,009 INFO exited: socat (exit status 0; not expected) Sep 07 15:44:31 ubuntu docker[716]: 2015-09-07 14:44:31,012 CRIT reaped unknown pid 18) Sep 07 15:44:33 ubuntu docker[716]: 2015-09-07 14:44:33,018 INFO spawned: 'socat' with pid 22 Sep 07 15:44:33 ubuntu docker[716]: 2015-09-07 14:44:33,026 INFO exited: socat (exit status 0; not expected) Sep 07 15:44:33 ubuntu docker[716]: 2015-09-07 14:44:33,027 CRIT reaped unknown pid 27) Sep 07 15:44:36 ubuntu docker[716]: 2015-09-07 14:44:36,032 INFO spawned: 'socat' with pid 28 Sep 07 15:44:36 ubuntu docker[716]: 2015-09-07 14:44:36,046 INFO exited: socat (exit status 0; not expected) Sep 07 15:44:36 ubuntu docker[716]: 2015-09-07 14:44:36,048 INFO gave up: socat entered FATAL state, too many start retries too quickly Sep 07 15:44:36 ubuntu docker[716]: 2015-09-07 14:44:36,048 CRIT reaped unknown pid 33) ``` And here is my rethinkdb-proxy-28015.service file: ``` Description=RethinkDB proxy/28015 After=docker.service Requires=docker.service [Service] EnvironmentFile=/etc/environment TimeoutStartSec=0 Restart=always ExecStartPre=/usr/bin/docker pull ctlc/ambassador:latest ExecStartPre=-/usr/bin/docker kill %p ExecStartPre=-/usr/bin/docker rm %p ExecStart=/usr/bin/docker run --rm \ --name %p \ -e &quot;AUTHKEY=1234&quot; \ -p 28015 \ -e RETHINKDB_PORT_28015_TCP=tcp://192.168.99.106:28015 \ ctlc/ambassador:latest ExecStop=-/usr/bin/docker stop -t 10 %p ``` Tried running the docker run command directly, both on this machine and on a fresh install and it does the same. I am unsure where I should look to find the error, feel like I've been through everything. Thanks for your time, I appreciate the help</DESCRIPTION>
  <REPONAME>stf</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[Security] Bump http-proxy from 1.16.2 to 1.18.1 (#98) Bumps [http-proxy](https://github.com/http-party/node-http-proxy) from 1.16.2 to 1.18.1. **This update includes a security fix.** - [Release notes](https://github.com/http-party/node-http-proxy/releases) - [Changelog](https://github.com/http-party/node-http-proxy/blob/master/CHANGELOG.md) - [Commits](https://github.com/http-party/node-http-proxy/compare/1.16.2...1.18.1) Signed-off-by: dependabot-preview[bot] &lt;support@dependabot.com&gt; Co-authored-by: dependabot-preview[bot] &lt;27856297+dependabot-preview[bot]@users.noreply.github.com&gt;</MESSAGE>
    <SHA>9a6a6c22ea0232665033c352b8b327e56d0fecea</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bump exports-loader from 0.6.4 to 1.1.0 (#73) Bumps [exports-loader](https://github.com/webpack-contrib/exports-loader) from 0.6.4 to 1.1.0. - [Release notes](https://github.com/webpack-contrib/exports-loader/releases) - [Changelog](https://github.com/webpack-contrib/exports-loader/blob/master/CHANGELOG.md) - [Commits](https://github.com/webpack-contrib/exports-loader/compare/v0.6.4...v1.1.0) Signed-off-by: dependabot-preview[bot] &lt;support@dependabot.com&gt; Co-authored-by: dependabot-preview[bot] &lt;27856297+dependabot-preview[bot]@users.noreply.github.com&gt;</MESSAGE>
      <SHA>93591ac3b53d57112f04845786e3d3bfb11cadb6</SHA>
      <PATCHEDFILES>
        <FILE>package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Use our own shiny new ambassador since the current one was broken. Fixes #73.</MESSAGE>
      <SHA>0aa1cda9973b135322f9d9027baeddc9618803ee</SHA>
      <PATCHEDFILES>
        <FILE>doc/DEPLOYMENT.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
