<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>288</ISSUENO>
  <ISSUEURL>https://github.com/nocodb/nocodb/issues/288</ISSUEURL>
  <TITLE>Swagger UI doesn't use NC_PUBLIC_URL</TITLE>
  <DESCRIPTION>**Please enter the following details** Node: **v12.22.1** Arch: **x64** Platform: **linux** Docker: **true** Database: **pg** ProjectOnRootDB: **false** RootDB: **mysql2** PackageVersion: **0.9.33** **Steps To Reproduce** 1. Run NocoDB using Docker, and set the NC_PUBLIC_URL environment variable (e.g. `NC_PUBIC_URL=https://nocodb.example.com`). Serve the site at that URL using a reverse proxy. 2. From NocoDB (at the public URL), click avatar &gt; Swagger APIs Doc to open the Swagger UI 3. Despite being served from the public URL, Swagger shows the base URL as localhost:8080, which causes the endpoints to fail when tested. **Expected behavior** I would expect Swagger to use the public URL to generate the REST endpoints. **Screenshots** ![image](https://user-images.githubusercontent.com/2007008/122275796-1a8ed180-ceb2-11eb-9146-0ccbd5886d94.png) ![image](https://user-images.githubusercontent.com/2007008/122275858-2d090b00-ceb2-11eb-838d-e7f85ab628b2.png)</DESCRIPTION>
  <REPONAME>nocodb</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>chore: Enable build minify option Signed-off-by: Pranav C Balan &lt;pranavxc@gmail.com&gt;</MESSAGE>
    <SHA>fd81db36ef619bfa19e2a6d17ec9c6ff47c34b10</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: Generate swagger host and scheme genarated swagger scheme and host based on `NC_PUBLIC_URL` environment variable fixes #288 Signed-off-by: Pranav C Balan &lt;pranavxc@gmail.com&gt;</MESSAGE>
      <SHA>34fb9205d6a72c317da66d98781d206db703bc69</SHA>
      <PATCHEDFILES>
        <FILE>packages/nocodb/src/lib/noco/rest/RestApiBuilder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #288 from nocodb/develop-sync Develop sync</MESSAGE>
      <SHA>d8d83ea05f81dafad507a73cdd78bf3238b9b63e</SHA>
      <PATCHEDFILES>
        <FILE>packages/nc-gui/components/cell/Checkbox.vue</FILE>
        <FILE>packages/nc-gui/components/cell/attachment/Image.vue</FILE>
        <FILE>packages/nc-gui/components/dlg/TableCreate.vue</FILE>
        <FILE>packages/nc-gui/components/smartsheet/Cell.vue</FILE>
        <FILE>packages/nc-gui/components/smartsheet/DivDataCell.vue</FILE>
        <FILE>packages/nc-gui/components/smartsheet/Form.vue</FILE>
        <FILE>packages/nc-gui/components/smartsheet/TableDataCell.vue</FILE>
        <FILE>packages/nc-gui/components/smartsheet/expanded-form/index.vue</FILE>
        <FILE>packages/nc-gui/components/template/Editor.vue</FILE>
        <FILE>packages/nc-gui/components/template/utils.ts</FILE>
        <FILE>packages/nc-gui/composables/useAttachment.ts</FILE>
        <FILE>packages/nc-gui/composables/useGlobal/actions.ts</FILE>
        <FILE>packages/nc-gui/lang/pt_BR.json</FILE>
        <FILE>packages/nc-gui/lang/zh-Hans.json</FILE>
        <FILE>packages/nc-gui/package-lock.json</FILE>
        <FILE>packages/nc-gui/pages/[projectType]/form/[viewId]/index/index.vue</FILE>
        <FILE>packages/nc-gui/pages/[projectType]/form/[viewId]/index/survey.vue</FILE>
        <FILE>packages/nc-lib-gui/package.json</FILE>
        <FILE>packages/noco-docs/content/en/developer-resources/rest-apis.md</FILE>
        <FILE>packages/noco-docs/content/en/developer-resources/sdk.md</FILE>
        <FILE>packages/noco-docs/content/en/getting-started/upgrading.md</FILE>
        <FILE>packages/noco-docs/content/en/index.md</FILE>
        <FILE>packages/noco-docs/content/en/setup-and-usages/meta-management.md</FILE>
        <FILE>packages/noco-docs/content/en/setup-and-usages/table-operations.md</FILE>
        <FILE>packages/nocodb-sdk/package-lock.json</FILE>
        <FILE>packages/nocodb-sdk/package.json</FILE>
        <FILE>packages/nocodb-sdk/src/lib/Api.ts</FILE>
        <FILE>packages/nocodb/docker-compose.yml</FILE>
        <FILE>packages/nocodb/package-lock.json</FILE>
        <FILE>packages/nocodb/package.json</FILE>
        <FILE>packages/nocodb/src/lib/cache/CacheMgr.ts</FILE>
        <FILE>packages/nocodb/src/lib/cache/NocoCache.ts</FILE>
        <FILE>packages/nocodb/src/lib/cache/RedisCacheMgr.ts</FILE>
        <FILE>packages/nocodb/src/lib/cache/RedisMockCacheMgr.ts</FILE>
        <FILE>packages/nocodb/src/lib/controllers/publicControllers/publicData.ctl.ts</FILE>
        <FILE>packages/nocodb/src/lib/controllers/user/user.ctl.ts</FILE>
        <FILE>packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/BaseModelSqlv2.ts</FILE>
        <FILE>packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/formulav2/formulaQueryBuilderv2.ts</FILE>
        <FILE>packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/functionMappings/pg.ts</FILE>
        <FILE>packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/helpers/convertDateFormat.ts</FILE>
        <FILE>packages/nocodb/src/lib/db/sql-data-mapper/lib/sql/helpers/formulaFnHelper.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Base.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Column.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Filter.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/FormViewColumn.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/GalleryViewColumn.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/GridViewColumn.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Hook.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/HookFilter.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/KanbanViewColumn.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/MapViewColumn.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Model.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/ModelRoleVisibility.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Page.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Plugin.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Project.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/ProjectUser.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/SelectOption.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/Sort.ts</FILE>
        <FILE>packages/nocodb/src/lib/models/View.ts</FILE>
        <FILE>packages/nocodb/src/lib/plugins/vultr/Vultr.ts</FILE>
        <FILE>packages/nocodb/src/lib/plugins/vultr/index.ts</FILE>
        <FILE>packages/nocodb/src/lib/services/attachment.svc.ts</FILE>
        <FILE>packages/nocodb/src/lib/services/dbData/index.ts</FILE>
        <FILE>packages/nocodb/src/lib/services/public/publicData.svc.ts</FILE>
        <FILE>packages/nocodb/src/lib/services/test/TestResetService/resetMetaSakilaSqliteProject.ts</FILE>
        <FILE>packages/nocodb/src/lib/services/user/index.ts</FILE>
        <FILE>packages/nocodb/src/schema/swagger.json</FILE>
        <FILE>tests/playwright/pages/Dashboard/common/Cell/index.ts</FILE>
        <FILE>tests/playwright/tests/columnFormula.spec.ts</FILE>
        <FILE>tests/playwright/tests/megaTable.spec.ts</FILE>
        <FILE>tests/playwright/tests/viewGridShare.spec.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
