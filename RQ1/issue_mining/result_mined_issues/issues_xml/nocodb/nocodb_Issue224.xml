<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>224</ISSUENO>
  <ISSUEURL>https://github.com/nocodb/nocodb/issues/224</ISSUEURL>
  <TITLE>Bug: Renaming a ForeignField causes not showing the table</TITLE>
  <DESCRIPTION>Hey folks! If I rename a ForeignField the whole table couldn't get displayed anymore. It only shows the loading table: ![Screenshot 2021-06-03 at 12 21 34](https://user-images.githubusercontent.com/5264141/120629623-49468a00-c466-11eb-8745-b9f451c7344e.png) I investigated that a bit and it looks like there were some fields in the meta column of the nc_models table: The current meta table looks like that: ``` { &quot;tn&quot;: &quot;xa3__contact&quot;, &quot;_tn&quot;: &quot;Contact&quot;, &quot;columns&quot;: [ { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;id&quot;, &quot;_cn&quot;: &quot;id&quot;, &quot;type&quot;: &quot;integer&quot;, &quot;dt&quot;: &quot;int4&quot;, &quot;uidt&quot;: &quot;ID&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;integer&quot;, &quot;ct&quot;: &quot;int(11)&quot;, &quot;nrqd&quot;: false, &quot;rqd&quot;: true, &quot;ck&quot;: false, &quot;pk&quot;: true, &quot;un&quot;: false, &quot;ai&quot;: true, &quot;cdf&quot;: null, &quot;clen&quot;: null, &quot;np&quot;: 11, &quot;ns&quot;: 0, &quot;dtxp&quot;: &quot;11&quot;, &quot;dtxs&quot;: &quot;&quot;, &quot;tn&quot;: &quot;xa3__contact&quot; }, { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;created_at&quot;, &quot;_cn&quot;: &quot;created_at&quot;, &quot;type&quot;: &quot;timestamp&quot;, &quot;dt&quot;: &quot;timestamp&quot;, &quot;uidt&quot;: &quot;CreateTime&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;specificType&quot;, &quot;ct&quot;: &quot;varchar(45)&quot;, &quot;nrqd&quot;: true, &quot;rqd&quot;: false, &quot;ck&quot;: false, &quot;pk&quot;: false, &quot;un&quot;: false, &quot;ai&quot;: false, &quot;cdf&quot;: &quot;now()&quot;, &quot;clen&quot;: 45, &quot;np&quot;: null, &quot;ns&quot;: null, &quot;dtxp&quot;: &quot;&quot;, &quot;dtxs&quot;: &quot;&quot;, &quot;default&quot;: &quot;now()&quot;, &quot;columnDefault&quot;: &quot;now()&quot; }, { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;updated_at&quot;, &quot;_cn&quot;: &quot;updated_at&quot;, &quot;type&quot;: &quot;timestamp&quot;, &quot;dt&quot;: &quot;timestamp&quot;, &quot;uidt&quot;: &quot;LastModifiedTime&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;specificType&quot;, &quot;ct&quot;: &quot;varchar(45)&quot;, &quot;nrqd&quot;: true, &quot;rqd&quot;: false, &quot;ck&quot;: false, &quot;pk&quot;: false, &quot;un&quot;: false, &quot;ai&quot;: false, &quot;au&quot;: true, &quot;cdf&quot;: &quot;now()&quot;, &quot;clen&quot;: 45, &quot;np&quot;: null, &quot;ns&quot;: null, &quot;dtxp&quot;: &quot;&quot;, &quot;dtxs&quot;: &quot;&quot;, &quot;default&quot;: &quot;now()&quot;, &quot;columnDefault&quot;: &quot;now()&quot; }, { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;first_name&quot;, &quot;_cn&quot;: &quot;first_name&quot;, &quot;type&quot;: &quot;string&quot;, &quot;dt&quot;: &quot;character varying&quot;, &quot;uidt&quot;: &quot;SingleLineText&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;specificType&quot;, &quot;ct&quot;: &quot;integer(11)&quot;, &quot;nrqd&quot;: true, &quot;rqd&quot;: true, &quot;ck&quot;: false, &quot;pk&quot;: false, &quot;un&quot;: false, &quot;ai&quot;: false, &quot;cdf&quot;: null, &quot;clen&quot;: 45, &quot;np&quot;: null, &quot;ns&quot;: null, &quot;cno&quot;: &quot;title4&quot;, &quot;tn&quot;: &quot;xa3__contact&quot; }, { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;last_name&quot;, &quot;_cn&quot;: &quot;last_name&quot;, &quot;type&quot;: &quot;string&quot;, &quot;dt&quot;: &quot;character varying&quot;, &quot;uidt&quot;: &quot;SingleLineText&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;specificType&quot;, &quot;ct&quot;: &quot;integer(11)&quot;, &quot;nrqd&quot;: true, &quot;rqd&quot;: false, &quot;ck&quot;: false, &quot;pk&quot;: false, &quot;un&quot;: false, &quot;ai&quot;: false, &quot;cdf&quot;: null, &quot;clen&quot;: 45, &quot;np&quot;: null, &quot;ns&quot;: null, &quot;cno&quot;: &quot;title5&quot;, &quot;tn&quot;: &quot;xa3__contact&quot; }, { &quot;validate&quot;: { &quot;func&quot;: [], &quot;args&quot;: [], &quot;msg&quot;: [] }, &quot;cn&quot;: &quot;company&quot;, &quot;_cn&quot;: &quot;company&quot;, &quot;type&quot;: &quot;integer&quot;, &quot;dt&quot;: &quot;int4&quot;, &quot;uidt&quot;: &quot;ForeignKey&quot;, &quot;uip&quot;: &quot;&quot;, &quot;uicn&quot;: &quot;&quot;, &quot;dtx&quot;: &quot;specificType&quot;, &quot;ct&quot;: &quot;integer(11)&quot;, &quot;nrqd&quot;: true, &quot;rqd&quot;: false, &quot;ck&quot;: false, &quot;pk&quot;: false, &quot;un&quot;: false, &quot;ai&quot;: false, &quot;cdf&quot;: null, &quot;clen&quot;: 45, &quot;np&quot;: null, &quot;ns&quot;: null, &quot;dtxp&quot;: &quot;11&quot;, &quot;dtxs&quot;: &quot;&quot;, &quot;cno&quot;: &quot;company&quot;, &quot;tn&quot;: &quot;xa3__contact&quot; } ], &quot;pks&quot;: [], &quot;hasMany&quot;: [ { &quot;ur&quot;: &quot;CASCADE&quot;, &quot;tn&quot;: &quot;xa3__address&quot;, &quot;_tn&quot;: &quot;Address&quot;, &quot;cn&quot;: &quot;contact&quot;, &quot;_cn&quot;: null, &quot;rtn&quot;: &quot;xa3__contact&quot;, &quot;rcn&quot;: &quot;id&quot;, &quot;_rcn&quot;: null, &quot;_rtn&quot;: &quot;Contact&quot;, &quot;type&quot;: &quot;real&quot;, &quot;db_type&quot;: &quot;pg&quot;, &quot;dr&quot;: &quot;CASCADE&quot; }, { &quot;ur&quot;: &quot;CASCADE&quot;, &quot;tn&quot;: &quot;xa3__email_address&quot;, &quot;_tn&quot;: &quot;EmailAddress&quot;, &quot;cn&quot;: &quot;contact&quot;, &quot;_cn&quot;: null, &quot;rtn&quot;: &quot;xa3__contact&quot;, &quot;rcn&quot;: &quot;id&quot;, &quot;_rcn&quot;: null, &quot;_rtn&quot;: &quot;Contact&quot;, &quot;type&quot;: &quot;real&quot;, &quot;db_type&quot;: &quot;pg&quot;, &quot;dr&quot;: &quot;CASCADE&quot; } ], &quot;belongsTo&quot;: [ { &quot;ur&quot;: &quot;CASCADE&quot;, &quot;tn&quot;: &quot;xa3__contact&quot;, &quot;_tn&quot;: &quot;Contact&quot;, &quot;cn&quot;: &quot;company&quot;, &quot;_cn&quot;: null, &quot;rtn&quot;: &quot;xa3__company&quot;, &quot;rcn&quot;: &quot;id&quot;, &quot;_rcn&quot;: null, &quot;_rtn&quot;: &quot;Company&quot;, &quot;type&quot;: &quot;real&quot;, &quot;db_type&quot;: &quot;pg&quot;, &quot;dr&quot;: &quot;CASCADE&quot; } ], &quot;dbType&quot;: &quot;pg&quot;, &quot;type&quot;: &quot;table&quot; } ``` I tested it by renaming the field `company` to `compana` and it looks like there are some fields, which do not get renamed. I hope it helps :)</DESCRIPTION>
  <REPONAME>nocodb</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #223 from wingkwong/master fix: add missing nodemon to devDependencies</MESSAGE>
    <SHA>c018c88e5b16ee4c212ddae34b1750cd447f1470</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix(api): fix foreign key / primary key column rename bug Update column name in metadata relations list fix #224 Signed-off-by: Pranav C Balan &lt;pranavxc@gmail.com&gt;</MESSAGE>
      <SHA>26ab7190e082a153d3ee695639654045b9d996a5</SHA>
      <PATCHEDFILES>
        <FILE>packages/nocodb/src/lib/noco/common/BaseApiBuilder.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
