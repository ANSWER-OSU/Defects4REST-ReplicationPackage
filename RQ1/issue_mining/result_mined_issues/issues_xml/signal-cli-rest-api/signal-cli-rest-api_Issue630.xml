<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>630</ISSUENO>
  <ISSUEURL>https://github.com/bbernhard/signal-cli-rest-api/issues/630</ISSUEURL>
  <TITLE>Nested styled text not working</TITLE>
  <DESCRIPTION>### The problem Currently it appears that it is not possible to send messages using nested styled text. For example text that is both spoiler and monospaced. For example: ``` curl -k -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;message&quot;: &quot;||spoiler only||&quot;, &quot;number&quot;: &quot;redacted&quot;, &quot;recipients&quot;: [&quot;redacted&quot;], &quot;text_mode&quot;: &quot;styled&quot;}' 'redacted/v2/send' ``` This returns spoiler correctly. ``` curl -k -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;message&quot;: &quot;`monospace only`&quot;, &quot;number&quot;: &quot;redacted&quot;, &quot;recipients&quot;: [&quot;redacted&quot;], &quot;text_mode&quot;: &quot;styled&quot;}' 'redacted/v2/send' ``` This returns monospace correctly. ``` curl -k -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;message&quot;: &quot;||`spoiler and monospace`||&quot;, &quot;number&quot;: &quot;redacted&quot;, &quot;recipients&quot;: [&quot;redacted&quot;], &quot;text_mode&quot;: &quot;styled&quot;}' 'redacted/v2/send' ``` However when combining both options only spoiler is visible. Combining styles is possible in Signal app. Would it be possible to allow these nested styles? Or is it possible now but requires some special escaping? ### Are you using the latest released version? - [X] Yes ### Have you read the troubleshooting page? - [X] Yes ### What type of installation are you running? signal-cli-rest-api Docker Container ### In which mode are you using the docker container? Normal Mode ### What's the architecture of your host system? x86-64 ### Additional information _No response_</DESCRIPTION>
  <REPONAME>signal-cli-rest-api</REPONAME>
  <TIMEDIFFERENCEDAYS>36</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fixed signal-cli-native version</MESSAGE>
    <SHA>54c884c06e083360ac62fb0183ce025acd9371ac</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>added new TextstyleParser implementation * the old implementation was cumbersome to maintain and had some problems with nested formatting. see #630</MESSAGE>
      <SHA>f0a49e6aacc86ca2f11fd672a9bd4920f1cb5fdc</SHA>
      <PATCHEDFILES>
        <FILE>Dockerfile</FILE>
        <FILE>src/client/client.go</FILE>
        <FILE>src/utils/textstyleparser.go</FILE>
        <FILE>src/utils/textstyleparser_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
