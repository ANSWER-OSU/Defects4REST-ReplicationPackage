<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19931</ISSUENO>
  <ISSUEURL>https://github.com/supabase/supabase/issues/19931</ISSUEURL>
  <TITLE>Syntax error in storage helper functions example</TITLE>
  <DESCRIPTION># Improve documentation ## Link [Storage Helper Functions](https://supabase.com/docs/guides/storage/schema/helper-functions) ## Describe the problem Running the statement to create policy &quot;Allow authenticated uploads&quot; from this docs page generates a syntax error. code: ``` create policy &quot;Allow authenticated uploads&quot; on storage.objects for insert to authenticated with check ( storage.foldername(name)[1] = 'private' ); ``` running this query results in this syntax error: ``` ERROR: syntax error at or near &quot;[&quot; (SQLSTATE 42601) At statement 1: create policy &quot;Allow authenticated uploads&quot; storage.foldername(name)[1] = 'private' ) ``` ## Describe the improvement changing the statement to ``` create policy &quot;Allow authenticated uploads&quot; on storage.objects for insert to authenticated with check ( (storage.foldername(name))[1] = 'private' ); ``` resolves the syntax error. The only change is putting the function in parenthesis. ## Additional context This code was tested on local development in two ways: 1. running the statement in the SQL Editor on my local dev Supabase dashboard. 2. applying a migration containing the statement to my local dev Supabase instance (supabase db reset) with both testing methods, the syntax error was generated by the doc's code, but the amended code generated no error. The other functions on this docs page do not generate any syntax errors.</DESCRIPTION>
  <REPONAME>supabase</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fixed: Syntax error in storage helper functions example</MESSAGE>
    <SHA>cb7b55d62a89ac651d873ecbd7215200dd6f788d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch 'master' into Abhijeet-#19931</MESSAGE>
      <SHA>42102f6cda7b487526bc5cf14b94f2f718feb074</SHA>
      <PATCHEDFILES>
        <FILE>apps/docs/components/Navigation/NavigationMenu/NavigationMenu.constants.ts</FILE>
        <FILE>apps/docs/pages/_app.tsx</FILE>
        <FILE>apps/docs/pages/guides/auth/auth-hooks.mdx</FILE>
        <FILE>apps/docs/pages/guides/auth/server-side/creating-a-client.mdx</FILE>
        <FILE>apps/docs/pages/guides/realtime/guides/client-side-throttling.mdx</FILE>
        <FILE>apps/docs/pages/guides/resources/migrating-to-supabase/mssql.mdx</FILE>
        <FILE>apps/docs/pages/guides/storage/production/scaling.mdx</FILE>
        <FILE>apps/docs/pages/guides/storage/serving/image-transformations.mdx</FILE>
        <FILE>apps/studio/components/interfaces/Database/Tables/TableList.tsx</FILE>
        <FILE>apps/studio/components/interfaces/SQLEditor/SQLEditor.constants.ts</FILE>
        <FILE>apps/studio/data/tables/tables-query.ts</FILE>
        <FILE>apps/www/_blog/2023-12-19-launch-week-x-best-launches.mdx</FILE>
        <FILE>apps/www/components/BuiltWithSupabase/index.tsx</FILE>
        <FILE>apps/www/components/CustomerStories/index.tsx</FILE>
        <FILE>apps/www/components/ExampleCard.tsx</FILE>
        <FILE>apps/www/components/Panel/Panel.tsx</FILE>
        <FILE>apps/www/components/Sections/GithubExamples.tsx</FILE>
        <FILE>apps/www/data/CustomerStories.ts</FILE>
        <FILE>apps/www/data/Examples.json</FILE>
        <FILE>apps/www/data/Examples.ts</FILE>
        <FILE>apps/www/pages/index.tsx</FILE>
        <FILE>apps/www/public/customers-rss.xml</FILE>
        <FILE>packages/shared-data/products.ts</FILE>
        <FILE>packages/ui/src/components/GlassPanel/GlassPanel.tsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
