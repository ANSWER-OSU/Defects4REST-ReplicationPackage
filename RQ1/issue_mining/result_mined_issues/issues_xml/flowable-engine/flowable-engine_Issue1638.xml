<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1638</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/1638</ISSUEURL>
  <TITLE>NullPointerException when saving response as JSON but the response returns no body</TITLE>
  <DESCRIPTION>When in the Flowable Modeler the field &quot;Save response as JSON&quot; is set to true and the response has no body content (e.g. with the DELETE request method), a NullPointerException is thrown: ``` Caused by: java.lang.NullPointerException at com.fasterxml.jackson.core.JsonFactory.createParser(JsonFactory.java:889) ~[jackson-core-2.9.8.jar:2.9.8] at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:2551) ~[jackson-databind-2.9.8.jar:2.9.8] at org.flowable.http.HttpActivityExecutor.execute(HttpActivityExecutor.java:117) ~[flowable-http-6.4.1.jar:6.4.1] ... 136 more ``` The error refers to [HttpActivityExecutor.java:117](https://github.com/flowable/flowable-engine/blob/fa3b90ac134e66dada89c521aab53681dd7174cf/modules/flowable-http/src/main/java/org/flowable/http/HttpActivityExecutor.java#L117): ``` Object varValue = request.isSaveResponseAsJson() ? objectMapper.readTree(response.getBody()) : response.getBody(); ``` where `response.getBody()` returns `null` and pass it to `readTree()`.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>72</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'master' of https://github.com/flowable/flowable-engine into upstream-master</MESSAGE>
    <SHA>f4b55b0f386f62fffb1e6bb318badd1833ecc7bf</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#1638 adding null check before json body parsing</MESSAGE>
      <SHA>29048f3b003a3ec3d69b3e14b90615974c8ed27d</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-http/src/main/java/org/flowable/http/HttpActivityExecutor.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTest.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTestServer.java</FILE>
        <FILE>modules/flowable-http/src/test/resources/org/flowable/http/bpmn/HttpServiceTaskTest.testDeleteResponseEmptyBody.bpmn20.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#1638 adding null check before json body parsing</MESSAGE>
      <SHA>ed1f609eca7a511dd81b0ee4fbfb529506dab0dc</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-http/src/main/java/org/flowable/http/HttpActivityExecutor.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTest.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTestServer.java</FILE>
        <FILE>modules/flowable-http/src/test/resources/org/flowable/http/bpmn/HttpServiceTaskTest.testDeleteResponseEmptyBody.bpmn20.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#1638 adding null check before json body parsing (#1682)</MESSAGE>
      <SHA>206a46163e0d0188fe4cdfc775b9189ad1003781</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-http/src/main/java/org/flowable/http/HttpActivityExecutor.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTest.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/bpmn/HttpServiceTaskTestServer.java</FILE>
        <FILE>modules/flowable-http/src/test/resources/org/flowable/http/bpmn/HttpServiceTaskTest.testDeleteResponseEmptyBody.bpmn20.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
