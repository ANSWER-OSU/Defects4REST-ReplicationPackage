<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>575</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/575</ISSUEURL>
  <TITLE>Unable to bind Headers to a Http task</TITLE>
  <DESCRIPTION>Unable to bind the http headers to an Http task with keys that have a : as a value. When we look at the exception stack (detailed below) and check line 264 of the code, it has a check that prevents values of http headers from having a colon in it (Code snippet also included below). HTTP_TASK_REQUEST_HEADERS_INVALID = requestHeaders are invalid Stack: org.flowable.engine.common.api.FlowableException: requestHeaders are invalid at org.flowable.http.impl.HttpActivityBehaviorImpl.setHeaders(HttpActivityBehaviorImpl.java:264) ~[flowable-http-6.1.2.jar:6.1.2] Code from HttpActivityBehaviorImpl protected void setHeaders(final HttpMessage base, final String headers) throws IOException { try (BufferedReader reader = new BufferedReader(new StringReader(headers))) { String line = reader.readLine(); while (line != null) { String[] header = line.split(&quot;:&quot;); if (header.length == 2) { base.addHeader(header[0], header[1]); line = reader.readLine(); } else { throw new FlowableException(HTTP_TASK_REQUEST_HEADERS_INVALID); } } } } Sample Header that we are passing host:localhost:7000 connection:keep-alive content-length:48 postman-token:ffff44c7-e789-ba46-2f5a-8271b4dd7aba cache-control:no-cache origin:chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop user-agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36 content-type:application/json accept:/ accept-encoding:gzip, deflate, br accept-language:en-US,en;q=0.8</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Use FlowableEngineEntityEvent instead of FlowableEntityEvent in AbstractFlowableEngineEventListener. (#571) The FlowableEntityEvent interface does not extend the FlowableEngineEvent interface which prevents calling the getExecution method in some methods without casting. Updating the methods to use FlowableEngineEntityEvent instead. Change-Id: I7c2ecf682a4a836a70a2cc8ebe8984578f2180e4</MESSAGE>
    <SHA>f55ef076ed9c607efcdef5a7ee329c6858c37f59</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Correctly bind headers Each header line is split only on first ':' everything before ':' is considered as name and everything after as value Fixes #575</MESSAGE>
      <SHA>7c59ba872725ab9b93c2a63272828e6da163ba2a</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-http/src/main/java/org/flowable/http/impl/HttpActivityBehaviorImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Correctly bind headers Each header line is split only on first ':' everything before ':' is considered as name and everything after as value Fixes #575</MESSAGE>
      <SHA>f87eea86e17b50eb31fd4f82ad9c8f60464347db</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-http/src/main/java/org/flowable/http/impl/HttpActivityBehaviorImpl.java</FILE>
        <FILE>modules/flowable-http/src/test/java/org/flowable/http/HttpServiceTaskTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
