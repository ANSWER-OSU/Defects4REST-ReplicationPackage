<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1586</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/1586</ISSUEURL>
  <TITLE>SaveContentItemCmd in the content engine does not delete old content data when resetting content data for an item</TITLE>
  <DESCRIPTION>The SaveContentItemCmd in the Content Engine https://github.com/flowable/flowable-engine/blob/master/modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java does not delete old content data when invoked repeatedly for the same `contentItem` with `inputData` not null. This leads to the old data being leaked in the ContentStorage without any item owning it. I will fix this by updating the data from the ContentStorage if it already existed rather than inserting new data and will submit a pull request.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>926</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Added SimpleDatabaseContentStorage as alternative to SimpleFileSystemContentStorage.</MESSAGE>
    <SHA>5eebc799df9ff0553cd66446a10e55258eaa2c57</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>9387baaf62e4ef597d65279a85693f8d545c0415</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>8a0431cedb24319a4e85f342f8e0db0cee80bd5a</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>4900f48568ec89b6ef8d2afcfaef5633e713cfd2</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>84db770da5f5b443248188e3c4a830e0a029bf2c</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>efebe8db4c859ab8c2566b5946c8ab00b0d59f00</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>7c483343254a2e7b5e55c560f7a977914dea6d26</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>f6b4cf21533f347bf2eb73475cdbd2dc4f2a606f</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>489b63d32b377a35f3f55bfe8faeb711293950d6</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>47ebc4352a6d7ea1a4b5ea35430616a5d168c47b</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>5e62cc7a63ddc9ed39cc3970d2be72d4afef9f6d</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>dd7a636d84c2a2b19141255cceda08a59a18c8d5</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>1d9c7a316b91218f0ce3487028eb8c7287a70dec</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>15cefdb5668614992b3d31fe6f48caa528c8f4a3</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>4c13912db5db28815617fa30c55398e00280e9d0</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>8db9b64b73f19abc700807d177d2f508bb99567a</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>4a8f5bbd350cda1493381638f496a48e57728f53</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>9487a3b13723186114ac2a8c0df88901745478fe</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed ContentStorage leak when changing the Data associated with an existing Item in the Content Engine. Fixes bug https://github.com/flowable/flowable-engine/issues/1586</MESSAGE>
      <SHA>998449e4fdb0314382d67ce7dc7ea2fc74f40066</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-content-engine/src/main/java/org/flowable/content/engine/impl/cmd/SaveContentItemCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
