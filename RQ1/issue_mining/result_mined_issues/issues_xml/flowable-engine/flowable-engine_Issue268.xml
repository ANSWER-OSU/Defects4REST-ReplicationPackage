<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>268</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/268</ISSUEURL>
  <TITLE>BusinessKey is not set when starting a process instance by message</TITLE>
  <DESCRIPTION>In Flowable-engine 6.0.0 when I start a new process instance by a message then the business key I send in is not set in the process instance. This is both when using the Java API and Rest API. I have attached a small unit test displaying the problem. I Think the problem occurs in org.flowable.engine.impl.cmd.StartProcessInstanceByMessageCmd#execute(CommandContext commandContext). The businessKey is set here but not actually passed on to the ProcessInstanceHelper when the process instance is created. Process instances created using a process definition key set the business key correctly. [BusinessKeyNotSetTest.zip](https://github.com/flowable/flowable-engine/files/799482/BusinessKeyNotSetTest.zip)</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add rest test for including variables #280</MESSAGE>
    <SHA>9bbb9cab928f9a53d4e3161b3dada9e2ab1d7834</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix business key issue for message start event #268</MESSAGE>
      <SHA>af6d848546e11175556e631fffa7e4385dfad08d</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/cmd/StartProcessInstanceByMessageCmd.java</FILE>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/util/ProcessInstanceHelper.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/bpmn/event/message/MessageStartEventTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/resources/org/flowable/engine/test/bpmn/event/message/MessageStartEventTest.testBusinessKeySet.bpmn20.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
