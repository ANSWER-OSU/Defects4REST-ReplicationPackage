<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>333</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/333</ISSUEURL>
  <TITLE>NPE when trying to import several WSDLs used by different service tasks</TITLE>
  <DESCRIPTION>With a BPMN definition containing several WSDL imports as: &lt;definitions ...&gt; &lt;import location=&quot;classpath:su/multi-start/archivageService.wsdl&quot; namespace=&quot;http://petals.ow2.org/se-flowable/unit-test/multi-start/archivageService&quot; importType=&quot;http://schemas.xmlsoap.org/wsdl/&quot; /&gt; &lt;import location=&quot;classpath:su/multi-start/notifyService.wsdl&quot; namespace=&quot;http://petals.ow2.org/se-flowable/unit-test/multi-start/notifyService&quot; importType=&quot;http://schemas.xmlsoap.org/wsdl/&quot; /&gt; &lt;/definitions&gt; the following NPE occurs when associated service tasks are executed: ``` 2017/04/07 11:18:43,301 GMT+0100 SEVERE [org.flowable.engine.impl.asyncexecutor.ExecuteAsyncRunnable] : Job 19 failed java.lang.NullPointerException at org.flowable.engine.impl.bpmn.data.ItemDefinition.createInstance(ItemDefinition.java:42) at org.flowable.engine.impl.bpmn.behavior.WebServiceActivityBehavior.initializeIoSpecification(WebServiceActivityBehavior.java:177) at org.flowable.engine.impl.bpmn.behavior.WebServiceActivityBehavior.execute(WebServiceActivityBehavior.java:120) at org.flowable.engine.impl.agenda.ContinueProcessOperation.executeActivityBehavior(ContinueProcessOperation.java:197) ... ``` I think that this problem is due to the usage of a bad key nature in method `org.flowable.engine.impl.bpmn.behavior.WebServiceActivityBehavior.fillImporterInfo(...)`. The import type (WSDL, XSD, ...) is used as key for map `xmlImporterMap` (that seems exist to avoid importing the same import several times). IMO, the namespace of the import should be used as key.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add id field to DataObject (#329)</MESSAGE>
    <SHA>de73c3a46645a645eb11d7689e38f27e151d4247</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Issue #333 : NPE when trying to import several WSDLs used by different service task</MESSAGE>
      <SHA>4446589732742c7f570337eec6e5e52396b96d73</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/bpmn/behavior/WebServiceActivityBehavior.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
