<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2788</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/2788</ISSUEURL>
  <TITLE>DMN Decision Table Date related collection functions</TITLE>
  <DESCRIPTION>When using a Date input variable in the DMN decision table and creating a rule use collection related operators an exception can occur while executing the decision table. This is should not be the case. There is transformation logic in place which can instantiate collection during runtime based on the strings in the rule expression. This provides the flexibility to create collections with string literals in the decision table editor. In the current transformation logic the case of using a Date object is not covered. It always tries to convert based on the `.toString` value. This is incorrect and should be fixed.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>13</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Improve parallel multi instance leave to avoid optimistic locking exceptions Store number of completed and active instances for a parallel multi instance behaviour as a custom variable type that doesn't need updates and can be computed. Doing this remove the optimistic locking exceptions when multiple parallel executions complete in the same time. Perform leave logic check in an exclusive asynchronous job in order to avoid the lock on the parent scope when parallel multi instance executions complete. This allows executing non exclusive asynchronous parallel multi instance in parallel without an exception being thrown.</MESSAGE>
    <SHA>65f81864904a2aa565adfa2a350a459d3bb0a893</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2788 fixes issue when using Date input variables and collection operations in DMN decision tables</MESSAGE>
      <SHA>f76cf6803ad81546e93916b00470225143604ea4</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DMNParseUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DateUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/java/org/flowable/dmn/engine/test/runtime/CollectionsContainsTest.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN.dmn</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN_types.dmn</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#2788 added java.time.LocalDate to input variable pre processing (DMN decision table execution)</MESSAGE>
      <SHA>2532b23611c72e982d419216b517c0a21fba0511</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/ELExecutionContextBuilder.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Bugfix/2788 dmn date collections (#2789) * #2788 fixes issue when using Date input variables and collection operations in DMN decision tables * #2788 added java.time.LocalDate to input variable pre processing (DMN decision table execution)</MESSAGE>
      <SHA>a412833a95428dd8fa2a0a0ccb449832483ea9bc</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/ELExecutionContextBuilder.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DMNParseUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DateUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/java/org/flowable/dmn/engine/test/runtime/CollectionsContainsTest.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN.dmn</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN_types.dmn</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Bugfix/2788 dmn date collections (#2789) * #2788 fixes issue when using Date input variables and collection operations in DMN decision tables * #2788 added java.time.LocalDate to input variable pre processing (DMN decision table execution)</MESSAGE>
      <SHA>32881dda0682ed83a3735f5c5c8076e16fcd834c</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/ELExecutionContextBuilder.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DMNParseUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/main/java/org/flowable/dmn/engine/impl/el/util/DateUtil.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/java/org/flowable/dmn/engine/test/runtime/CollectionsContainsTest.java</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN.dmn</FILE>
        <FILE>modules/flowable-dmn-engine/src/test/resources/org/flowable/dmn/engine/test/runtime/contains_IN_types.dmn</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
