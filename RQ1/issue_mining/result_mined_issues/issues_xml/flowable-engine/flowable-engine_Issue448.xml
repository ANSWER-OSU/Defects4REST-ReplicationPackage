<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>448</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/448</ISSUEURL>
  <TITLE>Recording of task events for user identity links is inconsistent</TITLE>
  <DESCRIPTION>Given a user task and calling `taskService.claim('1', 'flowable')`, flowable will add a comment with action `AddUserLink`. Calling `taskService.unclaim('1')` should create a `DeleteUserlink`comment, but doesn't. This leads to the recording of an incorrect task history. I would suggest maybe removing the add*IdentityLinkComment() methods from the HistoryManager interface and moving all of that logic into the AbstractHistoryManager.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>18</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix documentation formatting for HTTP task (#451)</MESSAGE>
    <SHA>b596fd400e025406c886a1e8c91d56f5c55a3b8f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Recording of task events for user identity links is inconsistent (#448)</MESSAGE>
      <SHA>3bc7dc754c20e649ca96848944a39e82905126e0</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/cmd/AddIdentityLinkCmd.java</FILE>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/cmd/ClaimTaskCmd.java</FILE>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/history/AbstractHistoryManager.java</FILE>
        <FILE>modules/flowable-engine/src/main/java/org/flowable/engine/impl/history/HistoryManager.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/task/TaskIdentityLinksTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/cfg/executioncount/VerifyDatabaseOperationsTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
