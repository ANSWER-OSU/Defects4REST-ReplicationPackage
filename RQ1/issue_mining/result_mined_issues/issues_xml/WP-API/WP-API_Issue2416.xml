<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2416</ISSUENO>
  <ISSUEURL>https://github.com/WP-API/WP-API/issues/2416</ISSUEURL>
  <TITLE>Only include Post data on the response object when declared in schema</TITLE>
  <DESCRIPTION>This is what our code path looks like currently: ``` setup_postdata( $post ); // Base fields for every post. $data = array( 'id' =&gt; $post-&gt;ID, 'date' =&gt; $this-&gt;prepare_date_response( $post-&gt;post_date_gmt, $post-&gt;post_date ), 'date_gmt' =&gt; $this-&gt;prepare_date_response( $post-&gt;post_date_gmt ), 'guid' =&gt; array( /** This filter is documented in wp-includes/post-template.php */ 'rendered' =&gt; apply_filters( 'get_the_guid', $post-&gt;guid ), 'raw' =&gt; $post-&gt;guid, ), 'modified' =&gt; $this-&gt;prepare_date_response( $post-&gt;post_modified_gmt, $post-&gt;post_modified ), 'modified_gmt' =&gt; $this-&gt;prepare_date_response( $post-&gt;post_modified_gmt ), 'password' =&gt; $post-&gt;post_password, 'slug' =&gt; $post-&gt;post_name, 'status' =&gt; $post-&gt;post_status, 'type' =&gt; $post-&gt;post_type, 'link' =&gt; get_permalink( $post-&gt;ID ), ); $schema = $this-&gt;get_item_schema(); if ( ! empty( $schema['properties']['title'] ) ) { $data['title'] = array( 'raw' =&gt; $post-&gt;post_title, 'rendered' =&gt; get_the_title( $post-&gt;ID ), ); } ``` If I remove `title` as a property from the schema, it's not included in the response. However, if I remove `password` from schema properties, it's still included on the response object. I'd expect the response object would only have fields declared in the schema, or at least that WP REST API wouldn't blindly add database data to the response if was purposefully removed from the schema.</DESCRIPTION>
  <REPONAME>WP-API</REPONAME>
  <TIMEDIFFERENCEDAYS>34</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #2470 from WP-API/conditional-term-output-schema Conditionally model the term response based on its schema</MESSAGE>
    <SHA>25b4258abb2ad66b62ded025e036642a25b83c41</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #2423 from websupporter/develop Include Post data on the response object when declared #2416</MESSAGE>
      <SHA>6e04c961597e43a9fdd3bc8c2a9e0538a06aee73</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-posts-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
