<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2758</ISSUENO>
  <ISSUEURL>https://github.com/WP-API/WP-API/issues/2758</ISSUEURL>
  <TITLE>Standardize the expected POST/PUT properties expected for schema nested objects</TITLE>
  <DESCRIPTION>In the [Posts Controller we accept POST/PUT values for `title` and `content` to be sent as `title.raw` or `content.raw`](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-posts-controller.php#L782). In this controller, we do NOT have a `santization_callback` set on the top-level `title` or `content` properties in the schema. The way the Comments Controller is setup prevents being able to pass `content.raw` to set the comment_content [because we DO have a sanitization_callback set on the top level `content` property](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-comments-controller.php#L867) in the schema. This means attempting to create or update a comment with `content.raw` set results in the following error: &gt; stripslashes() expects parameter 1 to be string, array given Some questions that need answering: 1. Do we want to limit the acceptable parameters for the nested objects? Examples: - only accept `content` and ignore `content.raw` values - only accept `content.raw` and ignore `content` values 2. Do we want to accept both top-level and `.raw` property values for the nested objects? 3. How can we modify the schema (if needed) to apply callbacks or required parameters to nested objects?</DESCRIPTION>
  <REPONAME>WP-API</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Handle special case where a comment can be updated and only change the status.</MESSAGE>
    <SHA>96c6da6ca7a9f0bc632e5d4ea4cffdc9bf3dfb36</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Remove the sanitization callback from the schema and add manually for comment_content. See https://github.com/WP-API/WP-API/issues/2758</MESSAGE>
      <SHA>8ff5a74e82c8180ed27f99466721dff5fe4ac388</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-comments-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
