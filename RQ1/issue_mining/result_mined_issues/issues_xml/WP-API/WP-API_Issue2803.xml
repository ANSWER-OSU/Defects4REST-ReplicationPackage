<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2803</ISSUENO>
  <ISSUEURL>https://github.com/WP-API/WP-API/issues/2803</ISSUEURL>
  <TITLE>/wp/v2/taxonomies object returns JSON array (not object) on invalid query</TITLE>
  <DESCRIPTION>`/wp/v2/taxonomies?type=wingding` will yield `[]`, when the default response for the endpoint is a keyed object. I presume that the object returned from the API should be consistently formed, so I raise whether we should return `{}` instead if an invalid type property is provided (or whether a descriptive error should be returned instead).</DESCRIPTION>
  <REPONAME>WP-API</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #2842 from peterwilsoncc/else-if-elseif Use `elseif` consistently.</MESSAGE>
    <SHA>fe4a14aa38ff42bea5bd8293986143d05f026b12</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Return empty taxonomy collections as JSON object, not array The response from `/wp/v2/taxonomies` is a JSON object, keyed with the name of each taxonomy. If you use the `?type=` query parameter to specify an object for which no taxonomies are available, or to specify an invalid type of object, the empty PHP `array()` will be rendered in JSON as `[]`. To ensure that the type of this resource's response remains consistent this pull request casts empty arrays to a PHP object, which will be correctly rendered as `{}` in the response JSON. Fixes #2803</MESSAGE>
      <SHA>20c5de3952ee9423e3b9aff39733e06f6e7288f0</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-taxonomies-controller.php</FILE>
        <FILE>tests/test-rest-taxonomies-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Return empty taxonomy collections as JSON object, not array The response from `/wp/v2/taxonomies` is a JSON object, keyed with the name of each taxonomy. If you use the `?type=` query parameter to specify an object for which no taxonomies are available, or to specify an invalid type of object, the empty PHP `array()` will be rendered in JSON as `[]`. To ensure that the type of this resource's response remains consistent this pull request casts empty arrays to a PHP object, which will be correctly rendered as `{}` in the response JSON. Fixes #2803</MESSAGE>
      <SHA>185608ff086d7587f42278e7df0a902e49ff425f</SHA>
      <PATCHEDFILES>
        <FILE>lib/endpoints/class-wp-rest-taxonomies-controller.php</FILE>
        <FILE>tests/test-rest-taxonomies-controller.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
