<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20425</ISSUENO>
  <ISSUEURL>https://github.com/strapi/strapi/issues/20425</ISSUEURL>
  <TITLE>Issue when trying to start strapi: Cannot find module '@aws-sdk/region-config-resolver'</TITLE>
  <DESCRIPTION>&lt;!-- Hello Thank you for submitting an issue. Before you start, please make sure your issue is understandable and reproducible. To make your issue readable make sure you use valid Markdown syntax. https://guides.github.com/features/mastering-markdown/ Please ensure you have also read and understand the contributing guide. https://github.com/strapi/strapi/blob/main/CONTRIBUTING.md#reporting-an-issue --&gt; ## Bug report ### Required System information &lt;!-- Please ensure you are using the Node LTS version (v18 or v20) --&gt; &lt;!-- Strapi v3 is no longer supported, please update to Strapi v4 --&gt; &lt;!-- If you are reporting a frontend bug please provide error logs after setting STRAPI_ENFORCE_SOURCEMAPS=true in your .env --&gt; &lt;!-- This environment variable makes frontend errors easier to read and trace --&gt; - Node.js version: v20.12.0 - NPM version: 10.5.0 - Strapi version: 4.23 - Database: Postgres - Operating system: MacOS - Is your project Javascript or Typescript: Typescript &lt;!-- Did you know you can run `yarn strapi report` or `npm run strapi report` to get this information easier? --&gt; ### Describe the bug When running `yarn develop` which kicks off `strapi develop` the command fails with `Error: Cannot find module '@aws-sdk/region-config-resolver`. This seems to be happening because the `strapi/plugin-upload` plugin uses a version of `@aws-sdk/client-s3` which relies on a broken version of `@aws-sdk/token-providers` ([3.433.0](https://github.com/strapi/strapi/blob/develop/yarn.lock#L784)) which is missing a requirement. See https://github.com/aws/aws-sdk-js-v3/issues/5409 for more information on the bug in `@aws-sdk/token-providers`. To me it seems like `@aws-sdk/client-s3` needs to be uploaded and everything will be fixed. ### Steps to reproduce the behavior 1. Be using the strapi upload-plugin 2. Try to run `strapi develop` 3. See error when it tries to build ### Expected behavior I expect the repo to build and the strapi development interface to come up ### Screenshots ![Screen Shot 2024-06-03 at 3 25 26 PM](https://github.com/strapi/strapi/assets/17088356/dcd7add4-0226-4901-80a8-d7b53c93d512) ### Code snippets N/A ### Additional context Add any other context about the problem here.</DESCRIPTION>
  <REPONAME>strapi</REPONAME>
  <TIMEDIFFERENCEDAYS>27</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #19579 from smorimoto/yarn-4.1.0 Yarn 4.3.1</MESSAGE>
    <SHA>84f5cfd43cfdb85f000d388b196a36d874382dab</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #20573 from Asupkay/develop fix: Update @aws-sdk/client-s3 package to fix Issue #20425</MESSAGE>
      <SHA>32b69a498c4b8b4e6a370350000636f4de46b1db</SHA>
      <PATCHEDFILES>
        <FILE>packages/providers/upload-aws-s3/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
