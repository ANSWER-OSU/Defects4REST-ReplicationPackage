<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15558</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/15558</ISSUEURL>
  <TITLE>Some tests fail depending on system timezone</TITLE>
  <DESCRIPTION>### Issue Summary On a PC set to a UTC+7 timezone, the following tests fail: - filter-test (sometimes) - gh-date-picker-test - gh-date-time-picker-test.js ### Steps to Reproduce 1. Change your system timezone to Asia/Bangkok 2. Run `yarn test` ### Ghost Version main ### Node.js Version v16.17.1 ### How did you install Ghost? From source ### Database type SQLite3 ### Browser &amp; OS version _No response_ ### Relevant log / error output ```shell Acceptance: Members filtering filtering can filter by newsletter subscription --- message: &gt; # of initial member rows: expected 6 to equal 7 Integration: Component: gh-date-picker defaults to now when @value is empty --- message: &gt; date input: expected input.gh-input.gh-datepicker-input[placeholder=&quot;YYYY-MM-DD&quot;][aria-label=&quot;Selected date&quot;][data-test-date-picker-input][type=&quot;text&quot;] to have value '2022-02-22', but the value was '2022-02-23' ``` ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update sentry-javascript monorepo to v7.14.1</MESSAGE>
    <SHA>8751245fa5b699d85b89ee102de3e8114e7fad62</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>:bug:Tests now pass on any system timezone Closes #15558 - Sometimes test members had a creation date in the future (compared to local timezone). - Date pickers tests were difficult to read and conversions to moment was potentially changing the day number for instance.</MESSAGE>
      <SHA>fc28a62dcf31a6bc779aa457ee48f4fbdbfff350</SHA>
      <PATCHEDFILES>
        <FILE>ghost/admin/mirage/factories/member.js</FILE>
        <FILE>ghost/admin/tests/integration/components/gh-date-picker-test.js</FILE>
        <FILE>ghost/admin/tests/integration/components/gh-date-time-picker-test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
