<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15251</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/15251</ISSUEURL>
  <TITLE>Manage your email preferences -&gt; undefinedghost</TITLE>
  <DESCRIPTION>### Issue Summary When I leave a comment on my blog, I get an email notification with the comment. In the footer of that email is a link to &quot;Manage your email preferences&quot;. When I click on that link, it leads me to: http://undefinedghost/#/settings/staff/ryan ### Steps to Reproduce 1. Leave a comment on a blog post 2. Wait for email notification that a comment has been posted 3. Click on &quot;Manage your email preferences&quot; in footer of email 4. Observe browser going to http://undefinedghost/#/settings/staff/username ### Ghost Version 5.9.4 ### Node.js Version 16.15 ### How did you install Ghost? Ubuntu 20.04.4 LTS ### Database type MySQL 8 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Added beta search helper implementation (#15236) refs: TryGhost/Team#1732 - We're testing out the feasibility of having a {{search}} helper that outputs an pre-styled icon to trigger search.</MESSAGE>
    <SHA>704f17ff9694b70c15a0c08eecb405e8359bdb80</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed broken email prefs link in comment emails closes: https://github.com/TryGhost/Ghost/issues/15251 - getAdminUrl is a config helper that returns the direct value from config - change to using urlJoin and urlFor helpers to generate the correct URL - not entirely happy with this fix as there's no test, but I've verified it locally</MESSAGE>
      <SHA>4acb08d0a9104a973cf6535227874408f4b0fb67</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/services/comments/emails.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed broken email prefs link in comment emails closes: https://github.com/TryGhost/Ghost/issues/15251 - getAdminUrl is a config helper that returns the direct value from config - change to using urlJoin and urlFor helpers to generate the correct URL - not entirely happy with this fix as there's no test, but I've verified it locally</MESSAGE>
      <SHA>6d53e40bd94a3993a44bf0b0df9a021050dcd120</SHA>
      <PATCHEDFILES>
        <FILE>ghost/core/core/server/services/comments/emails.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
