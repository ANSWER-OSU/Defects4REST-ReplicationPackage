<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15725</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/15725</ISSUEURL>
  <TITLE>Mailgun BATCH_SIZE with a fix value of 1000 is incompatible with new users</TITLE>
  <DESCRIPTION>### Issue Summary Hi, When you want to use Mailgun with the flex offer, they block your account to a maximum BATCH_SIZE to 10. This value is currently to defined to 1000 and cannot be overide with settings by the end user. in bulk-email-processor.js : ` module.exports = { BATCH_SIZE: MailgunClient.BATCH_SIZE, ` Could be : ` module.exports = { BATCH_SIZE: bulkEmailConfig?.mailgun?.batch_size, ` A new setting to allow the users to set a BATCH_SIZE to 10 could be great to allow Mailgun to evaluate the mail quality before to increase to 1000 the batch size. Thank-you ! ### Steps to Reproduce 1. Create a ghost instance. 2. Create a Mailgun account. 3. Add 11 members to the newsletter 4. Send a newsletter 5. Mailgun will not accept more that 10 members in the recipient. ### Ghost Version v5.19.0 ### Node.js Version v16.17.0 ### How did you install Ghost? Ghost CLI + Ghost Update ### Database type MySQL 8 ### Browser &amp; OS version _No response_ ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>359</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed 'Invalid status code: undefined' in members api (#15973) fixes https://github.com/TryGhost/Team/issues/2377 When there is an error thrown that is not a Ghost error, there is no status code in the error. Calling res.writeHead with an undefined status code, throws an error and crashes Ghost. This change fixes that and adds logging for those errors.</MESSAGE>
    <SHA>a721e4f2d7428e59f153bbd0e06d19d0c7ef9e63</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Added new unique tag to all mailgun requests refs: https://github.com/TryGhost/Ghost/issues/15725 - our users are having difficulties getting onboarded with mailgun - we're adding an explicit and unique tag to all requests, to help mailgun detect when mail is being sent from Ghost</MESSAGE>
      <SHA>bffd0280ed2a4c6b4c09733f46ac4a0dad81057a</SHA>
      <PATCHEDFILES>
        <FILE>ghost/mailgun-client/lib/mailgun-client.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Added new unique tag to all mailgun requests refs: https://github.com/TryGhost/Ghost/issues/15725 - our users are having difficulties getting onboarded with mailgun - we're adding an explicit and unique tag to all requests, to help mailgun detect when mail is being sent from Ghost</MESSAGE>
      <SHA>abc7e649410e92c0708864c5b59166bc35fb7b7f</SHA>
      <PATCHEDFILES>
        <FILE>ghost/mailgun-client/lib/mailgun-client.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
