<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20028</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/20028</ISSUEURL>
  <TITLE>Support Bluesky oEmbed auto-discovery</TITLE>
  <DESCRIPTION>### Issue Summary Bluesky (https://bsky.app) recently added post embeds, including oEmbed discovery. For the later, it looks like Ghost does not allow the `&lt;script&gt;` tag to be auto-included, probably as a safety/security feature. From a quick check, it looks like Ghost uses `@extractus/oembed-extractor` to parse out oEmbed, and that package doesn't seem to work with the bluesky oEmbed discovery: https://extractor-demos.pages.dev/oembed-extractor It looks like they synchronize with the &quot;official&quot; provider list at: https://oembed.com/providers.json I opened an issue to get us on that provider list (https://github.com/iamcal/oembed/pull/743). I'm opening this issue in Ghost to confirm that this is the correct way to get supported in Ghost, and to track interoperability with Ghost specifically. For what it is worth, the source code for our embed widget script, the embed.bsky.app service, and the Bluesky Social app itself are all open source: https://github.com/bluesky-social/social-app Thanks for all you do maintaining Ghost! ### Steps to Reproduce Paste a bsky.app post link. Expect a fully-functional post (with JS/iframe). Instead get either a &quot;card&quot;, or the raw embed `&lt;blockquote&gt;` without javascript re-write. ### Ghost Version hosted ### Node.js Version hosted ### How did you install Ghost? hosted ### Database type MySQL 5.7 ### Browser &amp; OS version N/A ### Relevant log / error output _No response_ ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>64</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed inability to override accent color variable via code injection closes https://linear.app/tryghost/issue/ONC-72 - moved output of the accent color style element before the site and post/page/tag code injection output</MESSAGE>
    <SHA>db7f715320ba6d34c12d3d4acc4e3cc26653cbe0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed Bluesky URLs created bookmarks rather than embeds closes https://github.com/TryGhost/Ghost/issues/20028 It's fairly common practice for oembed providers to skip some of the &quot;required&quot; fields from the oembed spec such as `height` when it doesn't make sense for the embeddable content, this was the case with Bluesky embeds which return `height: null` - removed validation for `height` being present in the response for it to be recognised as an embed because we don't use it anywhere and the validation is blocking otherwise valid embeds</MESSAGE>
      <SHA>6c83c55e22f36970c90f01d93c00e765df395519</SHA>
      <PATCHEDFILES>
        <FILE>ghost/oembed-service/lib/OEmbedService.js</FILE>
        <FILE>ghost/oembed-service/test/oembed-service.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed Bluesky URLs created bookmarks rather than embeds closes https://github.com/TryGhost/Ghost/issues/20028 It's fairly common practice for oembed providers to skip some of the &quot;required&quot; fields from the oembed spec such as `height` when it doesn't make sense for the embeddable content, this was the case with Bluesky embeds which return `height: null` - removed validation for `height` being present in the response for it to be recognised as an embed because we don't use it anywhere and the validation is blocking otherwise valid embeds</MESSAGE>
      <SHA>ec22a5d793ed71e2e05d81a2fceb61316df2103b</SHA>
      <PATCHEDFILES>
        <FILE>ghost/oembed-service/lib/OEmbedService.js</FILE>
        <FILE>ghost/oembed-service/test/oembed-service.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed Bluesky URLs creating bookmarks rather than embeds (#20435) closes https://github.com/TryGhost/Ghost/issues/20028 It's fairly common practice for oembed providers to skip some of the &quot;required&quot; fields from the oembed spec such as `height` when it doesn't make sense for the embeddable content, this was the case with Bluesky embeds which return `height: null` - removed validation for `height` being present in the response for it to be recognised as an embed because we don't use it anywhere and the validation is blocking otherwise valid embeds</MESSAGE>
      <SHA>3bc5eb8cf9fe394fbd5c180b5996317a6efa114a</SHA>
      <PATCHEDFILES>
        <FILE>ghost/oembed-service/lib/OEmbedService.js</FILE>
        <FILE>ghost/oembed-service/test/oembed-service.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
