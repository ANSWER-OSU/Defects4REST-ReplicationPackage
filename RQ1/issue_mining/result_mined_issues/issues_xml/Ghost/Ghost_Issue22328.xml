<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>22328</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/22328</ISSUEURL>
  <TITLE>Comments exposes a 'hide' button even for staff roles that shouldn't see it.</TITLE>
  <DESCRIPTION>### Issue Summary I'm logged in as an editor on a Ghost pro site. I'm not logged in as a member When I view comments, I can see the &quot;...&quot; with hide behind it. Clicking Hide causes the comment to grey out, but doesn't actually hide it (comment reappears on reload). Aside: I'm about to give editors permissions to hide comments anyway, so maybe I'll write a test that shows that they can (and authors can't). ### Steps to Reproduce See above. ### Ghost Version Ghost Pro, 5.110.2 ### Node.js Version na ### How did you install Ghost? na ### Database type MySQL 8 ### Browser &amp; OS version chrome, windows 11 ### Relevant log / error output ```shell Browser shows a 500 status code because I don't have permissions to hide the comment. ``` ### Code of Conduct - [x] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>9</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Updated Hungarian translations for Portal (#21982) no ref</MESSAGE>
    <SHA>fff546100dac62c3e43506165f182ce0a5e51452</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>âœ¨ Added Beta feature: Editors can manage comments and members. (#22487) ref https://github.com/TryGhost/Ghost/issues/22445 closes https://github.com/TryGhost/Ghost/issues/22328 The current Ghost permissions system gives Editors the ability to publish posts and newsletters and to invite new authors and contributors, but does not give them any abilities in terms of member management, such as creating new members, providing complimentary access, viewing subscription status, or cancelling member subscriptions. Currently, that functionality is reserved for the Administrator level, but this access level includes substantial additional permissions, that the site owner may not want to grant to the person in their organization doing &quot;member support&quot;. The situation is similar for comments. Only administrators can moderate comments, even though a busy site might have a lot of staffing need in this area to keep things under control. This PR creates a &quot;Super Editor&quot; role that can also do user management and comments moderation, controlled by a beta feature flag. Note: changes to the feature flag toggle do not take effect on individual editors until their roles are individually updated. While I was there, I closed https://github.com/TryGhost/Ghost/issues/22328. I also added some refactoring of the role-based part of the permissions system to improve readability. **This is a multi-part PR.** #22487 this PR (comments, plus permissions bug fix (from 22450) and some clean-up ) #22453 (admin area) #22452 (admin-x) #22450 (migrations &amp; associated) #22448 (permissions refactoring and utility function) #22444 (labs flag) #22443 (updated fixtures and tests) Tests updated. New version of comments is required and will ship separately. --------- Co-authored-by: Steve Larson &lt;9larsons@gmail.com&gt;</MESSAGE>
      <SHA>7ca02f4e5f6d32248e0dab40f26edc369df77866</SHA>
      <PATCHEDFILES>
        <FILE>apps/comments-ui/src/App.tsx</FILE>
        <FILE>apps/comments-ui/test/utils/MockedApi.ts</FILE>
        <FILE>ghost/core/core/frontend/src/admin-auth/message-handler.js</FILE>
        <FILE>ghost/core/core/server/models/user.js</FILE>
        <FILE>ghost/core/core/server/services/permissions/can-this.js</FILE>
        <FILE>ghost/core/test/regression/models/model_posts.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
