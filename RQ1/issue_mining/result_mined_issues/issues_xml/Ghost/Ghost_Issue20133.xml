<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20133</ISSUENO>
  <ISSUEURL>https://github.com/TryGhost/Ghost/issues/20133</ISSUEURL>
  <TITLE>Author slug with one letter causes failed filter</TITLE>
  <DESCRIPTION>### Issue Summary A staff member that signs up with a single-letter first name upon invitation will not be able to use Ghost at all. They only see an error message in the Ghost admin: ``` Request not understood error, cannot list posts. Error parsing filter ``` ![CleanShot 2024-05-05 at 19 03 18@2x](https://github.com/TryGhost/Ghost/assets/25703384/52fe6ae4-32bd-487d-99d7-4ee759370d79) Looking at the network requests, the request to `/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&amp;limit=30&amp;page=1&amp;filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj` fails. As soon as the last filter is removed, the API request succeeds: `https://tireless-buzzard.pikapod.net/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&amp;limit=30&amp;page=1&amp;filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D` I have then tried to change the author slug in the database from &quot;j&quot; to &quot;jb&quot; – and things started to work. This has been tested in different environments, both locally with development configurations, as well as on different managed hosts. Ghost v5.82.2 and v5.82.6 have been tested, both from the CLI as well as Docker images. ### Steps to Reproduce 1. Invite a new staff member as contributor 2. Accept the invitation and register – IMPORTANT: Set the name to have a single-letter first name, e.g. &quot;J Doe&quot; instead of &quot;John Doe&quot; 3. See the error ### Ghost Version v5.82.6 ### Node.js Version 18 LTS ### How did you install Ghost? Ghost CLI ### Database type MySQL 8 ### Browser &amp; OS version Mac OS 14.4.1, latest Chrome and latest Safari tested ### Relevant log / error output ```shell [2024-05-05 16:55:19] ERROR &quot;GET /ghost/api/admin/posts/?formats=mobiledoc%2Clexical&amp;limit=30&amp;page=1&amp;filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj&quot; 400 12ms Error parsing filter Error ID: 415527a0-0b00-11ef-96dc-2bc1b8db7476 ---------------------------------------- Error: Query Error: unrecognized text &quot;j&quot; in filter at char 24 at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:66:23) ...ished,sent]+authors:j)+type:post -----------------------^ at lexer.parseError (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:760:11) at Object.next (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:625:25) at Object.lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:635:22) at lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:246:27) at Parser.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:259:26) at exports.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/lib/nql.js:18:44) at api.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:15:31) at api.querySQL (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:49:44) at Builder.&lt;anonymous&gt; (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:63:24) at Object.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/helpers.js:164:14) at Child.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/model.js:1387:22) at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:56:22) at Function.getFilteredCollection (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/filtered-collection.js:13:32) at Function.findPage (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/crud.js:83:41) at PostsService.browsePosts (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/posts-service/lib/PostsService.js:81:44) at Object.query (/var/lib/ghost/versions/5.82.2/core/server/api/endpoints/posts.js:73:33) ``` ### Code of Conduct - [X] I agree to be friendly and polite to people in this repository</DESCRIPTION>
  <REPONAME>Ghost</REPONAME>
  <TIMEDIFFERENCEDAYS>164</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Admin navigation settings fix (#21323) fixes https://linear.app/tryghost/issue/DES-73/enter-should-create-new-navigation-itemmove-to-next-field Solves a regression where, when adding navigation items, pressing ENTER (when on the last item in the list) no longer created a new row. Also solves an issue where the `+` button next to the row of input fields wasn't positioned correctly when a form error was showing (it jumped down along with the error).</MESSAGE>
    <SHA>eaed33972fa3b504a8416ad40572beaac0cf8b62</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bumped NQL fixes https://github.com/TryGhost/Ghost/issues/20133 - includes fix to support single letter slugs</MESSAGE>
      <SHA>f548f9cfa7c81f8fccda8f7ad772fa019cfb7617</SHA>
      <PATCHEDFILES>
        <FILE>apps/admin-x-settings/package.json</FILE>
        <FILE>ghost/admin/package.json</FILE>
        <FILE>ghost/bookshelf-repository/package.json</FILE>
        <FILE>ghost/collections/package.json</FILE>
        <FILE>ghost/core/package.json</FILE>
        <FILE>ghost/custom-theme-settings-service/package.json</FILE>
        <FILE>ghost/in-memory-repository/package.json</FILE>
        <FILE>ghost/link-tracking/package.json</FILE>
        <FILE>ghost/members-api/package.json</FILE>
        <FILE>ghost/posts-service/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed NQL filters for single letter slugs (#21340) fixes https://github.com/TryGhost/Ghost/issues/20133 - includes fix to support single letter slugs</MESSAGE>
      <SHA>2e0293c99fa18ee88731f00eddcff1e6c312b2d2</SHA>
      <PATCHEDFILES>
        <FILE>apps/admin-x-settings/package.json</FILE>
        <FILE>ghost/admin/package.json</FILE>
        <FILE>ghost/bookshelf-repository/package.json</FILE>
        <FILE>ghost/collections/package.json</FILE>
        <FILE>ghost/core/package.json</FILE>
        <FILE>ghost/custom-theme-settings-service/package.json</FILE>
        <FILE>ghost/in-memory-repository/package.json</FILE>
        <FILE>ghost/link-tracking/package.json</FILE>
        <FILE>ghost/members-api/package.json</FILE>
        <FILE>ghost/posts-service/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed NQL filters for single letter slugs (#21340) fixes https://github.com/TryGhost/Ghost/issues/20133 - includes fix to support single letter slugs</MESSAGE>
      <SHA>e3c8e156c2f7ebae4f1b99230bfdf509ef00a2fd</SHA>
      <PATCHEDFILES>
        <FILE>apps/admin-x-settings/package.json</FILE>
        <FILE>ghost/admin/package.json</FILE>
        <FILE>ghost/bookshelf-repository/package.json</FILE>
        <FILE>ghost/collections/package.json</FILE>
        <FILE>ghost/core/package.json</FILE>
        <FILE>ghost/custom-theme-settings-service/package.json</FILE>
        <FILE>ghost/in-memory-repository/package.json</FILE>
        <FILE>ghost/link-tracking/package.json</FILE>
        <FILE>ghost/members-api/package.json</FILE>
        <FILE>ghost/posts-service/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed NQL filters for single letter slugs (#21340) fixes https://github.com/TryGhost/Ghost/issues/20133 - includes fix to support single letter slugs</MESSAGE>
      <SHA>6e38be1489121cae701f576acace39fa47ee7529</SHA>
      <PATCHEDFILES>
        <FILE>apps/admin-x-settings/package.json</FILE>
        <FILE>ghost/admin/package.json</FILE>
        <FILE>ghost/bookshelf-repository/package.json</FILE>
        <FILE>ghost/collections/package.json</FILE>
        <FILE>ghost/core/package.json</FILE>
        <FILE>ghost/custom-theme-settings-service/package.json</FILE>
        <FILE>ghost/in-memory-repository/package.json</FILE>
        <FILE>ghost/link-tracking/package.json</FILE>
        <FILE>ghost/members-api/package.json</FILE>
        <FILE>ghost/posts-service/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed NQL filters for single letter slugs (#21340) fixes https://github.com/TryGhost/Ghost/issues/20133 - includes fix to support single letter slugs</MESSAGE>
      <SHA>5182375c3840e0abbd631fda24bec1978ab8176a</SHA>
      <PATCHEDFILES>
        <FILE>apps/admin-x-settings/package.json</FILE>
        <FILE>ghost/admin/package.json</FILE>
        <FILE>ghost/bookshelf-repository/package.json</FILE>
        <FILE>ghost/collections/package.json</FILE>
        <FILE>ghost/core/package.json</FILE>
        <FILE>ghost/custom-theme-settings-service/package.json</FILE>
        <FILE>ghost/in-memory-repository/package.json</FILE>
        <FILE>ghost/link-tracking/package.json</FILE>
        <FILE>ghost/members-api/package.json</FILE>
        <FILE>ghost/posts-service/package.json</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
