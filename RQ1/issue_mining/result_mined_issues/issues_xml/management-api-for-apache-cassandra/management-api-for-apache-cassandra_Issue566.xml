<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>566</ISSUENO>
  <ISSUEURL>https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/566</ISSUEURL>
  <TITLE>Add role list and delete functionality</TITLE>
  <DESCRIPTION>Currently, the mgmt-api has ability to create roles, but not list them or delete them. This functionality should be present as well to enable management without going through CQL. Example output would be: Fetch current roles after creating the cluster (same format as ``LIST roles;`` in CQL): ``` cassandra@cluster2-dc2-r1-sts-0 /]$ curl localhost:8080/api/v0/ops/auth/role [{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;true&quot;,&quot;name&quot;:&quot;cluster2-superuser&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;true&quot;},{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;false&quot;,&quot;name&quot;:&quot;cassandra&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;false&quot;}] [cassandra@cluster2-dc2-r1-sts-0 /]$ ``` Create role, using the existing functionality: ``` [cassandra@cluster2-dc2-r1-sts-0 /]$ curl -v -XPOST 'localhost:8080/api/v0/ops/auth/role?username=try&amp;password=hope&amp;can_login=false&amp;is_superuser=false' * Trying ::1... * TCP_NODELAY set * Connected to localhost (::1) port 8080 (#0) &gt; POST /api/v0/ops/auth/role?username=try&amp;password=hope&amp;can_login=false&amp;is_superuser=false HTTP/1.1 &gt; Host: localhost:8080 &gt; User-Agent: curl/7.61.1 &gt; Accept: */* &gt; &lt; HTTP/1.1 200 OK &lt; connection: keep-alive &lt; Content-Type: text/plain;charset=UTF-8 &lt; transfer-encoding: chunked &lt; * Connection #0 to host localhost left intact OK[cassandra@cluster2-dc2-r1-sts-0 /]$ ``` List again: ``` [cassandra@cluster2-dc2-r1-sts-0 /]$ curl localhost:8080/api/v0/ops/auth/role [{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;false&quot;,&quot;name&quot;:&quot;try&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;false&quot;},{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;true&quot;,&quot;name&quot;:&quot;cluster2-superuser&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;true&quot;},{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;false&quot;,&quot;name&quot;:&quot;cassandra&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;false&quot;}] [cassandra@cluster2-dc2-r1-sts-0 /] ``` Delete: ``` [cassandra@cluster2-dc2-r1-sts-0 /]$ curl -XDELETE 'localhost:8080/api/v0/ops/auth/role/drop?username=try' OK[cassandra@cluster2-dc2-r1-sts-0 /]$ ``` And final list: ``` cassandra@cluster2-dc2-r1-sts-0 /]$ curl localhost:8080/api/v0/ops/auth/role [{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;true&quot;,&quot;name&quot;:&quot;cluster2-superuser&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;true&quot;},{&quot;datacenters&quot;:&quot;ALL&quot;,&quot;login&quot;:&quot;false&quot;,&quot;name&quot;:&quot;cassandra&quot;,&quot;options&quot;:&quot;{}&quot;,&quot;super&quot;:&quot;false&quot;}] [cassandra@cluster2-dc2-r1-sts-0 /]$ ``` ┆Issue is synchronized with this [Jira Story](https://datastax.jira.com/browse/MAPI-80) by [Unito](https://www.unito.io) ┆Issue Number: MAPI-80</DESCRIPTION>
  <REPONAME>management-api-for-apache-cassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add Cassandra 4.0.15, DSE versions 6.8.52 and 6.9.4 to build matrix (#570) * Add Cassandra 4.0.15, DSE versions 6.8.52 and 6.9.4 to build matrix * Update CHANGELOG.md Co-authored-by: Erik Merkle &lt;erik.merkle@datastax.com&gt; --------- Co-authored-by: Erik Merkle &lt;erik.merkle@datastax.com&gt;</MESSAGE>
    <SHA>67deeca00a130b8010f134f80abe46e8acb89bfa</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Release v0.1.90 * [FEATURE] [#566](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/566) Add listRoles and dropRole functionality to the REST interface * [FEATURE] [#571](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/571) Add Cassandra 4.0.15 to the build matrix * [FEATURE] [#569](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/569) Add DSE 6.9.4 to the build matrix * [FEATURE] [#568](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/568) Add DSE 6.8.52 to the build matrix</MESSAGE>
      <SHA>6476187ccf88198706c90d7a6b613f1b5d29addd</SHA>
      <PATCHEDFILES>
        <FILE>CHANGELOG.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
