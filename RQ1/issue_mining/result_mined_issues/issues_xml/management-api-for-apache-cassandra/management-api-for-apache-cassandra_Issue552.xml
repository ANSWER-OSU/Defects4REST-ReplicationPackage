<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>552</ISSUENO>
  <ISSUEURL>https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/552</ISSUEURL>
  <TITLE>Improve &quot;liveness&quot; probe implementation</TITLE>
  <DESCRIPTION>In K8s situations, bad config can cause issue with pod/container lifecycles and make it difficult to understand the root cause. ┆Issue is synchronized with this [Jira Story](https://datastax.jira.com/browse/MAPI-73) by [Unito](https://www.unito.io) ┆Issue Number: MAPI-73</DESCRIPTION>
  <REPONAME>management-api-for-apache-cassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>If /start is called, check that pid is also running, not just present</MESSAGE>
    <SHA>fd6b28dabbae99f689577fa58fe882442721a769</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add issue #552 to Changelog</MESSAGE>
      <SHA>1ac84e8755be58aed09ea437bf19959ab420d709</SHA>
      <PATCHEDFILES>
        <FILE>CHANGELOG.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>In /liveness, verify that Cassandra is still running (#548) * In /liveness, verify that Cassandra is still running (if it was started) by checking the PID file exists and the PID is still running * If /start is called, check that pid is also running, not just present * Add issue #552 to Changelog --------- Co-authored-by: Erik Merkle &lt;erik.merkle@datastax.com&gt;</MESSAGE>
      <SHA>25819d84a765bebbcbdaa69719beb07d70ffcb72</SHA>
      <PATCHEDFILES>
        <FILE>CHANGELOG.md</FILE>
        <FILE>cassandra/Dockerfile-3.11.ubi8</FILE>
        <FILE>cassandra/Dockerfile-4.0.ubi8</FILE>
        <FILE>cassandra/Dockerfile-4.1.ubi8</FILE>
        <FILE>management-api-server/src/main/java/com/datastax/mgmtapi/UnixCmds.java</FILE>
        <FILE>management-api-server/src/main/java/com/datastax/mgmtapi/resources/K8OperatorResources.java</FILE>
        <FILE>management-api-server/src/main/java/com/datastax/mgmtapi/resources/LifecycleResources.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Release v0.1.88 * [CHANGE] [#556](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/556) Update Management API dependencies to address CVEs * [CHANGE] [#547](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/547) Deprecate Cassandra 3.11 support * [FEATURE] [#551](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/551) Add Cassandra 5.0.2 to the build matrix * [FEATURE] [#549](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/549) Add DSE 6.9.3 to the build matrix * [ENHANCEMENT] [#552](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/552) Improve &quot;liveness&quot; probe implementation * [BUGFIX] [#553](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/553) Fix CassandraTaskExports metric filtering to make it work with 5.0.x Major compactions * [BUGFIX] [#560](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/560) Fix LatencyMetrics bucketing on 4.1 and 5.0 as their reservoir stores the data in microseconds, not nano (unlike 3.11 and 4.0) * [BUGFIX] [#562](https://github.com/k8ssandra/management-api-for-apache-cassandra/issues/562) Fix version detection</MESSAGE>
      <SHA>7ba34b39c2ce7e37009bff057bd13a108eb0b32d</SHA>
      <PATCHEDFILES>
        <FILE>CHANGELOG.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
