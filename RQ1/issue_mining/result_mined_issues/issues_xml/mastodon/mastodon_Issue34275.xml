<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>34275</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/34275</ISSUEURL>
  <TITLE>Cannot disable animations of custom emojis in user name</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Disable &quot;Auto-play animated GIFs&quot; at Preference &gt; Appearance 2. Enable &quot;Reduce motion in animations&quot; at Preference &gt; Appearance 3. Visit a post or profile of someone whose name has animated custom emojis + Example: Accessing &lt;https://mystical.garden/@fionafokus/114224269339074787&gt; from the search box (as of 2025-03-26) (contains `:loading:` custom emoji in the user name) 4. You'll see the animated loading animation regardless of the preference. ### Expected behaviour web UI shows still image instead of playing animated custom emojis ### Actual behaviour animated emojis in the user name are always played ### Detailed description Account icons are not auto-played (if some options set?) even when they are animated images. User can play them by mouse hover if they want. This is the expected behaviour of disabled &quot;auto-play animated GIFs&quot; (and/or enabled &quot;Reduce motions in animation&quot;) for images in general, not only for account icons but also for custom emojis in user names. However, this option does not work to the custom emojis in the user name, so currently users cannot disable animations in that position. This is very distracting. ### Mastodon instance mastodon.cardina1.red ### Mastodon version v4.3.6 ### Browser name and version Firefox 136.0.2 ### Operating system Gentoo Linux (amd64, Linux 6.13.8) ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix `Style/MapToHash` cop (#34327)</MESSAGE>
    <SHA>b4e56822c72db54ba338940e2517a4e25e2159a6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix static version of animated PNG emojis not being properly extracted Fixes #34275</MESSAGE>
      <SHA>2ba63100ff14050a85ba9af7363f773161bc9cfc</SHA>
      <PATCHEDFILES>
        <FILE>lib/paperclip/vips_lazy_thumbnail.rb</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
