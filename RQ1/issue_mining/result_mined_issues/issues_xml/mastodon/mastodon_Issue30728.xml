<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30728</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/30728</ISSUEURL>
  <TITLE>Favicon customization doesn’t touch svg `mask-icon`</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. As a server admin, customize favicon using capabilities introduced in #30040 ### Expected behaviour Users should be able to see the customized icon everywhere and/or admin should be able to configure the svg mask-icon separately ### Actual behaviour The svg `mask-icon` is still the mastodon logo in the mastodon brand color, so users may see it as their browser’s tab icon rather than the custom one ### Detailed description Ideally, the admin should be able to upload their own properly formatted vector file for the `mask-icon`, choose a color for it, and see a preview of how it would be displayed in the admin interface along with the other icons. Maybe the admin should be able to disable the mask-icon if they use a custom favicon without uploading a matching `mask-icon`. ### Mastodon instance N/A ### Mastodon version anything that includes #30040 ### Browser name and version Safari (any version) ### Operating system any apple OS ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Restore short Ruby version on admin dashboard (#30711)</MESSAGE>
    <SHA>a777f7e3cc3cc936c7876c1d006e1954158d1e27</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix invalid `mask-icon` when a custom instance icon is configured According to https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs we no longer need `mask-icon` for any modern browser. Rathen than always removing it, I opted to not show it when a custom app icon is used, in case thats still needed for old browsers. Fixes #30728</MESSAGE>
      <SHA>f3681ace139f2e47f3dd4f52dc3facce5a18ba78</SHA>
      <PATCHEDFILES>
        <FILE>app/helpers/application_helper.rb</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix invalid `mask-icon` when a custom instance icon is configured According to https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs we no longer need `mask-icon` for any modern browser. Rathen than always removing it, I opted to not show it when a custom app icon is used, in case thats still needed for old browsers. Fixes #30728</MESSAGE>
      <SHA>4db2a458a6782838ba6be87087bfdc23a2d5f96f</SHA>
      <PATCHEDFILES>
        <FILE>app/helpers/application_helper.rb</FILE>
        <FILE>app/views/layouts/application.html.haml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
