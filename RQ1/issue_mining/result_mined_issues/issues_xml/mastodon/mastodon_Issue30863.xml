<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30863</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/30863</ISSUEURL>
  <TITLE>LinkCrawlWorker NoMethodError: undefined method `[]' for nil</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem Generated by these status/links: https://mastodon.online/users/michael_w_busch/statuses/112689809505071015 https://www.mprnews.org/story/2024/06/26/new-facial-recognition-to-add-more-layers-to-mall-of-america-security ### Expected behaviour No error ### Actual behaviour Error ### Detailed description _No response_ ### Mastodon instance vmst.io ### Mastodon version v4.3.0-alpha.4 ### Technical details ![CleanShot 2024-06-27 at 13 19 37@2x](https://github.com/mastodon/mastodon/assets/3002053/e7450f70-c873-4592-9c7e-fe83b598fdbc)</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>27</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix(deps): update dependency fuzzysort to v3 (#30315) Co-authored-by: renovate[bot] &lt;29139614+renovate[bot]@users.noreply.github.com&gt; Co-authored-by: Renaud Chaput &lt;renchap@gmail.com&gt;</MESSAGE>
    <SHA>06f070d86d448b97c082c038220becaec8a038ce</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix LinkCrawlWorker NoMethodError: undefined method `[]' for nil Fixes #30863</MESSAGE>
      <SHA>a8074585feb4f5bf63e1ec9ee888ad85df12045f</SHA>
      <PATCHEDFILES>
        <FILE>app/lib/link_details_extractor.rb</FILE>
        <FILE>spec/lib/link_details_extractor_spec.rb</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
