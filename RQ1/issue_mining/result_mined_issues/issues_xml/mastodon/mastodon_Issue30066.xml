<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30066</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/30066</ISSUEURL>
  <TITLE>Error: `422 can't verify CSRF token authenticity` on explore page</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Visit typo.social/explore 2. Scroll down 3. See error: ![Screenshot_20240425-110837](https://github.com/mastodon/mastodon/assets/3739866/282a3222-78ea-424b-af98-9fc3ec97bbe4) On desktop (Windows, Firefox) no error is produced, but scrolling stops at the same point, suggesting to me that the error occurs but is not communicated. ### Expected behaviour No error ### Actual behaviour Error (and then no additional posts will load) ### Detailed description Also reported here: - https://www.reddit.com/r/Mastodon/comments/18fmda5/422_cant_verify_csrf_token_authenticity/?rdt=43597 - https://mementomori.social/@rolle/110802929745486086 - Possible duplicate of https://github.com/mastodon/mastodon/issues/1236 (I can't tell) ### Mastodon instance typo.social ### Mastodon version v4.2.8 ### Browser name and version Firefox on Android, 124.2.0 (Build #2016012559), 7a0e399c7b+ GV: 124.0.2-20240401114208 AS: 124.0 2024-04-01T17:18:00.821594648 ### Operating system Android 13 ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>20</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix: Mark redirect uris field in Development &gt; Application form as required (#30311)</MESSAGE>
    <SHA>f0d6dc4519cc0311583f139834fbbbcd64e82d7a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix Web UI trying to save user settings when logged out Fixes #30066</MESSAGE>
      <SHA>0236b3fc13cf7155511438d886c934f8db4c1b31</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/actions/settings.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix Web UI trying to save user settings when logged out Fixes #30066</MESSAGE>
      <SHA>46bb2bc510303c8e44736f96f3c69cac10e8ce3c</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/actions/settings.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>add fix for github.com /mastodon/mastodon/issues/30066</MESSAGE>
      <SHA>e3d1a1dec47410a220dc8c319543a9b8a4bad5d8</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/flavours/blobfox/actions/settings.js</FILE>
        <FILE>app/javascript/flavours/glitch/actions/settings.js</FILE>
        <FILE>app/javascript/mastodon/actions/settings.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
