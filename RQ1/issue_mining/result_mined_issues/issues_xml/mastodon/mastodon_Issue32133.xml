<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32133</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/32133</ISSUEURL>
  <TITLE>Missing 'allow-popups' directive from sandbox attribute in embed.js causes browsers to prevent users directly opening links within the embed iframe</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Click &quot;Get embed code&quot; on any Mastodon post 2. Publish the generated embed code on any website 3. Go to the website and click on any link within the embed iframe 4. Links do not open and browser shows console message `Blocked opening '[...]' in a new window because the request was made in a sandboxed frame whose 'allow-popups' permission is not set.` ### Expected behaviour User should be able to click on links within IFrame and they should open the corresponding Mastodon post, user profile, etc. ### Actual behaviour Browser blocks opening of links ### Detailed description _No response_ ### Mastodon instance mastodon.social ### Mastodon version v4.3.0-nightly.2024-09-26 ### Browser name and version Google Chrome Version 129.0.6668.70 (Official Build) (64-bit) ### Operating system Ubuntu 24.04.01 ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Change media reordering design in the compose form in web UI (#32093)</MESSAGE>
    <SHA>11a12e56b3480ac03921e831a7ccfcc7ade24b52</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix missing permission on new embeds making them unclickable Fix #32133</MESSAGE>
      <SHA>36d5ff0fffd80297a4d4642ae000424a9b67ff41</SHA>
      <PATCHEDFILES>
        <FILE>public/embed.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
