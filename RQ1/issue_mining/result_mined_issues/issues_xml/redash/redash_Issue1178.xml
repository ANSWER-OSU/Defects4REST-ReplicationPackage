<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1178</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/1178</ISSUEURL>
  <TITLE>Left Pane is not shown when database contains table that name has unicode characters (MSSQL)</TITLE>
  <DESCRIPTION>&lt;img width=&quot;703&quot; alt=&quot;not shown&quot; src=&quot;https://cloud.githubusercontent.com/assets/2596972/16723136/17afa844-4786-11e6-833b-e9bcdfc1b3b0.png&quot;&gt; ``` pyexception Traceback (most recent call last): File &quot;/usr/local/lib/python2.7/dist-packages/flask/app.py&quot;, line 1475, in full_dispatch_request rv = self.dispatch_request() File &quot;/usr/local/lib/python2.7/dist-packages/flask/app.py&quot;, line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File &quot;/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py&quot;, line 477, in wrapper resp = resource(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask_login.py&quot;, line 792, in decorated_view return func(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask/views.py&quot;, line 84, in view return self.dispatch_request(*args, **kwargs) File &quot;/opt/redash/redash.0.11.0.b1903/redash/handlers/base.py&quot;, line 25, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py&quot;, line 587, in dispatch_request resp = meth(*args, **kwargs) File &quot;/opt/redash/redash.0.11.0.b1903/redash/handlers/data_sources.py&quot;, line 105, in get schema = data_source.get_schema() File &quot;/opt/redash/redash.0.11.0.b1903/redash/models.py&quot;, line 412, in get_schema schema = sorted(query_runner.get_schema(get_stats=refresh), key=lambda t: t['name']) File &quot;/opt/redash/redash.0.11.0.b1903/redash/query_runner/__init__.py&quot;, line 117, in get_schema self._get_tables(schema_dict) File &quot;/opt/redash/redash.0.11.0.b1903/redash/query_runner/mssql.py&quot;, line 95, in _get_tables table_name = '{}.{}'.format(row['table_schema'], row['table_name']) ``` ## Steps to Reproduce - Using mssql query runner - Ref: https://github.com/getredash/redash/issues/1101 - Ref: https://github.com/getredash/redash/pull/1104 - The table name is &quot; `テスト`&quot; ## Technical details: Redash Version: v0.10.1.b1834, 0.11.0 - RC Browser/OS: Google Chrome / OSX / Server: Ubuntu Linux 16.04 LTS How did you install Redash: used setup/ubuntu/bootstrap.sh</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #1102 from getredash/feature/hipchat_v2 Switch to HipChat V2 API</MESSAGE>
    <SHA>65635ec703bec9b2666d234583b8794bc678f456</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix: #1178 Left Pane is not shown when database contains table that name has unicode characters (MSSQL) - Update table_name to be unicode (not str).</MESSAGE>
      <SHA>74021c2d5a53e20eb290bd586a6a328ec8b5f505</SHA>
      <PATCHEDFILES>
        <FILE>redash/query_runner/mssql.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: #1178 Left Pane is not shown when database contains table that name has unicode characters (MSSQL) - Update table_name to be unicode (not str).</MESSAGE>
      <SHA>490883e975709a33b0b8691fc6f3e7e08c23e514</SHA>
      <PATCHEDFILES>
        <FILE>redash/query_runner/mssql.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: #1178 Left Pane is not shown when database contains table that name has unicode characters (MSSQL) - Update table_name to be unicode (not str).</MESSAGE>
      <SHA>6a8c99b99c5fcd807f3d68dec9fa14b58681a3c0</SHA>
      <PATCHEDFILES>
        <FILE>query_runner/mssql.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
