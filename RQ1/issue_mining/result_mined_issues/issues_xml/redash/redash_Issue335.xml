<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>335</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/335</ISSUEURL>
  <TITLE>More flexible widgets grid (allow finer control over height/width)</TITLE>
  <DESCRIPTION>## User should be able to control widget's placement, width and height ### Current implementation Currently editing a dashboard works as follow: 1. When adding a widget you select its width: regular (half width) or double (full width). Height is set based on the content. 2. When opening the &quot;Edit Dashboard&quot; dialog, you can rearrange the order of the widgets. ![Edit Dashboard Dialog](https://user-images.githubusercontent.com/71468/30966534-e52b506e-a461-11e7-86f4-cd3220b51d12.png) Issues with the current approach: * You can't change widget size after placing it. * You can't change widget's height. * You can't control widget's width beyond the current two options. ### Solution To solve this we want to have a flexible (_but still responsive_) grid that the user can freely place and move widgets on. * Each visualization will define minimum width and height sizes (derived from the visualization type). This will be the default sizes for the widget when placed on the grid, but the user will be able to resize it to be larger (but not smaller) afterwards. * Once entering dashboard &quot;edit mode&quot;, the user will be able to move around and resize the widgets in place instead of a dedicated UI. * We should probably change other behaviors in the UI (move add widget to be part of the edit mode, change dashboard title editing to be in place, etc), but we will leave it to second iteration after the grid behavior is implemented. ### Technical Notes * We currently use `angular-gridster` to allow moving around the widgets in the Edit Dashboard dialog. Maybe we can use it for the grid or a similar library. * Currently the widget knows nothing about its placement, but only its size (width). The dashboard has a layout property, which is an array of arrays of widgets ids (each item in the array is a row/array of widgets). This is error prone and makes layout changes harder. If possible, it will be better if each widget retains its own placement information. * The API to update a widget currently supports only updating a textbox widget. We will need to extend it to support all widget types.</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>1095</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'master' of git://github.com/getredash/redash # By Arik Fraimovich (8) and others # Via GitHub (12) and others * 'master' of git://github.com/getredash/redash: (21 commits) Modernize Python 2 code to get ready for Python 3 Fixed eslint &quot;Cannot read property 'length' of undefined&quot; error Add option to set the flask-limiter storage engine Fix: don't crash query editor when there are unclosed curly brackets. Fix: error value in charts wasn't displayed if it was 0. Fix: tests entering endless loop, due to bad input. Cohort visualization: make it friendlier to use. Add missing import. Fix: Queries#all_queries was sometimes returning wrong number of queries. Fix #1950: record_event fails for api events Merged with upstream Bugfix: column.type not set by many data sources [sqlite, postgres etc] Use a different markdown library Update npm-shrinkwrap Use event.preventDefault() on EditInPlace textarea Remove magic numbers from EditInPlace() Update redirected link in README UnicodeWriter errors code to environment Hovertext length (#3) Merge/query based parameter (#2) ... Conflicts: package.json</MESSAGE>
    <SHA>57f422a11923fd789ac6aff4d465cd27c057e930</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch 'master' of https://github.com/getredash/redash * 'master' of https://github.com/getredash/redash: (95 commits) CR3 In editing mode hide menu button and show remove button instead Fix: widget menu not visible on small widgets Fix widget auto-height behaviour Cleanup CSS CR2 CR1 getredash/redash#335 Better dashboard editor CirlceCI: Docker build for release branches. Redshift: change default SSL mode to prefer. Update v3 CHANGELOG. Add Query Results to the default query runners list. Add: data source to run queries on top of query results. Fix #1824: allow only user API key to be used with query refresh API. Disable fork button for those can't fork Fix: require full access to the data source to fork a query. Remove unused variables Fix #1979: API key of one query could be used to get results of another one Copy parameters value when forking a query Save only the query id instead of query id and name ...</MESSAGE>
      <SHA>36037458bd9c928f2b5e4584b98ec615178c5336</SHA>
      <PATCHEDFILES>
        <FILE>.gitignore</FILE>
        <FILE>CHANGELOG.md</FILE>
        <FILE>Makefile</FILE>
        <FILE>bin/docker-entrypoint</FILE>
        <FILE>circle.yml</FILE>
        <FILE>client/.eslintrc.js</FILE>
        <FILE>client/app/assets/css/superflat_redash.css</FILE>
        <FILE>client/app/components/alerts/alert-subscriptions/alert-subscriptions.html</FILE>
        <FILE>client/app/components/alerts/alert-subscriptions/index.js</FILE>
        <FILE>client/app/components/app-header/app-header.html</FILE>
        <FILE>client/app/components/app-header/index.js</FILE>
        <FILE>client/app/components/cancel-query-button/index.js</FILE>
        <FILE>client/app/components/dashboards/add-widget-dialog.html</FILE>
        <FILE>client/app/components/dashboards/add-widget-dialog.js</FILE>
        <FILE>client/app/components/dashboards/edit-dashboard-dialog.html</FILE>
        <FILE>client/app/components/dashboards/edit-dashboard-dialog.js</FILE>
        <FILE>client/app/components/dashboards/edit-text-box.html</FILE>
        <FILE>client/app/components/dashboards/widget.html</FILE>
        <FILE>client/app/components/dashboards/widget.js</FILE>
        <FILE>client/app/components/dashboards/widget.less</FILE>
        <FILE>client/app/components/dynamic-form.html</FILE>
        <FILE>client/app/components/filters.html</FILE>
        <FILE>client/app/components/filters.js</FILE>
        <FILE>client/app/components/groups/edit-group-dialog.html</FILE>
        <FILE>client/app/components/groups/edit-group-dialog.js</FILE>
        <FILE>client/app/components/groups/group-name.js</FILE>
        <FILE>client/app/components/index.js</FILE>
        <FILE>client/app/components/parameter-settings.html</FILE>
        <FILE>client/app/components/parameters.html</FILE>
        <FILE>client/app/components/parameters.js</FILE>
        <FILE>client/app/components/queries/alert-unsaved-changes.js</FILE>
        <FILE>client/app/components/queries/api-key-dialog.js</FILE>
        <FILE>client/app/components/queries/embed-code-dialog.html</FILE>
        <FILE>client/app/components/queries/embed-code-dialog.js</FILE>
        <FILE>client/app/components/queries/query-editor.js</FILE>
        <FILE>client/app/components/queries/query-results-link.js</FILE>
        <FILE>client/app/components/queries/schedule-dialog.html</FILE>
        <FILE>client/app/components/queries/schedule-dialog.js</FILE>
        <FILE>client/app/components/queries/schema-browser.html</FILE>
        <FILE>client/app/components/queries/schema-browser.js</FILE>
        <FILE>client/app/components/queries/visualization-embed.html</FILE>
        <FILE>client/app/components/queries/visualization-embed.js</FILE>
        <FILE>client/app/components/query-based-parameter.html</FILE>
        <FILE>client/app/components/settings-screen.html</FILE>
        <FILE>client/app/components/settings-screen.js</FILE>
        <FILE>client/app/config/dashboard-grid-options.js</FILE>
        <FILE>client/app/config/index.js</FILE>
        <FILE>client/app/config/styles.js</FILE>
        <FILE>client/app/directives/index.js</FILE>
        <FILE>client/app/index.js</FILE>
        <FILE>client/app/lib/pagination/index.js</FILE>
        <FILE>client/app/lib/pagination/live-paginator.js</FILE>
        <FILE>client/app/lib/pagination/paginator.js</FILE>
        <FILE>client/app/lib/sortable.js</FILE>
        <FILE>client/app/lib/visualizations/d3box.js</FILE>
        <FILE>client/app/lib/visualizations/d3sankey.js</FILE>
        <FILE>client/app/lib/visualizations/sunburst.js</FILE>
        <FILE>client/app/pages/admin/index.js</FILE>
        <FILE>client/app/pages/admin/outdated-queries/index.js</FILE>
        <FILE>client/app/pages/admin/tasks/index.js</FILE>
        <FILE>client/app/pages/alert/alert-subscriptions/index.js</FILE>
        <FILE>client/app/pages/alert/index.js</FILE>
        <FILE>client/app/pages/alerts-list/index.js</FILE>
        <FILE>client/app/pages/dashboards/add-widget-dialog.js</FILE>
        <FILE>client/app/pages/dashboards/dashboard-list.html</FILE>
        <FILE>client/app/pages/dashboards/dashboard-list.js</FILE>
        <FILE>client/app/pages/dashboards/dashboard.html</FILE>
        <FILE>client/app/pages/dashboards/dashboard.js</FILE>
        <FILE>client/app/pages/dashboards/dashboard.less</FILE>
        <FILE>client/app/pages/dashboards/index.js</FILE>
        <FILE>client/app/pages/dashboards/public-dashboard-page.html</FILE>
        <FILE>client/app/pages/dashboards/public-dashboard-page.js</FILE>
        <FILE>client/app/pages/dashboards/widget.html</FILE>
        <FILE>client/app/pages/data-sources/index.js</FILE>
        <FILE>client/app/pages/destinations/index.js</FILE>
        <FILE>client/app/pages/groups/index.js</FILE>
        <FILE>client/app/pages/groups/list.js</FILE>
        <FILE>client/app/pages/home/home.html</FILE>
        <FILE>client/app/pages/home/index.js</FILE>
        <FILE>client/app/pages/index.js</FILE>
        <FILE>client/app/pages/queries-list/index.js</FILE>
        <FILE>client/app/pages/queries/index.js</FILE>
        <FILE>client/app/pages/queries/queries-search-results-page.js</FILE>
        <FILE>client/app/pages/queries/query.html</FILE>
        <FILE>client/app/pages/queries/source-view.js</FILE>
        <FILE>client/app/pages/query-snippets/edit.html</FILE>
        <FILE>client/app/pages/query-snippets/index.js</FILE>
        <FILE>client/app/pages/query-snippets/list.js</FILE>
        <FILE>client/app/pages/users/index.js</FILE>
        <FILE>client/app/pages/users/list.js</FILE>
        <FILE>client/app/pages/users/new.html</FILE>
        <FILE>client/app/services/current-user.js</FILE>
        <FILE>client/app/services/dashboard.js</FILE>
        <FILE>client/app/services/index.js</FILE>
        <FILE>client/app/services/query-result.js</FILE>
        <FILE>client/app/services/query.js</FILE>
        <FILE>client/app/services/widget.js</FILE>
        <FILE>client/app/visualizations/box-plot/d3box.js</FILE>
        <FILE>client/app/visualizations/box-plot/index.js</FILE>
        <FILE>client/app/visualizations/chart/index.js</FILE>
        <FILE>client/app/visualizations/chart/plotly.js</FILE>
        <FILE>client/app/visualizations/edit-visualization-dialog.html</FILE>
        <FILE>client/app/visualizations/index.js</FILE>
        <FILE>client/app/visualizations/sankey/index.js</FILE>
        <FILE>client/app/visualizations/sankey/sankey-editor.html</FILE>
        <FILE>client/app/visualizations/sunburst/index.js</FILE>
        <FILE>client/app/visualizations/sunburst/sunburst-sequence-editor.html</FILE>
        <FILE>client/app/visualizations/table/index.js</FILE>
        <FILE>docker-compose.production.yml</FILE>
        <FILE>docker-compose.yml</FILE>
        <FILE>package-lock.json</FILE>
        <FILE>package.json</FILE>
        <FILE>redash/__init__.py</FILE>
        <FILE>redash/authentication/account.py</FILE>
        <FILE>redash/handlers/groups.py</FILE>
        <FILE>redash/handlers/queries.py</FILE>
        <FILE>redash/handlers/query_results.py</FILE>
        <FILE>redash/handlers/users.py</FILE>
        <FILE>redash/handlers/widgets.py</FILE>
        <FILE>redash/models.py</FILE>
        <FILE>redash/monitor.py</FILE>
        <FILE>redash/query_runner/athena.py</FILE>
        <FILE>redash/query_runner/cass.py</FILE>
        <FILE>redash/query_runner/files/redshift-ca-bundle.crt</FILE>
        <FILE>redash/query_runner/mongodb.py</FILE>
        <FILE>redash/query_runner/mssql_odbc.py</FILE>
        <FILE>redash/query_runner/mysql.py</FILE>
        <FILE>redash/query_runner/pg.py</FILE>
        <FILE>redash/query_runner/prometheus.py</FILE>
        <FILE>redash/query_runner/query_results.py</FILE>
        <FILE>redash/query_runner/treasuredata.py</FILE>
        <FILE>redash/settings.py</FILE>
        <FILE>redash/tasks/queries.py</FILE>
        <FILE>redash/worker.py</FILE>
        <FILE>requirements.txt</FILE>
        <FILE>requirements_all_ds.txt</FILE>
        <FILE>setup/ubuntu/bootstrap.sh</FILE>
        <FILE>tests/handlers/test_queries.py</FILE>
        <FILE>tests/handlers/test_query_results.py</FILE>
        <FILE>tests/models/test_permissions.py</FILE>
        <FILE>tests/query_runner/test_query_results.py</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>getredash/redash#335 Better dashboard editor</MESSAGE>
      <SHA>e14fd881cd50c2395cc1227c8c9e903adb6387a2</SHA>
      <PATCHEDFILES>
        <FILE>handlers/widgets.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
