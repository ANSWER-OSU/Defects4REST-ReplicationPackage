<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1056</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/1056</ISSUEURL>
  <TITLE>PostgreSQL passwords with spaces are not supported</TITLE>
  <DESCRIPTION>The connection info string on line /opt/redash/current/redash/query_runner/pg.py cant contain spaces, so something like `host=hostname password=my secret password dbname=awesome_db_name user=postgres` will throw the error `OperationalError: missing &quot;=&quot; after &quot;secret&quot; in connection info string`. Error happens at [pg.py#L117](https://github.com/getredash/redash/blob/fbb81b62d6c79f8e9381ac8973ac34739bfa6b41/redash/query_runner/pg.py#L117), but the connection string is built [pg.py#L87](https://github.com/getredash/redash/blob/fbb81b62d6c79f8e9381ac8973ac34739bfa6b41/redash/query_runner/pg.py#L87). According the [psycopg2 docs](http://initd.org/psycopg/docs/module.html), you could use: `conn = psycopg2.connect(&quot;dbname=test user=postgres password=secret&quot;)` or `conn = psycopg2.connect(database=&quot;test&quot;, user=&quot;postgres&quot;, password=&quot;secret&quot;)` Currently the first is being used.</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>449</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix: handle the case of query's data source is null</MESSAGE>
    <SHA>f80951457dbe5122b60072b30042377d80f465f4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix: PostgreSQL passwords with spaces were not supported. Closes #1056.</MESSAGE>
      <SHA>7fe096fba8223e94deb16cb604e72ec36b873726</SHA>
      <PATCHEDFILES>
        <FILE>CHANGELOG.md</FILE>
        <FILE>redash/query_runner/pg.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: PostgreSQL passwords with spaces were not supported. Closes #1056.</MESSAGE>
      <SHA>48b9f9b3c8a0ca7b037b8b2464c9ff8c6b65f5f8</SHA>
      <PATCHEDFILES>
        <FILE>redash/query_runner/pg.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: PostgreSQL passwords with spaces were not supported. Closes #1056.</MESSAGE>
      <SHA>66cec84ed01fba139610cd7ad4b2f8bb51917448</SHA>
      <PATCHEDFILES>
        <FILE>query_runner/pg.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
