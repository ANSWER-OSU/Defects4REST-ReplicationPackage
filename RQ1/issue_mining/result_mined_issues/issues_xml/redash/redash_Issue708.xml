<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>708</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/708</ISSUEURL>
  <TITLE>Deleting and re-adding widgets to a dashboard breaks it</TITLE>
  <DESCRIPTION>There's a specific set of steps that has messed up some of our users' dashboards: 1. Create a new dashboard 2. Add multiple widgets to it. 3. Remove all those widgets from the dashboard 4. Re-add some widgets 5. Click the &quot;Edit Dashboard (Name/Layout)&quot; button 6. Click Save without changing anything. 7. Refresh the page This makes none of the widgets appear and causes the &quot;Layout&quot; array in the admin panel to contain one or more &quot;null&quot; values (depending on how many widgets you added/deleted): ![image](https://cloud.githubusercontent.com/assets/844493/11826038/76c749fa-a348-11e5-9f46-bbae43c4b6f6.png) The only way to recover from this state is to manually delete the &quot;null&quot; values through the admin interface. This is on re:dash version 0.8.2</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #711 from alexanderlz/master Feature: update forked query name</MESSAGE>
    <SHA>3d178f9a6036c236ca254528fc4d4cde2e0f7fc8</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #708: dashboard breaks when removing widgets and adding again</MESSAGE>
      <SHA>30adfccd79d082b58702189e9f996184b0825199</SHA>
      <PATCHEDFILES>
        <FILE>rd_ui/app/scripts/controllers/dashboard.js</FILE>
        <FILE>rd_ui/app/scripts/directives/dashboard_directives.js</FILE>
        <FILE>redash/handlers/widgets.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #716 from getredash/fix/perf Fix #708: dashboard breaks when removing widgets and adding again</MESSAGE>
      <SHA>871d8d6b6aedbc7548caadcf191040a17f4118bc</SHA>
      <PATCHEDFILES>
        <FILE>rd_ui/app/scripts/controllers/dashboard.js</FILE>
        <FILE>rd_ui/app/scripts/directives/dashboard_directives.js</FILE>
        <FILE>redash/handlers/widgets.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #708: dashboard breaks when removing widgets and adding again</MESSAGE>
      <SHA>99a7e0c9f8ce7ecca1eb474fe9e979c4cea15141</SHA>
      <PATCHEDFILES>
        <FILE>handlers/widgets.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #716 from getredash/fix/perf Fix #708: dashboard breaks when removing widgets and adding again</MESSAGE>
      <SHA>b3bf716823b0c72e72c5bb4f3bc64812ce93afc5</SHA>
      <PATCHEDFILES>
        <FILE>handlers/widgets.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
