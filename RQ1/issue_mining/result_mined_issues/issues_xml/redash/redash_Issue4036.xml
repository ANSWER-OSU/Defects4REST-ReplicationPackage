<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4036</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/4036</ISSUEURL>
  <TITLE>Visualisation editor crashes out when changing datetype to non-HTML text</TITLE>
  <DESCRIPTION>### Issue Summary When editing an example visualisation in our hosted instance, the visualisation editor crashes out (back to the source editing view). In this crashed-out mode, the buttons (eg Save, Execute) look like they work but don't. User drop down menu also doesn't work. ### Steps to Reproduce 1. Logging in as Melissa Payne, go to this simple query: https://redash-preview.netlify.com/queries/194/source#346 2. Edit the Table Visualisation 3. Change the first field to be displayed as Text 4. Untick the &quot;Allow HTML content&quot; checkbox. The crash happens here, with the entire visualization editor crashing out It looks almost like the Cancel button has been pressed, however (at least) the Save and Execute buttons don't function, the User drop down menu doesn't work, etc. ### Technical details: * Redash Version: 8.0.0-beta+bea950b0 * Browser/OS: Firefox 68.0.1 on CentOS 7 x64 * How did you install Redash: n/a</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Focus DatePicker after selecting dynamic values (#4033)</MESSAGE>
    <SHA>6fc4d5b551e49041db68112407e38eb116e29eec</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>getredash/redash#4036 Visualisation editor crashes out when changing datetype to non-HTML text</MESSAGE>
      <SHA>0eb37a5383e7c529df52e449fdcfe7baeda2d64a</SHA>
      <PATCHEDFILES>
        <FILE>client/app/lib/value-format.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>getredash/redash#4036 Visualisation editor crashes out when changing datetype to non-HTML text (#4037)</MESSAGE>
      <SHA>e41d40bbe007013b98380a8880c52b53f5415348</SHA>
      <PATCHEDFILES>
        <FILE>client/app/lib/value-format.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>getredash/redash#4036 Visualisation editor crashes out when changing datetype to non-HTML text (#4037)</MESSAGE>
      <SHA>6677184da9393ae7744485fdfeaccb3fe1da0a41</SHA>
      <PATCHEDFILES>
        <FILE>client/app/lib/value-format.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
