<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>908</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/908</ISSUEURL>
  <TITLE>Error on adding modules to python datasource</TITLE>
  <DESCRIPTION>I'm trying to add a module to a python datasource, but it's failing with this traceback ``` Traceback (most recent call last): File &quot;/usr/local/lib/python2.7/dist-packages/flask/app.py&quot;, line 1475, in full_dispatch_request rv = self.dispatch_request() File &quot;/usr/local/lib/python2.7/dist-packages/flask/app.py&quot;, line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File &quot;/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py&quot;, line 477, in wrapper resp = resource(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask_login.py&quot;, line 792, in decorated_view return func(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask/views.py&quot;, line 84, in view return self.dispatch_request(*args, **kwargs) File &quot;/opt/redash/redash.0.9.2.b1536/redash/handlers/base.py&quot;, line 19, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py&quot;, line 587, in dispatch_request resp = meth(*args, **kwargs) File &quot;/opt/redash/redash.0.9.2.b1536/redash/permissions.py&quot;, line 40, in decorated return fn(*args, **kwargs) File &quot;/opt/redash/redash.0.9.2.b1536/redash/handlers/data_sources.py&quot;, line 38, in post data_source.options.update(req['options']) File &quot;/opt/redash/redash.0.9.2.b1536/redash/utils/configuration.py&quot;, line 56, in update if k in self.schema['secret'] and v == SECRET_PLACEHOLDER: KeyError: 'secret' ```</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Remove unused (Heroku related) Procfiles</MESSAGE>
    <SHA>6104e5df3c8cc4ca7ad4854731e7d20e2eeee33b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #908: updating configuration without secrets was failing</MESSAGE>
      <SHA>33a5e06eb12b30392a80ba33a05961176ebc525a</SHA>
      <PATCHEDFILES>
        <FILE>redash/utils/configuration.py</FILE>
        <FILE>tests/test_configuration.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #909 from getredash/fix908 Fix #908: updating configuration without secrets was failing</MESSAGE>
      <SHA>0e7098020c9cb3369817a42e15dffad523271e46</SHA>
      <PATCHEDFILES>
        <FILE>redash/utils/configuration.py</FILE>
        <FILE>tests/test_configuration.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #908: updating configuration without secrets was failing</MESSAGE>
      <SHA>6dfbdb3b9daa8e3dc756a7396554a80095197c3b</SHA>
      <PATCHEDFILES>
        <FILE>utils/configuration.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #909 from getredash/fix908 Fix #908: updating configuration without secrets was failing</MESSAGE>
      <SHA>1c13f8410113347aedc07fd4f4f15c7372440cce</SHA>
      <PATCHEDFILES>
        <FILE>utils/configuration.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
