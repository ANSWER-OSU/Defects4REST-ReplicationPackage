<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>783</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/783</ISSUEURL>
  <TITLE>AttributeError: 'datetime.timedelta' object has no attribute 'isoformat'</TITLE>
  <DESCRIPTION>On the latest 0.9.2-rc: ``` [2016-01-21 14:30:36,838: ERROR/MainProcess] Task redash.tasks.execute_query[766d3f9f-68a6-4a64-8cd9-b7e4e18bf2af] raised unexpected: AttributeError(&quot;'datetime.timedelta' object has no attribute 'isoformat'&quot;,) Traceback (most recent call last): File &quot;/usr/local/lib/python2.7/dist-packages/celery/app/trace.py&quot;, line 240, in trace_task R = retval = fun(*args, **kwargs) File &quot;/opt/redash/redash/tasks.py&quot;, line 31, in __call__ return super(BaseTask, self).__call__(*args, **kwargs) File &quot;/usr/local/lib/python2.7/dist-packages/celery/app/trace.py&quot;, line 437, in __protected_call__ return self.run(*args, **kwargs) File &quot;/opt/redash/redash/tasks.py&quot;, line 286, in execute_query data, error = query_runner.run_query(annotated_query) File &quot;/opt/redash/redash/query_runner/pg.py&quot;, line 132, in run_query json_data = json.dumps(data, cls=JSONEncoder) File &quot;/usr/lib/python2.7/json/__init__.py&quot;, line 250, in dumps sort_keys=sort_keys, **kw).encode(obj) File &quot;/usr/lib/python2.7/json/encoder.py&quot;, line 207, in encode chunks = self.iterencode(o, _one_shot=True) File &quot;/usr/lib/python2.7/json/encoder.py&quot;, line 270, in iterencode return _iterencode(o, 0) File &quot;/opt/redash/redash/utils.py&quot;, line 57, in default return o.isoformat() AttributeError: 'datetime.timedelta' object has no attribute 'isoformat' ```</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update __init__.py</MESSAGE>
    <SHA>33ffb2158b7f70286dc7572541cf509a7408af65</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix json serialization for datetime.timedelta, closes #783</MESSAGE>
      <SHA>e26ea40c9bbafa060523fc3b666e931d3ba70f1e</SHA>
      <PATCHEDFILES>
        <FILE>redash/utils.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #784 from bobrik/fix-isoformat Fix json serialization for datetime.timedelta, closes #783</MESSAGE>
      <SHA>bd7b60d859fcfe1e0a759c48e6a5eae16a64eb11</SHA>
      <PATCHEDFILES>
        <FILE>redash/utils.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix json serialization for datetime.timedelta, closes #783</MESSAGE>
      <SHA>472947074b04ce1d14757d6c27566d341f7f4de2</SHA>
      <PATCHEDFILES>
        <FILE>utils.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
