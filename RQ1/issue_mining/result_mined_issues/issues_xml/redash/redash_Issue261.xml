<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>261</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/261</ISSUEURL>
  <TITLE>Cancelling queries sends them into &quot;limbo&quot;</TITLE>
  <DESCRIPTION>If you cancel a query, it doesn't delete the lock which prevents it from running again. 1. If Celery raises an exception when cancelling a task, we need to handle it and cancel the task at this point. 2. Expire the lock keys after predefined time. 3. When locking, if it's possible to check if a job still running, verify it still running/exists, if not - ignore the lock.</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>30</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge QueryResultAPI with CSVQueryResultAPI</MESSAGE>
    <SHA>6e1e0a996764128c6732c2e66dafbce6c6e512c4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #261: cancelling jobs sends them to limbo</MESSAGE>
      <SHA>7dc1176628842eaaf0386b006b17efdfb1f852ba</SHA>
      <PATCHEDFILES>
        <FILE>redash/tasks.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #280 from EverythingMe/fix_stuck_jobs Fix #261: cancelling jobs sends them to limbo</MESSAGE>
      <SHA>1274d36abc2ee2a981a8ec5acd4d58497d6eb869</SHA>
      <PATCHEDFILES>
        <FILE>redash/controllers.py</FILE>
        <FILE>redash/tasks.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Display &quot;no results found&quot; when searches have no results (re #261)</MESSAGE>
      <SHA>1550af5e92117c336570245d3acc6ad5e92cf986</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/queries-search-results-page.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Display &quot;no results found&quot; when searches have no results (re #261)</MESSAGE>
      <SHA>5ef9250000e1149f08bae5b61c3913d29eee1693</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/queries-search-results-page.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Display &quot;no results found&quot; when searches have no results (re #261)</MESSAGE>
      <SHA>fdb5b3f8d5b52b4f73ccb890750977b422798076</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/queries-search-results-page.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #261: cancelling jobs sends them to limbo</MESSAGE>
      <SHA>b22fc89e2930e957daf3866281a0449c1e990fab</SHA>
      <PATCHEDFILES>
        <FILE>tasks.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
