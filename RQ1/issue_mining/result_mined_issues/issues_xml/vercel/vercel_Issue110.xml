<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>110</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/110</ISSUEURL>
  <TITLE>Corrupt data stream due to HTTP/2 (suspected)</TITLE>
  <DESCRIPTION>After quite a few hours of investigation I suspect that multipart/form-data data streams become corrupt (garbled) due to HTTP/2. If I try to a upload a file when using HTTP/2 the first couple of bytes become garbled. If I disable HTTP/2 (chrome --disable-http2) then I am unable to reproduce the issue. I have only been able to reproduce the issue with one specific file on some computers. Not reproducable on all computers that I've tested with. See linked GitHub project for a minimal test project with detailed investigation observations. https://github.com/pqvst/form-test If the culprit is indeed the HTTP/2 stack in _now_ then I would say that this is a pretty critical issue since it means that file uploads aren't guaranteed to work. Perhaps there are other scenarios as well?</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>64</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Include /static directory for now/next (#109)</MESSAGE>
    <SHA>168b4cf2bbbcacf9ba6a5cb74448d46ddf4ad05e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>bump ncc to 0.2.0 (#110)</MESSAGE>
      <SHA>f328a53a3f6b6d3139f2e38ca06170130c135236</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-node-server/index.js</FILE>
        <FILE>packages/now-node/index.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
