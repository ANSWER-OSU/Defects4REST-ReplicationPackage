<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>522</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/522</ISSUEURL>
  <TITLE>Docker `--dotenv` loading environment inconsistently</TITLE>
  <DESCRIPTION>It seems like this is happening somewhere further down. Running `now deploy --docker --dotenv .env.dev` creates a container, but none of the env variables are available. I added logging within `now-deploy.js` right before calling `now.create`, to log the `env`, everything looks correct: - it is parsed correctly - any secrets that were referenced show up with values as `{ uid: 'sec_234l2k3jsdflkja' }` Some builds have the variables, others don't</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>553</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-ruby] Use BUNDLE_JOBS=4 for parallel Ruby gem downloads (#689)</MESSAGE>
    <SHA>880ef77b7b58fc3fde6f9ce2696cf5730567d25d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bumps ncc to 0.20.x (#641) * bumps ncc to 0.20.0 * upgrades to ncc@0.20.2 this includes the fixes for https://github.com/zeit/ncc/issues/434 * defines filterAssetBase when calling ncc This prevents assets from being evicted by ncc's filtering. * scopes includeFiles under the package root it was previously scoped under the directory of the input file currently being processed. This should fix #522 along with fixing the 09-include-files tests for now-node * Bump to ncc 0.20.3 * Bump ncc-watcher to 1.1.0</MESSAGE>
      <SHA>df2769717baa50d82dcb7633172b19f366642358</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-node-server/index.js</FILE>
        <FILE>packages/now-node-server/package.json</FILE>
        <FILE>packages/now-node/@types/zeit__ncc/index.d.ts</FILE>
        <FILE>packages/now-node/package.json</FILE>
        <FILE>packages/now-node/src/index.ts</FILE>
        <FILE>yarn.lock</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
