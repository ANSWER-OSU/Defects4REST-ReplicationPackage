<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2696</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2696</ISSUEURL>
  <TITLE>Serving an empty dir with `now dev` should render 404</TITLE>
  <DESCRIPTION>Currently, serving a empty directory will cause a infinite loop of warnings that make no sense to the user. Instead, we want to make it work and render a 404, if possible. And also replicate the warning that `now` generates: ![image](https://user-images.githubusercontent.com/6170607/62456834-ac3b3d00-b779-11e9-9486-bdfa9f7daa2b.png) [empty dir.mp4.zip](https://github.com/zeit/now-cli/files/3467067/empty.dir.mp4.zip)</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>15.9.0-canary.28</MESSAGE>
    <SHA>9a6ad1ae43f2b15ab0729f8113a3ed83fa81b4a6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now dev] Render warning upon empty `cwd` directory The warning matches the one that `now deploy` prints, and only prints the warning once (rather then upon every HTTP request). Closes #2696.</MESSAGE>
      <SHA>20f8e8925521e849678980cfc95c2f42ae235515</SHA>
      <PATCHEDFILES>
        <FILE>src/util/dev/builder.ts</FILE>
        <FILE>src/util/dev/router.ts</FILE>
        <FILE>src/util/dev/server.ts</FILE>
        <FILE>src/util/dev/static-builder.ts</FILE>
        <FILE>test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Print warning upon empty `cwd` directory (#2702) * [now dev] Render warning upon empty `cwd` directory The warning matches the one that `now deploy` prints, and only prints the warning once (rather then upon every HTTP request). Closes #2696. * Fix eslint warning * Add &quot;pipe&quot; * Debugging… * Fix integration test * Debugging… * Add `--verbose` to &quot;test-integration-now-dev&quot; script * Ignore `yarn.lock` and `node_modules` in test dir * Ignore `hugo` binary * Ignore `public` dir in hugo test fixture * Add `.gitignore` to `empty` test fixture * Revert &quot;Debugging…&quot; This reverts commit 27c6d2e06fe7eff12077a0e88915cf46b39b00ea. * Ignore `public` / `dist` dirs in fixtures</MESSAGE>
      <SHA>28bfcb4c5837824caba314e35c816139bca2fa75</SHA>
      <PATCHEDFILES>
        <FILE>.gitignore</FILE>
        <FILE>package.json</FILE>
        <FILE>src/util/dev/builder.ts</FILE>
        <FILE>src/util/dev/router.ts</FILE>
        <FILE>src/util/dev/server.ts</FILE>
        <FILE>src/util/dev/static-builder.ts</FILE>
        <FILE>test/dev/fixtures/empty/.gitignore</FILE>
        <FILE>test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Print warning upon empty `cwd` directory (#2702) * [now dev] Render warning upon empty `cwd` directory The warning matches the one that `now deploy` prints, and only prints the warning once (rather then upon every HTTP request). Closes #2696. * Fix eslint warning * Add &quot;pipe&quot; * Debugging… * Fix integration test * Debugging… * Add `--verbose` to &quot;test-integration-now-dev&quot; script * Ignore `yarn.lock` and `node_modules` in test dir * Ignore `hugo` binary * Ignore `public` dir in hugo test fixture * Add `.gitignore` to `empty` test fixture * Revert &quot;Debugging…&quot; This reverts commit 27c6d2e06fe7eff12077a0e88915cf46b39b00ea. * Ignore `public` / `dist` dirs in fixtures</MESSAGE>
      <SHA>3ff20049297ca3b86a1f9f97ad4bfc7603cec714</SHA>
      <PATCHEDFILES>
        <FILE>.gitignore</FILE>
        <FILE>package.json</FILE>
        <FILE>src/util/dev/builder.ts</FILE>
        <FILE>src/util/dev/router.ts</FILE>
        <FILE>src/util/dev/server.ts</FILE>
        <FILE>src/util/dev/static-builder.ts</FILE>
        <FILE>test/dev/fixtures/empty/.gitignore</FILE>
        <FILE>test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
