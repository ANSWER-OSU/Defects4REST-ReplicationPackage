<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2982</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2982</ISSUEURL>
  <TITLE>Prevent using environment variables that don't match AWS' rules</TITLE>
  <DESCRIPTION>Currently, we accept variables that start with `_`, for example. In https://github.com/zeit/api/issues/862, the API will be fixed so that `now` automatically throws an error for those, as [AWS doesn't allow them](https://docs.aws.amazon.com/lambda/latest/dg/env_variables.html). However, we still need to ensure that `now dev` prints a validation error and exits immediately if it notices a environment variable in `now.json` that does NOT comply with the [AWS rules](https://docs.aws.amazon.com/lambda/latest/dg/env_variables.html).</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-cli] Add tests for alias rules (#3003)</MESSAGE>
    <SHA>64356baed328f63501083d969f1086ab581bb5f5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-cli] Show a warning for invalid env vars in `now dev` Closes #2982.</MESSAGE>
      <SHA>59635c47869228b1183cb29f14e19f29ec65f07a</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/util/dev/server.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Show a warning for invalid env vars in `now dev` (#3002) * [now-cli] Show a warning for invalid env vars in `now dev` Closes #2982. * Add &quot;validate env var names&quot; integration test</MESSAGE>
      <SHA>1be9ac59f08168c01271672f13911537ac056012</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/util/dev/server.ts</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/invalid-env-var-name/index.txt</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/invalid-env-var-name/now.json</FILE>
        <FILE>packages/now-cli/test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now-cli] Show a warning for invalid env vars in `now dev` (#3002) * [now-cli] Show a warning for invalid env vars in `now dev` Closes #2982. * Add &quot;validate env var names&quot; integration test</MESSAGE>
      <SHA>7fa4739c787ede09cdacd9c399239d927e76fffc</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-cli/src/util/dev/server.ts</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/invalid-env-var-name/index.txt</FILE>
        <FILE>packages/now-cli/test/dev/fixtures/invalid-env-var-name/now.json</FILE>
        <FILE>packages/now-cli/test/dev/integration.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
