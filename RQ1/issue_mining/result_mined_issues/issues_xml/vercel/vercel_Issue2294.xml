<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2294</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/2294</ISSUEURL>
  <TITLE>[now dev] Can't route a path that matches a file to a 404</TITLE>
  <DESCRIPTION>Here's my now.json: ```json { &quot;name&quot;: &quot;now-dev-bugs&quot;, &quot;version&quot;: 2, &quot;builds&quot;: [ { &quot;src&quot;: &quot;api/*.js&quot;, &quot;use&quot;: &quot;@now/node&quot; } ], &quot;routes&quot;: [ { &quot;src&quot;: &quot;/api/secret.js&quot;, &quot;status&quot;: 404 }, { &quot;src&quot;: &quot;/visible&quot;, &quot;dest&quot;: &quot;/api/secret.js&quot; } ] } ``` If you visit `localhost:3000/api/secret.js`, the function is invoked and it's output is displayed even though it is configured to 404 to make that path not work. This works as expected in production but it's broken in `now dev`. Reproduction: https://github.com/adamwathan/now-dev-bugs</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>15.0.11-canary.2</MESSAGE>
    <SHA>2ab71798de5b908fa11b97175e10897ccce5650c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now dev] Send all status codes if routes config contains one Before it was only respecting the status code for 301, 302 and 303 status codes. Now it handles any status code defined in the routes config. Fixes #2294.</MESSAGE>
      <SHA>90c5c5ac18d3b657ece6a6ab0b22d9db22ae330a</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-server.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Send all status codes if routes config contains one (#2307) Before it was only respecting the status code for 301, 302 and 303 status codes. Now it handles any status code defined in the routes config. Fixes #2294.</MESSAGE>
      <SHA>1e8a825e9410e84cda320ccd5e9d22d7c7f5cdd8</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-server.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[now dev] Send all status codes if routes config contains one (#2307) Before it was only respecting the status code for 301, 302 and 303 status codes. Now it handles any status code defined in the routes config. Fixes #2294.</MESSAGE>
      <SHA>22f7d69a7e91d679fdc314c79615960cc89654de</SHA>
      <PATCHEDFILES>
        <FILE>src/commands/dev/lib/dev-server.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
