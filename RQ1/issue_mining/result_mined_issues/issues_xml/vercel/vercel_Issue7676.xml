<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7676</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/7676</ISSUEURL>
  <TITLE>cli: `npx ts-eager src` no longer working</TITLE>
  <DESCRIPTION>Scenario: Trying to work on `packages/cli` locally. The README of `packages/cli` mentions it's possible to run the `cli` using `npx ts-eager src` here https://github.com/vercel/vercel/tree/main/packages/cli#local-development. This seems to have stopped working. Depending on which command I run, I get a slightly different error. ``` $ npx ts-eager src whoami Vercel CLI 24.1.1-canary.1 — https://vercel.com/feedback Error! Cannot find module '/x/vercel/vercel/packages/cli/src/commands/whoami' imported from /x/vercel/vercel/packages/cli/src/index.ts $ npx ts-eager src init Vercel CLI 24.1.1-canary.1 — https://vercel.com/feedback Error! Directory import '/x/vercel/vercel/packages/cli/src/commands/init' is not supported resolving ES modules imported from /x/vercel/vercel/packages/cli/src/index.ts ``` I guess the different error is due to the respective command either being a directory (`packages/cli/src/commands/init`) or a file (`packages/cli/src/commands/whoami.ts`).</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[tests] Add `turbo.json` and bump to turbo 1.2.2 (#7620) * Add `turbo.json` Ran `npx @turbo/codemod create-turbo-config` like the warnings have been telling us to. * [tests] Bump `turbo` and allow `turbo.json` in `.vercelignore` (#7623) Co-authored-by: Jared Palmer &lt;jared@jaredpalmer.com&gt; Co-authored-by: Steven &lt;steven@ceriously.com&gt;</MESSAGE>
    <SHA>92252468c2d67715809772d225a03e50dcecf1f3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix ts-eager Switches await import() to require().default so that ts-eager understands them. closes #7676</MESSAGE>
      <SHA>1df65eaac1fbe132b82de8e613aeed82b748f4ef</SHA>
      <PATCHEDFILES>
        <FILE>packages/cli/src/index.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix ts-eager (#7677) Switches await import() to require().default so that ts-eager understands them. closes #7676</MESSAGE>
      <SHA>625568e659fbcf8cf6870a5defdf63653a0031f7</SHA>
      <PATCHEDFILES>
        <FILE>packages/cli/src/index.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
