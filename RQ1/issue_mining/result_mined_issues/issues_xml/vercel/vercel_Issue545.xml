<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>545</ISSUENO>
  <ISSUEURL>https://github.com/vercel/vercel/issues/545</ISSUEURL>
  <TITLE>Cli not building project as specified in webpack config file</TITLE>
  <DESCRIPTION>OS: Windows 10 Pro now: 4.11.2 webpack: 1.14.0 npm: 3.10.10 yarn: 0.24.4 So, it appears that `now` is not building my project, based upon my package.json, as expected. My webpack.config.prod file, referenced in my package.json, dynamically builds an index.html, service_worker.json, and a cacheable bundle .js file. But what is actually happening is that the `now` process is picking up the static version of my index.html file, located in the root of my project: ``` &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Flamingo City&lt;/title&gt; &lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;http://wes.io/ehRe/my-favourite-icon.png&quot;/&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;root&quot;&gt;&lt;/div&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/static/bundle.js&quot;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ``` The index.html file that should be pushed to my now directory is as follows: ``` &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;Flamingo City&lt;/title&gt; &lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;/images/my-favourite-icon.png&quot;/&gt; &lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json&quot; /&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;root&quot;&gt;&lt;/div&gt; &lt;script&gt; /* Register Service Worker */ if('serviceWorker' in navigator) { ......... } &lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/main-e10ebce4a00d76daf58c.js&quot;&gt;&lt;/script&gt;&lt;/body&gt; &lt;/html&gt; ``` What is the issue here? My webpack.config.prod file is as follows: ``` var path = require('path'); var webpack = require('webpack'); var SWPrecacheWebpackPlugin = require('sw-precache-webpack-plugin'); const Dotenv = require('dotenv-webpack'); var HtmlWebpackPlugin = require('html-webpack-plugin'); module.exports = { devtool: 'source-map', context: __dirname, entry: { main: path.resolve(__dirname, './client/app'), }, output: { path: path.join(__dirname, '/public'), filename: '[name]-[hash].js', publicPath: '/' }, plugins: [ new webpack.optimize.OccurenceOrderPlugin(), new Dotenv({ path: './.env', // Path to .env file (this is the default) safe: true // load .env.example (defaults to &quot;false&quot; which does not use dotenv-safe) }), new webpack.DefinePlugin({ 'process.env': { 'NODE_ENV': &quot;'production'&quot; } }), new webpack.optimize.UglifyJsPlugin({ compressor: { warnings: false } }), new SWPrecacheWebpackPlugin( { cacheId: 'flamingoCity', filename: 'my-service-worker.js', staticFileGlobs: [ '/*.{js,html,css,js.map,json,png,jpg,gif,svg,eot,ttf,woff}', '/images/*.png', '/images/icons/*png', ], mergeStaticsConfig: true, stripPrefix: path.join(__dirname, 'public').replace(/\\/g,&quot;/&quot;), maximumFileSizeToCacheInBytes: 6194304, clientsClaim: true, minify: true, runtimeCaching: [{ handler: 'cacheFirst', urlPattern: '/', }], } ), new HtmlWebpackPlugin({ filename: 'index.html', template: './index_template.html' }) ], module: { loaders: [ // js { test: /\.js$/, loaders: ['babel'], include: path.join(__dirname, 'client') }, // CSS { test: /\.styl$/, include: path.join(__dirname, 'client'), loader: 'style-loader!css-loader!stylus-loader' } ] } }; ``` and my package.json file is as follows: ``` { &quot;name&quot;: &quot;learn-redux-graphql&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;:) &quot;, &quot;scripts&quot;: { &quot;build:webpack&quot;: &quot;set NODE_ENV=production &amp;&amp; webpack --config webpack.config.prod.js&quot;, &quot;build&quot;: &quot;npm run clean &amp;&amp; npm run build:webpack&quot;, &quot;test&quot;: &quot;NODE_ENV=production mocha './tests/**/*.spec.js' --compilers js:babel-core/register&quot;, &quot;clean&quot;: &quot;rimraf dist&quot;, &quot;start&quot;: &quot;node devServer.js&quot; }, &quot;repository&quot;: { &quot;type&quot;: &quot;git&quot;, &quot;url&quot;: &quot;https://github.com/TheoMer/learn-redux-graphql.git&quot; }, &quot;author&quot;: &quot;Theo Mer&quot;, &quot;license&quot;: &quot;MIT&quot;, &quot;homepage&quot;: &quot;https://github.com/TheoMer/learn-redux-graphql&quot;, &quot;dependencies&quot;: { &quot;apollo-client&quot;: &quot;^1.0.2&quot;, &quot;babel-core&quot;: &quot;^6.5.2&quot;, &quot;babel-eslint&quot;: &quot;^6.1.2&quot;, &quot;babel-loader&quot;: &quot;^6.2.3&quot;, &quot;babel-plugin-react-transform&quot;: &quot;^2.0.0&quot;, &quot;babel-plugin-transform-object-rest-spread&quot;: &quot;^6.5.0&quot;, &quot;babel-plugin-transform-react-display-name&quot;: &quot;^6.5.0&quot;, &quot;babel-polyfill&quot;: &quot;^6.5.0&quot;, &quot;babel-preset-es2015&quot;: &quot;^6.5.0&quot;, &quot;babel-preset-react&quot;: &quot;^6.5.0&quot;, &quot;css-loader&quot;: &quot;^0.23.1&quot;, &quot;dotenv-webpack&quot;: &quot;^1.4.5&quot;, &quot;eslint&quot;: &quot;^3.4.0&quot;, &quot;eslint-plugin-babel&quot;: &quot;^3.1.0&quot;, &quot;eslint-plugin-react&quot;: &quot;^4.1.0&quot;, &quot;express&quot;: &quot;^4.13.4&quot;, &quot;firebase&quot;: &quot;^3.3.0&quot;, &quot;graphql-tag&quot;: &quot;^1.3.2&quot;, &quot;graphql-tools&quot;: &quot;^0.10.1&quot;, &quot;immutability-helper&quot;: &quot;^2.1.2&quot;, &quot;lodash&quot;: &quot;^4.17.4&quot;, &quot;node-env-file&quot;: &quot;^0.1.8&quot;, &quot;raven-js&quot;: &quot;^2.1.1&quot;, &quot;react&quot;: &quot;^0.14.7&quot;, &quot;react-addons-css-transition-group&quot;: &quot;^0.14.7&quot;, &quot;react-apollo&quot;: &quot;^1.0.0-rc.3&quot;, &quot;react-dom&quot;: &quot;^0.14.7&quot;, &quot;react-redux&quot;: &quot;^4.4.0&quot;, &quot;react-router&quot;: &quot;^2.0.0&quot;, &quot;react-router-redux&quot;: &quot;^4.0.0&quot;, &quot;react-transform-catch-errors&quot;: &quot;^1.0.2&quot;, &quot;react-transform-hmr&quot;: &quot;^1.0.2&quot;, &quot;redbox-react&quot;: &quot;^1.2.2&quot;, &quot;redux&quot;: &quot;^3.3.1&quot;, &quot;redux-thunk&quot;: &quot;^2.0.1&quot;, &quot;rimraf&quot;: &quot;^2.5.2&quot;, &quot;style-loader&quot;: &quot;^0.13.0&quot;, &quot;stylus&quot;: &quot;^0.54.5&quot;, &quot;stylus-loader&quot;: &quot;^2.3.1&quot;, &quot;subscriptions-transport-ws&quot;: &quot;^0.5.5-alpha.0&quot;, &quot;webpack&quot;: &quot;^1.12.14&quot;, &quot;webpack-dev-middleware&quot;: &quot;^1.5.1&quot;, &quot;webpack-hot-middleware&quot;: &quot;^2.7.1&quot; }, &quot;devDependencies&quot;: { &quot;babel-plugin-transform-react-jsx&quot;: &quot;^6.23.0&quot;, &quot;expect&quot;: &quot;^1.14.0&quot;, &quot;expect-jsx&quot;: &quot;^2.3.0&quot;, &quot;html-webpack-plugin&quot;: &quot;^2.28.0&quot;, &quot;mocha&quot;: &quot;^2.4.5&quot;, &quot;react-addons-test-utils&quot;: &quot;^0.14.7&quot;, &quot;sw-precache-webpack-plugin&quot;: &quot;^0.9.1&quot; }, &quot;babel&quot;: { &quot;presets&quot;: [ &quot;react&quot;, &quot;es2015&quot; ], &quot;env&quot;: { &quot;development&quot;: { &quot;plugins&quot;: [ [ &quot;transform-object-rest-spread&quot; ], [ &quot;transform-react-display-name&quot; ], [ &quot;react-transform&quot;, { &quot;transforms&quot;: [ { &quot;transform&quot;: &quot;react-transform-hmr&quot;, &quot;imports&quot;: [ &quot;react&quot; ], &quot;locals&quot;: [ &quot;module&quot; ] }, { &quot;transform&quot;: &quot;react-transform-catch-errors&quot;, &quot;imports&quot;: [ &quot;react&quot;, &quot;redbox-react&quot; ] } ] } ] ] }, &quot;production&quot;: { &quot;plugins&quot;: [ [ &quot;transform-object-rest-spread&quot; ], [ &quot;transform-react-display-name&quot; ] ] } } }, &quot;eslintConfig&quot;: { &quot;ecmaFeatures&quot;: { &quot;jsx&quot;: true, &quot;modules&quot;: true }, &quot;env&quot;: { &quot;browser&quot;: true, &quot;node&quot;: true }, &quot;parser&quot;: &quot;babel-eslint&quot;, &quot;rules&quot;: { &quot;quotes&quot;: [ 2, &quot;single&quot; ], &quot;strict&quot;: [ 2, &quot;never&quot; ], &quot;babel/generator-star-spacing&quot;: 1, &quot;babel/new-cap&quot;: 1, &quot;babel/object-shorthand&quot;: 1, &quot;babel/arrow-parens&quot;: 1, &quot;babel/no-await-in-loop&quot;: 1, &quot;react/jsx-uses-react&quot;: 2, &quot;react/jsx-uses-vars&quot;: 2, &quot;react/react-in-jsx-scope&quot;: 2 }, &quot;plugins&quot;: [ &quot;babel&quot;, &quot;react&quot; ] } } ```</DESCRIPTION>
  <REPONAME>vercel</REPONAME>
  <TIMEDIFFERENCEDAYS>546</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[now-next] Update appending .html to exported routes (#592)</MESSAGE>
    <SHA>5a92826eb072e2c0fda8bb0f04ba7123ea80110a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[now-python] Do not append query string to path (#580) * Do not append query string to path - fixes \#545 * Avoid creating multiple parsed urls * Fix missing whitespace * Fix handler * Remove unused imports</MESSAGE>
      <SHA>1a8df7080d45b099e1cf0ca9c5b661f97a1a357f</SHA>
      <PATCHEDFILES>
        <FILE>packages/now-python/now_init.py</FILE>
        <FILE>packages/now-python/test/fixtures/09-url-params/custom.py</FILE>
        <FILE>packages/now-python/test/fixtures/09-url-params/index.py</FILE>
        <FILE>packages/now-python/test/fixtures/09-url-params/now.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
