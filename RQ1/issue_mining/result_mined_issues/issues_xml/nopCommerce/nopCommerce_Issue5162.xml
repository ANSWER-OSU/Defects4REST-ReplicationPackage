<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5162</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5162</ISSUEURL>
  <TITLE>Allow to mark shipments as ready for pick-up (for &quot;pick-up in store&quot; orders)</TITLE>
  <DESCRIPTION>When a store owner has pickup in store enabled, then there's no user-friendly way to notify a customer when a shipment is ready for pick-up. We also have to add a way to mark such shipments as ready for pick-up In such cases a store owner create a new shipment but doesn't mark it as shipped or delivered. So there's no need to add a new shipping status. We just have to allow a store to mark such &quot;Shipment&quot; records as &quot;ready for pick-up&quot; (add a new boolean property to the &quot;Shipment&quot; entity). This option should be available only for orders with &quot;PickupInStore&quot; set to &quot;true&quot;, there's no need to display it for other orders. When a shipment is marked as ready for shipping, then we have to send a new message template (&quot;ShipmentReadyForPickup.CustomerNotification&quot;) to a customer</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>379</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5510. Do not show &quot;out of stock&quot; by default for combinations without selected values (cherry picked from commit d8c5c80e5803bc2ee814c9d384a1153778aa29a4)</MESSAGE>
    <SHA>90a2ef96c3e07d2e810adb8c8345f4f0b4b55e56</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5162 Allow to mark shipments as ready for pick-up</MESSAGE>
      <SHA>420005f3601820845c198f0cb1409ac6b5235bd6</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Messages/MessageTemplateSystemNames.cs</FILE>
        <FILE>src/Libraries/Nop.Core/Domain/Shipping/Shipment.cs</FILE>
        <FILE>src/Libraries/Nop.Core/Domain/Shipping/ShipmentReadyForPickupEvent.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/FluentMigratorMetadataReader.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo450/DataMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Installation/InstallationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/IWorkflowMessageService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/MessageTokenProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Messages/WorkflowMessageService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/IOrderProcessingService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/IOrderService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderProcessingService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Shipping/EventPublisherExtensions.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Shipping/IShipmentService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Shipping/ShipmentService.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo450/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/OrderController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/OrderModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Infrastructure/Mapper/AdminMapperConfiguration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Orders/ShipmentModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Orders/ShipmentSearchModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Order/AddShipment.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Order/ShipmentDetails.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Order/ShipmentList.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Order/_OrderDetails.BillingShipping.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/OrderModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/Order/OrderDetailsModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/Order/ShipmentDetailsModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Order/Details.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Order/ShipmentDetails.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5162 Minor fix</MESSAGE>
      <SHA>0499ece7d2d8f03167b18e2072ada6fa6f5df6d2</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo450/DataMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderService.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo450/LocalizationMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
