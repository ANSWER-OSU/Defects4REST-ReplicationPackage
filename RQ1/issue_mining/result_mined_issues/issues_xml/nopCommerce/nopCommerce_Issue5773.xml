<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5773</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5773</ISSUEURL>
  <TITLE>Country Select JavaScript assumes state/province field is enabled</TITLE>
  <DESCRIPTION>nopCommerce version: 4.4 Steps to reproduce the problem: 1. Turn off state/province address field 2. Go to add new address in front end 3. Change selected country A script error will be thrown on public.countryselect.js line 35, Cannot read property 'id' of undefined. This is because the line in question assumes that the stateProvince jQuery object contains at least one element: `$('#' + stateProvince[0].id + ' option[value=' + stateId + ']').prop('selected', true);` Proposed fix: Wrap lines 34 &amp; 35 in: `if(stateProvince.length &gt; 0){}`</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'issue-5135-customer-product-reviews' into develop</MESSAGE>
    <SHA>58bbb4915d014e58fd7e960afaf8476a5711ed98</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5773 Fixed a client script exception on country change with 'State/province' is disabled</MESSAGE>
      <SHA>942bdcba6d03686898cbfedf85ebc57aaaeb1112</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/wwwroot/js/public.countryselect.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5773 Fixed a client script exception on country change with 'State/province' is disabled</MESSAGE>
      <SHA>2dbeb5f12a048049005e4c69d5a085296da4762a</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/wwwroot/js/public.countryselect.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5773 Fixed a client script exception on country change with 'State/province' is disabled</MESSAGE>
      <SHA>7698ecfeafc7b7d2ea783a4acf461e97d0b26933</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/wwwroot/js/public.countryselect.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5773 Fixed a client script exception on country change with 'State/province' is disabled</MESSAGE>
      <SHA>61c7db4ca452832970699119a026ff6026300548</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/wwwroot/js/public.countryselect.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
