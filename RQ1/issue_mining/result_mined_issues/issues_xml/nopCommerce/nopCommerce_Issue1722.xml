<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1722</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/1722</ISSUEURL>
  <TITLE>Products have references to deleted Tax Categories and use them (even when deleted)</TITLE>
  <DESCRIPTION>&quot;Fixed tax rate provider&quot; ![ca334870-705f-11e6-9fc2-b856b3363b28](https://cloud.githubusercontent.com/assets/5019111/18192426/c60c36ee-70dc-11e6-84ba-0ba82d7c624a.png) Steps to reproduce 1. \- Create a tax category 2. \- Assign tax category to the product 3. \- Delete tax category Expected results: TaxCategoryId of Product is set to 0 Actual results: TaxCategoryId of Product points to non-existing tax category The same is about &quot;Tax By Country &amp; State &amp; Zip&quot; provider</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#1347 Do not allow to remove required products from the cart</MESSAGE>
    <SHA>65b5542b4fb6b0d5554a732c31b4cac3101fd64f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#1722 &quot;Tax By Country &amp; State &amp; Zip&quot; and &quot;Fixed tax&quot; providers used rates of already deleted tax categories. Appropriate records should be deleted when a store owner deletes a tax category.</MESSAGE>
      <SHA>9c0ddd7a5cd6de7796e1b25d2bd93b2b0b3fa61d</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Tax.CountryStateZip/Description.txt</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.CountryStateZip/Infrastructure/Cache/ModelCacheEventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.FixedRate/Description.txt</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.FixedRate/Infrastructure/Cache/ModelCacheEventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.FixedRate/Nop.Plugin.Tax.FixedRate.csproj</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
