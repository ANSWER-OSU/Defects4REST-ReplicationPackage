<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4765</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4765</ISSUEURL>
  <TITLE>503 error during the application restart</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Steps to reproduce the problem: 1. Try to restart an already deploy application 2. You'll get the 503 error (service is not available) 3. When i refresh the page again then it reloads fine The same happens when you install nopCommerce But sometimes it works fine, sometimes - not Related: https://github.com/nopSolutions/nopCommerce/issues/4770, https://github.com/nopSolutions/nopCommerce/issues/4645, https://github.com/nopSolutions/nopCommerce/issues/4405 Also see https://www.nopcommerce.com/en/boards/topic/81873/43-release-http-error-5030-server-has-been-shutdown</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#4730 Fix display of estimate shipping for anon user</MESSAGE>
    <SHA>049a623146a047842ba9d588ec717d3925edc485</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#4765 Fixed &quot;503&quot; error during the application restart</MESSAGE>
      <SHA>0565bf0e842ab949e5f8c7fb83604378a3947529</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/IWebHelper.cs</FILE>
        <FILE>src/Libraries/Nop.Core/WebHelper.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>BUGFIX https://github.com/nopSolutions/nopCommerce/issues/4765 - unhandled thread termination during web app reset</MESSAGE>
      <SHA>80ac974064490c94221be69e0a7db8e73f62dc13</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Media/PictureService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
