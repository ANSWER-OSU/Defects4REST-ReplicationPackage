<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4919</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/4919</ISSUEURL>
  <TITLE>Display more user-friendly error when uploading non-picture file as a picture</TITLE>
  <DESCRIPTION>Steps to reproduce the problem: 1. Upload any non-picture file (e.g. XML or .cs) as a picture. For example, on a product details page 2. It gives a correct message that uploading failed. But also, 'Object reference not set to an instance of an object.' throwing error on picture controller side. Let's handle the exception so it's not thrown. There should be just an error text without an unhandled exception ![download](https://user-images.githubusercontent.com/5019111/86886520-c440dc80-c0ff-11ea-9869-c83c6e70e069.png) Source: https://www.nopcommerce.com/en/boards/topic/84221/picture-controller-in-get-error-object-reference-not-set-to-an-instance-of-an-object</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>103</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#3236 Properly include blog posts and news in the sitemap</MESSAGE>
    <SHA>4312ca7b2748da471dd07fc047d2fd57632e3eb9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Display more user-friendly error when uploading non-picture file as a picture #4919</MESSAGE>
      <SHA>6fa494a07b15a14861dc7e2cab0cc6bd01c69198</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/PictureController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/EditorTemplates/Picture.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#4919 Display more user-friendly error when uploading non-picture file as a picture</MESSAGE>
      <SHA>7b8c2510f35ca0d1fc978d1814d15fc86e69c908</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/PictureController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Shared/EditorTemplates/Picture.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
