<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2524</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/2524</ISSUEURL>
  <TITLE>Allow a store owner to configure maximum number of reward points that could be spent</TITLE>
  <DESCRIPTION>I would like to have a functionality where customer will be restricted to use no more than X reward points for a purchase of certain amount. This is to restrict the customer from not using all reward points at once, as sometimes for marketing purposes, most reward points can be given for free. This would be useful for scenarios such as &quot;USE 50% OF YOUR REWARD POINTS TO PAY FOR YOUR CART&quot;. Or &quot;USE ONLY 1000 REWARD POINTS PER ORDER&quot;. Source: https://www.nopcommerce.com/boards/t/48483/advancement-in-nop-commerce-reward-points-functionality.aspx</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>250</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed saving problem in FixedByWeightByTotal plugin after editing an rates row</MESSAGE>
    <SHA>c1f4fcc74e4e01f7479032086e5c07323ceec7c6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2524 Added possibility for store owner to configure maximum number of reward points that could be spent per one order</MESSAGE>
      <SHA>7e691fce1d027d1e12f72cc3d55f1ac71690f14c</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Customers/RewardPointsSettings.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Installation/CodeFirstInstallationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/IRewardPointService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/OrderTotalCalculationService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/RewardPointService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/SettingController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Infrastructure/Mapper/AdminMapperConfiguration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Settings/RewardPointsSettingsModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Setting/RewardPoints.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/CheckoutModelFactory.cs</FILE>
        <FILE>upgradescripts/4.00-4.10 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
