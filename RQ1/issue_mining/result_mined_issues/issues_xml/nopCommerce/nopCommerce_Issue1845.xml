<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1845</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/1845</ISSUEURL>
  <TITLE>Issue with discounts with the same code</TITLE>
  <DESCRIPTION>If you have several discounts with the same code, and one of them cannot be applied for some reasons (e.g. requirements are not met, etc), then you can get &quot;The coupon code you entered couldn't be applied to your order&quot; error when entering coupon code on the shopping cart page. Because we valdiate only the first found discount. We should do it for ALL found discounts</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#148 Further changes on &quot;Performance. We should remove only appropriate records from cache when some event is triggered (not all ones)&quot;</MESSAGE>
    <SHA>bef112c6b050c087b11fcd5a0258b1a86381e53e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#1845 Further changes on cumulitive discount support (with cpoupon codes). If you have several discounts with the same code, and one of them cannot be applied for some reasons (e.g. requirements are not met, etc), then you can get &quot;The coupon code you entered couldn't be applied to your order&quot; error when entering coupon code on the shopping cart page. Because we valdiate only the first found discount. We should do it for ALL found discounts</MESSAGE>
      <SHA>142f28de685201659d5715d5fa9f757bdbf3e6c6</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Discounts/DiscountService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Discounts/IDiscountService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
