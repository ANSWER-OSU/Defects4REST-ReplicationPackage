<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5482</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5482</ISSUEURL>
  <TITLE>Avalara tax plugin. Too many GetTax API Calls</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Source: https://www.nopcommerce.com/boards/topic/90367/avalara-plugin-making-too-many-gettax-api-calls We should use the [DownloadTaxRatesByZipCode](https://developer.avalara.com/api-reference/avatax/rest/v2/methods/TaxContent/DownloadTaxRatesByZipCode/) endpoint and update the tax rates monthly. This would allow us to provide a tax estimate without pinging AvaTax for a tax calculation and will reduce calls to AvaTax.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>278</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Further improvements to clear master checkbox</MESSAGE>
    <SHA>7528dadf131f983ab99ed0e75bb998ba5abd37f3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5482 Avalara tax plugin. Added a configurable way to get tax rates only by the address to reduce the number of api calls</MESSAGE>
      <SHA>fc7c56a56166cf25e9e80abfa729d83d2c3e9516</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxSettings.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Controllers/AvalaraController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Models/Configuration/ConfigurationModel.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Services/AvalaraTaxManager.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Services/Caching/CustomerCacheEventConsumer.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Views/Configuration/_Configuration.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/plugin.json</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/SettingMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#5482 Avalara tax plugin. Use tax rate tables to estimate</MESSAGE>
      <SHA>07bf4623ac36b41c73be942301b54e9bc7c67313</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxDefaults.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxProvider.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/AvalaraTaxSettings.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Controllers/AvalaraController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Data/ScheduleTaskMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Domain/TaxRate.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Models/Configuration/ConfigurationModel.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Nop.Plugin.Tax.Avalara.csproj</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Services/AvalaraTaxManager.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Services/DownloadTaxRatesTask.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Views/Configuration/_Configuration.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/plugin.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
