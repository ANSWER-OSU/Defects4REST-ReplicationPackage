<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1382</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/1382</ISSUEURL>
  <TITLE>Refactoring. Merge functionality SaveSetting and DeleteSetting of IsettingService.</TITLE>
  <DESCRIPTION>For example, you can create an extension method: ``` public static void SettingUpdate&lt;T, TPropType&gt;(this T settings, ISettingService settingService, Expression&lt;Func&lt;T, TPropType&gt;&gt; keySelector, bool overrideForStore, int storeScope, bool clearCache) where T : ISettings, new() { if (overrideForStore || storeScope == 0) settingService.SaveSetting(settings, keySelector, storeScope, clearCache); else if (storeScope &gt; 0) settingService.DeleteSetting(settings, keySelector, storeScope); } ``` Then we can replace this code: ``` if (model.ProductThumbPictureSize_OverrideForStore || storeScope == 0) _settingService.SaveSetting(mediaSettings, x =&gt; x.ProductThumbPictureSize, storeScope, false); else if (storeScope &gt; 0) _settingService.DeleteSetting(mediaSettings, x =&gt; x.ProductThumbPictureSize, storeScope); ``` On that: `mediaSettings.SettingUpdate(_settingService, x =&gt; x.ProductThumbPictureSize, model.ProductThumbPictureSize_OverrideForStore, storeScope, false);`</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>35</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of https://github.com/nopSolutions/nopCommerce into develop</MESSAGE>
    <SHA>87d7157877285a0a14016ff86835e122a80e0c88</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#1382 Refactoring. Simplified code to save settings overridable by store</MESSAGE>
      <SHA>c8ac01be43ab8cad676ac5a094eba98141b5f7ac</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Configuration/ISettingService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Configuration/SettingService.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.ExternalAuth.Facebook/Controllers/ExternalAuthFacebookController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.CheckMoneyOrder/Controllers/PaymentCheckMoneyOrderController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.Manual/Controllers/PaymentManualController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalDirect/Controllers/PaymentPayPalDirectController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalStandard/Controllers/PaymentPayPalStandardController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PurchaseOrder/Controllers/PaymentPurchaseOrderController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Controllers/WidgetsGoogleAnalyticsController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.NivoSlider/Controllers/WidgetsNivoSliderController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Administration/Controllers/SettingController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
