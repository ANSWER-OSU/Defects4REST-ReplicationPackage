<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6098</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6098</ISSUEURL>
  <TITLE>upgrading a database from 4.3 to 4.5 directly does not work</TITLE>
  <DESCRIPTION>nopCommerce version: 4.50 Steps to reproduce the problem: I just tested upgrading a database from 4.3 to 4.5 directly (using the migrations provided by nopCommerce) but I got the following error: ``` Unhandled exception. System.AggregateException: One or more errors occurred. (The value '0' is not a valid value for the enum 'ShippingSortingEnum'.) ---&gt; System.ArgumentException: The value '0' is not a valid value for the enum 'ShippingSortingEnum'. at System.ComponentModel.EnumConverter.ConvertTo(ITypeDescriptorContext context, CultureInfo culture, Object value, Type destinationType) at System.ComponentModel.TypeConverter.ConvertToString(ITypeDescriptorContext context, CultureInfo culture, Object value) at System.ComponentModel.TypeConverter.ConvertToInvariantString(Object value) at Nop.Services.Configuration.SettingService.SetSettingAsync(Type type, String key, Object value, Int32 storeId, Boolean clearCache) at Nop.Services.Configuration.SettingService.SaveSettingAsync[T](T settings, Int32 storeId) --- End of inner exception stack trace --- at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken) at System.Threading.Tasks.Task.Wait() at Nop.Web.Framework.Migrations.UpgradeTo440.SettingMigration.Up() at FluentMigrator.MigrationBase.GetUpExpressions(IMigrationContext context) at FluentMigrator.Runner.MigrationRunner.&lt;&gt;c.&lt;ApplyMigrationUp&gt;b__69_0(IMigration m, IMigrationContext c) at FluentMigrator.Runner.MigrationRunner.ExecuteMigration(IMigration migration, Action`2 getExpressions) at FluentMigrator.Runner.MigrationRunner.ApplyMigrationUp(IMigrationInfo migrationInfo, Boolean useTransaction) at FluentMigrator.Runner.MigrationRunner.Up(IMigration migration) at Nop.Data.Migrations.MigrationManager.ApplyUpMigrations(Assembly assembly, MigrationProcessType migrationProcessType) at Nop.Web.Framework.Infrastructure.Extensions.ApplicationBuilderExtensions.StartEngine(IApplicationBuilder application) at Program.&lt;Main&gt;$(String[] args) ``` See details on [this post](https://www.nopcommerce.com/en/boards/topic/92668/nopcommerce-450-suggestions-bug-reports-and-improvements/page/3#292230)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>EasyPost shipping plugin. Some script fixes</MESSAGE>
    <SHA>656a55b3a17b8e9b0b7e5ac89362e11cdd11582e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6098 Fixed problem with upgrading a database from 4.3 to 4.5 directly</MESSAGE>
      <SHA>1c5befe3d53f933cf216f6319552e3f154f04415</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo440/SettingMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo450/SettingMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
