<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2992</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/2992</ISSUEURL>
  <TITLE>Google Analytics. Qty is not properly passed</TITLE>
  <DESCRIPTION>nopCommerce version: 4.00 Steps to reproduce the problem: 1. Create a product. Set its SKU 2. Add a product attribute and two values (e.g. value1 and value2) 3. Add this product to the cart with qty 1 and value1 4. Add this product to the cart with qty 1 and value2 5. Place an order 6. You'll see in GA only one product line (SKU) with qty 1 (that it wrong) Of course, we can create combinations and its unique SKU. But it won't help us when product attribute type is textbox. So we can group products (qty) by SKU and sum up its cost. But not sure that it's correct way to go</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>48</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#3053 Changed GDPR consents and &quot;Accept privacy policy&quot; checkboxes markup and styles</MESSAGE>
    <SHA>adc1f213fd37e32d3a8e9b55760b6dc2745dcae4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2992 Google Analytics plugin. Product quanlity wasn't not properly passed #2993 Google Analytics plugin. UTM (campaign) details were ignored when passing ecommerce details to GA IMPORTANT NOTE: the plugin should be re-installed to work properly</MESSAGE>
      <SHA>8863ffd7157aaa15eeb39e4096ee401e6ba97f01</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Components/WidgetsGoogleAnalyticsViewComponent.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Controllers/WidgetsGoogleAnalyticsController.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Events.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/GoogleAnalyticsPlugin.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/GoogleAnalyticsSettings.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Models/ConfigurationModel.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/Views/Configure.cshtml</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.GoogleAnalytics/plugin.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
