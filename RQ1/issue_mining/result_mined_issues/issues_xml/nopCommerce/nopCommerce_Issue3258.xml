<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3258</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3258</ISSUEURL>
  <TITLE>Custom address attributes validation not working with existing billing and shipping addresses</TITLE>
  <DESCRIPTION>nopCommerce version: 4.10 Steps to reproduce the problem: 1) Add any product to cart. 2) Added one address attribute http://admin-demo.nopcommerce.com/Admin/AddressAttribute/Create like Voter Id, control type text box and set to required property checked. 3) Now i place that order. 4) During checkout step 1(billing ) and step 2 (shipping) validation not working with existing address and it goes to step 3 .It should be display message with voter id required but, when i select new address at that time it was working fine.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>106</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed ProductModel automapper setting</MESSAGE>
    <SHA>f2b1e16e7347fc905a194db26a04b10c791d0036</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3258 Fixed IsAddressValid method in AddressService and added address validation before checkout.</MESSAGE>
      <SHA>ad2d7a3723ea41734451f0911d01331053bd2480</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Common/AddressService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/CheckoutModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/Checkout/CheckoutBillingAddressModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/Checkout/CheckoutShippingAddressModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Checkout/BillingAddress.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Checkout/OpcBillingAddress.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Checkout/OpcShippingAddress.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Checkout/ShippingAddress.cshtml</FILE>
        <FILE>upgradescripts/4.10-4.20 (under development)/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
