<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5317</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5317</ISSUEURL>
  <TITLE>Homepage Categories not cached by store</TITLE>
  <DESCRIPTION>nopCommerce version: 4.30 Steps to reproduce the problem: - Create 2 stores with a category which is restricted to a single store - Set &quot;Show on home page&quot; on a category to true - When viewing the different store home pages, eighter the category is showed on both stores or in none of them. It looks like the home page categories are not separately cached for the stores in the `PrepareHomepageCategoryModels `method in the `CatalogModelFactory`. Adding the `_storeContext.CurrentStore.Id` to the cache key should fix this issue.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Admin panel -fixed product specification attribute page</MESSAGE>
    <SHA>7c71c8a96ca7032e1fbd558281971f888ea57ac4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5317 Fixed caching problem on homepage categories</MESSAGE>
      <SHA>4ea8e3b5113e5f1b059fb871236183c37a27303c</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Factories/CatalogModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Infrastructure/Cache/NopModelCacheDefaults.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
