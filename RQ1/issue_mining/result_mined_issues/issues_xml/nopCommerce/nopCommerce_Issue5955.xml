<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5955</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5955</ISSUEURL>
  <TITLE>CopyProductService does not copy localized product spec attributes</TITLE>
  <DESCRIPTION>nopCommerce version: 4.4 Steps to reproduce the problem: - Create a product, and assign it a product spec attribute with a custom value, and set some text for the default language and a specific language. - Save the prdouct - Copy the product - Your spec attribute translation for the specific language will be gone, but the default language will be copied over. In order to workaround this issue I created a small plugin, overrideing CopyProductService.CopyProductSpecificationsAsync and modifiying the method to the following: ```c# protected override async Task CopyProductSpecificationsAsync(Product product, Product productCopy) { foreach (var productSpecificationAttribute in await _specificationAttributeService.GetProductSpecificationAttributesAsync(product.Id)) { // start base var psaCopy = new ProductSpecificationAttribute { ProductId = productCopy.Id, AttributeTypeId = productSpecificationAttribute.AttributeTypeId, SpecificationAttributeOptionId = productSpecificationAttribute.SpecificationAttributeOptionId, CustomValue = productSpecificationAttribute.CustomValue, AllowFiltering = productSpecificationAttribute.AllowFiltering, ShowOnProductPage = productSpecificationAttribute.ShowOnProductPage, DisplayOrder = productSpecificationAttribute.DisplayOrder }; await _specificationAttributeService.InsertProductSpecificationAttributeAsync(psaCopy); // end base // Innovapps start var allLanguages = await _languageService.GetAllLanguagesAsync(); foreach (var language in allLanguages) { var localizedValue = await _localizedEntityService.GetLocalizedValueAsync(language.Id, productSpecificationAttribute.Id, nameof(ProductSpecificationAttribute), nameof(ProductSpecificationAttribute.CustomValue)); if (localizedValue != null) { await _localizedEntityService.SaveLocalizedValueAsync(psaCopy, x =&gt; x.CustomValue, localizedValue, language.Id); } } // Innovapps end } } ```</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5680 fixed problem with customer avatar thumbnail is not updated after new avatar uploaded</MESSAGE>
    <SHA>db47629e933ec9cf6b1832bb31ef7cfddfa6ef53</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5955 Added copy localized product spec attributes during the product copying</MESSAGE>
      <SHA>96a4c0f79ea97a0254ae0a1b37296c8d312ed270</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/CopyProductService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
