<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5269</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5269</ISSUEURL>
  <TITLE>Shopping Cart required products can be edited (regression)</TITLE>
  <DESCRIPTION>nopCommerce version: 4.3 Steps to reproduce the problem: 1. Add a product to cart that requires another product and that required product is automatically added 2. Navigate to cart Required product is editable and allows removal and quantity changes. This was not the case in 4.2. ShoppingCartModel.ShoppingCartItemModel has a property _DisableRemoval_ In 4.2 it was populated via `cart.Any(item =&gt; item.Product.RequireOtherProducts &amp;&amp; _productService.ParseRequiredProductIds(item.Product).Contains(sci.ProductId));` In 4.3 a call is made to `_shoppingCartService.GetProductsRequiringProduct(cart, product).Any();` This method using the following logic: ` foreach (var cartProduct in cartProducts) { if (!cartProduct.RequireOtherProducts &amp;&amp; _productService.ParseRequiredProductIds(cartProduct).Contains(product.Id)) yield return cartProduct; }` The !cartProduct.RequireOtherProducts is short circuiting the checking of the required product Ids, and the _not_ operator should be removed.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5054 Fixed problem with the definition of AdditionalNameCompatibilities Property</MESSAGE>
    <SHA>6195c569d2f977880879c2dc46e1b16f13387b9c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5269 Removed erroneous not predicate</MESSAGE>
      <SHA>f9d4855ec39b9ce31f92527a836c6aedc3eb54f0</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Orders/ShoppingCartService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
