<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7118</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7118</ISSUEURL>
  <TITLE>QueryProcAsync and ExecuteNonQueryAsync doesn't close connection to DB</TITLE>
  <DESCRIPTION>nopCommerce version: 4.60.2 using MSSQL as DB When using `await _nopDataProvider.QueryProcAsync&lt;T&gt;` connections are not closed. It's the same with using `await _nopDataProvider.ExecuteNonQueryAsync&lt;T&gt;`. I think the problem is with method `CreateDbCommand`, it's not disposing connection as it should.</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#7110 Fixed adding query string parameters to the home page URL</MESSAGE>
    <SHA>49637f860092adc689e7bffebca884a36497c696</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7118 Fixed connection closing when executing database commands</MESSAGE>
      <SHA>c2759fa5e9c735fb4dd6f219e661c10be85f5b68</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Data/DataProviders/BaseDataProvider.cs</FILE>
        <FILE>src/Tests/Nop.Tests/SqLiteNopDataProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
