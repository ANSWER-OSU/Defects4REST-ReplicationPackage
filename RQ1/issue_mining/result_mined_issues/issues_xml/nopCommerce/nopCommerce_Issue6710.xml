<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6710</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6710</ISSUEURL>
  <TITLE>SqlException: Invalid column name 'PictureId' in version 4.70</TITLE>
  <DESCRIPTION>nopCommerce version: 4.70 SqlException: Invalid column name 'PictureId'. Steps to reproduce the problem: 1- Clone develop branch 2- Rebuild project 3- Run and install with sample data 4- click on a product with combination (for example Build your own computer) `Nop.Data.EntityRepository&lt;TEntity&gt;+&lt;&gt;c__DisplayClass13_0+&lt;&lt;GetAllAsync&gt;g__getAllAsync|0&gt;d.MoveNext() in EntityRepository.cs + return await query.ToListAsync(); Nop.Core.Caching.MemoryCacheManager.GetAsync&lt;T&gt;(CacheKey key, Func&lt;Task&lt;T&gt;&gt; acquire) Nop.Core.Caching.MemoryCacheManager.GetAsync&lt;T&gt;(CacheKey key, Func&lt;Task&lt;T&gt;&gt; acquire) in MemoryCacheManager.cs + throw; Nop.Data.EntityRepository&lt;TEntity&gt;.GetEntitiesAsync(Func&lt;Task&lt;IList&lt;TEntity&gt;&gt;&gt; getAllAsync, Func&lt;IStaticCacheManager, CacheKey&gt; getCacheKey) in EntityRepository.cs + return await _staticCacheManager.GetAsync(cacheKey, getAllAsync); Nop.Data.EntityRepository&lt;TEntity&gt;.GetAllAsync(Func&lt;IQueryable&lt;TEntity&gt;, IQueryable&lt;TEntity&gt;&gt; func, Func&lt;IStaticCacheManager, CacheKey&gt; getCacheKey, bool includeDeleted) in EntityRepository.cs + return await GetEntitiesAsync(getAllAsync, getCacheKey); Nop.Services.Catalog.ProductAttributeService.GetAllProductAttributeCombinationsAsync(int productId) in ProductAttributeService.cs + var combinations = await _productAttributeCombinationRepository.GetAllAsync(query =&gt; Nop.Web.Factories.ProductModelFactory.PrepareProductDetailsModelAsync(Product product, ShoppingCartItem updatecartitem, bool isAssociatedProduct) in ProductModelFactory.cs + model.InStock = (await _productAttributeService Nop.Web.Controllers.ProductController.ProductDetails(int productId, int updatecartitemid) in ProductController.cs + var model = await _productModelFactory.PrepareProductDetailsModelAsync(product, updatecartitem, false); Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor+TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, object controller, object[] arguments) System.Threading.Tasks.ValueTask&lt;TResult&gt;.get_Result()`</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>37</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '4.60-bug-fixes' into develop</MESSAGE>
    <SHA>27bc4d9f901235b88b7b23513cbe458048394ec1</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6710 Exclude PictureId property from database mapping</MESSAGE>
      <SHA>46ba998faa7b462648534fdadc97ca9226df6338</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Catalog/ProductAttributeCombination.cs</FILE>
        <FILE>src/Libraries/Nop.Core/Domain/Catalog/ProductAttributeValue.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#6710 Fixed problem with PictureId field and the database mapping</MESSAGE>
      <SHA>1ecb3eea0fec7297aeecbddc48a9b53c659bc5be</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Catalog/ProductAttributeCombination.cs</FILE>
        <FILE>src/Libraries/Nop.Core/Domain/Catalog/ProductAttributeValue.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo470/DataMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo470/SchemaMigration.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
