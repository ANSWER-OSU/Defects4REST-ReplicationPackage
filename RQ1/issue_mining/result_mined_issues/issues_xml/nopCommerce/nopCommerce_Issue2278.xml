<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2278</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/2278</ISSUEURL>
  <TITLE>PAngV (base price) is not updated by changing product attribute (price)</TITLE>
  <DESCRIPTION>Steps to reproduce this bug: Product info Tab: Article Price: 3.90 Euro Article Weight: 100 gram PAngV (base price) enabled: True Amount in product: 100 Unit of product : gram Reference amount: 1 Reference unit: KG Product Attribute Tab: Attribute name : Weigth(content) Control type: dropdown value 1 : 100 g - Price adjustment : 0 - Weight adjustment 0 Vakye 2: 200 g - Price adjustment : 3.2 - Weight adjustment 100 IN Public Store&gt; Product detail page: Price: 3.90 [100g] (€39.00 pro 1 kg(s)) If you select the 200 g from dropdown, the price will be updated: 3.90 + 3.20 = 7.10 But the price pro Kg is not updated!!! the expected price pro KG should be calculated as below: (1000 gr * 7.10 Euro)/200 gr = 35.50 It means in the article detail page we should show the following: (€35.50 pro 1 kg(s)) Source: http://www.nopcommerce.com/boards/t/46797/pangv-base-price-is-not-updated-by-changing-product-attribute-price.aspx</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>432</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of https://github.com/nopSolutions/nopCommerce into develop</MESSAGE>
    <SHA>e920b8bbb04cdc72e0199f12a012f97cfdbe8fe5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2278 Consider product attribute price adjustment when calculating base price (PAngV). Also &quot;FormatBasePrice&quot; method should accept price only in primary currency</MESSAGE>
      <SHA>afd1176824549ebffada988374c955c40e563298</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Controllers/ShoppingCartController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/ProductModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Product/_ProductAttributes.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Product/_ProductPrice.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
