<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5659</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5659</ISSUEURL>
  <TITLE>Do not allow guests to enter news/blog comments if comments are disabled</TITLE>
  <DESCRIPTION>nopCommerce version: 4.40 Steps to reproduce the problem: 1. Disable &quot;Allow guests to leave comments&quot; 2. Go to a news page in public store as a guest 3. Enter a comment and click the &quot;new comment&quot; button 4. Now a guest will see a warning &quot;Only registered users can leave comments&quot; We should disable inputs and display &quot;Only registered users can leave comments&quot; on a page load in such cases (before POST, not only after submitting) The same is about blog comments ![image](https://user-images.githubusercontent.com/5019111/116525048-cbc8b080-a8e0-11eb-8ea6-5ee37e89837b.png)</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#5645 fixed problem, on deleting cached by GUID instance of customer</MESSAGE>
    <SHA>a35f5f2b570f0ee206941c3c353c4a0a19ddb311</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5659 Do not allow guests to enter news/blog comments if comments are disabled</MESSAGE>
      <SHA>548d3c5dfbb6bd62576336694bdb2126043d047d</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Factories/BlogModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Factories/NewsModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/Blogs/BlogPostModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Models/News/NewsItemModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Blog/BlogPost.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/News/NewsItem.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
