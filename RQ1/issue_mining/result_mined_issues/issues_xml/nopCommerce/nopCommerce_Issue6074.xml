<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6074</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/6074</ISSUEURL>
  <TITLE>Is __RequestVerificationToken for ajax call missing?</TITLE>
  <DESCRIPTION>Hi! I have upgraded my code from 4.4 to 4.5 beta. I'm having problems with antyforgery tokens. For example in home page polls when i try to vote it returns &quot;Failed to vote.&quot; response. When i look at it from console there is a &quot;Error 400. Bad request&quot;. In &quot;public.common.js&quot; there is a function which tries to add antiforgerytoken &quot;addAntiForgeryToken(postData);&quot; But when i look at the elements of the page from console there is no input with name &quot;__RequestVerificationToken&quot; because there is no form tag for poll. By the way when i add [IgnoreAntiforgeryToken] to Vote method of PollController then it works fine. Am i missing something?</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#6073 Fixed bestseller report totals</MESSAGE>
    <SHA>92a7a247f599aafe9f5cfc45ae7b05006c8252ba</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#6074 Added anti-forgery tokens for some views that contain AJAX requests (Post)</MESSAGE>
      <SHA>21d25a78457323f5fea1c9fdb6f1d00f19289a8c</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Views/BackInStockSubscription/SubscribePopup.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Boards/Forum.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Shared/Components/EuCookieLaw/Default.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Views/Shared/_Poll.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
