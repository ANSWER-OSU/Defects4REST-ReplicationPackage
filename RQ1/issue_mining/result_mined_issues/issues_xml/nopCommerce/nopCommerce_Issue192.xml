<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>192</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/192</ISSUEURL>
  <TITLE>Inconsistent behaviour with product that has ACL - filtering</TITLE>
  <DESCRIPTION>If you put an ACL on a product, that product can no longer be found using search or browsing through the category even though the Catalog Settings are configured to 'Ignore ACL rules (sitewide)' At the same time the product can still be accessed directly if you know the URL. I realize that this type configuration in itself is inconsistent and therefore this could be regarded a minor issue. Still I thought it might be worth noting From what I've seen taking a glance at the code it seems that the products for the category are gathered by a stored procedure that honors Customer roles. On the other hand directly accessing the URL of the product honors the Catalog Settings where 'Ignore ACL rules' is set and authorizes the request. Source: http://www.nopcommerce.com/boards/t/38801/inconsistent-behaviour-with-product-that-has-acl.aspx</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>164</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Minor refactoring. Moved sample installation SQL files into dedicated directory in order to prevent any confusion for developers</MESSAGE>
    <SHA>9ee20208e5264457468be340aaf080778030119e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#192 &quot;Ignore ACL&quot; setting was ignored on catalog pages (when disabled). It also increases performance</MESSAGE>
      <SHA>cf80bbced70ce29875f01d5e9c2d38eefaac0535</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Install/SqlServer.StoredProcedures.sql</FILE>
        <FILE>upgradescripts/3.70-the next version/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
