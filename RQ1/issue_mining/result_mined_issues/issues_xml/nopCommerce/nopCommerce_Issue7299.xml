<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7299</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7299</ISSUEURL>
  <TITLE>Embedding video from vimeo error</TITLE>
  <DESCRIPTION>nopCommerce version: 4.6 Vimeo is pretty aggressive in blocking &quot;bot&quot; traffic. It blacklists many datacenter's IP ranges, it fingerprints http clients to try to detect bots among many other methods. If you try to add a **vimeo** video to a product using Multimedia video tab, you will get either a `429 (too many requests)` response or `401 (Unauthorized)`. This may not **always** be true, but a simple google search will pull up many reddit and stackoverflow threads about this issue. I finally got a response from vimeo with a solution using their `oembed API` to perform this check. I have changed the PingVideoUrlAsync method: ```cs protected virtual async Task PingVideoUrlAsync(string videoUrl) { var path = videoUrl.StartsWith(&quot;/&quot;) ? $&quot;{_webHelper.GetStoreLocation()}{videoUrl.TrimStart('/')}&quot; : videoUrl; if (path.Contains(&quot;vimeo.com&quot;)) path = &quot;https://vimeo.com/api/oembed.json?url=&quot; + WebUtility.UrlEncode(path); var client = _httpClientFactory.CreateClient(NopHttpDefaults.DefaultHttpClient); await client.GetStringAsync(path); } ``` and I can add vimeo videos again. see [vimeo docs](https://developer.vimeo.com/api/oembed/videos) for reference to oembed api. The suggested approach looks like a workaround. Let's find a better way to allow such video</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>77</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'issue-7318-disallow-redeem-gift-cards-to-gift-cards' into develop # Conflicts: # src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo480/LocalizationMigration.cs</MESSAGE>
    <SHA>6dc91f951fbd15925d0849750ce0d3c52954d7a0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7299 Added a description to the video embedding option on the product page</MESSAGE>
      <SHA>de2a59b34e44baf883fc69f08d0747190e9e2b05</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo480/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/ProductController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Product/_CreateOrUpdate.Multimedia.Videos.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
