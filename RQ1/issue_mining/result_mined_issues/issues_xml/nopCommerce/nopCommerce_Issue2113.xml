<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2113</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/2113</ISSUEURL>
  <TITLE>Refactor &quot;GetAllCategories&quot; method (performance issues)</TITLE>
  <DESCRIPTION>It's quite slow with thousands of categories. The issue is in the &quot;unsortedCategories.SortCategoriesForTree()&quot; line of code. Maybe, we should be better do all sorting on in database layer Maybe we should use a stored procedure if it's not possible (or slow) with LINQ</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>25</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#2209 Fix wrong markup of recurring orders table</MESSAGE>
    <SHA>1d5fbc702f5ceae81374cd5cbae9985dde7e6800</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#2113 Add stored procedure for GetAllCategories method</MESSAGE>
      <SHA>b88b160c5dcbebd1f37aea2c153004eb34b69b3c</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Common/CommonSettings.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/CategoryService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Installation/CodeFirstInstallationService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Install/SqlServer.StoredProcedures.sql</FILE>
        <FILE>upgradescripts/3.80-the next version/upgrade.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
