<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7101</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7101</ISSUEURL>
  <TITLE>Add more checks when validate shopping cart item attributes</TITLE>
  <DESCRIPTION>nopCommerce version: 4.60 &gt; 1. Create a new nop installation, including the demo data (no plugins, no themes). &gt; 2. Go to &quot;Nike Tailwind Loose Short-Sleeve Running Shirt&quot; in the frontend &gt; 3. Select size &quot;Small&quot; &gt; 4. Add the product to the cart, and place the order. &gt; 5. Open exactly the same product in the backend &gt; 6. Delete the product attribute value &quot;small&quot; from within the backend &gt; 7. Navigate to the frontend, &quot;My Account &gt; Orders&quot; and select the last order &gt; 8. Press &quot;Rebuy&quot; and wait for redirect into the shopping cart &gt; &gt; And here is the problem. Once you are in the shopping cart you can see that there is already something weird happing. There is no product attribute description displayed. If you have a look at the database, your shopping cart item still contains the old product attribute Id that you previously deleted. &gt; &gt; 9. Place the order &gt; &gt; You were now successfully able to purchase a product (product attribute value) that no longer exists. Source: https://www.nopcommerce.com/boards/topic/98780/inconsistent-product-attribute-handling-in-reorder-functionality</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>31</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #7107 from fehmianac/issues-7101-fix-to-selling-no-longer-exists Fixing deleted attribute adding shopping cart.</MESSAGE>
    <SHA>c243ecdc9c5a61642784d2b1ac19c87f40aeff94</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7101 Minor code refactoring</MESSAGE>
      <SHA>647e10308e93cfa517fd1d108d4e4f7936ace1b7</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Orders/ShoppingCartService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
