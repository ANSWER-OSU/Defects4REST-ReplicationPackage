<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5097</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5097</ISSUEURL>
  <TITLE>Don't use linq2db outside of Nop.Data</TITLE>
  <DESCRIPTION>nopCommerce version: develop Remove direct access to LinqToDB namespace in all projects except Nop.Data, we should encapsulate all appropriate methods and properties in Nop.Data and use them in other projects. At the moment such usings remain in [PictureService](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Services/Media/PictureService.cs#L6) and [BaseNopValidator](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Presentation/Nop.Web.Framework/Validators/BaseNopValidator.cs#L5).</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>290</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'issue-5774-Incorrect-search-order-results' into develop</MESSAGE>
    <SHA>89daf748cd6f6d6484014003bd6176046038ff30</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5097 Encapsulated the linq2db in Nop.Data</MESSAGE>
      <SHA>96d66de4bb5de6b2aa5115161d6e6c8b4e8957fa</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Data/DataProviders/BaseDataProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Data/DataProviders/MsSqlDataProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Data/DataProviders/MySqlDataProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Data/DataProviders/PostgreSqlDataProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Data/EntityRepository.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Extensions/FluentMigratorExtensions.cs</FILE>
        <FILE>src/Libraries/Nop.Data/INopDataProvider.cs</FILE>
        <FILE>src/Libraries/Nop.Data/IRepository.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/FluentMigratorMetadataReader.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/IMappingEntityAccessor.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/NopEntityDescriptor.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Mapping/NopEntityFieldDescriptor.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/IMigrationManager.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/MigrationManager.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/NullMigrationContext.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/SchemaMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo440/SpecificationAttributeGroupingMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Nop.Data.csproj</FILE>
        <FILE>src/Libraries/Nop.Data/NopDbStartup.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Directory/IMeasureService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/ExportImport/ImportManager.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Media/AzurePictureService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Media/IPictureService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Media/PictureService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Orders/ShoppingCartService.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.MultiFactorAuth.GoogleAuthenticator/Migrations/GoogleAuthenticatorSchemaMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Pickup.PickupInStore/Data/SchemaMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Shipping.FixedByWeightByTotal/Data/SchemaMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.Avalara/Data/SchemaMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Tax.FixedOrByCountryStateZip/Data/SchemaMigration.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Widgets.FacebookPixel/Data/FacebookPixelSchemaMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Validators/BaseNopValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Blogs/BlogPostValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/CategoryValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ManufacturerValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ProductAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ProductAttributeValueModelValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ProductReviewValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ProductTagValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ProductValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/ReviewTypeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/SpecificationAttributeGroupValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/SpecificationAttributeOptionValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Catalog/SpecificationAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Common/AddressAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Common/AddressAttributeValueValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Common/AddressValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Customers/CustomerAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Customers/CustomerAttributeValueValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Customers/CustomerRoleValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Customers/CustomerValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Directory/CountryValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Directory/CurrencyValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Directory/MeasureDimensionValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Directory/MeasureWeightValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Directory/StateProvinceValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Discounts/DiscountValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Forums/ForumGroupValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Forums/ForumValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Localization/LanguageResourceValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Localization/LanguageValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Messages/CampaignValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Messages/EmailAccountValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Messages/MessageTemplateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Messages/NewsLetterSubscriptionValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Messages/QueuedEmailValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/News/NewsItemValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Orders/CheckoutAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Orders/CheckoutAttributeValueValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Orders/ReturnRequestActionValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Orders/ReturnRequestReasonValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Orders/ReturnRequestValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Polls/PollAnswerValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Polls/PollValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Settings/GdprConsentValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Settings/SettingValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Shipping/DeliveryDateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Shipping/ProductAvailabilityRangeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Shipping/ShippingMethodValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Shipping/WarehouseValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Stores/StoreValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Tasks/ScheduleTaskValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Tax/TaxCategoryValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Templates/CategoryTemplateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Templates/ManufacturerTemplateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Templates/ProductTemplateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Templates/TopicTemplateValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Topics/TopicValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Vendors/VendorAttributeValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Vendors/VendorAttributeValueValidator.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Validators/Vendors/VendorValidator.cs</FILE>
        <FILE>src/Tests/Nop.Tests/BaseNopTest.cs</FILE>
        <FILE>src/Tests/Nop.Tests/Nop.Services.Tests/Directory/MeasureServiceTests.cs</FILE>
        <FILE>src/Tests/Nop.Tests/Nop.Services.Tests/ServiceTest.cs</FILE>
        <FILE>src/Tests/Nop.Tests/SqLiteNopDataProvider.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
