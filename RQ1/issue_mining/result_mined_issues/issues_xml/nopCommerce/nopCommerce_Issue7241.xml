<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7241</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/7241</ISSUEURL>
  <TITLE>Allow vendors to manage his own discounts</TITLE>
  <DESCRIPTION>A vendor will be able to manage his own discounts in admin area &gt; promotions &gt; discounts. Each discount will have &quot;VendorId&quot; column (similar to what we have with &quot;Product&quot; entity). It'll be applied automatically to the current vendor on the &quot;discounts&quot; page when logged-in as a vendor. But a store owner will be able to filter discounts to the &quot;Vendor&quot; dropdownlist (similar to the &quot;products&quot; page in admin area). The only support disocunt type for vendors will be &quot;Assigned to products&quot;. No other discount types could be created. Then a vendor will be able to assigned his own products only to this discounts (the &quot;Applied to products&quot; tab). Of course, all appropriate validations will be applied to the CRUD login in admin area, so vendors cannot manage discounts of third-party vendors or apply/remove discounts of other vendors. Source: https://www.nopcommerce.com/en/boards/topic/35617/feature-request-allow-vendors-to-setup-their-own-discounts Source: https://www.nopcommerce.com/en/boards/topic/32312/discount-feature-request-add-discount-per-manufacturer-or-vendor</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>141</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#6868 Fixed paths for Edit button (DataTables)</MESSAGE>
    <SHA>9e909b32c54ab5894b231aceeb733d736727a157</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#7241 Added the ability for vendors to manage their own discounts</MESSAGE>
      <SHA>dc337084e2a6741e5e235a025c881529e16bedd0</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Discounts/Discount.cs</FILE>
        <FILE>src/Libraries/Nop.Data/Migrations/UpgradeTo480/SchemaMigration.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Discounts/DiscountService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Discounts/IDiscountService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Security/DefaultPermissionConfigManager.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo480/AclMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web.Framework/Migrations/UpgradeTo480/LocalizationMigration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/App_Data/Localization/defaultResources.nopres.xml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/DiscountController.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/DiscountModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/ProductModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Infrastructure/Mapper/AdminMapperConfiguration.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Discounts/AddProductToDiscountSearchModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Discounts/DiscountModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Discounts/DiscountProductModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Discounts/DiscountSearchModel.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Discount/List.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Discount/ProductAddPopup.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Discount/_CreateOrUpdate.AppliedToProducts.cshtml</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Discount/_CreateOrUpdate.Info.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7406 #7241 Fixed saving discount without linking to vendor</MESSAGE>
      <SHA>bd0d94a5b99bdc131854a8e2d9bc8edb06d59abb</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Core/Domain/Discounts/Discount.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Factories/DiscountModelFactory.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Models/Discounts/DiscountModel.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#7241 Fix applied products table, when vendor not set</MESSAGE>
      <SHA>0a4118413864c76a6ef504c3c631c3cb067baa2d</SHA>
      <PATCHEDFILES>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Views/Discount/_CreateOrUpdate.AppliedToProducts.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
