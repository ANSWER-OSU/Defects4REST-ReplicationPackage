<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5088</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/5088</ISSUEURL>
  <TITLE>PayPal plugins. Refunds with different currency codes</TITLE>
  <DESCRIPTION>nopCommerce version: 4.20 I have encountered this issue twice now when trying to refund an order that was paid in a foreign currency through either nopCommerce's PayPal Smart Buttons or Express Checkout plugins. Our primary currency is USD, and what I believe is happening is the OrderTotal (in USD) is being sent along with the foreign currency code, which PayPal then interprets that amount in the foreign currency. Source: https://www.nopcommerce.com/en/boards/topic/88157/paypal-refunds-and-currency-codes-v42</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixed the total amount calculation of bestsellers report</MESSAGE>
    <SHA>a3199c357695f4fd29796af2ee62039fec47f56b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#5088 Fix refunds with different currency codes in PayPal plugin</MESSAGE>
      <SHA>d7552a233e5a6f96675d36a1e957fba5bbd78dc0</SHA>
      <PATCHEDFILES>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalSmartPaymentButtons/PaymentMethod.cs</FILE>
        <FILE>src/Plugins/Nop.Plugin.Payments.PayPalSmartPaymentButtons/plugin.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
