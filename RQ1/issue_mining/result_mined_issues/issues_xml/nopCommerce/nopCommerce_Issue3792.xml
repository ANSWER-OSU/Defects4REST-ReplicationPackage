<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3792</ISSUENO>
  <ISSUEURL>https://github.com/nopSolutions/nopCommerce/issues/3792</ISSUEURL>
  <TITLE>Stock qty bug in multiple warehouse</TITLE>
  <DESCRIPTION>nopCommerce version: 4.20 Beta I have add multiple stock for A-product. I have added 100qty for Warehouse 1 and 150 for Warehouse 2(https://ibb.co/4NC5jFQ). now i have place order of 10qty for this same product. if admin create shipment for this order according to below:- 1. create 5 qty from Warehouse 1 2. create 5 qty from Warehouse 2 and set this both shipment as shipped and delivered. now if you get back to this product then expected result wil be:- Warehouse Stock qty Reserved qty Warehouse 1 95 0 Warehouse 2 145 0 But i get below result that is wrong(https://ibb.co/jb3c7V7) Warehouse Stock qty Reserved qty Source: https://www.nopcommerce.com/boards/t/63091/stock-qty-bug-in-multiple-warehouse.aspx Warehouse 1 95 0 Warehouse 2 145 5</DESCRIPTION>
  <REPONAME>nopCommerce</REPONAME>
  <TIMEDIFFERENCEDAYS>81</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update README.md</MESSAGE>
    <SHA>4289e95199649105cec5294249ae212c65bea0a9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3792 Added algorithm for balancing a reserved product when choosing delivery from other warehouses</MESSAGE>
      <SHA>4bf577bedcb05280ec59a3b0f32387c5f357313f</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/IProductService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/OrderController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Revert &quot;#3792 Added algorithm for balancing a reserved product when choosing delivery from other warehouses&quot;</MESSAGE>
      <SHA>a6f315e4def08135890d2358f11f5f74e1a2a611</SHA>
      <PATCHEDFILES>
        <FILE>src/Libraries/Nop.Services/Catalog/IProductService.cs</FILE>
        <FILE>src/Libraries/Nop.Services/Catalog/ProductService.cs</FILE>
        <FILE>src/Presentation/Nop.Web/Areas/Admin/Controllers/OrderController.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
