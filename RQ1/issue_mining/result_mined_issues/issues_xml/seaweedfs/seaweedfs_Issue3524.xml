<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3524</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/3524</ISSUEURL>
  <TITLE>[filer] DATA RACE on access to OnPeerUpdate</TITLE>
  <DESCRIPTION>``` filer_1 | I0826 11:10:02.084243 iam.go:62 wait to connect to filer 172.19.0.8:8888 grpc address 172.19.0.8:18888 filer_1 | I0826 11:10:02.266301 filer.go:130 existing filer.store.id = 2082541780 filer_1 | I0826 11:10:02.266389 configuration.go:28 configured filer store to leveldb2 filer_1 | I0826 11:10:02.271345 master_client.go:20 the cluster has 1 filer filer_1 | ================== filer_1 | WARNING: DATA RACE filer_1 | Write at 0x00c00018ab38 by main goroutine: filer_1 | github.com/seaweedfs/seaweedfs/weed/filer.(*Filer).AggregateFromPeers() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/filer.go:99 +0x1b1 filer_1 | github.com/seaweedfs/seaweedfs/weed/server.NewFilerServer() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/server/filer_server.go:173 +0x1897 filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).recoverJournal() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:476 +0xb2 filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:125 +0x899 filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:197 +0x35c filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseNamePtr() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:666 +0x15a filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func1() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:332 +0xed filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta.func2() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:356 +0x124 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).GetMeta() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:407 +0x579 filer_1 | github.com/syndtr/goleveldb/leveldb.(*session).recover() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/session.go:140 +0xfd filer_1 | github.com/syndtr/goleveldb/leveldb.Open() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:183 +0x104 filer_1 | github.com/syndtr/goleveldb/leveldb.OpenFile() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:219 +0x87 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer/leveldb2.(*LevelDB2Store).initialize() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/leveldb2/leveldb2_store.go:57 +0x3cc filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | fmt.(*ss).doScanf() filer_1 | /usr/local/go/src/fmt/scan.go:1230 +0x3fb filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | github.com/syndtr/goleveldb/leveldb.(*DB).checkAndCleanFiles() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db_util.go:52 +0x1fe filer_1 | github.com/syndtr/goleveldb/leveldb.openDB() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/db.go:130 +0x8b5 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x164 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:643 +0x26 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.(*fileStorage).List() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:458 +0x3e6 filer_1 | fmt.Fscanf() filer_1 | /usr/local/go/src/fmt/scan.go:143 +0xe9 filer_1 | fmt.Sscanf() filer_1 | /usr/local/go/src/fmt/scan.go:114 +0x224 filer_1 | github.com/syndtr/goleveldb/leveldb/storage.fsParseName() filer_1 | /go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20190318030020-c3a204f8e965/leveldb/storage/file_storage.go:657 +0x16e filer_1 | filer_1 | Previous read at 0x00c00018ab38 by goroutine 181: filer_1 | github.com/seaweedfs/seaweedfs/weed/wdclient.(*MasterClient).tryConnectToMaster.func1() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/wdclient/masterclient.go:222 +0x1bc4 filer_1 | github.com/seaweedfs/seaweedfs/weed/pb.WithMasterClient.func1() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/pb/grpc_client_server.go:209 +0x88 filer_1 | github.com/seaweedfs/seaweedfs/weed/pb.WithGrpcClient() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/pb/grpc_client_server.go:149 +0x248 filer_1 | github.com/seaweedfs/seaweedfs/weed/pb.WithMasterClient() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/pb/grpc_client_server.go:207 +0xd1 filer_1 | github.com/seaweedfs/seaweedfs/weed/wdclient.(*MasterClient).tryConnectToMaster() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/wdclient/masterclient.go:154 +0x27e filer_1 | github.com/seaweedfs/seaweedfs/weed/wdclient.(*MasterClient).tryAllMasters() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/wdclient/masterclient.go:144 +0x151 filer_1 | github.com/seaweedfs/seaweedfs/weed/wdclient.(*MasterClient).KeepConnectedToMaster() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/wdclient/masterclient.go:108 +0x129 filer_1 | github.com/seaweedfs/seaweedfs/weed/filer.(*Filer).KeepMasterClientConnected() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/filer/filer.go:146 +0x45 filer_1 | github.com/seaweedfs/seaweedfs/weed/server.NewFilerServer.func4() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/server/filer_server.go:131 +0x39 filer_1 | filer_1 | Goroutine 181 (running) created at: filer_1 | github.com/seaweedfs/seaweedfs/weed/server.NewFilerServer() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/server/filer_server.go:131 +0xee4 filer_1 | github.com/seaweedfs/seaweedfs/weed/command.(*FilerOptions).startFiler() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/command/filer.go:227 +0xcf7 filer_1 | github.com/seaweedfs/seaweedfs/weed/command.runFiler() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/command/filer.go:203 +0x8ba filer_1 | main.main() filer_1 | /go/src/github.com/seaweedfs/seaweedfs/weed/weed.go:81 +0x943 filer_1 | ================== ``` https://github.com/seaweedfs/seaweedfs/issues/3507</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>add target dev_race to MakeFile (#3522)</MESSAGE>
    <SHA>913a5d0dd475e029f08d7e60f383bc9304a872dc</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>avoid race conditions for OnPeerUpdate https://github.com/seaweedfs/seaweedfs/issues/3524</MESSAGE>
      <SHA>2e31a1d5e6a513bc111f56d4ce27786775826e29</SHA>
      <PATCHEDFILES>
        <FILE>weed/filer/filer.go</FILE>
        <FILE>weed/mq/broker/broker_server.go</FILE>
        <FILE>weed/server/master_server.go</FILE>
        <FILE>weed/wdclient/masterclient.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>avoid race conditions for OnPeerUpdate (#3525) https://github.com/seaweedfs/seaweedfs/issues/3524</MESSAGE>
      <SHA>e90ab4ac604a7bdc02a25bc8dde5b6dde52272a3</SHA>
      <PATCHEDFILES>
        <FILE>weed/filer/filer.go</FILE>
        <FILE>weed/mq/broker/broker_server.go</FILE>
        <FILE>weed/server/master_server.go</FILE>
        <FILE>weed/wdclient/masterclient.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>avoid race conditions for OnPeerUpdate (#3525) https://github.com/seaweedfs/seaweedfs/issues/3524</MESSAGE>
      <SHA>932694525b0759854bf61e7ba4f8fd7187c04d6b</SHA>
      <PATCHEDFILES>
        <FILE>weed/filer/filer.go</FILE>
        <FILE>weed/mq/broker/broker_server.go</FILE>
        <FILE>weed/server/master_server.go</FILE>
        <FILE>weed/wdclient/masterclient.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
