<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1810</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/1810</ISSUEURL>
  <TITLE>s3-tests include in the docker compose file</TITLE>
  <DESCRIPTION>https://github.com/splunk/s3-tests `S3TEST_CONF=s3tests.conf venv/bin/nosetests --verbose --logging-level=ERROR --with-xunit --failure-detail s3tests_boto3.functional.test_s3 -a '!tagging,!fails_on_aws,!encryption,!bucket-policy,!versioning,!fails_on_rgw,!bucket-policy,!fails_with_subdomain,!policy_status,!object-lock,!lifecycle,!cors,!user-policy' -e '(bucket_list_delimiter_basic|bucket_listv2_delimiter_basic|bucket_listv2_encoding_basic|bucket_list_encoding_basic|bucket_list_delimiter_prefix|bucket_listv2_delimiter_prefix_ends_with_delimiter|bucket_list_delimiter_prefix_ends_with_delimiter|bucket_list_delimiter_alt|bucket_listv2_delimiter_alt|bucket_list_delimiter_prefix_underscore|bucket_list_delimiter_percentage|bucket_listv2_delimiter_percentage|bucket_list_delimiter_whitespace|bucket_listv2_delimiter_whitespace|bucket_list_delimiter_dot|bucket_listv2_delimiter_dot|bucket_list_delimiter_unreadable|bucket_listv2_delimiter_unreadable|bucket_listv2_fetchowner_defaultempty|bucket_listv2_fetchowner_empty|bucket_list_delimiter_not_skip_special|bucket_list_prefix_delimiter_alt|bucket_listv2_prefix_delimiter_alt|bucket_list_prefix_delimiter_prefix_not_exist|bucket_listv2_prefix_delimiter_prefix_not_exist|bucket_list_prefix_delimiter_delimiter_not_exist|bucket_listv2_prefix_delimiter_delimiter_not_exist|bucket_list_prefix_delimiter_prefix_delimiter_not_exist|bucket_listv2_prefix_delimiter_prefix_delimiter_not_exist|bucket_list_maxkeys_none|bucket_listv2_maxkeys_none|bucket_list_maxkeys_invalid|bucket_listv2_continuationtoken_empty|bucket_list_return_data|bucket_list_objects_anonymous|bucket_listv2_objects_anonymous|bucket_notexist|bucketv2_notexist|bucket_delete_nonempty|bucket_concurrent_set_canned_acl|object_write_to_nonexist_bucket|object_requestid_matches_header_on_error|object_head_zero_bytes|object_write_cache_control|object_write_expires|object_set_get_metadata_none_to_good|object_set_get_metadata_none_to_empty|object_set_get_metadata_overwrite_to_empty|post_object_anonymous_request|post_object_authenticated_request|post_object_authenticated_no_content_type|post_object_authenticated_request_bad_access_key|post_object_set_success_code|post_object_set_invalid_success_code|post_object_upload_larger_than_chunk|post_object_set_key_from_filename|post_object_ignored_header|post_object_case_insensitive_condition_fields|post_object_escaped_field_values|post_object_success_redirect_action|post_object_invalid_signature|post_object_invalid_access_key|post_object_missing_policy_condition|post_object_user_specified_header|post_object_request_missing_policy_specified_field|post_object_expired_policy|post_object_invalid_request_field_value|get_object_ifmatch_failed|get_object_ifunmodifiedsince_good|put_object_ifmatch_failed|object_raw_get|object_raw_get_bucket_gone|object_delete_key_bucket_gone|object_raw_get_bucket_acl|object_raw_get_object_acl|object_raw_authenticated|object_raw_response_headers|object_raw_authenticated_bucket_acl|object_raw_authenticated_object_acl|object_raw_authenticated_bucket_gone|object_raw_get_x_amz_expires_not_expired|object_raw_get_x_amz_expires_out_max_range|object_raw_get_x_amz_expires_out_positive_range|object_anon_put_write_access|object_raw_put_authenticated_expired|bucket_create_naming_bad_short_one|bucket_create_naming_bad_short_two|bucket_create_exists|bucket_get_location|bucket_acl_default|bucket_acl_canned|bucket_acl_canned_publicreadwrite|bucket_acl_canned_authenticatedread|object_acl_default|object_acl_canned_during_create|object_acl_canned|object_acl_canned_publicreadwrite|object_acl_canned_authenticatedread|object_acl_canned_bucketownerread|object_acl_canned_bucketownerfullcontrol|object_acl_full_control_verify_attributes|bucket_acl_canned_private_to_private|bucket_acl_grant_nonexist_user|bucket_acl_no_grants|bucket_acl_grant_email_not_exist|bucket_acl_revoke_all|bucket_recreate_not_overriding|bucket_create_special_key_names|object_copy_zero_size|object_copy_verify_contenttype|object_copy_to_itself|object_copy_to_itself_with_metadata|object_copy_not_owned_bucket|object_copy_not_owned_object_bucket|object_copy_retaining_metadata|object_copy_replacing_metadata|multipart_upload_empty|multipart_copy_invalid_range|multipart_copy_special_names|multipart_upload_resend_part|multipart_upload_size_too_small|abort_multipart_upload_not_found|multipart_upload_missing_part|multipart_upload_incorrect_etag|100_continue|ranged_request_invalid_range|ranged_request_empty_object|access_bucket)'` ``` s3tests_boto3.functional.test_s3.test_bucket_list_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_list_distinct ... ok s3tests_boto3.functional.test_s3.test_bucket_list_many ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_many ... ok s3tests_boto3.functional.test_s3.test_basic_key_count ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_delimiter_prefix ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_delimiter_prefix_underscore ... ok s3tests_boto3.functional.test_s3.test_bucket_list_delimiter_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_delimiter_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_list_delimiter_none ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_delimiter_none ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_fetchowner_notempty ... ok s3tests_boto3.functional.test_s3.test_bucket_list_delimiter_not_exist ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_delimiter_not_exist ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_basic ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_basic ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_alt ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_alt ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_none ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_none ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_not_exist ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_not_exist ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_unreadable ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_unreadable ... ok s3tests_boto3.functional.test_s3.test_bucket_list_prefix_delimiter_basic ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_prefix_delimiter_basic ... ok s3tests_boto3.functional.test_s3.test_bucket_list_maxkeys_one ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_maxkeys_one ... ok s3tests_boto3.functional.test_s3.test_bucket_list_maxkeys_zero ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_maxkeys_zero ... ok s3tests_boto3.functional.test_s3.test_bucket_list_marker_none ... ok s3tests_boto3.functional.test_s3.test_bucket_list_marker_empty ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_continuationtoken ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_both_continuationtoken_startafter ... ok s3tests_boto3.functional.test_s3.test_bucket_list_marker_unreadable ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_startafter_unreadable ... ok s3tests_boto3.functional.test_s3.test_bucket_list_marker_not_in_list ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_startafter_not_in_list ... ok s3tests_boto3.functional.test_s3.test_bucket_list_marker_after_list ... ok s3tests_boto3.functional.test_s3.test_bucket_listv2_startafter_after_list ... ok s3tests_boto3.functional.test_s3.test_bucket_delete_notexist ... ok s3tests_boto3.functional.test_s3.test_bucket_create_delete ... ok s3tests_boto3.functional.test_s3.test_object_read_not_exist ... ok s3tests_boto3.functional.test_s3.test_multi_object_delete ... ok s3tests_boto3.functional.test_s3.test_multi_objectv2_delete ... ok s3tests_boto3.functional.test_s3.test_object_write_check_etag ... ok s3tests_boto3.functional.test_s3.test_object_write_read_update_read_delete ... ok s3tests_boto3.functional.test_s3.test_object_set_get_non_utf8_metadata ... ok s3tests_boto3.functional.test_s3.test_object_set_get_metadata_empty_to_unreadable_prefix ... ok s3tests_boto3.functional.test_s3.test_object_set_get_metadata_empty_to_unreadable_suffix ... ok s3tests_boto3.functional.test_s3.test_object_set_get_metadata_empty_to_unreadable_infix ... ok s3tests_boto3.functional.test_s3.test_object_metadata_replaced_on_put ... ok s3tests_boto3.functional.test_s3.test_object_write_file ... ok s3tests_boto3.functional.test_s3.test_post_object_invalid_date_format ... ok s3tests_boto3.functional.test_s3.test_post_object_no_key_specified ... ok s3tests_boto3.functional.test_s3.test_post_object_missing_signature ... ok s3tests_boto3.functional.test_s3.test_post_object_condition_is_case_sensitive ... ok s3tests_boto3.functional.test_s3.test_post_object_expires_is_case_sensitive ... ok s3tests_boto3.functional.test_s3.test_post_object_missing_expires_condition ... ok s3tests_boto3.functional.test_s3.test_post_object_missing_conditions_list ... ok s3tests_boto3.functional.test_s3.test_post_object_upload_size_limit_exceeded ... ok s3tests_boto3.functional.test_s3.test_post_object_missing_content_length_argument ... ok s3tests_boto3.functional.test_s3.test_post_object_invalid_content_length_argument ... ok s3tests_boto3.functional.test_s3.test_post_object_upload_size_below_minimum ... ok s3tests_boto3.functional.test_s3.test_post_object_empty_conditions ... ok s3tests_boto3.functional.test_s3.test_get_object_ifmatch_good ... ok s3tests_boto3.functional.test_s3.test_get_object_ifnonematch_good ... ok s3tests_boto3.functional.test_s3.test_get_object_ifnonematch_failed ... ok s3tests_boto3.functional.test_s3.test_get_object_ifmodifiedsince_good ... ok s3tests_boto3.functional.test_s3.test_get_object_ifmodifiedsince_failed ... ok s3tests_boto3.functional.test_s3.test_get_object_ifunmodifiedsince_failed ... ok s3tests_boto3.functional.test_s3.test_bucket_head ... ok s3tests_boto3.functional.test_s3.test_bucket_head_notexist ... ok s3tests_boto3.functional.test_s3.test_object_anon_put ... ok s3tests_boto3.functional.test_s3.test_object_put_authenticated ... ok s3tests_boto3.functional.test_s3.test_bucket_recreate_overwrite_acl ... ok s3tests_boto3.functional.test_s3.test_bucket_recreate_new_acl ... ok s3tests_boto3.functional.test_s3.test_buckets_create_then_list ... ok s3tests_boto3.functional.test_s3.test_list_buckets_invalid_auth ... ok s3tests_boto3.functional.test_s3.test_list_buckets_bad_auth ... ok s3tests_boto3.functional.test_s3.test_bucket_create_naming_good_starts_alpha ... ok s3tests_boto3.functional.test_s3.test_bucket_create_naming_good_starts_digit ... ok s3tests_boto3.functional.test_s3.test_bucket_create_naming_good_contains_period ... ok s3tests_boto3.functional.test_s3.test_bucket_create_naming_good_contains_hyphen ... ok s3tests_boto3.functional.test_s3.test_bucket_list_special_prefix ... ok s3tests_boto3.functional.test_s3.test_object_copy_same_bucket ... ok s3tests_boto3.functional.test_s3.test_object_copy_diff_bucket ... ok s3tests_boto3.functional.test_s3.test_object_copy_canned_acl ... ok s3tests_boto3.functional.test_s3.test_object_copy_bucket_not_found ... ok s3tests_boto3.functional.test_s3.test_object_copy_key_not_found ... ok s3tests_boto3.functional.test_s3.test_multipart_upload_small ... ok s3tests_boto3.functional.test_s3.test_multipart_copy_small ... ok s3tests_boto3.functional.test_s3.test_multipart_copy_without_range ... ok s3tests_boto3.functional.test_s3.test_multipart_upload_multiple_sizes ... ok s3tests_boto3.functional.test_s3.test_multipart_copy_multiple_sizes ... ok s3tests_boto3.functional.test_s3.test_multipart_upload_contents ... ok s3tests_boto3.functional.test_s3.test_multipart_upload_overwrite_existing_object ... ok s3tests_boto3.functional.test_s3.test_abort_multipart_upload ... ok s3tests_boto3.functional.test_s3.test_list_multipart_upload ... ok s3tests_boto3.functional.test_s3.test_atomic_read_1mb ... ok s3tests_boto3.functional.test_s3.test_atomic_read_4mb ... ok s3tests_boto3.functional.test_s3.test_atomic_read_8mb ... ok s3tests_boto3.functional.test_s3.test_atomic_write_1mb ... ok s3tests_boto3.functional.test_s3.test_atomic_write_4mb ... ok s3tests_boto3.functional.test_s3.test_atomic_write_8mb ... ok s3tests_boto3.functional.test_s3.test_atomic_dual_write_1mb ... ok s3tests_boto3.functional.test_s3.test_atomic_dual_write_4mb ... ok s3tests_boto3.functional.test_s3.test_atomic_dual_write_8mb ... ok s3tests_boto3.functional.test_s3.test_atomic_multipart_upload_write ... ok s3tests_boto3.functional.test_s3.test_multipart_resend_first_finishes_last ... ok s3tests_boto3.functional.test_s3.test_ranged_request_response_code ... ok s3tests_boto3.functional.test_s3.test_ranged_big_request_response_code ... ok s3tests_boto3.functional.test_s3.test_ranged_request_skip_leading_bytes_response_code ... ok s3tests_boto3.functional.test_s3.test_ranged_request_return_trailing_bytes_response_code ... ok s3tests_boto3.functional.test_s3.test_copy_object_ifmatch_good ... ok s3tests_boto3.functional.test_s3.test_copy_object_ifnonematch_failed ... ok ---------------------------------------------------------------------- XML: s3-tests/nosetests.xml ---------------------------------------------------------------------- Ran 118 tests in 46.761s OK ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>29</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #1892 from wuh-fnst/listMultipartIsLast make “List” correctly judge whether it is the last file</MESSAGE>
    <SHA>5f99eee27c0f48ebc10e79241650be3727124af2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>add 12 tests https://github.com/chrislusf/seaweedfs/issues/1810</MESSAGE>
      <SHA>d66645ecdad9e3dd7cd6bdb5642f1130b2d2195b</SHA>
      <PATCHEDFILES>
        <FILE>docker/Dockerfile.s3tests</FILE>
        <FILE>docker/compose/local-s3tests-compose.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
