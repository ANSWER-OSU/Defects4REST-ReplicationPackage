<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3919</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/3919</ISSUEURL>
  <TITLE>[volume.check.disk] loop missed entries</TITLE>
  <DESCRIPTION>It seems that files are being actively written to this volume version: 3.32 log: ``` load collection logs volume 2547 index size 5463216 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465216 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230539 entries, fast-volume-10.dc2:8080 missed 3 entries read 2547,61663132613838 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132616165 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132616232 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230536 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5463392 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465312 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230545 entries, fast-volume-10.dc2:8080 missed 1 entries read 2547,61663132623639 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230544 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5463520 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465424 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230552 entries, fast-volume-10.dc2:8080 missed 1 entries read 2547,61663132633631 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230551 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5463600 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465504 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230557 entries, fast-volume-10.dc2:8080 missed 2 entries read 2547,61663132643262 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132643364 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230555 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5463744 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465648 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230566 entries, fast-volume-10.dc2:8080 missed 4 entries read 2547,61663132653263 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132653266 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132653365 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132653534 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230562 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5463920 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5465824 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230577 entries, fast-volume-10.dc2:8080 missed 8 entries read 2547,61663132663234 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663238 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663262 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663265 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663330 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663464 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663562 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663132663566 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230569 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5464304 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466000 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230588 entries, fast-volume-10.dc2:8080 missed 3 entries read 2547,61663133303361 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133303463 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133303664 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230585 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5464496 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466160 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230598 entries, fast-volume-10.dc2:8080 missed 4 entries read 2547,61663133313064 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133313131 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133313261 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133313263 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230594 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5464704 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466304 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230607 entries, fast-volume-10.dc2:8080 missed 4 entries read 2547,61663133316561 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133316666 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133323162 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133323266 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230603 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5464928 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466432 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230615 entries, fast-volume-10.dc2:8080 missed 2 entries read 2547,61663133326635 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 read 2547,61663133333161 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230613 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5465024 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466480 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230618 entries, fast-volume-10.dc2:8080 missed 1 entries read 2547,61663133333762 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230617 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5465152 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466592 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230625 entries, fast-volume-10.dc2:8080 missed 1 entries read 2547,61663133343263 fast-volume-12.dc1:8080 =&gt; fast-volume-10.dc2:8080 volume 2547 fast-volume-10.dc2:8080 has 230624 entries, fast-volume-12.dc1:8080 missed 0 entries load collection logs volume 2547 index size 5465296 from fast-volume-10.dc2:8080 ... load collection logs volume 2547 index size 5466704 from fast-volume-12.dc1:8080 ... volume 2547 fast-volume-12.dc1:8080 has 230632 entries, fast-volume-10.dc2:8080 missed 0 entries volume 2547 fast-volume-10.dc2:8080 has 230632 entries, fast-volume-12.dc1:8080 missed 0 entries ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>master: delete partially created replicated volumes during volume growth fix https://github.com/seaweedfs/seaweedfs/discussions/3792#discussioncomment-3973120</MESSAGE>
    <SHA>1e0d64c04883a8d7b09677e9721f9e189743e2f3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>needles older than the cutoff time are not missing yet https://github.com/seaweedfs/seaweedfs/issues/3919</MESSAGE>
      <SHA>e6d65be1380b0182ce3f513343982b9cd3fe7890</SHA>
      <PATCHEDFILES>
        <FILE>weed/shell/command_volume_check_disk.go</FILE>
        <FILE>weed/shell/commands.go</FILE>
        <FILE>weed/storage/needle_map/memdb.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[voluche.chek.disk] needles older than the cutoff time are not missing yet (#3922) needles older than the cutoff time are not missing yet https://github.com/seaweedfs/seaweedfs/issues/3919</MESSAGE>
      <SHA>764d9cb1059e5210927c7faca79012578fe69119</SHA>
      <PATCHEDFILES>
        <FILE>weed/shell/command_volume_check_disk.go</FILE>
        <FILE>weed/shell/commands.go</FILE>
        <FILE>weed/storage/needle_map/memdb.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
