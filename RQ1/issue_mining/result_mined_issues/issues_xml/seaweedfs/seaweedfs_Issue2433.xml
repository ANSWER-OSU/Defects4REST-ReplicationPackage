<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2433</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/2433</ISSUEURL>
  <TITLE>[s3] force overwrite s3-is-admin</TITLE>
  <DESCRIPTION>Internal header s3-is-admin is not safe now It needs to be reset on an incoming request This code gives any superadmin ``` type AddHeaderTransport struct { T http.RoundTripper } func (adt *AddHeaderTransport) RoundTrip(req *http.Request) (*http.Response, error) { req.Header.Add(&quot;s3-is-admin&quot;, &quot;true&quot;) return adt.T.RoundTrip(req) } func NewAddHeaderTransport(T http.RoundTripper) *AddHeaderTransport { if T == nil { T = http.DefaultTransport } return &amp;AddHeaderTransport{T} } httpClient = &amp;http.Client{Transport: NewAddHeaderTransport(nil)} s3Client := s3.NewFromConfig(aws.Config{HTTPClient: httpClient}) ```</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update binaries_dev.yml</MESSAGE>
    <SHA>b0b2a03ea726bfd35e64657e6fa5de0188a1c934</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>force overwrite s3-is-admin https://github.com/chrislusf/seaweedfs/issues/2433</MESSAGE>
      <SHA>42f4aa824b3e76e8faec229b3c4499cff23d4b5d</SHA>
      <PATCHEDFILES>
        <FILE>weed/s3api/auth_credentials.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
