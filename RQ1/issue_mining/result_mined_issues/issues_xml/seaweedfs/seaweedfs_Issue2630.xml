<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2630</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/2630</ISSUEURL>
  <TITLE>[volume_loading] volumeDataIntegrityChecking failed verifyNeedleIntegrity size mismatch</TITLE>
  <DESCRIPTION>weed version ``` 2.87 ``` I unexpectedly massively (more than 20 volumes) received volume loading errors after another update with restarting volumes ``` Jan 28, 2022 @ 13:00:59.912 I0128 08:00:53 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_210.idx failed: read data [24264,32) : size mismatch Jan 28, 2022 @ 13:00:59.917 I0128 08:00:53 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_258.idx failed: read data [179803856,32) : size mismatch Jan 28, 2022 @ 13:00:59.917 I0128 08:00:53 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_146.idx failed: read data [4988464,32) : size mismatch Jan 28, 2022 @ 13:00:59.917 I0128 08:00:53 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_256.idx failed: read data [257705480,32) : size mismatch Jan 28, 2022 @ 13:04:21.699 I0128 08:04:13 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_210.idx failed: read data [24264,32) : size mismatch Jan 28, 2022 @ 13:04:21.702 I0128 08:04:13 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_256.idx failed: read data [257705480,32) : size mismatch Jan 28, 2022 @ 13:07:42.939 I0128 08:07:33 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_94.idx failed: read data [1384568,32) : size mismatch Jan 28, 2022 @ 13:07:42.945 I0128 08:07:33 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_118.idx failed: read data [38372008,32) : size mismatch Jan 28, 2022 @ 13:07:42.946 I0128 08:07:33 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:07:42.947 I0128 08:07:33 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch Jan 28, 2022 @ 13:11:10.969 I0128 08:11:03 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_95.idx failed: read data [1709848,32) : size mismatch Jan 28, 2022 @ 13:11:10.977 I0128 08:11:03 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:11:10.977 I0128 08:11:03 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_146.idx failed: read data [4988464,32) : size mismatch Jan 28, 2022 @ 13:11:10.978 I0128 08:11:03 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch Jan 28, 2022 @ 13:28:50.993 I0128 08:28:44 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_95.idx failed: read data [1709848,32) : size mismatch Jan 28, 2022 @ 13:28:50.999 I0128 08:28:44 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_146.idx failed: read data [4988464,32) : size mismatch Jan 28, 2022 @ 13:28:51.000 I0128 08:28:44 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:28:51.001 I0128 08:28:44 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch Jan 28, 2022 @ 13:30:22.946 I0128 08:30:17 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_94.idx failed: read data [1384568,32) : size mismatch Jan 28, 2022 @ 13:30:22.954 I0128 08:30:17 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_118.idx failed: read data [38372008,32) : size mismatch Jan 28, 2022 @ 13:30:22.955 I0128 08:30:17 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:30:22.957 I0128 08:30:17 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch Jan 28, 2022 @ 13:32:41.690 I0128 08:32:34 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_210.idx failed: read data [24264,32) : size mismatch Jan 28, 2022 @ 13:32:41.694 I0128 08:32:34 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_256.idx failed: read data [257705480,32) : size mismatch Jan 28, 2022 @ 13:34:30.976 I0128 08:34:25 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_95.idx failed: read data [1709848,32) : size mismatch Jan 28, 2022 @ 13:34:30.983 I0128 08:34:25 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_146.idx failed: read data [4988464,32) : size mismatch Jan 28, 2022 @ 13:34:30.984 I0128 08:34:25 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:34:30.985 I0128 08:34:25 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch Jan 28, 2022 @ 13:38:40.985 I0128 08:38:35 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_95.idx failed: read data [1709848,32) : size mismatch Jan 28, 2022 @ 13:38:40.995 I0128 08:38:35 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_146.idx failed: read data [4988464,32) : size mismatch Jan 28, 2022 @ 13:38:40.995 I0128 08:38:35 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_257.idx failed: read data [223556776,32) : size mismatch Jan 28, 2022 @ 13:38:40.996 I0128 08:38:35 1 volume_loading.go:126] volumeDataIntegrityChecking failed verifyNeedleIntegrity /data/_123.idx failed: read data [3327824,32) : size mismatch ``` https://github.com/chrislusf/seaweedfs/blob/master/weed/storage/volume_checking.go#L57</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>35</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'master' of https://github.com/chrislusf/seaweedfs</MESSAGE>
    <SHA>98604059741190178efd26ad788d52f067b3097c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>graceful stop cluster http server default timeout 60 sec https://github.com/chrislusf/seaweedfs/issues/2630</MESSAGE>
      <SHA>22a3ef56f2dd2b42597741beb69a775db4188763</SHA>
      <PATCHEDFILES>
        <FILE>k8s/helm_charts2/templates/volume-statefulset.yaml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
