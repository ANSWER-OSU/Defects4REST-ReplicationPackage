<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1019</ISSUENO>
  <ISSUEURL>https://github.com/seaweedfs/seaweedfs/issues/1019</ISSUEURL>
  <TITLE>Easier migration from leveldb to leveldb2</TITLE>
  <DESCRIPTION>Hi, can you please provide a better way to upgrade between these close related filer DB's. using ```fs.meta.save``` &amp; ```fs.meta.load``` without a specific export name and the unavoidable downtime is cumbersome and problematic. when upgrading the system we need to follow these steps: 1. check if this is a new system (no data exist) or exists leveldb files(upgrade) 2. if new need to create folder filerldb2 like in the ```Dockerfile``` (can you please add automatic mkdir?) 3. if old data exists, we need to upgrade, make sure no filer &amp; s3 are not accessible so no new files are been written: - start weed filer with leveldb config - open the weed shell (in the folder you want the export to occur) and do export ```fs.meta.save /``` - move files on success (so migration happen once, or use a FLAG) and find the dynamic export filename - close weed filer with the leveldb config - open weed filer with leveldb2 config - open the weed shell and do import ```fs.meta.load DYNAMIC_EXPORT_FILENAME``` Can you please suggest me a better or a simple flow to do the upgrade (migrate from leveldb to leveldb2)?, or even support a backward-compatible in leveldb2 that can READ ONLY old leveldb files and new writes to leveldb2, which will enable a seamless migration. Thanks a lot for your hard work, we LOVE seaweedfs, it RULES!</DESCRIPTION>
  <REPONAME>seaweedfs</REPONAME>
  <TIMEDIFFERENCEDAYS>43</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #1021 from divinerapier/master use go mod to manager dependencies</MESSAGE>
    <SHA>7b5883f526ec17e4efedcf4412f76f9e2e744f7f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>shell: Added minor changes to `fs.meta.save` * added an option to set the output file name * added an option to see verbose output, default to non-verbose mode related to: https://github.com/chrislusf/seaweedfs/issues/1019</MESSAGE>
      <SHA>fb90d635897e5be2894e5bc158b5c35c7f7e2415</SHA>
      <PATCHEDFILES>
        <FILE>weed/shell/command_fs_meta_save.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
