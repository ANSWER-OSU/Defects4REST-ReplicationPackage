<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>629</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/629</ISSUEURL>
  <TITLE>HTML to Atom: title element has encoded HTML</TITLE>
  <DESCRIPTION>Minor, but I noticed with [this feed](https://granary.io/url?input=html&amp;output=atom&amp;url=https%3A%2F%2Fgregorlove.com%2Fstream%2F&amp;hub=https%3A%2F%2Fgregorlove.superfeedr.com%2F) that one of my notes has encoded HTML getting into the `&lt;title&gt;`: `&lt;title&gt;I like this CSS image reset after watching Kevin Powellâ€™s walkthrough. &amp;lt;...&lt;/title&gt;` The [original post](https://gregorlove.com/2023/11/i-like-this-css/) uses `e-content` and I'm guessing Granary is using the parsed `html` attribute for the title. A possible solution might be to use `value` attribute instead, for posts that don't have a `name` of course: ```json &quot;content&quot;: [ { &quot;html&quot;: &quot;&lt;p&gt;I like this CSS image reset after watching &lt;a href=\&quot;https://www.youtube.com/watch?v=345V2MU3E_w\&quot;&gt;Kevin Powell&amp;#x2019;s walkthrough&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Also intrigued by the post he linked, &amp;#x201C;&lt;a class=\&quot;h-cite\&quot; href=\&quot;https://csswizardry.com/2023/09/the-ultimate-lqip-lcp-technique/\&quot;&gt;The Ultimate Low-Quality Image Placeholder Technique&lt;/a&gt;.&amp;#x201D;&lt;/p&gt;&quot;, &quot;value&quot;: &quot;I like this CSS image reset after watching Kevin Powell\u2019s walkthrough.\nAlso intrigued by the post he linked, \u201cThe Ultimate Low-Quality Image Placeholder Technique.\u201d&quot;, &quot;lang&quot;: &quot;en&quot; } ], ```</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>74</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>relax Source.postprocess_object's webfinger link detection to not require instance for snarfed/bridgy-fed#760</MESSAGE>
    <SHA>c3e6f47032def631cb1eb1fd77b0fd642c5613ea</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>atom.activities_to_atom: bug fix: avoid encoded `&lt;`/`&gt;` characters in title fixes #629</MESSAGE>
      <SHA>a5792aec5eb59d037e28a16781f8dabd9b4de90d</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/atom.py</FILE>
        <FILE>granary/templates/_entry.atom</FILE>
        <FILE>granary/tests/test_atom.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
