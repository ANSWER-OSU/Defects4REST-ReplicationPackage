<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>674</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/674</ISSUEURL>
  <TITLE>Photos missing from RSS</TITLE>
  <DESCRIPTION>Mastodon RSS feed puts photos in a `&lt;media:content url=&quot;&quot;&gt;` tag, which doesn't appear to be recognized by granary. Example XML: ``` &lt;item&gt; &lt;guid isPermaLink=&quot;true&quot;&gt;https://mamot.fr/@nhoizey/111866417349105396&lt;/guid&gt; &lt;link&gt;https://mamot.fr/@nhoizey/111866417349105396&lt;/link&gt; &lt;pubDate&gt;Sat, 03 Feb 2024 07:41:05 +0000&lt;/pubDate&gt; &lt;description&gt;&amp;lt;p&amp;gt; “Where have all the flowers gone?” by &amp;lt;span class=&quot;h-card&quot; translate=&quot;no&quot;&amp;gt;&amp;lt;a href=&quot;https://mastodon.social/@davatron5000&quot; class=&quot;u-url mention&quot; rel=&quot;nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&amp;gt;@&amp;lt;span&amp;gt;davatron5000&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;a href=&quot;https://mamot.fr/tags/IndieWeb&quot; class=&quot;mention hashtag&quot; rel=&quot;nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&amp;gt;#&amp;lt;span&amp;gt;IndieWeb&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt; &amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;⚓️ &amp;lt;a href=&quot;https://nicolas-hoizey.com/links/2024/01/19/where-have-all-the-flowers-gone/&quot; rel=&quot;nofollow noopener noreferrer&quot; translate=&quot;no&quot; target=&quot;_blank&quot;&amp;gt;&amp;lt;span class=&quot;invisible&quot;&amp;gt;https://&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;ellipsis&quot;&amp;gt;nicolas-hoizey.com/links/2024/&amp;lt;/span&amp;gt;&amp;lt;span class=&quot;invisible&quot;&amp;gt;01/19/where-have-all-the-flowers-gone/&amp;lt;/span&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&lt;/description&gt; &lt;media:content url=&quot;https://files.mastodon.social/cache/media_attachments/files/111/866/417/384/185/248/original/875edd3105e4e08b.png&quot; type=&quot;image/png&quot; fileSize=&quot;97310&quot; medium=&quot;image&quot;&gt; &lt;media:rating scheme=&quot;urn:simple&quot;&gt;nonadult&lt;/media:rating&gt; &lt;media:description type=&quot;plain&quot;&gt;Screenshot of Where have all the flowers gone?&lt;/media:description&gt; &lt;/media:content&gt; &lt;category&gt;indieweb&lt;/category&gt; &lt;/item&gt; ``` JSONFeed conversion from Granary: ``` { &quot;author&quot;: { &quot;name&quot;: &quot;#indieweb&quot;, &quot;url&quot;: &quot;https://mastodon.social/tags/indieweb&quot; }, &quot;content_html&quot;: &quot;Screenshot of Where have all the flowers gone?&quot;, &quot;date_published&quot;: &quot;2024-02-03T07:41:05+00:00&quot;, &quot;id&quot;: &quot;https://mamot.fr/@nhoizey/111866417349105396&quot;, &quot;url&quot;: &quot;https://mamot.fr/@nhoizey/111866417349105396&quot; } ```</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>atom: interpret entry `link` without `rel` as self link fixes https://console.cloud.google.com/errors/detail/CLSnttKfy4v90wE;time=P30D?project=bridgy-federated</MESSAGE>
    <SHA>92000bf4b76e4e9005847158d9950f0747817bd5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>rss: add support for images in `media:content` tags fixes #674</MESSAGE>
      <SHA>db0880d1c17b79976df18f481b5ed3d033b5afc2</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/rss.py</FILE>
        <FILE>granary/tests/test_rss.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
