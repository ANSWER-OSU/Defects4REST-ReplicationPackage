<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>121</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/121</ISSUEURL>
  <TITLE>Instagram to HTML conversion has bad &lt;video&gt; tag</TITLE>
  <DESCRIPTION>Just saw this in one of the items in the feed: ```html &lt;video class=&quot;u-video&quot; src=&quot;url&quot; controls=&quot;controls&quot;&gt; ``` The embedded video tag in the HTML has the correct source. Which reminds me that the video tag should also be removed from the HTML like in #120</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>7</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>mf2 to html: de-dupe image and attachments, take 3 move choice of whether to render attachments back to render_content, as caller param. default to false. override in atom. still for #120.</MESSAGE>
    <SHA>1d4d323206be0149795409998717a497ca9d609d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>checkpoint: render video as HTML for #121, #103</MESSAGE>
      <SHA>a846ef15a0b32ae0bfee2f1b401778b4d4cba996</SHA>
      <PATCHEDFILES>
        <FILE>granary/microformats2.py</FILE>
        <FILE>granary/test/test_microformats2.py</FILE>
        <FILE>granary/test/testdata/article_with_audio_video.mf2.html</FILE>
        <FILE>granary/test/testdata/article_with_video_duplicated_as_attachment.as.json</FILE>
        <FILE>granary/test/testdata/article_with_video_duplicated_as_attachment.mf2-from-as.json</FILE>
        <FILE>granary/test/testdata/article_with_video_duplicated_as_attachment.mf2.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>finish rendering video and audio as HTML also use u-photo, u-video, u-audio classes more often. for #121, #103</MESSAGE>
      <SHA>92550dd860ea30a36990d417832ae4d5c8be0497</SHA>
      <PATCHEDFILES>
        <FILE>granary/atom.py</FILE>
        <FILE>granary/microformats2.py</FILE>
        <FILE>granary/test/test_atom.py</FILE>
        <FILE>granary/test/test_facebook.py</FILE>
        <FILE>granary/test/test_instagram.py</FILE>
        <FILE>granary/test/test_microformats2.py</FILE>
        <FILE>granary/test/test_twitter.py</FILE>
        <FILE>granary/test/testdata/article_with_audio_video.mf2-from-as.json</FILE>
        <FILE>granary/test/testdata/article_with_audio_video.mf2.html</FILE>
        <FILE>granary/test/testdata/article_with_image_duplicated_as_attachment.mf2.html</FILE>
        <FILE>granary/test/testdata/article_with_photo.mf2.html</FILE>
        <FILE>granary/test/testdata/article_with_video_duplicated_as_attachment.mf2.html</FILE>
        <FILE>granary/test/testdata/note.mf2.html</FILE>
        <FILE>granary/test/testdata/note_with_composite_photo.mf2.html</FILE>
        <FILE>granary/test/testdata/note_with_multiple_photos.mf2.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>video and audio: switch rest of AS1 from top-level 'url' to 'stream' #121, #103</MESSAGE>
      <SHA>030f6da323f3afda30dff7229bbe9af5195d0ea9</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/as2.py</FILE>
        <FILE>granary/jsonfeed.py</FILE>
        <FILE>granary/microformats2.py</FILE>
        <FILE>granary/test/test_microformats2.py</FILE>
        <FILE>granary/test/test_testdata.py</FILE>
        <FILE>granary/test/testdata/article_with_audio_video.as.json</FILE>
        <FILE>granary/test/testdata/note_with_audio_video.as-from-mf2.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>atom: fix audio/video enclosures to use stream for #103, #121</MESSAGE>
      <SHA>1455ece0c8f05e68e4170f096eecd32ff47e388b</SHA>
      <PATCHEDFILES>
        <FILE>granary/atom.py</FILE>
        <FILE>granary/templates/_entry.atom</FILE>
        <FILE>granary/test/test_atom.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
