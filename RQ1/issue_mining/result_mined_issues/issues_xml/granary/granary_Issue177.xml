<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>177</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/177</ISSUEURL>
  <TITLE>Mastodon to RSS: No author information, title garbled</TITLE>
  <DESCRIPTION>When I subscribe to a `Mastodon to RSS` feed posts look like this: ![image](https://user-images.githubusercontent.com/5016428/71098976-d33b5e00-21b2-11ea-96b5-0ad899a9905f.png) This is the parsed XML item: ```xml &lt;item&gt; &lt;title&gt;&amp;lt;p&amp;gt;RubyFrontierDocs – es geht voran&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Inspiriert durch das gestrige »Fahrrad für den Geist«-Video habe ich...&lt;/title&gt; &lt;link&gt;https://mastodon.social/@kantel/103329305147285605&lt;/link&gt; &lt;description&gt;&lt;![CDATA[&lt;p&gt;RubyFrontierDocs – es geht voran&lt;/p&gt;&lt;p&gt;Inspiriert durch das gestrige »Fahrrad für den Geist«-Video habe ich noch ein wenig an meiner Implementierung der &lt;a href=&quot;https://mastodon.social/tags/RubyFrontierDocs&quot; class=&quot;mention hashtag&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;#&lt;span&gt;RubyFrontierDocs&lt;/span&gt;&lt;/a&gt; gebastelt und erste Ergebnisse erzielt. &lt;a href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;blog.schockwellenreiter.de/201&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;9/12/2019121801.html&lt;/span&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://mastodon.social/@kantel/103329305147285605&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://f2.tchncs.de/social.tchncs.de/media_attachments/files/005/557/949/original/3384e3e514f01780.jpeg&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot;&gt; &lt;span class=&quot;name&quot;&gt;RubyFrontierDocs – es geht voran – Schockwellenreiter&lt;/span&gt; &lt;/a&gt; &lt;/p&gt; &lt;a class=&quot;p-category&quot; href=&quot;https://social.tchncs.de/tags/RubyFrontierDocs&quot;&gt;RubyFrontierDocs&lt;/a&gt;]]&gt;&lt;/description&gt; &lt;guid isPermaLink=&quot;true&quot;&gt;https://mastodon.social/@kantel/103329305147285605&lt;/guid&gt; &lt;category&gt;RubyFrontierDocs&lt;/category&gt; &lt;pubDate&gt;Wed, 18 Dec 2019 14:41:11 +0000&lt;/pubDate&gt; &lt;/item&gt; ``` The same post looks fine with `Mastodon to ATOM` instead: ```html &lt;entry&gt; &lt;author&gt; &lt;activity:object-type&gt;http://activitystrea.ms/schema/1.0/person&lt;/activity:object-type&gt; &lt;uri&gt;https://mastodon.social/@kantel&lt;/uri&gt; &lt;name&gt;Jörg Kantel&lt;/name&gt; &lt;/author&gt; &lt;activity:object-type&gt;http://activitystrea.ms/schema/1.0/note&lt;/activity:object-type&gt; &lt;id&gt;https://mastodon.social/@kantel/103329305147285605&lt;/id&gt; &lt;title&gt;RubyFrontierDocs – es geht voranInspiriert durch das gestrige »Fahrrad für den Geist«-Video habe ich...&lt;/title&gt; &lt;content type=&quot;xhtml&quot;&gt; &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt; &lt;p&gt;RubyFrontierDocs – es geht voran&lt;/p&gt; &lt;p&gt;Inspiriert durch das gestrige »Fahrrad für den Geist«-Video habe ich noch ein wenig an meiner Implementierung der &lt;a href=&quot;https://mastodon.social/tags/RubyFrontierDocs&quot; class=&quot;mention hashtag&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;#&lt;span&gt;RubyFrontierDocs&lt;/span&gt;&lt;/a&gt; gebastelt und erste Ergebnisse erzielt. &lt;a href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;blog.schockwellenreiter.de/201&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;9/12/2019121801.html&lt;/span&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://mastodon.social/@kantel/103329305147285605&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://f2.tchncs.de/social.tchncs.de/media_attachments/files/005/557/949/original/3384e3e514f01780.jpeg&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot;&gt; &lt;span class=&quot;name&quot;&gt;RubyFrontierDocs – es geht voran – Schockwellenreiter&lt;/span&gt; &lt;/a&gt; &lt;/p&gt; &lt;a class=&quot;p-category&quot; href=&quot;https://social.tchncs.de/tags/RubyFrontierDocs&quot;&gt;RubyFrontierDocs&lt;/a&gt; &lt;/div&gt; &lt;/content&gt; &lt;link rel=&quot;alternate&quot; type=&quot;text/html&quot; href=&quot;https://mastodon.social/@kantel/103329305147285605&quot; /&gt; &lt;link rel=&quot;ostatus:conversation&quot; href=&quot;https://mastodon.social/@kantel/103329305147285605&quot; /&gt; &lt;link rel=&quot;ostatus:attention&quot; href=&quot;https://social.tchncs.de/tags/RubyFrontierDocs&quot; /&gt; &lt;link rel=&quot;mentioned&quot; href=&quot;https://social.tchncs.de/tags/RubyFrontierDocs&quot; /&gt; &lt;a href=&quot;https://social.tchncs.de/tags/RubyFrontierDocs&quot;&gt;RubyFrontierDocs&lt;/a&gt; &lt;link rel=&quot;ostatus:attention&quot; href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot; /&gt; &lt;link rel=&quot;mentioned&quot; href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot; /&gt; &lt;a href=&quot;http://blog.schockwellenreiter.de/2019/12/2019121801.html&quot;&gt;RubyFrontierDocs – es geht voran – Schockwellenreiter&lt;/a&gt; &lt;activity:verb&gt;http://activitystrea.ms/schema/1.0/post&lt;/activity:verb&gt; &lt;published&gt;2019-12-18T14:41:11+00:00&lt;/published&gt; &lt;updated&gt;2019-12-18T14:41:11+00:00&lt;/updated&gt; &lt;link rel=&quot;self&quot; type=&quot;application/atom+xml&quot; href=&quot;https://mastodon.social/@kantel/103329305147285605&quot; /&gt; &lt;link rel=&quot;enclosure&quot; href=&quot;https://f2.tchncs.de/social.tchncs.de/media_attachments/files/005/557/949/original/3384e3e514f01780.jpeg&quot; type=&quot;image/jpeg&quot; /&gt; &lt;/entry&gt; ``` It's even worse with Reshares or Replies. Works like a charm with `Twitter to RSS` as well so I assume it's some converting issue with `Granary`.</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>bust Cloud Build's pip cache for GitHub URLs with gcloud app deploy --no-cache App Engine / Cloud Build's default pip cache is overly aggressive with GitHub dependency URLs like these. If I push a new commit to the branch in one of these URLs, Cloud Build still uses the old cached version. https://cloud.google.com/appengine/docs/standard/python3/specifying-dependencies</MESSAGE>
    <SHA>b076be8233a633037a0becf9a7b4a9b1171409c5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>RSS: strip HTML tags from title for #177. background: https://validator.w3.org/feed/docs/warning/ContainsHTML.html</MESSAGE>
      <SHA>0ec5ad9a0058dd8543ed62ffcb1f669c4aece8e0</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/rss.py</FILE>
        <FILE>granary/tests/test_rss.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>RSS: always include author in items for #177</MESSAGE>
      <SHA>4b28bb53395e9c3e8898cd0d043713de81fb7b7a</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/rss.py</FILE>
        <FILE>granary/tests/test_rss.py</FILE>
        <FILE>granary/tests/testdata/feed_with_audio_video.rss.xml</FILE>
        <FILE>granary/tests/testdata/feed_with_note.rss.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
