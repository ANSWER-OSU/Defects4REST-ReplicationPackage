<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>132</ISSUENO>
  <ISSUEURL>https://github.com/treasure-data/digdag/issues/132</ISSUEURL>
  <TITLE>digdag scheduler -c option can't set database.type parameter</TITLE>
  <DESCRIPTION>Hello Can I use config path for scheduler? `digdag server -c config.yml` work correctly. But `digdag server -c config.yml` does not work as I expected. config.yml ``` yaml database.type: postgresql database.user: username database.password: password database.host: 127.0.0.1 database.port: 5432 database.database: digdagdb ``` `digdag scheduler --project . -l debug -c config.conf` It use h2:mem db ``` digdag scheduler --project . -l debug -c test.conf 2016-06-18 23:46:54 +0900: Digdag v0.8.1 2016-06-18 23:46:55 +0900 [DEBUG] (main) io.digdag.core.database.DataSourceProvider: Using database URL jdbc:h2:mem:digdag-95ef3df8-241b-4136-9597-61dc7b125cbb 2016-06-18 23:46:55 +0900 [DEBUG] (main) io.digdag.core.database.DataSourceProvider: Using database URL jdbc:h2:mem:digdag-5d9bc29f-a800-4cee-90db-423bc40bc815 2016-06-18 23:46:56 +0900 [INFO] (main): Added new revision 1 2016-06-18 23:46:56 +0900 [DEBUG] (main) org.jboss.logging.LoggerProviders: Logging Provider: org.jboss.logging.Slf4jLoggerProvider ```</DESCRIPTION>
  <REPONAME>digdag</REPONAME>
  <TIMEDIFFERENCEDAYS>1117</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>session status path should be at project path, not current directory</MESSAGE>
    <SHA>641926534ef18e961c4af9aaaeb437b2db38ad69</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>scheduler command shouldn't override database.type set by -c config file [#132]</MESSAGE>
      <SHA>4c84257e65502110ac014c8617bb76e98df63df8</SHA>
      <PATCHEDFILES>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Sched.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch 'master' into add-prismjs-digdag-language * master: (81 commits) pom: remove spam pom: generate exclusions push: disallow empty project name &amp; revision require non-empty project name and revision Default database connection pool size should be larger on a large machine start 0.8.15 release 0.8.14 td operator: handle empty query result added comment on ServerBootstrap.startServer scheduler command shouldn't override database.type set by -c config file [#132] session status path should be at project path, not current directory fix --task-log usage message update error message formatting style Adds logout url config option Adds 404 handler page Revert the previous change in README.md updated digdag-plugin-example fix dependency for maven test-compile fix dependency for maven test-compile create docker tmp dir ... # Conflicts: # digdag-ui/console.jsx # digdag-ui/public/config.js</MESSAGE>
      <SHA>a78993b64d89feafb67c8b4d6dbc840319bca283</SHA>
      <PATCHEDFILES>
        <FILE>appveyor.yml</FILE>
        <FILE>build.gradle</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Arguments.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/LocalSecretStoreManager.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/ResumeStateManager.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/RevisionAutoReloader.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Run.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Sched.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/SelfUpdate.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Server.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/client/Archiver.java</FILE>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/client/Push.java</FILE>
        <FILE>digdag-client/src/main/java/io/digdag/client/DigdagClient.java</FILE>
        <FILE>digdag-client/src/test/java/io/digdag/client/config/ConfigUtils.java</FILE>
        <FILE>digdag-core/build.gradle</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/ErrorReporter.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/AgentConfig.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/CallOperatorFactory.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/ConfigEvalEngine.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/DefaultSecretProvider.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/ExtractArchiveWorkspaceManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/LocalAgentManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/LocalAgentModule.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/LocalWorkspaceManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/MultiThreadAgent.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/NoopWorkspaceManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/OperatorManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/OperatorRegistry.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/agent/RequireOperatorFactory.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/archive/ProjectArchive.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/archive/ProjectArchiveLoader.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/archive/WorkflowFile.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/archive/WorkflowResourceMatcher.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/BasicDatabaseStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DataSourceProvider.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseConfig.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseMigrator.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseProjectStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseScheduleStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseSecretControlStore.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseSecretControlStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseSecretStore.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseSessionStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/DatabaseTaskQueueServer.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/CreateTableBuilder.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/MigrationContext.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20151204221156_CreateTables.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160602123456_SessionsOnProjectIdIndexToDesc.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160602184025_CreateResumingTasks.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160610154832_MakeProjectsDeletable.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160623123456_AddUserInfoColumnToRevisions.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160719172538_QueueRearchitecture.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160817123456_AddSecretsTable.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160818043815_AddFinishedAtToSessionAttempts.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160818220026_QueueUniqueName.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/database/migrate/Migration_20160908175551_KeepSecretsUnique.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/notification/MailNotificationSender.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/plugin/DynamicPluginModule.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/repository/ModelValidator.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/repository/ProjectControl.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/repository/ProjectControlStore.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/schedule/ScheduleControlStore.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/schedule/ScheduleExecutor.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/schedule/ScheduleStatus.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/schedule/ScheduleStoreManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/session/SessionMonitorExecutor.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/session/TaskControlStore.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/storage/ArchiveManager.java</FILE>
        <FILE>digdag-core/src/main/java/io/digdag/core/workflow/WorkflowExecutor.java</FILE>
        <FILE>digdag-core/src/main/resources/io/digdag/core/version.txt</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/agent/DefaultSecretProviderTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/archive/ProjectArchiveLoaderTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/archive/ProjectArchiveTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/database/DatabaseFactory.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/database/DatabaseScheduleStoreManagerTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/database/DatabaseSecretStoreTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/database/DatabaseSessionStoreManagerTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/database/DatabaseTestingUtils.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/EchoOperatorFactory.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/FailOperatorFactory.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/LoopOperatorFactory.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/NoopOperatorFactory.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/OperatorTestingUtils.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/SimpleCommandExecutor.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/WorkflowCompilerTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/WorkflowExecutorTest.java</FILE>
        <FILE>digdag-core/src/test/java/io/digdag/core/workflow/WorkflowTestingUtils.java</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/basic.dig</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/multiple_operators.dig</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/parallel_stress.dig</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/retry_on_group.dig</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/single_operator.dig</FILE>
        <FILE>digdag-core/src/test/resources/io/digdag/core/workflow/unused_keys_in_group.dig</FILE>
        <FILE>digdag-docs/src/command_reference.rst</FILE>
        <FILE>digdag-docs/src/operators.rst</FILE>
        <FILE>digdag-docs/src/releases.rst</FILE>
        <FILE>digdag-docs/src/releases/release-0.8.12.rst</FILE>
        <FILE>digdag-docs/src/releases/release-0.8.13.rst</FILE>
        <FILE>digdag-docs/src/releases/release-0.8.14.rst</FILE>
        <FILE>digdag-plugin-utils/src/main/java/io/digdag/util/BaseOperator.java</FILE>
        <FILE>digdag-plugin-utils/src/main/java/io/digdag/util/Workspace.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/DefaultSecretAccessPolicy.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/JmxErrorReporter.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/JmxModule.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerBootstrap.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerConfig.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/WorkflowExecutorLoop.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/rs/ProjectResource.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/CommandExecutor.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/OperatorFactory.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/SecretStore.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/TemplateEngine.java</FILE>
        <FILE>digdag-standards/build.gradle</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/command/DockerCommandExecutor.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/command/SimpleCommandExecutor.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/EchoOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/EmbulkOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/FailOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/ForEachOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/IfOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/LoopOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/MailOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/NopOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/NotifyOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/PyOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/RbOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/ShOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/jdbc/AbstractJdbcOperator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/pg/PgOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdDdlOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdForEachOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdLoadOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdPartialDeleteOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdRunOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdTableExportOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdWaitOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/operator/td/TdWaitTableOperatorFactory.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/td/TdConfigSecretStore.java</FILE>
        <FILE>digdag-standards/src/test/java/io/digdag/standards/operator/jdbc/AbstractJdbcOperatorTest.java</FILE>
        <FILE>digdag-standards/src/test/java/io/digdag/standards/operator/jdbc/JdbcOpTestHelper.java</FILE>
        <FILE>digdag-standards/src/test/java/io/digdag/standards/operator/pg/PgOperatorFactoryTest.java</FILE>
        <FILE>digdag-standards/src/test/java/io/digdag/standards/operator/td/TdOperatorFactoryTest.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/ServerGracefulShutdownIT.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/ServerJmxIT.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/ServerModeHiddenMailConfigIT.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/ServerScheduleIT.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/td/Secrets.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/td/TdIT.java</FILE>
        <FILE>digdag-tests/src/test/java/acceptance/td/TdWaitIT.java</FILE>
        <FILE>digdag-tests/src/test/java/utils/TemporaryDigdagServer.java</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build.gradle</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/0.1.0/digdag-plugin-example-0.1.0.jar</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/0.1.0/digdag-plugin-example-0.1.0.jar.md5</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/0.1.0/digdag-plugin-example-0.1.0.jar.sha1</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/maven-metadata.xml</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/maven-metadata.xml.md5</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/build/repo/io/digdag/plugin/digdag-plugin-example/maven-metadata.xml.sha1</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/plugin/digdag-plugin-example/src/main/java/io/digdag/plugin/example/ExampleOperatorFactory.java</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/schedule/daily10.dig</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/schedule/hourly9.dig</FILE>
        <FILE>digdag-tests/src/test/resources/acceptance/td/td/td_store_last_result_empty.dig</FILE>
        <FILE>digdag-ui/console.jsx</FILE>
        <FILE>digdag-ui/model.js</FILE>
        <FILE>digdag-ui/public/config.js</FILE>
        <FILE>digdag-ui/webpack.production.config.js</FILE>
        <FILE>gradle/wrapper/gradle-wrapper.jar</FILE>
        <FILE>gradle/wrapper/gradle-wrapper.properties</FILE>
        <FILE>gradlew</FILE>
        <FILE>gradlew.bat</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
