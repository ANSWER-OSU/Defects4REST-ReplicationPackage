<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>119622</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/119622</ISSUEURL>
  <TITLE>[CI] MixedClusterEsqlSpecIT class failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic #5755 / 8.11.4_bwc](https://gradle-enterprise.elastic.co/s/v4dlnmhtwgmic) - [elasticsearch-periodic #5755 / 8.14.3_bwc](https://gradle-enterprise.elastic.co/s/gzd3sank5jeby) - [elasticsearch-periodic #5755 / 8.12.2_bwc](https://gradle-enterprise.elastic.co/s/6rytebejrwzoa) - [elasticsearch-periodic #5755 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/cznaukainsgmu) - [elasticsearch-pull-request #49316 / 8.14.3_bwc](https://gradle-enterprise.elastic.co/s/lmtsgcguohqag) - [elasticsearch-pull-request #49316 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/2npbuwbxatkjy) - [elasticsearch-pull-request #49316 / 8.12.2_bwc](https://gradle-enterprise.elastic.co/s/o7inheghwqelc) - [elasticsearch-pull-request #49316 / 8.11.4_bwc](https://gradle-enterprise.elastic.co/s/b6bnuybwcwmhy) - [elasticsearch-periodic #5750 / 8.11.4_bwc](https://gradle-enterprise.elastic.co/s/kavuhw6w2wcqc) - [elasticsearch-periodic #5750 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/rdgbaikkb6rsg) **Reproduction Line:** ``` ./gradlew &quot;:x-pack:plugin:esql:qa:server:mixed-cluster:v8.11.4#javaRestTest&quot; -Dtests.class=&quot;org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT&quot; -Dtests.method=&quot;test {union_types.MultiIndexIndirectUseOfUnionTypesInMvExpand SYNC}&quot; -Dtests.seed=C7F87DE518CD3AF1 -Dtests.bwc=true -Dtests.locale=zh-Hans-MO -Dtests.timezone=America/Monterrey -Druntime.java=23 ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT),title:'Test',type:optionsListControl))))) **Failure Message:** ``` org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:34823], URI [/_query?pretty=true&amp;error_trace=true], status line [HTTP/1.1 400 Bad Request] :) úerrorúroot_causeøútypeUverification_exception reasonvFound 1 problem line 2:14: Unknown function [MV_APPEND]stack_traceäorg.elasticsearch.xpack.esql.analysis.VerificationException: Found 1 problem line 2:14: Unknown function [MV_APPEND] at org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:113) at org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:107) at org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$2(EsqlSession.java:143) at org.elasticsearch.xpack.esql.session.EsqlSession.lambda$preAnalyze$5(EsqlSession.java:168) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:177) at org.elasticsearch.xpack.ql.index.IndexResolver.lambda$resolveAsMergedMapping$8(IndexResolver.java:381) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:236) at org.elasticsearch.server@8.11.4/org.elasticsearch.client.internal.node.NodeClient$SafelyWrappedActionListener.onResponse(NodeClient.java:161) at org.elasticsearch.server@8.11.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203) at org.elasticsearch.server@8.11.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListener.completeWith(ActionListener.java:305) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.mergeIndexResponses(TransportFieldCapabilitiesAction.java:256) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.lambda$doExecuteForked$5(TransportFieldCapabilitiesAction.java:189) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.AbstractRefCounted$1.closeInternal(AbstractRefCounted.java:117) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.AbstractRefCounted.decRef(AbstractRefCounted.java:69) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.support.RefCountingRunnable.close(RefCountingRunnable.java:116) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.Releasables$3.close(Releasables.java:142) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.RunOnce.run(RunOnce.java:40) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.RequestDispatcher.innerExecute(RequestDispatcher.java:153) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.RequestDispatcher$1.doRun(RequestDispatcher.java:122) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) at java.base/java.lang.Thread.run(Thread.java:1583) üûùBUverification_exceptionCvFound 1 problem line 2:14: Unknown function [MV_APPEND]Däorg.elasticsearch.xpack.esql.analysis.VerificationException: Found 1 problem line 2:14: Unknown function [MV_APPEND] at org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:113) at org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:107) at org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$2(EsqlSession.java:143) at org.elasticsearch.xpack.esql.session.EsqlSession.lambda$preAnalyze$5(EsqlSession.java:168) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:177) at org.elasticsearch.xpack.ql.index.IndexResolver.lambda$resolveAsMergedMapping$8(IndexResolver.java:381) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:236) at org.elasticsearch.server@8.11.4/org.elasticsearch.client.internal.node.NodeClient$SafelyWrappedActionListener.onResponse(NodeClient.java:161) at org.elasticsearch.server@8.11.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203) at org.elasticsearch.server@8.11.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.ActionListener.completeWith(ActionListener.java:305) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.mergeIndexResponses(TransportFieldCapabilitiesAction.java:256) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.lambda$doExecuteForked$5(TransportFieldCapabilitiesAction.java:189) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.AbstractRefCounted$1.closeInternal(AbstractRefCounted.java:117) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.AbstractRefCounted.decRef(AbstractRefCounted.java:69) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.support.RefCountingRunnable.close(RefCountingRunnable.java:116) at org.elasticsearch.base@8.11.4/org.elasticsearch.core.Releasables$3.close(Releasables.java:142) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.RunOnce.run(RunOnce.java:40) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.RequestDispatcher.innerExecute(RequestDispatcher.java:153) at org.elasticsearch.server@8.11.4/org.elasticsearch.action.fieldcaps.RequestDispatcher$1.doRun(RequestDispatcher.java:122) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:33) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983) at org.elasticsearch.server@8.11.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) at java.base/java.lang.Thread.run(Thread.java:1583) üû status$ û ``` **Issue Reasons:** - [8.x] 4 consecutive failures in class org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT - [8.x] 7 consecutive failures in step 8.11.4_bwc - [8.x] 7 consecutive failures in step 8.14.3_bwc - [8.x] 7 consecutive failures in step 8.12.2_bwc - [8.x] 7 consecutive failures in step 8.13.4_bwc - [8.x] 35 failures in class org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT (5.2% fail rate in 679 executions) - [8.x] 10 failures in step 8.11.4_bwc (50.0% fail rate in 20 executions) - [8.x] 7 failures in step 8.14.3_bwc (36.8% fail rate in 19 executions) - [8.x] 11 failures in step 8.12.2_bwc (52.4% fail rate in 21 executions) - [8.x] 7 failures in step 8.13.4_bwc (33.3% fail rate in 21 executions) - [8.x] 10 failures in pipeline elasticsearch-periodic (50.0% fail rate in 20 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Mute org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT test {union_types.MultiIndexIndirectUseOfUnionTypesInMvExpand SYNC} #119584</MESSAGE>
    <SHA>cf63777b8781f90134be553f449ec66ece1bafe2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT #119622</MESSAGE>
      <SHA>7f3ab2ce1e243bc6c03bf7368bb44cae036c0840</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
