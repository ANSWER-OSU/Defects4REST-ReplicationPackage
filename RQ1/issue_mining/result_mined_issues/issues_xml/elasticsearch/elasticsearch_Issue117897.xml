<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>117897</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/117897</ISSUEURL>
  <TITLE>[CI] RepositoryS3StsCredentialsRestIT class failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic #5231 / openjdk17_checkpart1_java-fips-matrix](https://gradle-enterprise.elastic.co/s/sbeewiquiqb4u) - [elasticsearch-pull-request #44836 / part-1-fips](https://gradle-enterprise.elastic.co/s/h5yvthx677ovk) - [elasticsearch-periodic #5219 / openjdk17_checkpart1_java-fips-matrix](https://gradle-enterprise.elastic.co/s/3mul7pi3yvoh4) - [elasticsearch-periodic #5213 / openjdk17_checkpart1_java-fips-matrix](https://gradle-enterprise.elastic.co/s/3rni54kf3igk2) - [elasticsearch-periodic #5189 / openjdk17_checkpart1_java-fips-matrix](https://gradle-enterprise.elastic.co/s/pj2cstqwxq3lg) - [elasticsearch-periodic #5123 / openjdk17_checkpart1_java-fips-matrix](https://gradle-enterprise.elastic.co/s/svwdmox4yft3q) **Reproduction Line:** ``` ./gradlew &quot;:modules:repository-s3:javaRestTest&quot; --tests &quot;org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT.testGetRepositoryReadonlyTrue&quot; -Dtests.seed=DDC87F135EA5F1E7 -Dtests.locale=khq -Dtests.timezone=VST -Druntime.java=17 -Dtests.fips.enabled=true ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT),title:'Test',type:optionsListControl))))) **Failure Message:** ``` org.elasticsearch.client.ResponseException: method [PUT], host [http://127.0.0.1:45789], URI [/_snapshot/pupfqjgfu], status line [HTTP/1.1 500 Internal Server Error] --- error: root_cause: - type: &quot;repository_verification_exception&quot; reason: &quot;[pupfqjgfu] path [RepositoryS3StsCredentialsRestIT-a434ec7-base_path]\ \ is not accessible on master node&quot; type: &quot;repository_verification_exception&quot; reason: &quot;[pupfqjgfu] path [RepositoryS3StsCredentialsRestIT-a434ec7-base_path] is\ \ not accessible on master node&quot; caused_by: type: &quot;i_o_exception&quot; reason: &quot;Exception when listing blobs by prefix [index-]&quot; caused_by: type: &quot;sdk_client_exception&quot; reason: &quot;Unable to calculate a request signature: Unable to calculate a request\ \ signature: No installed provider supports this key: javax.crypto.spec.SecretKeySpec&quot; caused_by: type: &quot;sdk_client_exception&quot; reason: &quot;Unable to calculate a request signature: No installed provider supports\ \ this key: javax.crypto.spec.SecretKeySpec&quot; caused_by: type: &quot;invalid_key_exception&quot; reason: &quot;No installed provider supports this key: javax.crypto.spec.SecretKeySpec&quot; status: 500 ``` **Issue Reasons:** - [8.x] 6 failures in class org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT (1.0% fail rate in 625 executions) - [8.x] 5 failures in step openjdk17_checkpart1_java-fips-matrix (27.8% fail rate in 18 executions) - [8.x] 5 failures in pipeline elasticsearch-periodic (26.3% fail rate in 19 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Save duplicate REST client in ESRestTestCase (#117910) (#118105) I debugged some tests today and noticed that these two clients are the same in almost all cases, no need to use extra connections. Might give usa small speedup for these tests that tend to be quite slow relative to the node client based tests.</MESSAGE>
    <SHA>6f665046cc67e6ec1d07e8f54773bc43bed2f4bb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT org.elasticsearch.repositories.s3.RepositoryS3StsCredentialsRestIT #117897</MESSAGE>
      <SHA>6d9fc396b2cfc270702d0d066e0055c20b7ce7f9</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
