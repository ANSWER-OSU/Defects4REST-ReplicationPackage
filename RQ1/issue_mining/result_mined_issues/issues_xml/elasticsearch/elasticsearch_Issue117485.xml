<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>117485</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/117485</ISSUEURL>
  <TITLE>[CI] SearchQueryThenFetchAsyncActionTests testMinimumVersionBetweenNewAndOldVersion failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic #5069 / single-processor-node-tests](https://gradle-enterprise.elastic.co/s/3hhpt3wfyj3sw) - [elasticsearch-periodic-platform-support #5047 / oraclelinux-7_platform-support-unix](https://gradle-enterprise.elastic.co/s/ylioiiouw4qks) - [elasticsearch-pull-request #43431 / part-1](https://gradle-enterprise.elastic.co/s/5fz6wtssce7na) - [elasticsearch-periodic-platform-support #5041 / rocky-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/62zsczuax56bo) - [elasticsearch-periodic-platform-support #5041 / rhel-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/zeeosmzgsg3d6) - [elasticsearch-periodic-platform-support #5023 / rhel-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/cr3tpg6a75rgy) - [elasticsearch-periodic-platform-support #5017 / ubuntu-2004_platform-support-unix](https://gradle-enterprise.elastic.co/s/p66ejxachclla) **Reproduction Line:** ``` ./gradlew &quot;:server:test&quot; --tests &quot;org.elasticsearch.action.search.SearchQueryThenFetchAsyncActionTests.testMinimumVersionBetweenNewAndOldVersion&quot; -Dtests.seed=C20A79FFF301F056 -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=vmw -Dtests.timezone=America/Grand_Turk -Druntime.java=23 ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.action.search.SearchQueryThenFetchAsyncActionTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testMinimumVersionBetweenNewAndOldVersion),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Expected: an instance of org.elasticsearch.action.search.VersionMismatchException but: &lt;java.lang.NullPointerException: Cannot invoke &quot;java.util.function.BiFunction.apply(Object, Object)&quot; because &quot;this.responseWrapper&quot; is null&gt; is a java.lang.NullPointerException ``` **Issue Reasons:** - [8.x] 2 consecutive failures in test testMinimumVersionBetweenNewAndOldVersion - [8.x] 7 failures in test testMinimumVersionBetweenNewAndOldVersion (3.0% fail rate in 233 executions) - [8.x] 2 failures in step rhel-8_platform-support-unix (40.0% fail rate in 5 executions) - [8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (66.7% fail rate in 6 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>87</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[Build] Fix fips testing after buildparams rework (#116934) (#117553) (cherry picked from commit 81e3afaafacc9cc6bc9de3c2d866e0c3fda95c31)</MESSAGE>
    <SHA>e5ffebd759b6ad72f5528201cfbeb5aabef573cb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.action.search.SearchQueryThenFetchAsyncActionTests testMinimumVersionBetweenNewAndOldVersion #117485</MESSAGE>
      <SHA>35e5dea31a1e19de6211c52c73a0175e62ac4b44</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
