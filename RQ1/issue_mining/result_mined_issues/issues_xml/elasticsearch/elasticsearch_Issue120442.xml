<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>120442</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/120442</ISSUEURL>
  <TITLE>[CI] RetrySearchIntegTests testRetryPointInTime failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-intake #16092 / part2](https://gradle-enterprise.elastic.co/s/nbs5e73o2t2ys) - [elasticsearch-periodic-platform-support #5920 / amazonlinux-2023_platform-support-aws](https://gradle-enterprise.elastic.co/s/wmdys5odzpbrw) - [elasticsearch-periodic #5930 / graalvm-ce17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/otemcwl2qcs4s) - [elasticsearch-periodic-platform-support #5915 / ubuntu-2004-aarch64_checkpart2_platform-support-arm](https://gradle-enterprise.elastic.co/s/7k6jwnarutqw6) - [elasticsearch-periodic-platform-support #5885 / sles-15_platform-support-unix](https://gradle-enterprise.elastic.co/s/szep5mtxj4llo) **Reproduction Line:** ``` ./gradlew &quot;:x-pack:plugin:searchable-snapshots:internalClusterTest&quot; --tests &quot;org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests.testRetryPointInTime&quot; -Dtests.seed=888B904F102EA483 -Dtests.locale=en-RW -Dtests.timezone=GMT -Druntime.java=23 ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testRetryPointInTime),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Index{id='refusjswma/2T-J6A-JTIO91Qfu60Ty5A/j8luJZLiQl-1W2ZB_olcZw/2/_3.cfe/@0', seqNo=3, primaryTerm=1, version=1, autoGeneratedIdTimestamp=-1} Expected: &lt;3L&gt; but: was &lt;1L&gt; ``` **Issue Reasons:** - [8.x] 5 failures in test testRetryPointInTime (1.3% fail rate in 398 executions) - [8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (27.3% fail rate in 11 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>35</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[8.x] Do not serialize EsIndex in plan (#119580) (#120496) Certain plan classes (such as EsRelation, EsSourceExec, EsQueryExec) contain and serialize the entire EsIndex instance. This instance might contain huge mapping that is never used in plan. This change replaces EsIndex usage with indexPattern and indexNameWithModes to minimize the size of the serialized plan.</MESSAGE>
    <SHA>7284a697e9d5efb176a80ce833cc08962e906922</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests testRetryPointInTime #120442</MESSAGE>
      <SHA>1270bde52f3082d9c674e127e5f369f7737cc7ac</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
