<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>126765</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/126765</ISSUEURL>
  <TITLE>[CI] MixedClusterEsqlSpecIT - test {keep.StatsBySubFieldSortedByKey SYNC}</TITLE>
  <DESCRIPTION>### CI Link https://buildkite.com/elastic/elasticsearch-pull-request/builds/67716#0196334a-06ea-4c3f-8fbc-a02d397a754d ### Repro line ./gradlew &quot;:x-pack:plugin:esql:qa:server:mixed-cluster:v8.19.0#javaRestTest&quot; -Dtests.class=&quot;org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT&quot; -Dtests.method=&quot;test {keep.StatsBySubFieldSortedByKey SYNC}&quot; -Dtests.seed=53A6D3CC8276AF96 -Dtests.bwc=true -Dtests.locale=he-Hebr-IL -Dtests.timezone=Africa/Maputo -Druntime.java=24 ### Does it reproduce? Yes ### Applicable branches main ### Failure history _No response_ ### Failure excerpt ``` MixedClusterEsqlSpecIT &gt; test {row.Sum ASYNC} FAILED -- | java.lang.AssertionError: Expected a map containing | lt_1s: &lt;33&gt; | lt_1d: &lt;0&gt; | lt_10s: &lt;1&gt; | gt_1d: &lt;0&gt; | lt_1h: &lt;0&gt; | lt_100ms: &lt;1475&gt; | lt_1m: &lt;0&gt; | lt_10h: &lt;0&gt; | lt_10m: &lt;0&gt; | lt_10ms: expected &lt;835&gt; but was &lt;834&gt; | at __randomizedtesting.SeedInfo.seed([53A6D3CC8276AF96:DBF2EC162C8AC26E]:0) | at org.elasticsearch.test.MapMatcher.assertMap(MapMatcher.java:85) | at org.elasticsearch.test.MapMatcher.assertMap(MapMatcher.java:68) | at org.elasticsearch.xpack.esql.qa.rest.EsqlSpecTestCase.doTest(EsqlSpecTestCase.java:298) | at org.elasticsearch.xpack.esql.qa.rest.EsqlSpecTestCase.test(EsqlSpecTestCase.java:178) | at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) | at java.base/java.lang.reflect.Method.invoke(Method.java:565) | at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1763) | at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946) | at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982) | at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48) | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45) | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) | at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843) | at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490) | at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955) | at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840) | at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891) | at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902) | at org.elasticsearch.test.cluster.local.DefaultLocalElasticsearchCluster$1.evaluate(DefaultLocalElasticsearchCluster.java:49) | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38) | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43) | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44) | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60) | at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47) | at org.junit.rules.RunRules.evaluate(RunRules.java:20) | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390) | at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850) | at java.base/java.lang.Thread.run(Thread.java:1447) ```</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[ML] Refactoring inference API non-streaming response validation error object check (#126725) * Refactoring so that non-streaming does not check for error object * Fixing test</MESSAGE>
    <SHA>31bb3d16194d6a488e0ebded6cb1c422aea18205</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Reenable test now that this if fixed in 8.x Relates to #126765</MESSAGE>
      <SHA>39653f4f0b5507bd472f784f101492f367b84fb1</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Reenable test now that this if fixed in 8.x (#126789) Relates to #126765</MESSAGE>
      <SHA>af686b2606d4fe600f27f6e200fd2b251b640b04</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
