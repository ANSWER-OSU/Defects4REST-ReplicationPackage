<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>118728</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/118728</ISSUEURL>
  <TITLE>[CI] RecoverySourcePruneMergePolicyTests testPruneSome failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-intake #14602 / part1](https://gradle-enterprise.elastic.co/s/2nho3cqcxlyji) - [elasticsearch-pull-request #46956 / part-1](https://gradle-enterprise.elastic.co/s/xbjczop3yorvo) - [elasticsearch-pull-request #46931 / part-1](https://gradle-enterprise.elastic.co/s/ku5uozzo4nssw) - [elasticsearch-periodic #5414 / encryption-at-rest](https://gradle-enterprise.elastic.co/s/lsosd2dq57uh2) - [elasticsearch-periodic-platform-support #5349 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/jsvxkvjyg4ka2) **Reproduction Line:** ``` ./gradlew &quot;:server:test&quot; --tests &quot;org.elasticsearch.index.engine.RecoverySourcePruneMergePolicyTests.testPruneSome&quot; -Dtests.seed=A8E66C85BDF740CF -Dtests.locale=ko-CN -Dtests.timezone=SST -Druntime.java=23 ``` **Applicable branches:** main **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.index.engine.RecoverySourcePruneMergePolicyTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testPruneSome),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Expected: a value greater than &lt;10L&gt; but: &lt;10L&gt; was equal to &lt;10L&gt; ``` **Issue Reasons:** - [main] 5 failures in test testPruneSome (0.8% fail rate in 620 executions) - [main] 2 failures in step part-1 (0.8% fail rate in 252 executions) - [main] 2 failures in pipeline elasticsearch-pull-request (0.8% fail rate in 250 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Upgrade to Lucene 9.12.1 (#118300) This commit upgrades to Lucene 9.12.1. Among the bug fixes that Lucene 9.12.1 brings, it also allows easier configuration of the Panama vectorization provider with newer Java versions. Set the org.apache.lucene.vectorization.upperJavaFeatureVersion system property to increase the set of Java versions that Panama vectorization will provide optimized implementations for. We'll need to carefully bump this sys property in the Elasticsearch 8.x series along side the JDK upgrade.</MESSAGE>
    <SHA>cd5ec2040f20f73a9516ba18b2831d6b1e46b967</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.index.engine.RecoverySourcePruneMergePolicyTests testPruneSome #118728</MESSAGE>
      <SHA>329a3b0a58f8b8f259f6dd3420bce7b12455a744</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.index.engine.RecoverySourcePruneMergePolicyTests testPruneSome #118728</MESSAGE>
      <SHA>06dd7033aaa6b90bb33cedf230d213c7d8fcdeeb</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.index.engine.RecoverySourcePruneMergePolicyTests testPruneSome #118728</MESSAGE>
      <SHA>312c21a3240339477c70fb512b5643b23952d572</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[test] Fix RecoverySourcePruneMergePolicyTests#testPruneSome The `extra_source_size` field is set to a value between 10 and 10000 inclusive, so the assertion should be `greaterThanOrEqualTo(10)` rather than greaterThan(10). Resolve #118728</MESSAGE>
      <SHA>e7c4ba1adbb3f6c0f110cd292bcbd89714b84008</SHA>
      <PATCHEDFILES>
        <FILE>server/src/test/java/org/elasticsearch/index/engine/RecoverySourcePruneMergePolicyTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
