<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>120993</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/120993</ISSUEURL>
  <TITLE>Upgrade AWS SDK v1 to v2</TITLE>
  <DESCRIPTION>### Description According to AWS, the v1 SDK will only be supported until the end of 2025. Raising awareness so this can be tackled in a timely manner. - https://aws.amazon.com/blogs/developer/announcing-end-of-support-for-aws-sdk-for-java-v1-x-on-december-31-2025/</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>86</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[renovate] Update branches config</MESSAGE>
    <SHA>f3c4f518e255d2bf43579f891bb69f2673b2d76c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Upgrade `repository-s3` to AWS SDK v2 Closes #120993</MESSAGE>
      <SHA>c265fb9214ca604dbc2b154ca83ffd28ad6f5af7</SHA>
      <PATCHEDFILES>
        <FILE>build-tools-internal/version.properties</FILE>
        <FILE>docs/changelog/126593.yaml</FILE>
        <FILE>docs/changelog/999999.yaml</FILE>
        <FILE>gradle/verification-metadata.xml</FILE>
        <FILE>modules/repository-s3/build.gradle</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jackson-LICENSE</FILE>
        <FILE>modules/repository-s3/licenses/jackson-NOTICE</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/AmazonS3Wrapper.java</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/RepositoryCredentialsTests.java</FILE>
        <FILE>modules/repository-s3/qa/third-party/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/third-party/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryThirdPartyTests.java</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/src/test/java/org/elasticsearch/repositories/s3/CustomWebIdentityTokenCredentialsProviderTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryMetricsTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3BasicCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3EcsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV1CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV2CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3RestReloadCredentialsIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3StsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/AmazonS3Reference.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/HttpScheme.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesser.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicSessionCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobContainer.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobStore.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3ClientSettings.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RepositoryPlugin.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RetryingInputStream.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java</FILE>
        <FILE>modules/repository-s3/src/main/resources/org/elasticsearch/repositories/s3/regions_by_endpoint.txt</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AwsS3ServiceImplTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesserTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobContainerRetriesTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobStoreContainerTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ClientSettingsTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RetryingInputStreamTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ServiceTests.java</FILE>
        <FILE>test/fixtures/aws-fixture-utils/src/main/java/fixture/aws/AwsCredentialsUtils.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/main/java/fixture/aws/sts/AwsStsHttpHandler.java</FILE>
        <FILE>test/fixtures/ec2-imds-fixture/src/main/java/fixture/aws/imds/Ec2ImdsHttpFixture.java</FILE>
        <FILE>test/fixtures/s3-fixture/src/main/java/fixture/s3/S3HttpHandler.java</FILE>
        <FILE>test/framework/src/main/java/org/elasticsearch/repositories/blobstore/ESMockAPIBasedRepositoryIntegTestCase.java</FILE>
        <FILE>test/test-clusters/src/main/java/org/elasticsearch/test/cluster/local/AbstractLocalSpecBuilder.java</FILE>
        <FILE>x-pack/plugin/searchable-snapshots/qa/s3/src/javaRestTest/java/org/elasticsearch/xpack/searchablesnapshots/s3/S3SearchableSnapshotsCredentialsReloadIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/build.gradle</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/src/javaRestTest/java/org/elasticsearch/repositories/blobstore/testkit/analyze/S3RepositoryAnalysisRestIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/src/main/java/org/elasticsearch/repositories/blobstore/testkit/analyze/BlobAnalyzeAction.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Upgrade `repository-s3` to AWS SDK v2 (#126843) Closes #120993</MESSAGE>
      <SHA>b028c0af56597fe66593e2f34afe996504648bbd</SHA>
      <PATCHEDFILES>
        <FILE>build-tools-internal/version.properties</FILE>
        <FILE>docs/changelog/126843.yaml</FILE>
        <FILE>gradle/verification-metadata.xml</FILE>
        <FILE>modules/repository-s3/build.gradle</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jackson-LICENSE</FILE>
        <FILE>modules/repository-s3/licenses/jackson-NOTICE</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/AmazonS3Wrapper.java</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/RepositoryCredentialsTests.java</FILE>
        <FILE>modules/repository-s3/qa/third-party/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/third-party/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryThirdPartyTests.java</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/src/test/java/org/elasticsearch/repositories/s3/CustomWebIdentityTokenCredentialsProviderTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryMetricsTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3BasicCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3EcsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV1CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV2CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3RestReloadCredentialsIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3StsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/AmazonS3Reference.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/HttpScheme.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesser.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicSessionCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobContainer.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobStore.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3ClientSettings.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RepositoryPlugin.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RetryingInputStream.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java</FILE>
        <FILE>modules/repository-s3/src/main/resources/org/elasticsearch/repositories/s3/regions_by_endpoint.txt</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AwsS3ServiceImplTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesserTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobContainerRetriesTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobStoreContainerTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ClientSettingsTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RetryingInputStreamTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ServiceTests.java</FILE>
        <FILE>test/fixtures/aws-fixture-utils/src/main/java/fixture/aws/AwsCredentialsUtils.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/main/java/fixture/aws/sts/AwsStsHttpHandler.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/test/java/fixture/aws/sts/AwsStsHttpHandlerTests.java</FILE>
        <FILE>test/fixtures/ec2-imds-fixture/src/main/java/fixture/aws/imds/Ec2ImdsHttpFixture.java</FILE>
        <FILE>test/fixtures/s3-fixture/src/main/java/fixture/s3/S3HttpHandler.java</FILE>
        <FILE>test/framework/src/main/java/org/elasticsearch/repositories/blobstore/ESMockAPIBasedRepositoryIntegTestCase.java</FILE>
        <FILE>test/test-clusters/src/main/java/org/elasticsearch/test/cluster/local/AbstractLocalSpecBuilder.java</FILE>
        <FILE>x-pack/plugin/searchable-snapshots/qa/s3/src/javaRestTest/java/org/elasticsearch/xpack/searchablesnapshots/s3/S3SearchableSnapshotsCredentialsReloadIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/build.gradle</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/src/javaRestTest/java/org/elasticsearch/repositories/blobstore/testkit/analyze/S3RepositoryAnalysisRestIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/src/main/java/org/elasticsearch/repositories/blobstore/testkit/analyze/BlobAnalyzeAction.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Upgrade `repository-s3` to AWS SDK v2 Closes #120993 Backport of #126843 to `8.x`</MESSAGE>
      <SHA>0b30c22c0371b7c3499a99865d368e6940c61556</SHA>
      <PATCHEDFILES>
        <FILE>build-tools-internal/version.properties</FILE>
        <FILE>docs/changelog/126843.yaml</FILE>
        <FILE>gradle/verification-metadata.xml</FILE>
        <FILE>modules/repository-s3/build.gradle</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jackson-LICENSE</FILE>
        <FILE>modules/repository-s3/licenses/jackson-NOTICE</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/AmazonS3Wrapper.java</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/RepositoryCredentialsTests.java</FILE>
        <FILE>modules/repository-s3/qa/third-party/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/third-party/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryThirdPartyTests.java</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/src/test/java/org/elasticsearch/repositories/s3/CustomWebIdentityTokenCredentialsProviderTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryMetricsTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3BasicCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3EcsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV1CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV2CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3RestReloadCredentialsIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3StsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/AmazonS3Reference.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/HttpScheme.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesser.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicSessionCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobContainer.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobStore.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3ClientSettings.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RepositoryPlugin.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RetryingInputStream.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java</FILE>
        <FILE>modules/repository-s3/src/main/resources/org/elasticsearch/repositories/s3/regions_by_endpoint.txt</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AwsS3ServiceImplTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesserTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobContainerRetriesTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobStoreContainerTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ClientSettingsTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RetryingInputStreamTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ServiceTests.java</FILE>
        <FILE>test/fixtures/aws-fixture-utils/src/main/java/fixture/aws/AwsCredentialsUtils.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/main/java/fixture/aws/sts/AwsStsHttpHandler.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/test/java/fixture/aws/sts/AwsStsHttpHandlerTests.java</FILE>
        <FILE>test/fixtures/ec2-imds-fixture/src/main/java/fixture/aws/imds/Ec2ImdsHttpFixture.java</FILE>
        <FILE>test/framework/src/main/java/org/elasticsearch/repositories/blobstore/ESMockAPIBasedRepositoryIntegTestCase.java</FILE>
        <FILE>test/test-clusters/src/main/java/org/elasticsearch/test/cluster/local/AbstractLocalSpecBuilder.java</FILE>
        <FILE>x-pack/plugin/searchable-snapshots/qa/s3/src/javaRestTest/java/org/elasticsearch/xpack/searchablesnapshots/s3/S3SearchableSnapshotsCredentialsReloadIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/build.gradle</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/src/javaRestTest/java/org/elasticsearch/repositories/blobstore/testkit/analyze/S3RepositoryAnalysisRestIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/src/main/java/org/elasticsearch/repositories/blobstore/testkit/analyze/BlobAnalyzeAction.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Upgrade `repository-s3` to AWS SDK v2 (#127331) Closes #120993 Backport of #126843 to `8.x`</MESSAGE>
      <SHA>2e3df0c4c1df93ef1a854d5acec1deae9be91c4a</SHA>
      <PATCHEDFILES>
        <FILE>build-tools-internal/version.properties</FILE>
        <FILE>docs/changelog/126843.yaml</FILE>
        <FILE>gradle/verification-metadata.xml</FILE>
        <FILE>modules/repository-s3/build.gradle</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-java-sdk-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/aws-sdk-2-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jackson-LICENSE</FILE>
        <FILE>modules/repository-s3/licenses/jackson-NOTICE</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/jaxb-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/reactive-streams-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-LICENSE.txt</FILE>
        <FILE>modules/repository-s3/licenses/slf4j-api-NOTICE.txt</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/AmazonS3Wrapper.java</FILE>
        <FILE>modules/repository-s3/qa/insecure-credentials/src/test/java/org/elasticsearch/repositories/s3/RepositoryCredentialsTests.java</FILE>
        <FILE>modules/repository-s3/qa/third-party/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/third-party/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryThirdPartyTests.java</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/build.gradle</FILE>
        <FILE>modules/repository-s3/qa/web-identity-token/src/test/java/org/elasticsearch/repositories/s3/CustomWebIdentityTokenCredentialsProviderTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryMetricsTests.java</FILE>
        <FILE>modules/repository-s3/src/internalClusterTest/java/org/elasticsearch/repositories/s3/S3BlobStoreRepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3BasicCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3EcsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV1CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3ImdsV2CredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3RestReloadCredentialsIT.java</FILE>
        <FILE>modules/repository-s3/src/javaRestTest/java/org/elasticsearch/repositories/s3/RepositoryS3StsCredentialsRestIT.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/AmazonS3Reference.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/HttpScheme.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesser.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BasicSessionCredentials.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobContainer.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3BlobStore.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3ClientSettings.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RepositoryPlugin.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3RetryingInputStream.java</FILE>
        <FILE>modules/repository-s3/src/main/java/org/elasticsearch/repositories/s3/S3Service.java</FILE>
        <FILE>modules/repository-s3/src/main/resources/org/elasticsearch/repositories/s3/regions_by_endpoint.txt</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/AwsS3ServiceImplTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/RegionFromEndpointGuesserTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobContainerRetriesTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3BlobStoreContainerTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ClientSettingsTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RepositoryTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3RetryingInputStreamTests.java</FILE>
        <FILE>modules/repository-s3/src/test/java/org/elasticsearch/repositories/s3/S3ServiceTests.java</FILE>
        <FILE>test/fixtures/aws-fixture-utils/src/main/java/fixture/aws/AwsCredentialsUtils.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/main/java/fixture/aws/sts/AwsStsHttpHandler.java</FILE>
        <FILE>test/fixtures/aws-sts-fixture/src/test/java/fixture/aws/sts/AwsStsHttpHandlerTests.java</FILE>
        <FILE>test/fixtures/ec2-imds-fixture/src/main/java/fixture/aws/imds/Ec2ImdsHttpFixture.java</FILE>
        <FILE>test/framework/src/main/java/org/elasticsearch/repositories/blobstore/ESMockAPIBasedRepositoryIntegTestCase.java</FILE>
        <FILE>test/test-clusters/src/main/java/org/elasticsearch/test/cluster/local/AbstractLocalSpecBuilder.java</FILE>
        <FILE>x-pack/plugin/searchable-snapshots/qa/s3/src/javaRestTest/java/org/elasticsearch/xpack/searchablesnapshots/s3/S3SearchableSnapshotsCredentialsReloadIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/build.gradle</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/s3/src/javaRestTest/java/org/elasticsearch/repositories/blobstore/testkit/analyze/S3RepositoryAnalysisRestIT.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/src/main/java/org/elasticsearch/repositories/blobstore/testkit/analyze/BlobAnalyzeAction.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
