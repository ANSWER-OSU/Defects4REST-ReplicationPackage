<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>122940</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/122940</ISSUEURL>
  <TITLE>[CI] AsyncSearchSecurityIT class failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic-platform-support #6762 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/nti2zjpphgq5u) - [elasticsearch-periodic-platform-support #6762 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/tnl73hk2rv5xu) - [elasticsearch-periodic-platform-support #6755 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/t34ie23dirlsg) - [elasticsearch-periodic-platform-support #6741 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/kxshn2yjw3mgi) - [elasticsearch-periodic-platform-support #6734 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/hxiw53nduytay) - [elasticsearch-periodic-platform-support #6734 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/6du54qhr7koze) - [elasticsearch-periodic-platform-support #6727 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/kdv4kvpl4d44i) - [elasticsearch-periodic-platform-support #6720 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/qzda3qe654atc) - [elasticsearch-periodic-platform-support #6713 / windows-2022_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/pysyj5u3hkrmc) - [elasticsearch-periodic-platform-support #6706 / windows-2019_checkpart4_platform-support-windows](https://gradle-enterprise.elastic.co/s/vh426lxbkedds) **Reproduction Line:** ``` undefined ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.search.AsyncSearchSecurityIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.search.AsyncSearchSecurityIT),title:'Test',type:optionsListControl))))) **Failure Message:** ``` undefined ``` **Issue Reasons:** - [8.x] 2 consecutive failures in class org.elasticsearch.xpack.search.AsyncSearchSecurityIT - [8.x] 11 consecutive failures in step windows-2022_checkpart4_platform-support-windows - [8.x] 11 consecutive failures in step windows-2019_checkpart4_platform-support-windows - [8.x] 22 failures in class org.elasticsearch.xpack.search.AsyncSearchSecurityIT (3.3% fail rate in 661 executions) - [8.x] 11 failures in step windows-2022_checkpart4_platform-support-windows (100.0% fail rate in 11 executions) - [8.x] 11 failures in step windows-2019_checkpart4_platform-support-windows (100.0% fail rate in 11 executions) - [8.x] 15 failures in pipeline elasticsearch-periodic-platform-support (83.3% fail rate in 18 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>50</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fail primary term and generation listeners on a closed shard (#122713) If a shard has been closed, we should quickly bail out and fail all waiting primary term and generation listeners. Otherwise, the engine implementation may try to successfully to complete the provided listeners and perform operations on an already closed shard and cause some unexpected errors.</MESSAGE>
    <SHA>8e34393227dbe83a2879c58469e02f911db12bc1</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.xpack.search.AsyncSearchSecurityIT org.elasticsearch.xpack.search.AsyncSearchSecurityIT #122940</MESSAGE>
      <SHA>04422cdc7fab2137fa8685f8aa221c09ae69e859</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
