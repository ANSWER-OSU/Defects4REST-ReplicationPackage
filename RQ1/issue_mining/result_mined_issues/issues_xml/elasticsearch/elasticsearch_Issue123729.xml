<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>123729</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/123729</ISSUEURL>
  <TITLE>Index creation requests should return 400 on analyzer dictionary missing</TITLE>
  <DESCRIPTION>### Elasticsearch Version _any_ ### Installed Plugins any ### Java Version _bundled_ ### OS Version _any_ ### Problem Description When attempting to create an index with an analyzer that references a dictionary file (or any file) that isn't present on the system, it should return a bad request. ### Steps to Reproduce Try to create an index with hunspell analyzer referencing any locale. ### Logs (if relevant) _No response_</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Cleanup RegisteredDomainProcessorTests (#124118)</MESSAGE>
    <SHA>65a8e778e3ebca2b1a5f0dc20796fe165dbaf4fc</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729</MESSAGE>
      <SHA>a92b1d6892758074eed617f9b736b294220bf230</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>modules/analysis-common/build.gradle</FILE>
        <FILE>modules/analysis-common/src/yamlRestTest/resources/rest-api-spec/test/indices.analyze/15_analyze.yml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729 (cherry picked from commit a92b1d6892758074eed617f9b736b294220bf230)</MESSAGE>
      <SHA>fe6a020698d03f559401b8fb5e41cec79b70272b</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>modules/analysis-common/build.gradle</FILE>
        <FILE>modules/analysis-common/src/yamlRestTest/resources/rest-api-spec/test/indices.analyze/15_analyze.yml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729 (cherry picked from commit a92b1d6892758074eed617f9b736b294220bf230)</MESSAGE>
      <SHA>c1d8dd31d46bee71a6f2f8dfb0884c4b9ae9cb75</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) (#124146) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729 (cherry picked from commit a92b1d6892758074eed617f9b736b294220bf230)</MESSAGE>
      <SHA>1911a7d5a7081c9bbb1cbdd8433ccf038bb38a5e</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) (#124143) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729 (cherry picked from commit a92b1d6892758074eed617f9b736b294220bf230)</MESSAGE>
      <SHA>961c0e31ab9b3b78f8ad95e64dc0548cf9034c21</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>modules/analysis-common/build.gradle</FILE>
        <FILE>modules/analysis-common/src/yamlRestTest/resources/rest-api-spec/test/indices.analyze/15_analyze.yml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) (#124142) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729 (cherry picked from commit a92b1d6892758074eed617f9b736b294220bf230)</MESSAGE>
      <SHA>88676b0f48291ce04badf0907239476353be8e00</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>modules/analysis-common/src/yamlRestTest/resources/rest-api-spec/test/indices.analyze/15_analyze.yml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adjust exception thrown when unable to load hunspell dict (#123743) On index creation, its possible to configure an hunspell analyzer, but reference a locale file that actually doesn't exist or isn't accessible. This error, like our other user dictionary errors, should be an IAE not an ISE. closes: https://github.com/elastic/elasticsearch/issues/123729</MESSAGE>
      <SHA>6c110cef5fcd081fb76f3404c47aae7c366f9102</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/123743.yaml</FILE>
        <FILE>modules/analysis-common/build.gradle</FILE>
        <FILE>modules/analysis-common/src/yamlRestTest/resources/rest-api-spec/test/indices.analyze/15_analyze.yml</FILE>
        <FILE>rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/indices.create/10_basic.yml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/indices/analysis/HunspellService.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/rest/action/admin/indices/CreateIndexCapabilities.java</FILE>
        <FILE>server/src/test/java/org/elasticsearch/indices/analyze/HunspellServiceTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
