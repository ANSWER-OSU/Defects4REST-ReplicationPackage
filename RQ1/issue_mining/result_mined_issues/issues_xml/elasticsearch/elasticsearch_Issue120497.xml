<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>120497</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/120497</ISSUEURL>
  <TITLE>[CI] DocsClientYamlTestSuiteIT class failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-intake #16068 / part1](https://gradle-enterprise.elastic.co/s/rbnrwtavtq4vg) - [elasticsearch-pull-request #51440 / part-1](https://gradle-enterprise.elastic.co/s/7cbryulhuthas) - [elasticsearch-pull-request #51440 / part-1-fips](https://gradle-enterprise.elastic.co/s/nubywdpnja43g) - [elasticsearch-pull-request #51425 / part-1](https://gradle-enterprise.elastic.co/s/3byms2rfsmzvy) - [elasticsearch-pull-request #51425 / part-1-fips](https://gradle-enterprise.elastic.co/s/gei3pjltokrbu) - [elasticsearch-pull-request #51386 / part-1-fips](https://gradle-enterprise.elastic.co/s/x4zst2gkhrt7g) - [elasticsearch-pull-request #51386 / part-1](https://gradle-enterprise.elastic.co/s/vnnsevwxxgjcc) - [elasticsearch-pull-request #51339 / part-1](https://gradle-enterprise.elastic.co/s/lzfgqjmcjtqwg) - [elasticsearch-pull-request #51339 / part-1-fips](https://gradle-enterprise.elastic.co/s/lgcglkcgd5fmk) - [elasticsearch-pull-request #51151 / part-1](https://gradle-enterprise.elastic.co/s/hvi7ach6o7iuo) **Reproduction Line:** ``` ./gradlew &quot;:docs:yamlRestTest&quot; --tests &quot;org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/aggregations/metrics/median-absolute-deviation-aggregation/line_90}&quot; -Dtests.seed=6C9BF90A87682AF9 -Dtests.locale=su-Latn-ID -Dtests.timezone=America/Matamoros -Druntime.java=23 ``` **Applicable branches:** main **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.RuntimeException: Failure at [reference/aggregations/metrics/median-absolute-deviation-aggregation:80]: Connection refused ``` **Issue Reasons:** - [main] 22 failures in class org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT (2.2% fail rate in 988 executions) - [main] 14 failures in step part-1 (3.4% fail rate in 410 executions) - [main] 6 failures in step part-1-fips (50.0% fail rate in 12 executions) - [main] 15 failures in pipeline elasticsearch-pull-request (3.6% fail rate in 413 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Do not serialize EsIndex in plan (#119580) Certain plan classes (such as EsRelation, EsSourceExec, EsQueryExec) contain and serialize the entire EsIndex instance. This instance might contain huge mapping that is never used in plan. This change replaces EsIndex usage with indexPattern and indexNameWithModes to minimize the size of the serialized plan.</MESSAGE>
    <SHA>5ab81a950008eb8215d6c8749610c1a9900fd798</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT #120497</MESSAGE>
      <SHA>4640165753a79aab270aa86e673668aa1e8b977d</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Unmute `DocsClientYamlTestSuiteIT` This seems to have been muted due to an infra blip. See https://github.com/elastic/elasticsearch/issues/120497#issuecomment-2606127709 Closes #120497</MESSAGE>
      <SHA>9f3190ac0487ce88643ee9f1296644d270067316</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
