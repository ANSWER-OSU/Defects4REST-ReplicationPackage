<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>252</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/252</ISSUEURL>
  <TITLE>Commit-hash checking on hook handlers</TITLE>
  <DESCRIPTION>When hook triggered, drone checking the commit hash and see if it's already exists in the commits table: https://github.com/drone/drone/blob/master/pkg/handler/hooks.go#L220 ``` Go _, err = database.GetCommitBranchHash(hook.Branch(), hook.Head.Id, repo.ID) if err != nil &amp;&amp; err != sql.ErrNoRows { println(&quot;commit already exists&quot;) return RenderText(w, http.StatusText(http.StatusBadGateway), http.StatusBadGateway) } ``` Do the lines above really do what it supposed to do? Looks like it only checks for error, then print `commit already exists` when error is not nil and not equal to `sql.ErrNoRows`. But it wont get trapped there if the commit actually exists in the table, since the error will be `nil`. Aren't we supposed to also exit there if the error is nil (the commit is found)?</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>184</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'eb/code-683' of _OKE5H2PQKOUfzFFDuD4FA/default/CODE/gitness (#249)</MESSAGE>
    <SHA>16801fc59d8a6c5b80594b7032de9ab3df53c2a4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch 'ui/CODE-687' of _OKE5H2PQKOUfzFFDuD4FA/default/CODE/gitness (#252)</MESSAGE>
      <SHA>7e5435823803f603588cfd7b00fa6ac0d4652b90</SHA>
      <PATCHEDFILES>
        <FILE>web/config/moduleFederation.config.js</FILE>
        <FILE>web/src/components/NewRepoModalButton/NewRepoModalButton.tsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
