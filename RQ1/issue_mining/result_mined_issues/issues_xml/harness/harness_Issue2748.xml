<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2748</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2748</ISSUEURL>
  <TITLE>Restarting a promoted build loses target environment</TITLE>
  <DESCRIPTION>When I try to restart a build that has been run as the result of a promotion, drone seems to trigger a new promotion build, but with the variable set to empty - for example, if I run `drone build promote my/repository 123 production` It works fine, but when I hit the restart button in the UI for this build, it does something roughly the equivalent of `drone build promote my/repository 123` (after the 123 intentionally left blank)</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>26</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [CDE-354]: Adding gitspace usage limiter &amp; checking usage before creation and start. (#2745) * feat: [CDE-354]: Adding gitspace usage limiter &amp; checking usage before creation and start.</MESSAGE>
    <SHA>077256b69c16ebe26ae7c85284ef6b3101bd3c80</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CDE-353]: Adding gitspace instance store method to calculate active time for all gitspaces between a given time window and filtered by a list of space IDs. (#2748) * feat: [CDE-353]: Adding gitspace instance store method to calculate active time for all gitspaces between a given time window and filtered by a list of space IDs.</MESSAGE>
      <SHA>a1a4e3fe0663ab2932a7f87ef470f8626b997b1f</SHA>
      <PATCHEDFILES>
        <FILE>app/store/database.go</FILE>
        <FILE>app/store/database/gitspace_instance.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
