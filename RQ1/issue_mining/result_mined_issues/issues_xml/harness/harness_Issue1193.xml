<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1193</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/1193</ISSUEURL>
  <TITLE>Plugin upgrades leave untagged layers</TITLE>
  <DESCRIPTION>When a plugin automatically upgrades, docker untags the older image layers, leaving them labeled as `&lt;none&gt;`. This is an example of what we see when running `docker images`: ``` REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE &lt;none&gt; &lt;none&gt; a3599da68365 8 hours ago 15.6 MB &lt;none&gt; &lt;none&gt; 80e7709b7395 8 hours ago 15.64 MB &lt;none&gt; &lt;none&gt; 9e0802a7fe0b 25 hours ago 15.6 MB &lt;none&gt; &lt;none&gt; e2c70e7e5329 29 hours ago 15.59 MB &lt;none&gt; &lt;none&gt; 0bc862fde87b 30 hours ago 15.59 MB ``` The can be removed with the following command: ``` sudo docker rmi $(sudo docker images -f &quot;dangling=true&quot; -q) ``` We should implement or document a strategy for dealing with these dangling images. We may implement something directly in drone. We may recommend a cron job. We may recommend running `docker-gc` [1] as a cron job. [1] https://github.com/spotify/docker-gc</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>583</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>exclude version from audit log (#1192)</MESSAGE>
    <SHA>84cc846445835a9c3b967730888035553973ecc5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix width in a couple of places when screen is small + clean up unused code (#1193)</MESSAGE>
      <SHA>7d0d9a45a10d6fbe1747548cd4c74eb9adadaf47</SHA>
      <PATCHEDFILES/>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
