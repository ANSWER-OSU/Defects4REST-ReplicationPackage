<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2511</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2511</ISSUEURL>
  <TITLE>&quot;Invalid or missing image&quot; when &quot;when:&quot; block is formatted incorrectly</TITLE>
  <DESCRIPTION>Drone 0.85 will fail a build with the error `invalid or missing image` if a `when:` line is outdented incorrectly away from its block. The build error should relate to the incorrectly-formatted `when:` line. Repro yaml: ```yaml pipeline: build_always: image: alpine commands: - echo &quot;hello always&quot; build_sometimes: image: alpine commands: - echo &quot;hello sometimes&quot; # When incorrectly formatted like this, error message in 0.85 is &quot;Invalid or missing image&quot; when: status: [ success ] event: push branch: master ```</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>20</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix missing empty type and color values validation (#2510) * Fix missing empty type and color values validation</MESSAGE>
    <SHA>7e3253d366318d57cf4d8cf7215332b4488a9c49</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>add space descendants data layer fn (#2511) * add space descendants data layer fn</MESSAGE>
      <SHA>d089d04025ff8f44930e5bab79e205f6e8ba43ab</SHA>
      <PATCHEDFILES>
        <FILE>app/services/label/label_pullreq.go</FILE>
        <FILE>app/store/database.go</FILE>
        <FILE>app/store/database/pullreq.go</FILE>
        <FILE>app/store/database/repo.go</FILE>
        <FILE>app/store/database/space.go</FILE>
        <FILE>types/repo.go</FILE>
        <FILE>types/space.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
