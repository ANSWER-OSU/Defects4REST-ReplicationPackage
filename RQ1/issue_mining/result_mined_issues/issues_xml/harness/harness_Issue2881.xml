<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2881</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2881</ISSUEURL>
  <TITLE>Improve kubernetes runner documentation</TITLE>
  <DESCRIPTION>current drone documentation contains only how to start drone runner as pod. However, that is not quite good for production use. First in production drone runner should be deployed as deployment. Secondly the instructions is missing rbac rules. Here you have rbac rules (hopefully this contains everything I went through the engine code): ``` kind: Role apiVersion: rbac.authorization.k8s.io/v1 metadata: namespace: default name: drone rules: - apiGroups: - &quot;&quot; resources: - secrets verbs: - create - delete - apiGroups: - &quot;&quot; resources: - pods - pods/log verbs: - get - create - delete - list - watch - update --- kind: RoleBinding apiVersion: rbac.authorization.k8s.io/v1 metadata: name: drone namespace: default subjects: - kind: ServiceAccount name: default namespace: default roleRef: kind: Role name: drone apiGroup: rbac.authorization.k8s.io ``` And Here the deployment: ``` apiVersion: apps/v1 kind: Deployment metadata: name: drone labels: app.kubernetes.io/name: drone spec: replicas: 1 selector: matchLabels: app.kubernetes.io/name: drone template: metadata: labels: app.kubernetes.io/name: drone spec: containers: - name: runner image: drone/drone-runner-kube:latest ports: - containerPort: 3000 env: - name: DRONE_RPC_HOST value: foobar.com - name: DRONE_RPC_PROTO value: https - name: DRONE_RPC_SECRET value: yyy ``` no idea which is correct place to report these?</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>11</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: [CDE-438]:modify list method for gitspace config (#2886) * add removed params * modify list gitspace config</MESSAGE>
    <SHA>178af1190217be312e010ab6e1eb550315647e68</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: [CDE-413]: Setting branch URL in all gitspace API response (#2881) * fix: [CDE-413]: Adding spacePath to method. * fix: [CDE-413]: Adding method to get branch url in the scm interface and using it to set the branch url in the gitspace config api responses. Removing the SCM interface as it has only 1 impl. Minor refactoring. * fix: [CDE-413]: Adding method to get branch url in the scm interface and using it to set the branch url in the gitspace config api responses. Removing the SCM interface as it has only 1 impl. Minor refactoring.</MESSAGE>
      <SHA>6dbe85fbfde5ad1c3ebfd50d4b652d228b8fca0a</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/gitspace/action.go</FILE>
        <FILE>app/api/controller/gitspace/controller.go</FILE>
        <FILE>app/api/controller/gitspace/create.go</FILE>
        <FILE>app/api/controller/gitspace/list_all.go</FILE>
        <FILE>app/api/controller/gitspace/wire.go</FILE>
        <FILE>app/gitspace/orchestrator/orchestrator_impl.go</FILE>
        <FILE>app/gitspace/orchestrator/wire.go</FILE>
        <FILE>app/gitspace/scm/gitness_scm.go</FILE>
        <FILE>app/gitspace/scm/public_scm.go</FILE>
        <FILE>app/gitspace/scm/scm.go</FILE>
        <FILE>app/gitspace/scm/scm_factory.go</FILE>
        <FILE>app/gitspace/scm/scm_provider.go</FILE>
        <FILE>app/gitspace/scm/wire.go</FILE>
        <FILE>app/services/gitspace/find.go</FILE>
        <FILE>app/services/gitspace/gitspace.go</FILE>
        <FILE>app/services/gitspace/wire.go</FILE>
        <FILE>cmd/gitness/wire_gen.go</FILE>
        <FILE>infraprovider/docker_provider.go</FILE>
        <FILE>types/gitspace.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
