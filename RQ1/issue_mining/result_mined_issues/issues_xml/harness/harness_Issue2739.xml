<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2739</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2739</ISSUEURL>
  <TITLE>Drone UI not accessible due to bad port configuration</TITLE>
  <DESCRIPTION>Running `drone/drone:1` on Kubernetes results in a broken web UI. The cause seems to be a malformed port configuration, which is logged by the pod on startup: {&quot;acme&quot;:false,&quot;host&quot;:&quot;drone.mydomain.com&quot;,&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;starting the http server&quot;,&quot;port&quot;:&quot;tcp://1.2.3.4:80&quot;,&quot;proto&quot;:&quot;https&quot;,&quot;time&quot;:&quot;2019-06-23T09:17:21Z&quot;,&quot;url&quot;:&quot;https://drone.mydomain.com&quot;} No explicit port is set. With this configuration, the web UI is inaccessible even when using `kubectl exec` to get into the pod. I currently use the following workaround. DRONE_SERVER_PORT: &quot;:80&quot; Setting this should not be necessary, right? It seems like drone is auto-discovering some kind of cluster IP (real IP redacted in the log above) and adding it to the port config. Or maybe my configuration is wrong. I'm pasting the entire `yaml` file below.</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [AH-370]: export create registry button from gitness to use in harness ng ui (#2737) * feat: [AH-370]: export create registry button from gitness to use in harness ng ui</MESSAGE>
    <SHA>8f2744668c80a333e1babbd635f6ece799c65e11</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CDE-348]: updated logs container behaviour (#2739) * feat: [CDE-348]: updated logs container behaviour</MESSAGE>
      <SHA>51020b71e73583c8356d7a79c18bb37fdc4414d4</SHA>
      <PATCHEDFILES>
        <FILE>web/src/cde-gitness/components/ContainerLogs/ContainerLogs.module.scss</FILE>
        <FILE>web/src/cde-gitness/pages/GitspaceDetails/GitspaceDetails.module.scss</FILE>
        <FILE>web/src/cde-gitness/pages/GitspaceDetails/GitspaceDetails.module.scss.d.ts</FILE>
        <FILE>web/src/cde-gitness/pages/GitspaceDetails/GitspaceDetails.tsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
