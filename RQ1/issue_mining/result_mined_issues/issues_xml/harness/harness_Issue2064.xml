<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2064</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2064</ISSUEURL>
  <TITLE>RFC ignore branch whitelist for pull requests</TITLE>
  <DESCRIPTION>The yaml file has a branch filter: ```yaml pipeline: {} branches: - master - develop ``` I would like to consider ignoring this filter for pull request events. ```diff // verify the branches can be built vs skipped branches, err := yaml.ParseString(conf.Data) if err == nil { - if !branches.Branches.Match(build.Branch) { + if !branches.Branches.Match(build.Branch) &amp;&amp; build.Event == model.EventPush { c.String(200, &quot;Branch does not match restrictions defined in yaml&quot;) return } } ``` The reason is that teams _not_ using the github workflow (fork pull-request) will push to a branch with an open pull request, triggering two builds. This change in logic would allow a team to whitelist branches (e.g. master) and push to feature branches with an open pull request, while only triggering a single build for the pull request, and not a second for the push. _Note that merging the pull request would still trigger a build assuming it matches the branch whitelist_. I'm open to other solutions here as well ... @jmccann @donny-dont @benschumacher hoping to get some thoughts. Does this make sense?</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>672</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix suggestion effected by react-markdown-preview library upgrade (#2063)</MESSAGE>
    <SHA>cc471d08766ce98673aef8789de569ecfe558559</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix cleanup for failed repo create, cleanup summary git api (#2064)</MESSAGE>
      <SHA>bc568edd858ff6abf7c0bcf9b0666da2de73c413</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/purge.go</FILE>
        <FILE>app/api/controller/repo/summary.go</FILE>
        <FILE>app/api/controller/space/purge.go</FILE>
        <FILE>app/api/middleware/authn/authn.go</FILE>
        <FILE>app/auth/authz/membership.go</FILE>
        <FILE>app/auth/authz/public_access.go</FILE>
        <FILE>app/auth/authz/unsafe.go</FILE>
        <FILE>app/pipeline/converter/converter.go</FILE>
        <FILE>app/pipeline/converter/wire.go</FILE>
        <FILE>cmd/gitness/wire_gen.go</FILE>
        <FILE>git/interface.go</FILE>
        <FILE>git/summary.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
