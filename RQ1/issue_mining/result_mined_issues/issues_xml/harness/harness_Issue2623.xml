<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2623</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2623</ISSUEURL>
  <TITLE>Cannot run the drone outside the docker</TITLE>
  <DESCRIPTION>system: Archlinux I clone drone master branch, and build `drone-server` with : ```shell cd cmd/drone-server go build -tags netgo -ldflags '-extldflags &quot;-static&quot; -s' -o drone-server ``` And create a shell script `server.sh` to run `drone-server` with local `gitea`(running at `localhost:3000`): ```shell #! /bin/bash # # runner # export DRONE_RUNNER_LOCAL=true export DRONE_RUNNER_OS=linux export DRONE_RUNNER_ARCH=arm64 export DRONE_RUNNER_CAPACITY=2 # # server # export DRONE_SERVER_HOST=localhost:8000 export DRONE_SERVER_PORT=:8000 export DRONE_SERVER_PROTO=http export DRONE_TLS_AUTOCERT=false # # database # export DRONE_DATABASE_DRIVER=postgres export DRONE_DATABASE_DATASOURCE=postgres://postgres:password@127.0.0.1:5432/drone?sslmode=disable # # datadog # export DRONE_DATADOG_ENABLED=true export DRONE_DATADOG_ENDPOINT=https://stats.drone.ci/api/v1/series # # other # export GODEBUG=netdns=go export XDG_CACHE_HOME=data # # logging # export DRONE_LOGS_DEBUG=true export DRONE_LOGS_TRACE=true export DRONE_LOGS_COLOR=true export DRONE_LOGS_PRETTY=true export DRONE_LOGS_TEXT=true # # Gitea # # NOTICE: The ip or domain should be accessible in docker container export DRONE_GITEA_SERVER=http://127.0.0.1:3000 export DRONE_GIT_ALWAYS_AUTH=false ./drone-server ``` Then, run `server.sh` with: ```shell sudo ./server.sh ``` drone can sync and active repo, gitea webhook also work, but building jobs will stuck at `default: Pending`: ![ASBTiV.png](https://s2.ax1x.com/2019/03/09/ASBTiV.png) I noticed that the code for starting build jobs maybe is `trigger/trigger.go`, but I can't find how it to drive the docker work.</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [CDE-458]: updated last activated in gitspace listing (#2936) * feat: [CDE-458]: updated last activated in gitspace listing</MESSAGE>
    <SHA>ba5fb10683b38f07aef5701b59b088e6d56c8510</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CDE-265]: Fixed repo dropdown when changing repo type (#2623) * chore: Sync main * feat: [CDE-265]: Fixed repo dropdown when changing repo type</MESSAGE>
      <SHA>0586b5e7808d83fe12318d9828f11aa737cfd3d0</SHA>
      <PATCHEDFILES>
        <FILE>web/src/cde-gitness/components/CDEAnyGitImport/CDEAnyGitImport.tsx</FILE>
        <FILE>web/src/cde-gitness/hooks/useOpenVSCodeBrowserURL.tsx</FILE>
        <FILE>web/src/cde-gitness/pages/GitspaceDetails/GitspaceDetails.tsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
