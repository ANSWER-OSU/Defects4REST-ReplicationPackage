<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7992</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/7992</ISSUEURL>
  <TITLE>Scripts and processes bug</TITLE>
  <DESCRIPTION>The REST code for the scripts and processes does not take into account the &quot;hasArg&quot; value of the configured script options. Instead, the REST API only exposes the option type. I believe angular will then use this option type to force an argument or not depending on the type. When the type is a String, which is the default type, an argument will be forced. As a consequence, when no argument needs to be provided, the type needs to be changed to a boolean as is done [here](https://github.com/DSpace/DSpace/blob/main/dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataImportScriptConfiguration.java#L62). This is very unintuitive when adding configuration for new scripts. This bug was noticed in the [review of the harvest script](https://github.com/DSpace/dspace-angular/pull/1328#pullrequestreview-775425176). **Expected behavior** Ideally, the converter should set the type to boolean when no other type is provided and when there should be no argument provided for the parameter instead of having to set the type manually for every parameter. **Related work** This issue was noticed when reviewing the [Control collection harvest from the UI PR](https://github.com/DSpace/dspace-angular/pull/1328).</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>183</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8180 from atmire/w2p-87624_Issue-rp_patches Fix for resource policy end date add patch not working</MESSAGE>
    <SHA>e24431413cc7d71381895e20227ab135b806ef6a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>88141: Scripts and processes bug #7992</MESSAGE>
      <SHA>2d7a52dc005323df0d41cc723c5063a72a44469d</SHA>
      <PATCHEDFILES>
        <FILE>dspace-server-webapp/src/main/java/org/dspace/app/rest/converter/ScriptConverter.java</FILE>
        <FILE>dspace-server-webapp/src/test/data/dspaceFolder/config/spring/rest/scripts.xml</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/rest/ScriptRestRepositoryIT.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/scripts/TypeConversionTestScript.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/scripts/TypeConversionTestScriptConfiguration.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #8207 from atmire/w2p-88141_scripts-and-processes-bug-7992 Fix Scripts and Processes bug #7992</MESSAGE>
      <SHA>3a96e64d1764c5ae7603d5467c5277e46b9a8b08</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataDeletionScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataExportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataImportCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataImportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/harvest/HarvestScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/CurationCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/IndexClientOptions.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/export/RetryFailedOpenUrlTrackerScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/migration/SubmissionFormsMigrationCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/scripts/MockDSpaceRunnableScriptConfiguration.java</FILE>
        <FILE>dspace-server-webapp/src/main/java/org/dspace/app/rest/converter/ScriptConverter.java</FILE>
        <FILE>dspace-server-webapp/src/test/data/dspaceFolder/config/spring/rest/scripts.xml</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/rest/ScriptRestRepositoryIT.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/rest/matcher/ScriptMatcher.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/scripts/TypeConversionTestScript.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/scripts/TypeConversionTestScriptConfiguration.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/scripts/MockDSpaceRunnableScriptConfiguration.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
