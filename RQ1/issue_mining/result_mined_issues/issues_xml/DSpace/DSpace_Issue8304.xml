<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8304</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8304</ISSUEURL>
  <TITLE>Unable to answer a request a copy using &quot;helpdesk&quot; strategy in DSpace 7.2</TITLE>
  <DESCRIPTION>**Describe the bug** When request a copy is enabled with helpdesk settings, if we try to either approve or reject a request for a copy by anonymous user, an error 500 occurs (see log file for details: - [dspace.log](https://github.com/DSpace/DSpace/files/8763897/dspace.log)). Our resquest a copy are configurations are as follow: request.item.type = all mail.helpdesk = (valid email of our Helpdesk) request.item.helpdesk.override = true The error occurs even if the user have admin permissions on the collection to which the item requested belongs. **To Reproduce** 1. Activate request a copy with Helpdesk Strategy: https://wiki.lyrasis.org/display/DSDOC7x/Request+a+Copy#RequestaCopy-(Optional)RequestingacopywithHelpDeskworkflow 2. As anonymous user, look at an embargoed item, click on the file to display the request a copy form. 3. Complete and send the request a copy form 4. As helpdesk staff, look at the email inbox 5. Open the Request a copy email and click on the link to respond to it. 6. Use your DSpace Credentials to connect (_First problem, as previously this was available anonymously_) 7. On the response form try to approve or decline the request. 8. An error message appears. (_Second problem, as it's not possible to submit the request when HelpDesk strategy is enabled_) **Expected behavior** No error messages, the database is updated to reflect if the request has been approved or rejected and the user received the email response and, if the request has been accepted, the item file(s). **Related work** Don't know if this problem could relate to #8199</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>234</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8296 from the-library-code/TLC-254_type-bind-fixes Fix type bind validation to support fields configured more than once</MESSAGE>
    <SHA>e5f316c9adf78e59d8277a271a0fc2a2d21da0f8</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Devolve authorization to the strategy classes. Add tests. #8304</MESSAGE>
      <SHA>8fb948d6a83c5cb1ccbf492a4ac76cb29b7bc49c</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/requestitem/RequestItemAuthorExtractor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/requestitem/RequestItemHelpdeskStrategy.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/requestitem/RequestItemSubmitterStrategy.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/requestitem/RequestItemHelpdeskStrategyTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/requestitem/RequestItemSubmitterStrategyTest.java</FILE>
        <FILE>dspace-server-webapp/src/main/java/org/dspace/app/rest/repository/RequestItemRepository.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Satisfy checkstyle. #8304</MESSAGE>
      <SHA>a95647268447171fc751c1d5ce764176ea095f91</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/test/java/org/dspace/app/requestitem/RequestItemHelpdeskStrategyTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
