<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8479</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8479</ISSUEURL>
  <TITLE>Regular search can contain private &amp; withdrawn items</TITLE>
  <DESCRIPTION>**Describe the bug** Regular search contains withdrawn and private items (if logged in as admin), these should probably only appear in the admin search. This is I think blocked for regular users with because of the lack of `read:g{AnonGroup}` solr field in the docs for private/withdrawn items. Since if fix/migrate from https://github.com/DSpace/DSpace/pull/8438 is not applied, then withdrawn items are visible for all/anon. **To Reproduce** Logged in as admin: - [[regular search for withdrawn item](https://demo7.dspace.org/search?query=cce2a443-c792-465e-9fd5-2cbf9aec2e68)](https://demo7.dspace.org/search?query=cce2a443-c792-465e-9fd5-2cbf9aec2e68) =&gt; Contains withdrawn item [[Ancient Greece](https://demo7.dspace.org/items/cce2a443-c792-465e-9fd5-2cbf9aec2e68)](https://demo7.dspace.org/items/cce2a443-c792-465e-9fd5-2cbf9aec2e68) in regular search result - Idem [[regular search for private item](https://demo7.dspace.org/search?query=68e9ec51-38cf-4549-937d-fb8ea8194551)](https://demo7.dspace.org/search?query=68e9ec51-38cf-4549-937d-fb8ea8194551) =&gt; Contains private item [[Testing Example.](https://demo7.dspace.org/items/68e9ec51-38cf-4549-937d-fb8ea8194551)](https://demo7.dspace.org/items/68e9ec51-38cf-4549-937d-fb8ea8194551) in regular search result **Expected behavior** Private or withdrawn items should not appear in regular search regardless of which user sees results. They should only appear in admin search (where there are sidebar filters/facets for them) **Proposed solution** Easiest solution: add `-withdrawn:true AND -discoverable:false` filter in default `DiscoveryConfiguration` in `defaultFilterQueries` property [[here](https://github.com/DSpace/DSpace/blob/main/dspace/config/spring/api/discovery.xml#L202-L207)](https://github.com/DSpace/DSpace/blob/main/dspace/config/spring/api/discovery.xml#L202-L207) Since there is a separate &quot;unDiscoverableItems&quot; config which contains the opposite [[here](https://github.com/DSpace/DSpace/blob/main/dspace/config/spring/api/discovery.xml#L480)](https://github.com/DSpace/DSpace/blob/main/dspace/config/spring/api/discovery.xml#L480) I think it is assumed that this functionality is default. **Related** If fix/migrate from https://github.com/DSpace/DSpace/pull/8438 is not applied, then withdrawn items are visible for all users.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>20</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[maven-release-plugin] prepare release dspace-7.0</MESSAGE>
    <SHA>69345ff3fce834d45d0571a340b286b2777ecf49</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>issue #8479 Regular search can contain private &amp; withdrawn items</MESSAGE>
      <SHA>1800bf1e7c42e307935a38320797dbc30b3f8135</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/spring/api/discovery.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>issue #8479 Regular search can contain private &amp; withdrawn items - additional configurations</MESSAGE>
      <SHA>da6d55cfd5c3390018fcab86b1d269551d749197</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/spring/api/discovery.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>issue #8479 Regular search can contain private &amp; withdrawn items</MESSAGE>
      <SHA>6a221b8cd4631a7b9e9618c1cf63a53f7b4f2984</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/spring/api/discovery.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
