<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8662</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8662</ISSUEURL>
  <TITLE>Versioning and ORCID</TITLE>
  <DESCRIPTION>**Describe the bug** Versioning and ORCID are not playing well together. All the versions are pushed to ORCID. I would expect to have the existing record updated on the ORCID side with the most recent version. **Expected behavior** The ORCID record should be updated with the new version. The item should reuse the same PUT code from ORCID instead than remove and create a new record.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>713</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9704 from saschaszott/patch-41 Docker build: fix FromAsCasing warnings</MESSAGE>
    <SHA>a52508d500e6854797cdf36e44a3c072c07d04d0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Handles versioning for ORCID publications. feat: - ORCID publications waiting to be published are removed whenever a new version is created - ORCID publications already published will be updated with the ref to the last item version - ORCID consumer will process only latest item versions, ignoring all the other ones</MESSAGE>
      <SHA>74d04947385ae93742b1973fc37114abba2014ed</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/content/ItemServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/ItemService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/consumer/OrcidQueueConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/OrcidQueueDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/impl/OrcidQueueDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/OrcidQueueService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/impl/OrcidQueueServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/versioning/VersioningConsumer.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/orcid/OrcidQueueConsumerIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Handles versioning for ORCID publications. feat: - ORCID publications waiting to be published are removed whenever a new version is created - ORCID publications already published will be updated with the ref to the last item version - ORCID consumer will process only latest item versions, ignoring all the other ones</MESSAGE>
      <SHA>26905b7d45f058f1bd8476f9e915af9a5be1547f</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/content/ItemServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/ItemService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/consumer/OrcidQueueConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/OrcidQueueDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/impl/OrcidQueueDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/OrcidQueueService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/impl/OrcidQueueServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/versioning/VersioningConsumer.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/orcid/OrcidQueueConsumerIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Handles versioning for ORCID publications. feat: - ORCID publications waiting to be published are removed whenever a new version is created - ORCID publications already published will be updated with the ref to the last item version - ORCID consumer will process only latest item versions, ignoring all the other ones</MESSAGE>
      <SHA>a9400a7f48c7afa321310911e6c870197237394a</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/content/ItemServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/ItemService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/consumer/OrcidQueueConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/OrcidQueueDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/dao/impl/OrcidQueueDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/OrcidQueueService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/service/impl/OrcidQueueServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/versioning/VersioningConsumer.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/orcid/OrcidQueueConsumerIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Adds IT for isLatestVersion</MESSAGE>
      <SHA>ced42923327641cb59070376d3e0b3e3cf8cdc0e</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/ItemIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/service/ItemServiceIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Adds IT for isLatestVersion</MESSAGE>
      <SHA>6c99c25d34a34d176c77a10039e86fe801f24ab3</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/ItemIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/service/ItemServiceIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[CST-14901][DSC-1357][#8662] Adds IT for isLatestVersion</MESSAGE>
      <SHA>609bfac47315c68bb98f06e53df5e5f37eed2778</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/ItemIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/service/ItemServiceIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
