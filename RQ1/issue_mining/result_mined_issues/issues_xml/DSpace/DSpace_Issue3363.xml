<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3363</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/3363</ISSUEURL>
  <TITLE>Allow to change the eperson password via CLI</TITLE>
  <DESCRIPTION>The EPersonCLI script should provide a way to set a new password for an existing user. There is no security implication in allowing that as a linux user able to run such script can already - temporary change the eperson email - use the forget password feature to reset the password - restore the previous eperson email moreover, user that can run the script and access the backend shell can retrieve the database connection settings and manipulate the data directly in any way. My estimation is about 2 hours **Additional context** This improvement will provide a more general solution to reset the password of demo / test drive server than https://github.com/DSpace-Labs/demo.dspace.org-site/blob/master/scripts/linux/reset-dspace-passwords</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>20</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #3360 from tdonohue/licenses_third_party_updates Updates to LICENSES_THIRD_PARTY file after 7.0 release</MESSAGE>
    <SHA>d9a04c26fdc30d39fbb748952fa0bd60551ea400</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Document that EPerson's password, salt and algorithm setters are related. #3363</MESSAGE>
      <SHA>3f06c7e79c8f4d34bea9dc56b8dbb2fda9202722</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPerson.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add option to change user's password. #3363</MESSAGE>
      <SHA>dd40f5ff3c0a27c338c53e37ac14ef8af7f1a2c6</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonCLITool.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add integration test for this feature only. #3363</MESSAGE>
      <SHA>b59790a156bf7bac6d6e6118e35ba0aeb6cf6d81</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/pom.xml</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonCLITool.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/ConsoleService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/ConsoleServiceImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/eperson/EPersonCLIToolIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/util/FakeConsoleServiceImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Clearer prompts, reject empty password, test for empty password. #3363</MESSAGE>
      <SHA>8bed933d903e6635c21faafd8e82326a670bd5aa</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonCLITool.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/eperson/EPersonCLIToolIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add test for mismatch between password and confirmation. #3363</MESSAGE>
      <SHA>3ce4b592fc679da0692530614ae5248eec2d2959</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonCLITool.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/eperson/EPersonCLIToolIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/util/FakeConsoleServiceImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove un-necessary IllegalArgumentException. #3363</MESSAGE>
      <SHA>d3c5f0473a96fc0b8c43df4cbf92aed0d0b56ab0</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonCLITool.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
