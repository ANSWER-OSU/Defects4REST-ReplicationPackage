<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3061</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/3061</ISSUEURL>
  <TITLE>Many warnings from errorprone</TITLE>
  <DESCRIPTION>Clearing away a long list of deprecation warnings exposes a number of warnings and suggestions from `errorprone`. Addressing these would not only improve code quality, but make it easier to see the remaining compiler warnings.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>302</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Satisfy Checkstyle. Small tidy-ups. #2956</MESSAGE>
    <SHA>96742fe558f3de24634603a15e00f332d7c393a0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>First batch of errorprone fixes. #3061</MESSAGE>
      <SHA>65f04fcec9390c6b4678039c63f535e0ed18e59d</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/ResourcePolicy.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Bitstream.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/BitstreamFormat.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/CollectionServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Community.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/CommunityServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DCDate.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DSpaceObject.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DSpaceObjectServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/InProgressSubmission.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Item.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataField.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataFieldName.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataSchema.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataValue.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/BitstreamService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/I18nUtil.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Utils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/AbstractCurationTask.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/CitationPage.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/TaskResolver.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/FullTextContentStreams.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/event/ConsumerProfile.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/event/Event.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/handle/Handle.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/text/filter/InitialArticleWord.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/storedcomponents/InProgressUser.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/MetadataFieldNameTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>More errorprone warnings. #3061</MESSAGE>
      <SHA>f6112babc3685a2eb84ee55e50215835e43c260d</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/administer/MetadataImporter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/DSpaceCSV.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemupdate/DtoMetadata.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemupdate/ItemArchive.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sherpa/SHERPAResponse.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/statistics/CreateStatReport.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/WebApp.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/XMLUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/PasswordAuthentication.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/AuthorizeServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/checker/MostRecentChecksum.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/checker/ResultsLogger.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/BitstreamFormat.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Bundle.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DCDate.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DCSeriesNumber.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DSpaceObjectServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/EntityType.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Relationship.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/RelationshipType.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/dao/impl/MetadataSchemaDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/packager/PackageException.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/packager/PackageParameters.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/virtual/UUIDValue.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/I18nUtil.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/FileTaskQueue.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/ResolvedTask.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/DiscoverQuery.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/FullTextContentStreams.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/SolrServiceFileInfoPlugin.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/AbstractIndexableObject.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/Subscription.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/impl/SubscriptionDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/external/OrcidRestConnector.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/external/model/ExternalDataObject.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/external/provider/orcid/xml/Converter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/harvest/HarvestedItem.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/DOI.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/dao/impl/DOIDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/datamodel/ImportRecord.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/metadatamapping/AbstractMetadataFieldMapping.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/metadatamapping/MetadataFieldConfig.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/DSpaceCommandLineParameter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/DSpaceRunnable.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/Process.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/search/Harvest.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/Dataset.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/SolrLoggerUsageEventListener.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/content/StatisticsDataVisits.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/lookup/ValueConcatenationModifier.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/util/ItemSubmissionLookupDTO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/versioning/Version.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/versioning/VersionHistory.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/workflow/WorkflowException.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/workflowbasic/BasicWorkflowItem.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/workflowbasic/TaskListItem.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/RoleMembers.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/WorkflowConfigurationException.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/storedcomponents/ClaimedTask.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/storedcomponents/CollectionRole.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/storedcomponents/PoolTask.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/xmlworkflow/storedcomponents/WorkflowItemRole.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/AbstractIntegrationTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/csv/CSVMetadataImportReferenceIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/builder/util/AbstractBuilderCleanupUtil.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/MetadataFieldNameTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/authority/DSpaceControlledVocabularyTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/license/MockCCLicenseConnectorServiceImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/statistics/export/ITIrusExportUsageEventListener.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/statistics/export/processor/BitstreamEventProcessorTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/statistics/export/service/MockOpenUrlServiceImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Catch correct error for replaced class, to fix test errors. Satisfy checkstyle. #3061</MESSAGE>
      <SHA>a036b99f1c3483bc26d6c7660925f537d5f41f7e</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Utils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/DiscoverQuery.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/impl/SubscriptionDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/Dataset.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Restore thread-safety to see if it is needed. #3061</MESSAGE>
      <SHA>c2c08b31094c9fdfc80a86c37eace5e782d4d48b</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Another batch of Error Prone fixes. (#3061)</MESSAGE>
      <SHA>384d46348aec6c63ac3d4e141a8a91e6944d87e5</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemexport/ItemExportServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemmarking/ItemMarkingAvailabilityBitstreamStrategy.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemupdate/ContentsEntry.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/HTMLFilter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/PoiWordFilter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sherpa/SHERPAService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sherpa/v2/SHERPAPermittedVersion.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sherpa/v2/SHERPAPublisherResponse.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sherpa/v2/SHERPAResponse.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sitemap/SitemapsOrgGenerator.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/InitializeEntities.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/Util.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/checker/SimpleReporterServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DCPersonName.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/RelationshipServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/crosswalk/OREIngestionCrosswalk.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/dao/impl/CollectionDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/logic/Filter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/logic/condition/Condition.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/logic/operator/Nor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/packager/METSManifest.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Email.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/AbstractIndexableObject.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/LoadLastLogin.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/external/provider/impl/SHERPAv2JournalDataProvider.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/DOIIdentifierProvider.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/license/LicenseCleanup.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/export/processor/ExportEventProcessor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/export/processor/ItemEventProcessor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/bitstore/BitStoreMigrate.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/DatabaseUtils.java</FILE>
        <FILE>dspace-api/src/test/resources/log4j2-test.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Address Error Prone complaints about tests. (#3061)</MESSAGE>
      <SHA>edd310f536f676e9e239e6eac19285f19bcbb34f</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/sherpa/MockSHERPAService.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/authority/orcid/MockOrcid.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/content/MetadataFieldPerformanceTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/discovery/DiscoveryIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/external/provider/impl/MockPubmedImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/util/DSpaceConfigurationInitializer.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/util/DSpaceKernelInitializer.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix incorrect merge. (#3061)</MESSAGE>
      <SHA>106d37404b3c5fa8278f864c95f550c79aed4710</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Address new LGTM alert for removed parameter. (#3061)</MESSAGE>
      <SHA>9f463239d2eed66ad78d4ec5db31cb523332e989</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/search/Harvest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Address review comments: missed some isEmpty fixes. [#3061]</MESSAGE>
      <SHA>1b366f8b7429947eecceb3b7daeec29f03605d64</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/DSpaceCSV.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/I18nUtil.java</FILE>
        <FILE>dspace-api/src/test/resources/log4j2-test.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
