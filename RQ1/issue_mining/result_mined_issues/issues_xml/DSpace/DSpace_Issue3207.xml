<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3207</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/3207</ISSUEURL>
  <TITLE>LDAP Authentication does not work properly without the authentication-ldap.login.groupmap option</TITLE>
  <DESCRIPTION>When I try to login via LDAP, this keeps failing with this error: ``` 2021-03-25 11:16:29,930 ERROR org.springframework.boot.web.servlet.support.ErrorPageFilter @ Forwarding to error page from request [/api/authn/login] due to exception [Index 1 out of bounds for length 1] java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1 at org.dspace.authenticate.LDAPAuthentication.assignGroups(LDAPAuthentication.java:699) ~[dspace-api-7.0-beta5-SNAPSHOT.jar:7.0-beta5-SNAPSHOT] at org.dspace.authenticate.LDAPAuthentication.authenticate(LDAPAuthentication.java:265) ~[dspace-api-7.0-beta5-SNAPSHOT.jar:7.0-beta5-SNAPSHOT] at org.dspace.authenticate.AuthenticationServiceImpl.authenticateInternal(AuthenticationServiceImpl.java:108) ~[dspace-api-7.0-beta5-SNAPSHOT.jar:7.0-beta5-SNAPSHOT] at org.dspace.authenticate.AuthenticationServiceImpl.authenticate(AuthenticationServiceImpl.java:80) ~[dspace-api-7.0-beta5-SNAPSHOT.jar:7.0-beta5-SNAPSHOT] at org.dspace.app.rest.security.EPersonRestAuthenticationProvider.authenticateNewLogin(EPersonRestAuthenticationProvider.java:97) ~[classes/:7.0-beta5-SNAPSHOT] at org.dspace.app.rest.security.EPersonRestAuthenticationProvider.authenticate(EPersonRestAuthenticationProvider.java:71) ~[classes/:7.0-beta5-SNAPSHOT] ``` I have not configured any authentication-ldap.login.groupmap option (as I thought I won't need them). But apparently LDAPAuthentication does not work properly without this option.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #3191 from 4Science/CST-3961-CannotClaimPoolTasksCreatedBeforeYouWereAddedToAworkflowApprovalGroup Cannot claim PoolTasks created before you were added to a workflow approval group</MESSAGE>
    <SHA>e1478f6fddb6c919548602ce1200b169e5bf637d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fixes #3207: corrects reading of configuration options</MESSAGE>
      <SHA>2d069b019ac9f94be74bc425fe344bda79079b3c</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/LDAPAuthentication.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
