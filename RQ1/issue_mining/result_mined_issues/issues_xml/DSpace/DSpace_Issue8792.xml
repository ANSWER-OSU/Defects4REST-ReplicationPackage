<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8792</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8792</ISSUEURL>
  <TITLE>Exporting search results via CSV using a *very* long search query fails</TITLE>
  <DESCRIPTION>**Describe the bug** Exporting search results via CSV using a *very* long search query fails without specifying the problem. Searching itself works, but when trying to export the reults an error is shown. The query (like all process parameters) is inserted into the `public.process` table, into the column `parameters`. This column is limited to 512 characters, causing the process creation to fail. **To Reproduce** Steps to reproduce the behavior: 1. Open the search page: https://demo7.dspace.org/search 2. Enter a llong search query (&gt; 512 characters) 3. Click search 4. Search results are shown 5. Click the CSV export button 6. The export fails with the error message &quot;Starting the export has failed&quot; **Expected behavior** The export should export the results as usual or document and display the limitation to users. **Related work** This is similar to the issue: #8730, fixed in #8755</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8785 from mwoodiupui/event-consumer-doc Document the need to avoid commit() during event dispatch.</MESSAGE>
    <SHA>fea4067464b499f1104478f7edf018bb0aab5d9a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #8792, change column type of Process.parameters to TEXT</MESSAGE>
      <SHA>10d7b352efdc92c00f4eb0a27ab1e247463fb3b2</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/Process.java</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #8800 from hutattedonmyarm/8792-fix-long-title-export Fix #8792, change column type of Process.parameters to TEXT</MESSAGE>
      <SHA>53a09a9ba7e87726607409e9a962409c21c1385f</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/Process.java</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
