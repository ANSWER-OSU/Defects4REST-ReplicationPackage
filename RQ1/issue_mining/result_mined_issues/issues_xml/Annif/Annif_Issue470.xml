<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>470</ISSUENO>
  <ISSUEURL>https://github.com/NatLibFi/Annif/issues/470</ISSUEURL>
  <TITLE>NN ensemble may return scores above 1.0</TITLE>
  <DESCRIPTION>The NN ensemble doesn't always return scores in the range 0.0-1.0. For example, the `yso-sv` model currently available in Finto AI returns this for the input text `historia`: ```js { &quot;results&quot;: [ { &quot;label&quot;: &quot;historia&quot;, &quot;notation&quot;: null, &quot;score&quot;: 1.3140300512313843, &quot;uri&quot;: &quot;http://www.yso.fi/onto/yso/p1780&quot; }, [...] } ``` This should be avoided, for example by capping the scores to 1.0.</DESCRIPTION>
  <REPONAME>Annif</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Bump version: 0.51.0 â†’ 0.52.0-dev</MESSAGE>
    <SHA>5bf40f845c995a794429a056f7e14467304d11cf</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Make sure NN ensemble scores are in the range 0.0-1.0. Fixes #470</MESSAGE>
      <SHA>eb792f6b3760a64946b309d47af103910186af82</SHA>
      <PATCHEDFILES>
        <FILE>annif/backend/nn_ensemble.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Make sure suggestion scores are in the range 0.0-1.0. Fixes #470</MESSAGE>
      <SHA>08237d6975df0a637582550b599d83ba9404aeda</SHA>
      <PATCHEDFILES>
        <FILE>annif/suggestion.py</FILE>
        <FILE>tests/test_suggestion.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
