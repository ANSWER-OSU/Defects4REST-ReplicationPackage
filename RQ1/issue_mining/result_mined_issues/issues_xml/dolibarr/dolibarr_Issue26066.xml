<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>26066</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/26066</ISSUEURL>
  <TITLE>No autorisation control on GET /multicurrencies through API</TITLE>
  <DESCRIPTION>### Bug No autorisation control on GET /multicurrencies through API, where as GET /multicurrencies/bycode/{code} has autorisation control. ### Environment Version 18.0.1 ### Environment OS upshift dolibarr docker image 18.0.1 ### Environment Web server upshift dolibarr docker image 18.0.1 ### Environment PHP PHP 8.2.10 (cli) (built: Aug 31 2023 20:34:52) (NTS) ### Environment Database 1:11.0.3+maria~ubu2204 ### Environment URL(s) /api/index.php/multicurrencies?sortfield=t.rowid&amp;sortorder=ASC&amp;limit=100 ### Expected and actual behavior Expected rejection given that my API key is from a user that only has 3 permissions: 1. read access to products 2. read access to services 3. read access to tags and categories but no, the actual behaviour was that if I just asked for all currencies, then I got the data, where as if I only asked for the EUR currency, then I get `&quot;message&quot;: &quot;Unauthorized: Insufficient rights to read currency&quot;` ### Steps to reproduce the behavior enable modules: products, categories and multicurrency. Setup DKK and Eur currencies. ### Attached files ![get_all_currencies](https://github.com/Dolibarr/dolibarr/assets/2551481/d3b6e500-f765-48fa-9cf2-ff6b0780aa46) ![get_EUR_currency](https://github.com/Dolibarr/dolibarr/assets/2551481/e9c3b409-4ed6-4c7a-9b47-b421e502cc7c)</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of git@github.com:Dolibarr/dolibarr.git into develop</MESSAGE>
    <SHA>c16313007a90010524cafba67acadcce036b6a9f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #26076 from hansemschnokeloch/fix-26066 FIX #26066</MESSAGE>
      <SHA>62ad3d12d2ee86f2f665f341565860f3e88b076a</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/multicurrency/class/api_multicurrencies.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
