<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24653</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/24653</ISSUEURL>
  <TITLE>modulebuilder: template for new object doesn't include the correct class</TITLE>
  <DESCRIPTION>### Bug When trying to create a new object from a newly created module from modulebuilder: ``` Fatal error: Uncaught Error: Class &quot;DemoObject&quot; not found in /var/www/html/custom/demobug/demoobject_card.php:105 Stack trace: #0 {main} thrown in /var/www/html/custom/demobug/demoobject_card.php on line 105 ``` ### Environment Version 17.0.1-3317-ga4563c7ad4f ### Environment OS archlinux docker ### Environment Web server docker-web from the hash ### Environment PHP docker-web from the php ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior The file `demobug/demoobject_card.php` should have: ``` dol_include_once('/demobug/class/demoobject.class.php'); dol_include_once('/demobug/lib/demobug_demoobject.lib.php'); ``` instead of ``` dol_include_once('/demobug/class/myobject.class.php'); dol_include_once('/demobug/lib/demobug_myobject.lib.php'); ``` ### Steps to reproduce the behavior After creating an object: ![scrn-2023-05-01-15-18-28](https://user-images.githubusercontent.com/413037/235457048-1b21085c-505c-4d38-947a-e7b394be7fef.png) Enable the module, and try creating a new object from there, the page returns: ``` Fatal error: Uncaught Error: Class &quot;DemoObject&quot; not found in /var/www/html/custom/demobug/demoobject_card.php:105 Stack trace: #0 {main} thrown in /var/www/html/custom/demobug/demoobject_card.php on line 105 ``` ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Close #24625</MESSAGE>
    <SHA>a4563c7ad4f0fcc819aa6374ed8d750381cc894d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #24653 modulebuilder: replace /myobject/ in includes The templates view, like myobject_card.php are including the following files: dol_include_once('/mymodule/class/myobject.class.php'); dol_include_once('/mymodule/lib/mymodule_myobject.lib.php'); The mymodule value was replaced correctly, but the myobject value wasn't, leading to another classfile beind included when, for instance, creating new `myobject` objects (whatever myobject actually was, except myobject of course), and resulting in PHP errors like: Fatal error: Uncaught Error: Class &quot;DemoObject&quot; not found in /var/www/html/custom/demobug/demoobject_card.php:105 Stack trace: #0 {main} thrown in /var/www/html/custom/demobug/demoobject_card.php on line 105 Fixes #24653</MESSAGE>
      <SHA>4a3407aa8279013b780d4f7e3adaf1a54dfbc7a7</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/modulebuilder/index.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #24654 from alexandre-janniaux/modulebuilder-myobject-replace/1 FIX #24653 modulebuilder: replace /myobject/ in includes</MESSAGE>
      <SHA>8857a7407058f4d9ed3db95e3b920b0d2b4fb4fc</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/modulebuilder/index.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
