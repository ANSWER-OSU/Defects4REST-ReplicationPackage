<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>28481</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/28481</ISSUEURL>
  <TITLE>BUG: REST API &quot;/mos/{id}/produceandconsume&quot; not working and have a confuse behavior</TITLE>
  <DESCRIPTION>### Bug Hi,. either I don't understand the API function or it doesn't work. I tried now a few hours... id: 21 request_data: `{ &quot;inventorylabel&quot;: &quot;Produce and consume using API&quot;, &quot;inventorycode&quot;: &quot;PRODUCEAPI-YY-MM-DD&quot;, &quot;autoclose&quot;: 1, &quot;arraytoconsume&quot;: [{ &quot;objectid&quot;: &quot;203&quot;, &quot;fk_warehouse&quot;: &quot;677&quot;, &quot;qty&quot;: &quot;1&quot; }], &quot;arraytoproduce&quot;: [] }` The data origin: ![image](https://github.com/Dolibarr/dolibarr/assets/78662388/ead6cc0c-b020-4eec-b2bb-cfe66d7ae7d5) **I hope anyone can help me, its very import for my project.** Thank you together! Best regards Christian ### Environment Version 17...19... ### Environment OS Ubuntu ### Environment Web server _No response_ ### Environment PHP 8.2 ### Environment Database mariaDB ### Environment URL(s) http://localhost/dolibarr/htdocs/api/index.php/mos/{ID}/produceandconsume ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>103</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix consume services</MESSAGE>
    <SHA>d10e2036b0025b6984641f20f244b41e1cc2e587</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch '19.0' into #28481-REST-API-MOS_19.0</MESSAGE>
      <SHA>c00111db5fb0e5fda50c3711e2b3c55111659539</SHA>
      <PATCHEDFILES>
        <FILE>dev/initdemo/initdemopassword.sh</FILE>
        <FILE>htdocs/adherents/subscription/card.php</FILE>
        <FILE>htdocs/asset/class/asset.class.php</FILE>
        <FILE>htdocs/asset/class/assetmodel.class.php</FILE>
        <FILE>htdocs/bookcal/class/availabilities.class.php</FILE>
        <FILE>htdocs/bookcal/class/calendar.class.php</FILE>
        <FILE>htdocs/comm/index.php</FILE>
        <FILE>htdocs/compta/resultat/index.php</FILE>
        <FILE>htdocs/core/class/defaultvalues.class.php</FILE>
        <FILE>htdocs/core/class/html.formaccounting.class.php</FILE>
        <FILE>htdocs/core/class/timespent.class.php</FILE>
        <FILE>htdocs/core/lib/website.lib.php</FILE>
        <FILE>htdocs/core/lib/xcal.lib.php</FILE>
        <FILE>htdocs/core/modules/modStockTransfer.class.php</FILE>
        <FILE>htdocs/core/modules/modWebhook.class.php</FILE>
        <FILE>htdocs/core/triggers/interface_50_modTicket_TicketEmail.class.php</FILE>
        <FILE>htdocs/core/website.inc.php</FILE>
        <FILE>htdocs/emailcollector/class/emailcollector.class.php</FILE>
        <FILE>htdocs/eventorganization/class/conferenceorbooth.class.php</FILE>
        <FILE>htdocs/eventorganization/class/conferenceorboothattendee.class.php</FILE>
        <FILE>htdocs/expedition/list.php</FILE>
        <FILE>htdocs/fourn/facture/paiement.php</FILE>
        <FILE>htdocs/hrm/class/evaluation.class.php</FILE>
        <FILE>htdocs/hrm/class/evaluationdet.class.php</FILE>
        <FILE>htdocs/hrm/class/job.class.php</FILE>
        <FILE>htdocs/hrm/class/position.class.php</FILE>
        <FILE>htdocs/hrm/class/skill.class.php</FILE>
        <FILE>htdocs/hrm/class/skilldet.class.php</FILE>
        <FILE>htdocs/hrm/class/skillrank.class.php</FILE>
        <FILE>htdocs/install/mysql/migration/18.0.0-19.0.0.sql</FILE>
        <FILE>htdocs/knowledgemanagement/class/knowledgerecord.class.php</FILE>
        <FILE>htdocs/main.inc.php</FILE>
        <FILE>htdocs/modulebuilder/template/sql/llx_c_action_trigger.sql</FILE>
        <FILE>htdocs/opensurvey/class/opensurveysondage.class.php</FILE>
        <FILE>htdocs/partnership/class/partnership.class.php</FILE>
        <FILE>htdocs/partnership/class/partnership_type.class.php</FILE>
        <FILE>htdocs/product/class/product.class.php</FILE>
        <FILE>htdocs/product/class/productfournisseurprice.class.php</FILE>
        <FILE>htdocs/projet/index.php</FILE>
        <FILE>htdocs/recruitment/class/recruitmentcandidature.class.php</FILE>
        <FILE>htdocs/recruitment/class/recruitmentjobposition.class.php</FILE>
        <FILE>htdocs/ticket/class/cticketcategory.class.php</FILE>
        <FILE>htdocs/ticket/class/ticket.class.php</FILE>
        <FILE>htdocs/user/card.php</FILE>
        <FILE>htdocs/user/class/user.class.php</FILE>
        <FILE>htdocs/webhook/class/target.class.php</FILE>
        <FILE>htdocs/webservices/server_supplier_invoice.php</FILE>
        <FILE>htdocs/workstation/class/workstation.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch '19.0' into #28481-REST-API-MOS_19.0</MESSAGE>
      <SHA>7a918a4d3370d1e21d5482063c6482563f49316e</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/adherents/class/adherent.class.php</FILE>
        <FILE>htdocs/compta/facture/list.php</FILE>
        <FILE>htdocs/core/class/commonobject.class.php</FILE>
        <FILE>htdocs/core/lib/expensereport.lib.php</FILE>
        <FILE>htdocs/core/lib/functions.lib.php</FILE>
        <FILE>htdocs/fourn/commande/card.php</FILE>
        <FILE>htdocs/mrp/class/mo.class.php</FILE>
        <FILE>htdocs/mrp/mo_production.php</FILE>
        <FILE>htdocs/product/fournisseurs.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch '#28533-BUG-ModeleteLine-19.0' into #28481-REST-API-MOS_19.0</MESSAGE>
      <SHA>3b2d8adc6318a5ba0515505c66b2d7a986ef46d7</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/mrp/mo_production.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #2 from HUSCH-GmbH/#28481-REST-API-MOS_19.0 #28481 rest api mos 19.0</MESSAGE>
      <SHA>3e0fabdba462f2067b3d0acddb9c6ad632e097c6</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/adherents/class/adherent.class.php</FILE>
        <FILE>htdocs/compta/facture/list.php</FILE>
        <FILE>htdocs/core/class/commonobject.class.php</FILE>
        <FILE>htdocs/core/class/html.form.class.php</FILE>
        <FILE>htdocs/core/lib/expensereport.lib.php</FILE>
        <FILE>htdocs/core/lib/functions.lib.php</FILE>
        <FILE>htdocs/fourn/commande/card.php</FILE>
        <FILE>htdocs/fourn/facture/paiement.php</FILE>
        <FILE>htdocs/install/mysql/migration/18.0.0-19.0.0.sql</FILE>
        <FILE>htdocs/install/mysql/tables/llx_expensereport.key.sql</FILE>
        <FILE>htdocs/langs/en_US/mrp.lang</FILE>
        <FILE>htdocs/mrp/class/api_mos.class.php</FILE>
        <FILE>htdocs/mrp/class/mo.class.php</FILE>
        <FILE>htdocs/mrp/mo_card.php</FILE>
        <FILE>htdocs/mrp/mo_production.php</FILE>
        <FILE>htdocs/product/fournisseurs.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #28481 API /mos/{id}/produceandconsume</MESSAGE>
      <SHA>75e294d515cde78c0cb80de6db587204a69da3b1</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/mrp/class/api_mos.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
