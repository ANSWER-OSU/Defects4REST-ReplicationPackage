<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>28670</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/28670</ISSUEURL>
  <TITLE>show image in a line description of a proposal PDF</TITLE>
  <DESCRIPTION>### Feature Request /!\ I don't speak about showing a article picture in a picture column, I know that is possible with the Setup &gt; PDF &gt; Other &gt; Add column for picture on proposal lines When you set `FCKEDITOR_ENABLE_DETAILS_FULL` to 1 you can **add images with the WYSIWYG bar**. But, in a proposal, a local picture **select by the buton &quot;Browse Server&quot;** is not show in the PDF (he is visible in the description in the web page but not in the azur PDF). the URL of the picture show in the &quot;Image Properties&quot; popup is `/dolibarr/viewimage.php?modulepart=medias&amp;entity=1&amp;file=image/mypicture.jpg` if I put a full URL of a external picture (from an other website) it's OK in de webpage **AND in the PDF** ### Use case _No response_ ### Suggested implementation it is possible by adding this line : `$labelproductservice = preg_replace('/(&lt;img[^&gt;]*src=&quot;)[^\&quot;]*viewimage\.php[^\&quot;]*modulepart=medias[^\&quot;]*file=([^\&quot;]*)/', '\1file:/'.DOL_DATA_ROOT.'/medias/\2\3', $labelproductservice, -1, $nbrep);` after the line : `$labelproductservice = preg_replace('/(&lt;img[^&gt;]*src=&quot;)([^&quot;]*)(&amp;amp;)([^&quot;]*&quot;)/', '\1\2&amp;\4', $labelproductservice, -1, $nbrep);` in the function `pdf_writelinedesc()` in the file `htdocs\core\lib\pdf.lib.php` can you implement it in a future version ? ### Suggested steps _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>AI support both plain text and HTML generation</MESSAGE>
    <SHA>7869c1a3093c9685962b389d77730b0cc6b30574</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>show image in a line description of a proposal PDF #28670 When you set FCKEDITOR_ENABLE_DETAILS_FULL to 1 you can add pictures in description proposal with the WYSIWYG bar. Add preg_replace() to show this pictures in the PDF</MESSAGE>
      <SHA>a75bc08d946ba41977fe95393c156bddcbc6067d</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/lib/pdf.lib.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #28780 from gdesnoues/patch-1 show image in a line description of a proposal PDF #28670</MESSAGE>
      <SHA>04351f898defbb5e08140e4920071555d3acee9e</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/lib/pdf.lib.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
