<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30377</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/30377</ISSUEURL>
  <TITLE>An external user can see invoices of all companies</TITLE>
  <DESCRIPTION>### Bug An external user can see invoices of all company. Rights allocated to this user: - user-&gt;rights-&gt;societe-&gt;lire - user-&gt;rights-&gt;societe-&gt;client-&gt;voir - user-&gt;rights-&gt;facture-&gt;lire ### Dolibarr Version 19.0.2 ### Environment PHP _No response_ ### Environment Database _No response_ ### Steps to reproduce the behavior and expected behavior 1. Create some companies 2. Create some invoices for some companies 4. Create an external user 5. Add this User as contact of one company 6. Add permissions to this external user: - user-&gt;rights-&gt;societe-&gt;lire - user-&gt;rights-&gt;societe-&gt;client-&gt;voir - user-&gt;rights-&gt;facture-&gt;lire 7. Go to /compta/facture/list.php and clear filter by clicking on the cross ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Look and feel v21</MESSAGE>
    <SHA>fe4a3956daf799d4f94e10b399f98337f442cd1d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #30377 An external user can see invoices of all compagnies</MESSAGE>
      <SHA>53627c71c09e61a15dcdb2bfd336b49d4954ae70</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/facture/list.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #30377 An external user can see invoices of all compagnies</MESSAGE>
      <SHA>4acf749f1b4b81c970e64b5e5cfb07baeba873fb</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/facture/list.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #30377 An external user can see invoices of all compagnies (#30378)</MESSAGE>
      <SHA>a3edc5db66f79b112f4e8a5b83081e209c2e8822</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/facture/list.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #30377 An external user can see invoices of all compagnies (#30378)</MESSAGE>
      <SHA>5bee1b43b0b5b1fb222f1b97b156a5b5b2036774</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/facture/list.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
