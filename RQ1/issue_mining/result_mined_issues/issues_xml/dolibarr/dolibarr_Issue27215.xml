<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>27215</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/27215</ISSUEURL>
  <TITLE>Price HT becomes TTC when HT is empty in invoice/commande lines</TITLE>
  <DESCRIPTION>### Bug When I edit an order line and only fill the TTC value of the line and the HT value is left empty, the HT value is replaced by the TTC value. Steps to reproduce : add order line with a predefined product with a sell price. Click on edit line and remove the HT price. Click on save and watch how the HT is replaced by the TTC price. &lt;img width=&quot;794&quot; alt=&quot;Screenshot 2023-12-23 140935&quot; src=&quot;https://github.com/Dolibarr/dolibarr/assets/93868548/9211d6e7-9c5e-4f85-936a-7ac7368e0448&quot;&gt; &lt;img width=&quot;788&quot; alt=&quot;Screenshot 2023-12-23 141005&quot; src=&quot;https://github.com/Dolibarr/dolibarr/assets/93868548/bf8f7aad-be24-4ebe-ab84-f3684a0683ec&quot;&gt; &lt;img width=&quot;787&quot; alt=&quot;Screenshot 2023-12-23 141034&quot; src=&quot;https://github.com/Dolibarr/dolibarr/assets/93868548/ff0f0e76-de68-430f-a8b5-016a54c102d4&quot;&gt; In the code I saw that this is explicit behaviour, but I am almost certain this shouldn't work this way. If confirmed I will gladly remove this code. &lt;img width=&quot;254&quot; alt=&quot;Screenshot 2023-12-23 141110&quot; src=&quot;https://github.com/Dolibarr/dolibarr/assets/93868548/79b95547-b38d-4d68-b9d6-9434be20cb29&quot;&gt; &lt;img width=&quot;223&quot; alt=&quot;Screenshot 2023-12-23 141133&quot; src=&quot;https://github.com/Dolibarr/dolibarr/assets/93868548/677eb2ca-f905-4c05-8b48-8d5dfec3b89a&quot;&gt; ### Environment Version 18.0.1 ### Environment OS _No response_ ### Environment Web server _No response_ ### Environment PHP _No response_ ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>380</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of git@github.com:Dolibarr/dolibarr.git into develop</MESSAGE>
    <SHA>94be5e32aaa43d7d382459ea71a8ddb0d494cafe</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bug #27215 Deprecated subprice The usage of deprecated subprice in commande causes price ht to be replaced by price ttc</MESSAGE>
      <SHA>1da5d80f7f734974d234c5ac320114153f4533bf</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/commande/class/commande.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Bug #27215 Deprecated subprice The usage of deprecated subprice in commande causes price ht to be replaced by price ttc</MESSAGE>
      <SHA>7a010a59484fd50393a501f4e6d807498f17254e</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/commande/class/commande.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
