<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32930</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/32930</ISSUEURL>
  <TITLE>natural_search remove &quot;Ø&quot; from SQL statement</TITLE>
  <DESCRIPTION>### Bug Have &quot;BUY&quot; as danish &quot;KØB&quot; in the database [llx_accounting_bookkeeping] and do a search in accountancy/bookkeeping/list.php gives wrong SQL : SELECT COUNT(*) as nbtotalofrecords FROM llx_accounting_bookkeeping as t WHERE t.entity IN (1) AND t.doc_date &gt;= '2025-01-01 00:00:00' AND t.doc_date &lt;= '2025-12-31 23:59:59' AND (t.code_journal IN ('KB')) should be: SELECT COUNT(*) as nbtotalofrecords FROM llx_accounting_bookkeeping as t WHERE t.entity IN (1) AND t.doc_date &gt;= '2025-01-01 00:00:00' AND t.doc_date &lt;= '2025-12-31 23:59:59' AND (t.code_journal IN ('KØB')) Some how natural_search remove the &quot;Ø&quot; and may be also Æ-Å (have not tested) ### Dolibarr Version _No response_ ### Environment PHP 8.2 ### Environment Database mysqli ### Steps to reproduce the behavior and expected behavior Use danish language ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>30</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '21.0' of git@github.com:Dolibarr/dolibarr.git into develop</MESSAGE>
    <SHA>d42f6dff0e6f26d85134fa83b4d90dace9b7bca7</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Accept utf8 chars in the natural_search in mode 3. Close #32930</MESSAGE>
      <SHA>7a0e9d4dc1a0f280d8d509f02889296fa28fd565</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/db/DoliDB.class.php</FILE>
        <FILE>test/phpunit/FunctionsLibTest.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
