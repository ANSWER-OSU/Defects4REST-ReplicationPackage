<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32072</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/32072</ISSUEURL>
  <TITLE>PUT method doesn't change the value of the extra fields of the shipments module</TITLE>
  <DESCRIPTION>### Bug When using the `PUT /shipments/{id}` method of the REST_API, the extra fields contained under array_options does not change after a successfull API call. ### Dolibarr Version 20.0.2 ### Environment PHP 8.2.24 ### Environment Database MySQL or MariaDB 10.9.8-MariaDB-1:10.9.8+maria~deb11 ### Steps to reproduce the behavior and expected behavior Request body: ![image](https://github.com/user-attachments/assets/69469a27-7e3a-41d3-9e8e-824c4655a549) Response body: ![image](https://github.com/user-attachments/assets/2ed921df-87c9-4b7a-9f3b-ca9be14a6e84) If I try to update a normal field, it works: Request body: ![image](https://github.com/user-attachments/assets/4fc06e53-18bb-43da-bc15-cc43a4f7056b) Response body: ![image](https://github.com/user-attachments/assets/0f7dafe7-db70-48c7-aedc-36de0ce8e36a) If I use the `PUT /products/{id}` method, that also works fine: Request body: ![image](https://github.com/user-attachments/assets/6d8b0be0-af9e-4d3d-838a-59d93290b5d5) Response body: ![image](https://github.com/user-attachments/assets/080dd026-b50d-4966-9acc-b262af22a16f) It looks like the products API handle the array_options: https://github.com/Dolibarr/dolibarr/blob/develop/htdocs/product/class/api_products.class.php#L397 But the shipment API does not: https://github.com/Dolibarr/dolibarr/blob/develop/htdocs/expedition/class/api_shipments.class.php#L486 ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix phpstan (#32063)</MESSAGE>
    <SHA>2b264ae5d07bb27ea407ec3390ddba7096693c76</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #32072 PUT API call does not handle extra fields in shipment module Store extra field during updating the shipment object</MESSAGE>
      <SHA>a59921613e14e8ecb25fc55eade9921afe784879</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/expedition/class/api_shipments.class.php</FILE>
        <FILE>htdocs/expedition/class/expedition.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #32072 PUT API call does not handle extra fields in shipment module (#32073) Store extra field during updating the shipment object</MESSAGE>
      <SHA>614d3919680e9f95577381ca1e29e5d7d281b67c</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/expedition/class/api_shipments.class.php</FILE>
        <FILE>htdocs/expedition/class/expedition.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
