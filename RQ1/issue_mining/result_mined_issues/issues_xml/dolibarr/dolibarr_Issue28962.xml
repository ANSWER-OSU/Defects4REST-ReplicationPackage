<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>28962</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/28962</ISSUEURL>
  <TITLE>Converting Customer Order to Supplier Order Uses Selling Price Instead of Buying Price</TITLE>
  <DESCRIPTION>### Bug Problem Description When converting a customer order into a supplier order, the product prices are incorrectly taken from the selling prices instead of the buying prices. Expected Behavior The prices of the products in the supplier order should be their buying prices. ### Dolibarr Version 19 ### Environment PHP 8 ### Environment Database _No response_ ### Steps to reproduce the behavior and expected behavior - Navigate to a customer order. - Click on &quot;Create&quot; then &quot;Create purchase order&quot;. - Notice that the product prices in the supplier order correspond to the selling prices, not the buying prices. ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>29</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>FIX : Scale for the &quot;second&quot; unit (#29327) * FIX : Update of the second unit scale * FIX : Pr returns</MESSAGE>
    <SHA>394ed480d3a4d4d038701c0bb6cdc49c17b7a39a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #28347 FIX #28962 FIX #29224 FIX #29035 (#29303) * FIX #28347 FIX #28962 FIX #29224 * fix empty line * Update card.php * FIX #29035 * add multicompany support in creation of supplier order from client order * Update card.php Assign a subprice value of 0 to user selected lines without a vendor product price when creating a supplier order from a client order</MESSAGE>
      <SHA>95aa03e3b0f3c8b5b2920529d9ef27143806feb5</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/fourn/commande/card.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
