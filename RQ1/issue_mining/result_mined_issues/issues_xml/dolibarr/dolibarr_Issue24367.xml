<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24367</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/24367</ISSUEURL>
  <TITLE>No automatic end date of membership</TITLE>
  <DESCRIPTION>### Bug The end date of membership is not calculated accordingly to the membership duration. ### Environment Version 16.0.5 ### Environment OS Linux 5.15.0-69 (Kubuntu) ### Environment Web server Apache/2.4.52 ### Environment PHP 8.1.2-1ubuntu2 ### Environment Database MariaDB 5.5.5-10.6.12-MariaDB-0ubuntu0.22.04.1 ### Environment URL(s) _No response_ ### Expected and actual behavior In the member module, I created several member types : one for each payment frequency (monthly, quarterly, etc.), and I filled the _duration_ field accordingly. When I register a contribution, the _end date of membership_ is supposed to be calculated automatically when left empty. But instead of this, it registers the membership for one year, no matter the membership duration. ### Steps to reproduce the behavior Happens every time. ### Attached files ![image](https://user-images.githubusercontent.com/77627672/228382601-e240ae59-e209-4c40-9816-ae4a0c2ab563.png) ![image](https://user-images.githubusercontent.com/77627672/228382844-4c505ffe-0171-4d1f-a014-1f4739aa341f.png) ![image](https://user-images.githubusercontent.com/77627672/228383053-1ede58de-5469-41c0-88ad-c01e1bc6f301.png)</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>218</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '16.0' of git@github.com:Dolibarr/dolibarr.git into 16.0</MESSAGE>
    <SHA>519836ea412b7677fb62cadbafd4a257a8e26988</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #24367 - membership duration is the default duration adhtype</MESSAGE>
      <SHA>b60d8ce6a3c1b1f329d2193bb52ad695bb54a277</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/adherents/subscription.php</FILE>
        <FILE>htdocs/public/payment/paymentok.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #24367 - membership duration is the default duration adhtype (#26428) * FIX #24367 - membership duration is the default duration adhtype * avoid error for old database * avoid error for old database * Update paymentok.php --------- Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
      <SHA>e2e9a330fa92044b2e65223856012e99fa9453ed</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/adherents/subscription.php</FILE>
        <FILE>htdocs/public/payment/paymentok.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
