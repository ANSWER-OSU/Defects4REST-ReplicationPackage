<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>31724</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/31724</ISSUEURL>
  <TITLE>TakePOS : Undefined variable $servicestatus in pay.php on lines 126, 368 and 392 when stripe is not enabled</TITLE>
  <DESCRIPTION>### Bug Hi, The `$servicestatus` var is undefined on lines 126, 368 and 392 in `pay.php` when the 'stripe' module is disabled. Indeed, the `$servicestatus` var is defined in the `if (isModEnabled('stripe')){...}` conditional block in between lines 87 and 147. This causes side effects such as the payment pad becoming unusable because the `addreceived()` function is no longer in scope. ### Dolibarr Version 20.0.1 ### Environment PHP _No response_ ### Environment Database _No response_ ### Steps to reproduce the behavior and expected behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>11</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>FIX: invoice: revenue stamp wrongly converted to int (#31840)</MESSAGE>
    <SHA>7e9919e6b356929a9a89840e36d002197c510603</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX TakePOS : Undefined variable $servicestatus in pay.php on lines 126, 368 and 392 when stripe is not enabled #31724 TakePOS : Undefined variable $servicestatus in pay.php on lines 126, 368 and 392 when stripe is not enabled #31724</MESSAGE>
      <SHA>127eac7bb2816004cd113702d82eab8dd8df706c</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/takepos/pay.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #31724 (#31885) * FIX TakePOS : Undefined variable $servicestatus in pay.php on lines 126, 368 and 392 when stripe is not enabled #31724 TakePOS : Undefined variable $servicestatus in pay.php on lines 126, 368 and 392 when stripe is not enabled #31724 * nettoyage ligne 89 whitespace</MESSAGE>
      <SHA>c2a7c4bbc153fa12419f11250d11c99547eccb79</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/takepos/pay.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
