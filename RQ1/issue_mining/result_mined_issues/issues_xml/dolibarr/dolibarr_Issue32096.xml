<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32096</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/32096</ISSUEURL>
  <TITLE>linkedObjectsIds is null when doing a search</TITLE>
  <DESCRIPTION>### Bug The API return null for the `linkedObjectsIds` field when doing a search, but when querying the order directly, it returns the references correctly. ### Dolibarr Version 20.0.2 ### Environment PHP 8.2.24 ### Environment Database MySQL or MariaDB 10.9.8-MariaDB-1:10.9.8+maria~deb11 ### Steps to reproduce the behavior and expected behavior Result of: `GET http://dolibarr_ip/dolibarr/api/index.php/orders?sqlfilters=ref:like:SO2411-0003` ```json [ { &quot;module&quot;: null, &quot;id&quot;: &quot;5&quot;, &quot;entity&quot;: &quot;1&quot;, &quot;import_key&quot;: null, &quot;array_options&quot;: [], &quot;array_languages&quot;: null, &quot;contacts_ids&quot;: [], &quot;linkedObjectsIds&quot;: null, &quot;canvas&quot;: null, &quot;fk_project&quot;: null, &quot;contact_id&quot;: null, &quot;user&quot;: null, &quot;origin_type&quot;: null, &quot;origin_id&quot;: null, &quot;ref&quot;: &quot;SO2411-0003&quot; } ] ``` Result of: `GET http://dolibarr_ip/dolibarr/api/index.php/orders/5` ```json { &quot;module&quot;: null, &quot;id&quot;: &quot;5&quot;, &quot;entity&quot;: &quot;1&quot;, &quot;import_key&quot;: null, &quot;array_options&quot;: [], &quot;array_languages&quot;: null, &quot;contacts_ids&quot;: [], &quot;linkedObjectsIds&quot;: { &quot;shipping&quot;: { &quot;3&quot;: &quot;3&quot; } }, &quot;canvas&quot;: null, &quot;fk_project&quot;: null, &quot;contact_id&quot;: null, &quot;user&quot;: null, &quot;origin_type&quot;: null, &quot;origin_id&quot;: null, &quot;ref&quot;: &quot;SO2411-0003&quot; } ] ``` ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>The $empty param must follow same rules than other select component.</MESSAGE>
    <SHA>b56ac120931ed46f14617b9c19a7eaf6f229273f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix missing linkedObjectsIds on order API https://github.com/Dolibarr/dolibarr/issues/32096</MESSAGE>
      <SHA>41fe5a0f795f4bc7d6b46ea840e4ee39b67d31fd</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/commande/class/api_orders.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix missing linkedObjectsIds on order API (#32175) https://github.com/Dolibarr/dolibarr/issues/32096</MESSAGE>
      <SHA>ad1bcc7932170ac57b093de85859bc9627b4dcb2</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/commande/class/api_orders.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
