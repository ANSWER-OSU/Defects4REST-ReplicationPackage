<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8442</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/8442</ISSUEURL>
  <TITLE>Taxonomy content list filter issues</TITLE>
  <DESCRIPTION>### Describe the bug I was testing the taxonomy content list filter and I found some issues with it's logic that meant to all matching content items were returned. This depended on the status of the content item. ### To Reproduce Steps to reproduce the behavior: 1. Using the blog theme activate the taxonomy filter feature and set it to work for &quot;tags&quot; 2. Go to Content Definition and list the blog post types. 2. Create a blog post and tag it with one of the tags - I used the &quot;exploration&quot; tag and publish it (Test Post 1) 3. Create a blog post and tag it with the same tag as above eg. &quot;exploration&quot; and save it as draft (Test Post 2) 4. Create a blog post and tag it with the same tag as above eg. &quot;exploration&quot; and publish it, now edit it and save it as draft (Test Post 3) 5. Now use the tags filter to filter on the tag above eg. &quot;exploration&quot; (Show filter defaults to latest) and you will notice that of the 3 posts you created above only the published one (Test Post 1) is in the results - all 3 test posts should have been int he results. 6. Keep the tag filter the same and change the &quot;show&quot; filter to Published... Test Post 1 and Test Post 3 are in the results which is fine. 7. Keep the tag filter the same and change the &quot;show&quot; filter to Unpublished... there are no results but Test Post 2 should have shown. 8. Keep the tag filter the same and change the &quot;show&quot; filter to All Versions... you will notice that of the 3 posts you created above only the published one (Test Post 1) is in the results - all 3 test posts should have been int he results. ### Expected behavior Here is the expected behavior for the filter combinations and the 3 test posts above: 1. Tag filter &quot;exploration&quot; and Show filter &quot;Latest&quot; - would expect all 3 test posts should show 2. Tag filter &quot;exploration&quot; and Show filter &quot;Owned by me&quot; - all 3 test posts should show 2. Tag filter &quot;exploration&quot; and Show filter &quot;Published&quot; - Test Post 1 and Test Post 3 should show (this filter works). 3. Tag filter &quot;exploration&quot; and Show filter &quot;Unpublished&quot; - Test Post 2 should be show 4. Tag filter &quot;exploration&quot; and Show filter &quot;All versions&quot; - all 3 test posts should show (not sure how All versions differs from latest - doesn't really make sense) ### Screenshots ![taxonomy-filter](https://user-images.githubusercontent.com/2867511/105944857-e146f800-60af-11eb-9171-5774c4f0ef64.gif)</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>7</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add &quot;ASPNETCORE_ENVIRONMENT&quot;: &quot;Development&quot; to every configurations in launch.json for VSCode. (#8500)</MESSAGE>
    <SHA>bb51f42444dee7275641b3e696c75b4735e13302</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes #8442 Taxonomy content list filter (#8501)</MESSAGE>
      <SHA>a96c3e4c3c19551b55f6512b95d470458054e160</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Taxonomies/Indexing/TaxonomyIndex.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Taxonomies/Migrations.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
