<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>11612</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/11612</ISSUEURL>
  <TITLE>Add HtmlPrefix parameter to IDisplayManager&lt;TModel&gt;</TITLE>
  <DESCRIPTION>### Is your feature request related to a problem? Please describe. I have a need to create a function that would create users in bulk from excel file. Now, that I have a collection of data (user data), I need a way to tell drivers the prefix that should be use when building the ShapeResult. For example, the UserDisplayDriver tries to bind the data from the request to `EditUserViewModel`. However, if the request has data that are prefixed with `Users[0].User_` the binding engine would not know how to bind the data in the request to the viewmodel. ### Describe the solution you'd like Change the IDisplayManager&lt;TModel&gt; to the following ``` public interface IDisplayManager&lt;TModel&gt; { Task&lt;IShape&gt; BuildDisplayAsync(TModel model, IUpdateModel updater, string displayType = &quot;&quot;, string groupId = &quot;&quot;, string htmlPrefix = &quot;&quot;); Task&lt;IShape&gt; BuildEditorAsync(TModel model, IUpdateModel updater, bool isNew, string groupId = &quot;&quot;, string htmlPrefix = &quot;&quot;); Task&lt;IShape&gt; UpdateEditorAsync(TModel model, IUpdateModel updater, bool isNew, string groupId = &quot;&quot;, string htmlPrefix = &quot;&quot;); } ``` Now with that change, during the post request on creating the user I can do something like this ``` for(int i = 0; i &lt; model.Record.Length; i++) { var user = new User(); var prefix = $&quot;{nameof(model.Record)}[{i}]&quot;; // prefix would be &quot;Record[0]&quot; var shape = await _userDisplayManager.UpdateEditorAsync(user, updater: _updateModelAccessor.ModelUpdater, isNew: true, htmlPrefix = prefix); await _userService.CreateUserAsync(user, null, ModelState.AddModelError); } ``` If this is an acceptable approach I can submit a PR</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>111</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'OrchardCMS:main' into main</MESSAGE>
    <SHA>fac1a93f9cb42293bdf88ad151c30445bcf979ff</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Adds the prefix to the display manager. Fixes #11612</MESSAGE>
      <SHA>7ff0f939d9ebad90c9f42548a2e9499e7b480a88</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Workflows/Services/ActivityDisplayManager.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement/DisplayManager.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement/IDisplayManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Adds the prefix to the display manager. Fixes #11612 (#11775)</MESSAGE>
      <SHA>b4188902be9c77d09455494f4fce1c58ec44d39d</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Workflows/Services/ActivityDisplayManager.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement/DisplayManager.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement/IDisplayManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
