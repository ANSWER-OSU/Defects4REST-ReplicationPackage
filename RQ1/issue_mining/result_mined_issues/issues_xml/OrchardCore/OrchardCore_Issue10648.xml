<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>10648</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/10648</ISSUEURL>
  <TITLE>executeQuery function in workflow returns the dictionary incorrectly</TITLE>
  <DESCRIPTION>This is my query: ![image](https://user-images.githubusercontent.com/15613121/140601744-c329b9a9-f39c-4695-9876-c4fa286953aa.png) and this is my code : ``` Javascript var orderList = property(&quot;zsdgData&quot;); log(&quot;Error&quot;,&quot;过滤前的数据总数：&quot;+ orderList.length) var orderIds= orderList.map(x=&gt;&quot;'&quot;+x['Delivery_Number']+'-'+x['Delivery_Item']+&quot;'&quot;); var queryParams= { ids: orderIds.join(',')}; log(&quot;Error&quot;,&quot;queryParams：&quot;+ JSON.stringify(queryParams)) //查询数据库中已存在的项 var result = executeQuery(&quot;SCMQueryExistsedOrderIds&quot;,queryParams) //output:{&quot;Count&quot;:36,&quot;Capacity&quot;:64} log(&quot;Error&quot;,&quot;qurey result：&quot;+ JSON.stringify(result)) var filterdData=orderList; //排除数据库中已存在的条目 if(result!=null){ log(&quot;Error&quot;,&quot;qurey result is not null&quot;+JSON.stringify(result)) // var idResult= result.map(x=&gt;x.DisplayText ) filterdData=orderList.filter(x=&gt; idResult.indexOf(x['Delivery_Number']+'-'+x['Delivery_Item'])==-1) } log(&quot;Error&quot;,&quot;过滤后的数据总数：&quot;+ filterdData.length) setProperty(&quot;zsdgData&quot;,filterdData) setOutcome('Done'); ``` log out put: ``` input counts ：12 queryParams：{&quot;ids&quot;:&quot;'145163194-10','145163285-10','145163288-10','145163304-10','145163307-10','145163315-10','145163318-10','145163323-10','145163325-10','145163327-10','145163329-10','145163331-10'&quot;} result ：{&quot;Count&quot;:36,&quot;Capacity&quot;:64} result is not null :{&quot;Count&quot;:36,&quot;Capacity&quot;:64} An unhandled error occurred while executing an activity. Workflow ID: '143'. Activity: '4495mt0yfpjm2vn0pc32yd5ex1', 'ScriptTask'. Putting the workflow in the faulted state. Jint.Runtime.JavaScriptException: Property 'map' of object is not a function at :15:2 at :15:2 ```</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>366</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>ZString 2.4.3 (#10651)</MESSAGE>
    <SHA>afcc979897f0d1a0e26581066bce53f2c319e166</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>to fix excuteQuery function https://github.com/OrchardCMS/OrchardCore/issues/10648</MESSAGE>
      <SHA>0963be2fff6205d4f4070181ba52fda8a393f9c8</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Queries/Sql/SqlQuerySource.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
