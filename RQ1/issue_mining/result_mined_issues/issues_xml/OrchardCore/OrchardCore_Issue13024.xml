<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>13024</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/13024</ISSUEURL>
  <TITLE>Dynamic permission can't save in role</TITLE>
  <DESCRIPTION>bug in pull: https://github.com/OrchardCMS/OrchardCore/pull/12510 1. Edit a role 2. Select some dynamic permissions , like 'ExecuteApi_RecentBlogPosts' 3. Click save . 4. Reopen the role , ExecuteApi_RecentBlogPosts is not checked cuz the code only can load the static permissions , the program will break on line 235 https://github.com/OrchardCMS/OrchardCore/blob/083d5d7f9885b6ba034f642259cb94326af9e551/src/OrchardCore.Modules/OrchardCore.Roles/Controllers/AdminController.cs#L219-L252 We should load all permissions this way: https://github.com/OrchardCMS/OrchardCore/blob/083d5d7f9885b6ba034f642259cb94326af9e551/src/OrchardCore.Modules/OrchardCore.Roles/Controllers/AdminController.cs#L184-L185</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>7</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix UserStore by saving/removing the role from the user (#13066)</MESSAGE>
    <SHA>aa631dd36dd049fae49ada72918f454d152d27f4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #13024 and #13035 Roles Updater (#13040)</MESSAGE>
      <SHA>5dbd92cb06cee203b95e0b3bc133d852adf3fbeb</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Recipes/Manifest.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Manifest.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Models/RolesDocument.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Services/RoleStore.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Services/RoleUpdater.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Roles/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Users/Manifest.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Infrastructure.Abstractions/Security/IRoleCreatedEventHandler.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Users.Core/Extensions/UsersServiceCollectionExtensions.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Users.Core/Services/NullRoleStore.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Users.Core/Services/UserStore.cs</FILE>
        <FILE>src/docs/reference/modules/Recipes/README.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
