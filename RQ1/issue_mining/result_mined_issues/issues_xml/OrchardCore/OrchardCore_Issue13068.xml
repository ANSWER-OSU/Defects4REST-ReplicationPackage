<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>13068</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/13068</ISSUEURL>
  <TITLE>UI: Drag&amp;Drop flow widgets - restrictions</TITLE>
  <DESCRIPTION>### Describe the bug When using drag &amp; drop in widget zone, content type restrictions are not applied. ### Reproduction Prepare: * Create content type C1 with flow part, that allows only widget A * Create widget A with flow part, that allows widget B * Create random widget B Action: * Create content item of type C1 * Add widget A to content item of type C1 * Add widget B to widget A flow * When you drag widget B, you can drop it into flow of content type C1 * In this phase, you can still drop it back to widget A's flow. But when you publish page, you will get message that widget has no matching content type definition and that it will be lost after publish. * This can be fixed by allowing widget B at content type C1's flow, but that may require admin to fix this. ### Expected If drop target (flow) is restricted, it should not be possible to drop widget of restricted type into it.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>804</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Move &quot;what changes&quot; section to the bottom of the release docs (#16718)</MESSAGE>
    <SHA>bf99c02235b95c225247e8d408d6b85dd545dc1e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix drag&amp;drop between flows. Handle content type restrictions. Related to #13068</MESSAGE>
      <SHA>d717c7dccb7ba9fdcfc7322321d8fb3dba7d77c2</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Flows/Views/BagPart.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Flows/Views/ContentCard-BagPart.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Flows/Views/ContentCard-FlowPart.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Flows/Views/FlowPart.Edit.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
