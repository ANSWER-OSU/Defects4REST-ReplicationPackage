<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>10190</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/10190</ISSUEURL>
  <TITLE>Can't get access token via email address as user name</TITLE>
  <DESCRIPTION>### Describe the bug ### To Reproduce Get access token via POST https://localhost:44391/connect/token - grant_type - scope - username - password - client_id If I use the user name, It works. However, if I use user email. It doesn't work. ### Expected behavior - According to this discussion thread: https://github.com/OrchardCMS/OrchardCore/pull/7645. There is a change to not allow the username = email. However, there should be a fallback to authenticate by username or email. - I expect I can use username or email as to login. ### Screenshots ![image](https://user-images.githubusercontent.com/11371581/131404090-dc0ab09c-5269-479f-8dd4-b5fe8b3ffb43.png)</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>652</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Include Google Analytics and Tag Manage when user concents. (#13834)</MESSAGE>
    <SHA>3e937abcfc761ef06469a43f535a01ec75b7f4ec</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Support login via username or email address for OpenID Fix #10190</MESSAGE>
      <SHA>19f34caa1bf9b6c633146da80e340ff119424e15</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.OpenId/Controllers/AccessController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.OpenId/OrchardCore.OpenId.csproj</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Users/Controllers/AccountController.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Users.Abstractions/Services/IUserService.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Users.Core/Services/UserService.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
