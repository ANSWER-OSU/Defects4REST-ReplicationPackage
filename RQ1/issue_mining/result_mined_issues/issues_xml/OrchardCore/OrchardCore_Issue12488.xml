<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>12488</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/12488</ISSUEURL>
  <TITLE>When using ContentTypes without any fields, the &quot;Fields&quot; section should not show up</TITLE>
  <DESCRIPTION>### Describe the bug When we enable `OC.ContentTypes` feature but not enable any feature that compose fields like `OC.ContentFields`, the Fields section shows up. ![image](https://user-images.githubusercontent.com/24724371/192036008-99ac0472-4dd2-4bb6-97e1-58480ec74f8f.png) ### To Reproduce Steps to reproduce the behavior: 1. Enable OC.ContentTypes and disable OC.ContentFields. 2. Go to Content Types and edit or add a new content type ### Suggestion I think we should remove the &quot;Add field&quot; button when there is no fields definitions. Also, if a currently attached field has no definition, we should not be able to edit it, but we should be able to remove it. This can happen if a field was attach to a content type/part while the field definition is available but then the feature that provides the definition was disabled. Moreover, we should remove the &quot;Fields&quot; section from the UI if the current content-type has no fields and also there is no field definitions.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>27</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Use QueryIndex() for better performance in OC.PublishLater (#12276)</MESSAGE>
    <SHA>49fa7d4bf4350144293ad565d2a056c162b2e18e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Remove Fields from ContentTypes UI when ContentFields feature is not enabled. Fix #12488</MESSAGE>
      <SHA>7958068530f977d7c7e8fe48908f2c79cb789b42</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Controllers/FieldsController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Views/Admin/Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Views/Fields/AddFieldTo.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Views/Fields/EditField.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix content types fields dependency. Fix #12488</MESSAGE>
      <SHA>8df9b75450649ae11e129930f745e502734e38cc</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.ContentTypes/Views/Admin/Edit.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
