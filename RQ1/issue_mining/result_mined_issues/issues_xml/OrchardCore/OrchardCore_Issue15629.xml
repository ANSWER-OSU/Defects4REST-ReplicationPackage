<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15629</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/15629</ISSUEURL>
  <TITLE>The ScriptsMiddleware(s) should be replaced by endpoints</TITLE>
  <DESCRIPTION>No need to create a middleware that is impacting the stack size to serve script files. We can register the endpoint routes directly and invoke a delegate. These methods should also not do string concatenation to render the files. They could precompute the utf8 string (`private static ReadOnlySpan&lt;byte&gt; =&gt; &quot;value&quot;u8;`) and call `WriteAsync()` for each segment instead.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>314</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix First-time Contributor Welcome workflow randomly hitting rate limits (#16797)</MESSAGE>
    <SHA>d0bce2b354ac1a08c2f749d4b6c08b0c2f757e58</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Replace ScriptsMiddleware(#15629)</MESSAGE>
      <SHA>6e266b646f883662211ff9780a8380b032890df8</SHA>
      <PATCHEDFILES>
        <FILE>OrchardCore.sln</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/InitSdkEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/LoadSdkEndPoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Endpoints/Api/GetIntellisenseEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Startup.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Replace ScriptsMiddleware(#15629)</MESSAGE>
      <SHA>111ed781cf0941eaba0d8d8c4b50a4806b6b4c16</SHA>
      <PATCHEDFILES>
        <FILE>OrchardCore.sln</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/InitSdkEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/LoadSdkEndPoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Endpoints/Api/GetIntellisenseEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Startup.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Replace ScriptsMiddleware(#15629)</MESSAGE>
      <SHA>34b0355dde85bd59c32cd811953bc782e7539900</SHA>
      <PATCHEDFILES>
        <FILE>OrchardCore.sln</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/InitSdkEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/LoadSdkEndPoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Endpoints/Api/GetIntellisenseEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Startup.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Replace ScriptsMiddleware(#15629)</MESSAGE>
      <SHA>37dd66a83bf87120a80697d843bd6715fe0559cc</SHA>
      <PATCHEDFILES>
        <FILE>OrchardCore.sln</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/InitSdkEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Endpoints/Api/LoadSdkEndPoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Facebook/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Endpoints/Api/GetIntellisenseEndpoint.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/ScriptsMiddleware.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Liquid/Startup.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
