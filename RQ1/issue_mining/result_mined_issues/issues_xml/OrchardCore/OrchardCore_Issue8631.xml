<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8631</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/8631</ISSUEURL>
  <TITLE>SQL Query Schema with custom db table (collision with content type)</TITLE>
  <DESCRIPTION>When you want to use a custom table in a SQL Query with a schema to expose your query in the GraphQL endpoint it can collide with an existing Content Type. ### To Reproduce Steps to reproduce the behavior: 1 - Create a &quot;Test&quot; content type without any specific part or field. 2 - Create a &quot;Test&quot; table in your database with a &quot;Name&quot; column as a varchar. 3 - Create a &quot;Test&quot; SQL Query with an object schema ```json { &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: { &quot;Name&quot; : { &quot;type&quot; : &quot;string&quot;, &quot;description&quot; : &quot;This is the name of the test.&quot; } } } ``` ```SQL SELECT Name FROM Test ``` ![image](https://user-images.githubusercontent.com/3228637/108441168-9178ce00-7222-11eb-8790-ce39b068504a.png) 4 - Try to execute a GraphQL query on that Test query. ### Expected behavior It should add both the Content Type and Query in the GraphQL endpoint without making them collide. Right now it will take in priority the Content Type over the Query leaving the Query unusable unless you rename it to something different than any of your content type names. ### Screenshots ![image](https://user-images.githubusercontent.com/3228637/108441189-9d649000-7222-11eb-93e6-bf3e06cdfbe7.png) Working solution for now is to rename the Query : ![image](https://user-images.githubusercontent.com/3228637/108441500-3c898780-7223-11eb-9e69-00bb987f7369.png)</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>11</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>doc</MESSAGE>
    <SHA>d7bb8e2fb95f06094cc536752aba98982ad5ab30</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch 'dev' into skrypt/#8631</MESSAGE>
      <SHA>299844b54e711ec9e9e8df7b895fc68bda4cc75a</SHA>
      <PATCHEDFILES>
        <FILE>OrchardCore.sln</FILE>
        <FILE>mkdocs.yml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Controllers/LayerRuleController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Deployment/AllLayersDeploymentSource.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/GraphQL/LayerQueryObjectType.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Manifest.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Migrations.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Models/Layer.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/OrchardCore.Layers.csproj</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Recipes/LayerStep.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Services/LayerFilter.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/ViewModels/LayerEditViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/ViewModels/LayerRuleCreateViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/ViewModels/LayerRuleEditViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/ViewModels/LayersEditViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Views/Admin/Create.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Views/Admin/Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Views/LayerRule/Create.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Views/LayerRule/Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Layers/Views/_ViewImports.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Resources/ResourceManifest.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Resources/package-lock.json</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Resources/package.json</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Resources/wwwroot/Scripts/codemirror/codemirror.js</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Resources/wwwroot/Scripts/codemirror/codemirror.min.js</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Assets.json</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Assets/js/rules.js</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Assets/scss/rules.scss</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/AllConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/AnyConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/BooleanConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/ContentTypeConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/ContentTypeConditionEvaluatorDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/CultureConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/HomepageConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/IsAnonymousConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/IsAuthenticatedConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/JavascriptConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/RoleConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/RuleDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Drivers/UrlConditionDisplayDriver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Manifest.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/AllConditionGroup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/AnyConditionGroup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/BooleanCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/ContentTypeCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/CultureCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/HomepageCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/IsAnonymousCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/IsAuthenticatedCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/JavascriptCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/RoleCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/StringOperators.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Models/UrlCondition.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/OrchardCore.Rules.csproj</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/AllConditionEvalutor.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/AnyConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/BooleanConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/ConditionIdGenerator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/ConditionOperatorConfigureOptions.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/ConditionOperatorResolver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/ConditionResolver.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/CultureConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/HomepageConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/IsAnonymousConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/IsAuthenticatedConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/JavascriptConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/RoleConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/RuleMigrator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/RuleService.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/StringOperatorComparer.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Services/UrlConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Startup.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewComponents/SelectStringOperationViewComponent.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/AllConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/AnyConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/BooleanConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/ConditionGroupViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/ContentTypeConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/CultureConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/HomepageConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/JavascriptConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/RoleConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/SelectStringOperationViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/ViewModels/UrlConditionViewModel.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Condition.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Condition.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Condition.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/ConditionsModal.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AllCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AllCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AllCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AnyCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AnyCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/AnyCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/BooleanCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/BooleanCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/BooleanCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/ConditionGroup.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/ContentTypeCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/ContentTypeCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/ContentTypeCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/CultureCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/CultureCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/CultureCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/HomepageCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/HomepageCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/HomepageCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAnonymousCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAnonymousCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAnonymousCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAuthenticatedCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAuthenticatedCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/IsAuthenticatedCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/JavascriptCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/JavascriptCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/JavascriptCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/RoleCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/RoleCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/RoleCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/Rule.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/UrlCondition.Fields.Edit.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/UrlCondition.Fields.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Items/UrlCondition.Fields.Thumbnail.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Rule.Summary.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/Shared/Components/SelectStringOperation/Default.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/Views/_ViewImports.cshtml</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/wwwroot/Scripts/rules.js</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/wwwroot/Scripts/rules.min.js</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/wwwroot/Styles/rules.css</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Rules/wwwroot/Styles/rules.min.css</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Users/Controllers/AccountController.cs</FILE>
        <FILE>src/OrchardCore.Themes/TheAgencyTheme/Recipes/agency.recipe.json</FILE>
        <FILE>src/OrchardCore.Themes/TheBlogTheme/Recipes/blog.recipe.json</FILE>
        <FILE>src/OrchardCore/OrchardCore.Application.Cms.Core.Targets/OrchardCore.Application.Cms.Core.Targets.csproj</FILE>
        <FILE>src/OrchardCore/OrchardCore.FileStorage.AzureBlob/BlobFileStore.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Infrastructure/Security/ApiAuthenticationHandler.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.ResourceManagement.Abstractions/RequireSettings.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.ResourceManagement.Abstractions/ResourceDefinition.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.ResourceManagement.Abstractions/ResourcePosition.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.ResourceManagement/ResourceDictionary.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.ResourceManagement/ResourceManager.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/Condition.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ConditionEvaluator.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ConditionGroup.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ConditionOperator.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ConditionOperatorOptions.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ConditionOptions.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IConditionFactory.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IConditionIdGenerator.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IConditionOperatorFactory.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IConditionOperatorResolver.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IConditionResolver.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IOperatorComparer.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IRuleMigrator.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/IRuleService.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/OperatorComparer.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/OrchardCore.Rules.Abstractions.csproj</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/Rule.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Rules.Abstractions/ServicesCollectionExtensions.cs</FILE>
        <FILE>src/docs/reference/modules/Layers/README.md</FILE>
        <FILE>src/docs/reference/modules/Resources/README.md</FILE>
        <FILE>src/docs/reference/modules/Rules/README.md</FILE>
        <FILE>src/docs/resources/libraries/README.md</FILE>
        <FILE>test/OrchardCore.Benchmarks/RuleBenchmark.cs</FILE>
        <FILE>test/OrchardCore.Tests/Modules/OrchardCore.Rules/RuleTests.cs</FILE>
        <FILE>test/OrchardCore.Tests/ResourceManagement/ResourceManagerTests.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
