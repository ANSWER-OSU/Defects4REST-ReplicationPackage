<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>178</ISSUENO>
  <ISSUEURL>https://github.com/enviroCar/enviroCar-server/issues/178</ISSUEURL>
  <TITLE>Schema resource redirect loop</TITLE>
  <DESCRIPTION>Every schema of the [schema resource](https://envirocar.org/api/stable/schema) will lead to a redirect loop due to the [content negotiation filter](https://github.com/enviroCar/enviroCar-server/blob/master/rest/src/main/java/org/envirocar/server/rest/URIContentNegotiationFilter.java). The `.json` part is stripped of by the filter and the [resource](https://github.com/enviroCar/enviroCar-server/blob/master/rest/src/main/java/org/envirocar/server/rest/resources/JSONSchemaResource.java#L85) will return a redirect if it is not present. Letting the [resource](https://github.com/enviroCar/enviroCar-server/blob/master/rest/src/main/java/org/envirocar/server/rest/resources/JSONSchemaResource.java#L85) just append `.json` at the end of the schema and look it up should solve the problem</DESCRIPTION>
  <REPONAME>enviroCar-server</REPONAME>
  <TIMEDIFFERENCEDAYS>1684</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #288 from enviroCar/dev updated mongo-java-driver to v3.8.2</MESSAGE>
    <SHA>52936c59601f202886a0768fba7f4705a7eda0dd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #293 from enviroCar/dev Fix for #267, #178 and update of Jackson to v2.9.7</MESSAGE>
      <SHA>4306a76b018703bbc1f8aa3f4a7c85c4a90b72eb</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/org/envirocar/server/core/CarSimilarityServiceImpl.java</FILE>
        <FILE>core/src/main/java/org/envirocar/server/core/entities/TrackSummaries.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/CustomGuiceObjectFactory.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/activities/MongoActivity.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/convert/TrackSummariesConverter.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/dao/AbstractMongoDao.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/dao/MongoMeasurementDao.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/dao/MongoStatisticsDao.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/dao/MongoUserDao.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/dao/MongoUserStatisticDao.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/statistics/StatisticsUpdateScheduler.java</FILE>
        <FILE>mongo/src/main/java/org/envirocar/server/mongo/userstatistic/UserStatisticUpdateScheduler.java</FILE>
        <FILE>pom.xml</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/decoding/json/ContextKnowledge.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/decoding/json/MeasurementDecoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/ActivityJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/FuelingJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/GroupJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/MeasurementJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/StatisticJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/TrackJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/UserJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/encoding/json/UserStatisticJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/guice/JerseyModule.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/resources/JSONSchemaResource.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/resources/PreviewResource.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/resources/ShareResource.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/util/GeoJSON.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/util/OSMTileRenderer.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/util/ShareImageRenderUtil.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/util/TileRenderer.java</FILE>
        <FILE>rest/src/main/java/org/envirocar/server/rest/validation/JSONSchemaResourceFilterFactory.java</FILE>
        <FILE>rest/src/main/resources/ApplicationMessages.properties</FILE>
        <FILE>rest/src/main/resources/ApplicationMessages_de_DE.properties</FILE>
        <FILE>rest/src/test/java/org/envirocar/server/rest/schema/ValidationRule.java</FILE>
        <FILE>rest/src/test/java/org/envirocar/server/rest/util/OSMTileRendererTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
