<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>35</ISSUENO>
  <ISSUEURL>https://github.com/enviroCar/enviroCar-server/issues/35</ISSUEURL>
  <TITLE>Delete references to deleted users</TITLE>
  <DESCRIPTION>If a users is deleted all references should be deleted. This includes Tracks, Friends, Groups and Measurementsâ€¦ Encoders should be checked if they can handle entities without a user. E.g. for friends: ``` javascript db.users.update( { friends:{ $elemMatch: DBRef(&quot;users&quot;, ObjectId(&quot;5194c318e4b0f6e19ad24acc&quot;)) } }, { $pull : { friends: DBRef(&quot;users&quot;, ObjectId(&quot;5194c318e4b0f6e19ad24acc&quot;)) } }, { multiple: true } ); ```</DESCRIPTION>
  <REPONAME>enviroCar-server</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>seperated encoders and decoders</MESSAGE>
    <SHA>88200872a390101ea1f8aa67b5c64c98a408f842</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>added todos for #35</MESSAGE>
      <SHA>781ab7284bd40087a02382a02cef15d0638c8292</SHA>
      <PATCHEDFILES>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoMeasurementDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoTrackDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoUserDao.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/PaginationFilter.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/StatisticEncoder.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>remove user references on delete</MESSAGE>
      <SHA>62c5681998efa394903c942f8eb658c014f52cbb</SHA>
      <PATCHEDFILES>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoUserDao.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch 'dev' * dev: 404 for users that are not friends configuration options for input/output validation removed unnecessary factory bindings compared wrong media type Fixed #36: Incorrect removal of friends more efficient user removal cleaned statistics dao dependencies remove user references on delete delete track references on measurements added todos for #35 seperated encoders and decoders do not store measurement refs in track bulk upload completed Fixes #30</MESSAGE>
      <SHA>8c653b788d95548ca18d45b254fa8fdd649b58e0</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/io/car/server/core/Service.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/dao/StatisticsDao.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/dao/TrackDao.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/entities/Track.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/entities/User.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/statistics/StatisticsService.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/statistics/StatisticsServiceImpl.java</FILE>
        <FILE>core/src/main/java/io/car/server/core/util/Pagination.java</FILE>
        <FILE>create.sh</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/AbstractMongoDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoGroupDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoMeasurementDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoStatisticsDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoTrackDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/dao/MongoUserDao.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/entity/MongoTrack.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/entity/MongoUser.java</FILE>
        <FILE>mongo/src/main/java/io/car/server/mongo/util/Ops.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/CodingFactory.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/JSONConstants.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/PaginationFilter.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/AbstractEntityDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/EntityDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/GeoJSONDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/GroupDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/MeasurementDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/PhenomenonDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/SensorDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/TrackDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/decoding/UserDecoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/AbstractEntityEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/EntityEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GeoJSONEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GroupEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/GroupsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/MeasurementEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/MeasurementsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/PhenomenonEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/PhenomenonsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/SensorEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/SensorsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/StatisticEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/StatisticsEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/TrackEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/TracksEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/UserEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/encoding/UsersEncoder.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JSONSchemaModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyCodingModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyProviderModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/guice/JerseyResourceModule.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/provider/AbstracJsonProvider.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/provider/AbstractJsonEntityProvider.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/FriendsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/MeasurementsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/ResourceFactory.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/RootResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/StatisticsResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/TrackResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/TracksResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/resources/UserResource.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/util/GeoJSON.java</FILE>
        <FILE>rest/src/main/java/io/car/server/rest/validation/JSONSchemaResourceFilterFactory.java</FILE>
        <FILE>rest/src/main/resources/schema/track.create.json</FILE>
        <FILE>rest/src/test/java/io/car/server/rest/provider/GeoJSONTest.java</FILE>
        <FILE>webapp/src/test/java/io/car/server/RootResourceTest.java</FILE>
        <FILE>webapp/src/test/java/io/car/server/UsersResourceTest.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
