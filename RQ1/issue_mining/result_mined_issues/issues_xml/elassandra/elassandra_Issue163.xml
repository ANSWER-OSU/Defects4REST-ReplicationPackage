<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>163</ISSUENO>
  <ISSUEURL>https://github.com/strapdata/elassandra/issues/163</ISSUEURL>
  <TITLE>Invalid date mapping</TITLE>
  <DESCRIPTION>&lt;!-- GitHub is reserved for bug reports and feature requests. The best place to ask a general question is at the Elastic Discourse forums at https://discuss.elastic.co. If you are in fact posting a bug report or a feature request, please include one and only one of the below blocks in your new issue. Note that whether you're filing a bug report or a feature request, ensure that your submission is for an [OS that we support](https://www.elastic.co/support/matrix#show_os). Bug reports on an OS that we do not support or feature requests specific to an OS that we do not support will be closed. --&gt; &lt;!-- If you are filing a bug report, please remove the below feature request block and provide responses for all of the below items. --&gt; **Elasticsearch version**: 5.5.0 **Plugins installed**: [] **JVM version**: 8 **OS version**: **Description of the problem including expected versus actual behavior**: **Steps to reproduce**: 1. create table with date field ``` create table date_elassandra_test ( id int primary key, somedate date ); ``` 2. create mapping on it ``` PUT http://node:9200/myspace/date_elassandra_test/_mapping { &quot;date_elassandra_test&quot;: { &quot;properties&quot;: { &quot;somedate&quot;: { &quot;type&quot;: &quot;date&quot;, &quot;cql_collection&quot;: &quot;singleton&quot; } } } } ``` 3. insert some data `insert into date_elassandra_test (id,somedate) values (1,'2018-02-03');` 4. check search result ``` POST http://node:9200/myspace/date_elassandra_test/_search ``` { ... &quot;_source&quot;: { &quot;somedate&quot;: &quot;-5877593-07-26T00:00:00.000Z&quot; } ... } As you see - somedate is somehow offseted date for ElasticSearch. But if TIMESTAMP cassandra type is used instead - all is well</DESCRIPTION>
  <REPONAME>elassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update documentation</MESSAGE>
    <SHA>699cb73e0540dcddb734c958578e2a7836f578ca</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix Invalid date mapping #163</MESSAGE>
      <SHA>e7f9059d80e3101a42c60040ed546a6ba18c05ff</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java</FILE>
        <FILE>core/src/main/java/org/elasticsearch/index/mapper/DateFieldMapper.java</FILE>
        <FILE>core/src/test/java/org/elassandra/CqlTypesTests.java</FILE>
        <FILE>docs/elassandra/source/mapping.rst</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
