<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3468</ISSUENO>
  <ISSUEURL>https://github.com/nightscout/cgm-remote-monitor/issues/3468</ISSUEURL>
  <TITLE>[API] Treatments with invalid IDs can be uploaded successfully</TITLE>
  <DESCRIPTION>I'm working on a Swift wrapper around the Nightscout API and have encountered a bug with some odd consequences: a treatment can be uploaded with an invalid ID. However, upon querying the API to modify/delete by this ID, the API will return an error response, so the invalid treatment is effectively untouchable. I haven't tested uploading an entry/profile record/device status/etc. with an invalid ID, but I suspect that this issue persists in those cases. Here's a sample of some data that uploaded successfully. Note that the ID is most definitely not a 24-character-long string of hex digits. ``` { &quot;_id&quot;: &quot;-5&quot;, &quot;notes&quot;: &quot;NOT VALID&quot;, &quot;eventType&quot;: &quot;Note&quot;, &quot;duration&quot;: 0, &quot;created_at&quot;: &quot;2018-03-24T03:15:38&quot;, &quot;carbs&quot;: null, &quot;insulin&quot;: null } ```</DESCRIPTION>
  <REPONAME>cgm-remote-monitor</REPONAME>
  <TIMEDIFFERENCEDAYS>630</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>add travis build for Node 10</MESSAGE>
    <SHA>59d5279cd76b34703721252067da9144b8453714</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>revert [API] Treatments with invalid IDs can be uploaded successfully #3468 https://github.com/nightscout/cgm-remote-monitor/pull/3464</MESSAGE>
      <SHA>11d62377bfe2837cb38f86361f637f93500f2796</SHA>
      <PATCHEDFILES>
        <FILE>lib/server/websocket.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
