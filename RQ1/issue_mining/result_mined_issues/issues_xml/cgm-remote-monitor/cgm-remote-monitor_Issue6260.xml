<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6260</ISSUENO>
  <ISSUEURL>https://github.com/nightscout/cgm-remote-monitor/issues/6260</ISSUEURL>
  <TITLE>App crashed on heroku after deplay new build 14.0.6</TITLE>
  <DESCRIPTION>**Describe the bug** I've run nightscout on heroku with mLab. But I'm not sure which version I've got before. After updating to the latest version and deploy it to heroku the app crashed with the following message in the log: `nightscout at=error code=h10 desc=&quot;app crashed&quot; method=get path=&quot;/socket.io/?eio=3` After restarting the app on heroku I've got the following message: `error: helmet no longer supports `true` as a middleware option.` **Your setup information** - What version of Nightscout 14.0.6 - AndroidAPS - xDrip - This issue is not specific to a browser (Firefox/Safari/Chrome?) or a device (Android phone, etc.) **Additional context** As a workaround I switch the config var SECURE_HSTS_HEADER from true to false. After that is works. Sorry that i cannot give more information as I do not have save the logs. Perhaps you can instruct me how to get them from heroku.</DESCRIPTION>
  <REPONAME>cgm-remote-monitor</REPONAME>
  <TIMEDIFFERENCEDAYS>29</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>* Unified black and color clock layouts * Clock BG data now fully uses precalculated data from backend so data is guaranteed to look the same as main view * Update clock data every 20 seconds * Update clock time every second</MESSAGE>
    <SHA>468abca53aaa37756d33820ecfcbb24ad52c0e26</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix how CSP policy is set for Helmet, fixes #6260</MESSAGE>
      <SHA>616e8339e57963aa4c7741262f6cd16a0d26dc9d</SHA>
      <PATCHEDFILES>
        <FILE>app.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so</MESSAGE>
      <SHA>b762ade017fe261c2b4f54920e3a6b61875e6a9b</SHA>
      <PATCHEDFILES>
        <FILE>app.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>views/index.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so</MESSAGE>
      <SHA>f184d0029e06338523cc35a577563a9290bc3e55</SHA>
      <PATCHEDFILES>
        <FILE>app.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>views/index.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so</MESSAGE>
      <SHA>ace519e148c0c510a4cdfc0c4f05bbba519beb1e</SHA>
      <PATCHEDFILES>
        <FILE>app.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>views/index.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so</MESSAGE>
      <SHA>24c2db4590bbe70cbfa237fa89634e77817cba48</SHA>
      <PATCHEDFILES>
        <FILE>app.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>views/index.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>update (#1) * mgdl -&gt; mg/dl * Release ref update v2 (#5301) * Updated release name and number * Added missing version number * Added missing version number * Fix auth dialog sizing error (#5315) * Fix auth dialog sizing error (#5314) * Fix auth dialog sizing error * Fix Client Init After Auth (cherry picked from commit 1bf416c3bb964ed555850c3fc55977d69980b8e5) * update NS minor version * Bump version to 13.0.2-dev * fix some random test failures (#5341) * fix some random test failures * use typeof to test for existence * Added support for asking delta * Added time reference * Made delta reading more informative * Corrected time reference * Try shortening the response * Revert attempt * Updated templates and documentation * Minor improvement in response when delta is 0 * German translations improved and added (#5360) * Fix Alexa Launch and SessionEnded Requests (#5377) * Fix Alexa Launch Request * Allow LaunchRequest to handle intent if set, change shouldEndSession from string to bool * Fix SessionEndedRequest * Fix #5149 - discord link on CONTRIBUTING.md doesn't do anything (#5380) * Fix #5146 - display of treatment with only Fat and Protein set (#5381) * Basic report page style fixes and updates (#5387) * Add missing Polish translations and improve existing (#5382) * Add missing Polish translations and improve existing * Improve translations * Addressed virtual assistant usage with Authentication Roles (#5388) * Fix #5347 - Addressed auth roles * Unification * Fix timeago alarms (again). The changes to the rendered had an unintended consequence of triggering the timeago detection less frequently, causing the code to think the client has been hibernating, thus suppressing the alarms. The update changes the clock to be updated more frequently (this updating the hibernation detection), fixing the issue * Remove the server side test * Fix Graph Display Without Recent Devicestatus (#5409) * Update Russian (#5415) Corrected major and minor misprints and mistakes - particularly in variables, new translations added * Add server teardown ability (#5410) * adding teardown event to ctx.bus * adding teardown support for mmconnect and bridge plugins * Additional German Translations and corrections (#5405) * Cleaned up changed translations * Added Virtual Assistant Translations * Fix #5188 - move predictions to bundle and don't render chart on predictions offset change (#5395) * Fix #5188 - move predictions to bundle and don't render chart on predictions offset change * Fix predictions show for day to day * Move toolbar and authentication status to partial and include on each page (#5393) * Move authentication status to partial and include on each page * Move toolbar to partial Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Virtual assistant code simplification (#5400) * Moved duplicate plugin code to single location, and small improvements * Defined _each() * Pr/5379 (#5441) * Release 13.0.1 (#5329) * Release ref update v2 (#5301) * Updated release name and number * Added missing version number * Added missing version number * Fix auth dialog sizing error (#5315) * Fix auth dialog sizing error (#5314) * Fix auth dialog sizing error * Fix Client Init After Auth (cherry picked from commit 1bf416c3bb964ed555850c3fc55977d69980b8e5) * update NS minor version * Added handlers and translations for CGM info * Defined translate() * Fixed sensor state reference * Improved wording for tx age response * Improved wording for session duration response * Updated documentation and templates * Updated README.md TOC and a reference to it * Added CGM battery info * Added unit reference to CGM battery levels * Added handlers and translations for CGM info * Defined translate() * Fixed sensor state reference * Improved wording for tx age response * Improved wording for session duration response * Updated documentation and templates * Updated README.md TOC and a reference to it * Added CGM battery info * Added unit reference to CGM battery levels * Updated API reference in Google Home template Co-authored-by: Caleb &lt;inventor96@users.noreply.github.com&gt; * Volunteer for Polish translations (#5396) * Api3 output renderers (#5425) * APIv3: adding framework for various output renderers * APIv3: adding xml output renderer * APIv3: adding csv output renderer * APIv3: documenting supported output renderers * APIv3: testing output renderers * Restore glucose distribution test (#5434) * Increase coverage of tests on units utility and clean up timeago test (#5435) * Increase coverage of tests on units utility * clean up timeago test * Refactor to encapsulate duplicated settings logic (#5426) * Encapsulate duplicate settings checks inside functions * Simplify settings::isAlarmEventEnabled() * Send coverage reports to Codacy (#5444) * Send coverage reports to Codacy * Action secrets may not be read from forks :( * Let's see if this fixes the path &amp; key passing * Ok one more try for the Actions env * Run tests and coverage separately * Try increasing the admintools test runtime for Node 10 * Run tests only once * Resolve unnecessary uses of eslint-ignore (#5436) * Resolve unnecessary disabling of no-undef eslint rule * Resolve unnecessary disabling of no-prototype-builtins eslint rule * Resolve unnecessary disabling of no-unused-vars eslint rule * Resolve unnecessary disabling of no-empty eslint rule * Fix eslint errors and add npm script for eslint (#5427) * re-enable auth check for device status routes * Resolve eslint errors * Add npm script for eslint * Correct regex for express extension middleware and add tests for expected behaviour * Resolve lint error in virtual assistant base * Update index.js * Update index.js * Remove redundant checks on entry ID (#5440) * Run CI Action for Pull Requests * Update DayToDay report for Loop Overrides (#5452) Add Loop override name/reason as text to the grey bar at the top of the graph. * Fix earlier merge error with predictions having moved to the report bundle * fix brushing loop (#5499) * Update README.md (#5480) Clarified that the &quot;bridge&quot; plugin is for Dexcom Share (&quot;Dexcom&quot; didn't appear at all in the read me), fixed a few typos, and added line 444 about the BRIDGE_SERVER variable. * Added period of days into headline of glucose distribution and percen… (#5428) * Added period of days into headline of glucose distribution and percentil chart report I make screencopies of the glucose distribution and percential chart report for my diabtes consultant and had to manually add the period of days to the report everytime because it was not shown in the report itself. I added the period of days this with a small number of lines of code and think this is helpful for other too. * removed comments as requested removed comments as requested * Camelcase for new variables reportPlugins, firstDay, lastDay, countDays * forget to save the change of reportPlugins in percentile.js * Move app caching to a service worker (#5504) * Move app caching to a webworker * Code cleanup * Code cleanup * Make Codacy happy * More parentheses * Added indexes to 'entries' and 'treatments' along with other updates (#5463) * Added compound indexes for treatments and entries collections. Updated ensureIndex to createIndex in mongo-strage.js as ensureIndex has been deprecated. Finally, updated testing/populate.js to be compatible with more recent versions of the node driver, as well as fixing a path issue. * Fixed missing end quote in lib/server/treatments.js. Changed all newly added double quotes to single quote to match style guide. * Removed indexes that referenced key600. * Fix: Round interporlated mg/dL value to an integer * Plugin to show database size (% of available space or in MiB) (#5496) * Database size plugin - pill that displays current mongoDB database size * Enabled dbsize by default * Fixed bug with dbsize not shownig when size is (rounded) 0% but real bytes &gt; 0 * Cleanup &amp; update to iconfont generation manual * Changed how warning/urgent levels are configured - from absolute MiB to percentage of DBSIZE_MAX * Trying to fix random fail of APIv3 tests (#5519) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * client - mobile - Axis label font is scaled on small screens (#5512) On phones or other small screens, the axis labels (especially x axis) were previously an unreadable jumble of too-close letters * Split view (#5518) * Adds a 2, 3, 4 and 8 way split view option * Updated description * Generate the table on demand, so any number of sites from 1 to 8 generates a sensible layout * Update readme &amp; don't crash if a name is missing * Allow flagging specific settings to be not exposed the /properties and /status APIs (#5525) * Add more variables to the special list * [DEV][FIX] Fix dbsize plugin to make it hideable again (#5529) * [FIX] Making dbsize plugin default but hideable - removed its forced show state * Removed unused lodash dependency * Removed duplicate if statement (#5531) Removed the additional if statement checking for the loop specific developer team id. This since the exact same if statement existed just above it. * Update Dutch translations (#5532) * Fix settings test * Update version to 13.1.0 * Fix topbar collapse on small screens (#5562) * Fix top bar collapsing on small screens * Fix wide button array overflowing the button bar * Option to switch off bolus amount outputs (#5522) * Option to switch off bolus amount outputs (#5514) * Fixing issue with carb value not be output when set to &quot;none&quot; (#5514) * Adding additional output options (#5514) * Adding environment variable option for 'x U and Over' option. This option is BOLUS_RENDER_OVER with a default value of 1 and the value can be an integer or a float, e.g. 0.3, 1.5, 2, etc... * Adding change to change the font size depending on the bolus value. * Merge two &quot;all&quot; options to create an option that displays as SMB had. * Fix d3 portrait to landscape brush failure (#5638) * fix d3 portrait to landscape brush failure * fix client.renderer.test for highlighBrushPoints function prototype change * fix highlightBrush * move brush reset inside check for valid brush * Sanitize data from manual careportal entries so only fields with actual data are sent to the server (#5619) * do not redirect to profile editor by default (#5671) In a default configuration, there is no treatment data. The code to redirect the UI to the profile editor is buried deep within the chart rendering code for basals. This plugin is only supposed to go into action when enabled via ENABLE=basal. This commit fixes first-use experience for the default configuration intended to draw real-time CGM traces and no basal information is expected. Since no basal information is expected unless plugin is enabled via ENABLE=basal, this allows skipping instead of redirecting to the profile editor. * Fix Issue #5486 - Device Status Days Feature (#5651) * Device Status Days Feature * Edits per review from @sulkaharo * Configurable clock views (#5625) * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Update README.md * Update README.md * Configurable clock views * Add remote bolus/carbs + otp entry for loop (#5598) Add a remote bolus entry field for users on Loop, along with support for an OTP field * Sometimes at the very start no profiles provided. (#5591) At the first start the nightscout is crashed if profile not full. * Fixes #4991 - Now selects basal profile based day by day (#5572) * Test profile settings * NPM Version change * Use console log * Use console log for client * Use console log for client.sbx * Use console log for client.ddata * Use console log for client again * revert * Added multi-profile reporting capabilities Co-authored-by: VIS TFS Admin &lt;liveid@visualsolution.co.uk&gt; * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * hotfix attempt 2 - carelink 2020 sso updates * hotfix 3 - attempt 3 at carelink 2020 sso updates * attempt 4 at hotfix for nightscout Based on more reliable version of minimed-connect-to-nightscout.... This is testing the hotfix. When it works, we will bump this one more time with the newly released version. * hotfix 5 - incorporates latest axios changes * Fix for boluscalc issue (#5729) Boluscalc fix &amp; remove integer validation from BG input field * npm install --save minimed-connect-to-nightscout@^1.4.0 * Change DISPLAY_UNITS to use readENV's default value and added several tests for DISPLAY_UNITS (#5708) readENV() was hard coding the default value of DISPLAY_UNITS, and ignoring the default value for no particular reason. Fixed that. Also, I added a full test suite for DISPLAY_UNITS environment settings to make sure that it works as intended. Finally, I've added the console log for the DISPLAY_UNITS since there's no particular reason why we log that setting and not others. * Fix audit errors, button order (#5694) * * Update packages giving npm audit errors * Fix Mongo test that broke after update (now uses async/await on getting the connection) * Restore original navigation bar button order * Disable Node 10 tests * Fix temporary target cancellation * Added documentation on the use of Alpha Testing (#5784) * Wip/bewest/mmconnect eu (#5731) * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * hotfix attempt 2 - carelink 2020 sso updates * hotfix 3 - attempt 3 at carelink 2020 sso updates * attempt 4 at hotfix for nightscout Based on more reliable version of minimed-connect-to-nightscout.... This is testing the hotfix. When it works, we will bump this one more time with the newly released version. Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * * Updated several packages to remove issues from NPM audit * Fix excess logging in settings.js * Removed heapdump package, which was causing issues for some users * * Limit the default number of profiles returned by the API to fix issues with users who are syncing a large amount of profiles from an APS. * Fix profile reporting * Upgrade Helmet to 4.0.0 * CSP and service worker improvements (#5856) * Add connectSrc for Safari compatibiity * Add new font URL for Google Fonts compatibility * Reload on re-registering the worker * Change Mongo version in github to fix builds * Serve the CSP to everyone * Split view CSP support (#5864) * Parse split view frames into frameAncestors * Re-enable CSP configuration (#5867) * Re-enable CSP configuration * Bump share2nightscout-bridge plugin Use latest update from share2nightscout bridge to make things easier. It contains an updated default for OUS users. * feat Add robots.txt to disallow site crawling * Fix dbsize for usage with Atlas (#5962) * Openaps performance improvement (#5945) * improve openaps plugin performance * more performance improvements (cherry picked from commit 076a2dd3b69093149994258eb0244ae61d68f44e) * correct setting notEnacted variable * remove unnecessary debug logging * Adapt to MongoDB Atlas (#5893) * Fix Issue #5763 - Change $.ajax to /api/v1/profile (#5704) * Bug fixes for Service Worker (#5970) * Fix service worker refresh for Firefox * Improve logging for service worker initialisation * Skip browser cache for service worker precaching * Prevent `Partial Content` responses in `fetch` by stripping `Range` header * Prevent calling `filter` on an undefined property when service worker cache is empty * Bug fixes for Service Worker * Fixes https://github.com/nightscout/cgm-remote-monitor/issues/5920 * Fixes https://github.com/nightscout/cgm-remote-monitor/issues/5943 * Update service-worker.js Removed the MP3 files from the preload to fix issues with webkit-based browsers Co-authored-by: p5nbTgip0r &lt;cb3f02c5@opayq.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Optimize Nightscout database usage (#5947) * On periodic polls, only load delta for CGM data, treatments and device statuses * Serve basic CGM data API queries from in-memory cache. Increases the Nightscout memory footprint but should significantly reduce the Mongo load * Serve device status, CGM and treatment records from memory cache * Support count parameter in /profile * Bumping version to 14.0.0 given this is a relatively large update and we want people on Atlas to all migrate to this version * Remove logging statements * fix brushing recursion * Normalize treatments to support absolute doses from the amount field * Add Loop Carbs foodType, absorptionTime to Reports for ISSUE #5701 (#5702) * add carb foodType, absorptionTime to reports * Update README to point to new docs * Fix `Treatments` report for `mmol/L` users Fixed a typo to a client function name * Bump version to 14.0.1 * Bump dev to 14.0.2 * Serve Last-Modified header for the service worker to help with some browsers misdetecting caching * Cleaned old appcache references * * Remove unnecessary logging to help with Papertrail limits * Load more treatments and entries to fix caching issues (need to add better cache invalidation to really fix this) * When merging inserts and updates from the database, ensure we always use the new data over the old data * Bump treatment delta loading to four hours * One more increase to treatment load time to cover long overrides * * Bump version to 14.0.3 * Fix a bug in the REST API query for profiles * Bumped up the number of treatments loaded / day for reporting * Fix reports unit test * Bump treatments default limit default to 1000 objects for queries that include other query parameters * * Require created_at for Treatments on insert * Refactoring the cache: moved to another file and support flushing from bus events * Add support for CGM data and device statuses. Refactor dataloader to use the new model and reduce queries back down * Fix data order for REST API * * Add cache update events to websocket API * Remove the validation for created_at in REST API ;( * Remove excess logging * Bump version to .4 * Bump version to 14.0.5 and fix #6050 * Fix Pebble API detecting mmol units from settings * Make settings parsing whitespace tolerant * * Fix security test * Change boot and caching to expose Mongo connection errors * Don't report an error on every reconnect * Less intimidating error page on start, which also checks for api_secret * Add file missing from last commit * Fix tests * Remove require statement breaking deploys * Update --feature-request--.md * Update --bug-report.md * Update --individual-troubleshooting-help.md * Fix memory leak and cache update issues in 14.0.4 (#6133) * Fix a memory leak in 14.0.4 * Fix linter error in ddata.js * Move data retention periods to caching * Update _id of inserted entries and device status so merging to cache works correctly * Reset the data in ddata before updating * Fix typo on entry cache retention period * Have device status cache retention period follow configuration * Fix _id injection in treatments * Add error cat to error page * Fix MONGODB_URI reference in error message * Bump version to 14.0.6 * Support uploading device statuses in batches (#6147) * Support uploading device statuses in batches * Correctly report batch insertion results * Make empty cache detection a bit more aggressive to account for cache flush and data insert happening concurrently * * Bump version to 14.0.7 * Add onerror handler for pushover * Update README.md Explicitly link to the application template in Github * Fixed #5852 - Updated Google Home setup steps (#6195) * Fix broken swagger for APIv3 (#6201) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; * Use lodash.get() in virtual assistant API endpoints (v2) (#6199) * Fixed #5632 - Improved value resolution * More value resolution improvements * Fixed a couple object paths * Corrected setup of `dbsize` for virtual assistants (#6270) * Corrected db size config for virtual assistants * Language fix, improvements, added dbsize to virtAsst config * Using env * Added logging * Debug logging * Different logging * More troubleshooting * Another try * Reverted stuff, added dbsize to server defaults * Fixed test * Fixed another test * Create config.yml * Delete --individual-troubleshooting-help.md * Update config.yml * Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so * Adding Hungarian translation to nightscout (#6037) * Finished first round of translation for Hungarian language * Added hungarian language to the readme file * Fixes * WIP * Typo fixes and changes to translations * Update language.js Fixed some mistyped language keys Co-authored-by: Andy Feher &lt;andras.feher@smildonis.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Update language.js (#6193) Isfjell -&gt; Istapp Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * #5991 Typo in translation (#6217) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * add missing translations (#6346) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Updated Alexa's intents because Amazon required new ones yet again. (#6457) * Add runtime state tracking to Nightscout, where client now checks if the server has loaded initial data from Mongo before the user is directed to the UI * Add file missing from previous commit * Update app.json * Fix unit tests * Fix the read detection to work correctly with MongoDB Atlas * * Added basal and careportal to default plugins * Changed report BG target to allow fractional numbers * Increase load interval to 5 seconds * Create codeql-analysis.yml Co-authored-by: AdrianLxM &lt;AdrianLxM@users.noreply.github.com&gt; Co-authored-by: Caleb &lt;inventor96@users.noreply.github.com&gt; Co-authored-by: inventor96 &lt;inventor96@gmail.com&gt; Co-authored-by: Jeremy Cunningham &lt;34543464+jpcunningh@users.noreply.github.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; Co-authored-by: Tanja &lt;7403966+tanja3981@users.noreply.github.com&gt; Co-authored-by: Bartłomiej Szubert &lt;bartlomiejszubert@gmail.com&gt; Co-authored-by: Andrew Dixon &lt;andrew@andrewdixon.co.uk&gt; Co-authored-by: fedor apanasenko &lt;apanasef@gmail.com&gt; Co-authored-by: Petr Ondrusek &lt;34578008+PetrOndrusek@users.noreply.github.com&gt; Co-authored-by: Lukas Herzog &lt;mail@lukasherzog.de&gt; Co-authored-by: Jakob &lt;jakobsandberg95@gmail.com&gt; Co-authored-by: jonfawcett &lt;38429455+jonfawcett@users.noreply.github.com&gt; Co-authored-by: Jonas Hummelstrand &lt;jonas@hummelstrand.com&gt; Co-authored-by: peterleimbach &lt;peterleimbach@icloud.com&gt; Co-authored-by: Adam Harrison &lt;adamaharrison@gmail.com&gt; Co-authored-by: Dominik Dzienia &lt;dlvoy@users.noreply.github.com&gt; Co-authored-by: stephencmorton &lt;17858976+stephencmorton@users.noreply.github.com&gt; Co-authored-by: Simon Persson &lt;simon@akep.se&gt; Co-authored-by: Cas Eliëns &lt;cas.eliens@isaac.nl&gt; Co-authored-by: Ben West &lt;bewest@gmail.com&gt; Co-authored-by: Matthew &lt;mtfoley.mae@gmail.com&gt; Co-authored-by: ireneusz-ptak &lt;31506973+ireneusz-ptak@users.noreply.github.com&gt; Co-authored-by: josep1972 &lt;joseangelparedesd@gmail.com&gt; Co-authored-by: Bluefox &lt;dogafox@gmail.com&gt; Co-authored-by: fromorbonia &lt;3193811+fromorbonia@users.noreply.github.com&gt; Co-authored-by: VIS TFS Admin &lt;liveid@visualsolution.co.uk&gt; Co-authored-by: joracine &lt;joracine@users.noreply.github.com&gt; Co-authored-by: Alexandre Viau &lt;alexandre@alexandreviau.net&gt; Co-authored-by: Lennart Goedhart &lt;lennart@omnibase.com.au&gt; Co-authored-by: p5nbTgip0r &lt;cb3f02c5@opayq.com&gt; Co-authored-by: Jeremy Cunningham &lt;jpcunningh@gmail.com&gt; Co-authored-by: kskandispersonal &lt;kskandis@live.com&gt; Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; Co-authored-by: Andras Feher &lt;56167205+andrasfeher-smilodonis@users.noreply.github.com&gt; Co-authored-by: Andy Feher &lt;andras.feher@smildonis.com&gt; Co-authored-by: bjornoleh &lt;63544115+bjornoleh@users.noreply.github.com&gt; Co-authored-by: Matt Gaide &lt;mgaide@salesforce.com&gt; Co-authored-by: Lukas Herzog &lt;git@lukasherzog.de&gt;</MESSAGE>
      <SHA>03f480b9adaba916274299012b14f5b9ed9b3885</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/--bug-report.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--feature-request--.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--individual-troubleshooting-help.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/config.yml</FILE>
        <FILE>.github/workflows/codeql-analysis.yml</FILE>
        <FILE>.github/workflows/main.yml</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>app.json</FILE>
        <FILE>assets/fonts/Nightscout Plugin Icons.json</FILE>
        <FILE>assets/fonts/README.md</FILE>
        <FILE>azuredeploy.json</FILE>
        <FILE>bundle/bundle.reports.source.js</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>ci.test.env</FILE>
        <FILE>docs/plugins/add-virtual-assistant-support-to-plugin.md</FILE>
        <FILE>docs/plugins/alexa-plugin.md</FILE>
        <FILE>docs/plugins/alexa-templates/en-us.json</FILE>
        <FILE>docs/plugins/google-home-templates/en-us.zip</FILE>
        <FILE>docs/plugins/googlehome-plugin.md</FILE>
        <FILE>docs/plugins/interacting-with-virtual-assistants.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/api/activity/index.js</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/devicestatus/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/googlehome/index.js</FILE>
        <FILE>lib/api/profile/index.js</FILE>
        <FILE>lib/api/properties.js</FILE>
        <FILE>lib/api/status.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/api3/const.json</FILE>
        <FILE>lib/api3/doc/formats.md</FILE>
        <FILE>lib/api3/doc/tutorial.md</FILE>
        <FILE>lib/api3/generic/create/insert.js</FILE>
        <FILE>lib/api3/generic/history/operation.js</FILE>
        <FILE>lib/api3/generic/read/operation.js</FILE>
        <FILE>lib/api3/generic/search/operation.js</FILE>
        <FILE>lib/api3/generic/update/replace.js</FILE>
        <FILE>lib/api3/index.js</FILE>
        <FILE>lib/api3/shared/renderer.js</FILE>
        <FILE>lib/api3/swagger.js</FILE>
        <FILE>lib/api3/swagger.json</FILE>
        <FILE>lib/api3/swagger.yaml</FILE>
        <FILE>lib/authorization/index.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/bus.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/browser-utils.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/client/d3locales.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/constants.json</FILE>
        <FILE>lib/data/calcdelta.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/data/ddata.js</FILE>
        <FILE>lib/data/treatmenttocurve.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/middleware/express-extension-to-accept.js</FILE>
        <FILE>lib/middleware/index.js</FILE>
        <FILE>lib/notifications.js</FILE>
        <FILE>lib/plugins/alexa.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bridge.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/dbsize.js</FILE>
        <FILE>lib/plugins/googlehome.js</FILE>
        <FILE>lib/plugins/index.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/mmconnect.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/pushover.js</FILE>
        <FILE>lib/plugins/rawbg.js</FILE>
        <FILE>lib/plugins/runtimestate.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/plugins/timeago.js</FILE>
        <FILE>lib/plugins/upbat.js</FILE>
        <FILE>lib/plugins/virtAsstBase.js</FILE>
        <FILE>lib/plugins/xdripjs.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report/predictions.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/loopalyzer.js</FILE>
        <FILE>lib/report_plugins/percentile.js</FILE>
        <FILE>lib/report_plugins/profiles.js</FILE>
        <FILE>lib/report_plugins/treatments.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/server/booterror.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/server/cache.js</FILE>
        <FILE>lib/server/clocks.js</FILE>
        <FILE>lib/server/devicestatus.js</FILE>
        <FILE>lib/server/entries.js</FILE>
        <FILE>lib/server/loop.js</FILE>
        <FILE>lib/server/pebble.js</FILE>
        <FILE>lib/server/profile.js</FILE>
        <FILE>lib/server/treatments.js</FILE>
        <FILE>lib/server/websocket.js</FILE>
        <FILE>lib/settings.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>server.js</FILE>
        <FILE>static/css/drawer.css</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/css/report.css</FILE>
        <FILE>static/css/translations.css</FILE>
        <FILE>static/images/errorcat.jpg</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/report/js/predictions.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>swagger.json</FILE>
        <FILE>swagger.yaml</FILE>
        <FILE>test</FILE>
        <FILE>testing/populate.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.alexa.test.js</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/api3.basic.test.js</FILE>
        <FILE>tests/api3.create.test.js</FILE>
        <FILE>tests/api3.delete.test.js</FILE>
        <FILE>tests/api3.generic.workflow.test.js</FILE>
        <FILE>tests/api3.patch.test.js</FILE>
        <FILE>tests/api3.read.test.js</FILE>
        <FILE>tests/api3.renderer.test.js</FILE>
        <FILE>tests/api3.search.test.js</FILE>
        <FILE>tests/api3.security.test.js</FILE>
        <FILE>tests/api3.socket.test.js</FILE>
        <FILE>tests/api3.update.test.js</FILE>
        <FILE>tests/client.renderer.test.js</FILE>
        <FILE>tests/dbsize.test.js</FILE>
        <FILE>tests/env.test.js</FILE>
        <FILE>tests/expressextensions.test.js</FILE>
        <FILE>tests/fixtures/default-server-settings.js</FILE>
        <FILE>tests/mongo-storage.test.js</FILE>
        <FILE>tests/profile.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/security.test.js</FILE>
        <FILE>tests/settings.test.js</FILE>
        <FILE>tests/timeago.test.js</FILE>
        <FILE>tests/units.test.js</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/clockviews/bgclock.css</FILE>
        <FILE>views/clockviews/clock-color.css</FILE>
        <FILE>views/clockviews/clock-config.css</FILE>
        <FILE>views/clockviews/clock-config.html</FILE>
        <FILE>views/clockviews/clock-shared.css</FILE>
        <FILE>views/clockviews/clock.css</FILE>
        <FILE>views/clockviews/clock.html</FILE>
        <FILE>views/error.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/frame.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/nightscout.appcache</FILE>
        <FILE>views/partials/authentication-status.ejs</FILE>
        <FILE>views/partials/toolbar.ejs</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/service-worker.js</FILE>
        <FILE>views/translationsindex.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>update nightscout (#1) * mgdl -&gt; mg/dl * Release ref update v2 (#5301) * Updated release name and number * Added missing version number * Added missing version number * Fix auth dialog sizing error (#5315) * Fix auth dialog sizing error (#5314) * Fix auth dialog sizing error * Fix Client Init After Auth (cherry picked from commit 1bf416c3bb964ed555850c3fc55977d69980b8e5) * update NS minor version * Bump version to 13.0.2-dev * fix some random test failures (#5341) * fix some random test failures * use typeof to test for existence * Added support for asking delta * Added time reference * Made delta reading more informative * Corrected time reference * Try shortening the response * Revert attempt * Updated templates and documentation * Minor improvement in response when delta is 0 * German translations improved and added (#5360) * Fix Alexa Launch and SessionEnded Requests (#5377) * Fix Alexa Launch Request * Allow LaunchRequest to handle intent if set, change shouldEndSession from string to bool * Fix SessionEndedRequest * Fix #5149 - discord link on CONTRIBUTING.md doesn't do anything (#5380) * Fix #5146 - display of treatment with only Fat and Protein set (#5381) * Basic report page style fixes and updates (#5387) * Add missing Polish translations and improve existing (#5382) * Add missing Polish translations and improve existing * Improve translations * Addressed virtual assistant usage with Authentication Roles (#5388) * Fix #5347 - Addressed auth roles * Unification * Fix timeago alarms (again). The changes to the rendered had an unintended consequence of triggering the timeago detection less frequently, causing the code to think the client has been hibernating, thus suppressing the alarms. The update changes the clock to be updated more frequently (this updating the hibernation detection), fixing the issue * Remove the server side test * Fix Graph Display Without Recent Devicestatus (#5409) * Update Russian (#5415) Corrected major and minor misprints and mistakes - particularly in variables, new translations added * Add server teardown ability (#5410) * adding teardown event to ctx.bus * adding teardown support for mmconnect and bridge plugins * Additional German Translations and corrections (#5405) * Cleaned up changed translations * Added Virtual Assistant Translations * Fix #5188 - move predictions to bundle and don't render chart on predictions offset change (#5395) * Fix #5188 - move predictions to bundle and don't render chart on predictions offset change * Fix predictions show for day to day * Move toolbar and authentication status to partial and include on each page (#5393) * Move authentication status to partial and include on each page * Move toolbar to partial Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Virtual assistant code simplification (#5400) * Moved duplicate plugin code to single location, and small improvements * Defined _each() * Pr/5379 (#5441) * Release 13.0.1 (#5329) * Release ref update v2 (#5301) * Updated release name and number * Added missing version number * Added missing version number * Fix auth dialog sizing error (#5315) * Fix auth dialog sizing error (#5314) * Fix auth dialog sizing error * Fix Client Init After Auth (cherry picked from commit 1bf416c3bb964ed555850c3fc55977d69980b8e5) * update NS minor version * Added handlers and translations for CGM info * Defined translate() * Fixed sensor state reference * Improved wording for tx age response * Improved wording for session duration response * Updated documentation and templates * Updated README.md TOC and a reference to it * Added CGM battery info * Added unit reference to CGM battery levels * Added handlers and translations for CGM info * Defined translate() * Fixed sensor state reference * Improved wording for tx age response * Improved wording for session duration response * Updated documentation and templates * Updated README.md TOC and a reference to it * Added CGM battery info * Added unit reference to CGM battery levels * Updated API reference in Google Home template Co-authored-by: Caleb &lt;inventor96@users.noreply.github.com&gt; * Volunteer for Polish translations (#5396) * Api3 output renderers (#5425) * APIv3: adding framework for various output renderers * APIv3: adding xml output renderer * APIv3: adding csv output renderer * APIv3: documenting supported output renderers * APIv3: testing output renderers * Restore glucose distribution test (#5434) * Increase coverage of tests on units utility and clean up timeago test (#5435) * Increase coverage of tests on units utility * clean up timeago test * Refactor to encapsulate duplicated settings logic (#5426) * Encapsulate duplicate settings checks inside functions * Simplify settings::isAlarmEventEnabled() * Send coverage reports to Codacy (#5444) * Send coverage reports to Codacy * Action secrets may not be read from forks :( * Let's see if this fixes the path &amp; key passing * Ok one more try for the Actions env * Run tests and coverage separately * Try increasing the admintools test runtime for Node 10 * Run tests only once * Resolve unnecessary uses of eslint-ignore (#5436) * Resolve unnecessary disabling of no-undef eslint rule * Resolve unnecessary disabling of no-prototype-builtins eslint rule * Resolve unnecessary disabling of no-unused-vars eslint rule * Resolve unnecessary disabling of no-empty eslint rule * Fix eslint errors and add npm script for eslint (#5427) * re-enable auth check for device status routes * Resolve eslint errors * Add npm script for eslint * Correct regex for express extension middleware and add tests for expected behaviour * Resolve lint error in virtual assistant base * Update index.js * Update index.js * Remove redundant checks on entry ID (#5440) * Run CI Action for Pull Requests * Update DayToDay report for Loop Overrides (#5452) Add Loop override name/reason as text to the grey bar at the top of the graph. * Fix earlier merge error with predictions having moved to the report bundle * fix brushing loop (#5499) * Update README.md (#5480) Clarified that the &quot;bridge&quot; plugin is for Dexcom Share (&quot;Dexcom&quot; didn't appear at all in the read me), fixed a few typos, and added line 444 about the BRIDGE_SERVER variable. * Added period of days into headline of glucose distribution and percen… (#5428) * Added period of days into headline of glucose distribution and percentil chart report I make screencopies of the glucose distribution and percential chart report for my diabtes consultant and had to manually add the period of days to the report everytime because it was not shown in the report itself. I added the period of days this with a small number of lines of code and think this is helpful for other too. * removed comments as requested removed comments as requested * Camelcase for new variables reportPlugins, firstDay, lastDay, countDays * forget to save the change of reportPlugins in percentile.js * Move app caching to a service worker (#5504) * Move app caching to a webworker * Code cleanup * Code cleanup * Make Codacy happy * More parentheses * Added indexes to 'entries' and 'treatments' along with other updates (#5463) * Added compound indexes for treatments and entries collections. Updated ensureIndex to createIndex in mongo-strage.js as ensureIndex has been deprecated. Finally, updated testing/populate.js to be compatible with more recent versions of the node driver, as well as fixing a path issue. * Fixed missing end quote in lib/server/treatments.js. Changed all newly added double quotes to single quote to match style guide. * Removed indexes that referenced key600. * Fix: Round interporlated mg/dL value to an integer * Plugin to show database size (% of available space or in MiB) (#5496) * Database size plugin - pill that displays current mongoDB database size * Enabled dbsize by default * Fixed bug with dbsize not shownig when size is (rounded) 0% but real bytes &gt; 0 * Cleanup &amp; update to iconfont generation manual * Changed how warning/urgent levels are configured - from absolute MiB to percentage of DBSIZE_MAX * Trying to fix random fail of APIv3 tests (#5519) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * client - mobile - Axis label font is scaled on small screens (#5512) On phones or other small screens, the axis labels (especially x axis) were previously an unreadable jumble of too-close letters * Split view (#5518) * Adds a 2, 3, 4 and 8 way split view option * Updated description * Generate the table on demand, so any number of sites from 1 to 8 generates a sensible layout * Update readme &amp; don't crash if a name is missing * Allow flagging specific settings to be not exposed the /properties and /status APIs (#5525) * Add more variables to the special list * [DEV][FIX] Fix dbsize plugin to make it hideable again (#5529) * [FIX] Making dbsize plugin default but hideable - removed its forced show state * Removed unused lodash dependency * Removed duplicate if statement (#5531) Removed the additional if statement checking for the loop specific developer team id. This since the exact same if statement existed just above it. * Update Dutch translations (#5532) * Fix settings test * Update version to 13.1.0 * Fix topbar collapse on small screens (#5562) * Fix top bar collapsing on small screens * Fix wide button array overflowing the button bar * Option to switch off bolus amount outputs (#5522) * Option to switch off bolus amount outputs (#5514) * Fixing issue with carb value not be output when set to &quot;none&quot; (#5514) * Adding additional output options (#5514) * Adding environment variable option for 'x U and Over' option. This option is BOLUS_RENDER_OVER with a default value of 1 and the value can be an integer or a float, e.g. 0.3, 1.5, 2, etc... * Adding change to change the font size depending on the bolus value. * Merge two &quot;all&quot; options to create an option that displays as SMB had. * Fix d3 portrait to landscape brush failure (#5638) * fix d3 portrait to landscape brush failure * fix client.renderer.test for highlighBrushPoints function prototype change * fix highlightBrush * move brush reset inside check for valid brush * Sanitize data from manual careportal entries so only fields with actual data are sent to the server (#5619) * do not redirect to profile editor by default (#5671) In a default configuration, there is no treatment data. The code to redirect the UI to the profile editor is buried deep within the chart rendering code for basals. This plugin is only supposed to go into action when enabled via ENABLE=basal. This commit fixes first-use experience for the default configuration intended to draw real-time CGM traces and no basal information is expected. Since no basal information is expected unless plugin is enabled via ENABLE=basal, this allows skipping instead of redirecting to the profile editor. * Fix Issue #5486 - Device Status Days Feature (#5651) * Device Status Days Feature * Edits per review from @sulkaharo * Configurable clock views (#5625) * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Configurable clock views * Update README.md * Update README.md * Configurable clock views * Add remote bolus/carbs + otp entry for loop (#5598) Add a remote bolus entry field for users on Loop, along with support for an OTP field * Sometimes at the very start no profiles provided. (#5591) At the first start the nightscout is crashed if profile not full. * Fixes #4991 - Now selects basal profile based day by day (#5572) * Test profile settings * NPM Version change * Use console log * Use console log for client * Use console log for client.sbx * Use console log for client.ddata * Use console log for client again * revert * Added multi-profile reporting capabilities Co-authored-by: VIS TFS Admin &lt;liveid@visualsolution.co.uk&gt; * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * hotfix attempt 2 - carelink 2020 sso updates * hotfix 3 - attempt 3 at carelink 2020 sso updates * attempt 4 at hotfix for nightscout Based on more reliable version of minimed-connect-to-nightscout.... This is testing the hotfix. When it works, we will bump this one more time with the newly released version. * hotfix 5 - incorporates latest axios changes * Fix for boluscalc issue (#5729) Boluscalc fix &amp; remove integer validation from BG input field * npm install --save minimed-connect-to-nightscout@^1.4.0 * Change DISPLAY_UNITS to use readENV's default value and added several tests for DISPLAY_UNITS (#5708) readENV() was hard coding the default value of DISPLAY_UNITS, and ignoring the default value for no particular reason. Fixed that. Also, I added a full test suite for DISPLAY_UNITS environment settings to make sure that it works as intended. Finally, I've added the console log for the DISPLAY_UNITS since there's no particular reason why we log that setting and not others. * Fix audit errors, button order (#5694) * * Update packages giving npm audit errors * Fix Mongo test that broke after update (now uses async/await on getting the connection) * Restore original navigation bar button order * Disable Node 10 tests * Fix temporary target cancellation * Added documentation on the use of Alpha Testing (#5784) * Wip/bewest/mmconnect eu (#5731) * prepare hotfix for MMConnect/EU - 2020-06-28 Prepare to handle issue #5719. This patch adjusts dependencies to target a community edition fork of minimed-connect-to-nightscout. The new dependency targets information provided to begin addressing changes to Medtronic Carelink services starting late June 2020. * bump pointing at right tag * hotfix attempt 2 - carelink 2020 sso updates * hotfix 3 - attempt 3 at carelink 2020 sso updates * attempt 4 at hotfix for nightscout Based on more reliable version of minimed-connect-to-nightscout.... This is testing the hotfix. When it works, we will bump this one more time with the newly released version. Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * * Updated several packages to remove issues from NPM audit * Fix excess logging in settings.js * Removed heapdump package, which was causing issues for some users * * Limit the default number of profiles returned by the API to fix issues with users who are syncing a large amount of profiles from an APS. * Fix profile reporting * Upgrade Helmet to 4.0.0 * CSP and service worker improvements (#5856) * Add connectSrc for Safari compatibiity * Add new font URL for Google Fonts compatibility * Reload on re-registering the worker * Change Mongo version in github to fix builds * Serve the CSP to everyone * Split view CSP support (#5864) * Parse split view frames into frameAncestors * Re-enable CSP configuration (#5867) * Re-enable CSP configuration * Bump share2nightscout-bridge plugin Use latest update from share2nightscout bridge to make things easier. It contains an updated default for OUS users. * feat Add robots.txt to disallow site crawling * Fix dbsize for usage with Atlas (#5962) * Openaps performance improvement (#5945) * improve openaps plugin performance * more performance improvements (cherry picked from commit 076a2dd3b69093149994258eb0244ae61d68f44e) * correct setting notEnacted variable * remove unnecessary debug logging * Adapt to MongoDB Atlas (#5893) * Fix Issue #5763 - Change $.ajax to /api/v1/profile (#5704) * Bug fixes for Service Worker (#5970) * Fix service worker refresh for Firefox * Improve logging for service worker initialisation * Skip browser cache for service worker precaching * Prevent `Partial Content` responses in `fetch` by stripping `Range` header * Prevent calling `filter` on an undefined property when service worker cache is empty * Bug fixes for Service Worker * Fixes https://github.com/nightscout/cgm-remote-monitor/issues/5920 * Fixes https://github.com/nightscout/cgm-remote-monitor/issues/5943 * Update service-worker.js Removed the MP3 files from the preload to fix issues with webkit-based browsers Co-authored-by: p5nbTgip0r &lt;cb3f02c5@opayq.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Optimize Nightscout database usage (#5947) * On periodic polls, only load delta for CGM data, treatments and device statuses * Serve basic CGM data API queries from in-memory cache. Increases the Nightscout memory footprint but should significantly reduce the Mongo load * Serve device status, CGM and treatment records from memory cache * Support count parameter in /profile * Bumping version to 14.0.0 given this is a relatively large update and we want people on Atlas to all migrate to this version * Remove logging statements * fix brushing recursion * Normalize treatments to support absolute doses from the amount field * Add Loop Carbs foodType, absorptionTime to Reports for ISSUE #5701 (#5702) * add carb foodType, absorptionTime to reports * Update README to point to new docs * Fix `Treatments` report for `mmol/L` users Fixed a typo to a client function name * Bump version to 14.0.1 * Bump dev to 14.0.2 * Serve Last-Modified header for the service worker to help with some browsers misdetecting caching * Cleaned old appcache references * * Remove unnecessary logging to help with Papertrail limits * Load more treatments and entries to fix caching issues (need to add better cache invalidation to really fix this) * When merging inserts and updates from the database, ensure we always use the new data over the old data * Bump treatment delta loading to four hours * One more increase to treatment load time to cover long overrides * * Bump version to 14.0.3 * Fix a bug in the REST API query for profiles * Bumped up the number of treatments loaded / day for reporting * Fix reports unit test * Bump treatments default limit default to 1000 objects for queries that include other query parameters * * Require created_at for Treatments on insert * Refactoring the cache: moved to another file and support flushing from bus events * Add support for CGM data and device statuses. Refactor dataloader to use the new model and reduce queries back down * Fix data order for REST API * * Add cache update events to websocket API * Remove the validation for created_at in REST API ;( * Remove excess logging * Bump version to .4 * Bump version to 14.0.5 and fix #6050 * Fix Pebble API detecting mmol units from settings * Make settings parsing whitespace tolerant * * Fix security test * Change boot and caching to expose Mongo connection errors * Don't report an error on every reconnect * Less intimidating error page on start, which also checks for api_secret * Add file missing from last commit * Fix tests * Remove require statement breaking deploys * Update --feature-request--.md * Update --bug-report.md * Update --individual-troubleshooting-help.md * Fix memory leak and cache update issues in 14.0.4 (#6133) * Fix a memory leak in 14.0.4 * Fix linter error in ddata.js * Move data retention periods to caching * Update _id of inserted entries and device status so merging to cache works correctly * Reset the data in ddata before updating * Fix typo on entry cache retention period * Have device status cache retention period follow configuration * Fix _id injection in treatments * Add error cat to error page * Fix MONGODB_URI reference in error message * Bump version to 14.0.6 * Support uploading device statuses in batches (#6147) * Support uploading device statuses in batches * Correctly report batch insertion results * Make empty cache detection a bit more aggressive to account for cache flush and data insert happening concurrently * * Bump version to 14.0.7 * Add onerror handler for pushover * Update README.md Explicitly link to the application template in Github * Fixed #5852 - Updated Google Home setup steps (#6195) * Fix broken swagger for APIv3 (#6201) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; * Use lodash.get() in virtual assistant API endpoints (v2) (#6199) * Fixed #5632 - Improved value resolution * More value resolution improvements * Fixed a couple object paths * Corrected setup of `dbsize` for virtual assistants (#6270) * Corrected db size config for virtual assistants * Language fix, improvements, added dbsize to virtAsst config * Using env * Added logging * Debug logging * Different logging * More troubleshooting * Another try * Reverted stuff, added dbsize to server defaults * Fixed test * Fixed another test * Create config.yml * Delete --individual-troubleshooting-help.md * Update config.yml * Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so * Adding Hungarian translation to nightscout (#6037) * Finished first round of translation for Hungarian language * Added hungarian language to the readme file * Fixes * WIP * Typo fixes and changes to translations * Update language.js Fixed some mistyped language keys Co-authored-by: Andy Feher &lt;andras.feher@smildonis.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Update language.js (#6193) Isfjell -&gt; Istapp Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * #5991 Typo in translation (#6217) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * add missing translations (#6346) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Updated Alexa's intents because Amazon required new ones yet again. (#6457) * Add runtime state tracking to Nightscout, where client now checks if the server has loaded initial data from Mongo before the user is directed to the UI * Add file missing from previous commit * Update app.json * Fix unit tests * Fix the read detection to work correctly with MongoDB Atlas * * Added basal and careportal to default plugins * Changed report BG target to allow fractional numbers * Increase load interval to 5 seconds * Create codeql-analysis.yml Co-authored-by: AdrianLxM &lt;AdrianLxM@users.noreply.github.com&gt; Co-authored-by: Caleb &lt;inventor96@users.noreply.github.com&gt; Co-authored-by: inventor96 &lt;inventor96@gmail.com&gt; Co-authored-by: Jeremy Cunningham &lt;34543464+jpcunningh@users.noreply.github.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; Co-authored-by: Tanja &lt;7403966+tanja3981@users.noreply.github.com&gt; Co-authored-by: Bartłomiej Szubert &lt;bartlomiejszubert@gmail.com&gt; Co-authored-by: Andrew Dixon &lt;andrew@andrewdixon.co.uk&gt; Co-authored-by: fedor apanasenko &lt;apanasef@gmail.com&gt; Co-authored-by: Petr Ondrusek &lt;34578008+PetrOndrusek@users.noreply.github.com&gt; Co-authored-by: Lukas Herzog &lt;mail@lukasherzog.de&gt; Co-authored-by: Jakob &lt;jakobsandberg95@gmail.com&gt; Co-authored-by: jonfawcett &lt;38429455+jonfawcett@users.noreply.github.com&gt; Co-authored-by: Jonas Hummelstrand &lt;jonas@hummelstrand.com&gt; Co-authored-by: peterleimbach &lt;peterleimbach@icloud.com&gt; Co-authored-by: Adam Harrison &lt;adamaharrison@gmail.com&gt; Co-authored-by: Dominik Dzienia &lt;dlvoy@users.noreply.github.com&gt; Co-authored-by: stephencmorton &lt;17858976+stephencmorton@users.noreply.github.com&gt; Co-authored-by: Simon Persson &lt;simon@akep.se&gt; Co-authored-by: Cas Eliëns &lt;cas.eliens@isaac.nl&gt; Co-authored-by: Ben West &lt;bewest@gmail.com&gt; Co-authored-by: Matthew &lt;mtfoley.mae@gmail.com&gt; Co-authored-by: ireneusz-ptak &lt;31506973+ireneusz-ptak@users.noreply.github.com&gt; Co-authored-by: josep1972 &lt;joseangelparedesd@gmail.com&gt; Co-authored-by: Bluefox &lt;dogafox@gmail.com&gt; Co-authored-by: fromorbonia &lt;3193811+fromorbonia@users.noreply.github.com&gt; Co-authored-by: VIS TFS Admin &lt;liveid@visualsolution.co.uk&gt; Co-authored-by: joracine &lt;joracine@users.noreply.github.com&gt; Co-authored-by: Alexandre Viau &lt;alexandre@alexandreviau.net&gt; Co-authored-by: Lennart Goedhart &lt;lennart@omnibase.com.au&gt; Co-authored-by: p5nbTgip0r &lt;cb3f02c5@opayq.com&gt; Co-authored-by: Jeremy Cunningham &lt;jpcunningh@gmail.com&gt; Co-authored-by: kskandispersonal &lt;kskandis@live.com&gt; Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; Co-authored-by: Andras Feher &lt;56167205+andrasfeher-smilodonis@users.noreply.github.com&gt; Co-authored-by: Andy Feher &lt;andras.feher@smildonis.com&gt; Co-authored-by: bjornoleh &lt;63544115+bjornoleh@users.noreply.github.com&gt; Co-authored-by: Matt Gaide &lt;mgaide@salesforce.com&gt; Co-authored-by: Lukas Herzog &lt;git@lukasherzog.de&gt;</MESSAGE>
      <SHA>6e2ad4edc8ebf08732d3d5a9ca353937ada0148a</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/--bug-report.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--feature-request--.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/--individual-troubleshooting-help.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/config.yml</FILE>
        <FILE>.github/workflows/codeql-analysis.yml</FILE>
        <FILE>.github/workflows/main.yml</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>README.md</FILE>
        <FILE>app.js</FILE>
        <FILE>app.json</FILE>
        <FILE>assets/fonts/Nightscout Plugin Icons.json</FILE>
        <FILE>assets/fonts/README.md</FILE>
        <FILE>azuredeploy.json</FILE>
        <FILE>bundle/bundle.reports.source.js</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>ci.test.env</FILE>
        <FILE>docs/plugins/add-virtual-assistant-support-to-plugin.md</FILE>
        <FILE>docs/plugins/alexa-plugin.md</FILE>
        <FILE>docs/plugins/alexa-templates/en-us.json</FILE>
        <FILE>docs/plugins/google-home-templates/en-us.zip</FILE>
        <FILE>docs/plugins/googlehome-plugin.md</FILE>
        <FILE>docs/plugins/interacting-with-virtual-assistants.md</FILE>
        <FILE>env.js</FILE>
        <FILE>lib/api/activity/index.js</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/devicestatus/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/googlehome/index.js</FILE>
        <FILE>lib/api/profile/index.js</FILE>
        <FILE>lib/api/properties.js</FILE>
        <FILE>lib/api/status.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/api3/const.json</FILE>
        <FILE>lib/api3/doc/formats.md</FILE>
        <FILE>lib/api3/doc/tutorial.md</FILE>
        <FILE>lib/api3/generic/create/insert.js</FILE>
        <FILE>lib/api3/generic/history/operation.js</FILE>
        <FILE>lib/api3/generic/read/operation.js</FILE>
        <FILE>lib/api3/generic/search/operation.js</FILE>
        <FILE>lib/api3/generic/update/replace.js</FILE>
        <FILE>lib/api3/index.js</FILE>
        <FILE>lib/api3/shared/renderer.js</FILE>
        <FILE>lib/api3/swagger.js</FILE>
        <FILE>lib/api3/swagger.json</FILE>
        <FILE>lib/api3/swagger.yaml</FILE>
        <FILE>lib/authorization/index.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/bus.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/browser-utils.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/client/d3locales.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/constants.json</FILE>
        <FILE>lib/data/calcdelta.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/data/ddata.js</FILE>
        <FILE>lib/data/treatmenttocurve.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/middleware/express-extension-to-accept.js</FILE>
        <FILE>lib/middleware/index.js</FILE>
        <FILE>lib/notifications.js</FILE>
        <FILE>lib/plugins/alexa.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bridge.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/dbsize.js</FILE>
        <FILE>lib/plugins/googlehome.js</FILE>
        <FILE>lib/plugins/index.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/mmconnect.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/pushover.js</FILE>
        <FILE>lib/plugins/rawbg.js</FILE>
        <FILE>lib/plugins/runtimestate.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/plugins/timeago.js</FILE>
        <FILE>lib/plugins/upbat.js</FILE>
        <FILE>lib/plugins/virtAsstBase.js</FILE>
        <FILE>lib/plugins/xdripjs.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report/predictions.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/glucosedistribution.js</FILE>
        <FILE>lib/report_plugins/loopalyzer.js</FILE>
        <FILE>lib/report_plugins/percentile.js</FILE>
        <FILE>lib/report_plugins/profiles.js</FILE>
        <FILE>lib/report_plugins/treatments.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/server/booterror.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/server/cache.js</FILE>
        <FILE>lib/server/clocks.js</FILE>
        <FILE>lib/server/devicestatus.js</FILE>
        <FILE>lib/server/entries.js</FILE>
        <FILE>lib/server/loop.js</FILE>
        <FILE>lib/server/pebble.js</FILE>
        <FILE>lib/server/profile.js</FILE>
        <FILE>lib/server/treatments.js</FILE>
        <FILE>lib/server/websocket.js</FILE>
        <FILE>lib/settings.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>npm-shrinkwrap.json</FILE>
        <FILE>package.json</FILE>
        <FILE>server.js</FILE>
        <FILE>static/css/drawer.css</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/css/report.css</FILE>
        <FILE>static/css/translations.css</FILE>
        <FILE>static/images/errorcat.jpg</FILE>
        <FILE>static/profile/js/profileeditor.js</FILE>
        <FILE>static/report/js/predictions.js</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>swagger.json</FILE>
        <FILE>swagger.yaml</FILE>
        <FILE>test</FILE>
        <FILE>testing/populate.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.alexa.test.js</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/api3.basic.test.js</FILE>
        <FILE>tests/api3.create.test.js</FILE>
        <FILE>tests/api3.delete.test.js</FILE>
        <FILE>tests/api3.generic.workflow.test.js</FILE>
        <FILE>tests/api3.patch.test.js</FILE>
        <FILE>tests/api3.read.test.js</FILE>
        <FILE>tests/api3.renderer.test.js</FILE>
        <FILE>tests/api3.search.test.js</FILE>
        <FILE>tests/api3.security.test.js</FILE>
        <FILE>tests/api3.socket.test.js</FILE>
        <FILE>tests/api3.update.test.js</FILE>
        <FILE>tests/client.renderer.test.js</FILE>
        <FILE>tests/dbsize.test.js</FILE>
        <FILE>tests/env.test.js</FILE>
        <FILE>tests/expressextensions.test.js</FILE>
        <FILE>tests/fixtures/default-server-settings.js</FILE>
        <FILE>tests/mongo-storage.test.js</FILE>
        <FILE>tests/profile.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/security.test.js</FILE>
        <FILE>tests/settings.test.js</FILE>
        <FILE>tests/timeago.test.js</FILE>
        <FILE>tests/units.test.js</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/clockviews/bgclock.css</FILE>
        <FILE>views/clockviews/clock-color.css</FILE>
        <FILE>views/clockviews/clock-config.css</FILE>
        <FILE>views/clockviews/clock-config.html</FILE>
        <FILE>views/clockviews/clock-shared.css</FILE>
        <FILE>views/clockviews/clock.css</FILE>
        <FILE>views/clockviews/clock.html</FILE>
        <FILE>views/error.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/frame.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/nightscout.appcache</FILE>
        <FILE>views/partials/authentication-status.ejs</FILE>
        <FILE>views/partials/toolbar.ejs</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/service-worker.js</FILE>
        <FILE>views/translationsindex.html</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>update (#5) * * Bump version to 14.0.7 * Add onerror handler for pushover * Fixed #5852 - Updated Google Home setup steps (#6195) * Fix broken swagger for APIv3 (#6201) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; * Use lodash.get() in virtual assistant API endpoints (v2) (#6199) * Fixed #5632 - Improved value resolution * More value resolution improvements * Fixed a couple object paths * Corrected setup of `dbsize` for virtual assistants (#6270) * Corrected db size config for virtual assistants * Language fix, improvements, added dbsize to virtAsst config * Using env * Added logging * Debug logging * Different logging * More troubleshooting * Another try * Reverted stuff, added dbsize to server defaults * Fixed test * Fixed another test * Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so * Adding Hungarian translation to nightscout (#6037) * Finished first round of translation for Hungarian language * Added hungarian language to the readme file * Fixes * WIP * Typo fixes and changes to translations * Update language.js Fixed some mistyped language keys Co-authored-by: Andy Feher &lt;andras.feher@smildonis.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Update language.js (#6193) Isfjell -&gt; Istapp Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * #5991 Typo in translation (#6217) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * add missing translations (#6346) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Updated Alexa's intents because Amazon required new ones yet again. (#6457) * Add runtime state tracking to Nightscout, where client now checks if the server has loaded initial data from Mongo before the user is directed to the UI * Add file missing from previous commit * Update app.json * Fix unit tests * Fix the read detection to work correctly with MongoDB Atlas * * Added basal and careportal to default plugins * Changed report BG target to allow fractional numbers * Increase load interval to 5 seconds * Bump version to 14.0.8 * Create codeql-analysis.yml * Revised Norwegian (nb) translations (#6525) * Revised translation (nb) Revised translation after a first pass through the Norwegian (nb) translation. * Added missing translations in Day to day report Missing translation of 'Bolus average , 'Basal average' and 'Base basal average' from daytoday.js * Translate (nb) missing translations in Day to day report * Minor changes Day to day report * Missing translation from glucosedistributon.js of 'Out of Range RMS is calculated by squaring the distance out of range for all glucose readings for the examined period, summing them, dividing by the count and taking the square root. This metric is similar to in-range percentage but weights readings far out of range higher. Lower values are better.') * Translate (nb) Out of range RMS.... 'Out of Range RMS is calculated by squaring the distance out of range for all glucose readings for the examined period, summing them, dividing by the count and taking the square root. This metric is similar to in-range percentage but weights readings far out of range higher. Lower values are better.' * Translate (nb) Reports: Percentile Chart * Reports - Treatments: Added missing translation of 'Carbs/Food/Time' from cgm-remote-monitor\lib\report_plugins\treatments.js * Transkate (nb) Carbs/Food/Time * Nitpicking * Move localisation to Crowdin (#6518) * Update Crowdin configuration file * Update Crowdin configuration file * Add languages for pushing * Update Crowdin configuration file * Update source file en.json * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Romanian) * New translations en.json (Dutch) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Korean) * New translations en.json (French) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * Remove folders * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Norwegian Bokmal) * Update Crowdin configuration file * New translations en.json (Spanish) * New translations en.json (Chinese Simplified) * New translations en.json (Chinese Traditional) * New translations en.json (Italian) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Norwegian Bokmal) * Loading all languages now works * * Fix unit tests * Have server load localizations * Adding some more keys * New Crowdin updates (#6531) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (Japanese) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Croatian) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * Remove old translation status tool * Update CONTRIBUTING * * Reformat the source language file * Fix an English key being in Hebrew * One more tiny formatting fix * Inzulin -&gt; Insulin in English * Fix typo in Portugues Brazilian language code * New Crowdin updates (#6535) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Spanish) * New translations en.json (German) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (Dutch) * Update source file en.json * New translations en.json (German) * New translations en.json (Dutch) * New translations en.json (German) * New translations en.json (German) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (German) * New translations en.json (German) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (Russian) * New translations en.json (Czech) * New translations en.json (Hungarian) * New translations en.json (Russian) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Dutch) * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (French) * New translations en.json (Greek) * New translations en.json (Norwegian Bokmal) * New translations en.json (Russian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * Update CONTRIBUTING.md (#6540) regarding translation Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Typo correction (#6558) * Increased the width of the inlinepiechart to fit the Dutch translated legend (#6539) * Refactor `mongo-storage.js` (#6589) * Refactor `mongo-storage.js` * Use async/await instead of promises * Fixes a bug in the previous implementation where a promise error was not being caught and handled * Code cleanup * Fixes the color changes based on BG target preferences in the clock views (#6592) * Added some boot logging &amp; allow booting using Node 14 LTS * * Fix a bug with reloading while the server is starting * Workaround for the plugins being re-executed multiple times in rapid succession during site load, causing timing issues * Fix timing issue with a test using async, causing tests to randomly fail * Refactor core auth (#6596) * Auth resolve now supports async/await * Read only tokens can be used for authentication and the UI shows privileges for these accounts correctly * Failed attempt at authenticating an API_SECRET or token delays subsequent auth attempt by 5000 ms * New Crowdin updates (#6567) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Spanish) * New translations en.json (German) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (Dutch) * Update source file en.json * New translations en.json (German) * New translations en.json (Dutch) * New translations en.json (German) * New translations en.json (German) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (German) * New translations en.json (German) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (Russian) * New translations en.json (Czech) * New translations en.json (Hungarian) * New translations en.json (Russian) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (French) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Dutch) * New translations en.json (Romanian) * New translations en.json (Korean) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Swedish) * New translations en.json (Slovenian) * New translations en.json (Russian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Japanese) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (French) * New translations en.json (Greek) * New translations en.json (Norwegian Bokmal) * New translations en.json (Russian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Italian) * New translations en.json (Hebrew) * New translations en.json (Hebrew) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hebrew) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hebrew) * New translations en.json (Greek) * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (Greek) * New translations en.json (Greek) * New translations en.json (Swedish) * New translations en.json (Swedish) * New translations en.json (Russian) * New translations en.json (Russian) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * Bump version to 14.1.0 given changes to auth and localization * New Crowdin updates (#6640) * New translations en.json (Hebrew) * New translations en.json (German) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * New translations en.json (Dutch) * New translations en.json (Swedish) * New translations en.json (Russian) * New translations en.json (Russian) * Fix applying localizations to plugin names in client preferences * * Refactor how the levels dependency is loaded, to fix some localization issues * Moves reporting client to the bundles * Oops, push the unit test changes as well * Fix pushover init * Fix pushover test * New Crowdin updates (#6652) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * New translations en.json (Greek) * New translations en.json (Dutch) * New translations en.json (Finnish) * Various fixes to localization - #6516 #6523 #6524 * Test new dev version of minimed-connect-to-nightscout Try out plugin with recent fixes, thanks to @fredmk. * * More small localization fixes * Change link to point to github.io docs * Fix upbat.js levels reference * Fix authorization renewal * New Crowdin updates (#6653) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * Update source file en.json * New translations en.json (Czech) * New translations en.json (Finnish) * New translations en.json (Greek) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Swedish) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * New translations en.json (Dutch) * New translations en.json (Swedish) * New translations en.json (Czech) * New translations en.json (Romanian) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Russian) * Add a missing localization, fix unit tests * Fix a localization key * Rename Weekly Success report to Weekly Distribution * Fix a bug with auth calls that send a false API secret * upgrade minimed-connect-to-nightscout 1.5.0 Update to version available in npm. * Replace Travis build with a GitHub Action (#6690) * Create Docker release workflow for GA * Remove Travis workflow * Remove dependency on Makefile * Update default environment to Node 14 * Use git SHA instead of version for `dev` images * APIv3: Cache invalidation + refactoring (#6688) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs * APIv3: adding cachedCollection stub of cachedCollection storage implementation * APIv3: mongo cachedCollection storage implementation * APIv3: testing and debugging cache updates * APIv3: more testing on cache updates * APIv3: fixing bad async functions * APIv3: finishing cache invalidation tests Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * New Crowdin updates (#6675) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * New translations en.json (Dutch) * New translations en.json (Greek) * New translations en.json (Romanian) * New translations en.json (Finnish) * Update source file en.json * New translations en.json (Romanian) * New translations en.json (Romanian) * New translations en.json (Finnish) * New translations en.json (Romanian) * New translations en.json (Romanian) * New translations en.json (Turkish) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * New translations en.json (Greek) * New translations en.json (French) * New translations en.json (Czech) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Romanian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Russian) * New translations en.json (Finnish) * New translations en.json (Czech) * New translations en.json (Czech) * Update source file en.json * german translations template for googlehome integration (#6674) Co-authored-by: tanja3981 &lt;tanja3981@users.noreply.github.com&gt; * Added support for multiple uploaders in virtual assistant delta calculation (#6559) * Added support for multiple uploaders in delta calculation * Moved moment creation * Moved delta stuff into bgnow plugin * Typo * Removed old implementation * Removed accidental translations * Added new translation key * Removed duplicate translation key (#6699) * New Crowdin updates (#6700) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * Update source file en.json * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Czech) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (German) * * Additional unit test for the authorization API * Stop logging the API SECRET * * Bump version to 14.1.1 * Allow reducing timer length in delays for security tests * Re-enable partial report test * Security improvement batch (#6622) * Adds a new method for the server to push notifies to the client, which require administration privileges from the user. If there are messages in queue but user is not privileged, she is notified of pending messages * Fix unit tests * Increase timeouts on tests * Add translations * * Aggregate admin messages * Send admin message on auth fail * Sending messages over bus * XSS filtering of objects sent over the REST API * Warn users if their instance is world readable * Fix adminnotifies init() * Fix couple issues from Codacy * APIv3: wrapping all results in JSON (#6703) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs * APIv3: adding cachedCollection stub of cachedCollection storage implementation * APIv3: mongo cachedCollection storage implementation * APIv3: testing and debugging cache updates * APIv3: more testing on cache updates * APIv3: fixing bad async functions * APIv3: finishing cache invalidation tests * APIv3: wrapping VERSION result * APIv3: wrapping STATUS result * APIv3: wrapping DELETE result * APIv3: wrapping READ result + partially SEARCH and HISTORY * APIv3: wrapping CREATE result * APIv3: wrapping UPDATE + PATCH result * APIv3: wrapping LAST MODIFIED result * APIv3: updating swagger doc * APIv3: updating tutorial.md * APIv3: tuning tests * APIv3: merge dev Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * * Improved internal API for injecting values into localization keys * Fix a hard to translate key that was split to two separate values * Don't run docker push on forks (#6718) Skip the docker push steps if the repo owner is not 'nightscout'. * Cherry picking CI flow file so users don't get a CI build fail after merging to latest release * Support pump status upload display override (#6698) * Fix admin localization * Clean statics &amp; bundle more (#6745) * * Remove unused old version of MFB * Bundle food, profile editor * Clean up the static folders * Fix tests * feat: disable pump battery alarms at night option (#5359) * feat: add feature to disable pump battery alarms at night * add timezone handling for server side * Update pump.test.js * Update pump.test.js * Update pump.test.js Co-authored-by: Jeremy Cunningham &lt;jpcunningh@gmail.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Add eslint security plugin (#5450) Co-authored-by: Jakob Sandberg &lt;jakobs@zillowgroup.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Allow api3 behind reverse proxy (#5631) * Allow api3 behind reverse proxy * fix test Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Move to package-lock, as per #5735 * New Crowdin updates (#6713) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (French) * New translations en.json (Dutch) * New translations en.json (Greek) * New translations en.json (Swedish) * New translations en.json (Czech) * New translations en.json (Russian) * New translations en.json (Romanian) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * New translations en.json (Romanian) * New translations en.json (Hebrew) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Hebrew) * New translations en.json (Hungarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Italian) * New translations en.json (Finnish) * New translations en.json (Norwegian Bokmal) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Croatian) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (Swedish) * New translations en.json (German) * New translations en.json (Russian) * New translations en.json (Czech) * New translations en.json (German) * New translations en.json (Hungarian) * New translations en.json (Hungarian) * New translations en.json (Dutch) * New translations en.json (Hebrew) * New translations en.json (Russian) * New translations en.json (French) * New translations en.json (Spanish) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Russian) * New translations en.json (French) * New translations en.json (Spanish) * New translations en.json (Danish) * New translations en.json (Portuguese, Brazilian) * Implemented #6720 - Added es_ES template for Alexa (#6779) * Added sensor code transmitter ID fields (#6780) * Copied #5442 - Duplicated @c-robertson's work * Added tx id and sensor code to tooltip * Added swagger docs for the new fields * Added missing language keys * Added new fields to sage plugin display Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * #6701 Save report preferences (#6761) Proof of concept to demonstrate saving report preferences Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * New Crowdin updates (#6769) * New translations en.json (Russian) * New translations en.json (Romanian) * New translations en.json (Bulgarian) * New translations en.json (Finnish) * New translations en.json (Hindi) * New translations en.json (French) * New translations en.json (Swedish) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Italian) * New translations en.json (Slovenian) * New translations en.json (Slovenian) * New translations en.json (Arabic) * New translations en.json (Greek) * New translations en.json (French) * New translations en.json (Bulgarian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Bulgarian) * New translations en.json (Norwegian Bokmal) * New translations en.json (French) * New translations en.json (Croatian) * New translations en.json (Italian) * New translations en.json (French) * New translations en.json (Italian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (German) * New translations en.json (Hebrew) * New translations en.json (Italian) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Japanese) * New translations en.json (Hungarian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Arabic) * Catch error from websocket device status dedupe (#6777) * Catch error from websocket device status dedupe * Patch two more locations that don't catch errors correctly * Changes the bundling so the site works on old Safari versions (#6800) * Changes the bundling so the site works on old Safari versions * Fix quotes * Cache babel output for faster development * Round insulin value in treatment tooltip (#6776) * rename toFixedMin to toRoundedStr * round the insulin value * Typo correction for translation (#6805) * #6701 Report storage tests (#6814) * #6701 Report storage tests Functional and unit tests * #6701 Test cleanup * #6701 js-storage teardown The first time js-storage is required it evaluates if it's running in the browser or not: https://github.com/julien-maurel/js-storage/blob/master/js.storage.js#L423 and will define the localstorage getters and setters accordingly. This becomes an issue if testing localstorage between UI and non-UI tests. reportstorage.test.js was requiring it before hashauth.test.js causing a conflict. * #6701 false positive test The page isn't refreshing Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Update mongo-storage.js (#6811) - use default time outs - remove MongoDB_URI (including user name and password) from public error message - fix typos Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Unit test teardown improvements (#6821) * Clear module require()s between tests Clear profile cache between tests * Fix authentication for careportal test * Add logging to see where the careportal test gets to * Even more logging for headless setup * Change to use before and after in careportal test * Add time logging * Bump headless setup time to a full minute * More timers to figure out what's slow in GA * Bump up timeout on failing test * New Crowdin updates (#6804) * New translations en.json (Hebrew) * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (German) * New translations en.json (Dutch) * New translations en.json (Swedish) * New translations en.json (Czech) * New translations en.json (Hungarian) * New translations en.json (Croatian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Norwegian Bokmal) * New translations en.json (Russian) * New translations en.json (Chinese Simplified) * New translations en.json (Bulgarian) * New translations en.json (Greek) * New translations en.json (Greek) * New translations en.json (Portuguese) * New translations en.json (Portuguese) * New translations en.json (Portuguese) * New translations en.json (Portuguese) * replace deprecated bodyParser ctor (#6819) Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * Bolus settings (#6834) * Add bolus plugin and restructure rendering settings * Add setting to prevent automated micro boluses from triggering notifications and snoozing alarms * clean up * Small change to the bolus-settings branch so it supports flexible configuration that enables the old behavior * Translations * Fix settings default Co-authored-by: Jason Calabrese &lt;jason@cbrese.com&gt; * Added a specific rendering for BG Check events on the Day to Day report. (#6530) Added an option to hide BG Check and other events on the Day to Day report. Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * New Crowdin updates (#6833) * New translations en.json (Portuguese) * New translations en.json (Spanish) * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Portuguese) * Update source file en.json * New translations en.json (Finnish) * New translations en.json (German) * Refactoring organisation, bundling and security improvements (#6765) * * Simplified bundling to just one bundle * Removed cache invalidation token from bundling * Generate strong persistent random string on deploy to use for JWT signing * WIP: moving api-secret and JWT signing to a separate centralized security component * Moved some server components away from project root * Fix issues reported by linter * Ignore detect-object-injection everywhere but the client * Make admin message button red * Remove alarms for some security alerts on code * api_secret is now fully contained in the enclave * Bump version to 14.2.0 * Fix Procfile, Dockerfile * Revert to old token hash generation method * Fix admin message localization, timer presentation * * Fix #6843 * Don't do sync file access on requests to swagger files or service worker * Adds an API test * Add unit test for socket.io connect (#6845) * Add unit test for socket.io connect * Fix white space * * Fix hard to understand loopalyzer localization key * Fix websocket in unauthenticated cases * Change authentication dialog button label to be more descriptive * Remove duplicate key * * Better unit test for admin notifications. * Localisable API_SECRET warning * Fix admin message time display when message is recent * * Add Slovenian and fix Slovakian language code * Hide Traditional Chinese due to low coverage * Add Portuguese to the menu * * Disabling tests that interfere with other tests * Fix view include syntax * Change Slovenian name to correct language * Update webpack to v5 (#6844) * upgrade webpack info * cleanup eslint findings * fix eslint formatter stylish error * lazy is invalid option for webpack dev middleware * upgrade webpack to 5.x * remove unsupported terser option * fix missing process polyfill dependency * try alternate proces fix * fix css image reference * add statements to import missing css files to index.html * TerserPlugin no longer required * add missing css links * remove terser Co-authored-by: Jeremy Cunningham &lt;jpcunningh@gmail.com&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * New Crowdin updates (#6837) * New translations en.json (Hebrew) * New translations en.json (Norwegian Bokmal) * New translations en.json (Spanish) * New translations en.json (German) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Dutch) * New translations en.json (Norwegian Bokmal) * New translations en.json (Swedish) * New translations en.json (Bulgarian) * New translations en.json (Danish) * New translations en.json (French) * New translations en.json (Danish) * New translations en.json (Greek) * New translations en.json (Danish) * New translations en.json (Greek) * New translations en.json (Greek) * New translations en.json (Portuguese) * New translations en.json (Greek) * New translations en.json (Greek) * New translations en.json (Russian) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Portuguese) * New translations en.json (Spanish) * New translations en.json (Greek) * New translations en.json (Russian) * New translations en.json (Portuguese) * New translations en.json (Portuguese) * New translations en.json (Norwegian Bokmal) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Portuguese) * Update source file en.json * New translations en.json (Japanese) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Spanish) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Portuguese) * New translations en.json (French) * New translations en.json (Greek) * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Portuguese) * Update source file en.json * Update source file en.json * New translations en.json (Slovenian) * Update source file en.json * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Portuguese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Slovak) * Update source file en.json * New translations en.json (Portuguese) * New translations en.json (Norwegian Bokmal) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Greek) * New translations en.json (French) * New translations en.json (Portuguese) * Fix issue reported by CodeQL * Removes an undocumented feature that has a javascript injection vulnerability * Fix bug with previous removal * Reduce the amount of false positives reported * Cgm delta fix (#6848) * If CGM value has changed, push it to server * Fix VScode overeager code add * Merge updated CGM data into client dataset * Fix form parsing * Fix json decoding for some api endpoints * Remove broken header definition * Fix Brazilian Portuguese language code * Use password entropy analysis for determining password strength * Api3 remove Date header (#6855) * APIv3: isolating documents from tests (not allowing clashes of calculated identifiers) * removing unused async keyword * fixing api v3 swagger and moving it to /api3-docs * APIv3: finishing cache invalidation tests Co-authored-by: Petr Ondrusek &lt;petr.ondrusek@seznam.cz&gt; Co-authored-by: Petr Ondrůšek &lt;petr.ondrusek@okin.eu&gt; Co-authored-by: Sulka Haro &lt;sulka@sulka.net&gt; * New Crowdin updates (#6849) * New translations en.json (Greek) * New translations en.json (Dutch) * New translations en.json (Swedish) * New translations en.json (Russian) * New translations en.json (Russian) * New translations en.json (Greek) * New translations en.json (Portuguese) * Notify users if they're reusing the API_SECRET for Mongo password * Fix version number generation * New Crowdin updates (#6858) * New translations en.json (Greek) * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (Hebrew) * New translations en.json (Japanese) * New translations en.json (Portuguese) * New translations en.json (Arabic) * New translations en.json (Hindi) * New translations en.json (Croatian) * New translations en.json (Portuguese, Brazilian) * New translations en.json (Chinese Traditional) * New translations en.json (Chinese Simplified) * New translations en.json (Turkish) * New translations en.json (Slovenian) * New translations en.json (Polish) * New translations en.json (Dutch) * New translations en.json (Korean) * New translations en.json (Italian) * New translations en.json (Norwegian Bokmal) * New translations en.json (Hungarian) * New translations en.json (Finnish) * New translations en.json (German) * New translations en.json (Danish) * New translations en.json (Czech) * New translations en.json (Bulgarian) * New translations en.json (Spanish) * New translations en.json (French) * New translations en.json (Romanian) * New translations en.json (Russian) * New translations en.json (Swedish) * New translations en.json (Greek) * New translations en.json (Slovak) * Update source file en.json * New translations en.json (Norwegian Bokmal) * New translations en.json (Greek) * New translations en.json (Swedish) * New translations en.json (Russian) * New translations en.json (Romanian) * New translations en.json (French) * New translations en.json (Czech) * New translations en.json (Danish) * New translations en.json (Portuguese) * New translations en.json (German) * New translations en.json (Dutch) * New translations en.json (Polish) * New translations en.json (Norwegian Bokmal) * New translations en.json (Polish) * New translations en.json (Romanian) * New translations en.json (Romanian) * New translations en.json (Greek) * New translations en.json (Finnish) …</MESSAGE>
      <SHA>8b9a420a7ce84c296825af6ee9e7a2a595f97725</SHA>
      <PATCHEDFILES>
        <FILE>.eslintrc.js</FILE>
        <FILE>.github/workflows/codeql-analysis.yml</FILE>
        <FILE>.github/workflows/main.yml</FILE>
        <FILE>.gitignore</FILE>
        <FILE>.nvmrc</FILE>
        <FILE>.travis.yml</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>Dockerfile</FILE>
        <FILE>Makefile</FILE>
        <FILE>Procfile</FILE>
        <FILE>README.md</FILE>
        <FILE>app.json</FILE>
        <FILE>assets/fonts/Nightscout Plugin Icons.json</FILE>
        <FILE>bin/generateRandomString.js</FILE>
        <FILE>bin/testdatarunner.js</FILE>
        <FILE>bundle/bundle.reports.source.js</FILE>
        <FILE>bundle/bundle.source.js</FILE>
        <FILE>crowdin.yml</FILE>
        <FILE>docs/plugins/add-virtual-assistant-support-to-plugin.md</FILE>
        <FILE>docs/plugins/alexa-plugin.md</FILE>
        <FILE>docs/plugins/alexa-templates/en-us.json</FILE>
        <FILE>docs/plugins/alexa-templates/es-es.json</FILE>
        <FILE>docs/plugins/google-home-templates/de-DE.zip</FILE>
        <FILE>docs/plugins/google-home-templates/en-us.zip</FILE>
        <FILE>docs/plugins/googlehome-plugin.md</FILE>
        <FILE>lib/admin_plugins/roles.js</FILE>
        <FILE>lib/admin_plugins/subjects.js</FILE>
        <FILE>lib/adminnotifies.js</FILE>
        <FILE>lib/api/activity/index.js</FILE>
        <FILE>lib/api/adminnotifiesapi.js</FILE>
        <FILE>lib/api/alexa/index.js</FILE>
        <FILE>lib/api/devicestatus/index.js</FILE>
        <FILE>lib/api/entries/index.js</FILE>
        <FILE>lib/api/food/index.js</FILE>
        <FILE>lib/api/googlehome/index.js</FILE>
        <FILE>lib/api/index.js</FILE>
        <FILE>lib/api/profile/index.js</FILE>
        <FILE>lib/api/status.js</FILE>
        <FILE>lib/api/treatments/index.js</FILE>
        <FILE>lib/api/verifyauth.js</FILE>
        <FILE>lib/api3/const.json</FILE>
        <FILE>lib/api3/doc/formats.md</FILE>
        <FILE>lib/api3/doc/security.md</FILE>
        <FILE>lib/api3/doc/tutorial.md</FILE>
        <FILE>lib/api3/generic/collection.js</FILE>
        <FILE>lib/api3/generic/create/insert.js</FILE>
        <FILE>lib/api3/generic/delete/operation.js</FILE>
        <FILE>lib/api3/generic/history/operation.js</FILE>
        <FILE>lib/api3/generic/patch/operation.js</FILE>
        <FILE>lib/api3/generic/read/operation.js</FILE>
        <FILE>lib/api3/generic/search/operation.js</FILE>
        <FILE>lib/api3/generic/update/operation.js</FILE>
        <FILE>lib/api3/generic/update/replace.js</FILE>
        <FILE>lib/api3/index.js</FILE>
        <FILE>lib/api3/security.js</FILE>
        <FILE>lib/api3/shared/operationTools.js</FILE>
        <FILE>lib/api3/shared/renderer.js</FILE>
        <FILE>lib/api3/specific/lastModified.js</FILE>
        <FILE>lib/api3/specific/status.js</FILE>
        <FILE>lib/api3/specific/version.js</FILE>
        <FILE>lib/api3/storage/mongoCachedCollection/index.js</FILE>
        <FILE>lib/api3/storage/mongoCollection/find.js</FILE>
        <FILE>lib/api3/storage/mongoCollection/index.js</FILE>
        <FILE>lib/api3/storage/mongoCollection/modify.js</FILE>
        <FILE>lib/api3/storage/mongoCollection/utils.js</FILE>
        <FILE>lib/api3/swagger.js</FILE>
        <FILE>lib/api3/swagger.json</FILE>
        <FILE>lib/api3/swagger.yaml</FILE>
        <FILE>lib/authorization/delaylist.js</FILE>
        <FILE>lib/authorization/index.js</FILE>
        <FILE>lib/authorization/storage.js</FILE>
        <FILE>lib/client/adminnotifiesclient.js</FILE>
        <FILE>lib/client/boluscalc.js</FILE>
        <FILE>lib/client/browser-settings.js</FILE>
        <FILE>lib/client/browser-utils.js</FILE>
        <FILE>lib/client/careportal.js</FILE>
        <FILE>lib/client/chart.js</FILE>
        <FILE>lib/client/clock-client.js</FILE>
        <FILE>lib/client/d3locales.js</FILE>
        <FILE>lib/client/hashauth.js</FILE>
        <FILE>lib/client/index.js</FILE>
        <FILE>lib/client/receiveddata.js</FILE>
        <FILE>lib/client/renderer.js</FILE>
        <FILE>lib/constants.json</FILE>
        <FILE>lib/data/calcdelta.js</FILE>
        <FILE>lib/data/dataloader.js</FILE>
        <FILE>lib/food/food.js</FILE>
        <FILE>lib/language.js</FILE>
        <FILE>lib/levels.js</FILE>
        <FILE>lib/notifications.js</FILE>
        <FILE>lib/plugins/ar2.js</FILE>
        <FILE>lib/plugins/basalprofile.js</FILE>
        <FILE>lib/plugins/batteryage.js</FILE>
        <FILE>lib/plugins/bgnow.js</FILE>
        <FILE>lib/plugins/bolus.js</FILE>
        <FILE>lib/plugins/boluswizardpreview.js</FILE>
        <FILE>lib/plugins/cannulaage.js</FILE>
        <FILE>lib/plugins/careportal.js</FILE>
        <FILE>lib/plugins/cob.js</FILE>
        <FILE>lib/plugins/dbsize.js</FILE>
        <FILE>lib/plugins/errorcodes.js</FILE>
        <FILE>lib/plugins/index.js</FILE>
        <FILE>lib/plugins/insulinage.js</FILE>
        <FILE>lib/plugins/iob.js</FILE>
        <FILE>lib/plugins/loop.js</FILE>
        <FILE>lib/plugins/openaps.js</FILE>
        <FILE>lib/plugins/pump.js</FILE>
        <FILE>lib/plugins/pushover.js</FILE>
        <FILE>lib/plugins/rawbg.js</FILE>
        <FILE>lib/plugins/runtimestate.js</FILE>
        <FILE>lib/plugins/sensorage.js</FILE>
        <FILE>lib/plugins/simplealarms.js</FILE>
        <FILE>lib/plugins/timeago.js</FILE>
        <FILE>lib/plugins/treatmentnotify.js</FILE>
        <FILE>lib/plugins/upbat.js</FILE>
        <FILE>lib/plugins/virtAsstBase.js</FILE>
        <FILE>lib/plugins/xdripjs.js</FILE>
        <FILE>lib/profile/profileeditor.js</FILE>
        <FILE>lib/profilefunctions.js</FILE>
        <FILE>lib/report/reportclient.js</FILE>
        <FILE>lib/report/reportstorage.js</FILE>
        <FILE>lib/report_plugins/dailystats.js</FILE>
        <FILE>lib/report_plugins/daytoday.js</FILE>
        <FILE>lib/report_plugins/index.js</FILE>
        <FILE>lib/report_plugins/loopalyzer.js</FILE>
        <FILE>lib/report_plugins/success.js</FILE>
        <FILE>lib/report_plugins/weektoweek.js</FILE>
        <FILE>lib/sandbox.js</FILE>
        <FILE>lib/server/app.js</FILE>
        <FILE>lib/server/booterror.js</FILE>
        <FILE>lib/server/bootevent.js</FILE>
        <FILE>lib/server/cache.js</FILE>
        <FILE>lib/server/enclave.js</FILE>
        <FILE>lib/server/env.js</FILE>
        <FILE>lib/server/purifier.js</FILE>
        <FILE>lib/server/pushnotify.js</FILE>
        <FILE>lib/server/server.js</FILE>
        <FILE>lib/server/swagger.json</FILE>
        <FILE>lib/server/swagger.yaml</FILE>
        <FILE>lib/server/websocket.js</FILE>
        <FILE>lib/settings.js</FILE>
        <FILE>lib/storage/mongo-storage.js</FILE>
        <FILE>lib/utils.js</FILE>
        <FILE>my.env.template</FILE>
        <FILE>package-lock.json</FILE>
        <FILE>package.json</FILE>
        <FILE>static/css/drawer.css</FILE>
        <FILE>static/css/main.css</FILE>
        <FILE>static/js/foodinit.js</FILE>
        <FILE>static/js/profileinit.js</FILE>
        <FILE>static/js/reportinit.js</FILE>
        <FILE>static/mfb/lib/modernizr.touch.js</FILE>
        <FILE>static/mfb/mfb.css</FILE>
        <FILE>static/mfb/mfb.css.map</FILE>
        <FILE>static/mfb/mfb.js</FILE>
        <FILE>static/mfb/mfb.min.css</FILE>
        <FILE>static/mfb/mfb.min.js</FILE>
        <FILE>static/radio/js/radio.js</FILE>
        <FILE>static/report/css/mfb.min.css</FILE>
        <FILE>static/report/js/report.js</FILE>
        <FILE>static/translations/js/translations.js</FILE>
        <FILE>tests/XX_clean.test.js</FILE>
        <FILE>tests/adminnotifies.test.js</FILE>
        <FILE>tests/admintools.test.js</FILE>
        <FILE>tests/api.alexa.test.js</FILE>
        <FILE>tests/api.devicestatus.test.js</FILE>
        <FILE>tests/api.entries.test.js</FILE>
        <FILE>tests/api.security.test.js</FILE>
        <FILE>tests/api.status.test.js</FILE>
        <FILE>tests/api.treatments.test.js</FILE>
        <FILE>tests/api.unauthorized.test.js</FILE>
        <FILE>tests/api.verifyauth.test.js</FILE>
        <FILE>tests/api3.basic.test.js</FILE>
        <FILE>tests/api3.create.test.js</FILE>
        <FILE>tests/api3.delete.test.js</FILE>
        <FILE>tests/api3.generic.workflow.test.js</FILE>
        <FILE>tests/api3.patch.test.js</FILE>
        <FILE>tests/api3.read.test.js</FILE>
        <FILE>tests/api3.renderer.test.js</FILE>
        <FILE>tests/api3.search.test.js</FILE>
        <FILE>tests/api3.security.test.js</FILE>
        <FILE>tests/api3.socket.test.js</FILE>
        <FILE>tests/api3.update.test.js</FILE>
        <FILE>tests/ar2.test.js</FILE>
        <FILE>tests/basalprofileplugin.test.js</FILE>
        <FILE>tests/bgnow.test.js</FILE>
        <FILE>tests/boluswizardpreview.test.js</FILE>
        <FILE>tests/cannulaage.test.js</FILE>
        <FILE>tests/careportal.test.js</FILE>
        <FILE>tests/cob.test.js</FILE>
        <FILE>tests/data.calcdelta.test.js</FILE>
        <FILE>tests/dbsize.test.js</FILE>
        <FILE>tests/ddata.test.js</FILE>
        <FILE>tests/env.test.js</FILE>
        <FILE>tests/errorcodes.test.js</FILE>
        <FILE>tests/fixtures/api/instance.js</FILE>
        <FILE>tests/fixtures/api3/authSubject.js</FILE>
        <FILE>tests/fixtures/api3/cacheMonitor.js</FILE>
        <FILE>tests/fixtures/api3/instance.js</FILE>
        <FILE>tests/fixtures/default-server-settings.js</FILE>
        <FILE>tests/fixtures/headless.js</FILE>
        <FILE>tests/hashauth.test.js</FILE>
        <FILE>tests/hooks.js</FILE>
        <FILE>tests/insulinage.test.js</FILE>
        <FILE>tests/iob.test.js</FILE>
        <FILE>tests/language.test.js</FILE>
        <FILE>tests/loop.test.js</FILE>
        <FILE>tests/maker.test.js</FILE>
        <FILE>tests/mongo-storage.test.js</FILE>
        <FILE>tests/notifications-api.test.js</FILE>
        <FILE>tests/notifications.test.js</FILE>
        <FILE>tests/openaps-storage.test.js</FILE>
        <FILE>tests/openaps.test.js</FILE>
        <FILE>tests/pebble.test.js</FILE>
        <FILE>tests/profileeditor.test.js</FILE>
        <FILE>tests/pump.test.js</FILE>
        <FILE>tests/pushnotify.test.js</FILE>
        <FILE>tests/pushover.test.js</FILE>
        <FILE>tests/rawbg.test.js</FILE>
        <FILE>tests/reports.test.js</FILE>
        <FILE>tests/reportstorage.test.js</FILE>
        <FILE>tests/sandbox.test.js</FILE>
        <FILE>tests/security.test.js</FILE>
        <FILE>tests/sensorage.test.js</FILE>
        <FILE>tests/simplealarms.test.js</FILE>
        <FILE>tests/timeago.test.js</FILE>
        <FILE>tests/treatmentnotify.test.js</FILE>
        <FILE>tests/upbat.test.js</FILE>
        <FILE>tests/utils.test.js</FILE>
        <FILE>tests/verifyauth.test.js</FILE>
        <FILE>translations/ar_SA.json</FILE>
        <FILE>translations/bg_BG.json</FILE>
        <FILE>translations/cs_CZ.json</FILE>
        <FILE>translations/da_DK.json</FILE>
        <FILE>translations/de_DE.json</FILE>
        <FILE>translations/el_GR.json</FILE>
        <FILE>translations/en/en.json</FILE>
        <FILE>translations/es_ES.json</FILE>
        <FILE>translations/fi_FI.json</FILE>
        <FILE>translations/fr_FR.json</FILE>
        <FILE>translations/he_IL.json</FILE>
        <FILE>translations/hi_IN.json</FILE>
        <FILE>translations/hr_HR.json</FILE>
        <FILE>translations/hu_HU.json</FILE>
        <FILE>translations/it_IT.json</FILE>
        <FILE>translations/ja_JP.json</FILE>
        <FILE>translations/ko_KR.json</FILE>
        <FILE>translations/nb_NO.json</FILE>
        <FILE>translations/nl_NL.json</FILE>
        <FILE>translations/pl_PL.json</FILE>
        <FILE>translations/pt_BR.json</FILE>
        <FILE>translations/pt_PT.json</FILE>
        <FILE>translations/ro_RO.json</FILE>
        <FILE>translations/ru_RU.json</FILE>
        <FILE>translations/sk_SK.json</FILE>
        <FILE>translations/sl_SI.json</FILE>
        <FILE>translations/sv_SE.json</FILE>
        <FILE>translations/tr_TR.json</FILE>
        <FILE>translations/zh_CN.json</FILE>
        <FILE>translations/zh_TW.json</FILE>
        <FILE>views/adminindex.html</FILE>
        <FILE>views/foodindex.html</FILE>
        <FILE>views/index.html</FILE>
        <FILE>views/partials/toolbar.ejs</FILE>
        <FILE>views/profileindex.html</FILE>
        <FILE>views/reportindex.html</FILE>
        <FILE>views/service-worker.js</FILE>
        <FILE>views/translationsindex.html</FILE>
        <FILE>web.config</FILE>
        <FILE>webpack.config.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix batch (#6248) * Use the delta plugin data to show the delta in the clock views * Update Node checks * Fix disabling the BG alarms for simple alarms * Load battery and other rare events up to two months back * Possibly fixes compatibility with ios9 - needs testing * Unified black and color clock layouts * Update clock data every 20 seconds * Update clock time every second * Fix how CSP policy is set for Helmet, fixes #6260 * Authorization fix for misformatted URLs * Added unit test for batch upload of CGM entries * Improved / removed some logging * Test if user is in read only mode when Nightscout starts and give an error if so</MESSAGE>
      <SHA>3a0dc782e9edf4957fbba2d6fb5b6049d548528d</SHA>
      <PATCHEDFILES>
        <FILE>tests/api.entries.test.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
