<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9532</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/9532</ISSUEURL>
  <TITLE>feat: Support consul acl access control when discovering with consul or consul_kv</TITLE>
  <DESCRIPTION>### Description When using consul and consul_kv as service discovery, it is hoped to support the incoming token to enable consul acl. An example configuration file is as follows: ```yaml # for consul discovery: consul: servers: - &quot;http://127.0.0.1:8500&quot; - &quot;http://127.0.0.1:8600&quot; token: &quot;consul-access-token&quot; # add consul acl token config skip_services: - &quot;service_a&quot; #... ``` ```yaml # for consul_kv discovery: consul_kv: servers: - &quot;http://127.0.0.1:8500&quot; - &quot;http://127.0.0.1:8600&quot; token: &quot;consul-access-token&quot; # add consul acl token config prefix: &quot;upstreams&quot; skip_keys: - &quot;upstreams/unused_api/&quot; #... ``` There is a discussion about consul acl in a similar issue #6692. Official document of consul [acl](https://www.consul.io/docs/security/acl). And [lua-resty-consul](https://github.com/hamishforbes/lua-resty-consul) supports consul acl access control. If the evaluation is feasible, please help to support it, thanks a lot~~</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>154</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: add id to global_rules schema (#9517)</MESSAGE>
    <SHA>216e54dd99fb2eef7ebf681b78cce7d835b4bb9d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: add token support for consul discovery(#9532)</MESSAGE>
      <SHA>52df2ed1dc5939ff2cf87e66a67bcd8a5e2c40d4</SHA>
      <PATCHEDFILES>
        <FILE>apisix/discovery/consul/init.lua</FILE>
        <FILE>apisix/discovery/consul/schema.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>add token support for consul_kv discovery(#9532)</MESSAGE>
      <SHA>50d80d769eea79f58698e6a21d960c80e2b2783f</SHA>
      <PATCHEDFILES>
        <FILE>apisix/discovery/consul_kv/init.lua</FILE>
        <FILE>apisix/discovery/consul_kv/schema.lua</FILE>
        <FILE>docs/en/latest/discovery/consul_kv.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
