<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1869</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/1869</ISSUEURL>
  <TITLE>bug: failed to get `host` in health check configuration.</TITLE>
  <DESCRIPTION>## code location https://github.com/apache/incubator-apisix/blob/master/apisix/balancer.lua#L64 https://github.com/apache/incubator-apisix/blob/master/apisix/balancer.lua#L95 https://github.com/apache/incubator-apisix/blob/master/apisix/balancer.lua#L198 https://github.com/apache/incubator-apisix/blob/master/apisix/balancer.lua#L201 https://github.com/apache/incubator-apisix/blob/master/apisix/balancer.lua#L206 ## refer to the health check configuration: https://github.com/apache/incubator-apisix/blob/master/doc/health-check.md `host` should be from `checks.active.host` instead of `checks.host`</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>7</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>doc: fixed image links in zh-cn benchmark (#1896)</MESSAGE>
    <SHA>45f84a2510e8c7458a67c6f89ba7148f3cc4d940</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>bugfix: failed to get `host` in health check configuration. (#1871) The `host` of health check should be sub-item of `check.active` . FIX #1869</MESSAGE>
      <SHA>a108d2eee17b823fb7df90d66e340e2795b6e229</SHA>
      <PATCHEDFILES>
        <FILE>apisix/balancer.lua</FILE>
        <FILE>t/node/healthcheck.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
