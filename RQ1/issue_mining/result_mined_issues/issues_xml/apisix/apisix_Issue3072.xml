<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3072</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3072</ISSUEURL>
  <TITLE>Support empty nodes in Upstream</TITLE>
  <DESCRIPTION># Improve Docs Currently the minimum number of nodes in Upstream is 1, while using ingress-apisix in Kubernetes, people may create ApisixUpstream or ApisixRoute with an bad Service/Endpoints, which causes ingress-apisix push an Upstream but with an empty nodes field, and APISIX returns 400. So is there any restrictions that we must have at least one node? ## Describe the solution you'd like Allow empty node in Upstream.</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>docs: fix spelling (#3071)</MESSAGE>
    <SHA>da5d0f7e35341b7e6e6f4daf2d8126444408c9ba</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: allow upstream without nodes Fix #3072 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>5cff70a091465f651de6331424e214c04d5f9cd3</SHA>
      <PATCHEDFILES>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>t/admin/upstream.t</FILE>
        <FILE>t/admin/upstream2.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat: allow upstream without nodes Fix #3072 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>33b2542caf7c4ac5c41d762522e5fb3fa33b7e07</SHA>
      <PATCHEDFILES>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>doc/admin-api.md</FILE>
        <FILE>doc/zh-cn/admin-api.md</FILE>
        <FILE>t/admin/upstream-array-nodes.t</FILE>
        <FILE>t/admin/upstream.t</FILE>
        <FILE>t/admin/upstream2.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
