<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3336</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3336</ISSUEURL>
  <TITLE>feat: support to specify the scheme(http/https) in upstream</TITLE>
  <DESCRIPTION>we can specify the schema by the plugin: https://github.com/apache/apisix/blob/master/doc/plugins/proxy-rewrite.md This function is too common, I think we should support this option in the upstream object. Here is an example: ```json { &quot;id&quot;: &quot;1&quot;, # id &quot;scheme&quot;: &quot;http&quot;, &quot;nodes&quot;: {&quot;host:80&quot;: 100}, # Upstream machine address list, the format is `Address + Port` &quot;type&quot;:&quot;roundrobin&quot; } ``` @lilien1010 @spacewander what do you think?</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>8</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: allow to pass SNI in HTTPS proxy (#3420) Fix #2988</MESSAGE>
    <SHA>da62190d952811477cf9d0e7e1c9b455794263f3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: support specifying https in upstream Fix #3336 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>4f4ee14d83ea08e23ebbdfc7afd92e4ce2350d02</SHA>
      <PATCHEDFILES>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>doc/admin-api.md</FILE>
        <FILE>doc/zh-cn/admin-api.md</FILE>
        <FILE>t/node/proxy_https.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat: support specifying https in upstream to talk with https backend (#3430) Fix #3336 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>3a09f8a8d58d92d6f9252e4437940cd736cb2eff</SHA>
      <PATCHEDFILES>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>doc/admin-api.md</FILE>
        <FILE>doc/zh-cn/admin-api.md</FILE>
        <FILE>t/node/proxy_https.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
