<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1704</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/1704</ISSUEURL>
  <TITLE>bug: cors plugin return repeated cross-domain header</TITLE>
  <DESCRIPTION>### Issue description When the backend also returns cross-domain headers, using cors plugin will cause duplicate cross-domain headers for example: backend code set header: ![image](https://user-images.githubusercontent.com/7134928/84471298-a37b9780-acb7-11ea-8baa-62f1cd54db5f.png) enable cors plugin, then response header like this : ![image](https://user-images.githubusercontent.com/7134928/84471367-c60db080-acb7-11ea-966a-3bd503f72ab4.png) ### Environment * apisix version (cmd: `apisix version`): 1.2 * OS: centos7.6 ### What's the expected result? remove duplicate headers</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>56</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>test: old test case is unstable, running fail sometimes. (#1925)</MESSAGE>
    <SHA>3d8150b2085da70a84afbee3dde6ffc4739fb5ef</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: add option for cors and bugfix (#1963) fix #1915 #1704</MESSAGE>
      <SHA>2936c7d89da2fb1d65c0984e03280b96d8ab3d95</SHA>
      <PATCHEDFILES>
        <FILE>apisix/plugins/cors.lua</FILE>
        <FILE>t/lib/server.lua</FILE>
        <FILE>t/plugin/cors.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
