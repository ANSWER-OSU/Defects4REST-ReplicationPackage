<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2827</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/2827</ISSUEURL>
  <TITLE>request help: fault-injection abort.body Using variables</TITLE>
  <DESCRIPTION>### Issue description abort.body {&quot;status&quot;:&quot;success&quot;,&quot;time&quot;:&quot;$time_local&quot;} $time_local is nginx variables or Custom variable ok english is poor i want this location ~ ^/get_json { default_type application/json; return 200 '{&quot;status&quot;:&quot;success&quot;,&quot;SERVER_TIME&quot;:&quot;$current time&quot;}'; } ### Environment * apisix version 2.0: * OS: Centos 7</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: update lua-resty-radixtree to 2.5 (#2971) Co-authored-by: roketyyang &lt;roketyyang@tencent.com&gt;</MESSAGE>
    <SHA>c41aa8534a18f43ef0c3cd6780f106595f9f9b88</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat(fault-injection): support Nginx variable in abort.body Fix #2827</MESSAGE>
      <SHA>6ec08c77a57ff35173dc5491870574281e41b98a</SHA>
      <PATCHEDFILES>
        <FILE>apisix/core/utils.lua</FILE>
        <FILE>apisix/plugins/fault-injection.lua</FILE>
        <FILE>doc/plugins/fault-injection.md</FILE>
        <FILE>doc/zh-cn/plugins/fault-injection.md</FILE>
        <FILE>t/core/utils.t</FILE>
        <FILE>t/plugin/fault-injection.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat(fault-injection): support Nginx variable in abort.body (#2986) Fix #2827</MESSAGE>
      <SHA>79075000aa1d7fabb1511e99f04e677f906507c5</SHA>
      <PATCHEDFILES>
        <FILE>apisix/core/utils.lua</FILE>
        <FILE>apisix/plugins/fault-injection.lua</FILE>
        <FILE>doc/plugins/fault-injection.md</FILE>
        <FILE>doc/zh-cn/plugins/fault-injection.md</FILE>
        <FILE>t/core/utils.t</FILE>
        <FILE>t/plugin/fault-injection.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
