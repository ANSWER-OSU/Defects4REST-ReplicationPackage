<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5430</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/5430</ISSUEURL>
  <TITLE>bug: apisix/admin/init.lua:161,if curl -d 'false',return error</TITLE>
  <DESCRIPTION>### Issue description use the cmd: curl http://localhost:9180/apisix/admin/routes/1/enable_websocket -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PATCH -i -d 'false' to modified attribute /admin/routes/1/enable_websocket； return 500， init.lua:162: handler(): invalid request body: false err: nil, client: 127.0.0.1, server: , request: &quot;PATCH /apisix/admin/routes/1/enable_websocket HTTP/1.1&quot;, host: &quot;localhost:9180&quot; ### Environment - apisix version (cmd: `apisix version`):2.10.0 - OS (cmd: `uname -a`):Linux apisix 5.10.16.3-microsoft-standard-WSL2 #1 SMP Fri Apr 2 22:23:49 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux - OpenResty / Nginx version (cmd: `nginx -V` or `openresty -V`): openresty/1.19.9.1 - etcd version, if have (cmd: run `curl http://127.0.0.1:9090/v1/server_info` to get the info from server-info API): - apisix-dashboard version, if have: - the plugin runner version, if the issue is about a plugin runner (cmd: depended on the kind of runner): - luarocks version, if the issue is about installation (cmd: `luarocks --version`): 3.4.0 ### Steps to reproduce 1.# create one route $ curl http://127.0.0.1:9080/apisix/admin/routes/1 -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -i -d ' { &quot;uri&quot;: &quot;/index.html&quot;, &quot;hosts&quot;: [&quot;foo.com&quot;, &quot;*.bar.com&quot;], &quot;remote_addrs&quot;: [&quot;127.0.0.0/8&quot;], &quot;methods&quot;: [&quot;PUT&quot;, &quot;GET&quot;], &quot;enable_websocket&quot;: true, &quot;upstream&quot;: { &quot;type&quot;: &quot;roundrobin&quot;, &quot;nodes&quot;: { &quot;39.97.63.215:80&quot;: 1 } } }' 2.modified the attribute curl http://localhost:9180/apisix/admin/routes/1/enable_websocket -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PATCH -i -d 'false' 3.return 500 500 Internal Server Error ### Actual result &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta content=&quot;text/html;charset=utf-8&quot; http-equiv=&quot;Content-Type&quot;&gt; &lt;meta content=&quot;utf-8&quot; http-equiv=&quot;encoding&quot;&gt; &lt;title&gt;500 Internal Server Error&lt;/title&gt; &lt;style&gt; body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;An error occurred.&lt;/h1&gt; &lt;p&gt;You can report issue to &lt;a href=&quot;https://github.com/apache/apisix/issues&quot;&gt;APISIX&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;em&gt;Faithfully yours, &lt;a href=&quot;https://apisix.apache.org/&quot;&gt;APISIX&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt; &lt;/body&gt; &lt;/html&gt; ### Error log init.lua:162: handler(): invalid request body: false err: nil, client: 127.0.0.1, server: , request: &quot;PATCH /apisix/admin/routes/1/enable_websocket HTTP/1.1&quot;, host: &quot;localhost:9180&quot; ### Expected result PATCH return 201 Created the value(true) of key(&quot;enable_websocket&quot;) is modified to false</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>docs(localization): translate ext-plugin-post-req from EN into ZH (#5423) Co-authored-by: 琚致远 &lt;juzhiyuan@apache.org&gt;</MESSAGE>
    <SHA>fc7de8ea2c326dcae7f9c33fddcc5de4c435ff6c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix(admin): modify boolean parameters with PATCH Closes #5430 Signed-off-by: tzssangglass &lt;tzssangglass@gmail.com&gt;</MESSAGE>
      <SHA>3a44df6169c4d4a5cd06489141901d0a040dfb7d</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/init.lua</FILE>
        <FILE>apisix/admin/routes.lua</FILE>
        <FILE>t/admin/routes3.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
