<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8655</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/8655</ISSUEURL>
  <TITLE>bug: GRPC transcode can't work with protobuf.Struct</TITLE>
  <DESCRIPTION>### Current Behavior # Problem The inner struct object has not been parsed correctly. and is empty when using grpc-transcode plugin. # details I have a grpc serivce with has below definition: ``` --- the request part message RawRequest { google.protobuf.Struct reqdata = 1; string type = 2; string serviceurl = 3; string source = 4; int32 page = 5; int32 size = 6; } ``` and I try to send a post request in postman with below request args: ``` { &quot;type&quot;:&quot;7&quot;, &quot;serviceurl&quot; :&quot;xxxx&quot;, &quot;reqdata&quot; :{ &quot;key&quot;:&quot;yyyy&quot;, &quot;key_type&quot;:&quot;zzzz&quot;, &quot;model&quot;:&quot;tttt&quot; }, &quot;source&quot;:&quot;3&quot; } ``` and When I checking the logs, I found the reqdata object is empty (not null). ### Expected Behavior The struct object should has data. ### Error Logs _No response_ ### Steps to Reproduce 1. Create a routing from rest to grpc with grpc transcode. 2. and checking whether the grpc service side can receive the correct data. ### Environment apisix:3.0.0</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>19</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>change(jwt-auth): unify apisix/core/vault.lua and apisix/secret/vault.lua (#8660) Fixes https://github.com/apache/apisix/issues/8424</MESSAGE>
    <SHA>c8d5afb5b02a800bb3f7090bc5adb1d26e281d53</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: grpc-transcode plugin: fix map data population (#8731) Fixes https://github.com/apache/apisix/issues/8655</MESSAGE>
      <SHA>736c8f28e26c15d58de1a65f91b8cd406fb174f4</SHA>
      <PATCHEDFILES>
        <FILE>.editorconfig</FILE>
        <FILE>apisix/plugins/grpc-transcode/util.lua</FILE>
        <FILE>t/grpc_server_example/echo.pb</FILE>
        <FILE>t/grpc_server_example/go.mod</FILE>
        <FILE>t/grpc_server_example/main.go</FILE>
        <FILE>t/grpc_server_example/proto/echo.pb.go</FILE>
        <FILE>t/grpc_server_example/proto/echo.proto</FILE>
        <FILE>t/grpc_server_example/proto/echo_grpc.pb.go</FILE>
        <FILE>t/plugin/grpc-transcode3.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
