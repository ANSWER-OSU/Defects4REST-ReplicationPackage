<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3906</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3906</ISSUEURL>
  <TITLE>Why do I limit the server_name value, but still go to the snippet server block</TITLE>
  <DESCRIPTION>### Issue description I enter m.qa.com in the browser and it will go to the server block of qa.com www.qa.com ### Environment ![image](https://user-images.githubusercontent.com/16240260/112417020-bc929800-8d61-11eb-9616-4f882052db1f.png) * apisix version (cmd: `apisix version`): * OS (cmd: `uname -a`): * OpenResty / Nginx version (cmd: `nginx -V` or `openresty -V`): * etcd version, if have (cmd: run `curl http://127.0.0.1:9090/v1/server_info` to get the info from server-info API): * apisix-dashboard version, if have:</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: corrent SRV record priority (#3896) Fix #3895</MESSAGE>
    <SHA>654b1a91a72342a0184ada5158b0144944d72049</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: use the builtin server by default Fix #3906 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>8639a7c8df3472e4e93a41344e78b09c65336ca7</SHA>
      <PATCHEDFILES>
        <FILE>apisix/cli/ngx_tpl.lua</FILE>
        <FILE>t/cli/test_main.sh</FILE>
        <FILE>t/cli/test_snippet.sh</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: use the builtin server by default Fix #3906 Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>ede6b0ecfd36ca4061a2bfcf8f35520e01dd2524</SHA>
      <PATCHEDFILES>
        <FILE>apisix/cli/ngx_tpl.lua</FILE>
        <FILE>t/cli/test_main.sh</FILE>
        <FILE>t/cli/test_snippet.sh</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: use the builtin server by default (#3907) Fix #3906</MESSAGE>
      <SHA>83ab5439a03ebff133a36045b8e9cc3003b8baf0</SHA>
      <PATCHEDFILES>
        <FILE>apisix/cli/ngx_tpl.lua</FILE>
        <FILE>t/cli/test_main.sh</FILE>
        <FILE>t/cli/test_snippet.sh</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
