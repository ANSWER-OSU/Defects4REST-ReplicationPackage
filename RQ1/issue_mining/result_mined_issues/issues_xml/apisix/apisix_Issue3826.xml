<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3826</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3826</ISSUEURL>
  <TITLE>chore: the route_name and service_name in ctx should remain different</TITLE>
  <DESCRIPTION>### Issue description Prerequisite: `route_name`(my-route) is configured in `route`, `service_name`(my-service) is configured in `service`, route_name is different from service_name, and `service` is bound to `route` . Bug: In the plug-in, output `ctx` through core.log.warn(core.json.encode(ctx, true)), and found that ctx.route_name is the same as ctx.service_name, and the value is `my-service`. Reason: During the `merge_service_route` operation, the `route_name` was not merged, resulting in the route_name and service_name being the same. For details, please see the following code snippet: https://github.com/apache/apisix/blob/master/apisix/plugin.lua#L385-L421 https://github.com/apache/apisix/blob/master/apisix/init.lua#L342-L360 I think route_name and service_name should keep their respective values, they should be different.</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: upgrade lua-resty-expr/radixtree to support logical expression (#3809) Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
    <SHA>7047932548a06f3f644c1d1c7fac4995ad32377a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>chore: the route_name and service_name in ctx should remain different close #3826</MESSAGE>
      <SHA>24b2fe3e10d5f62ddc24b43bd14509f262cd6988</SHA>
      <PATCHEDFILES>
        <FILE>apisix/plugin.lua</FILE>
        <FILE>t/core/ctx.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
