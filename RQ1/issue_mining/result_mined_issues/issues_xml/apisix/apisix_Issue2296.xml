<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2296</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/2296</ISSUEURL>
  <TITLE>request help: about prometheus metrics for deny access</TITLE>
  <DESCRIPTION>### Issue description Question 1: monitoring address of apisix Prometheus: http://xx.yy.com/apisix/prometheus/metrics How does Prometheus restrict IP access or /apifix/Prometheus/ metrics to some monitoring servers Question 2: Prometheusmonitoring address: http://xx.yy.com/apisix/prometheus/metrics Can I reduce /apifix/Prometheus/metrics to /metrics 问题1：apisix prometheus 的监控地址：http://xx.yy.com/apisix/prometheus/metrics prometheus 怎么限制IP访问，或是全局的 /apisix/prometheus/metrics 限制到某些监控服务器上 问题2： 普米监控地址：http://xx.yy.com/apisix/prometheus/metrics 能否将 /apisix/prometheus/metrics 减缩为/metrics，要怎么做 ### Environment * apisix version (cmd: `apisix version`):apisix 1.5 * OS:centos 7</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>67</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix(CLI): add Authorization header while enable etcd auth (#2690)</MESSAGE>
    <SHA>009cab65b553dc301a79239b56cfb9e7f2fb6a3a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat(prometheus): allow customizing Prometheus export uri Close #2296.</MESSAGE>
      <SHA>f1b25f7e87acffbae834d5829c9b1a5a2584da93</SHA>
      <PATCHEDFILES>
        <FILE>apisix/api_router.lua</FILE>
        <FILE>apisix/init.lua</FILE>
        <FILE>apisix/plugins/prometheus.lua</FILE>
        <FILE>conf/config-default.yaml</FILE>
        <FILE>doc/plugins/prometheus.md</FILE>
        <FILE>doc/zh-cn/plugins/prometheus.md</FILE>
        <FILE>t/admin/plugins-reload.t</FILE>
        <FILE>t/plugin/prometheus.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat(prometheus): allow customizing Prometheus export uri (#2826) * feat(prometheus): allow customizing Prometheus export uri Close #2296.</MESSAGE>
      <SHA>f267291f3a0c102c879b5c12d02e140ede0f5a4b</SHA>
      <PATCHEDFILES>
        <FILE>apisix/api_router.lua</FILE>
        <FILE>apisix/init.lua</FILE>
        <FILE>apisix/plugins/prometheus.lua</FILE>
        <FILE>conf/config-default.yaml</FILE>
        <FILE>doc/plugins/prometheus.md</FILE>
        <FILE>doc/zh-cn/plugins/prometheus.md</FILE>
        <FILE>t/admin/plugins-reload.t</FILE>
        <FILE>t/plugin/prometheus.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
