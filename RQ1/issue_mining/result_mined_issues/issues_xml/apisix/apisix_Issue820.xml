<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>820</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/820</ISSUEURL>
  <TITLE>bug: upload more than 4096 bytes of grpc proto content and report an error</TITLE>
  <DESCRIPTION>### 上传 gRpc proto 内容超过4096个字节报错 ### Environment * apisix version : 0.8 * OS: CentOS 7.6 ### Minimal test code / Steps to reproduce the issue 1. shell cmd ```bash curl http://127.0.0.1:9080/apisix/admin/proto/1 -X PUT -d 'xxxxxxxxx len=4311' ``` 2. error message ```json {&quot;error_msg&quot;:&quot;invalid configuration: property \&quot;content\&quot; validation failed: string too long, expected at most 4096, got 4311&quot;} ``` 3. code ``` _M.proto = { type = &quot;object&quot;, properties = { content = { type = &quot;string&quot;, minLength = 1, maxLength = 4096 } }, required = {&quot;content&quot;}, additionalProperties = false, } ``` 希望 proto内容的尺寸上限改为一个合理的值.</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>change: don't strip square brackets from the IPv6 (#822) * change: don't strip square brackets from the IPv6 The OpenResty APIs require the IPv6 literal wrapped inside a square brackets. Also add tests for IPv6 upstream and update lua-resty-ipmatcher to 0.3. Fix #816.</MESSAGE>
    <SHA>5e85e93eac1e255a4c37476237ca439a98a421f3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>bugfix: Adjust the MaxLength parameter in grpc proto from 4096b to 1M (#820)</MESSAGE>
      <SHA>170d1dbc67c0dec568fda1e8619ee4832698c491</SHA>
      <PATCHEDFILES>
        <FILE>lua/apisix/schema_def.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>change: adjusted the MaxLength parameter in grpc proto from 4096b to 1M (#820) (#836)</MESSAGE>
      <SHA>bb2876627a0e6a39c40aa9531ff10bde9e924e54</SHA>
      <PATCHEDFILES>
        <FILE>lua/apisix/schema_def.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>plugin(grpc-transcode): support new options for `protocol buffer` encoding. (#846) * bugfix: Adjust the MaxLength parameter in grpc proto from 4096b to 1M (#820) * change: grpc-transcode plugins add schema check</MESSAGE>
      <SHA>b23096139e78064bd9ccf0e70b8539596ceab9c5</SHA>
      <PATCHEDFILES>
        <FILE>doc/plugins/grpc-transcoding-cn.md</FILE>
        <FILE>lua/apisix/plugins/grpc-transcode.lua</FILE>
        <FILE>lua/apisix/plugins/grpc-transcode/request.lua</FILE>
        <FILE>lua/apisix/plugins/grpc-transcode/response.lua</FILE>
        <FILE>lua/apisix/plugins/grpc-transcode/util.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
