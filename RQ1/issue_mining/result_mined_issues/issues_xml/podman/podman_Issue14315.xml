<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14315</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/14315</ISSUEURL>
  <TITLE>podman --remote build --quiet outputs containers build's stderr ouput in client's stdout</TITLE>
  <DESCRIPTION>**Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** When using a remote client, it seems that anything logged in stderr when building the container is being logged to the stdout of the client, even if --quiet was used. This result in an unuseable container image id. Note that without using a remote client, it works as expected (stderr of the container is logged in the stderr stream of the client) **Steps to reproduce the issue:** Tested from a `quay.io/podman/upstream` image run with privileged mode: 1. ``` [root@b561b4a44dcf /]# mkdir /src [root@b561b4a44dcf /]# cat &gt;/src/Dockerfile &lt;&lt;END_OF_FILE FROM quay.io/fedora/fedora RUN echo 'some error' &gt;&amp;2 END_OF_FILE [root@b561b4a44dcf /]# podman system service -t 0 &amp; [1] 23 ``` 2. When trying to build without the remote mode, it works fine: ``` [root@b561b4a44dcf /]# podman build --quiet --no-cache src | sed -e 's/^/Log from stdout: /' some error Log from stdout: e3979e0a57b619d9e6d2035e9fb0c4f8df7c9eed480ba93d6c23b730ef24ce43 ``` 3. However when trying to build with the remote mode, stdout is being corrupted by &quot;some error&quot; while it should not: ``` [root@b561b4a44dcf /]# podman --remote build --quiet --no-cache src | sed -e 's/^/Log from stdout: /' Log from stdout: some error Log from stdout: e5431e43fc7a867e33f83475f5a2fe7ab47c6747d9eef736d11d18e8b677669c ``` **Describe the results you received:** stdout is corrupted in remote mode. **Describe the results you expected:** stdout should contain only the final built image id. **Additional information you deem important (e.g. issue happens only occasionally):** **Output of `podman version`:** ``` [root@b561b4a44dcf /]# podman version Client: Podman Engine Version: 4.2.0-dev API Version: 4.2.0-dev Go Version: go1.16.15 Git Commit: 68e45555b3dfc9662ce71b6ff548b43c9ea8d50c Built: Mon May 9 18:23:55 2022 OS/Arch: linux/amd64 ```</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #14274 from edsantiago/dependabot_release_notes_none dependabot: add release-note-none label</MESSAGE>
    <SHA>5c51e1d26ea7cb942008cf0e740bc16cb44bb2cf</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>compat, build: suppress step errors when quiet is set Match with docker API and suppress step errors when field quiet is set. Closes: https://github.com/containers/podman/issues/14315 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt;</MESSAGE>
      <SHA>2133edb2ca18820585f260db287bd40a57e7b4a2</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/images_build.go</FILE>
        <FILE>test/apiv2/10-images.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>compat, build: suppress step errors when quiet is set Match with docker API and suppress step errors when field quiet is set. Closes: https://github.com/containers/podman/issues/14315 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt;</MESSAGE>
      <SHA>a1b203a05e554396cfb06da90c48e18191b617ac</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/images_build.go</FILE>
        <FILE>test/apiv2/10-images.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>compat, build: suppress step errors when quiet is set Match with docker API and suppress step errors when field quiet is set. Closes: https://github.com/containers/podman/issues/14315 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt;</MESSAGE>
      <SHA>31517453ddc36095d341fdd8f1ac744a7f4ba336</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/images_build.go</FILE>
        <FILE>test/apiv2/10-images.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>compat, build: suppress step errors when quiet is set Match with docker API and suppress step errors when field quiet is set. Closes: https://github.com/containers/podman/issues/14315 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt;</MESSAGE>
      <SHA>c7276525b2f8929a1a54635d15abbfe52cd77ad5</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/images_build.go</FILE>
        <FILE>test/apiv2/10-images.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>compat, build: suppress step errors when quiet is set Match with docker API and suppress step errors when field quiet is set. Closes: https://github.com/containers/podman/issues/14315 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt; Signed-off-by: tomsweeneyredhat &lt;tsweeney@redhat.com&gt;</MESSAGE>
      <SHA>48e614d44e9555b89bd0a438be3d62b5fff7bc8e</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/images_build.go</FILE>
        <FILE>test/apiv2/10-images.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
