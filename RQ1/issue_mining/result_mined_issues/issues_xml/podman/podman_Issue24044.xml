<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24044</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/24044</ISSUEURL>
  <TITLE>CI: system tests: netns leak</TITLE>
  <DESCRIPTION>Placeholder for a known flake wherein network namespaces are being leaked at the end of a system test run, even when all tests pass: ``` # +netns-UUID # # ^^^^^ Leaks found in /run/netns ^^^^^ ``` All `podman network create` commands use safename, AFAICT, so this is a difficult one to track down. * debian-13 : sys podman debian-13 root host sqlite * PR #24041 * [09-23 10:26](https://api.cirrus-ci.com/v1/artifact/task/6470503882293248/html/sys-podman-debian-13-root-host-sqlite.log.html#t--00333) in [sys] teardown_suite * PR #23275 * [09-18 16:19](https://api.cirrus-ci.com/v1/artifact/task/6180671972966400/html/sys-podman-debian-13-root-host-sqlite.log.html#t--00279) in [sys] teardown_suite * fedora-40 : sys podman fedora-40 rootless host boltdb * PR #24007 * [09-18 14:54](https://api.cirrus-ci.com/v1/artifact/task/5097768144863232/html/sys-podman-fedora-40-rootless-host-boltdb.log.html#t--00349) in [sys] teardown_suite * fedora-40-aarch64 : sys podman fedora-40-aarch64 root host sqlite * PR #24019 * [09-19 17:46](https://api.cirrus-ci.com/v1/artifact/task/5401513768517632/html/sys-podman-fedora-40-aarch64-root-host-sqlite.log.html#t--00332) in [sys] teardown_suite | x | x | x | x | x | x | | ---: | ---: | ---: | ---: | ---: | ---: | | sys(4) | podman(4) | debian-13(2) | root(3) | host(4) | sqlite(3) | | | | fedora-40-aarch64(1) | rootless(1) | | boltdb(1) | | | | fedora-40(1) | | | |</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>8</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #24064 from dgibson/no-bind-inside test/system: For pasta port forwarding tests don't bind socat server</MESSAGE>
    <SHA>76a932189d4389f7a3fa6a48ab6008ea9ff856c3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>libpod: ensure we are not killed during netns creation When we are killed during netns setup it will leak the netns path as it was not commited in the db. This is rather common if you run systemctl stop on a podman systemd unit. Of course we cannot protect against SIGKILL but in systemd case we get SIGTERM and we really should not exit in a critical section like this. Fixes #24044 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>2de82d523b8b6104b978817b47ad3c06f42cf00f</SHA>
      <PATCHEDFILES>
        <FILE>libpod/container_internal_linux.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
