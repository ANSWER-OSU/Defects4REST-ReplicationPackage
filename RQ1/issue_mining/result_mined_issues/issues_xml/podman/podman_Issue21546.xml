<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>21546</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/21546</ISSUEURL>
  <TITLE>e2e: runc 1.12: seccomp tests failing</TITLE>
  <DESCRIPTION>Placeholder for someone (probably me) to fix. e2e seccomp tests are [failing in debian](https://api.cirrus-ci.com/v1/artifact/task/4739661814300672/html/int-podman-debian-13-rootless-host-sqlite.log.html#t--Podman-run-podman-run-seccomp-test--1): ``` $ podman [options] run --security-opt seccomp=/tmp/podman_test3061954120/seccomp.json quay.io/libpod/alpine:latest pwd Error: runc: runc create failed: unable to start container process: failed to verify if current working directory is safe: operation not permitted: OCI permission denied ``` Reason: seccomp tests set up a bogus policy that forbids `getcwd`, but here's `runc-1.12` : https://github.com/opencontainers/runc/blob/main/libcontainer/init_linux.go#L278-L296 Solution: come up with an alternate way to test</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix the build on main [NO NEW TESTS NEEDED] Signed-off-by: Matt Heon &lt;mheon@redhat.com&gt;</MESSAGE>
    <SHA>f7f4d1064df9bdd945e783277f135e832c97662b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bump CI VMs to ones with netavark 1.10.3 And, runc-1.12 broke our seccomp e2e tests (runc now calls getcwd(), which is the dummy syscall blocked for testing seccomp). Switch to blocking link() instead. Also, disable v4.1.0 upgrade tests. They're hanging, and I have no idea why, and have wasted most of a day debugging. Fixes: #21546 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>5eb801a5621ab2e37dd2ae6bb72f169f12d47b79</SHA>
      <PATCHEDFILES>
        <FILE>.cirrus.yml</FILE>
        <FILE>test/e2e/play_kube_test.go</FILE>
        <FILE>test/e2e/run_networking_test.go</FILE>
        <FILE>test/e2e/run_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
