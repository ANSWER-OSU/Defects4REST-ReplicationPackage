<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15577</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/15577</ISSUEURL>
  <TITLE>XDG_CONFIG_HOME changes the contents of the `podman machine list`</TITLE>
  <DESCRIPTION>&lt;!-- --------------------------------------------------- BUG REPORT INFORMATION --------------------------------------------------- Use the commands below to provide key information from your environment: You do NOT have to include this information if this is a FEATURE REQUEST **NOTE** A large number of issues reported against Podman are often found to already be fixed in more current versions of the project. Before reporting an issue, please verify the version you are running with `podman version` and compare it to the latest release documented on the top of Podman's [README.md](../README.md). If they differ, please update your version of Podman to the latest possible and retry your command before creating an issue. Also, there is a running list of known issues in the [Podman Troubleshooting Guide](https://github.com/containers/podman/blob/main/troubleshooting.md), please reference that page before opening a new issue. If you are filing a bug against `podman build`, please instead file a bug against Buildah (https://github.com/containers/buildah/issues). Podman build executes Buildah to perform container builds, and as such the Buildah maintainers are best equipped to handle these bugs. --&gt; **Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** The contents of the `podman machine list` seem to change depending on the value of the `XDG_CONFIG_HOME` environment variable. Apparently, this is because podman machine configs are managed in `$XDG_CONFIG_HOME/containers/podman/machine/qemu/*`, but I couldn't find the behavior about this in the documentation and was confused for a while. Is this the intended behavior? **Steps to reproduce the issue:** 1. `podman machine init` 2. `podman machine list` &lt;- I can see the default machine 3. `export XDG_CONFIG_HOME=&quot;$HOME/.config/some-dir&quot;` 4. `podman machine list` &lt;- I cannot see any machine **Describe the results you received:** No machines are listed by running `podman machine list` with `XDG_CONFIG_HOME` set. **Describe the results you expected:** All machines are listed by running `podman machine list` even if `XDG_CONFIG_HOME` is set. **Additional information you deem important (e.g. issue happens only occasionally):** Nothing. **Output of `podman version`:** ``` Client: Podman Engine Version: 4.2.0 API Version: 4.2.0 Go Version: go1.18.5 Built: Thu Aug 11 05:46:05 2022 OS/Arch: darwin/arm64 Server: Podman Engine Version: 4.2.0 API Version: 4.2.0 Go Version: go1.18.4 Built: Thu Aug 11 23:43:11 2022 OS/Arch: linux/arm64 ``` **Output of `podman info`:** ``` host: arch: arm64 buildahVersion: 1.27.0 cgroupControllers: - cpu - io - memory - pids cgroupManager: systemd cgroupVersion: v2 conmon: package: conmon-2.1.0-2.fc36.aarch64 path: /usr/bin/conmon version: 'conmon version 2.1.0, commit: ' cpuUtilization: idlePercent: 99.2 systemPercent: 0.65 userPercent: 0.15 cpus: 1 distribution: distribution: fedora variant: coreos version: &quot;36&quot; eventLogger: journald hostname: localhost.localdomain idMappings: gidmap: - container_id: 0 host_id: 1000 size: 1 - container_id: 1 host_id: 100000 size: 1000000 uidmap: - container_id: 0 host_id: 501 size: 1 - container_id: 1 host_id: 100000 size: 1000000 kernel: 5.18.18-200.fc36.aarch64 linkmode: dynamic logDriver: journald memFree: 1710198784 memTotal: 2051895296 networkBackend: netavark ociRuntime: name: crun package: crun-1.5-1.fc36.aarch64 path: /usr/bin/crun version: |- crun version 1.5 commit: 54ebb8ca8bf7e6ddae2eb919f5b82d1d96863dea spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +YAJL os: linux remoteSocket: exists: true path: /run/user/501/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: true seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: true serviceIsRemote: true slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns-1.2.0-0.2.beta.0.fc36.aarch64 version: |- slirp4netns version 1.2.0-beta.0 commit: 477db14a24ff1a3de3a705e51ca2c4c1fe3dda64 libslirp: 4.6.1 SLIRP_CONFIG_VERSION_MAX: 3 libseccomp: 2.5.3 swapFree: 0 swapTotal: 0 uptime: 0h 23m 9.00s plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan volume: - local registries: search: - docker.io store: configFile: /var/home/core/.config/containers/storage.conf containerStore: number: 0 paused: 0 running: 0 stopped: 0 graphDriverName: overlay graphOptions: {} graphRoot: /var/home/core/.local/share/containers/storage graphRootAllocated: 106825756672 graphRootUsed: 15214620672 graphStatus: Backing Filesystem: xfs Native Overlay Diff: &quot;true&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 50 runRoot: /run/user/501/containers volumePath: /var/home/core/.local/share/containers/storage/volumes version: APIVersion: 4.2.0 Built: 1660228991 BuiltTime: Thu Aug 11 23:43:11 2022 GitCommit: &quot;&quot; GoVersion: go1.18.4 Os: linux OsArch: linux/arm64 Version: 4.2.0 ``` **Package info (e.g. output of `rpm -q podman` or `apt list podman`):** `brew list podman` outputs: ``` /opt/homebrew/Cellar/podman/4.2.0/bin/podman /opt/homebrew/Cellar/podman/4.2.0/bin/podman-mac-helper /opt/homebrew/Cellar/podman/4.2.0/bin/podman-remote /opt/homebrew/Cellar/podman/4.2.0/etc/bash_completion.d/podman /opt/homebrew/Cellar/podman/4.2.0/libexec/gvproxy /opt/homebrew/Cellar/podman/4.2.0/share/fish/vendor_completions.d/podman.fish /opt/homebrew/Cellar/podman/4.2.0/share/man/ (167 files) /opt/homebrew/Cellar/podman/4.2.0/share/zsh/site-functions/_podman ``` **Have you tested with the latest version of Podman and have you checked the Podman Troubleshooting Guide? (https://github.com/containers/podman/blob/main/troubleshooting.md)** Yes **Additional environment details (AWS, VirtualBox, physical, etc.):** MacBook Air (M1, 2020) macOS Monterey 12.4 --- Thanks.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>41</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #16084 from vrothberg/health-check-fix health checks: make on-failure action retry aware</MESSAGE>
    <SHA>5908996738daf0fe7463f21d58affc60d279466b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Man pages: Add mention of behavior due to XDG_CONFIG_HOME When the `XDG_CONFIG_HOME` environment variable is changed, for example, to switch development contexts, the behavior of the podman-machine can be confusing. The documentation had not mentioned this, and this commit adds these mentions. Closes: https://github.com/containers/podman/issues/15577 Signed-off-by: Naoaki Ueda &lt;nao@uedder.com&gt;</MESSAGE>
      <SHA>a52f2c0c1ad9b5d5153c70fb8c700bd6a619f2e9</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-list.1.md</FILE>
        <FILE>docs/source/markdown/podman-machine.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
