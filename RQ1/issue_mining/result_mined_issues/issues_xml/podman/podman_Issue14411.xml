<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14411</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/14411</ISSUEURL>
  <TITLE>Podman Volume Import does not work after performing Podman Volume Export</TITLE>
  <DESCRIPTION>&lt;!-- --------------------------------------------------- BUG REPORT INFORMATION --------------------------------------------------- Use the commands below to provide key information from your environment: You do NOT have to include this information if this is a FEATURE REQUEST **NOTE** A large number of issues reported against Podman are often found to already be fixed in more current versions of the project. Before reporting an issue, please verify the version you are running with `podman version` and compare it to the latest release documented on the top of Podman's [README.md](../README.md). If they differ, please update your version of Podman to the latest possible and retry your command before creating an issue. Also, there is a running list of known issues in the [Podman Troubleshooting Guide](https://github.com/containers/podman/blob/main/troubleshooting.md), please reference that page before opening a new issue. If you are filing a bug against `podman build`, please instead file a bug against Buildah (https://github.com/containers/buildah/issues). Podman build executes Buildah to perform container builds, and as such the Buildah maintainers are best equipped to handle these bugs. --&gt; **Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** &lt;!-- Briefly describe the problem you are having in a few paragraphs. `podman volume export` can successfully export to a tarball, but `podman volume import` fails on that tarball with the following error: ``` [bblasco@bblasco-t490s tmp]$ podman volume import somedata jenkins-data.tar Error: no volume data found ``` I have tried the same with a number of container images and on both Fedora 35 and Fedora 36 systems and the outcome is always the same. --&gt; **Steps to reproduce the issue:** 1. Run a container as a regular or root user, e.g. ``` podman run \ --name jenkins-blueocean \ --rm \ --detach \ --publish 18080:8080 \ --publish 50000:50000 \ --volume jenkins-data:/var/jenkins_home \ --volume jenkins-docker-certs:/certs/client:ro \ --tz=local \ docker.io/jenkinsci/blueocean:latest ``` Image pulls and runs successfully 2. Export a volume (doesn't seem to matter whether the container is running or not), which should be successful ``` podman volume export jenkins-data -o=jenkins-data.tar ``` 3. Try to import the created tarball as a new volume (which will fail) ``` [bblasco@nuc ~]$ podman volume import jenkins-data-restored jenkins-data.tar Error: no volume data found ``` 4. Try to export/import in one line as per instructions here: https://docs.podman.io/en/latest/markdown/podman-volume-import.1.html ``` [bblasco@nuc ~]$ podman volume export jenkins-data | podman volume import jenkins-data-restored - Error: no volume data found ``` **Describe the results you received:** `podman volume import` fails as follows [bblasco@bblasco-t490s tmp]$ podman volume import somedata jenkins-data.tar Error: no volume data found **Describe the results you expected:** Volume should have imported successfully and a new volume visible in `podman volume ls` **Additional information you deem important (e.g. issue happens only occasionally):** Always happens on both podman 3.4.7 and 4.1.0 **Output of `podman version`:** On Fedora 36 ``` [bblasco@nuc ~]$ podman version Client: Podman Engine Version: 4.1.0 API Version: 4.1.0 Go Version: go1.18 Built: Sat May 7 02:15:54 2022 OS/Arch: linux/amd64 ``` On Fedora 35: ``` [bblasco@bblasco-t490s tmp]$ podman version Version: 3.4.7 API Version: 3.4.7 Go Version: go1.16.15 Built: Thu Apr 21 23:14:26 2022 OS/Arch: linux/amd64 ``` **Output of `podman info --debug`:** On Fedora 36 ``` [bblasco@nuc ~]$ podman info --debug host: arch: amd64 buildahVersion: 1.26.1 cgroupControllers: - memory - pids cgroupManager: systemd cgroupVersion: v2 conmon: package: conmon-2.1.0-2.fc36.x86_64 path: /usr/bin/conmon version: 'conmon version 2.1.0, commit: ' cpuUtilization: idlePercent: 98.24 systemPercent: 0.99 userPercent: 0.77 cpus: 8 distribution: distribution: fedora variant: server version: &quot;36&quot; eventLogger: journald hostname: nuc.lan [75/105] idMappings: gidmap: - container_id: 0 host_id: 1000 size: 1 - container_id: 1 host_id: 100000 size: 65536 uidmap: - container_id: 0 host_id: 1000 size: 1 - container_id: 1 host_id: 100000 size: 65536 kernel: 5.17.11-300.fc36.x86_64 linkmode: dynamic logDriver: journald memFree: 32822419456 memTotal: 33521385472 networkBackend: netavark ociRuntime: name: crun package: crun-1.4.5-1.fc36.x86_64 path: /usr/bin/crun version: |- crun version 1.4.5 commit: c381048530aa750495cf502ddb7181f2ded5b400 spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +YAJL [45/105] os: linux remoteSocket: path: /run/user/1000/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_ SETUID,CAP_SYS_CHROOT rootless: true seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: true serviceIsRemote: false slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns-1.2.0-0.2.beta.0.fc36.x86_64 version: |- slirp4netns version 1.2.0-beta.0 commit: 477db14a24ff1a3de3a705e51ca2c4c1fe3dda64 libslirp: 4.6.1 SLIRP_CONFIG_VERSION_MAX: 3 libseccomp: 2.5.3 swapFree: 8589930496 swapTotal: 8589930496 uptime: 2m 27.74s plugins: log: - k8s-file - none - passthrough - journald [15/105] network: - bridge - macvlan volume: - local registries: search: - registry.fedoraproject.org - registry.access.redhat.com - docker.io - quay.io store: configFile: /home/bblasco/.config/containers/storage.conf containerStore: number: 0 paused: 0 running: 0 stopped: 0 graphDriverName: overlay graphOptions: {} graphRoot: /home/bblasco/.local/share/containers/storage graphRootAllocated: 16095641600 graphRootUsed: 4544729088 graphStatus: Backing Filesystem: xfs Native Overlay Diff: &quot;true&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 0 runRoot: /run/user/1000/containers volumePath: /home/bblasco/.local/share/containers/storage/volumes version: APIVersion: 4.1.0 Built: 1651853754 BuiltTime: Sat May 7 02:15:54 2022 GitCommit: &quot;&quot; GoVersion: go1.18 Os: linux OsArch: linux/amd64 Version: 4.1.0 [bblasco@nuc ~]$ ``` **Package info (e.g. output of `rpm -q podman` or `apt list podman`):** ``` [bblasco@nuc ~]$ rpm -q podman podman-4.1.0-1.fc36.x86_64 ``` **Have you tested with the latest version of Podman and have you checked the Podman Troubleshooting Guide? (https://github.com/containers/podman/blob/main/troubleshooting.md)** Yes **Additional environment details (AWS, VirtualBox, physical, etc.):** Baremetal deployment on Fedora 36 on an Intel NUC.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #14383 from jwhonce/wip/info_todo Add Authorization field to Plugins for Info</MESSAGE>
    <SHA>a550af260a536aeaa35e4b8810971748a6f16f5f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>podman volume export/import: give better error When the volume does not exist we should output an error stating so and not some generic one. Fixes #14411 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>ec576a54917d902df0de2daa1935ca22b102a2b9</SHA>
      <PATCHEDFILES>
        <FILE>cmd/podman/volumes/export.go</FILE>
        <FILE>cmd/podman/volumes/import.go</FILE>
        <FILE>docs/source/markdown/podman-volume-import.1.md</FILE>
        <FILE>docs/source/markdown/podman-volume.1.md</FILE>
        <FILE>test/e2e/volume_create_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
