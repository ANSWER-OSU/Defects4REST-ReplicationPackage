<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14640</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/14640</ISSUEURL>
  <TITLE>proxy settings are not applied when using `podman machine init --now` while it is using `init` and then `start`</TITLE>
  <DESCRIPTION>**Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** Instead of doing `podman machine init` and then `podman machine start`, do `podman machine init --now` **Steps to reproduce the issue:** 1. edit containers.conf file and add http_proxy/https_proxy env variables ``` [containers] [engine] env = [&quot;https_proxy=http://10.0.0.123:9090&quot;, &quot;http_proxy=http://10.0.0.123:9090&quot;] ``` 2. do `podman machine init --now` 3. then connect to ssh to the machine ``` $ podman machine ssh ``` 4. check environment variables ``` env | grep http ``` there is nothing ! 5. now, instead of doing `podman machine init --now`, do that in two steps `podman machine init` and then `podman machine start` connect to the ssh machine: `podman machine ssh` and check env ``` env | grep http https_proxy=http://10.0.0.123:9090 http_proxy=http://10.0.0.123:9090 ``` env variables are set **Describe the results you received:** proxy settings are not set **Describe the results you expected:** proxy settings are set **Additional information you deem important (e.g. issue happens only occasionally):** **Output of `podman version`:** ``` (paste your output here) ``` **Output of `podman info --debug`:** ``` (paste your output here) ``` **Package info (e.g. output of `rpm -q podman` or `apt list podman`):** ``` (paste your output here) ``` **Have you tested with the latest version of Podman and have you checked the Podman Troubleshooting Guide? (https://github.com/containers/podman/blob/main/troubleshooting.md)** Yes/No **Additional environment details (AWS, VirtualBox, physical, etc.):**</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>9</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #14657 from eriksjolund/rewrite_env_docs [CI:DOCS] Rewrite --env docs</MESSAGE>
    <SHA>55052c6b9807b5a51b50abc90e391e872be450c2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>podman machine init --now: respect proxy envs podman machine start contains more logic than just the simple vm.Start() call. Instead of duplicating this into inti we just call start(). [NO NEW TESTS NEEDED] I have no way to test this right now. Fixes #14640 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>46da7bc78f95a267e1c3faadea1725ec6b3dfb46</SHA>
      <PATCHEDFILES>
        <FILE>cmd/podman/machine/init.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
