<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>25572</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/25572</ISSUEURL>
  <TITLE>CI: podman run - idmapped mounts issue with vfs</TITLE>
  <DESCRIPTION>``` not ok 67 |030| podman run - idmapped mounts in 1214ms # tags: ci:parallel # (from function `bail-now' in file test/system/[helpers.bash, line 187](https://github.com/containers/podman/blob/a2810f492480de043c52287ccddd57013d8a4565/test/system/helpers.bash#L187), # from function `die' in file test/system/[helpers.bash, line 970](https://github.com/containers/podman/blob/a2810f492480de043c52287ccddd57013d8a4565/test/system/helpers.bash#L970), # in test file test/system/[030-run.bats, line 1420](https://github.com/containers/podman/blob/a2810f492480de043c52287ccddd57013d8a4565/test/system/030-run.bats#L1420)) # `die &quot;Cannot create idmap mount: $output&quot;' failed # &lt;+ &gt; # # podman image mount quay.io/libpod/testimage:20241011 &lt;+077ms&gt; # /var/lib/containers/storage/vfs/dir/5fb2677d7366b1f97f4a4d2851f47b11938cf2d6310523a61f43ab71b2b14e13 # &lt;+093ms&gt; # # podman image unmount quay.io/libpod/testimage:20241011 &lt;+149ms&gt; # b82e560ed57b77a897379e160371adcf1b000ca885e69c62cbec674777a83850 # &lt;+031ms&gt; # # podman run --security-opt label=disable --rm --uidmap=0:1000:10000 --rootfs /tmp/CI_X5P0/podman_bats.nlXqdd/rootfs:idmap true &lt;+324ms&gt; # Error: crun: open `/tmp/CI_X5P0/podman_bats.nlXqdd/rootfs/run/.containerenv`: No such file or directory: OCI runtime attempted to invoke a command that was not found &lt;+015ms&gt; # [ rc=127 ] # #/vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv # #| FAIL: Cannot create idmap mount: Error: crun: open `/tmp/CI_X5P0/podman_bats.nlXqdd/rootfs/run/.containerenv`: No such file or directory: OCI runtime attempted to invoke a command that was not found # #\^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ # # [teardown] ``` I have seen this a few times already so reporting this, AFAICT it always fails on the `run/.containerenv` path, not idea why this would be flaky. Log: https://api.cirrus-ci.com/v1/artifact/task/4599002940833792/html/sys-podman-fedora-41-root-host-boltdb.log.html</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>13</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #25638 from containers/renovate/setuptools-77.x chore(deps): update dependency setuptools to v77</MESSAGE>
    <SHA>94e77af09dfcf4fe7f6105e909b0d8f4e718de99</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>vendor: update c/{common,storage} Closes: https://github.com/containers/podman/issues/25572 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>a04b6b3bb899e4f203eb57fa7528fdb89405944f</SHA>
      <PATCHEDFILES>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>vendor/github.com/containers/common/libimage/copier.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/history.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/import.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/layer_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/load.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/manifest_list.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/pull.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/push.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/runtime.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/save.go</FILE>
        <FILE>vendor/github.com/containers/common/libnetwork/internal/util/create.go</FILE>
        <FILE>vendor/github.com/containers/common/libnetwork/internal/util/validate.go</FILE>
        <FILE>vendor/github.com/containers/common/libnetwork/types/define.go</FILE>
        <FILE>vendor/github.com/containers/common/pkg/config/default.go</FILE>
        <FILE>vendor/github.com/containers/storage/.cirrus.yml</FILE>
        <FILE>vendor/github.com/containers/storage/CONTRIBUTING.md</FILE>
        <FILE>vendor/github.com/containers/storage/Makefile</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/diff.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/diff_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_darwin.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_windows.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/fileutils/exists_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/idtools/idtools_supported.go</FILE>
        <FILE>vendor/github.com/containers/storage/store.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/CHANGELOG.md</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo/build/build_command.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo/command/command.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo/internal/compile.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo/run/run_command.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo/watch/watch_command.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/ginkgo_t_dsl.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/types/config.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/types/errors.go</FILE>
        <FILE>vendor/github.com/onsi/ginkgo/v2/types/version.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/CHANGELOG.md</FILE>
        <FILE>vendor/github.com/onsi/gomega/format/format.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gbytes/buffer.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gbytes/say_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gexec/exit_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gexec/session.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gomega_dsl.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/elements.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/fields.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/ignore.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/keys.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/pointer.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/gstruct/types.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/assertion.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/async_assertion.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/duration_bundle.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/gomega.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/polling_signal_error.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/internal/vetoptdesc.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/and.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/assignable_to_type_of_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_a_directory.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_a_regular_file.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_an_existing_file.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_closed_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_comparable_to_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_element_of_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_empty_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_equivalent_to_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_false_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_identical_to.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_key_of_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_nil_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_numerically_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_sent_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_temporally_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_true_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/be_zero_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/consist_of.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/contain_element_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/contain_elements_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/contain_substring_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/equal_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_cap_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_each_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_exact_elements.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_existing_field_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_field.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_http_body_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_http_header_with_value_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_http_status_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_key_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_key_with_value_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_len_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_occurred_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_prefix_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_suffix_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/have_value.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/match_error_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/match_json_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/match_regexp_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/match_xml_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/match_yaml_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/not.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/or.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/panic_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/receive_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/satisfy_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/semi_structured_data_support.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/succeed_matcher.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/support/goraph/bipartitegraph/bipartitegraph.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/support/goraph/node/node.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/type_support.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/matchers/with_transform.go</FILE>
        <FILE>vendor/github.com/onsi/gomega/types/types.go</FILE>
        <FILE>vendor/github.com/opencontainers/selinux/go-selinux/label/label.go</FILE>
        <FILE>vendor/github.com/opencontainers/selinux/go-selinux/label/label_linux.go</FILE>
        <FILE>vendor/github.com/opencontainers/selinux/go-selinux/label/label_stub.go</FILE>
        <FILE>vendor/github.com/opencontainers/selinux/go-selinux/selinux.go</FILE>
        <FILE>vendor/github.com/opencontainers/selinux/go-selinux/selinux_linux.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/client.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/fsync.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/hardlink.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/openssh.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/posix-rename.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/statvfs.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/.travis.yml</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/LICENSE</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/LICENSE.libyaml</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/NOTICE</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/README.md</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/apic.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/decode.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/emitterc.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/encode.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/parserc.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/readerc.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/resolve.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/scannerc.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/sorter.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/writerc.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/yaml.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/yamlh.go</FILE>
        <FILE>vendor/gopkg.in/yaml.v2/yamlprivateh.go</FILE>
        <FILE>vendor/modules.txt</FILE>
        <FILE>vendor/tags.cncf.io/container-device-interface/pkg/cdi/spec.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>vendor: update c/{common,storage} Closes: https://github.com/containers/podman/issues/25572 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>048ea682ac5f7a733e964031b5b1b64839253830</SHA>
      <PATCHEDFILES>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>vendor/github.com/containers/common/libimage/history.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/layer_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/runtime.go</FILE>
        <FILE>vendor/github.com/containers/storage/.cirrus.yml</FILE>
        <FILE>vendor/github.com/containers/storage/CONTRIBUTING.md</FILE>
        <FILE>vendor/github.com/containers/storage/Makefile</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/diff.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/diff_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_darwin.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_windows.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/fileutils/exists_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/idtools/idtools_supported.go</FILE>
        <FILE>vendor/github.com/containers/storage/store.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/client.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/fsync.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/hardlink.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/openssh.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/posix-rename.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/statvfs.go</FILE>
        <FILE>vendor/modules.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>vendor: update c/{common,storage} Closes: https://github.com/containers/podman/issues/25572 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>7f592742b8785c0a67238c9538dab7bc2f172320</SHA>
      <PATCHEDFILES>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>pkg/domain/infra/abi/images.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/history.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/image_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/layer_tree.go</FILE>
        <FILE>vendor/github.com/containers/common/libimage/runtime.go</FILE>
        <FILE>vendor/github.com/containers/storage/.cirrus.yml</FILE>
        <FILE>vendor/github.com/containers/storage/CONTRIBUTING.md</FILE>
        <FILE>vendor/github.com/containers/storage/Makefile</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/archive/diff.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/archive.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/diff_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_darwin.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/chrootarchive/init_windows.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/fileutils/exists_unix.go</FILE>
        <FILE>vendor/github.com/containers/storage/pkg/idtools/idtools_supported.go</FILE>
        <FILE>vendor/github.com/containers/storage/store.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/client.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/fsync.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/hardlink.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/openssh.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/posix-rename.go</FILE>
        <FILE>vendor/github.com/pkg/sftp/internal/encoding/ssh/filexfer/openssh/statvfs.go</FILE>
        <FILE>vendor/modules.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
