<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19671</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/19671</ISSUEURL>
  <TITLE>Containers created with `--restart=always` do not restart when started through a pod</TITLE>
  <DESCRIPTION>### Issue Description containers created with `--restart=always` do not restart when they exit, when started through the parent pod ### Steps to reproduce the issue Steps to reproduce the issue 1. podman pod create --name test-pod 2. podman create --restart=always --pod test-pod docker.io/bash exit 0 3. podman pod start test-pod 4. `podman ps -a` ### Describe the results you received See that the container `Exited (127) N seconds ago` and is not restarting ### Describe the results you expected I think `--restart=always` should always restart the container if it exits regardless of how it's started ### podman info output ```yaml 4.6.0 ``` ### Podman in a container No ### Privileged Or Rootless None ### Upstream Latest Release Yes ### Additional environment details Additional environment details ### Additional information Additional information like issue happens only occasionally or issue happens with a particular architecture or on a particular setting</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #19516 from baude/stopgvproxy Stop gvproxy on hyperv machine stop</MESSAGE>
    <SHA>20f28e538d21aef62eb8159e6689e4e71ade0b87</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>use container restart policy if user specifies one Fixes: https://github.com/containers/podman/issues/19671 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>67756ac604b47339a55b134304679406bf9118a3</SHA>
      <PATCHEDFILES>
        <FILE>pkg/specgen/generate/container_create.go</FILE>
        <FILE>test/system/200-pod.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>use container restart policy if user specifies one Fixes: https://github.com/containers/podman/issues/19671 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>a917a6cfe05431c29025364767a3a77163132b7e</SHA>
      <PATCHEDFILES>
        <FILE>pkg/specgen/generate/container_create.go</FILE>
        <FILE>test/system/200-pod.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>use container restart policy if user specifies one Fixes: https://github.com/containers/podman/issues/19671 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>fbd20cbefcc44c26018bcb6d6dab4a6419b65b3d</SHA>
      <PATCHEDFILES>
        <FILE>pkg/specgen/generate/container_create.go</FILE>
        <FILE>test/system/200-pod.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
