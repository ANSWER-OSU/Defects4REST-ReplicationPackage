<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19612</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/19612</ISSUEURL>
  <TITLE>CI: pasta: ICMP echo test: 100% packet loss</TITLE>
  <DESCRIPTION>Seeing this often in CI and gating: ``` [+1568s] not ok 554 podman networking with pasta(1) - ICMP echo request ... &lt;+072ms&gt; # $ podman run --net=pasta quay.io/libpod/testimage:20221018 sh -c ping -c3 -W1 $(sed -nr &quot;s/^nameserver[ ]{1,}([^.]*).(.*)/\1.\2/p&quot; /etc/resolv.conf | head -1) &lt;+3.37s&gt; # PING 169.254.169.254 (169.254.169.254): 56 data bytes # # --- 169.254.169.254 ping statistics --- # 3 packets transmitted, 0 packets received, 100% packet loss &lt;+005ms&gt; # [ rc=1 (** EXPECTED 0 **) ] ``` ### [sys] podman networking with pasta(1) - ICMP echo request * fedora-38 : sys podman fedora-38 rootless host boltdb * [08-09 22:09](https://api.cirrus-ci.com/v1/artifact/task/5497811299467264/html/sys-podman-fedora-38-rootless-host-boltdb.log.html#t--00554) * fedora-38 : sys podman fedora-38 rootless host sqlite * [08-11 09:27](https://api.cirrus-ci.com/v1/artifact/task/5723234134392832/html/sys-podman-fedora-38-rootless-host-sqlite.log.html#t--00557) * [08-03 20:32](https://api.cirrus-ci.com/v1/artifact/task/4969047473782784/html/sys-podman-fedora-38-rootless-host-sqlite.log.html#t--00552) * fedora-38 : sys remote fedora-38 rootless host sqlite [remote] * [08-11 16:05](https://api.cirrus-ci.com/v1/artifact/task/4870920423079936/html/sys-remote-fedora-38-rootless-host-sqlite.log.html#t--00557) * rawhide : sys podman rawhide rootless host sqlite * [08-10 20:40](https://api.cirrus-ci.com/v1/artifact/task/6108747446091776/html/sys-podman-rawhide-rootless-host-sqlite.log.html#t--00557) It's a flake in CI, but [not in gating](https://artifacts.dev.testing-farm.io/9e7d4f68-3a08-4400-90b4-de81cbeed237/work-tests.ymlxrl21qwf/tests-juh1y1y0/test.podman-rootless-cgroupsv2.bats.log), that one seems 100% reproducible.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #19631 from matejvasek/backport-pull-param-fix [v4.6] fix: pull parma parsing for the /build compat ep</MESSAGE>
    <SHA>9d077406c7598376e8c2ecec5cfc8eb1569bba6a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Skip tests that fail in gating SELinux tests are failing in f37, f38, Rawhide. (Did I miss any?) Assume that the new container-selinux will never be available on any of those, so let's just skip those tests. #19376 Pasta ICMP test fails pretty consistently in Gating, and is even flaking in Cirrus, so let's skip that too. #19612 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>180869e4d31d1a56cb443e25da3fa6e4116d5a7c</SHA>
      <PATCHEDFILES>
        <FILE>test/system/410-selinux.bats</FILE>
        <FILE>test/system/505-networking-pasta.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>CI: systests: remove pasta ICMP tests IPv6 test has been hard-skipped for six months. IPv4 test is flaking in Cirrus and hard-failing in Gating. Absent a reliable way to test in CI and gating, and absent a strong reason to test ICMP in pasta anyway, the solution is simple. Closes: #19612 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>e38cf33a66cb438298ac73a3226d0c19b7ba9220</SHA>
      <PATCHEDFILES>
        <FILE>test/system/505-networking-pasta.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>CI: systests: remove pasta ICMP tests IPv6 test has been hard-skipped for six months. IPv4 test is flaking in Cirrus and hard-failing in Gating. Absent a reliable way to test in CI and gating, and absent a strong reason to test ICMP in pasta anyway, the solution is simple. Closes: #19612 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>b3952fd27bc0b232824c68dce8ce0d9aad725e61</SHA>
      <PATCHEDFILES>
        <FILE>test/system/505-networking-pasta.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
