<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24081</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/24081</ISSUEURL>
  <TITLE>error when using a variable for PublishPort in systemd .container</TITLE>
  <DESCRIPTION>### Feature request description Atm if I use variable for `PublishPort` such as `PublishPort=${PORT}:${PORT}`, quadlet dryrun would show error message and quadlet cannot generate systemd service &gt; invalid port format '${PORT}' While we may use variable for `Volume`, why not `PublishPort` :3 ### Suggest potential solution As the discussion: #24072 &gt; The reason it does not work for ports is that Quadlet does some validation checks: https://github.com/containers/podman/blob/main/pkg/systemd/quadlet/quadlet.go#L1957 &gt; Quadlet should only validate/parse the input when there's a strong reason, Quadlet could just pass on the value to --publish and let Podman take it from there ### Have you considered any alternatives? _No response_ ### Additional context _No response_</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #24113 from mtrmac/chunked-encryption Document that zstd:chunked is downgraded to zstd when encrypting</MESSAGE>
    <SHA>a3ba5ff320ffee1c6e0cb45e0dcbe4ada0033add</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>quadlet: allow variables in PublishPort There is no reason to validate the args here, first podman may change the syntax so this is just duplication that may hurt us long term. It also added special handling of some options that just do not make sense, i.e. removing 0.0.0.0, podman should really be the only parser here. And more importantly this prevents variables from being used. Fixes #24081 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>abc4cfb049c75a61ee4fb0d6cdb04e59c7056681</SHA>
      <PATCHEDFILES>
        <FILE>pkg/systemd/quadlet/quadlet.go</FILE>
        <FILE>test/e2e/quadlet/ports.container</FILE>
        <FILE>test/e2e/quadlet/ports.kube</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
