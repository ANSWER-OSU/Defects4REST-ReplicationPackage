<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>17958</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/17958</ISSUEURL>
  <TITLE>e2e: play kube symlink: missing hello</TITLE>
  <DESCRIPTION>``` podman play kube should be able to run image where workdir is a symlink ... Expected &lt;string&gt;: to contain substring &lt;string&gt;: hello ``` in [int remote f37 root sqlite](https://api.cirrus-ci.com/v1/artifact/task/5944004907368448/html/int-remote-fedora-37-root-host-sqlite.log.html#t--podman-play-kube-should-be-able-to-run-image-where-workdir-is-a-symlink--1) To my untrained eye it looks like a race: https://github.com/containers/podman/blob/2cfb6e1c0e10033d90559d2fdb682cb80616e878/test/e2e/play_kube_test.go#L1940-L1947 (there should be a &quot;wait&quot; somewhere, either `--wait` in the play, or a subsequent `podman wait`). Hardly seems worth the effort of filing an issue, it'd be quicker to just fix it in a PR... but the *correct* solution is to walk through the entire test file and look for other such issues, and that's a job for later.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>9</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #18069 from cevich/fix_build_aarch64_dep Cirrus: Fix aarch64 clone_script 404 errors</MESSAGE>
    <SHA>19463738c2f4512e118c4a12c6422a66537a6edb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>e2e tests: fix racy flakes ...mostly just test code that wasn't doing the required waits. My first approach in the kube-play test was to add &quot;--wait&quot;. Bit mistake! The --wait flag, counterintuitively and counter to documentation, actually destroys all pods+containers+everything on exit. (Or tries -- see #17803). Since this violates POLA and is undocumented, I include here a fix to the man page. Despite my best intentions, I can't reasonably check every single test for missing waits, especially in kube-play where failing containers will get retried forever so we can't wait. We'll just have to fix flakes as we see them. Fixes: #17958 Fixes: #18071 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>761eca9e75dd8366ed71ca2162712681419b66ef</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-kube-play.1.md.in</FILE>
        <FILE>test/e2e/logs_test.go</FILE>
        <FILE>test/e2e/play_kube_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
