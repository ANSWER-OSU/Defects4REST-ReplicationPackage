<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>22031</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/22031</ISSUEURL>
  <TITLE>make validate fails locally</TITLE>
  <DESCRIPTION>### Issue Description `make validate` is a tool for developers to ensure there PRs and code will pass basic validation expected by CI on github. It currently fails like: ``` [baude@baudework podman (norqdpolicy)]$ make validate VERSION=1.56.2 ./hack/install_golangci.sh golangci-lint has version 1.56.2 built with go1.22.0 from 58a724a0 on 2024-02-15T18:01:51Z Using existing ./bin/golangci-lint has version 1.56.2 built with go1.22.0 from 58a724a0 on 2024-02-15T18:01:51Z hack/golangci-lint.sh run Running golangci-lint for ABI Build Tags ABI: apparmor,seccomp,selinux,systemd Skipped directories ABI: + ./bin/golangci-lint run --timeout=10m --build-tags=apparmor,seccomp,selinux,systemd --skip-dirs= Running golangci-lint for TUNNEL Build Tags TUNNEL: apparmor,seccomp,selinux,remote Skipped directories TUNNEL: pkg/api,pkg/domain/infra/abi + ./bin/golangci-lint run --timeout=10m --build-tags=apparmor,seccomp,selinux,remote --skip-dirs=pkg/api,pkg/domain/infra/abi Running golangci-lint for REMOTE Build Tags REMOTE: remote,containers_image_openpgp Skipped directories REMOTE: libpod/events,pkg/api,pkg/domain/infra/abi,pkg/machine/qemu,pkg/trust,test + ./bin/golangci-lint run --timeout=10m --build-tags=remote,containers_image_openpgp --skip-dirs=libpod/events,pkg/api,pkg/domain/infra/abi,pkg/machine/qemu,pkg/trust,test Linting vs commit 'c2695fc9d2aa72237bf33ad74b0db52adf44a93f' /home/baude/.local/bin/pre-commit run -a Fix End of Files.........................................................Passed Trim Trailing Whitespace.................................................Passed Mixed line ending........................................................Passed check BOM - deprecated: use fix-byte-order-marker........................Passed Check that executables have shebangs.....................................Passed Check for merge conflicts................................................Passed Check Yaml...............................................................Passed make -C test/tools build/git-validation make[1]: Entering directory '/home/baude/go/src/github.com/containers/podman/test/tools' make[1]: 'build/git-validation' is up to date. make[1]: Leaving directory '/home/baude/go/src/github.com/containers/podman/test/tools' Validating vs commit 'c2695fc9d2aa72237bf33ad74b0db52adf44a93f' GIT_CHECK_EXCLUDE=&quot;./vendor:./test/tools/vendor:docs/make.bat:test/buildah-bud/buildah-tests.diff:test/e2e/quadlet/remap-keep-id2.container&quot; ./test/tools/build/git-validation -run short-subject -range c2695fc9d2aa72237bf33ad74b0db52adf44a93f..HEAD INFO[0000] using commit range: c2695fc9d2aa72237bf33ad74b0db52adf44a93f..HEAD * ae94a2d39c &quot;do not require policy.json&quot; ... PASS # Check if the files can be loaded by the shell . completions/bash/podman if [ -x /bin/zsh ]; then /bin/zsh completions/zsh/_podman; fi if [ -x /bin/fish ]; then /bin/fish completions/fish/podman.fish; fi CGO_ENABLED=1 GOOS=linux GOARCH=amd64 go build \ \ -ldflags '-X github.com/containers/podman/v5/libpod/define.gitCommit=ae94a2d39caae6908bf789955b720f35d513b511-dirty -X github.com/containers/podman/v5/libpod/define.buildInfo=1710338184 -X github.com/containers/podman/v5/libpod/config._installPrefix=/usr/local -X github.com/containers/podman/v5/libpod/config._etcDir=/etc -X github.com/containers/podman/v5/pkg/systemd/quadlet._binDir=/usr/local/bin -X github.com/containers/common/pkg/config.additionalHelperBinariesDir= ' \ -tags &quot; systemd exclude_graphdriver_devicemapper seccomp&quot; \ -o bin/podman ./cmd/podman test -z &quot;-Z&quot; || chcon -t container_runtime_exec_t bin/podman hack/man-page-checker hack/xref-helpmsgs-manpages hack/man-page-table-check hack/xref-quadlet-docs hack/swagger-check contrib/cirrus/pr-should-include-tests pr-should-include-tests: cannot query github: $CIRRUS_PR is undefined make: *** [Makefile:707: tests-included] Error 1 ``` I assume this is due to the recent change to no longer use [NO NEW TESTS NEEDED] in our commit messages and instead use GH labels. ### Steps to reproduce the issue Steps to reproduce the issue 1. make validate ### Describe the results you received in initial report above ### Describe the results you expected it should complete assuming validate tasks also pass ### podman info output ```yaml main branch ``` ### Podman in a container No ### Privileged Or Rootless None ### Upstream Latest Release Yes ### Additional environment details Additional environment details ### Additional information Additional information like issue happens only occasionally or issue happens with a particular architecture or on a particular setting</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #21864 from l0rd/compress-refactoring-v5-plus-plus Machine decompress.go refactoring follow-up</MESSAGE>
    <SHA>c25bfe1c8cfd7023599eb8540ce945708180ebb6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Makefile: drop tests-included from validate target make validate should work locally, this check makes no sense in a local context as it checks for a github label. To fix this remove this check from the validate target and only use it as part of the CI validate run. While at it remove old dnf install step, the issue has been closed for a long time and it should already be part of our base images. Fixes #22031 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>dbf38779bde1df2f9b434817c60ca937a01a780c</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
        <FILE>contrib/cirrus/runner.sh</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
