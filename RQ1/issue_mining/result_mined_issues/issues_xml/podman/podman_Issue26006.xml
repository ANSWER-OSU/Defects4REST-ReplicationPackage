<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>26006</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/26006</ISSUEURL>
  <TITLE>Build warnings when building on FreeBSD</TITLE>
  <DESCRIPTION>### Issue Description When compiling the latest `main` on FreeBSD, I see various errors. They appear to be because the build is using BSD version of `grep` and `sed` even though the top-level Makefile has logic to use the GNU variants: ``` 69 ifeq ($(NATIVE_GOOS),freebsd) 70 $(error what $(NATIVE_GOOS)) 71 SED=gsed 72 GREP=ggrep 73 MAN_L= mandoc 74 # FreeBSD needs CNI until netavark is supported 75 BUILDTAGS += cni 76 else 77 $(error what $(NATIVE_GOOS)) 78 SED=sed 79 GREP=grep 80 MAN_L= man -l 81 endif ``` ### Steps to reproduce the issue Steps to reproduce the issue 1. On FreeBSD, check out the `main` branch and build. 2. Try using the resulting podman executable. ### Describe the results you received Warnings during the build, resulting executable does not use the `cni` network backend by default. ### Describe the results you expected No warnings, a functional podman executable. ### podman info output ``` $ uname -a FreeBSD xinde 15.0-CURRENT FreeBSD 15.0-CURRENT #322 main-n275473-5778cbdae761: Sun Feb 16 05:03:29 UTC 2025 root@pkg-main:/usr/obj/root/freebsd/amd64.amd64/sys/GENERIC-NODEBUG amd64 ``` ### Podman in a container No ### Privileged Or Rootless None ### Upstream Latest Release Yes ### Additional environment details FreeBSD ### Additional information Additional information like issue happens only occasionally or issue happens with a particular architecture or on a particular setting</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #26010 from Luap99/bindings-pull pkg/bindings: fix infinite loop/memory leak in image pull</MESSAGE>
    <SHA>1e4287d54cf81787d2b15fa86143884475fc17e2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Makefile: move some Go-related variable definitions up Otherwise we evaluate NATIVE_GOOS before it is set, which breaks the FreeBSD build. Fixes: #26006</MESSAGE>
      <SHA>e1bde6731d16913308b1f6b2db9c882577ae2298</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Makefile: move some Go-related variable definitions up Otherwise we evaluate NATIVE_GOOS before it is set, which breaks the FreeBSD build. Fixes: #26006 Signed-off-by: Mark Johnston &lt;mark.johnston@klarasystems.com&gt;</MESSAGE>
      <SHA>606a60c5d7374c5447995c348515190a27e2e50d</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Makefile: move some Go-related variable definitions up Otherwise we evaluate NATIVE_GOOS before it is set, which breaks the FreeBSD build since various make variables are not set correctly. Fixes: #26006 Signed-off-by: Mark Johnston &lt;mark.johnston@klarasystems.com&gt;</MESSAGE>
      <SHA>ad20e257d6ccd45440600a4aae2a13ff4c9011f6</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Makefile: move some Go-related variable definitions up Otherwise we evaluate NATIVE_GOOS before it is set, which breaks the FreeBSD build since various make variables are not set correctly. Fixes: #26006 Signed-off-by: Mark Johnston &lt;mark.johnston@klarasystems.com&gt;</MESSAGE>
      <SHA>b4047fced91abfbca05fa7aba71dfcb212bafb5c</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
