<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>21856</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/21856</ISSUEURL>
  <TITLE>podman machine notify users it is pulling image</TITLE>
  <DESCRIPTION>### Feature request description When issuing `podman machine init` (default logging) I don't see something for 3s. I have the feeling that something is not working and may abort my command. current output: https://github.com/containers/podman/assets/436777/4e5be711-ea50-44e3-977f-00ed1fe8cb36 ### Suggest potential solution Maybe display a progress line before `Getting image source signatures`` I've enabled logging trace and I'm wondering if it could not go faster on a first run ``` ./bin/darwin/podman machine init --log-level=DEBUG INFO[0000] ./bin/darwin/podman filtering at log level debug DEBU[0000] Using Podman machine with `applehv` virtualization provider DEBU[0000] socket length for /Users/benoitf/.config/containers/podman/machine/applehv is 56 DEBU[0000] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv is 61 DEBU[0000] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv/cache is 67 DEBU[0000] socket length for /var/folders/_s/rlbw3qg15vx0j6vr4l7kd1hm0000gn/T/podman is 55 DEBU[0000] socket length for /Users/benoitf/.config/containers/podman/machine/applehv is 56 DEBU[0000] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv is 61 DEBU[0000] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv/cache is 67 DEBU[0000] socket length for /var/folders/_s/rlbw3qg15vx0j6vr4l7kd1hm0000gn/T/podman is 55 DEBU[0000] socket length for /Users/benoitf/.config/containers/podman/machine/applehv/podman-machine-default.json is 84 DEBU[0000] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv/podman-machine-default-arm64.raw is 94 DEBU[0000] Using registries.d directory /etc/containers/registries.d DEBU[0000] Loading registries configuration &quot;/etc/containers/registries.conf&quot; DEBU[0000] Trying to access &quot;quay.io/baude/stage-podman-machine:5.0&quot; DEBU[0000] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.config/containers/auth.json DEBU[0000] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.config/containers/auth.json DEBU[0000] Found an empty credential entry &quot;quay.io&quot; in &quot;/Users/benoitf/.docker/config.json&quot; (an unhandled credential helper marker?), moving on DEBU[0000] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.dockercfg DEBU[0000] No credentials for quay.io/baude/stage-podman-machine found DEBU[0000] No signature storage configuration found for quay.io/baude/stage-podman-machine:5.0, using built-in default file:///Users/benoitf/.local/share/containers/sigstore DEBU[0000] Looking for TLS certificates and private keys in /etc/docker/certs.d/quay.io DEBU[0000] GET https://quay.io/v2/ DEBU[0000] Ping https://quay.io/v2/ status 401 DEBU[0000] GET https://quay.io/v2/auth?scope=repository%3Abaude%2Fstage-podman-machine%3Apull&amp;service=quay.io DEBU[0000] Increasing token expiration to: 60 seconds DEBU[0000] GET https://quay.io/v2/baude/stage-podman-machine/manifests/5.0 DEBU[0001] Content-Type from manifest GET is &quot;application/vnd.oci.image.index.v1+json&quot; DEBU[0001] found image in digest: &quot;sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4&quot; DEBU[0001] GET https://quay.io/v2/baude/stage-podman-machine/manifests/sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4 DEBU[0001] Content-Type from manifest GET is &quot;application/vnd.oci.image.manifest.v1+json&quot; DEBU[0001] original artifact file name: stage-podman-machine.aarch64.applehv.raw.zst DEBU[0001] GET https://quay.io/v2/baude/stage-podman-machine/manifests/sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4 DEBU[0001] Content-Type from manifest GET is &quot;application/vnd.oci.image.manifest.v1+json&quot; DEBU[0001] original artifact file name: stage-podman-machine.aarch64.applehv.raw.zst DEBU[0001] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv/cache/e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4.raw.zst is 140 DEBU[0001] socket length for /Users/benoitf/.local/share/containers/podman/machine/applehv/cache/e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4 is 132 DEBU[0001] Using registries.d directory /etc/containers/registries.d DEBU[0001] Trying to access &quot;quay.io/baude/stage-podman-machine@sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4&quot; DEBU[0001] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.config/containers/auth.json DEBU[0001] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.config/containers/auth.json DEBU[0001] Found an empty credential entry &quot;quay.io&quot; in &quot;/Users/benoitf/.docker/config.json&quot; (an unhandled credential helper marker?), moving on DEBU[0001] No credentials matching quay.io/baude/stage-podman-machine found in /Users/benoitf/.dockercfg DEBU[0001] No credentials for quay.io/baude/stage-podman-machine found DEBU[0001] No signature storage configuration found for quay.io/baude/stage-podman-machine@sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4, using built-in default file:///Users/benoitf/.local/share/containers/sigstore DEBU[0001] Looking for TLS certificates and private keys in /etc/docker/certs.d/quay.io DEBU[0001] GET https://quay.io/v2/ DEBU[0001] Ping https://quay.io/v2/ status 401 DEBU[0001] GET https://quay.io/v2/auth?scope=repository%3Abaude%2Fstage-podman-machine%3Apull&amp;service=quay.io DEBU[0002] Increasing token expiration to: 60 seconds DEBU[0002] GET https://quay.io/v2/baude/stage-podman-machine/manifests/sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4 DEBU[0002] Content-Type from manifest GET is &quot;application/vnd.oci.image.manifest.v1+json&quot; DEBU[0002] Error creating a SQLite blob info cache at /Users/benoitf/.local/share/containers/cache/blob-info-cache-v1.sqlite, using a memory-only cache: beginning transaction: Binary was compiled with 'CGO_ENABLED=0', go-sqlite3 requires cgo to work. This is a stub DEBU[0002] IsRunningImageAllowed for image docker:quay.io/baude/stage-podman-machine@sha256:e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4 DEBU[0002] Using default policy section DEBU[0002] Requirement 0: allowed DEBU[0002] Overall: allowed Getting image source signatures DEBU[0002] Reading /Users/benoitf/.local/share/containers/sigstore/baude/stage-podman-machine@sha256=e9fc482fc0e1903329a98d41030fbaada99e7418b6c7cbf1fc6642fc797a7fe4/signature-1 DEBU[0002] Not looking for sigstore attachments: disabled by configuration DEBU[0002] Manifest has MIME type application/vnd.oci.image.manifest.v1+json, ordered candidate list [application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json] DEBU[0002] ... will first try using the original manifest unmodified DEBU[0002] Checking if we can reuse blob sha256:f5eabb5ac7db2dd9a0ec61c1db771bb7b4e194f9dd19a6bb5dbb3a9378c37bc2: general substitution = true, compression for MIME type &quot;application/zstd&quot; = false DEBU[0002] Downloading /v2/baude/stage-podman-machine/blobs/sha256:f5eabb5ac7db2dd9a0ec61c1db771bb7b4e194f9dd19a6bb5dbb3a9378c37bc2 DEBU[0002] GET https://quay.io/v2/baude/stage-podman-machine/blobs/sha256:f5eabb5ac7db2dd9a0ec61c1db771bb7b4e194f9dd19a6bb5dbb3a9378c37bc2 Copying blob f5eabb5ac7db [--------------------------------------] 0.0b / 812.5MiB | 0.0 b/s DEBU[0002] Detected compression format zstd DEBU[0002] Compression change for blob sha256:f5eabb5ac7db2dd9a0ec61c1db771bb7b4e194f9dd19a6bb5dbb3a9378c37bc2 (&quot;application/zstd&quot;) not supported Copying blob f5eabb5ac7db [===&gt;----------------------------------] 86.7MiB / 812.5MiB | 59.7 MiB/s ``` ### Have you considered any alternatives? A clear and concise description of any alternative solutions or features you've considered. ### Additional context Add any other context or screenshots about the feature request here.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #18442 from Luap99/e2e-noerrout test/e2e: check for stderr errors in cleanup()</MESSAGE>
    <SHA>5a4864c3408647075619b27ffa65b0e2779f3e33</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>machine init: print output to improve UX As outlined in #21856, it can take a number of seconds until an image gets pulled. That is because init is hitting the registry first to look up the image. To improve the UX, add a new line indicating what happens. [NO NEW TESTS NEEDED] Fixes: #21856 Signed-off-by: Valentin Rothberg &lt;vrothberg@redhat.com&gt;</MESSAGE>
      <SHA>e09444327a32d4c6d40ea6cb0a58c16dfcdf84a1</SHA>
      <PATCHEDFILES>
        <FILE>pkg/machine/ocipull/ociartifact.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
