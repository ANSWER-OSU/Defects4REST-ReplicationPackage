<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20548</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/20548</ISSUEURL>
  <TITLE>Windows HyperV &amp; WSL CI: High test failure rates</TITLE>
  <DESCRIPTION>### Issue Description Apologies for not opening this sooner, as it's important this isn't forgotten - The addition of these tests came with a [TODO: remove ignore failures](https://github.com/containers/podman/pull/20177#issuecomment-1749397783) enabled by [a few yaml lines](https://github.com/containers/podman/pull/20177/files#diff-62587956f943bb2503db7bc6dd27d0d888074a1c0ecaab3f570ad611aff0f7bbR773-R775). [A recent run shows they're still mostly failing (log)](https://cirrus-ci.com/task/5432166931234816) for hyperv [and wsl (log)](https://cirrus-ci.com/task/5995116884656128). # IMPORTANT NOTE When this issue is resolved, somebody MUST re-add the task into the dependency list for the `Total Success` aggregation task. Ref: https://github.com/containers/podman/pull/20852 --- ### Steps to reproduce the issue Steps to reproduce the issue 1. [Remove these .cirrus.yml lines](https://github.com/containers/podman/pull/20177/files#diff-62587956f943bb2503db7bc6dd27d0d888074a1c0ecaab3f570ad611aff0f7bbR773-R775) 2. Run CI ### Describe the results you received HyperV: `FAIL! -- 6 Passed | 27 Failed | 0 Pending | 5 Skipped` WSL: `FAIL! -- 14 Passed | 20 Failed | 0 Pending | 4 Skipped` ### Describe the results you expected Both testing tasks should pass ### podman info output ```yaml host: arch: amd64 buildahVersion: 1.33.0-dev cgroupControllers: - cpuset - cpu - io - memory - hugetlb - pids - rdma - misc cgroupManager: systemd cgroupVersion: v2 conmon: package: conmon-2.1.8-2.fc39.x86_64 path: /usr/bin/conmon version: 'conmon version 2.1.8, commit: ' cpuUtilization: idlePercent: 52.67 systemPercent: 17.44 userPercent: 29.89 cpus: 2 databaseBackend: sqlite distribution: distribution: fedora variant: cloud version: &quot;39&quot; eventLogger: journald freeLocks: 2045 hostname: cirrus-task-4728479489458176 idMappings: gidmap: null uidmap: null kernel: 6.5.5-300.fc39.x86_64 linkmode: dynamic logDriver: journald memFree: 2691989504 memTotal: 4091293696 networkBackend: netavark networkBackendInfo: backend: netavark dns: package: aardvark-dns-1.8.0-1.fc39.x86_64 path: /usr/libexec/podman/aardvark-dns version: aardvark-dns 1.8.0 package: netavark-1.8.0-2.fc39.x86_64 path: /usr/libexec/podman/netavark version: netavark 1.8.0 ociRuntime: name: crun package: crun-1.9.2-1.fc39.x86_64 path: /usr/bin/crun version: |- crun version 1.9.2 commit: 35274d346d2e9ffeacb22cc11590b0266a23d634 rundir: /run/crun spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +LIBKRUN +WASM:wasmedge +YAJL os: linux pasta: executable: /usr/bin/pasta package: passt-0^20230908.g05627dc-1.fc39.x86_64 version: | pasta 0^20230908.g05627dc-1.fc39.x86_64 Copyright Red Hat GNU General Public License, version 2 or later &lt;https://www.gnu.org/licenses/old-licenses/gpl-2.0.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. remoteSocket: exists: false path: /run/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: true serviceIsRemote: false slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns-1.2.1-1.fc39.x86_64 version: |- slirp4netns version 1.2.1 commit: 09e31e92fa3d2a1d3ca261adaeb012c8d75a8194 libslirp: 4.7.0 SLIRP_CONFIG_VERSION_MAX: 4 libseccomp: 2.5.3 swapFree: 4090490880 swapTotal: 4090490880 uptime: 0h 34m 25.00s variant: &quot;&quot; plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan - ipvlan volume: - local registries: docker.io: Blocked: false Insecure: false Location: mirror.gcr.io MirrorByDigestOnly: false Mirrors: null Prefix: docker.io PullFromMirror: &quot;&quot; docker.io/library: Blocked: false Insecure: false Location: quay.io/libpod MirrorByDigestOnly: false Mirrors: null Prefix: docker.io/library PullFromMirror: &quot;&quot; localhost:5000: Blocked: false Insecure: true Location: localhost:5000 MirrorByDigestOnly: false Mirrors: null Prefix: localhost:5000 PullFromMirror: &quot;&quot; search: - docker.io - quay.io - registry.fedoraproject.org store: configFile: /usr/share/containers/storage.conf containerStore: number: 0 paused: 0 running: 0 stopped: 0 graphDriverName: overlay graphOptions: overlay.mountopt: nodev,metacopy=on graphRoot: /var/lib/containers/storage graphRootAllocated: 213588619264 graphRootUsed: 2693640192 graphStatus: Backing Filesystem: btrfs Native Overlay Diff: &quot;false&quot; Supports d_type: &quot;true&quot; Supports shifting: &quot;true&quot; Supports volatile: &quot;true&quot; Using metacopy: &quot;true&quot; imageCopyTmpDir: /var/tmp imageStore: number: 1 runRoot: /run/containers/storage transientStore: false volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.8.0-dev Built: 1698770126 BuiltTime: Tue Oct 31 11:35:26 2023 GitCommit: 55b9ea3ec738f224e63e0f5b6b96a1f41e97b7a1 GoVersion: go1.21.1 Os: linux OsArch: linux/amd64 Version: 4.8.0-dev ``` ### Podman in a container No ### Privileged Or Rootless Rootless ### Upstream Latest Release Yes ### Additional environment details Windows Server 2022 ### Additional information _No response_</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>155</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #20841 from ashley-cui/wsldeadlock Fix locking error in WSL machine rm -f</MESSAGE>
    <SHA>f2f7d60741cb001ef7d706c79fcb013f9803d3c8</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Enable win podman-machine test failure Intended to serve as motivation to fix them. Removed from status aggregator so the failures don't block PR merging. Updated comment text to reference related open issue, #20548. Signed-off-by: Chris Evich &lt;cevich@redhat.com&gt;</MESSAGE>
      <SHA>f9e8585c5354748b2a77ed65d214adfe7c6ae5fe</SHA>
      <PATCHEDFILES>
        <FILE>.cirrus.yml</FILE>
        <FILE>contrib/cirrus/cirrus_yaml_test.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
