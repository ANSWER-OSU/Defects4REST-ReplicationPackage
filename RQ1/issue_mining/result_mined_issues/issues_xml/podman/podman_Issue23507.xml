<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23507</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23507</ISSUEURL>
  <TITLE>race: podman mount: updating container xyz: no such container</TITLE>
  <DESCRIPTION>In window 1, as root: ```console # while :;do podman mount || break;done ``` This will happily just sit there. Now go to window 2: ```console # podman run --rm quay.io/libpod/testimage:20240123 date ``` Window 1 will instantly barf: ``` 19d83801ace3 /var/lib/containers/storage/overlay/4908217374b7e5615af7772e34c4e851f889a4854e8ca32c23daf40f632c78d8/merged Error: updating container 19d83801ace3af59261a330032c1286341bf29cf1cf2a01272e84b58fff17ef8 state: no container with ID 19d83801ace3af59261a330032c1286341bf29cf1cf2a01272e84b58fff17ef8 found in database: no such container ``` (If for some reason you can't reproduce, just uparrow a few times, or put the `podman run date` in a loop)</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #23513 from containers/renovate/common-image-and-storage-deps fix(deps): update github.com/containers/common digest to c0cc6b7</MESSAGE>
    <SHA>7e469996b19752e24c69c43c44919ca7b3dee362</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Remove another race condition when mounting containers or images Fixes: https://github.com/containers/podman/issues/23507 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>abd586cb1cdc547790c00f87bf06b7809bbfa26f</SHA>
      <PATCHEDFILES>
        <FILE>pkg/domain/infra/abi/containers.go</FILE>
        <FILE>pkg/domain/infra/abi/images.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
