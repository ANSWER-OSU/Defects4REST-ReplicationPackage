<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15408</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/15408</ISSUEURL>
  <TITLE>Deleting a container in a pod doesn't send a pod event</TITLE>
  <DESCRIPTION>/kind bug **Description** When a podman container in a pod is removed there is not pod event sent out to inform a client to refresh it's pod state. This causes a bug in cockpit-podman, the pod state is not updated and therefore the pod removal dialog will show that it will remove the already removed container. https://github.com/cockpit-project/cockpit-podman/issues/1075 **Steps to reproduce the issue:** 1. podman pod --create testpod 2. podman create --pod test --rm --name test1 archlinux -d 3. podman rm test1 **Describe the results you received:** We receive a container removal event, but no pod event. **Describe the results you expected:** Either the container removal event references the pod it is part of or a separate pod event is sent. **Additional information you deem important (e.g. issue happens only occasionally):** **Output of `podman version`:** ``` 4.2.0 ``` **Have you tested with the latest version of Podman and have you checked the Podman Troubleshooting Guide? (https://github.com/containers/podman/blob/main/troubleshooting.md)** Yes</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>32</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #15895 from dcermak/don-expose-dev-for-privileged Don't mount /dev/ inside privileged containers running systemd</MESSAGE>
    <SHA>08993516a939576fa009db6e7ed32524026a822d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Events for containers in pods now include the pod's ID This allows tools like Cockpit to know that the pod in question has also been updated, so they can refresh the list of containers in the pod. Fixes #15408 Signed-off-by: Matthew Heon &lt;matthew.heon@pm.me&gt;</MESSAGE>
      <SHA>6ee582315bfba8db13541406f6def26ecd8f6aeb</SHA>
      <PATCHEDFILES>
        <FILE>libpod/events.go</FILE>
        <FILE>libpod/events/config.go</FILE>
        <FILE>libpod/events/events.go</FILE>
        <FILE>libpod/events/journal_linux.go</FILE>
        <FILE>pkg/domain/entities/events.go</FILE>
        <FILE>test/apiv2/27-containersEvents.at</FILE>
        <FILE>test/e2e/events_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
