<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14897</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/14897</ISSUEURL>
  <TITLE>Prettify also pod units, move container image below</TITLE>
  <DESCRIPTION>**Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind feature **Description** Hey there, thank you for implementing #13337. I would suggest to expand the improvement also to pod units, and if possible placing the container line in a new line istead of the one used by the last option in container units. **Pod units** BEFORE: ```ini # pod-appname.service # autogenerated by Podman 4.1.1 # Mon Jul 11 16:13:49 CEST 2022 [Unit] Description=Podman pod-appname.service Documentation=man:podman-generate-systemd(1) Wants=network-online.target After=network-online.target RequiresMountsFor= Requires=container-appname-server.service Before=container-appname-server.service [Service] Environment=PODMAN_SYSTEMD_UNIT=%n Restart=on-failure TimeoutStopSec=70 ExecStartPre=/bin/rm -f %t/pod-appname.pid %t/pod-appname.pod-id ExecStartPre=/usr/bin/podman pod create --infra-conmon-pidfile %t/pod-appname.pid --pod-id-file %t/pod-appname.pod-id --name appname --publish 127.0.0.1:40080:8080 --publish 127.0.0.1:40081:8081 --userns keep-id --replace ExecStart=/usr/bin/podman pod start --pod-id-file %t/pod-appname.pod-id ExecStop=/usr/bin/podman pod stop --ignore --pod-id-file %t/pod-appname.pod-id -t 10 ExecStopPost=/usr/bin/podman pod rm --ignore -f --pod-id-file %t/pod-appname.pod-id PIDFile=%t/pod-appname.pid Type=forking [Install] WantedBy=default.target% ``` AFTER: ```ini # pod-appname.service # autogenerated by Podman 4.1.1 # Mon Jul 11 16:13:49 CEST 2022 [Unit] Description=Podman pod-appname.service Documentation=man:podman-generate-systemd(1) Wants=network-online.target After=network-online.target RequiresMountsFor= Requires=container-appname-server.service container-appname-redis.service Before=container-appname-server.service container-appname-redis.service [Service] Environment=PODMAN_SYSTEMD_UNIT=%n Restart=on-failure TimeoutStopSec=70 ExecStartPre=/bin/rm -f %t/pod-appname.pid %t/pod-appname.pod-id ExecStartPre=/usr/bin/podman pod create \ --infra-conmon-pidfile %t/pod-appname.pid \ --pod-id-file %t/pod-appname.pod-id \ --name appname \ --publish 127.0.0.1:40080:8080 \ --publish 127.0.0.1:40081:8081 \ --userns keep-id \ --replace ExecStart=/usr/bin/podman pod start --pod-id-file %t/pod-appname.pod-id ExecStop=/usr/bin/podman pod stop --ignore --pod-id-file %t/pod-appname.pod-id -t 10 ExecStopPost=/usr/bin/podman pod rm --ignore -f --pod-id-file %t/pod-appname.pod-id PIDFile=%t/pod-appname.pid Type=forking [Install] WantedBy=default.target% ``` **Container units** BEFORE: ```ini # container-appname-server.service # autogenerated by Podman 4.1.1 # Mon Jul 11 16:13:49 CEST 2022 [Unit] Description=Podman container-appname-server.service Documentation=man:podman-generate-systemd(1) Wants=network-online.target After=network-online.target RequiresMountsFor=%t/containers BindsTo=pod-appname.service container-appname-redis.service After=pod-appname.service container-appname-redis.service [Service] Environment=PODMAN_SYSTEMD_UNIT=%n Restart=on-failure TimeoutStopSec=70 ExecStartPre=/bin/rm -f %t/%n.ctr-id ExecStart=/usr/bin/podman run \ --cidfile=%t/%n.ctr-id \ --cgroups=no-conmon \ --rm \ --pod-id-file %t/pod-appname.pod-id \ --sdnotify=conmon \ -d \ --replace \ --name appname-server \ --requires appname-redis \ --label io.containers.autoupdate=registry \ --memory 1G \ --volume /home/podman/containers/storage/appname/server/cache:/cache \ --volume /home/podman/containers/storage/appname/server/data:/data docker.io/library/appname:latest ExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id ExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id Type=notify NotifyAccess=all [Install] WantedBy=default.target ``` AFTER: ```ini # container-appname-server.service # autogenerated by Podman 4.1.1 # Mon Jul 11 16:13:49 CEST 2022 [Unit] Description=Podman container-appname-server.service Documentation=man:podman-generate-systemd(1) Wants=network-online.target After=network-online.target RequiresMountsFor=%t/containers BindsTo=pod-appname.service container-appname-redis.service After=pod-appname.service container-appname-redis.service [Service] Environment=PODMAN_SYSTEMD_UNIT=%n Restart=on-failure TimeoutStopSec=70 ExecStartPre=/bin/rm -f %t/%n.ctr-id ExecStart=/usr/bin/podman run \ --cidfile=%t/%n.ctr-id \ --cgroups=no-conmon \ --rm \ --pod-id-file %t/pod-appname.pod-id \ --sdnotify=conmon \ -d \ --replace \ --name appname-server \ --requires appname-redis \ --label io.containers.autoupdate=registry \ --memory 1G \ --volume /home/podman/containers/storage/appname/server/cache:/cache \ --volume /home/podman/containers/storage/appname/server/data:/data \ docker.io/library/appname:latest ExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id ExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id Type=notify NotifyAccess=all [Install] WantedBy=default.target ``` **Output of `podman version`:** ``` Client: Podman Engine Version: 4.1.1 API Version: 4.1.1 Go Version: go1.18.3 Git Commit: f73d8f8875c2be7cd2049094c29aff90b1150241 Built: Fri Jun 24 10:38:04 2022 OS/Arch: linux/arm64 ```</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>71</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #15859 from edsantiago/docs_format_events [CI:DOCS] man pages: document some --format options</MESSAGE>
    <SHA>30231d0da7e6dcf3d6d1f45b10150baae35aaf28</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Improve generate systemd format Fixes: https://github.com/containers/podman/issues/14897 Followup to #13814 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>fb3d55006f04a34d8c5d5273ccbedbad4d419303</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-generate-systemd.1.md</FILE>
        <FILE>pkg/systemd/generate/containers.go</FILE>
        <FILE>pkg/systemd/generate/containers_test.go</FILE>
        <FILE>pkg/systemd/generate/pods.go</FILE>
        <FILE>pkg/systemd/generate/pods_test.go</FILE>
        <FILE>test/e2e/generate_systemd_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
