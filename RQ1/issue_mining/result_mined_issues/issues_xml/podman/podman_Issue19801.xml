<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19801</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/19801</ISSUEURL>
  <TITLE>kube play snubs save-loaded image</TITLE>
  <DESCRIPTION>Take an image, `podman save` it, then `podman load` it, and it works fine for purposes of `podman run`. As in, instantaneous with no registry checks. `podman kube play`, however, turns up its nose at it and wants to re-fetch it from the registry, causing unnecessary wear and tear on network electrons. Too complicated to explain, so [here's a reproducer](https://github.com/containers/podman/files/12468231/kube-play-refetch-demo.sh.txt). Sample output: ``` ... Podman run - does not re-pull Tue Aug 29 18:53:46 UTC 2023 **** Podman kube play - why does it re-pull? Trying to pull quay.io/libpod/testimage:20221018... Getting image source signatures Copying blob a3ed95caeb02 skipped: already exists Copying blob 578f06cc66c5 skipped: already exists Copying config f5a99120db done Writing manifest to image destination ``` ## DO NOT RUN REPRODUCER ON A SYSTEM YOU CARE ABOUT! It runs `podman system reset` because I wanted to eliminate variables. It'll probably work safely without the `system reset` but I haven't tested that.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #19784 from Jared-Sprague/troubleshooting-fuse [CI:DOCS] Added an additional troubleshooting problem and solution</MESSAGE>
    <SHA>16f6d6a239837c1f7192c5d26b24aba204e2e751</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>kube play: fix pull policy Use the `newer` pull policy only for the &quot;latest&quot; tag and default to using `missing` otherwise. This speeds up `kube play` as it'll skip reaching out to the registry and also fixes other side-effects described in #19801. Fixes: #19801 Signed-off-by: Valentin Rothberg &lt;vrothberg@redhat.com&gt;</MESSAGE>
      <SHA>d20b5869f85ab0acd59d504ac9d62dd6e14c782a</SHA>
      <PATCHEDFILES>
        <FILE>pkg/domain/infra/abi/play.go</FILE>
        <FILE>test/system/700-play.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
