<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>26064</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/26064</ISSUEURL>
  <TITLE>podman secrets should not be world readable / add options to set file uid / gid</TITLE>
  <DESCRIPTION>**TLDR: Already a feature** - read the [`run` manpage](https://docs.podman.io/en/latest/markdown/podman-run.1.html#secret-secret-opt-opt) Luke !!! ;o) --- ### Feature request description I'm currently experimenting with [`step-ca`](https://smallstep.com/docs/tutorials/docker-tls-certificate-authority) &amp; `podman` secrets &amp; noticed the secret is world readable: ![Image](https://github.com/user-attachments/assets/48e4921a-da0f-4c24-a99a-d8b1bb6293c4) ### Suggest potential solution If there were options to set the `gid` / `uid` on the secret (&amp; one of these options were set) the secret could have file permissions of `440` by default &amp; be a bit more secure at rest (i.e not being world readable) ### Additional context For anyone coming across this also experimenting with`step-ca` - this is how I run it with a strong secret (`378,000` chars) over `netbird` (a nice `wireguard` solution) - with proper `mount` privileges for the `secret`: ``` iface=wt0 ctr=stepca ip=$(ip -f inet addr show $iface | sed -En -e 's/.*inet ([0-9.]+).*/\1/p') repo=docker.io/smallstep/step-ca:hsm dns=&quot;ca.domain.com,$ip,localhost,127.0.0.1&quot; email=&quot;user@domain.com&quot; ca=&quot;My CA&quot; bytes=378000 openssl rand -base64 $bytes | podman secret create --replace $ctr - podman run -d --replace \ --name $ctr \ --hostname $ctr \ --secret source=$ctr,type=mount,uid=1000,gid=1000,mode=440 \ --env &quot;DOCKER_STEPCA_INIT_NAME=$ca&quot; \ --env &quot;DOCKER_STEPCA_INIT_DNS_NAMES=$dns&quot; \ --env &quot;DOCKER_STEPCA_INIT_PROVISIONER_NAME=$email&quot; \ --env &quot;DOCKER_STEPCA_INIT_SSH=true&quot; \ --env &quot;DOCKER_STEPCA_INIT_ACME=true&quot; \ --env &quot;DOCKER_STEPCA_INIT_PASSWORD_FILE=/run/secrets/$ctr&quot; \ --cap-drop ALL \ --restart always \ --privileged \ --label &quot;io.containers.autoupdate=registry&quot; \ -v ${HOME}/volumes/$ctr/config:/home/step:Z \ $repo ``` * I'm running a `rootful` container with the `--privileged` flag so the `tpm` device on my workstation is available (&amp; is probably the solution I'll use)</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #26039 from containers/renovate/github.com-vishvananda-netlink-digest fix(deps): update github.com/vishvananda/netlink digest to 9d88d83</MESSAGE>
    <SHA>a2f486feb3ac585c939079aedc3f6f17dfea5486</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Update podman-secret-create.1.md * Adds example showing secure secret generation / rotation &amp; mounting * fixes https://github.com/containers/podman/issues/26064 Signed-off-by: Stuart Cardall &lt;itoffshore@users.noreply.github.com&gt;</MESSAGE>
      <SHA>563fec08d5b38ef8ac7ba6fcbfd42b3f7d8e0125</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-secret-create.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update podman-secret-create.1.md * Adds example showing secure secret generation / rotation &amp; mounting * fixes https://github.com/containers/podman/issues/26064 Signed-off-by: Stuart Cardall &lt;itoffshore@users.noreply.github.com&gt;</MESSAGE>
      <SHA>257e261f173fa53e38c47e1998fa2caa8cb11835</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-secret-create.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update podman-secret-create.1.md * Adds example showing secure secret generation / rotation &amp; mounting * fixes https://github.com/containers/podman/issues/26064 Signed-off-by: Stuart Cardall &lt;itoffshore@users.noreply.github.com&gt;</MESSAGE>
      <SHA>aa8d7e3879b8d4d9c78278358d7a30e7751b0b9c</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-secret-create.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update podman-secret-create.1.md * Adds example showing secure secret generation / rotation &amp; mounting * fixes https://github.com/containers/podman/issues/26064 Signed-off-by: Stuart Cardall &lt;itoffshore@users.noreply.github.com&gt;</MESSAGE>
      <SHA>d6239385fd3bb3a635e15fcf7c4bd14e4cb65f85</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-secret-create.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
