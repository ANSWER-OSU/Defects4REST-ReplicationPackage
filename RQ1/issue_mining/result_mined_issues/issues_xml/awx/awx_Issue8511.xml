<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8511</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/8511</ISSUEURL>
  <TITLE>OpenSource AWX Webgui always redirect to AWX Subscription-Page</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY &lt;!-- Briefly describe the problem. --&gt; It its always a redirection to AWX Subscription page because /var/lib/awx/.tower_version always exists in awx_web container ##### ENVIRONMENT * AWX version: 15.0.1 * AWX install method: docker on linux * Ansible version: 2.9.13 * Operating System: Ubuntu 18.04.5 LTS * Web Browser: Firefox 82.0.2 ##### STEPS TO REPRODUCE awx/installer/inventory ``` #dockerhub_base=ansible use_container_for_build: True awx_official: False create_preload_data: False ``` ##### EXPECTED RESULTS Login to AWX-Webgui ##### ACTUAL RESULTS After successfully logged in, I was redirected to http://localhost:8083/#/license But I want to use OpenSource AWX ##### ADDITIONAL INFORMATION The misbehaviour comes from commit https://github.com/ansible/awx/commit/c139a998b82761cd5405ee1caa1847f3a23d89b9?_pjax=%23js-repo-pjax-container The condition in common.py line 207: `if os.path.exists('/var/lib/awx/.tower_version'):` is always true, because the file exist always in awx_web container. Ugly workaround: after starting all containers, remove `/var/lib/awx/.tower_version` in `awx_web` container.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>update the tower_license module to properly upload manifests</MESSAGE>
    <SHA>e591f1f002377f2082e6a811478e49515656cf8a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>simplify how awx &quot;open&quot; licensing works</MESSAGE>
      <SHA>c139a998b82761cd5405ee1caa1847f3a23d89b9</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/generics.py</FILE>
        <FILE>awx/main/utils/common.py</FILE>
        <FILE>awx/main/utils/licensing.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>properly detect the need for candlepin-based entitlement see: https://github.com/ansible/awx/issues/8511</MESSAGE>
      <SHA>e3ea1f7e72228d5c79696c0c6c0aab706cd92b2b</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/utils/common.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>properly detect the need for candlepin-based entitlement see: https://github.com/ansible/awx/issues/8511</MESSAGE>
      <SHA>c64f2552d1b9f18b404cbc756659aa6f53816207</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/utils/common.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
