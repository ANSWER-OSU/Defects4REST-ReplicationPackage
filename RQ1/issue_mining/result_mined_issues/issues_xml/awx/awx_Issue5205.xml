<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5205</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/5205</ISSUEURL>
  <TITLE>nginx fails to start on OKD 3.11</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When AWX is deployed on OKD, it seems like its nginx web server can't start due to permissions denied error on port 80. The StatefulSet-dedicated pod is still marked as running, yet you cannot reach the login mask through the route as OpenShift returns the &quot;Application not available&quot; error. I attached the log of awx-web container where you can see the error. ##### ENVIRONMENT * AWX version: 9.0.0 * AWX install method: openshift 3.11 * Ansible version: 2.8.5 * Operating System: CentOS 7.7 * Web Browser: Firefox 70.0 ##### STEPS TO REPRODUCE 1. Install AWX 9.0.0 on OKD 3.11 2. Try to reach the WebUI via route. ##### EXPECTED RESULTS Reach the login screen. ##### ACTUAL RESULTS OKD returns the error &quot;Application is not available&quot;. ##### ADDITIONAL INFORMATION [awx-0.log](https://pastebin.com/JP0DVp7c)</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5203 from keithjgrant/warnings-cleanup Cleanup console warnings/refactor Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>5246c842b29a3947c182895b6bc7629a60ae9b67</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix broken k8s installs Related: https://github.com/ansible/awx/issues/5205 The following commit introduced this bug: https://github.com/ansible/awx/commit/712b07c136ea31a14c035378a439c9b7a6712054#diff-a2ef2d6347894a92a6b882e3793fb06c</MESSAGE>
      <SHA>c12b6e5e3871f7c19b3bb07f6f046d091f6c6ebf</SHA>
      <PATCHEDFILES>
        <FILE>installer/roles/kubernetes/templates/configmap.yml.j2</FILE>
        <FILE>installer/roles/kubernetes/templates/deployment.yml.j2</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix broken k8s installs Related: https://github.com/ansible/awx/issues/5205 The following commit introduced this bug: https://github.com/ansible/awx/commit/712b07c136ea31a14c035378a439c9b7a6712054#diff-a2ef2d6347894a92a6b882e3793fb06c</MESSAGE>
      <SHA>d3b137fbc4fd3bf3bc01fec197c12d98f1fb3111</SHA>
      <PATCHEDFILES>
        <FILE>installer/roles/kubernetes/templates/configmap.yml.j2</FILE>
        <FILE>installer/roles/kubernetes/templates/deployment.yml.j2</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
