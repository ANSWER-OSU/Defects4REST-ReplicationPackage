<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6122</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/6122</ISSUEURL>
  <TITLE>[CLI] add the ability to specify a description for tokens generated with `awx login`</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY &lt;!-- Briefly describe the problem. --&gt; ##### ENVIRONMENT * AWX version: 9.0.2 * AWX install method: docker-compose * Ansible version: 2.9+ * Operating System: * Web Browser: ##### STEPS TO REPRODUCE use cli like the following: `awx --conf.username user --conf.password password tokens create test --scope write --description &quot;automated token generation&quot; -k` ##### EXPECTED RESULTS successfull token creation ##### ACTUAL RESULTS ``` bash-5.0$ awx --conf.username user --conf.password password tokens create test --scope write --description &quot;autmoated token generation&quot; -k usage: awx [--help] [--version] [--conf.host https://example.awx.org] [--conf.token TEXT] [--conf.username TEXT] [--conf.password TEXT] [-k] [-f {json,yaml,jq,human}] [--filter TEXT] [--conf.color BOOLEAN] [-v] resource ... positional arguments: resource login authenticate and retrieve an OAuth2 token config print current configuration values ping instances (instance) instance_groups (instance_group) config settings (setting) me organizations (organization) users (user) projects (project) project_updates (project_update) teams (team) credentials (credential) credential_types (credential_type) credential_input_sources applications (application) tokens metrics inventory (inventories) inventory_scripts (inventory_script) inventory_sources (inventory_source) inventory_updates (inventory_update) groups (group) hosts (host) job_templates (job_template) jobs (job) job_events ad_hoc_commands (ad_hoc) system_job_templates system_jobs schedules (schedule) roles (role) notification_templates (notification_template) notifications labels (label) unified_job_templates unified_jobs activity_stream workflow_job_templates (workflow) workflow_jobs (workflow_job) workflow_approvals workflow_job_template_nodes (node) workflow_job_nodes optional arguments: --help prints usage information for the awx tool --version display awx CLI version authentication: --conf.host https://example.awx.org --conf.token TEXT an OAuth2.0 token (get one by using `awx login`) --conf.username TEXT --conf.password TEXT -k, --conf.insecure Allow insecure server connections when using SSL output formatting: -f {json,yaml,jq,human}, --conf.format {json,yaml,jq,human} specify an output format --filter TEXT specify an output filter (only valid with jq or human format) --conf.color BOOLEAN Display colorized output. Defaults to True -v, --verbose print debug-level logs, including requests made Valid credentials were not provided. $ awx login --help ``` ##### ADDITIONAL INFORMATION i cant use awx login, because there i can not specify a description for the token and another problem is, awx login creates everytime a new token, so with a jenkins which triggers a container run which has the awx cli login implemented via user // password, every jenkins trigger will result in a new Oauth token on the account, so somehow i have to delete the token after i created and used it for his purpose, therefore i want to get ids where description == automated tokens and delete those tokens found by id, so i thought i could to this over awx token create, but there the --conf.username --conf.password params are not recognized on the other side, using only oauth token for ci/cd is not an option, because it has an expire date, so ci/cd will stop working after ~months because oauth token is expired</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #6121 from rooftopcellist/add_total_instances Add total licensed instances to analytics Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>7fe57268f6fe0b8f793b96017d842b8278f3085d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>cli: add the ability to specify a token description w/ `awx login` see: https://github.com/ansible/awx/issues/6122</MESSAGE>
      <SHA>3e0e4b6c8fc5d63c417643e283c3ff52c2ca0312</SHA>
      <PATCHEDFILES>
        <FILE>awxkit/awxkit/api/pages/base.py</FILE>
        <FILE>awxkit/awxkit/cli/resource.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>cli: add the ability to specify a token description w/ `awx login` see: https://github.com/ansible/awx/issues/6122</MESSAGE>
      <SHA>8d3ad90a0ccebd1de1458ae9242caedc0ecfe02c</SHA>
      <PATCHEDFILES>
        <FILE>awxkit/awxkit/api/pages/base.py</FILE>
        <FILE>awxkit/awxkit/cli/resource.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
