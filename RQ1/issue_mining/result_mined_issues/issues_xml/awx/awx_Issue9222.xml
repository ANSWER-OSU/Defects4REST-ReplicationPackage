<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9222</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9222</ISSUEURL>
  <TITLE>Passing a bad lookup type modifier in api request triggers 500 error</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY Send a request like `/api/v2/jobs/?id__iexact=1` &lt;img width=&quot;1680&quot; alt=&quot;Screen Shot 2021-02-03 at 12 28 26 PM&quot; src=&quot;https://user-images.githubusercontent.com/9889020/106785392-56b84880-661b-11eb-9288-fa50845636f7.png&quot;&gt; `iexact` isn't supported on the `id` field. What I'm hoping for is a nice 4xx error that says that modifier is not supported. The impetuous for this issue came from https://github.com/ansible/awx/issues/7834. The advanced search in the UI allows the user to select from a static list of modifiers in the `Advanced` section. I left that issue open as a UI enhancement to attempt to trim that list down to only modifiers that will work with a particular field.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>557</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #12147 from rooftopcellist/bump-receptor-1.2.3 Bump Receptorctl to 1.2.3</MESSAGE>
    <SHA>9f8b3948e1aad75620bec818f1965b1bb1acbf6e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[FieldLookupBackend] limit iexact to string fields Change: - Case-insensitive search only makes sense on strings, so check the type of the field we are searching and ensure it is a string field (TextField, CharField, or some subclass thereof). - This prevents a 500 error when a user uses iexact on, e.g., an integer field. Now, a 400 Bad Request is returned instead. Test Plan: - Added simple unit tests for iexact Tickets: - Fixes #9222 Signed-off-by: Rick Elrod &lt;rick@elrod.me&gt;</MESSAGE>
      <SHA>45ebc238533dca934a5814e6b5e2a54a5815b7d9</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/filters.py</FILE>
        <FILE>awx/main/tests/unit/api/test_filters.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[FieldLookupBackend] limit iexact to string fields (#12569) Change: - Case-insensitive search only makes sense on strings, so check the type of the field we are searching and ensure it is a string field (TextField, CharField, or some subclass thereof). - This prevents a 500 error when a user uses iexact on, e.g., an integer field. Now, a 400 Bad Request is returned instead. Test Plan: - Added simple unit tests for iexact Tickets: - Fixes #9222 Signed-off-by: Rick Elrod &lt;rick@elrod.me&gt;</MESSAGE>
      <SHA>87f729c6425b46fadb7b42b13de19dc867f595c1</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/filters.py</FILE>
        <FILE>awx/main/tests/unit/api/test_filters.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[FieldLookupBackend] limit iexact to string fields (#12569) Change: - Case-insensitive search only makes sense on strings, so check the type of the field we are searching and ensure it is a string field (TextField, CharField, or some subclass thereof). - This prevents a 500 error when a user uses iexact on, e.g., an integer field. Now, a 400 Bad Request is returned instead. Test Plan: - Added simple unit tests for iexact Tickets: - Fixes #9222 Signed-off-by: Rick Elrod &lt;rick@elrod.me&gt;</MESSAGE>
      <SHA>f22e858c2c461d86eb9cc253b3f808fe4da23888</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/filters.py</FILE>
        <FILE>awx/main/tests/unit/api/test_filters.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
