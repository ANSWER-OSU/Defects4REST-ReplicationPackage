<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6890</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/6890</ISSUEURL>
  <TITLE>reuse of local built images</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Feature Idea ##### SUMMARY We deploy awx via ansible here and run the installer each time to adapt it to our needs. When using the official images, the installer reuse the images downloaded earlier and the process is somehow fast. But when we need to build images, the process always rebuilt images. It could be good to have an option to reuse the built images if any. We made a local hack to be able to do so but.. it's a hack: ``` - name: Customize role/tasks to use local images (hack) blockinfile: path: &quot;{{ awx_build_dir }}/awx/installer/roles/local_docker/tasks/main.yml&quot; insertafter: &quot;- import_tasks: set_image.yml&quot; block: | - name: Set Local Image Paths set_fact: awx_web_docker_actual_image: awx_web:latest awx_task_docker_actual_image: awx_task:latest when: awx_build_local_image and not awx_upgrade_needed ``` Feel free to add your thought about it, I'm already thinking of a &quot;good way&quot; to do it... Regards,</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>1070</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #6880 from ryanpetrello/fix-awxkit-new-pip Keep awxkit's requirements on the setup.py Reviewed-by: Jacob Callahan https://github.com/JacobCallahan</MESSAGE>
    <SHA>72de660ea1039039ffd7e7c72d72e5a44ffcbdf7</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Allow reuse of locally built images #6890</MESSAGE>
      <SHA>5392afc862c04dccc4901ef740601407b619d994</SHA>
      <PATCHEDFILES>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/local_docker/tasks/set_image.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Allow reuse of locally built images #6890</MESSAGE>
      <SHA>3fb23f7bf1ba22c36c9e259918a5798db637eba2</SHA>
      <PATCHEDFILES>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/local_docker/tasks/set_image.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Allow reuse of locally built images #6890</MESSAGE>
      <SHA>ab4ddb5466ecfbae7de4017b5e9b718431ced90e</SHA>
      <PATCHEDFILES>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/local_docker/tasks/set_image.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Allow reuse of locally built images #6890</MESSAGE>
      <SHA>1fdd5f7d5fdd84e4ae3a81d3b4eb43492676d9ae</SHA>
      <PATCHEDFILES>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/local_docker/tasks/set_image.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Allow reuse of locally built images #6890</MESSAGE>
      <SHA>1e58f9d9b6e28a293d2de6700beedd4aae00d406</SHA>
      <PATCHEDFILES>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/local_docker/tasks/set_image.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Basic runtime enforcement of policy as code part 2 (#6875) * Add `opa_query_path field` for Inventory, Organization and JobTemplate models (#6850) Add `opa_query_path` model field to Inventory, Organizatio and JobTemplate. Add migration file and expose opa_query_path field in the related API serializers. * Gather and evaluate `opa_query_path` fields and raise violation exceptions (#6864) gather and evaluate all opa query related to a job execution during policy evaluation phase * Add OPA_AUTH_CUSTOM_HEADERS support (#6863) * Extend policy input data serializers (#6890) * Extend policy input data serializers * Update help text for PaC related fields (#6891) * Remove encrypted from OPA_AUTH_CUSTOMER_HEADER Unable to encrypt a dict field --------- Co-authored-by: Jiří Jeřábek (Jiri Jerabek) &lt;Jerabekjirka@email.cz&gt; Co-authored-by: Alexander Saprykin &lt;cutwatercore@gmail.com&gt; Co-authored-by: Tina Tien &lt;98424339+tiyiprh@users.noreply.github.com&gt;</MESSAGE>
      <SHA>eeb22c8f61aea6dfbaccf50b78b69836b0c05fb1</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/serializers.py</FILE>
        <FILE>awx/main/conf.py</FILE>
        <FILE>awx/main/tasks/policy.py</FILE>
        <FILE>awx/main/tests/functional/test_policy.py</FILE>
        <FILE>awx/settings/defaults.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
