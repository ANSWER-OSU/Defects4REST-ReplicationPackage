<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4817</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/4817</ISSUEURL>
  <TITLE>Update React, React-Router, and React-Router-Dom</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug ##### SUMMARY It can be hard to test components that use react hooks if there are asynchronous state updates within the the component. When doing such tests enzyme wants you to use `act()` however in our current version of react we can't successfully test async code within `act()` as it isn't supported. It is supported in React 16.9.0 thus we should update to that at least. That update will cause other console warnings/errors which will require an update to React-Router and React-Router-Dom ##### ENVIRONMENT * AWX version: 7.0.0 * AWX install method: docker for mac * Ansible version: 2.10.0 * Operating System: Mojave * Web Browser: Chrome ##### STEPS TO REPRODUCE Write a test for a component that uses hooks to update state asynchronously. Think `try...catch`. See warnings in console. ##### EXPECTED RESULTS Tests run without errors or warnings. ##### ACTUAL RESULTS Errors and warnings appear in console. ` Warning: The callback passed to ReactTestUtils.act(...) function must not return anything. It looks like you wrote ReactTestUtils.act(async () =&gt; ...), or returned a Promise from the callback passed to it. Putting asynchronous logic inside ReactTestUtils.act(...) is not supported.`</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>21</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #4815 from chrismeyersfsu/backport_3_8_2-fork-race [3.8.2] backport fork race</MESSAGE>
    <SHA>d0054a95eceb462ce9cefc01a9c4b16ac96552fc</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #4817 from chrismeyersfsu/backport_3_8_2-unique-host-count Backport 3 8 2 unique host count</MESSAGE>
      <SHA>952dbc660824e8836d6d599b1e334a1500e4b8a2</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/organization.py</FILE>
        <FILE>awx/main/tests/functional/api/test_organization_counts.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
