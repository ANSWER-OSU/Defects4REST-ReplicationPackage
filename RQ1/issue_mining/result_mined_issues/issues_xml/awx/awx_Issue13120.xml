<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>13120</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/13120</ISSUEURL>
  <TITLE>Add Conjur Cloud support to CyberArk Conjur Secrets Lookup credential plugin</TITLE>
  <DESCRIPTION>### Please confirm the following - [X] I agree to follow this project's [code of conduct](https://docs.ansible.com/ansible/latest/community/code_of_conduct.html). - [X] I have checked the [current issues](https://github.com/ansible/awx/issues) for duplicates. - [X] I understand that AWX is open source software provided for free and that I might not receive a timely response. ### Bug Summary Conjur Cloud adds the requirement of `/api` after the base domain of the service prior to endpoints that are currently configured in the credential plugin. Providing `/api` as part of the URL on the secret lookup gets trimmed by `urllib.parse.urljoin()` that builds the URL to send API requests when executing the credential plugin. ### AWX version 21.7.0 ### Select the relevant components - [ ] UI - [X] API - [ ] Docs - [ ] Collection - [ ] CLI - [ ] Other ### Installation method docker development environment ### Modifications no ### Ansible version 2.13.5 ### Operating system Ubuntu 22.04.1 LTS ### Web browser _No response_ ### Steps to reproduce With a Conjur Cloud tenant available to target, configure the CyberArk Conjur Secrets Lookup external management system credential plugin as documented. ### Expected results Tests should pass successfully. ### Actual results Tests to retrieve a secret will return `HTTP 404`. ### Additional information A PR is prepared and will be submitted shortly.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>15</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #12942 from Tioborto/fix/ui-host-vent-modal fix: UI host event modal when stdout is an array</MESSAGE>
    <SHA>d80db763bcb8c29920e6da942149a72042781a32</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes #13119 #13120 Cloud support &amp; update brand</MESSAGE>
      <SHA>66c7d5e9be137c0e9694fa33f5f5218c7f5a0995</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/credential_plugins/conjur.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixes #13119 #13120 Conjur Cloud support &amp; update brand (#13121) * Fixes #13119 #13120 Cloud support &amp; update brand * rm base64 import to pass lint * Update references across the board * Removed final reference to CyberArk Conjur Secret Lookup</MESSAGE>
      <SHA>e4283841d6f08c0d6327984d1459a6eb69922069</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/credential_plugins/conjur.py</FILE>
        <FILE>awx/ui/src/screens/Credential/CredentialEdit/CredentialEdit.test.js</FILE>
        <FILE>awx/ui/src/screens/Credential/shared/CredentialPlugins/CredentialPluginPrompt/CredentialPluginPrompt.test.js</FILE>
        <FILE>awx/ui/src/screens/Credential/shared/data.credentialTypes.json</FILE>
        <FILE>awx/ui/src/screens/Credential/shared/data.cyberArkCredential.json</FILE>
        <FILE>awx_collection/plugins/modules/credential.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
