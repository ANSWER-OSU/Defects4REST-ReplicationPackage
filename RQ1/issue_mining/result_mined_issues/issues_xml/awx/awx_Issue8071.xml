<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8071</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/8071</ISSUEURL>
  <TITLE>Schedule is executed just once</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY Frish installed AWX 14.1.0 with demo project. The Demo Project is synchronized, the Demo Job Template runs without any problem. A schedule is created which should start Demo Job Template every minute 5 times. The job is started just once. I can't find any information in the logs. It looks like it starts once and that's ok. ##### ENVIRONMENT * AWX version: 14.1.0 * AWX install method: docker on linux * Ansible version: 2.9.10 * Operating System: CentOS 7 * Web Browser: Firefox ##### STEPS TO REPRODUCE Add the schedule. The defined schedule: ``` { &quot;rrule&quot;: &quot;DTSTART;TZID=Europe/Berlin:20200903T155000 RRULE:FREQ=MINUTELY;INTERVAL=1;COUNT=5&quot;, &quot;id&quot;: 6, &quot;type&quot;: &quot;schedule&quot;, &quot;url&quot;: &quot;/api/v2/schedules/6/&quot;, &quot;related&quot;: { &quot;created_by&quot;: &quot;/api/v2/users/1/&quot;, &quot;modified_by&quot;: &quot;/api/v2/users/1/&quot;, &quot;credentials&quot;: &quot;/api/v2/schedules/6/credentials/&quot;, &quot;unified_jobs&quot;: &quot;/api/v2/schedules/6/jobs/&quot;, &quot;unified_job_template&quot;: &quot;/api/v2/job_templates/7/&quot;, &quot;project&quot;: &quot;/api/v2/projects/6/&quot;, &quot;inventory&quot;: &quot;/api/v2/inventories/1/&quot; }, &quot;summary_fields&quot;: { &quot;unified_job_template&quot;: { &quot;id&quot;: 7, &quot;name&quot;: &quot;Demo Job Template&quot;, &quot;description&quot;: &quot;&quot;, &quot;unified_job_type&quot;: &quot;job&quot; }, &quot;created_by&quot;: { &quot;id&quot;: 1, &quot;username&quot;: &quot;admin&quot;, &quot;first_name&quot;: &quot;&quot;, &quot;last_name&quot;: &quot;&quot; }, &quot;modified_by&quot;: { &quot;id&quot;: 1, &quot;username&quot;: &quot;admin&quot;, &quot;first_name&quot;: &quot;&quot;, &quot;last_name&quot;: &quot;&quot; }, &quot;user_capabilities&quot;: { &quot;edit&quot;: true, &quot;delete&quot;: true }, &quot;inventory&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;Demo Inventory&quot;, &quot;description&quot;: &quot;&quot;, &quot;has_active_failures&quot;: false, &quot;total_hosts&quot;: 1, &quot;hosts_with_active_failures&quot;: 0, &quot;total_groups&quot;: 0, &quot;has_inventory_sources&quot;: false, &quot;total_inventory_sources&quot;: 0, &quot;inventory_sources_with_failures&quot;: 0, &quot;organization_id&quot;: 1, &quot;kind&quot;: &quot;&quot;, &quot;insights_credential_id&quot;: null } }, &quot;created&quot;: &quot;2020-09-03T13:49:01.947731Z&quot;, &quot;modified&quot;: &quot;2020-09-03T13:49:01.947738Z&quot;, &quot;name&quot;: &quot;test&quot;, &quot;description&quot;: &quot;&quot;, &quot;extra_data&quot;: {}, &quot;inventory&quot;: null, &quot;scm_branch&quot;: null, &quot;job_type&quot;: null, &quot;job_tags&quot;: null, &quot;skip_tags&quot;: null, &quot;limit&quot;: null, &quot;diff_mode&quot;: null, &quot;verbosity&quot;: null, &quot;unified_job_template&quot;: 7, &quot;enabled&quot;: true, &quot;dtstart&quot;: &quot;2020-08-27T13:50:00Z&quot;, &quot;dtend&quot;: &quot;2020-08-27T13:54:00Z&quot;, &quot;next_run&quot;: null, &quot;timezone&quot;: &quot;Europe/Berlin&quot;, &quot;until&quot;: &quot;&quot; } ``` ##### EXPECTED RESULTS The job is executed 5 times. ##### ACTUAL RESULTS The job is executed just once. ##### ADDITIONAL INFORMATION Jobs output: ``` { &quot;count&quot;: 1, &quot;next&quot;: null, &quot;previous&quot;: null, &quot;results&quot;: [ { &quot;id&quot;: 4, &quot;type&quot;: &quot;job&quot;, &quot;url&quot;: &quot;/api/v2/jobs/4/&quot;, &quot;related&quot;: { &quot;labels&quot;: &quot;/api/v2/jobs/4/labels/&quot;, &quot;inventory&quot;: &quot;/api/v2/inventories/1/&quot;, &quot;project&quot;: &quot;/api/v2/projects/6/&quot;, &quot;organization&quot;: &quot;/api/v2/organizations/1/&quot;, &quot;credentials&quot;: &quot;/api/v2/jobs/4/credentials/&quot;, &quot;unified_job_template&quot;: &quot;/api/v2/job_templates/7/&quot;, &quot;schedule&quot;: &quot;/api/v2/schedules/6/&quot;, &quot;stdout&quot;: &quot;/api/v2/jobs/4/stdout/&quot;, &quot;job_events&quot;: &quot;/api/v2/jobs/4/job_events/&quot;, &quot;job_host_summaries&quot;: &quot;/api/v2/jobs/4/job_host_summaries/&quot;, &quot;activity_stream&quot;: &quot;/api/v2/jobs/4/activity_stream/&quot;, &quot;notifications&quot;: &quot;/api/v2/jobs/4/notifications/&quot;, &quot;create_schedule&quot;: &quot;/api/v2/jobs/4/create_schedule/&quot;, &quot;job_template&quot;: &quot;/api/v2/job_templates/7/&quot;, &quot;cancel&quot;: &quot;/api/v2/jobs/4/cancel/&quot;, &quot;relaunch&quot;: &quot;/api/v2/jobs/4/relaunch/&quot; }, &quot;summary_fields&quot;: { &quot;organization&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;Default&quot;, &quot;description&quot;: &quot;&quot; }, &quot;inventory&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;Demo Inventory&quot;, &quot;description&quot;: &quot;&quot;, &quot;has_active_failures&quot;: false, &quot;total_hosts&quot;: 1, &quot;hosts_with_active_failures&quot;: 0, &quot;total_groups&quot;: 0, &quot;has_inventory_sources&quot;: false, &quot;total_inventory_sources&quot;: 0, &quot;inventory_sources_with_failures&quot;: 0, &quot;organization_id&quot;: 1, &quot;kind&quot;: &quot;&quot; }, &quot;project&quot;: { &quot;id&quot;: 6, &quot;name&quot;: &quot;Demo Project&quot;, &quot;description&quot;: &quot;&quot;, &quot;status&quot;: &quot;successful&quot;, &quot;scm_type&quot;: &quot;git&quot; }, &quot;job_template&quot;: { &quot;id&quot;: 7, &quot;name&quot;: &quot;Demo Job Template&quot;, &quot;description&quot;: &quot;&quot; }, &quot;schedule&quot;: { &quot;id&quot;: 6, &quot;name&quot;: &quot;test&quot;, &quot;description&quot;: &quot;&quot; }, &quot;unified_job_template&quot;: { &quot;id&quot;: 7, &quot;name&quot;: &quot;Demo Job Template&quot;, &quot;description&quot;: &quot;&quot;, &quot;unified_job_type&quot;: &quot;job&quot; }, &quot;instance_group&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;tower&quot;, &quot;is_containerized&quot;: false }, &quot;user_capabilities&quot;: { &quot;delete&quot;: true, &quot;start&quot;: true }, &quot;labels&quot;: { &quot;count&quot;: 0, &quot;results&quot;: [] }, &quot;credentials&quot;: [ { &quot;id&quot;: 1, &quot;name&quot;: &quot;Demo Credential&quot;, &quot;description&quot;: &quot;&quot;, &quot;kind&quot;: &quot;ssh&quot;, &quot;cloud&quot;: false } ] }, &quot;created&quot;: &quot;2020-09-03T13:50:08.938226Z&quot;, &quot;modified&quot;: &quot;2020-09-03T13:50:15.029052Z&quot;, &quot;name&quot;: &quot;Demo Job Template&quot;, &quot;description&quot;: &quot;&quot;, &quot;unified_job_template&quot;: 7, &quot;launch_type&quot;: &quot;scheduled&quot;, &quot;status&quot;: &quot;successful&quot;, &quot;failed&quot;: false, &quot;started&quot;: &quot;2020-09-03T13:50:15.217321Z&quot;, &quot;finished&quot;: &quot;2020-09-03T13:50:18.783942Z&quot;, &quot;canceled_on&quot;: null, &quot;elapsed&quot;: 3.567, &quot;job_explanation&quot;: &quot;&quot;, &quot;execution_node&quot;: &quot;awx&quot;, &quot;controller_node&quot;: &quot;&quot;, &quot;job_type&quot;: &quot;run&quot;, &quot;inventory&quot;: 1, &quot;project&quot;: 6, &quot;playbook&quot;: &quot;hello_world.yml&quot;, &quot;scm_branch&quot;: &quot;&quot;, &quot;forks&quot;: 0, &quot;limit&quot;: &quot;&quot;, &quot;verbosity&quot;: 0, &quot;extra_vars&quot;: &quot;{}&quot;, &quot;job_tags&quot;: &quot;&quot;, &quot;force_handlers&quot;: false, &quot;skip_tags&quot;: &quot;&quot;, &quot;start_at_task&quot;: &quot;&quot;, &quot;timeout&quot;: 0, &quot;use_fact_cache&quot;: false, &quot;organization&quot;: 1, &quot;job_template&quot;: 7, &quot;passwords_needed_to_start&quot;: [], &quot;allow_simultaneous&quot;: false, &quot;artifacts&quot;: {}, &quot;scm_revision&quot;: &quot;347e44fea036c94d5f60e544de006453ee5c71ad&quot;, &quot;instance_group&quot;: 1, &quot;diff_mode&quot;: false, &quot;job_slice_number&quot;: 0, &quot;job_slice_count&quot;: 1, &quot;webhook_service&quot;: &quot;&quot;, &quot;webhook_credential&quot;: null, &quot;webhook_guid&quot;: &quot;&quot; } ] } ```</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>28</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8159 from john-westcott-iv/lookup_plugin_fix Fixing issue with lookup plugin not able to load host, user, etc Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>56c5a39087fdee71227e7f2c022d086fd4e47efa</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix an rrule bug that causes improper HOURLY/MINUTELY calculation see: https://github.com/ansible/awx/issues/8071</MESSAGE>
      <SHA>9cf129484758066a38b67a7effaa01ea8d4f22f3</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/schedules.py</FILE>
        <FILE>awx/main/tests/functional/models/test_schedule.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix an rrule bug that causes improper HOURLY/MINUTELY calculation see: https://github.com/ansible/awx/issues/8071</MESSAGE>
      <SHA>e9c03ac44baec07fbced44e4b05b07d502870652</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/schedules.py</FILE>
        <FILE>awx/main/tests/functional/models/test_schedule.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix an rrule bug that causes improper HOURLY/MINUTELY calculation see: https://github.com/ansible/awx/issues/8071</MESSAGE>
      <SHA>6a96ef60a1f963a9d3ed5bb2b35497385e5b90df</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/schedules.py</FILE>
        <FILE>awx/main/tests/functional/models/test_schedule.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix an rrule bug that causes improper HOURLY/MINUTELY calculation see: https://github.com/ansible/awx/issues/8071</MESSAGE>
      <SHA>bf1d93168b00830201809ee158a54bfefff605bf</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/schedules.py</FILE>
        <FILE>awx/main/tests/functional/models/test_schedule.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
