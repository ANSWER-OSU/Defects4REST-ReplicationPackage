<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7051</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/7051</ISSUEURL>
  <TITLE>ARM64/Aarch64 Support (Raspberry Pi4)</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Feature Idea ##### SUMMARY I would love to be able to run awx on a raspberry pi 4. The latest raspberry pi with its stats should be plenty to run the full awx stack, and it would be so useful for people like me who run home labs of just raspberry pis. Ive attempted to run install with `dockerhub_base` commented out in inventory to make the playbooks build the images on the pi 4 but i hit this error: ``` TASK [image_build : Build AWX distribution using container] ****************************************************************************************************************** fatal: [localhost -&gt; localhost]: FAILED! =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=1 npm --unsafe-perm --prefix awx/ui ci --no-save awx/ui\n\n&gt; fsevents@1.2.4 install /awx/awx/ui/node_modules/fsevents\n&gt; node install\n\n\n&gt; uglifyjs-webpack-plugin@0.4.6 postinstall /awx/awx/ui/node_modules/uglifyjs-webpack-plugin\n&gt; node lib/post_install.js\n\n\n&gt; puppeteer@1.8.0 install /awx/awx/ui/node_modules/puppeteer\n&gt; node install.js\n\n**INFO** Skipping Chromium download. \&quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOAD\&quot; environment variable was found.\n\n&gt; nunjucks@3.1.3 postinstall /awx/awx/ui/node_modules/nunjucks\n&gt; node postinstall-build.js src\n\n\n&gt; chromedriver@2.40.0 install /awx/awx/ui/node_modules/chromedriver\n&gt; node install.js\n\nOnly Linux 64 bits supported.\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! chromedriver@2.40.0 install: `node install.js`\nnpm ERR! Exit status 1\nnpm ERR! \nnpm ERR! Failed at the chromedriver@2.40.0 install script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR! /root/.npm/_logs/2020-05-17T02_23_59_085Z-debug.log\nmake: *** [Makefile:503: awx/ui/.release_deps_built] Error 1\n&quot;, &quot;status&quot;: 2} PLAY RECAP ******************************************************************************************************************************************************************* localhost : ok=10 changed=2 unreachable=0 failed=1 skipped=3 rescued=0 ignored=0 ``` Looks like its failing during the npm install when it installs chromedriver... I'm not sure how to fix this since chromedriver seems to explicitly support x86 only. https://github.com/giggio/node-chromedriver/issues/156 Maybe theres a way to skip chromedriver? I think its used by puppeteer and i assume puppeteer isnt needed during the build? Open to ideas! And I dont mind doing the work!</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>94</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #7592 from jakemcdermott/fix-7591 Include instance_id in host edit request Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>e4470f12005ca9f772d13fb7e468e78b5b0d6622</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>ARM image build support * upgrade `chromedriver` for ARM support * upgrade `pynacl` to fix `libsodium` build issue on ARM * remove unnecessary i686-specific `libstdc++.so.6` package * install `kubectl` and `tini` from upstream binaries for ARM support * use upstream `postgres` and `alpine` docker images for `postgresql` helm chart Fixed #7051</MESSAGE>
      <SHA>bfe9dba06369ef86f8f4395ad8ac7355f7a45c9a</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/package-lock.json</FILE>
        <FILE>awx/ui/package.json</FILE>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/image_build/defaults/main.yml</FILE>
        <FILE>installer/roles/image_build/templates/Dockerfile.j2</FILE>
        <FILE>installer/roles/kubernetes/defaults/main.yml</FILE>
        <FILE>installer/roles/kubernetes/templates/postgresql-values.yml.j2</FILE>
        <FILE>requirements/requirements_ansible.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>ARM image build support * upgrade `chromedriver` for ARM support * upgrade `pynacl` to fix `libsodium` build issue on ARM * remove unnecessary i686-specific `libstdc++.so.6` package * install `kubectl` and `tini` from upstream binaries for ARM support * use upstream `postgres` and `alpine` docker images for `postgresql` helm chart Fixes #7051</MESSAGE>
      <SHA>1b08eb3590c1fd4ecb7bc86dde201cd574a4fe80</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/package-lock.json</FILE>
        <FILE>awx/ui/package.json</FILE>
        <FILE>installer/inventory</FILE>
        <FILE>installer/roles/image_build/defaults/main.yml</FILE>
        <FILE>installer/roles/image_build/templates/Dockerfile.j2</FILE>
        <FILE>installer/roles/kubernetes/defaults/main.yml</FILE>
        <FILE>installer/roles/kubernetes/templates/postgresql-values.yml.j2</FILE>
        <FILE>requirements/requirements_ansible.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>ARM image build support * upgrade `chromedriver` for ARM support * upgrade `pynacl` to fix `libsodium` build issue on ARM * remove unnecessary i686-specific `libstdc++.so.6` package * install `kubectl` and `tini` from upstream binaries for ARM support * use upstream `postgres` and `alpine` docker images for `postgresql` helm chart Fixes #7051</MESSAGE>
      <SHA>1ed5b3177858667ce1e977f525f098e9cc3ee005</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/package-lock.json</FILE>
        <FILE>awx/ui/package.json</FILE>
        <FILE>installer/roles/image_build/defaults/main.yml</FILE>
        <FILE>installer/roles/image_build/templates/Dockerfile.j2</FILE>
        <FILE>installer/roles/kubernetes/defaults/main.yml</FILE>
        <FILE>installer/roles/kubernetes/templates/postgresql-values.yml.j2</FILE>
        <FILE>requirements/requirements_ansible.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
