<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7506</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/7506</ISSUEURL>
  <TITLE>YAML code editor evals the YAML</TITLE>
  <DESCRIPTION>##### SUMMARY The codemirror box &quot;evals&quot; the yaml references and expands the references. This is undesirable. ##### ENVIRONMENT * AWX version: X.Y.Z * AWX install method: openshift, minishift, docker on linux, docker for mac, boot2docker * Ansible version: X.Y.Z * Operating System: * Web Browser: ##### STEPS TO REPRODUCE ``` --- a: &amp;aa [a,b,c] b: *aa ``` Create a job template with the above extra vars in the box. ##### EXPECTED RESULTS ![image](https://user-images.githubusercontent.com/722880/86271958-d53b9c00-bb9b-11ea-913a-d34c3f68a822.png) ##### ACTUAL RESULTS ![image](https://user-images.githubusercontent.com/722880/86272042-f3090100-bb9b-11ea-808b-140caf515eec.png)</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>288</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9219 from mazhead/devel Adding the scm_track_submodules option for project SUMMARY Adding the scm_track_submodules option which should fix the related #7846 ISSUE TYPE Feature Pull Request COMPONENT NAME API UI AWX VERSION awx: 17.0.1 ADDITIONAL INFORMATION This option will add the track_submodules option which is described in the ansible git module: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/git_module.html if yes, submodules will track the latest commit on their master branch (or other branch specified in .gitmodules). If no, submodules will be kept at the revision specified by the main project. This is equivalent to specifying the --remote flag to git submodule update. Reviewed-by: Shane McDonald &lt;me@shanemcd.com&gt; Reviewed-by: Alan Rominger &lt;arominge@redhat.com&gt; Reviewed-by: None &lt;None&gt; Reviewed-by: Alex Corey &lt;Alex.swansboro@gmail.com&gt;</MESSAGE>
    <SHA>ad07d31b9a80755646902fdd0e44cc4a235eab49</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9593 from keithjgrant/7506-yaml-json-eval-fix-2 Don't unnecessarily expand YAML expressions SUMMARY Prevents variables fields from expanding YAML expressions when possible: In the detail view, the user may toggle to JSON (seeing the data structure fully expanded), but toggling back to YAML will continue to display the original un-expanded value with expressions intact In edit mode, this works the same way, UNLESS the user edits the value while in JSON mode. Addresses #7506 ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI ADDITIONAL INFORMATION Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt; Reviewed-by: Chris Meyers &lt;None&gt;</MESSAGE>
      <SHA>6fef4e1ab70534fcf6069a79073c237c2455942c</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesDetail.jsx</FILE>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesDetail.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesField.jsx</FILE>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesField.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/MultiButtonToggle/MultiButtonToggle.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #10148 from keithjgrant/8907-launch-prompt-vars-validation Add Variables field validation in launch prompt SUMMARY Adds validation for the Variables field during launch prompts. Prevents unexpected expanding of YAML expressions in the default value (similar to #7506) — this was caused by the default value being parsed into a JavaScript object and then re-translated back to YAML when mounting the &quot;Other Prompts&quot; step addresses #8907 ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt; Reviewed-by: Tiago Góes &lt;tiago.goes2009@gmail.com&gt;</MESSAGE>
      <SHA>2191ab1c6c039da75c7f58840e573014381f97d4</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesField.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/LaunchPrompt.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/OtherPromptsStep.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/OtherPromptsStep.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/PreviewStep.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/useInventoryStep.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/useOtherPromptsStep.jsx</FILE>
        <FILE>awx/ui_next/src/components/LaunchPrompt/useLaunchSteps.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
