<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4920</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/4920</ISSUEURL>
  <TITLE>traceback in logs related to inventory updates and workflows</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY &lt;!-- Briefly describe the problem. --&gt; Seeing this traceback in logs of development container, still need to firm up exact reproduction steps. @ryanpetrello seemed to recognize traceback and probably knows what is up ##### STEPS TO REPRODUCE &lt;!-- Please describe exactly how to reproduce the problem. --&gt; Running a workflow with a number of nodes in it, seeing some significant delay in jobs running in workflow and looked into logs to investigate. Can send more info about this workflow on request. Seeing this in logs: ``` awx_1 | 2019-10-04 16:26:53,567 ERROR awx.main.commands.run_callback_receiver Callback Task Processor Raised Exception: TypeError(&quot;InventoryUpdateEvent() got an unexpected keyword argument 'workflow_job_id'&quot;,) awx_1 | 2019-10-04 16:26:53,568 ERROR awx.main.commands.run_callback_receiver Detail: Traceback (most recent call last): awx_1 | File &quot;/awx_devel/awx/main/dispatch/worker/callback.py&quot;, line 107, in perform_work awx_1 | _save_event_data() awx_1 | File &quot;/awx_devel/awx/main/dispatch/worker/callback.py&quot;, line 45, in _save_event_data awx_1 | cls.create_from_data(**body) awx_1 | File &quot;/awx_devel/awx/main/models/events.py&quot;, line 622, in create_from_data awx_1 | event = cls.objects.create(**kwargs) awx_1 | File &quot;/venv/awx/lib64/python3.6/site-packages/django/db/models/manager.py&quot;, line 82, in manager_method awx_1 | return getattr(self.get_queryset(), name)(*args, **kwargs) awx_1 | File &quot;/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py&quot;, line 420, in create awx_1 | obj = self.model(**kwargs) awx_1 | File &quot;/venv/awx/lib64/python3.6/site-packages/django/db/models/base.py&quot;, line 501, in __init__ awx_1 | raise TypeError(&quot;%s() got an unexpected keyword argument '%s'&quot; % (cls.__name__, kwarg)) awx_1 | TypeError: InventoryUpdateEvent() got an unexpected keyword argument 'workflow_job_id' awx_1 | 2019-10-04 16:26:53,570 ERROR awx.main.commands.run_callback_receiver Callback Task Processor Raised Exception: TypeError(&quot;InventoryUpdateEvent() got an unexpected keyword argument 'workflow_job_id'&quot;,) ``` ##### EXPECTED RESULTS &lt;!-- What did you expect to happen when running the steps above? --&gt; No traceback, no lagging ##### ACTUAL RESULTS &lt;!-- What actually happened? --&gt; Slow spawning of jobs in workflow</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #4896 from mabashian/ui_next-notifs Refactor notifications list and add it to JT details Reviewed-by: Michael Abashian https://github.com/mabashian</MESSAGE>
    <SHA>353692a0baac5884a147235908a7868edd3df1a6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix a bug that breaks inventory update stdout when used in a workflow see: https://github.com/ansible/awx/issues/4920 related: https://github.com/ansible/awx/pull/4731</MESSAGE>
      <SHA>7eace57210b2417ea33fed6b75a59d117f9db347</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/events.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix a bug that breaks inventory update stdout when used in a workflow see: https://github.com/ansible/awx/issues/4920 related: https://github.com/ansible/awx/pull/4731</MESSAGE>
      <SHA>106dc422fb9abab317d0a2c2ef7e9585685bda0e</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/events.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix a bug that breaks inventory update stdout when used in a workflow see: https://github.com/ansible/awx/issues/4920 related: https://github.com/ansible/awx/pull/4731</MESSAGE>
      <SHA>ae0c9ead403086daa7895cd03027970f8ce01fb9</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/events.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix a bug that breaks inventory update stdout when used in a workflow see: https://github.com/ansible/awx/issues/4920 related: https://github.com/ansible/awx/pull/4731</MESSAGE>
      <SHA>5d8d7b238a9281837421700645b54cf1518d14eb</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/models/events.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
