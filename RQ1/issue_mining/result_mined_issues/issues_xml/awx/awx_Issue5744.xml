<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5744</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/5744</ISSUEURL>
  <TITLE>More Helpful Error Message on api/v2/inventories Endpoint</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When trying to change a regular inventory into a &quot;smart&quot; inventory, the `PUT` and `PATCH` both error out (as they should), but the error message is not very informative. Please see screenshots below for both PUT and PATCH errors: &lt;img width=&quot;1048&quot; alt=&quot;PUTNotAllowed&quot; src=&quot;https://user-images.githubusercontent.com/28930622/72933561-f3b98380-3d2f-11ea-9269-7320367cabb3.png&quot;&gt; &lt;img width=&quot;1033&quot; alt=&quot;PATCHNotAllowed&quot; src=&quot;https://user-images.githubusercontent.com/28930622/72933566-f6b47400-3d2f-11ea-8540-147b2da53dc8.png&quot;&gt; It would be nice if the error was something more along the lines of `'You cannot turn a regular inventory into a &quot;smart&quot; inventory.'` ##### ENVIRONMENT * AWX version: 9.1.1 * AWX install method: docker for mac * Web Browser: Chrome ##### STEPS TO REPRODUCE Navigate to a pre-existing _regular_ inventory endpoint via `api/v2/inventories/[id]`, then try to `PUT` or `PATCH` to try to make it into a &quot;smart&quot; inventory: ``` { &quot;name&quot;: &quot;[inventory_name]&quot;, &quot;description&quot;: &quot;&quot;, &quot;organization&quot;: [inventory_id], &quot;kind&quot;: &quot;smart&quot;, &quot;host_filter&quot;: null, &quot;variables&quot;: &quot;&quot;, &quot;insights_credential&quot;: null } ``` ##### EXPECTED RESULTS An error message that tells the user that a regular inventory can't be turned into a smart inventory. ##### ACTUAL RESULTS ``` { &quot;detail&quot;: &quot;Method \&quot;PATCH\&quot; not allowed.&quot; } ```</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>222</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #7750 from Orabig/devel Allow to use an existing PVC for postgresql install with Helm Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>07e86adbb70b0e31783778a639a1a1b22c1d1175</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>improve error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744</MESSAGE>
      <SHA>5e8cf23200b8d99f881d695c7353a802727dadd9</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/bug_report.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/feature_request.md</FILE>
        <FILE>awx/api/views/inventory.py</FILE>
        <FILE>awx/ui_next/src/components/DataListToolbar/DataListToolbar.jsx</FILE>
        <FILE>awx/ui_next/src/components/ListHeader/ListHeader.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedDataList/PaginatedDataList.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedDataList/PaginatedDataList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>improve error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>d54c301c7bcd9bc9ad76c85a23e6f1eb7067d47a</SHA>
      <PATCHEDFILES>
        <FILE>.github/ISSUE_TEMPLATE/bug_report.md</FILE>
        <FILE>.github/ISSUE_TEMPLATE/feature_request.md</FILE>
        <FILE>awx/api/views/inventory.py</FILE>
        <FILE>awx/ui_next/src/components/DataListToolbar/DataListToolbar.jsx</FILE>
        <FILE>awx/ui_next/src/components/ListHeader/ListHeader.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedDataList/PaginatedDataList.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedDataList/PaginatedDataList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>mprove error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>64da67fa2e75048fbaadfc398e3f736279e90584</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/inventory.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>mprove error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>3341c2134955a5bc7f6f09872b5703b056b6b531</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/inventory.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>mprove error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>29c7ea77e18279dcfbe075d35900248b6cc11148</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/inventory.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>mprove error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>1cd304fca87fd55491cac92e5f80acd51df81aca</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/inventory.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>mprove error message when changing an inventory from regular -&gt; smart see: https://github.com/ansible/awx/issues/5744 Co-Authored-By: kldavis52 &lt;kyle.linnard.davis@gmail.com&gt;</MESSAGE>
      <SHA>b75d5415f556c0dffdedc86a9b546b6ec84ee5ce</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/views/inventory.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #5744 from ansible/5743-backport-preventDisassociateHybridInstance [Backport] Prevent disassociate hybrid instance</MESSAGE>
      <SHA>3091efca1576539f649831c75a5498e7a299d125</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/generics.py</FILE>
        <FILE>awx/api/permissions.py</FILE>
        <FILE>awx/api/serializers.py</FILE>
        <FILE>awx/api/views/__init__.py</FILE>
        <FILE>awx/api/views/mixin.py</FILE>
        <FILE>awx/main/access.py</FILE>
        <FILE>awx/main/tests/functional/api/test_instance_group.py</FILE>
        <FILE>awx/ui/src/components/DisassociateButton/DisassociateButton.js</FILE>
        <FILE>awx/ui/src/components/DisassociateButton/DisassociateButton.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/ContainerGroup.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/ContainerGroupDetails/ContainerGroupDetails.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceDetails/InstanceDetails.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceDetails/InstanceDetails.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroup.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroupDetails/InstanceGroupDetails.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroupEdit/InstanceGroupEdit.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroupEdit/InstanceGroupEdit.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroupList/InstanceGroupList.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroups.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/InstanceGroups.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/Instances/InstanceList.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/Instances/InstanceList.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/Instances/InstanceListItem.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/Instances/InstanceListItem.test.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/Instances/Instances.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/shared/ContainerGroupForm.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/shared/InstanceGroupForm.js</FILE>
        <FILE>awx/ui/src/screens/InstanceGroup/shared/InstanceGroupForm.test.js</FILE>
        <FILE>awx/ui/src/setupTests.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
