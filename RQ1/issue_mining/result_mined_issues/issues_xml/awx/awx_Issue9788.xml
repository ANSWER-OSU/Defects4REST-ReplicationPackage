<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9788</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9788</ISSUEURL>
  <TITLE>Add ability to set instance groups on a job template in the tower_job_template module in the collection</TITLE>
  <DESCRIPTION>&lt;!-- Issues are for **concrete, actionable bugs and feature requests** only - if you're just asking for debugging help or technical support, please use: - http://webchat.freenode.net/?channels=ansible-awx - https://groups.google.com/forum/#!forum/awx-project We have to limit this because of limited volunteer time to respond to issues! --&gt; ##### ISSUE TYPE - Feature Idea ##### SUMMARY &lt;!-- Briefly describe the problem or desired enhancement. --&gt; Right now to associate an instance group with a JT there is no way to do it from the `tower_job_template` module. Only way I've figured out how to do it is with a `uri` module task after creating the job template, and this is not necessarily as nice as I'd like because it is not really able to ensure that this is the only instance group set and is not idempotent, because it does not check what instance groups are set first. It would take several `uri` tasks to implement checking the current instance groups, deleting others, and setting the desired ones and only doing so if necessary. ## Current way w/ URI: ``` - name: Create job templates tower_job_template: name: &quot;{{ jt_name }}&quot; organization: &quot;{{ organization_name }}&quot; project: &quot;{{ proj_name }}&quot; playbook: example.yml job_type: run forks: 16 allow_simultaneous: true inventory: &quot;example_inventory&quot; state: present register: jt_result - name: associate the instance group with the job template uri: url: https://{{ tower_host }}/api/v2/job_templates/{{ item.id }}/instance_groups/ force_basic_auth: yes user: admin password: &quot;{{ admin_password }}&quot; method: POST body_format: json body: &quot;{{ {'id': instance_group_id|int }|to_json }}&quot; status_code: 204 validate_certs: no loop: &quot;{{ jt_results.result}}&quot; ``` ## Ideal way w/ module ``` - name: Create job templates tower_job_template: name: &quot;{{ jt_name }}&quot; organization: &quot;{{ organization_name }}&quot; project: &quot;{{ proj_name }}&quot; playbook: example.yml job_type: run instance_groups: [1, 2, 5] # list of id's of instance groups. Even slicker if it can take names instead forks: 16 allow_simultaneous: true inventory: &quot;example_inventory&quot; state: present register: jt_result ```</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>12</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9815 from keithjgrant/4837-docs-links Create single source of truth for outgoing Docs link URLs SUMMARY Adds a utility function to generate links to the correct version of documentation and updates/adds a number of docs links throughout the app. Addresses #8428 ISSUE TYPE Feature Pull Request COMPONENT NAME UI Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt;</MESSAGE>
    <SHA>c3736134ed71302faad4f6823b3d0d157813292b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9804 from sean-m-sullivan/job_template_instance_groups instance groups options for modules SUMMARY Add ability to set instance groups in organization, job templates, and inventories. #9788 ISSUE TYPE Feature Pull Request COMPONENT NAME awx-collection AWX VERSION 18.0.0 Reviewed-by: Bianca Henderson &lt;beeankha@gmail.com&gt;</MESSAGE>
      <SHA>3742090d6fe9882714f20cf5e42634c7a761637a</SHA>
      <PATCHEDFILES>
        <FILE>awx_collection/plugins/modules/tower_inventory.py</FILE>
        <FILE>awx_collection/plugins/modules/tower_job_template.py</FILE>
        <FILE>awx_collection/plugins/modules/tower_organization.py</FILE>
        <FILE>awx_collection/tests/integration/targets/tower_inventory/tasks/main.yml</FILE>
        <FILE>awx_collection/tests/integration/targets/tower_job_template/tasks/main.yml</FILE>
        <FILE>awx_collection/tests/integration/targets/tower_organization/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
