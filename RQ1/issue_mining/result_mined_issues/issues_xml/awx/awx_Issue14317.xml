<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14317</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/14317</ISSUEURL>
  <TITLE>Syntax error in yaml file tools/docker-compose/ansible/roles/sources/tasks/main.yml</TITLE>
  <DESCRIPTION>### Please confirm the following - [X] I agree to follow this project's [code of conduct](https://docs.ansible.com/ansible/latest/community/code_of_conduct.html). - [X] I have checked the [current issues](https://github.com/ansible/awx/issues) for duplicates. - [X] I understand that AWX is open source software provided for free and that I might not receive a timely response. - [X] I am **NOT** reporting a (potential) security vulnerability. (These should be emailed to `security@ansible.com` instead.) ### Bug Summary Hi, this is the error that ansible throw (via cli is the same) while running the command: make docker-compose COMPOSE_UP_OPTS=-d ``` Syntax Error while loading YAML. did not find expected '-' indicator The error appears to be in '/home/awxadmin/awx/tools/docker-compose/ansible/roles/sources/tasks/main.yml': line 51, column 1, but may be elsewhere in the file depending on the exact syntax problem. The offending line appears to be: error_code: &quot;{{ item | basename() | regex_replace('custom_(\\d+).html', '\\1') }}&quot; web_path: &quot;{{ item | regex_replace('^.*\/static', '/static') }}&quot; ^ here ``` thank for your efforts regards ### AWX version 22.6.1 ### Select the relevant components - [X] UI - [ ] UI (tech preview) - [ ] API - [ ] Docs - [ ] Collection - [ ] CLI - [ ] Other ### Installation method docker development environment ### Modifications no ### Ansible version 2.9.27 ### Operating system RHEL 8 ### Web browser _No response_ ### Steps to reproduce following the procedure in your documentation (https://github.com/ansible/awx/blob/devel/tools/docker-compose/README.md) the command: make docker-compose COMPOSE_UP_OPTS=-d throws the error reported above ### Expected results no yaml syntax error ### Actual results ``` Syntax Error while loading YAML. did not find expected '-' indicator The error appears to be in '/home/awxadmin/awx/tools/docker-compose/ansible/roles/sources/tasks/main.yml': line 51, column 1, but may be elsewhere in the file depending on the exact syntax problem. The offending line appears to be: error_code: &quot;{{ item | basename() | regex_replace('custom_(\\d+).html', '\\1') }}&quot; web_path: &quot;{{ item | regex_replace('^.*\/static', '/static') }}&quot; ^ here ``` ### Additional information removing the escapint slash before the first /static occurrence: before web_path: &quot;{{ item | regex_replace('^.*\/static', '/static') }}&quot; after web_path: &quot;{{ item | regex_replace('^.*/static', '/static') }}&quot; the procedure succeeds</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>81</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Adding alt text for image (#14541) Signed-off-by: Deepshri M &lt;deepshrim613@gmail.com&gt;</MESSAGE>
    <SHA>6d727d4bc4c124650c9f6b6f3616d7f0498a246c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317)</MESSAGE>
      <SHA>6756629b6f9eeb0b221b122eb66abdd8a523de40</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317)</MESSAGE>
      <SHA>b44551ecd87328d7a06d797dcde89e99ca5e4f62</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317)</MESSAGE>
      <SHA>bcd203c390ab2644d54def4149942ed7ca1a1535</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317)</MESSAGE>
      <SHA>415a08c36a38eb996580000d5c090d1cca7593dc</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317) (#14589)</MESSAGE>
      <SHA>3bcf46555d611ae217081545e0544537bb9fa39f</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317) (#6554) Co-authored-by: Oleksii Baranov &lt;olebaran@redhat.com&gt;</MESSAGE>
      <SHA>f7c1eaf97614e64e6f0c4a270332e89f1bdb366f</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317) (#14589)</MESSAGE>
      <SHA>bf9b8a19dc3403ba97ec97d8b536888cb80fffb1</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix swagger generation on rhel (#14317) (#14589)</MESSAGE>
      <SHA>715b533a1eb67b35f765b019768e3e1bef735d65</SHA>
      <PATCHEDFILES>
        <FILE>tools/docker-compose/ansible/roles/sources/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
