<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8906</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/8906</ISSUEURL>
  <TITLE>Add proper validation to CodeMirrorField component</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Feature Idea ##### SUMMARY It doesn't look like this was ever really implemented. There's a prop on the component where you _could_ pass in a validate function but we don't actually do that in any of the places. The idea here is that we want to validate the field for malformed yaml/json and _at a minimum_ show an error beneath the field. The reason why I think this is going to be difficult is because we have to deal with formik. By default, formik is going to run validation on _change_ and on _blur_. In the case of these codemirror fields we definitely don't want to validate on change (each keystroke) since this would show errors constantly. We probably only want to validate on blur. This can be configured at the _form_ level with a prop passed to `&lt;Formik ... ` but that would mean _all_ the fields in the form would only validate on blur. We may have to come up with a clever solution here to only validate these codemirror fields on blur but validate the rest of the form on change and blur. This is particularly important for places with prompts. We manipulate/combine extra vars and survey values later on during the process and having unvalidated data makes error handling difficult. This may also tie in to https://github.com/ansible/awx/issues/8905</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>128</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9814 from nixocio/ui_issue_9176 Do not validate optional survey Do not validate optional survey. See: #9176 Reviewed-by: Marliana Lara &lt;marliana.lara@gmail.com&gt; Reviewed-by: Tiago GÃ³es &lt;tiago.goes2009@gmail.com&gt;</MESSAGE>
    <SHA>6e46183ba6ab3f063262aecd9e3ff9d5ee7b12d5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9586 from keithjgrant/8906-code-editor-validation-2 Add VariablesField YAML/JSON validation SUMMARY Validates YAML or JSON syntax in the variables field on blur. Prevents formik from submitting the form while this error is present. addresses #8906, #8907 ISSUE TYPE Feature Pull Request COMPONENT NAME UI ADDITIONAL INFORMATION Reviewed-by: Kersom &lt;None&gt; Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt;</MESSAGE>
      <SHA>a0780aa2873c2d4f3e4c5b716eb7bcfc2a18801b</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/components/CodeEditor/CodeEditor.jsx</FILE>
        <FILE>awx/ui_next/src/components/CodeEditor/VariablesField.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
