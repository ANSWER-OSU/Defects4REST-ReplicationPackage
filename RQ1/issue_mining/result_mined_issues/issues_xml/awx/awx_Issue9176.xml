<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9176</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9176</ISSUEURL>
  <TITLE>Optional textarea survey fields not optional when min length &gt; 0</TITLE>
  <DESCRIPTION>&lt;!-- Issues are for **concrete, actionable bugs and feature requests** only - if you're just asking for debugging help or technical support, please use: - http://webchat.freenode.net/?channels=ansible-awx - https://groups.google.com/forum/#!forum/awx-project We have to limit this because of limited volunteer time to respond to issues! --&gt; ##### ISSUE TYPE - Bug Report ##### SUMMARY Text area survey fields that are optional (required checkbox unchecked) are not optional if the minimum length is greater than zero. Upon launching, an error message displays saying the field must be X characters. In versions &lt;= 15.0.1, an optional field with a min length of one could be left blank and the variable would not be defined or set. In 17.0.0, awx attempts to define the variable regardless if the field is optional or not. ##### ENVIRONMENT * AWX version: 17.0.1 * AWX install method: openshift, minishift, docker on linux, docker for mac, boot2docker * Ansible version: X.Y.Z * Operating System: * Web Browser: ##### STEPS TO REPRODUCE Create a survey with an optional text area field Set the min length to 1 Attempt to launch the job leaving the survey field blank ##### EXPECTED RESULTS When min length is greater than zero and the field is optional, the variable should be left undefined when the survey field is blank and the job should launch. ##### ACTUAL RESULTS Launch fails with a message saying the field must be at least one character. ##### ADDITIONAL INFORMATION &lt;!-- Include any links to sosreport, database dumps, screenshots or other information. --&gt;</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>72</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9797 from shanemcd/nicer-logs Make logs more readable in development environment This uses https://github.com/coderanger/supervisor-stdout to prefix process names before log messages in the dev env Before: After: Reviewed-by: Jim Ladd &lt;None&gt; Reviewed-by: Bianca Henderson &lt;beeankha@gmail.com&gt;</MESSAGE>
    <SHA>91c2f80e227f24ad87d473a7c9c096dd2543f4ee</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Do not validate optional survey Do not validate optional survey. See: https://github.com/ansible/awx/issues/9176</MESSAGE>
      <SHA>eda9bcbf6290faeb9ff28df98096a360924246d0</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/components/LaunchPrompt/steps/SurveyStep.jsx</FILE>
        <FILE>awx/ui_next/src/util/prompt/getSurveyValues.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
