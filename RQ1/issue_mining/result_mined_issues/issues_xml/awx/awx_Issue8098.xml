<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8098</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/8098</ISSUEURL>
  <TITLE>Inventory does not update host list if sources are deleted</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY Essentially, if you launch a template with an inventory that was synced with a source, and then delete that source, the inventory then cannot be synced and becomes &quot;stale&quot;. It should be noted that deleting an inventory source deletes its respective hosts automatically in the old UI. ##### STEPS TO REPRODUCE 1. Create a job template, WFJT, whatever can utilize a specific inventory. 2. In the inventory, add a source from the Sources tab &gt; using ansible/test-playbooks &gt; from Project root &gt; something like &quot;Create 10 hosts&quot; as your initialization file. 3. Sync the source so 10 hosts appear. these are blank hosts, so they won't work. 4. Launch a job. As expected, it fails as it cannot connect to blank hosts. 5. Go back to the inventory and delete the bad inventory source. 6. Go back to the job and try to launch it again. ##### EXPECTED RESULTS There is some way to update/re-sync the inventory automatically so it only uses the default localhost host and passes, after the inventory source with the empty hosts is deleted. ##### ACTUAL RESULTS The host list cannot be re-synced as a whole, and the empty hosts are &quot;stale&quot; and stay. They can be manually deleted from the Inventory &gt; Hosts tab, but this seems non-ideal. The old UI deletes this automatically.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>159</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8492 from nixocio/ui_issue_7706 Remove Type from ScheduleList Sort Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>1a4f2f43b75697d5fdad731bf4973d03ced6da26</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventoty sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>943067f59987c6080477b08a0a71c50e0ce237dc</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventoty sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>dcb6a14bf6c7b2ec67540b39641b0aef4e4134c0</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventory sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>9d154c07720bff3b3c6a3069bdee479a909caf03</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventory sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>7d13c1ecef2b1e28c3d6825549a6d6265274bda4</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventory sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>5de34a9c0b070120b9d063cb42c1bd46d2c8a003</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Remove groups/hosts when deleting inventory sources Remove related resources groups/hosts when deleting inventory sources. The current UI deletes `groups` and `hosts` once the inventory source is deleted. Add this behavior to the new UI. See: https://github.com/ansible/awx/issues/8098</MESSAGE>
      <SHA>5cc09abadb4978273ee289dddd8e85eb81cbb3a9</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventorySources/InventorySourceList.test.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
