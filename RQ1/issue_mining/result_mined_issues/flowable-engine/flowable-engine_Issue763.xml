<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>763</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/763</ISSUEURL>
  <TITLE>Flowable IDM Privilege issue with LDAP</TITLE>
  <DESCRIPTION>Hi, I have configured Flowable IDM to use Apache DS 2.0.0 as LDAP Server. I have 2 groups 1) Administrators ( default) 2) staff ( I created that one) and I have 1 user. See the screen shot attached. I could login with admin and with the custom user. I could assign privileges via Flowable IDM f-&gt; Access ID Management Application - &gt; User add User with out any issues. However when I tried to add the privileges to a group (staff). I am getting the following error. Is this a defect or Am I doing anything wrong on LDAP configuration Thanks &amp; Regards taniyer **org.flowable.engine.common.api.FlowableException: Query return 2 results instead of max 1 at org.flowable.engine.common.impl.AbstractQuery.executeSingleResult(AbstractQuery.java:165) at org.flowable.engine.common.impl.AbstractQuery.singleResult(AbstractQuery.java:106) at org.flowable.app.idm.service.PrivilegeServiceImpl.isGroupPrivilege(PrivilegeServiceImpl.java:90)** flowable-ui-app.properties # #LDAP # ldap.enabled=true ldap.server=ldap://localhost ldap.port=10389 ldap.user=uid=admin,ou=system ldap.password=secret #ldap.basedn=o=flowable ldap.basedn=ou=system ldap.query.userbyid=(&amp;(objectClass=inetOrgPerson)(uid={0})) ldap.query.userbyname=(&amp;(objectClass=inetOrgPerson)(|({0}=*{1}*)({2}=*{3}*))) ldap.query.userall=(objectClass=inetOrgPerson) ldap.query.groupsforuser=(&amp;(objectClass=groupOfUniqueNames)(uniqueMember={0})) ldap.query.groupall=(objectClass=groupOfUniqueNames) ldap.attribute.userid=uid ldap.attribute.firstname=cn ldap.attribute.lastname=sn ldap.attribute.email=mail ldap.attribute.groupid=cn ldap.attribute.groupname=cn ldap.attribute.grouptype=cn ldap.cache.groupsize=10000 ldap.cache.groupexpiration=180000 #</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>272</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'master' of https://github.com/flowable/flowable-engine</MESSAGE>
    <SHA>168b84a5a4dbd4683bca5f0c8437eb91f6072a62</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add search for LDAP group by group id (resolves #763) Currently it's not possible to see group details or assign a privilege to a group in case you have more than one groups. Reason therefore is that for the LDAPQueryBuilder the group id is ignored. New behavior is that there is a new attribute to search groups by the specified group-id. Therefore a new search query is introduced. For the sample application the user needs to configure `flowable.idm.ldap.query.group-by-id`.</MESSAGE>
      <SHA>e104039c50ad544f06965f4327319ae3e651c5d4</SHA>
      <PATCHEDFILES>
        <FILE>docs/userguide/src/en/bpmn/ch05a-Spring-Boot.adoc</FILE>
        <FILE>docs/userguide/src/en/bpmn/ch14-UI.adoc</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/LDAPConfiguration.java</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/LDAPQueryBuilder.java</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/impl/LDAPGroupQueryImpl.java</FILE>
        <FILE>modules/flowable-spring-boot/flowable-spring-boot-starters/flowable-spring-boot-autoconfigure/src/main/java/org/flowable/spring/boot/ldap/FlowableLdapProperties.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add search for LDAP group by group id (resolves #763) Currently it's not possible to see group details or assign a privilege to a group in case you have more than one groups. Reason therefore is that for the LDAPQueryBuilder the group id is ignored. New behavior is that there is a new attribute to search groups by the specified group-id. Therefore a new search query is introduced. For the sample application the user needs to configure `flowable.idm.ldap.query.group-by-id`.</MESSAGE>
      <SHA>97523b97b991a56a69be667960e72996bf836f7d</SHA>
      <PATCHEDFILES>
        <FILE>docs/userguide/src/en/bpmn/ch05a-Spring-Boot.adoc</FILE>
        <FILE>docs/userguide/src/en/bpmn/ch14-UI.adoc</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/LDAPConfiguration.java</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/LDAPQueryBuilder.java</FILE>
        <FILE>modules/flowable-ldap/src/main/java/org/flowable/ldap/impl/LDAPGroupQueryImpl.java</FILE>
        <FILE>modules/flowable-spring-boot/flowable-spring-boot-starters/flowable-spring-boot-autoconfigure/src/main/java/org/flowable/spring/boot/ldap/FlowableLdapProperties.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
