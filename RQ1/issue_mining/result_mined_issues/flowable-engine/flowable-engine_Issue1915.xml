<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1915</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/1915</ISSUEURL>
  <TITLE>Rest API - Error executing an action of a task if it includes a date variable</TITLE>
  <DESCRIPTION>There is an error trying to complete a task using the rest api. **Curl Request:** &gt; curl -s -H &quot;Content-Type: application/json&quot; -d &quot;@data-1.json&quot; -X POST \ &gt; 'http://admin:test@localhost:8080/flowable-rest/service/runtime/tasks/4e056411-cda3-11e9-9dac-0242ac110007' **data-1.json:** &gt; { &gt; &quot;action&quot;: &quot;complete&quot;, &gt; &quot;formDefinitionId&quot;: &quot;c0acd5f6-cd9e-11e9-913a-0242ac110006&quot;, &gt; &quot;variables&quot;: [ &gt; { &gt; &quot;name&quot;: &quot;ciudad&quot;, &gt; &quot;type&quot;: &quot;string&quot;, &gt; &quot;value&quot;: &quot;Cali&quot; &gt; }, &gt; { &gt; &quot;name&quot;: &quot;fecha&quot;, &gt; &quot;type&quot;: &quot;date&quot;, &gt; &quot;value&quot;: &quot;2018-12-21&quot; &gt; }, &gt; { &gt; &quot;name&quot;: &quot;cantidad&quot;, &gt; &quot;type&quot;: &quot;string&quot;, &gt; &quot;value&quot;: &quot;1&quot; &gt; }, &gt; { &gt; &quot;name&quot;: &quot;aprobado&quot;, &gt; &quot;type&quot;: &quot;string&quot;, &gt; &quot;value&quot;: &quot;SI&quot; &gt; } &gt; ] &gt; } **Error** &gt; Caused by: java.lang.ClassCastException: class java.util.Date cannot be cast to class java.lang.String (java.util.Date and java.lang.String are in module java.base of loader 'bootstrap') at org.flowable.form.engine.impl.cmd.GetVariablesFromFormSubmissionCmd.transformFormFieldValueToVariableValue(GetVariablesFromFormSubmissionCmd.java:101) ~[flowable-form-engine-6.4.2.1.jar!/:6.4.2.1] **Expected behavior** The task is completed **Additional context** Docker flowable-rest:6.4.2.1 Database: Postgresql</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update Awaitility to version 4.0.0.</MESSAGE>
    <SHA>712f78e9cc77ba07fe7ac7f77b17a28014d3b0b2</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Check type of input when attempting to parse dates in the forms engine (#1915)</MESSAGE>
      <SHA>d57897b2b7660589f9a4fea82e6f4dd2920faabb</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-form-engine/src/main/java/org/flowable/form/engine/impl/cmd/GetVariablesFromFormSubmissionCmd.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Check type of input when attempting to parse dates in the forms engine (#1915)</MESSAGE>
      <SHA>5476b0552e633a8cc9c4f4542a23be2d9c4f6fdd</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-form-engine/src/main/java/org/flowable/form/engine/impl/cmd/GetVariablesFromFormSubmissionCmd.java</FILE>
        <FILE>modules/flowable-form-engine/src/test/java/org/flowable/form/engine/test/FormInstanceTest.java</FILE>
        <FILE>modules/flowable-form-engine/src/test/resources/org/flowable/form/engine/test/deployment/form_with_dates.form</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Check type of input when attempting to parse dates in the forms engine (#1915) (#1916)</MESSAGE>
      <SHA>0bf514aef9f92d6f3b0a0e6fc0e6f7e5079ca68b</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-form-engine/src/main/java/org/flowable/form/engine/impl/cmd/GetVariablesFromFormSubmissionCmd.java</FILE>
        <FILE>modules/flowable-form-engine/src/test/java/org/flowable/form/engine/test/FormInstanceTest.java</FILE>
        <FILE>modules/flowable-form-engine/src/test/resources/org/flowable/form/engine/test/deployment/form_with_dates.form</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
