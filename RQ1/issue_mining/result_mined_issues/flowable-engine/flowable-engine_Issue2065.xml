<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2065</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/2065</ISSUEURL>
  <TITLE>BPMN20 XML import throws NullPointerException when no process is found</TITLE>
  <DESCRIPTION>**Describe the bug** I have designed a BPMN2.0 process model in Signavio modeller and exported it as BPMN 2.0 XML. When trying to import the XML into Flowable 6.4.2, the importer throws a NPE: ``` 2019-12-17 15:36:03.256 ERROR 1 --- [nio-8080-exec-8] o.f.u.m.s.FlowableModelQueryService : Import failed for BigPicture.bpmn org.flowable.bpmn.exceptions.XMLException: Error processing BPMN document at org.flowable.bpmn.converter.BpmnXMLConverter.convertToBpmnModel(BpmnXMLConverter.java:448) ~[flowable-bpmn-converter-6.4.2.1.jar:6.4.2.1] at org.flowable.ui.modeler.service.FlowableModelQueryService.importProcessModel(FlowableModelQueryService.java:179) ~[flowable-ui-modeler-logic-6.4.2.1.jar:6.4.2.1] ... Caused by: java.lang.NullPointerException at org.flowable.bpmn.converter.parser.ExtensionElementsParser.parse(ExtensionElementsParser.java:55) ~[flowable-bpmn-converter-6.4.2.1.jar:6.4.2.1] at org.flowable.bpmn.converter.BpmnXMLConverter.convertToBpmnModel(BpmnXMLConverter.java:399) ~[flowable-bpmn-converter-6.4.2.1.jar:6.4.2.1] ``` **Expected behavior** The model should be imported and visualised. It works in e.g. https://bpmn.io online demo. **Code** I will try to provide a simple test case for reproducing this bug if needed. **Additional context** Using flowable 6.4.2.1 (also tried 6.5.0-SNAPSHOT as of today). Checked out source and ran the `org.flowable.engine.test.bpmn.usertask.ImportExportTest` with my file. The problem is that if no process is found in the XML (there is none defined), then in `org.flowable.bpmn.converter.parser.ExtensionElementsParser:parse()`, the if/else block does not set the `parentElement` (`parentElement = activeProcess` will set `null`), and the subsequent call `parentElement.addExtensionElement(extensionElement);`will fail, resulting in a NPE.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add json test with number value</MESSAGE>
    <SHA>411a02191e75dcae7710f1c30d3decfc03c102b7</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>resolve #2065 NPE parsing collaboration extension elements</MESSAGE>
      <SHA>1beb1fce9675f671bc0dfdc9a96f6bc41eb30c79</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-bpmn-converter/src/main/java/org/flowable/bpmn/converter/BpmnXMLConverter.java</FILE>
        <FILE>modules/flowable-bpmn-converter/src/test/java/org/flowable/editor/language/xml/PoolsConverterTest.java</FILE>
        <FILE>modules/flowable-bpmn-converter/src/test/resources/pool-with-extensions.bpmn</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>resolves #2065 fix NPE in collaboration extensions with round tripability</MESSAGE>
      <SHA>5e3404359a353652b0fe7c643e5aebdcb5b2c069</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-bpmn-converter/src/main/java/org/flowable/bpmn/converter/BpmnXMLConverter.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
