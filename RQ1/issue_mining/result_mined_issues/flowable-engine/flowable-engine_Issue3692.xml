<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3692</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/3692</ISSUEURL>
  <TITLE>Query all type of Jobs by processDefinitionKey</TITLE>
  <DESCRIPTION>**Is your feature request related to a problem? Please describe.** I need to get all the deadletter jobs for a specific process definition key, in order to add this number to the total number of errors related to my business process. As of today, the base job query does not allow to query any type of jobs (job, timer, deadletter) per process definition key. **Describe the solution you'd like** - Add the processDefinitionKey query criteria to the BaseJobQuery interface and implement it with a join on act_re_procdef to existing Mybatis queries such as _selectDeadLetterJobByQueryCriteriaSql_ **Describe alternatives you've considered** I have considered implementing a custom query from my app that would hit directly flowable engine data model, but I would prefer to keep my app decoupled from this Flowable internal DB model, using the standard Flowable Java API. **Additional context** Notes: - another feature request could handle the add of the processDefinitionKey criteria existing Jobs REST APIs - I have started to implement this change and plan to submit a PR</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>124</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add known types for the engine rest variable type</MESSAGE>
    <SHA>fef94718aed7b2b904d1819fd851af13384f81cd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by process definition key</MESSAGE>
      <SHA>c0a4253b3c289f4e4ff434f04b6957ec23a6acd4</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by case definition key</MESSAGE>
      <SHA>0c61c2a6da7f609faa3a85f5fd5347629100902c</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/DeadLetterJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/SuspendedJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/resources/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.cmmn</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by process definition key</MESSAGE>
      <SHA>ea6076b40cb91096b4a53d86540e8e1f17acd63a</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by case definition key</MESSAGE>
      <SHA>ac130563e37d464b1bf71815edff5900d9988f42</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/DeadLetterJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/SuspendedJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/resources/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.cmmn</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by process definition key</MESSAGE>
      <SHA>8c4db100fbd1c0b793f5629e56bc5f1060c5bd3a</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by case definition key</MESSAGE>
      <SHA>bb66e7c31130a4ab1ef385f75dd73821088e4a08</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/DeadLetterJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/SuspendedJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/resources/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.cmmn</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by process / case definition key</MESSAGE>
      <SHA>0fa8b704db54c90ddc624db98d09a87ada7008d7</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/DeadLetterJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/SuspendedJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/resources/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.cmmn</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>#3692: Query jobs by process / case definition key</MESSAGE>
      <SHA>988df39a38dd8f4e4bf0cea4653dc7b0a2f810be</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/DeadLetterJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/SuspendedJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/java/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-cmmn-engine/src/test/resources/org/flowable/cmmn/test/mgmt/TimerJobQueryTest.cmmn</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/ExternalWorkerJobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/JobQueryTest.java</FILE>
        <FILE>modules/flowable-engine/src/test/java/org/flowable/engine/test/api/mgmt/TimerJobQueryTest.java</FILE>
        <FILE>modules/flowable-job-service-api/src/main/java/org/flowable/job/api/BaseJobQuery.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/DeadLetterJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/ExternalWorkerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/JobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/SuspendedJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/java/org/flowable/job/service/impl/TimerJobQueryImpl.java</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/DeadLetterJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/ExternalWorkerJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/Job.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/SuspendedJob.xml</FILE>
        <FILE>modules/flowable-job-service/src/main/resources/org/flowable/job/service/db/mapping/entity/TimerJob.xml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
