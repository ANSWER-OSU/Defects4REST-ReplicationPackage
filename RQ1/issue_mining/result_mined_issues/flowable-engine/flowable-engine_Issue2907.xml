<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2907</ISSUENO>
  <ISSUEURL>https://github.com/flowable/flowable-engine/issues/2907</ISSUEURL>
  <TITLE>Possible exception in loop when not testing for end of an iteration object</TITLE>
  <DESCRIPTION>**Describe the bug** Possible exception when attempting to access past the end of an iteration. **Expected behavior** Stop the loop and testing at the end of the iteration object. **Code** Starting with line 207 of [org.flowable.engine.impl.webservice.WSDLimport.java](https://github.com/petalslink/flowable-engine/blob/949210d5fafc343e08865b3182082e8610038483/modules/flowable-cxf/src/main/java/org/flowable/engine/impl/webservice/WSDLImporter.java#L207) where the code reads: ```` final Iterator&lt;JDefinedClass&gt; theClassNeestedClassIt = theClass.classes(); do { final JDefinedClass neestedType = theClassNeestedClassIt.next(); if (neestedType.name().equals(fieldParameterType.name())) { isFieldParameterTypeNeestedClass = true; } } while (!isFieldParameterTypeNeestedClass); ```` If the `names` do not match the loop continues by calling `next()` on the iteration. What is required is a test to see if there are more items to check by using `hasNext()` and stopping the loop when the end of the list is hit. This code was added for [Issue #2137](https://github.com/flowable/flowable-engine/issues/2137) and the corresponding [PR 2181]( https://github.com/flowable/flowable-engine/pull/2181). Interestingly similar code is added in the PR twice (which I found because of the incorrect spelling of &quot;Neested&quot;) and the second time it is done correctly in [org.flowable.engine.impl.webservice.CxfWSDLImporter at line 246](https://github.com/petalslink/flowable-engine/blob/949210d5fafc343e08865b3182082e8610038483/modules/flowable-cxf/src/main/java/org/flowable/engine/impl/webservice/CxfWSDLImporter.java#L246) where the code reads: ```` final Iterator&lt;JDefinedClass&gt; theClassNeestedClassIt = theClass.classes(); while (theClassNeestedClassIt.hasNext() &amp;&amp; !isFieldParameterTypeNeestedClass) { final JDefinedClass neestedType = theClassNeestedClassIt.next(); if (neestedType.name().equals(fieldParameterType.name())) { isFieldParameterTypeNeestedClass = true; } } ```` The &quot;fix&quot; is to use the correct code snippet in `WSDLImporter`; I will submit a PR. **Additional context** This is Flowable 6.6.0 and the lastest code at master.</DESCRIPTION>
  <REPONAME>flowable-engine</REPONAME>
  <TIMEDIFFERENCEDAYS>48</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>jmx ldap describe</MESSAGE>
    <SHA>a0a1ad07a2668e925221543d5978b3ede9c1ce3d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix possible exception in loop when not testing for end of an iteration object Fixes #2907 PR #2908</MESSAGE>
      <SHA>0fba90a67fe9cb335202fe20e7b664cb26854225</SHA>
      <PATCHEDFILES>
        <FILE>modules/flowable-cxf/src/main/java/org/flowable/engine/impl/webservice/WSDLImporter.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
