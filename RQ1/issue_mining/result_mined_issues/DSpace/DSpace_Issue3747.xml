<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3747</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/3747</ISSUEURL>
  <TITLE>[DS-373] &quot;Letter&quot; links have broken URLs in 2nd-stage Browse</TITLE>
  <DESCRIPTION>&lt;i&gt;Imported from JIRA &lt;a href=&quot;https://jira.lyrasis.org/browse/DS-373&quot;&gt;[DS-373]&lt;/a&gt; created by lcs&lt;/i&gt; &lt;p&gt;As one of our library staff noticed, the letter links at the top of the Browse pages are incorrect for the second stage of a 2-stage browse index. &lt;/p&gt; &lt;p&gt;To demonstrate, in a default configuration, click on the &quot;Authors&quot; browse-by index (the relative URL /browse?type=author). Then, click on one of the author names listed to get to a list of Items for that author. Try one of the &quot;letter&quot; links at the top of the page which normally jump to first-stage browse values starting with that letter &amp;#8211; observe that it goes to some random set of Items instead of the expected segment of first-stage browse results.&lt;/p&gt; &lt;p&gt;The reason is that on the second-stage browse result page, all those &quot;letter&quot; URLs include the &quot;value&quot; or &quot;authority&quot; parameter from the page request. &lt;/p&gt; &lt;p&gt;The attached patch fixes it by removing those parameters, and also saves some wasted copying of parameter lists by creating one map and successively replacing the STARTS_WITH value in it.&lt;/p&gt;</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>12</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merged in task/main-cris/DSC-2178 (pull request #3447) [DSC-2178] Approved-by: Giuseppe Digilio</MESSAGE>
    <SHA>fb8160e267bf4303019ff8e5ffcbbffce9ef66ec</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merged in task/main-cris/DSC-2198 (pull request #3747) Task/main cris/DSC-2198 Approved-by: Vincenzo Mecca</MESSAGE>
      <SHA>0e84785c40c548852c143427d3248e769a5c2511</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/content/CommunityServiceImpl.java</FILE>
        <FILE>dspace-server-webapp/src/test/java/org/dspace/app/rest/CommunityAdminGroupRestControllerIT.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
