<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9312</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/9312</ISSUEURL>
  <TITLE>CLI dspace stats-log-importer is failing with undefined configFile</TITLE>
  <DESCRIPTION>**Describe the bug** We are currently leaving legacy DSpace 5.X in favor of DS7 with completely new infrastructures. We had some statistical stored as logs that we want to recover and ingest it on the new system. But for the tests running so far, we can execute stats-log-importer command on DS5, but that same exact command doesn't work for DS7. **To Reproduce** Steps to reproduce the behavior: 1. You can simply execute `stats-log-importer` command with an already converted file (csv format) ``` dspace/bin/dspace stats-log-importer -v -i dspace.2015-12-17.log-20151222` ``` An exception occurs: ``` Exception: null java.lang.NullPointerException at org.dspace.statistics.util.StatisticsImporter.load(StatisticsImporter.java:290) at org.dspace.statistics.util.StatisticsImporter.main(StatisticsImporter.java:516) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.dspace.app.launcher.ScriptLauncher.runOneCommand(ScriptLauncher.java:283) at org.dspace.app.launcher.ScriptLauncher.handleScript(ScriptLauncher.java:134) at org.dspace.app.launcher.ScriptLauncher.main(ScriptLauncher.java:99) ``` **Expected behavior** Digging a little bit, the error is related with geoipLookup that is set as null object. [dspace-api/src/main/java/org/dspace/statistics/util/StatisticsImporter.java](https://github.com/DSpace/DSpace/blob/4bc95a31982831a04aad33f20b2a6e720aa7ff02/dspace-api/src/main/java/org/dspace/statistics/util/StatisticsImporter.java#L97) ``` private static DatabaseReader geoipLookup; ``` ``` CityResponse cityResponse = geoipLookup.city(ipAddress); ``` that isn't defined when called. We were hopping to have that content ingested in Solr. **Related work** https://github.com/DSpace/DSpace/issues/9311</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>315</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9913 from jlipka/fix/submission-scope-naming Submission scope naming for input field validation fixed</MESSAGE>
    <SHA>dbfa85a1730222a749e67cef00802709f2e85e03</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9817 from IgorBaptist4/fix-stats-importer fix for #9312: properly type in field id, adjust use of getProperty and add error handling</MESSAGE>
      <SHA>6f430ad074821c4ebf1c8e4f55f9a4597b3a19f1</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/util/StatisticsImporter.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #10146 from DSpace/backport-9817-to-dspace-8_x [Port dspace-8_x] fix for #9312: properly type in field id, adjust use of getProperty and add error handling</MESSAGE>
      <SHA>c36df61af10f27b16f7bdbec8ca510afa80b09ee</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/util/StatisticsImporter.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #10145 from DSpace/backport-9817-to-dspace-7_x [Port dspace-7_x] fix for #9312: properly type in field id, adjust use of getProperty and add error handling</MESSAGE>
      <SHA>0d8c5f12a323b7fcaa51a07a7791a55441103407</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/util/StatisticsImporter.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
