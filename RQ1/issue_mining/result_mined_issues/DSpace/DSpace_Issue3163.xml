<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3163</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/3163</ISSUEURL>
  <TITLE>CLI item import error (SAF)</TITLE>
  <DESCRIPTION>**Describe the bug** The DSPace CLI item import is throwing a Spring exception when I import SAF directories. However I am able to run other tasks, like item exporting. The CLI `ItemImportServiceFactory.getInstance().getItemImportService()` method returns a NullPointerException. Exception: null java.lang.NullPointerException at org.dspace.app.itemimport.ItemImportCLITool.main(ItemImportCLITool.java:302) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.dspace.app.launcher.ScriptLauncher.runOneCommand(ScriptLauncher.java:272) at org.dspace.app.launcher.ScriptLauncher.handleScript(ScriptLauncher.java:128) at org.dspace.app.launcher.ScriptLauncher.main(ScriptLauncher.java:93) I added System.out.println to `DSpaceServiceManager.getServiceByName()` to see the error report on the command line: Error creating bean with name 'itemImportServiceFactory': Unsatisfied dependency expressed through field 'itemImportService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.dspace.app.itemimport.ItemImportServiceImpl#0' defined in file [/Users/michaelspalti/dspace-tomcats/dspace7/config/spring/api/core-services.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.dspace.app.itemimport.ItemImportServiceImpl]: Constructor threw exception; nested exception is java.lang.NullPointerException The `ItemImportService` bean is an autowired property of the `ItemImportServiceFactoryImpl`. **To Reproduce** Steps to reproduce the behavior: 1. Attempt to import items using SAF: e.g. ./bin/dspace import --add --eperson=mspalti@willamette.edu --collection=10177/2 --source=scene1926/batch_1 --mapfile=scene_1926 **Expected behavior** Items should load successfully. I built my local DSpace from an earlier commit **793ac8c0d** the load was successful.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>61</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[maven-release-plugin] prepare for next development iteration</MESSAGE>
    <SHA>16e7fc9127189f1f6dabc96774f02b4255987b65</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed itemimport working dir configuration. #3163</MESSAGE>
      <SHA>3c5a3668fb46879733159475caeb57653e1369e5</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportServiceImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #3239 from mspalti/working_dir Fixed itemimport working dir configuration. #3163</MESSAGE>
      <SHA>c3cbdd15fe15d2a1e79e3f15797e65ae472183e1</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportServiceImpl.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
