<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8342</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8342</ISSUEURL>
  <TITLE>Allow setting bundle when creating a bitstream in item with REST (DSpace 6.x)</TITLE>
  <DESCRIPTION>**Is your feature request related to a problem? Please describe.** Currently, adding bitstream to item with REST API sets it to ORIGINAL bundle. However, in customized installations different bundles may be used with different access settings or shown in different way. **Describe the solution you'd like** Proposed solution for DSpace 6: extend the endpoint `POST /items/{item id}/bitstreams (Add a bitstream to the specified item)` with a new optional bundleName parameter that allows setting a custom bundle. ORIGINAL is used as default so the change is backwards-compatible. **Describe alternatives or workarounds you've considered** A workaround is to create the bitstream in original bundle first and then change it - either using the UI or with another REST extension #8339 (DS-2983) that allows setting bundle of an existing bitstream. However, if a custom bundle is expected it is more straightforward to place the item there in the first place. **Additional context** Custom bundles have been used as part of JYU repository https://jyx.jyu.fi/ in at least two use cases: - CONTRACT bundle to store thesis-related contracts (submitted by a non-DSpace form application with REST). These are not shown publicly. - DATASET bundle to show individual files related to a dataset in a compressed list separate from files in ORIGINAL bundle (=that in the case of datasets contains zip package containing all the files), visually somewhat similar to solution used in Edinburgh Datashare https://datashare.ed.ac.uk/ . As with theses, dataset files and metadata are submitted from a non-DSpace application using REST. One should also note that this proposal deliberately negates an older issue DS-2348 REST Bitstreams should be only in original bundle. #777</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>391</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #8331 from alanorth/mirage2-nodejs-14 Use Node.js 14 to build Mirage 2</MESSAGE>
    <SHA>7f80e42e947c8b9df3ce2b8ccc1f6ffad5a602fd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add bundleName parameter to items REST endpoint (POST bitstreams) [DSpace#8342] New bundle is created along with bitstream if not already exist.</MESSAGE>
      <SHA>13063a5540c1ea7cf0e429bf45e83446e66a0ccc</SHA>
      <PATCHEDFILES>
        <FILE>dspace-rest/src/main/java/org/dspace/rest/ItemsResource.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add bundleName parameter to items REST endpoint (POST bitstreams) [DSpace#8342] New bundle is created along with bitstream if not already exist.</MESSAGE>
      <SHA>fda4dcecc349fd2d6b7d938c1795606802d908df</SHA>
      <PATCHEDFILES>
        <FILE>dspace-rest/src/main/java/org/dspace/rest/ItemsResource.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Pick default bundle name from Constants [DSpace#8342]</MESSAGE>
      <SHA>80a4a6abf593a736f773d22d3674d63bbff7030a</SHA>
      <PATCHEDFILES>
        <FILE>dspace-rest/src/main/java/org/dspace/rest/ItemsResource.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
