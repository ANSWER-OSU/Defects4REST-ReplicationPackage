<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7051</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/7051</ISSUEURL>
  <TITLE>[DS-3704] Expand DSpace REST Reports to include bitstream fields in item listing</TITLE>
  <DESCRIPTION>&lt;i&gt;Imported from JIRA &lt;a href=&quot;https://jira.lyrasis.org/browse/DS-3704&quot;&gt;[DS-3704]&lt;/a&gt; created by terrywbrady&lt;/i&gt; &lt;p&gt;There was discussion of the REST reporting tools at the DSpace North American User Meeting. One enhancement that I can provide would enable a user to generate a report that includes bitstream information.&lt;/p&gt; &lt;p&gt; &lt;/p&gt; &lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://jira.lyrasis.org/secure/attachment/18724/18724_2017-09-28_15-41-07.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt; &lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://jira.lyrasis.org/secure/attachment/18723/18723_image-2017-09-28-15-42-22-885.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>168</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Cambio la URL al sitio del blog de SEDICI El sitio del blog cambió el protocolo de HTTP a HTTPS.</MESSAGE>
    <SHA>ef1a4641e9043c00c9913b091c0c0b33dbf4a7b6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Cherrypick de la implementacion REST a Drupal para cic -#7051 Comienzo con la implementación de los conectores REST a Drupal Creo la clase RestAuthorityConnector que se encarga de realiar una consulta http a drupal y devolverla en formato JSON Tambien la clase RestAuthorityProvider, que implementa la interfaz ChoiceAuthority, y que a partir de la respuesta JSON de RestAuthorityConnector, extrae los correspondientes Choices de la respuesta e implementa los metodos getMatches, getBestMatch y getLabel -#7051 Hago abstracta la clase RestAuthorityProvider y alguno de sus métodos para que luego los verdaderos conectores de los distintos metadatos puedan heredar de ella Falta crear los conectores para cada uno de los metadatos que se desee controlar por autoridad -#7051 Refactoring del provider de autoridades REST RestAuthorityProvider. Ahora los solo se delega a las clases hijas el metodo extractChoice, el resto o es private o es final El path del endpoint de cada conector ahora se obtiene desde la configuracion Los campos de id y de filtro de texto se pueden tambien opcionalmente setear desde la configuracion, si no se setean usan valores por defecto Ahora para implementar un conector REST de autoridades solo se debe crear una clase que herede de RestAuthorityProvider y que implemente el metodo extractChoice, el cual se encarga de crear un Choice partir de una de las respuestas devueltas por la API REST -#7051 Agrego el conector REST a drupal TaxonomiesRestAuthorityProvider el cual a partir de lo devuelto por la api de drupal arma los choices como lo esperan los metadatos correspondientes a las taxonomias (materias, ford, materias cic, etc) Agrego un archivo de configuracion para test Copiar y pegar en el local_custom.cfg para probar la configuracion... Agrego los conectores de Instituciones y de Autores. Además agrego algunos propiedades más, por ejemplo: 1) choices.authKeyPrefix.cic.institucionOrigen = http://digital.cic.gba.gob.ar/auth/node/ 2) choices.fatherAuth.cic.institucionOrigen = father_id 3) choices.fatherAuthValue.cic.institucionOrigen = 243187 El &quot;choices.authKeyPrefix&quot; sirve para indicar el prefijo del auth_key. Como el auth_key es un campo que se genera on-the-fly desde la API REST, entonces es necesario hacer un reemplazo de este prefijo al momento de consultar a Drupal por el &quot;auth_key&quot;. El &quot;choices.fatherAuth&quot; sirve para indicar a Drupal cual es el parametro a utilizar para decirle &quot;quiero los hijos de tal institución&quot;. A su vez, el &quot;choices.fatherAuthValue&quot; sirve para indicar el ID del padre. Agrego el conector para revistas. -#7051 Cambio rutas de los endpoints para los conectores rest de materias y keywords para que utilicen las nuevas rutas definidas en la vistas de drupal Ahora para materias se utiliza el endpoint /fos en vez de /subjects Para keywords ahora es /decs Agrego filiacion entre parentesis para el conector de Autores. Ademas modifico un poco los métodos para poder identificar cuando un request viene por el auth_key (es decir, por ID), y de esta forma evitar que cuando se indexen en Discovery los metadatos relativos a AUTORES e INSTITUCIONES no se indexen los valores entre paréntesis. -#7051 Modifico conector de autoridades rest de autores para que ahora se muestre la filiacion entre parentesis al momento de la busqueda en el submission -#7051 Elimino el local_custom_test.cfg y paso todo lo de ahi al local_custom Los cambios ya estan probados, elimino la config de test y paso los cambios a la verdadera configuracion Todavia no elimino los conectores Sparql por las dudas -#7051 Seteo la url del drupal de autoridades para los conectores rest Es la misma que antes, la de los conectores sparql</MESSAGE>
      <SHA>36571fcbbad6452daf9457f177276671ddd6802a</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/modules/rest-authorities.cfg</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/AuthorRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/InstitutionsRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/JournalRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityConnector.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/TaxonomiesRestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Comienzo con la implementación de los conectores REST a Drupal Creo la clase RestAuthorityConnector que se encarga de realiar una consulta http a drupal y devolverla en formato JSON Tambien la clase RestAuthorityProvider, que implementa la interfaz ChoiceAuthority, y que a partir de la respuesta JSON de RestAuthorityConnector, extrae los correspondientes Choices de la respuesta e implementa los metodos getMatches, getBestMatch y getLabel</MESSAGE>
      <SHA>983e5ce4600101c8550335a244fecc94d0a63c8d</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
        <FILE>dspace/config/modules/rest-authorities.cfg</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityConnector.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Hago abstracta la clase RestAuthorityProvider y alguno de sus métodos para que luego los verdaderos conectores de los distintos metadatos puedan heredar de ella Falta crear los conectores para cada uno de los metadatos que se desee controlar por autoridad</MESSAGE>
      <SHA>26da4cd231e856dba11b6453d21def0501f02830</SHA>
      <PATCHEDFILES>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityConnector.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Refactoring del provider de autoridades REST RestAuthorityProvider. Ahora los solo se delega a las clases hijas el metodo extractChoice, el resto o es private o es final El path del endpoint de cada conector ahora se obtiene desde la configuracion Los campos de id y de filtro de texto se pueden tambien opcionalmente setear desde la configuracion, si no se setean usan valores por defecto Ahora para implementar un conector REST de autoridades solo se debe crear una clase que herede de RestAuthorityProvider y que implemente el metodo extractChoice, el cual se encarga de crear un Choice partir de una de las respuestas devueltas por la API REST</MESSAGE>
      <SHA>6c1ea8eb99a1162ae146d3ac8d5b39b345ad3ed2</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityConnector.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Agrego el conector REST a drupal TaxonomiesRestAuthorityProvider el cual a partir de lo devuelto por la api de drupal arma los choices como lo esperan los metadatos correspondientes a las taxonomias (materias, ford, materias cic, etc)</MESSAGE>
      <SHA>d06df91653bbead898370eb902ac1e6dbc4c0272</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/TaxonomiesRestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Cambio rutas de los endpoints para los conectores rest de materias y keywords para que utilicen las nuevas rutas definidas en la vistas de drupal Ahora para materias se utiliza el endpoint /fos en vez de /subjects Para keywords ahora es /decs</MESSAGE>
      <SHA>515f0559f8b96c59933c124c3537e392c9b494d5</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom_test.cfg</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Modifico conector de autoridades rest de autores para que ahora se muestre la filiacion entre parentesis al momento de la busqueda en el submission</MESSAGE>
      <SHA>51f24292baabb9a6dcece1cad157104d553088fe</SHA>
      <PATCHEDFILES>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/AuthorRestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Elimino el local_custom_test.cfg y paso todo lo de ahi al local_custom Los cambios ya estan probados, elimino la config de test y paso los cambios a la verdadera configuracion Todavia no elimino los conectores Sparql por las dudas</MESSAGE>
      <SHA>3346ec3d3669db4d93dfcf35a781992a3b5d8440</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
        <FILE>dspace/config/local_custom_test.cfg</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Seteo la url del drupal de autoridades para los conectores rest Es la misma que antes, la de los conectores sparql</MESSAGE>
      <SHA>8310f6beb185b4ac704a37544814ae4533b4a6f5</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/modules/rest-authorities.cfg</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #52 from CICBA/ticket#7051 #7051 Implementar conectores REST para Autores, Instituciones, Materias y Revistas</MESSAGE>
      <SHA>b1b9058cf4d108d8998455a951f7d9c6079b0cce</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
        <FILE>dspace/config/modules/rest-authorities.cfg</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/AuthorRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/InstitutionsRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/JournalRestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityConnector.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/RestAuthorityProvider.java</FILE>
        <FILE>dspace/modules/additions/src/main/java/ar/edu/unlp/sedici/dspace/authority/TaxonomiesRestAuthorityProvider.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>-#7051 Fix a nombre de propiedad en en local_custom.cfg estaba asi choices.authKeyPrefix.subject.materia deberia estar asi choices.authKeyPrefix.dcterms.subject.materia</MESSAGE>
      <SHA>2ee0ab37adedcd7aa7731259adbad0224c494e21</SHA>
      <PATCHEDFILES>
        <FILE>dspace/config/local_custom.cfg</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
