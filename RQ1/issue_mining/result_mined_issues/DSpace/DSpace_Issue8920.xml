<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8920</ISSUENO>
  <ISSUEURL>https://github.com/DSpace/DSpace/issues/8920</ISSUEURL>
  <TITLE>LDAP authentication is broken if groupmaps are enabled</TITLE>
  <DESCRIPTION>**Describe the bug** LDAP authentication is broken if groupmaps are enabled in `dspace/config/modules/authentication-ldap.cfg`. DSpace version is 7.6. **To Reproduce** Steps to reproduce the behavior: 1. Configure and enable LDAP authentication in `dspace/config/modules/authentication-ldap.cfg` 2. Test that LDAP login is working 3. Enable at least one groupmap, for example: `authentication-ldap.login.groupmap.1 = OU=MYORG:MYORG_LDAP_USERS` 4. Test LDAP login again 5. DSpace frontend displays &quot;Invalid email or password&quot; message and the following error and stack trace are shown in dspace.log: &lt;details&gt; &lt;summary&gt;dspace.log&lt;/summary&gt; &lt;pre&gt;&lt;code&gt;2023-06-26 19:42:56,476 INFO unknown unknown org.dspace.authenticate.LDAPAuthentication @ anonymous::auth:attempting trivial auth of user=jsmith 2023-06-26 19:42:57,326 ERROR unknown unknown org.springframework.boot.web.servlet.support.ErrorPageFilter @ Forwarding to error page from request [/api/authn/login] due to exception [Cannot invoke &quot;java.util.ArrayList.iterator()&quot; because &quot;group&quot; is null] java.lang.NullPointerException: Cannot invoke &quot;java.util.ArrayList.iterator()&quot; because &quot;group&quot; is null at org.dspace.authenticate.LDAPAuthentication.assignGroups(LDAPAuthentication.java:730) ~[dspace-api-7.6.jar:7.6] at org.dspace.authenticate.LDAPAuthentication.authenticate(LDAPAuthentication.java:273) ~[dspace-api-7.6.jar:7.6] at org.dspace.authenticate.AuthenticationServiceImpl.authenticateInternal(AuthenticationServiceImpl.java:108) ~[dspace-api-7.6.jar:7.6] at org.dspace.authenticate.AuthenticationServiceImpl.authenticate(AuthenticationServiceImpl.java:80) ~[dspace-api-7.6.jar:7.6] at org.dspace.app.rest.security.EPersonRestAuthenticationProvider.authenticateNewLogin(EPersonRestAuthenticationProvider.java:130) ~[classes/:7.6] ...&lt;/code&gt;&lt;/pre&gt; &lt;/details&gt; **Expected behavior** Login should succeed. **Related work** This seems to be a regression from: - https://github.com/DSpace/DSpace/pull/8814 I have tested reverting that patch, both with groupmaps enabled and disabled, and LDAP login works in both cases.</DESCRIPTION>
  <REPONAME>DSpace</REPONAME>
  <TIMEDIFFERENCEDAYS>124</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9153 from DSpace/backport-9069-to-dspace-7_x [Port dspace-7_x] Fix &quot;Site cannot be indexed&quot; error which appears in ITs and sometimes in logs</MESSAGE>
    <SHA>bd986a06c4b210a63d3b20101af8efd2d28cf5b0</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add a null check when assigning ldap groups Prevent NullReferenceException by checking if the group list is null Fixes #8920 (cherry picked from commit bb6498ed5e4696201d3e45bd377faa407dca277f)</MESSAGE>
      <SHA>e597c2afc1a56fb4d36ca15e1ada756e5d1a8c4d</SHA>
      <PATCHEDFILES>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/LDAPAuthentication.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>internal/be-upgrade-clarin-dspace-7.6 (#497) * Split docker image builds into separate jobs to allow them to run in parallel. * Ensure 'main' code is tagged as 'latest' in DockerHub * Fixes #8558 - set Solr UTC timezone Set the timezone of the Solr date formatter to UTC * remove obsolete code fragments * Add action to automatically create a port PR when specified (cherry picked from commit f6a898c3d13360286c416b2588ab0447d9e3d81b) * Run PR Port action as 'dspace-bot' to allow new PRs to trigger CI checks * Minor update to label_merge_conflicts to ignore any errors (seem random at this time) * Fix typo. Config must be a valid regex (cherry picked from commit 799528963e3c0391852ecbaf82ef21ec7d477342) * Bump h2 from 2.1.214 to 2.2.220 Bumps [h2](https://github.com/h2database/h2database) from 2.1.214 to 2.2.220. - [Release notes](https://github.com/h2database/h2database/releases) - [Commits](https://github.com/h2database/h2database/compare/version-2.1.214...version-2.2.220) --- updated-dependencies: - dependency-name: com.h2database:h2 dependency-type: direct:production ... Signed-off-by: dependabot[bot] &lt;support@github.com&gt; * Update FullTextContentStreams.java Fix NPE if bitstream is null * Update FullTextContentStreams.java Add additional NPE checks * Update ItemUtils.java Prevent npe if bitstream is null * dspace.cfg: remove old webui.itemlist properties These properties are no longer used in DSpace 7: webui.itemlist.widths webui.itemlist.*.widths webui.itemlist.tablewidth (cherry picked from commit 16c46c49797cf4a15b8ef51efdd365610bdf73ab) * dspace.cfg: remove old webui.browse.thumbnail.show property The webui.browse.thumbnail.show property is no longer used as of DSpace 7. Also remove subsequent references to adding thumbnails to item view columns since these are from legacy DSpace. (cherry picked from commit 213a546486073f09e73d91d014c489ed300bf59d) * dspace.cfg: remove old webui.itemlist.browse.* property The webui.itemlist.browse.* properties are no longer used in DSpace 7. (cherry picked from commit 35f72bc9d0c1a01aa0b9313216bbbe63e6960a81) * Fix #8963: Remove deletion constraint from Groomer * Enable entity type to submission form mapping by default (cherry picked from commit b71eee89c1e1dd7569e800e13eb8878548853ce6) * [DURACOM-179] replaced 'null' value with exception actual value in sendErrorResponse method calls having 'null' (cherry picked from commit aa35a47add5565a9302d276da2ceb22b8dbc320f) * DS-8935. webui.browse.link CrossLinks - Fix for multiple exact matches Fixes #8935 when multiple exact match &quot;webui.browse.link&quot; configuration entries are present that point to different indexes. Modified the code to return the index associated with the given metadata (which is used as the key in the hash map), instead of the key from the keySet (which may not actually be the metadata value being searched for). https://github.com/DSpace/DSpace/issues/8935 (cherry picked from commit b846c53baaeae1e19fbbafa3dc7ca724bcaf32c1) * #9006 fix referenced configuration file (cherry picked from commit 29a88d7e2dcfc36d2cd7991de3b84ef5f5623b63) * #9006 fix referenced configuration file (Test) (cherry picked from commit 309b0b355e4bffd6a1be3e6341dd6d17f99892c8) * Fix #8933: Only add the base statistic core if it hasn't already been added * Remove duplicate code * On failure log the name of the assetstore file and trace causes of exception. (cherry picked from commit 22974e982c99b7faa9d287ddc5bef4715f19849a) * Report Throwable's type too. (cherry picked from commit d6b612fc5cf84fe6b7226649451b7b927ded8997) * More description on OutOfMemoryError too. (cherry picked from commit bbe5df3f7dd4a33423fdf47702e23f3eb9ef821f) * Remove useless log.info (cherry picked from commit 1f3ad993cc4d10694112227245be3de1ec7b3762) * 103837: Refactor GA config to list bundles * README.md: Fix typo (cherry picked from commit ca8abddff1230e581501b482623966e64016d609) * Bump up versions of buildnumber-maven-plugin &amp; build-helper-maven-plugin. add configuration for SCM failure (cherry picked from commit 78ea9e86df5e6737a4ce129120a6e1e6c74a371c) * 3331 - remove the --optimize feature of 'dspace stats-util' (cherry picked from commit 08c650921d7ce5210906db846ff29a053c2155a7) * fix MissingOptionException on help (cherry picked from commit 8ae5ffbf9b41fe2ad4e1146eceeff47e6ba985a0) * fix stylecheck (cherry picked from commit b1377ca1ef82d80f2ece9b48b8f1571e786c4525) * ingore unrecognized arguments on help (cherry picked from commit 82c9b6fc9baee9f4f5d8b4cc967b5d12b63cdd39) * add DSpaceSkipUnknownArgumentsParser as parser to ignore/skip unknown arguments in cli by help, fix not necessary ParseException in help (cherry picked from commit 86285d78aa0844b9811dcebdefa897ceeb944226) * remove not necessary else (cherry picked from commit 064e2caa37dfa283c3c08dee0e7321e36073bfa2) * Enable new skip merge commit feature * dspace-api: remove unnecessary trailing whitespace * 103818 ItemServiceImpl#inheritCollectionDefaultPolicies now clears item READ policies if new parent collection has a default READ policy * 103818 Add boolean parameter to ItemServiceImpl#inheritCollectionDefaultPolicies to decide whether to override item read policies * 103818 Add boolean parameters to ItemServiceImpl methodds to decide whether to override read policies * 103818 Extend ItemServiceTest#testMoveItemToCollectionWithMoreRestrictiveReadPolicy * 104878 Fix error in ItemServiceTest related to inheriting collection policies upon item move * 104878 Adjust ItemServiceTest to expect correct behavior of bundles when item is migrated * Fix failing IT in BulkAccessControlIT * 103837: Fix isContentBitstream() in GoogleAsyncEventListener * Rename test suites that are really integration testing. (cherry picked from commit f66ca33b0627c1b0789c9c3ce407463f5dc3356e) * Bump org.eclipse.jetty:jetty-xml Bumps [org.eclipse.jetty:jetty-xml](https://github.com/eclipse/jetty.project) from 9.4.51.v20230217 to 9.4.52.v20230823. - [Release notes](https://github.com/eclipse/jetty.project/releases) - [Commits](https://github.com/eclipse/jetty.project/compare/jetty-9.4.51.v20230217...jetty-9.4.52.v20230823) --- updated-dependencies: - dependency-name: org.eclipse.jetty:jetty-xml dependency-type: direct:production ... Signed-off-by: dependabot[bot] &lt;support@github.com&gt; (cherry picked from commit 2bcc0b38a9436b0abc4c54e419f0fa6ae194269c) * Add note that rebooting Tomcat required * Add websvc.opensearch.autolink and websvc.opensearch.shortname to exposed REST configuration properties (cherry picked from commit 80b35c9650ec2f40bea3b497b65ce77d0c97bfcf) * Add a &quot;container friendly&quot; log4j2 cfg and output compose dspace log to console (cherry picked from commit 9eefd56cd7013730ff43969b321d6cbee2a3ae64) * Fix ClassCastException (Collection cannot be cast to Item) in Handle identifier classes (cherry picked from commit 1271374d37a3f7d9cec270e54ec106895aa934bc) * Fix checkstyle. Correct grammar of comment while doing so. (cherry picked from commit ffa2683c632cfab59b0432c203434ac15a6eb85f) * Avoid double slashes in sitemap paths. (cherry picked from commit eae4463eaa5916bd9b20f4e4132398aceeba1f02) * Remove 'cross join' from count query. Updates &quot;countHandlesByPrefix&quot; to use a query similar to existing &quot;findByPrefix&quot; (cherry picked from commit 14223bd712ce91cf97096f2201924baea8456814) * fix logical bug when checking if field is controlled authority * remove optimize option from oai import * added authorization check for license bitstream in OAI import * OAI: add support to extract embargo from bitstreams and expose it in OAI metadata (cherry picked from commit db81d758a947a9bdbb63fea9e872bc9b52a377ff) * ItemUtils.java: added method doc (cherry picked from commit 51e60fbcf92ea731c4e355c9cf080d251ffbf68f) * ItemUtils.java: improved method to account for multiple embargo policies and select the longest embargo (cherry picked from commit 538be7f09ba790a4ab7099e7027e1e8f6a9c62ea) * Refactored access-status to include embargo date based on the DefaultAccessStatusHelper logic (look at primary or first bitstream) (cherry picked from commit 895926f021a355181faef47b5c41e78031700475) * Remove unused imports (cherry picked from commit 4bd2cfdf0f931aec7a05db42f255423fe806ea77) * Fix style issues (cherry picked from commit 724a4ffb0ed9ffefb2866930655767590b462bb5) * Fix style issues (cherry picked from commit 6e2c8a4ae0068d844d0fc796001c170c8849babf) * Add null check (cherry picked from commit 0de4c3945ed7f30d41841cda4bf01acf9ffc130f) * ItemUtils.java: refactored addEmbargoField (cherry picked from commit 291afa765d29836a67727fdd2f82ac0c9f9310c4) * uketd_dc.xsl: also expose access-status if embargo or restricted (cherry picked from commit 4b40872a6d5a3934c1f79c6babf439a21ce25f66) * DefaultAccessStatusHelper: fix logic to take shortest embargo (cherry picked from commit d17ef09082aa237cffdc928d9560667487c2c976) * Remove currently unused customisation of ItemUtils (cherry picked from commit 490a982e8055991a6b8cbacece22b924466e22df) * DefaultAccessStatusHelper: getEmbargoFromItem return null embargo if status than embargo (cherry picked from commit e05e73a112ce60bd0689ce68af442382712bd5fc) * Additional Item class cast fixes in handle providers DSOs were not properly checked if they were instanceof Item before attempting the cast in HandleIdentifierProvider and VersionedHandleIdentifierProviderWithCanonicalHandles * Remove Oracle script that accidentally made it in via #8800 (cherry picked from commit 5e04edf41e452cd383597680da9c3101211156b8) * 8968 - request-a-copy email: non ASCII characters are encoded as HTML character entity references (cherry picked from commit db36d5eeae3e76b61178c2c7ac4243bc2fc20a97) * unused import (cherry picked from commit bf6e042085140e305d43d61ddce564fbfe819c7f) * 8968 - added custom StringEscapper (cherry picked from commit 103c8ee75771d3d9e58e530b8855d07cc14598c2) * checkstyle (cherry picked from commit 2c2b3b18dc781054539add48ca74e4bf688c400c) * 8968 - implementated using HtmlUtils scaping (cherry picked from commit 090beedb6f692df29d1a61d4c2e6fde09d4b4c1d) * checkstiye (cherry picked from commit d12fbe2c340e18e42dba4380ee9976bccb4ca421) * Define _version_ * #8585 Add submitter information to provenance metadata (cherry picked from commit c15ac0eb4a3d39a0de47adbfa5260a6f3b396837) * 8585 - added provenance to metadata-import and itemImport (cherry picked from commit ea6307dcc68a75c935049a02022145691693cff4) * dspace-api: fix misaligned comment (cherry picked from commit 4fba787322803cc36ef267f0d6913b92c1eaeca4) * oai_openaire.xsl : change resourceTypeGeneral for thesis Thesis are &quot;Literature&quot; resource type (resourceTypeGeneral), not &quot;other research product&quot; ref: https://github.com/openaire/guidelines-literature-repositories/issues/43#issuecomment-1318262914 and https://api.openaire.eu/vocabularies/dnet:result_typologies/publication (cherry picked from commit 669ff343503539aa6fc8b23600989ab958a403b9) * Bump org.eclipse.jetty:jetty-http Bumps [org.eclipse.jetty:jetty-http](https://github.com/eclipse/jetty.project) from 9.4.52.v20230823 to 9.4.53.v20231009. - [Release notes](https://github.com/eclipse/jetty.project/releases) - [Commits](https://github.com/eclipse/jetty.project/compare/jetty-9.4.52.v20230823...jetty-9.4.53.v20231009) --- updated-dependencies: - dependency-name: org.eclipse.jetty:jetty-http dependency-type: direct:production ... Signed-off-by: dependabot[bot] &lt;support@github.com&gt; * Bump org.json:json from 20230227 to 20231013 in /dspace-api Bumps [org.json:json](https://github.com/douglascrockford/JSON-java) from 20230227 to 20231013. - [Release notes](https://github.com/douglascrockford/JSON-java/releases) - [Changelog](https://github.com/stleary/JSON-java/blob/master/docs/RELEASES.md) - [Commits](https://github.com/douglascrockford/JSON-java/commits) --- updated-dependencies: - dependency-name: org.json:json dependency-type: direct:production ... Signed-off-by: dependabot[bot] &lt;support@github.com&gt; (cherry picked from commit 11a08f1ac0a9b75bf3f2869d3760b2f0e229aefe) * Reading localized license file. * Reading localized license file. * Applying commit 6108c98d82f3cbf00e248f83535b06da4040ece4 * quote Pattern for thumbnail resolution constructed from bitstream filename (cherry picked from commit a1248074681a7bc4603176fb3e7d989b91edcbcd) * check null value of bitstream name before quoting name for regex (cherry picked from commit a9bcc0c223d0219f464d986d7b7c66b3c4cbc39c) * extract bitstream thumbnail name pattern into own function (cherry picked from commit c5466c2249c092f6638a7072b57c934d1d3581b5) * Make workflow curation tasks actually work. When curation runs, there was no &quot;current user&quot; and no claimed task, so the code broke when trying to find people to notify about curation failures. (cherry picked from commit a76af35a0cd4f0c0e8737c736578b17bcc349691) * Community request: fake EPerson from configuration. (cherry picked from commit bb9e88d1bb452d0865f4827134baf907e6d34044) * Correct some documentation. (cherry picked from commit be22790aad7f627e2ac027773e272b703986f589) * Handle missing role. (cherry picked from commit 2e62fa3fd1f264aac0bb4a12953b6385211e5656) * Fix &quot;Site cannot be indexed&quot; error by ignoring ADD/REMOVE events on Site object (cherry picked from commit ef7f02fe81bc570353c0bf6a43706c77909e30e3) * Add a null check when assigning ldap groups Prevent NullReferenceException by checking if the group list is null Fixes #8920 (cherry picked from commit bb6498ed5e4696201d3e45bd377faa407dca277f) * 9043 use Templates for compiled XSLT instead of Transformer - use Templates are thread-safe and NOT Transformer (cherry picked from commit 1160341cb2a2c163c8fddc04ddab46de9041e1b8) * Update to newly released XOAI 3.4.0 (cherry picked from commit 160ebbd791c0545db6516403da40cb191a2c8b99) * add test and fix (cherry picked from commit 48b0b71c6301b6eb46c387c47b71d0729cc2f889) * unset primary bitstream on bitstream service (cherry picked from commit 47ca74bc4220249b95de9b8e71186277c9ac31ca) * adding sql expression to fix deleted primary bitstreams from bundle (cherry picked from commit 8a531ad0c7e8fdf09fa9a3870024687e6708a9a1) * add bundle remove authorization (cherry picked from commit 3255e073fa110a3354f1265853bbf531c677f6ea) * adding missing bundle REMOVE authorization (cherry picked from commit 4a05600194fb9be7e19084f3a9106a0152fd0d80) * add missing head style check (cherry picked from commit caba4bbb96f56c103c4dd8ac9f9fa5863b40e04c) * fix style errors (cherry picked from commit 74605f159af5e53a3e890f578732a858cef12e51) * new testDeleteBitstreamAndUnsetPrimaryBitstreamID test for primary bitstream verification (cherry picked from commit e6d108a94e41e58d6d701f3ef0429fda438e6555) * new testDeleteBitstreamAndUnsetPrimaryBitstreamID test for primary bitstream verification (cherry picked from commit ad0d22a13a35a2167557efeb5ddea7a3a504424d) * new testDeleteBitstreamAndUnsetPrimaryBitstreamID remove unnecessary stubs (cherry picked from commit a3e506c7f452133e3cc973705d671dba61a469d6) * make comments more clear to understand (cherry picked from commit c0bbd9d91f894fbe26f8cf7c4f166da8ba1cefd3) * typo (cherry picked from commit 74cce86afcc163c52502892556679e6175fa1948) * Add basic pagination to /groups/[uuid]/epersons endpoint (cherry picked from commit 74c72354b405ed266b65cdd50b594d25bea0e87f) * Bug fix. Only use pageSize and offset if &gt;0 (cherry picked from commit 15de2d0074b56f421b3bbb9f3955814497985aef) * Add missing pagination test for /groups/[uuid]/epersons (cherry picked from commit 457dd9ae441fa084ff7cc3eaf9213e5497a2b298) * Add pagination to /groups/[uuid]/subgroups endpoint, along with tests (cherry picked from commit e7c4b9eba2d8148e07543c3b6c61dde359018da2) * Add basic unit test for new EpersonService methods (cherry picked from commit c000e54116498030261d988f87a496beef7d21d1) * Minor unit test fix. Use isEqualCollection to compare list with Hibernate results (cherry picked from commit cdb68a6fdc925fcbb76f9265e64771497b3f78bc) * Add countAllMembers() with tests. Update tests to use try/catch (cherry picked from commit 58a15b72975940d48ae450e6b46557b4443f2978) * Replace several usages of allMembers() with count methods to avoid performance issues (cherry picked from commit 2c9165afb08126189ee3367347e7011f89227b7c) * Fix bug in logic for determining whether a workflow group will be left empty. Need to check *both* EPerson and subgroup counts. (cherry picked from commit 9832259aa06d9fe140407ed54c4687989e98f7b2) * Use join instead of subquery as join seems slightly faster. (cherry picked from commit 9c0bf08cf4c3ab7e941ebe1bae66cf2aea720697) * Address feedback. Initialize HashSet sizes to avoid resizing. Correct comment about indeterminante ordering. (cherry picked from commit f011a5a5dbcd2def47dde7830981cf282ca660aa) * Allow users with write permission to view hidden metadata (cherry picked from commit 65a17d4390aeab69c191fb75559646aec9dda512) * Test modification: allow users with write rights to see hidden metadata (cherry picked from commit df7f6e9f4082e5aef3392932f8a87177ac202655) * Add test to check that user with read rights can see hidden metadata (cherry picked from commit 03496c36d4d47138bcd51badf8daca720d4cc484) * Verify optional message is not missing or a literal &quot;null&quot; value (cherry picked from commit 534ee3a699937eedd11aa5cb54f97b081bcda621) * Change the database mode to READ_ONLY during the indexing by discovery consumer (IndexEventConsumer) (cherry picked from commit 94822b50af4098d990d63e27bb3906cfa9c0ec37) * Add functions to do a manual flush of the db session and call flush before change to READ_ONLY mode to be sure we index the current object (cherry picked from commit c33d3fa87d6c29533d379939bd23b29ff3d9b5c9) * Flush database changes after switching to READONLY mode (cherry picked from commit 00a65312ccb52481cd72653b4c5465b7d16c760e) * Add test to check retrieving of policies after changing mode to READ_ONLY (cherry picked from commit d19a9599b5f08a567c93d2e167e219673518fb78) * Change class name to ContextIT and correct a test (cherry picked from commit a5567992bbe456cd33c68f695a2364f507149e7a) * dspace/config: update spider agent list Update list of spider user agents from the COUNTER-Robots project. See: https://github.com/atmire/COUNTER-Robots (cherry picked from commit 7566a79d906b5050bef01d22c5f4b3e4ab6e4b58) * removed options to ping search engines when generating sitemaps (cherry picked from commit f8f88060408c30314cdcf38ba5bbac0f367ee3fd) * XmlWorkflowCuratorServiceImpl: add check to queue task if configured; Curation: remove obsolete code preventing curation running on workflow tasks as #3157 is now implemented * Return both user and operational LDAP attributes Explicitly request both user and operation attributes for LDAP group search as the default searching does not include operational attributes. This is required to fetch the memberOf attribute when checking LDAP group membership. Fixes #9151 (cherry picked from commit 56b7cbf4dbcc4a1ec201518f291c119470cc4e93) * [DURACOM-200] improvement of checker script (cherry picked from commit 5a7c7956cd4e8b47f6a6f53adbc646adeddb0f88) * 108055: isClosed method should use xml configuration (cherry picked from commit d800d800d5346ea9a526ba2a880fc93a6892da98) * [DURACOM-192] Authentication Method related special groups are put in claim set even if a different authentication method is used (cherry picked from commit 6504d749b91508096300e4545069a0554eb5934b) * [DURACOM-192] Added test (cherry picked from commit fa39251071156a6eeb1030000f50761663e128e2) * 107891: Cache administrator group (cherry picked from commit 1e82ca7998c45bd628cd84cefce9ae3f0a0ce046) * DURACOM-199 improved test to show bug related to restricted content (cherry picked from commit dac4df9c1a0b813d2b7578a17c79dd1e9f798a55) * DURACOM-199 fix sitemap generator for restricted content and improve performance (cherry picked from commit 6d9ca388dac3a632530eccbdeda955f7842aae84) * [Port dspace-7_x] Event consumer for submission config reloading when a collection changes (#9196) * initialization with refactoring (cherry picked from commit e93dc1cf4586f684bb441eb0341b4f14393abde5) * also consider SubmissionConfigReaderException (cherry picked from commit 8a04b8775088a82ded154e325a6cb0ce250f1a2e) * rename consumer file (cherry picked from commit f6c92a4c8b25fccc6920646f99e09dd967a2ccf2) * init submission service factory (cherry picked from commit fcc52390b98e3a92927d7a99d9fcf57579a8ed97) * set submissionconfig config settings by default (cherry picked from commit e343d515198950dae7ddb705fee5b34cc7ee0eec) * renaming SubmissionConfigReaderService (cherry picked from commit 9ea7c321c374a0058935efa33e1c2941d6aeb602) * support for SubmissionConfigService (cherry picked from commit 61389fb7876a0757eaac497737aa2cfcd4d4c55a) * fixing style errors and renaming submissionConfigService (cherry picked from commit 5f49491b53c2570fa12bf725a7324e7d7338fc9c) * fixing style errors and unused imports (cherry picked from commit 31d92519508f676659c2efb9e6b9a9089305016d) * set default submission event configs (cherry picked from commit 578198c588f5e7f0da6448f1b4497a041df7fddd) * adding force indexing action to Consumer (cherry picked from commit b91236434f38e8d3510aae816f6e2e871517fb70) * stylecheck fixes (cherry picked from commit 89e89c3d8a7ef8b77a8388cde9905c7fdc1b4bba) * undo event.dispatcher.noindex.consumers (cherry picked from commit ae9dc5f0058f8c7ceb4fb960fc3ca3343fac3763) --------- Co-authored-by: Paulo Graça &lt;paulo1978@gmail.com&gt; * Add isNotMemberOf for groups, including unit and integration tests (cherry picked from commit 9d271b24b9721741a53142a690b86287efb738fe) * Implement searchNonMembers for EPersonService. Add tests to prove it works (and tests for search()). Requires minor bug fix to AbstractHibernateDSODAO to allow for additional OR/AND clauses to be appended. (cherry picked from commit f186dcf4ca17f56478ce27946acdc2c269d8bd50) * Add /epersons/search/isNotMemberOf endpoint to REST API along with integration tests (cherry picked from commit 5208a355d69c86dc7cb3ea372656c6959664fd9a) * Bug fix to EPersonDAOImpl. Correctly determine if excluded group needs to be preceded by AND or WHERE (cherry picked from commit e5e0eaa9999a96f499c131e02877d4280f7b5263) * Updated IIIF Controller IT to text bitstream and bundle exclusions (cherry picked from commit e92b4b7bfdc08efab9aee9b8f07506273ee2bfcb) * Simplified the process of fixing the tests after adding new sidebar facets/search filters and sort options to discover.xml (cherry picked from commit b40ad0dfc23040f335d6c6be0fcd0ae6e68a318f) * 107671: Expose the handle.canonical.prefix to the frontend (cherry picked from commit 6d86e65b720b5108e94b1df85e6038394c183214) * Remove line breaks from default.license because they are being rendered in the frontend (cherry picked from commit 56aae347c2a7012af912a8893142fc04809e7ff3) * [Port dspace-7_x] subscription email: do not send email if nothing has changed (#9204) * improved subscriptions email template (cherry picked from commit 6e7b32795930ea3c0758875c654e95b8602cf9b3) * do not send emails without content (cherry picked from commit 926b2421302587d69318f208b48e334cab57b204) * fixed coding style violations (cherry picked from commit fdacec08df8f930ff7c45745a20297a10eff3ad2) * removed unnecessary isEmpty check as suggested by reviewer (cherry picked from commit 30a837f85403332c31761880a0ed936996ba1b5a) * moved null check on indexableObjects in generateBodyMail (cherry picked from commit b43c340b182a62ddc51e3fd7e294101f6d355e90) * fixed unhandled IOException (cherry picked from commit 9b3f7b698c3efbff165fb727ac91609dbe569218) * fixed typo in bodyCommunities (cherry picked from commit ac3d02eb1ce83f9e1fee55f69f1c0fd2c0e03332) * do not use != to compare strings (cherry picked from commit e46018333508215fce7225b75a5af50d4d7beb59) * fixed improper handling of empty list (cherry picked from commit ac72aae44b5ce49ec1a8ddfa2b7986d0d580a8ac) --------- Co-authored-by: Sascha Szott &lt;szott@gmx.de&gt; * [maven-release-plugin] prepare release dspace-7.6.1 * Fixed checkstyle issues * Fixed compilation errors * Removed redundant service definitions in the `core-factory-services.xml` because unit tests was failing * Removed redundant bean in the `discovery.xml` * Removed redundant `latestVersion` from `schema.xml` * Fixed wrong resolved conflicts - the app cannot start running * Used ClarinVersionedHandleIdentifierProvider instead of Vanilla one in the `identifier-service.xml` * Fixed tests - the user has an authorization to remove bundle * Fixed failing test in the `MetadataExportSearchIT` it was trying to test dateIssued filter, but the CLARIN DSpace doesn't use that. * controlled.authority.dc.relation is changed in the configuration by CLARIN so the test VersioningWithRelationshipsIT is failing because of that. * Fixed wrong license validation class * Removed test which was accidentaly added durign resolving conflicts * The ACL tag restricted loading of some input field which was missing in the assert * The test cannot convert `Oct` from the xml to normal number because of Slovak default locale which doesn't know what `Oct` means in the date. I set up EN locale for the current test * Added clarin set up of search Facets into integration tests - because src/test/java/org/dspace/app/rest/DiscoveryScopeBasedRestControllerIT.java was failing * Added method `areSpecialGroupsApplicable` into ClarinShibAuthentication because after shib authentication the user wasn't assinged into special group because of some dspace new feature * Change DEFAULT_AMOUNT_FORMATS in the BitstreamFormatRestRepositoryIT.java because vanila has added a new format. * Ignored still failing RegistrationRestRepositoryIT test - it is ignored also in the 7.5 version * fix: Failure of org.dspace.app.rest.SitemapRestControllerIT when running locally * Ignore pubmedImportMetadataGetRecordsTest or allow ssl * Let the pubmedImportMetadataGetRecordsTests ignored * Fixed CurationIT - it failed on the Stream because Stream has null param. Null param was because of null handle on the Site object - the site handle was removed in the `ClarinHandleImportControllerIT.java#createHandleWithoutDSpaceObjectTest`. * Do not delete site handle in the HandleRestRepositoryIT * Updated scripts for fast building 7.6.1 * Moved flyway script for updating checksum_results into separate file * Added missing headers --------- Signed-off-by: dependabot[bot] &lt;support@github.com&gt; Co-authored-by: Tim Donohue &lt;tim.donohue@lyrasis.org&gt; Co-authored-by: Sean Kalynuk &lt;Sean.Kalynuk@umanitoba.ca&gt; Co-authored-by: Sascha Szott &lt;szott@gmx.de&gt; Co-authored-by: dependabot[bot] &lt;49699333+dependabot[bot]@users.noreply.github.com&gt; Co-authored-by: Agustina Martinez &lt;am857@cam.ac.uk&gt; Co-authored-by: Alan Orth &lt;alan.orth@gmail.com&gt; Co-authored-by: Martin Walk &lt;martin.walk@tu-berlin.de&gt; Co-authored-by: corrado lombardi &lt;corrado.lombardi@4science.com&gt; Co-authored-by: David P. Steelman &lt;dsteelma@umd.edu&gt; Co-authored-by: Christian Bethge &lt;54576195+ChrisBethgster@users.noreply.github.com&gt; Co-authored-by: max.nuding &lt;max.nuding@uni-konstanz.de&gt; Co-authored-by: Max Nuding &lt;max.nuding@icloud.com&gt; Co-authored-by: Mark H. Wood &lt;mwood@iu.edu&gt; Co-authored-by: Nona Luypaert &lt;nona.luypaert@atmire.com&gt; Co-authored-by: Christian Clauss &lt;cclauss@me.com&gt; Co-authored-by: Hrafn Malmquist &lt;hrafn.malmquist@gmail.com&gt; Co-authored-by: aroman-arvo &lt;aroman@arvo.es&gt; Co-authored-by: Christian Bethge &lt;christian.bethge@bibliothek.uni-halle.de&gt; Co-authored-by: Koen Pauwels &lt;koen.pauwels@atmire.com&gt; Co-authored-by: Mark Cooper &lt;mark.c.cooper@outlook.com&gt; Co-authored-by: nwoodward &lt;woodward.nicholas@gmail.com&gt; Co-authored-by: Kim Shepherd &lt;kim@shepherd.nz&gt; Co-authored-by: Marie-Hélène Vézina &lt;mhvezina@users.noreply.github.com&gt; Co-authored-by: damian &lt;damian.jozefowski@pcgacademia.pl&gt; Co-authored-by: Gantner, Florian Klaus &lt;florian.gantner@uni-bamberg.de&gt; Co-authored-by: wwuck &lt;wirelessduck@gmail.com&gt; Co-authored-by: Paulo Graça &lt;paulo1978@gmail.com&gt; Co-authored-by: Toni Prieto &lt;antonio.juan.prieto@upc.edu&gt; Co-authored-by: mohamed eskander &lt;mohamed.eskander@4science.com&gt; Co-authored-by: Jens Vannerum &lt;jens.vannerum@atmire.com&gt; Co-authored-by: Luca Giamminonni &lt;luca.giamminonni@4science.it&gt; Co-authored-by: Andrea Bollini &lt;andrea.bollini@4science.it&gt; Co-authored-by: DSpace Bot &lt;68393067+dspace-bot@users.noreply.github.com&gt; Co-authored-by: Michael Spalti &lt;mspalti@gmail.com&gt; Co-authored-by: Alexandre Vryghem &lt;alexandre@atmire.com&gt; Co-authored-by: Shankeerthan Kasilingam &lt;shankeerthan1995@gmail.com&gt;</MESSAGE>
      <SHA>88d76fd22d3722f8b68e4f6e21274eee7e64b01b</SHA>
      <PATCHEDFILES>
        <FILE>.codecov.yml</FILE>
        <FILE>.dockerignore</FILE>
        <FILE>.github/disabled-workflows/issue_opened.yml</FILE>
        <FILE>.github/disabled-workflows/pull_request_opened.yml</FILE>
        <FILE>.github/workflows/build.yml</FILE>
        <FILE>.github/workflows/docker.yml</FILE>
        <FILE>.github/workflows/label_merge_conflicts.yml</FILE>
        <FILE>.github/workflows/port_merged_pull_request.yml</FILE>
        <FILE>.github/workflows/pull_request_opened.yml</FILE>
        <FILE>Dockerfile</FILE>
        <FILE>Dockerfile.cli</FILE>
        <FILE>LICENSES_THIRD_PARTY</FILE>
        <FILE>docker-compose.yml</FILE>
        <FILE>dspace-api/pom.xml</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/access/status/AccessStatusHelper.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/access/status/AccessStatusServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/access/status/DefaultAccessStatusHelper.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/access/status/service/AccessStatusService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/administer/CreateAdministrator.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/administer/ProcessCleanerConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/BulkAccessControl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/BulkAccessControlCli.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/BulkAccessControlCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/BulkAccessControlScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/exception/BulkAccessControlException.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/model/AccessCondition.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/model/AccessConditionBitstream.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/model/AccessConditionItem.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/model/BulkAccessConditionConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/model/BulkAccessControlInput.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkaccesscontrol/service/BulkAccessConditionConfigurationService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataDeletionScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataExportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataExportSearchScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataImport.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/bulkedit/MetadataImportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/harvest/HarvestScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemexport/ItemExportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImport.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportCLI.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportCLIScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/itemimport/ItemImportServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/launcher/ScriptLauncher.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/ImageMagickPdfThumbnailFilter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/ImageMagickThumbnailFilter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/ImageMagickVideoThumbnailFilter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/mediafilter/service/MediaFilterService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/requestitem/RequestItemEmailNotifier.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/requestitem/package-info.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/sitemap/GenerateSitemaps.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/solrdatabaseresync/SolrDatabaseResyncCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/DCInputSet.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/DCInputsReader.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/SubmissionConfigReader.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/SubmissionStepConfig.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/app/util/SyndicationFeed.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/AuthenticationMethod.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/AuthenticationServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/IPAuthentication.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/LDAPAuthentication.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authenticate/clarin/ClarinShibAuthentication.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/AuthorizeServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/ResourcePolicy.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/ResourcePolicyServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/dao/ResourcePolicyDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/dao/impl/ResourcePolicyDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/package-info.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/package.html</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/service/AuthorizeService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/authorize/service/ResourcePolicyService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/browse/BrowseIndex.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/browse/CrossLinks.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/browse/ItemCounter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/browse/SolrBrowseDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/cli/DSpaceSkipUnknownArgumentsParser.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/BitstreamServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Bundle.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/BundleServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Collection.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/CollectionServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/Community.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/CommunityServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DSpaceObject.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/DSpaceObjectServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/InstallItemServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/ItemServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataSchemaEnum.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataValue.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/MetadataValueComparators.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/RelationshipMetadataServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/authority/ChoiceAuthorityServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/authority/DSpaceControlledVocabularyIndex.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/authority/SolrAuthority.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/authority/service/ChoiceAuthorityService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/dao/ProcessDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/dao/impl/BitstreamDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/dao/impl/ProcessDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/CollectionService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/CommunityService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/InstallItemService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/content/service/ItemService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/AbstractHibernateDSODAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Context.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/DBConnection.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Email.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/HibernateDBConnection.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/LicenseServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/core/Utils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/ctask/general/MetadataWebService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/Curation.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/CurationScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/XmlWorkflowCuratorServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/curate/service/XmlWorkflowCuratorService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/FullTextContentStreams.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/IndexClient.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/IndexDiscoveryScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/IndexEventConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/IndexingUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/SearchUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/SolrServiceFileInfoPlugin.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/SolrServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/configuration/DiscoveryConfigurationService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/configuration/DiscoverySortConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/CollectionIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/CommunityIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/InprogressSubmissionIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/ItemIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/indexobject/MetadataFieldIndexFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/discovery/utils/DiscoverQueryBuilder.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPerson.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/EPersonServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/Groomer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/Group.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/GroupServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/EPersonDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/GroupDAO.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/impl/EPersonDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/dao/impl/GroupDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/service/EPersonService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/eperson/service/GroupService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/event/Consumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/event/package-info.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/external/provider/orcid/xml/Converter.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/google/GoogleAsyncEventListener.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/handle/HandleServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/handle/dao/impl/HandleDAOImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/HandleIdentifierProvider.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/VersionedDOIIdentifierProvider.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/VersionedHandleIdentifierProvider.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/VersionedHandleIdentifierProviderWithCanonicalHandles.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/identifier/doi/DOIConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/cinii/CiniiImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/crossref/CrossRefDateMetadataProcessor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/epo/service/EpoImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/liveimportclient/service/LiveImportClientImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/pubmed/metadatamapping/contributor/PubmedDateMetadatumContributor.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/pubmed/service/PubmedImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/pubmedeurope/PubmedEuropeMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/scopus/service/ScopusImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/service/components/AbstractRemoteMetadataSource.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/importer/external/wos/service/WOSImportMetadataSourceServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/OrcidHistory.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/OrcidQueue.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/orcid/script/OrcidBulkPushScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/DSpaceRunnable.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/Process.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/ProcessServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/ScriptServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/configuration/ScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/scripts/service/ProcessService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/GeoIpService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/SolrLoggerServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/SolrLoggerUsageEventListener.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/export/RetryFailedOpenUrlTrackerScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/service/SolrLoggerService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/statistics/util/StatisticsClient.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/bitstore/S3BitStoreService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/DatabaseUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/migration/MigrationUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/migration/V1_3_9__Drop_constraint_for_DSpace_1_4_schema.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/migration/V1_5_9__Drop_constraint_for_DSpace_1_6_schema.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/migration/V5_0_2014_09_25__DS_1582_Metadata_For_All_Objects_drop_constraint.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/xmlworkflow/V5_0_2014_11_04__Enable_XMLWorkflow_Migration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/storage/rdbms/xmlworkflow/V6_0_2015_09_01__DS_2701_Enable_XMLWorkflow_Migration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/consumer/SubmissionConfigConsumer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/factory/SubmissionServiceFactory.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/factory/SubmissionServiceFactoryImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/migration/SubmissionFormsMigrationCliScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/migration/SubmissionFormsMigrationScriptConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/model/AccessConditionOption.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/service/SubmissionConfigService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/submit/service/SubmissionConfigServiceImpl.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/subscriptions/ContentGenerator.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/subscriptions/SubscriptionEmailNotificationConfiguration.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/usage/UsageEvent.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/DateMathParser.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/FrontendUrlService.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/MultiFormatDateDeserializer.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/SolrUpgradePre6xStatistics.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/SolrUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/ThrowableUtils.java</FILE>
        <FILE>dspace-api/src/main/java/org/dspace/util/TimeHelpers.java</FILE>
        <FILE>dspace-api/src/main/resources/Messages.properties</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/license/CreativeCommons.xsl</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/license/LicenseCleanup.xsl</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/flywayupgrade/oracle/upgradeToFlyway4x.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/flywayupgrade/postgres/upgradeToFlyway4x.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/README.md</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2023.03.17__Remove_unused_sequence.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2023.03.24__Update_PNG_in_bitstream_format_registry.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2023.03.29__orcid_queue_and_history_descriptions_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/h2/V7.6_2024.01.25__insert_checksum_result.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/metadata/oracle/V7.0_2020.10.31__CollectionCommunity_Metadata_Handle.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/README.md</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.2__Initial_DSpace_1.2_Oracle_database_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.3__Upgrade_to_DSpace_1.3_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.4.2__Upgrade_to_DSpace_1.4.2_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.4__Upgrade_to_DSpace_1.4_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.5__Upgrade_to_DSpace_1.5_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.6__Upgrade_to_DSpace_1.6_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.7__Upgrade_to_DSpace_1.7_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V1.8__Upgrade_to_DSpace_1.8_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V3.0__Upgrade_to_DSpace_3.x_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V4.0__Upgrade_to_DSpace_4.x_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V4.9_2015.10.26__DS-2818_registry_update.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V5.0_2014.08.08__DS-1945_Helpdesk_Request_a_Copy.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V5.0_2014.09.26__DS-1582_Metadata_For_All_Objects.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V5.6_2016.08.23__DS-3097.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V5.7_2017.04.11__DS-3563_Index_metadatavalue_resource_type_id_column.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2015.03.07__DS-2701_Hibernate_migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2015_03_06_01__DS_3378_lost_oracle_indexes.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.01.03__DS-3024.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.02.25__DS-3004-slow-searching-as-admin.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.04.01__DS-1955_Increase_embargo_reason.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.04.04__DS-3086-OAI-Performance-fix.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.04.14__DS-3125-fix-bundle-bitstream-delete-rights.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.05.10__DS-3168-fix-requestitem_item_id_column.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.07.21__DS-2775.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.07.26__DS-3277_fix_handle_assignment.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.08.23__DS-3097.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.11.29__DS-3410-lost-indexes.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V6.0_2016.11.30__DS-3409.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2017.10.12__DS-3542-stateless-sessions.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2018.04.16__dspace-entities.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2018.06.07__DS-3851-permission.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2019.05.02__DS-4239-workflow-xml-migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2019.07.31__Retrieval_of_name_variant.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2019_06_14__scripts-and-process.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2020.01.08__DS-626-statistics-tracker.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2021.03.18__Move_entity_type_to_dspace_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.0_2021.09.24__Move_entity_type_from_item_template_to_collection.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/V7.1_2021.10.18__Fix_MDV_place_after_migrating_from_DSpace_5.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/oracle/update-sequences.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/README.md</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.2_2022.07.28__Upgrade_to_Lindat_Clarin_schema.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.03.17__Remove_unused_sequence.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.03.24__Update_PNG_in_bitstream_format_registry.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.03.29__orcid_queue_and_history_descriptions_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.04.19__process_parameters_to_text_type.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2023.10.12__Fix-deleted-primary-bitstreams.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/V7.6_2024.01.25__insert_checksum_result.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/postgres/update-sequences.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/workflow/oracle/basicWorkflow/V5.7_2017.05.05__DS-3431.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/workflow/oracle/basicWorkflow/V6.0_2015.08.11__DS-2701_Basic_Workflow_Migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/workflow/oracle/basicWorkflow/V6.1_2017.01.03__DS-3431.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/workflow/oracle/xmlworkflow/V6.0_2015.08.11__DS-2701_Xml_Workflow_Migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/sqlmigration/workflow/oracle/xmlworkflow/V7.0_2018.04.03__upgrade_workflow_policy.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/xmlworkflow/oracle/data_workflow_migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/xmlworkflow/oracle/v6.0__DS-2701_data_workflow_migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/xmlworkflow/oracle/v6.0__DS-2701_xml_workflow_migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/org/dspace/storage/rdbms/xmlworkflow/oracle/xml_workflow_migration.sql</FILE>
        <FILE>dspace-api/src/main/resources/spring/spring-dspace-addon-import-services.xml</FILE>
        <FILE>dspace-api/src/main/resources/spring/spring-dspace-addon-requestitem-services.xml</FILE>
        <FILE>dspace-api/src/main/resources/spring/spring-dspace-core-services.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/item-submission.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/local.cfg</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/spring/api/access-conditions.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/spring/api/identifier-service.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/spring/api/iiif-processing.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/spring/api/scripts.xml</FILE>
        <FILE>dspace-api/src/test/data/dspaceFolder/config/submission-forms.xml</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/access/status/DefaultAccessStatusHelperTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkaccesscontrol/BulkAccessControlIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataExportIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataExportSearchIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/csv/CSVMetadataImportReferenceIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/itemimport/ItemImportCLIIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/matcher/ResourcePolicyMatcher.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/requestitem/JavaMailTestTransport.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/requestitem/RequestItemEmailNotifierTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/app/util/SubmissionConfigTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/authorize/RegexPasswordValidatorIT.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/browse/CrossLinksTest.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/builder/AbstractBuilder.java</FILE>
        <FILE>dspace-api/src/test/java/org/dspace/builder/AbstractDSpaceObjectBuilder.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
