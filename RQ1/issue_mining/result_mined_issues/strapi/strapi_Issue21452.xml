<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>21452</ISSUENO>
  <ISSUEURL>https://github.com/strapi/strapi/issues/21452</ISSUEURL>
  <TITLE>url parameter in config/server.ts not working</TITLE>
  <DESCRIPTION>## Bug report ### Required System information &lt;!-- Please ensure you are using the Node LTS version (v18 or v20) --&gt; &lt;!-- Strapi v3 is no longer supported, please update to Strapi v4 --&gt; &lt;!-- If you are reporting a frontend bug please provide error logs after setting STRAPI_ENFORCE_SOURCEMAPS=true in your .env --&gt; &lt;!-- This environment variable makes frontend errors easier to read and trace --&gt; - Node.js version: v20.11.0 - NPM version: yarn 1.22.2 npm 10.2.4 - Strapi version: 5.0.0 - Database: postgres - Operating system: MacOS Sonoma 14.5 - Is your project Javascript or Typescript: Typescript &lt;!-- Did you know you can run `yarn strapi report` or `npm run strapi report` to get this information easier? --&gt; ### Describe the bug After building for production, the frontend has incorrect urls for script files ### Steps to reproduce the behavior 1. Go to set a custom url with a subpath (e.g. https:/example.com/api)in config/server.ts 2. Build and deploy the project 3. See error - the admin panel does not load, paths to scripts in the generated index.html file does not start with /api &lt;img width=&quot;414&quot; alt=&quot;Screenshot 2024-08-20 at 12 40 20&quot; src=&quot;https://github.com/user-attachments/assets/710ca975-13a6-4d98-b606-3a7346896a25&quot;&gt; ff5&quot;&gt; ### Expected behavior The admin login view should show up ### Screenshots &lt;img width=&quot;414&quot; alt=&quot;Screenshot 2024-08-20 at 12 40 20&quot; src=&quot;https://github.com/user-attachments/assets/710ca975-13a6-4d98-b606-3a7346896a25&quot;&gt; ff5&quot;&gt; ### Code snippets config/server.ts &lt;img width=&quot;513&quot; alt=&quot;Screenshot 2024-09-24 at 23 05 05&quot; src=&quot;https://github.com/user-attachments/assets/28b87f9a-453e-4b0d-9604-2bbd128c5d64&quot;&gt; ### Additional context probably something to do with Vite's config the error: &lt;img width=&quot;1470&quot; alt=&quot;1&quot; src=&quot;https://github.com/user-attachments/assets/75a1c04a-0a9d-4228-9520-9a1d2c61da3d&quot;&gt; &lt;img width=&quot;402&quot; alt=&quot;2&quot; src=&quot;https://github.com/user-attachments/assets/0b91be7a-3851-46b3-acfb-e960d868d64c&quot;&gt; the path should be /api/admin instead of /admin</DESCRIPTION>
  <REPONAME>strapi</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>test(api): enable relations tests (#21498)</MESSAGE>
    <SHA>64bd4f3d1efcc9420d27c4f4d2013677ded62360</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#21452 fix url configuration</MESSAGE>
      <SHA>cf046af12ac07622a884d172304b71a376a42767</SHA>
      <PATCHEDFILES>
        <FILE>packages/core/core/src/configuration/index.ts</FILE>
        <FILE>packages/core/core/src/configuration/urls.ts</FILE>
        <FILE>packages/core/core/src/services/server/admin-api.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
