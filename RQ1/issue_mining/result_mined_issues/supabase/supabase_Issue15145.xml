<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15145</ISSUENO>
  <ISSUEURL>https://github.com/supabase/supabase/issues/15145</ISSUEURL>
  <TITLE>Hydration errors in NextJS User Auth guide</TITLE>
  <DESCRIPTION># Improve documentation ## Link https://supabase.com/docs/guides/getting-started/tutorials/with-nextjs ([Here's a link to the markdown file to edit](https://github.com/supabase/supabase/blob/114fd72c13c5b1c18f11a5bad71cea25e33ccff7/apps/docs/pages/guides/getting-started/tutorials/with-nextjs.mdx?plain=1#L4) for your convenience) ## Describe the problem Following the tutorial exactly results in hydration errors where `supabase/auth-helpers-nextjs` is used on the client. This may actually require an improvement in that particular library, but there is a pretty easy workaround in the meanwhile. You also get an error in your terminal if you don't run `npm install encoding` (again, might have to do with a different library that needs improvement, but it's a simple fix). ## Describe the improvement Add something about running `npm install encoding`. In `app/auth-form.tsx`: ```typescript import { useState, useEffect } from 'react'; export default function AuthForm() { const supabase = createClientComponentClient&lt;Database&gt;() const [isMounted, setIsMounted] = useState(false); useEffect(() =&gt; { setIsMounted(true); }, []); if (!isMounted) { return null; } // ... } ``` And then follow the same pattern for `app/account/account-form.tsx`. ## Additional context Screenshots of the issues after following the tutorial in a fresh project where I'm using the latest version of NextJS (13.4.6) &lt;img width=&quot;1438&quot; alt=&quot;Auth form error&quot; src=&quot;https://github.com/supabase/supabase/assets/11688080/816f6458-0cbf-4056-9cd7-c6c54f5611e2&quot;&gt; &lt;img width=&quot;1438&quot; alt=&quot;Account form error&quot; src=&quot;https://github.com/supabase/supabase/assets/11688080/0ea5a696-4bd7-4de5-b5f9-899bcc22b0ce&quot;&gt; ![encoding dependency error](https://github.com/supabase/supabase/assets/11688080/f10f4c12-2e0a-41a1-a813-356803995e87)</DESCRIPTION>
  <REPONAME>supabase</REPONAME>
  <TIMEDIFFERENCEDAYS>69</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #15175 from supabase/fix/account-level-billing-stripe chore: pass org slug to invoice endpoints</MESSAGE>
    <SHA>e5cea698025019e0adeb73cd83b04df4b5b0fd12</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>docs: fix errors in nextjs user auth guide - Added a temporary workaround for a console error about the encoding module not being found (this is due to cross-env using node-fetch v2 instead of v3) - Updated the code snippets for the auth-form and account-form to prevent hydration errors Refs #15145</MESSAGE>
      <SHA>dea2f40269ea959bbb0956a06939b1d04cf654ba</SHA>
      <PATCHEDFILES>
        <FILE>apps/docs/pages/guides/getting-started/tutorials/with-nextjs.mdx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
