<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>16006</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/16006</ISSUEURL>
  <TITLE>Configure EnableThreadSafetyChecks for functional tests too</TITLE>
  <DESCRIPTION>### Is your feature request related to a problem? Please describe. The new YesSql option, `EnableThreadSafetyChecks`, is [enabled for some integrations tests](https://github.com/OrchardCMS/OrchardCore/blob/5a45ac58fc5aa24dfca1a1cf0e14b45690be158e/test/OrchardCore.Tests/Apis/Context/SiteStartup.cs#L33). This is good, because it'll make issues like https://github.com/OrchardCMS/OrchardCore/issues/15794 and https://github.com/OrchardCMS/OrchardCore/issues/15628 more apparent by directly failing the tests. However, this is also needed for functional tests for the same reason. ### Describe the solution you'd like Most possibly, we need to pass a parameter to the web app when running it [here](https://github.com/OrchardCMS/OrchardCore/blob/5a45ac58fc5aa24dfca1a1cf0e14b45690be158e/test/OrchardCore.Tests.Functional/cypress-commands/src/test-runner.js#L35), and bind it to `EnableThreadSafetyChecks` out of the box. Then, we also need to update the default appsettings.json with an example (but it should still be off by default). ### Describe alternatives you've considered I thought about not binding the config by default, but then we'd need to do some testing-specific change in the codebase still.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update ContentItemVersionId nullable in GraphQL (#16030)</MESSAGE>
    <SHA>768459c5a25ac05aa2f0304353892b4ff434444c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Make YesSqlOptions configurable from configuration provider Fix #16006</MESSAGE>
      <SHA>0f7018902051b3c9f0e240268622f1e2ef409376</SHA>
      <PATCHEDFILES>
        <FILE>.github/workflows/mac_unit_test_ci.yml</FILE>
        <FILE>.github/workflows/main_ci.yml</FILE>
        <FILE>.github/workflows/pr_ci.yml</FILE>
        <FILE>.github/workflows/preview_ci.yml</FILE>
        <FILE>.github/workflows/release_ci.yml</FILE>
        <FILE>src/OrchardCore.Cms.Web/appsettings.json</FILE>
        <FILE>src/OrchardCore/OrchardCore.Data.YesSql/OrchardCoreBuilderExtensions.cs</FILE>
        <FILE>src/docs/reference/core/Data/README.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
