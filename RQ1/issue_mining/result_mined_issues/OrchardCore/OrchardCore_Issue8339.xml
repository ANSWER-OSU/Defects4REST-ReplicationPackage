<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8339</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/8339</ISSUEURL>
  <TITLE>Error executing setup twice</TITLE>
  <DESCRIPTION>Hi I've just cloned the core from here: https://github.com/OrchardCMS/OrchardCore.git. I then built it and configured a default super user login (for some reason password is restricted to just 6 chars). After logging in as super, I then navigated to design/themes and made any of agency/blog/commingsoon themes the current site theme and then clicked the view site icon top right, and the following error occurs re: IOC when hitting https://localhost:44300/. I can still hit the admin theme https://localhost:44300/Admin/Themes without exception. ``` InvalidOperationException: No service for type 'OrchardCore.Liquid.ILiquidTemplateManager' has been registered. Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType) Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService&lt;T&gt;(IServiceProvider provider) OrchardCore.DisplayManagement.Shapes.PageTitleShapes.PageTitle() in PageTitleShapes.cs + var liquidTemplateManager = ShellScope.Services.GetRequiredService&lt;ILiquidTemplateManager&gt;(); OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.&lt;ProcessAsync&gt;g__Awaited|12_0(Task&lt;IHtmlContent&gt; task) in DefaultHtmlDisplay.cs + return CoerceHtmlString(await task); System.Threading.Tasks.ValueTask&lt;TResult&gt;.get_Result() OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.ExecuteAsync(DisplayContext context) in DefaultHtmlDisplay.cs + shape.Metadata.ChildContent = await ProcessAsync(actualBinding, shape, localContext); OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.ExecuteAsync(DisplayContext context) in DefaultHtmlDisplay.cs + } OrchardCore.DisplayManagement.Liquid.Filters.LiquidViewFilters.&lt;ShapeStringify&gt;g__Awaited|10_0(Task&lt;IHtmlContent&gt; task) in LiquidViewFilters.cs + return new HtmlContentValue(await task); Fluid.Ast.FilterExpression.EvaluateAsync(TemplateContext context) System.Threading.Tasks.ValueTask&lt;TResult&gt;.get_Result() Fluid.Ast.OutputStatement.&lt;WriteToAsync&gt;g__Awaited|7_0(ValueTask&lt;FluidValue&gt; t, TextWriter w, TextEncoder enc, TemplateContext ctx) Fluid.BaseFluidTemplate&lt;T&gt;.Awaited(ValueTask&lt;Completion&gt; task, TextWriter writer, TextEncoder encoder, TemplateContext context, List&lt;Statement&gt; statements, int startIndex) OrchardCore.DisplayManagement.Liquid.LiquidViewTemplate.RenderAsync(RazorPage&lt;object&gt; page) in LiquidViewTemplate.cs + await template.RenderAsync(page.Output, htmlEncoder, context); Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context) Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, bool invokeViewStarts) Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context) Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.RenderPartialCoreAsync(string partialViewName, object model, ViewDataDictionary viewData, TextWriter writer) Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.PartialAsync(string partialViewName, object model, ViewDataDictionary viewData) OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.&lt;ProcessAsync&gt;g__Awaited|12_0(Task&lt;IHtmlContent&gt; task) in DefaultHtmlDisplay.cs + return CoerceHtmlString(await task); System.Threading.Tasks.ValueTask&lt;TResult&gt;.get_Result() OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.ExecuteAsync(DisplayContext context) in DefaultHtmlDisplay.cs + shape.Metadata.ChildContent = await ProcessAsync(actualBinding, shape, localContext); OrchardCore.DisplayManagement.Implementation.DefaultHtmlDisplay.ExecuteAsync(DisplayContext context) in DefaultHtmlDisplay.cs + } CallSite.Target(Closure , CallSite , object ) OrchardCore.DisplayManagement.Theming.ThemeLayout.ExecuteAsync() in ThemeLayout.cs + Write(await DisplayAsync(ThemeLayout)); Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context) Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, bool invokeViewStarts) Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter) Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context) Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, string contentType, Nullable&lt;int&gt; statusCode) Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, string contentType, Nullable&lt;int&gt; statusCode) Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, string contentType, Nullable&lt;int&gt; statusCode) Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result) Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.&lt;InvokeNextResultFilterAsync&gt;g__Awaited|29_0&lt;TFilter, TFilterAsync&gt;(ResourceInvoker invoker, Task lastTask, State next, Scope scope, object state, bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext&lt;TFilter, TFilterAsync&gt;(ref State next, ref Scope scope, ref object state, ref bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.&lt;InvokeResultFilters&gt;g__Awaited|27_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, object state, bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.&lt;InvokeNextResourceFilter&gt;g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, object state, bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(ref State next, ref Scope scope, ref object state, ref bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.&lt;InvokeFilterPipelineAsync&gt;g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, object state, bool isCompleted) Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.&lt;InvokeAsync&gt;g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope) Microsoft.AspNetCore.Routing.EndpointMiddleware.&lt;Invoke&gt;g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger) Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context) Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context) Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context) OrchardCore.Diagnostics.DiagnosticsStartupFilter+&lt;&gt;c__DisplayClass3_0+&lt;&lt;Configure&gt;b__1&gt;d.MoveNext() in DiagnosticsStartupFilter.cs + await next(); Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context) OrchardCore.Modules.ModularTenantRouterMiddleware.Invoke(HttpContext httpContext) in ModularTenantRouterMiddleware.cs + await shellContext.Pipeline.Invoke(httpContext); OrchardCore.Environment.Shell.Scope.ShellScope.UsingAsync(Func&lt;ShellScope, Task&gt; execute, bool activateShell) in ShellScope.cs + await execute(this); OrchardCore.Modules.ModularTenantContainerMiddleware.Invoke(HttpContext httpContext) in ModularTenantContainerMiddleware.cs + await shellScope.UsingAsync(scope =&gt; _next.Invoke(httpContext)); Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context) ```</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Remove duplicate registration for user picker field index (#8406)</MESSAGE>
    <SHA>7e8a75360b15dcfab772a7972c90ea37d2d69e33</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Do not display Setup recipes in admin Fixes #8339</MESSAGE>
      <SHA>5bcdcf02bd1326bbe13d5f3e27061c7596cf787b</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Recipes/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Recipes/Views/Admin/Index.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Do not display Setup recipes in admin (#8417) Fixes #8339</MESSAGE>
      <SHA>6cd923732fdfab3c112498cc3e45357636bcd752</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Recipes/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore.Modules/OrchardCore.Recipes/Views/Admin/Index.cshtml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
