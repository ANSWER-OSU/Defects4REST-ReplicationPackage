<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9039</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/9039</ISSUEURL>
  <TITLE>Specified argument was out of the range of valid values. (Parameter 'index')</TITLE>
  <DESCRIPTION>i saw some ticket about this issue , but i don't know if main same or not. After update to new version, i get this error in showing blog and my module views too. ``` An unhandled exception occurred while processing the request. ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'index') Microsoft.AspNetCore.Mvc.ViewFeatures.Buffers.ViewBufferTextWriter.Write(char[] buffer, int index, int count) ``` repo: it works with: 1- create new blog 2- add new blog post 3-create new .liquid them page &quot;Content-Blog.liquid&quot; ``` &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; {{ Model.Content | shape_render }} &lt;/div&gt; &lt;/div&gt; ``` it works fine with new blog and post but old blog doesn't work. It looks it has issue in &quot;{{ Model.Content | shape_render }}&quot;. If i remove this line, It shows my page.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Prevent razor compilation in production (#9047)</MESSAGE>
    <SHA>d0064094286b91fec5741a8bda0541eb3113a3d9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixes #9039 view buffer OutOfRangeException</MESSAGE>
      <SHA>3e34fe62cb3bece10a070a2863b64cae3221bdb4</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement.Liquid/Filters/ShapeStringifyFilter.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement.Liquid/LiquidViewTemplate.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement.Liquid/Tags/AntiForgeryTokenTag.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.DisplayManagement.Liquid/ViewBufferTextWriterContent.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
