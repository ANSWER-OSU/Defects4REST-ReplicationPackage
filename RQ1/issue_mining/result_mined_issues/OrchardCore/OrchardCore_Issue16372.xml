<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>16372</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/16372</ISSUEURL>
  <TITLE>Error when disabling Lucine or elastic search feature</TITLE>
  <DESCRIPTION>On the latest main branch ,while testing and evaluating elastic search and storing some queries I decided to disable Elasticsearch. But given that the queries documents contained existing elastic queries the following error occurs: The same happens if you disable Lucene feature and you have existing Lucene queries in the queries document. ![image](https://github.com/OrchardCMS/OrchardCore/assets/1516981/0b77cfae-79b3-481b-8dd0-63ffa3e024e3)</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>23</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Adds more features back that were lost due to the removal of Newtonsoft (#16292) --------- Co-authored-by: SÃ©bastien Ros &lt;sebastienros@gmail.com&gt; Co-authored-by: Mike Alhayek &lt;mike@crestapps.com&gt; Co-authored-by: Hisham Bin Ateya &lt;hishamco_2007@yahoo.com&gt;</MESSAGE>
    <SHA>51eb7b8f2481de0b05592b79cc4feb1c390cc0be</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add QueryJsonConverter Fix #16372</MESSAGE>
      <SHA>6b33462eb34f58802599f6912707e6e9954caf3d</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Queries/Startup.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Queries.Abstractions/Query.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Queries.Abstractions/QueryJsonConverter.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix Queries UI Fixes #16372</MESSAGE>
      <SHA>4b943e43d0dc81d9419774dbf64677bc695c9595</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore.Modules/OrchardCore.Queries/Controllers/AdminController.cs</FILE>
        <FILE>src/OrchardCore/OrchardCore.Queries.Abstractions/Query.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
