<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>16561</ISSUENO>
  <ISSUEURL>https://github.com/OrchardCMS/OrchardCore/issues/16561</ISSUEURL>
  <TITLE>Insufficient level of logging in ElasticSearch IndexingBackgroundTask</TITLE>
  <DESCRIPTION>### Describe the bug I have an instance of OrchardCore with enabled ElasticSearch indexing and IndexingBackgroundTask. Several times per day I see in logs following error ``` &quot;message&quot;:&quot;Error while processing background task '\&quot;OrchardCore.Search.Elasticsearch.Core.Services.IndexingBackgroundTask\&quot;' on tenant '\&quot;Default\&quot;'.&quot;, &quot;exception&quot;:&quot;System.InvalidOperationException: Operation is not valid due to the current state of the object. at OrchardCore.Search.Elasticsearch.Core.Services.ElasticIndexManager.GetLastTaskId(String indexName) at OrchardCore.Search.Elasticsearch.Core.Services.ElasticIndexingService.ProcessContentItemsAsync(String indexName) at OrchardCore.Modules.ModularBackgroundService.&lt;&gt;c__DisplayClass11_2.&lt;&lt;RunAsync&gt;b__1&gt;d.MoveNext()&quot;, &quot;task_name&quot;:&quot;OrchardCore.Search.Elasticsearch.Core.Services.IndexingBackgroundTask&quot; ``` Of course it can be something with my instance of Elasticsearch but current level of logging does not allow to make some further investigation. ### Orchard Core version 1.8.2 ### Expected behavior I expect to see error details from ElasticSearch request.</DESCRIPTION>
  <REPONAME>OrchardCore</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>.NET 8.0.8 (#16550)</MESSAGE>
    <SHA>93739f8a0cc4f7d68a29af8315c2e5a7a3283fbb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add more logging for ElasticSearch Fixes #16561</MESSAGE>
      <SHA>a4544530a903fb10c9b447689b104d647cfeeef6</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore/OrchardCore.Search.Elasticsearch.Core/Services/ElasticIndexManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Additional logs for ElasticSearch failures Fixes #16561</MESSAGE>
      <SHA>47ecc6f6fa10ae0eea5fc77ef4671092118037e7</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore/OrchardCore.Search.Elasticsearch.Core/Services/ElasticIndexManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Additional logs for ElasticSearch failures (#16564) Fixes #16561</MESSAGE>
      <SHA>371deaa030cc1b41d8e38a3b994b6bdbdfe95c0c</SHA>
      <PATCHEDFILES>
        <FILE>src/OrchardCore/OrchardCore.Search.Elasticsearch.Core/Services/ElasticIndexManager.cs</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
