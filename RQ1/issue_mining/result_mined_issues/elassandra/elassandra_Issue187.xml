<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>187</ISSUENO>
  <ISSUEURL>https://github.com/strapdata/elassandra/issues/187</ISSUEURL>
  <TITLE>row removed in cassandra, but the the corresponding document not removed from Elasticsearch</TITLE>
  <DESCRIPTION>**Elassandra version**: 5.5.0.10 **JVM version**: JDK 1.8 **OS version**: CentOS release 6.5 (Final) **Description of the problem including expected versus actual behavior**: I have two data center elassandra which 3 nodes started as &quot;bin/cassandra&quot; and 2 other nodes started as &quot;bin/cassandra -e&quot; I have the following random problem: sometimes when deletion a row within cql command the row seems deleted successfully from cassandra , but when executing elasticsearch search query the deleted document already exists without _source document as documents &quot;xxxxx&quot; and &quot;yyyyy&quot; as follow: QUERY GET : my_index/_search RESULT: { &quot;took&quot;: 5, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 1, &quot;successful&quot;: 1, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 6, &quot;max_score&quot;: 1, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;test_1&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;field_id&quot;: &quot;test_1&quot;, &quot;field2&quot;: &quot;description 1&quot; } }, { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;test&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;field_id&quot;: &quot;test&quot; } }, { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;test_3&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;field_id&quot;: &quot;test_3&quot;, &quot;field2&quot;: &quot;description 3&quot; } }, { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;test_4&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;field_id&quot;: &quot;test_4&quot;, &quot;field2&quot;: &quot;description 4&quot; } }, { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;xxxxx&quot;, &quot;_score&quot;: 1 }, { &quot;_index&quot;: &quot;my_index&quot;, &quot;_type&quot;: &quot;my_type&quot;, &quot;_id&quot;: &quot;yyyyy&quot;, &quot;_score&quot;: 1 } ] } }</DESCRIPTION>
  <REPONAME>elassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>77</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Improve issue template</MESSAGE>
    <SHA>7e1f1523724e18628e5463b7b7f19dd5aa50f802</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>#187 refactoring of partitionDelete</MESSAGE>
      <SHA>b879987392f2b6530578a5a4ca5a274e6c0af7ed</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/org/elassandra/index/ElasticSecondaryIndex.java</FILE>
        <FILE>core/src/main/java/org/elasticsearch/index/shard/IndexShard.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
