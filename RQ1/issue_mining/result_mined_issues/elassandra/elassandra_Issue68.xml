<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>68</ISSUENO>
  <ISSUEURL>https://github.com/strapdata/elassandra/issues/68</ISSUEURL>
  <TITLE>ES Object Type stringified in search</TITLE>
  <DESCRIPTION>When inserting fields mapped as ```object``` type contents are returned as strings in search. In comparison my stock ES 2.x returns ```object``` fields as a valid JSON objects without escaping. ###### Steps to Reproduce * Create Mapping: ```json PUT watcher/watch/_mapping { &quot;properties&quot;: { &quot;uuid&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;index&quot;: &quot;not_analyzed&quot; }, &quot;condition&quot;: { &quot;type&quot;:&quot;object&quot;, &quot;enabled&quot;: false } } } ``` * Insert document with object fields ```json PUT watcher/watch/test_watch_random23 { &quot;uuid&quot;: &quot;test&quot;, &quot;trigger&quot;: { &quot;schedule&quot;: { &quot;later&quot;: &quot;every 1 minutes&quot; } }, &quot;condition&quot;: { &quot;script&quot;: { &quot;script&quot;: &quot;payload.hits.total &gt; 1&quot; } } } ``` * Query results, objects are returned as strings ``` GET watcher/_search { &quot;took&quot;: 6, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 1, &quot;successful&quot;: 1, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 1, &quot;max_score&quot;: 1, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;watcher&quot;, &quot;_type&quot;: &quot;watch&quot;, &quot;_id&quot;: &quot;test_watch_random23&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: { &quot;condition&quot;: &quot;{\&quot;script\&quot;:{\&quot;script\&quot;:\&quot;payload.hits.total &gt; 1\&quot;}}&quot;, &quot;trigger&quot;: { &quot;schedule&quot;: { &quot;later&quot;: &quot;every 1 minutes&quot; } }, &quot;uuid&quot;: &quot;test&quot; } } ] } } ```</DESCRIPTION>
  <REPONAME>elassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>#70 Fix ES Delete index when having a template Fix the delete index issue and add a unit test.</MESSAGE>
    <SHA>aba0095e29eace6691933934557e9fcaf341cef4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>ES Object Type stringified in search (#68) Fix the bug and improve the unit test.</MESSAGE>
      <SHA>56f65df2a0ac832e2e49cff9fce9809d72366200</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/org/elassandra/cluster/InternalCassandraClusterService.java</FILE>
        <FILE>core/src/test/java/org/elassandra/ObjectNotEnabledTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
