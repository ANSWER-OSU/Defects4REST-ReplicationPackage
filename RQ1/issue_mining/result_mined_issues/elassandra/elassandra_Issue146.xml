<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>146</ISSUENO>
  <ISSUEURL>https://github.com/strapdata/elassandra/issues/146</ISSUEURL>
  <TITLE>Question. Is there a workaround for empty object type?</TITLE>
  <DESCRIPTION>[The elassandra doc](http://elassandra.readthedocs.io/en/latest/limitations.html#nested-or-object-types-cannot-be-empty) says: &quot;Because Elasticsearch nested and object types are backed by a Cassandra User Defined Type, it requires at least one sub-field in the mapping.&quot;; My app currently works with Elasticsearch v5+ and v6+ and [object type](https://www.elastic.co/guide/en/elasticsearch/reference/current/object.html) mapping is used. For example ``` { &quot;properties&quot;: { &quot;input&quot;: { &quot;type&quot;: &quot;object&quot;, &quot;enabled&quot;: false } } } ``` There are fields where I have a lot of deeply nested objects I don't know beforehand their names or the level of deepness. For example, the `input` above has to support any Elasticsearch query syntax. ``` { &quot;properties&quot;: { &quot;search&quot;: { &quot;query&quot;: { Elasticsearch query is here } } } } ``` That's why I need to add the new properties dynamically to the `input`. Is there any workaround to support my case? PS I know that the property can be stringified.</DESCRIPTION>
  <REPONAME>elassandra</REPONAME>
  <TIMEDIFFERENCEDAYS>31</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Switch to version 5.5.0.8</MESSAGE>
    <SHA>21ebd716b58cf9a0af602310bc7924c7e2512236</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add support for nested empty object #146</MESSAGE>
      <SHA>9036a4909397571837cd52f92e3b000983650862</SHA>
      <PATCHEDFILES>
        <FILE>core/src/main/java/org/elassandra/index/ElasticSecondaryIndex.java</FILE>
        <FILE>core/src/main/java/org/elasticsearch/cluster/service/ClusterService.java</FILE>
        <FILE>core/src/test/java/org/elassandra/ObjectNotEnabledTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
