<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>217</ISSUENO>
  <ISSUEURL>https://github.com/silverapp/silver/issues/217</ISSUEURL>
  <TITLE>Issue an invoice only if it is canceled `now`</TITLE>
  <DESCRIPTION>If `generate_docs` is run and a subscription is canceled, a billing document should be issued only if it's a new billing cycle.</DESCRIPTION>
  <REPONAME>silver</REPONAME>
  <TIMEDIFFERENCEDAYS>29</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add django-model-utils to common requirements</MESSAGE>
    <SHA>cf556ee3166f121dd128475f34c1ea2b603768b9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge branch 'master' into issue-invoice-at-end-of-billing-cycle-fix-#217</MESSAGE>
      <SHA>88e71e18e3d075288046cbe01880a403d53c9f9e</SHA>
      <PATCHEDFILES>
        <FILE>silver/admin.py</FILE>
        <FILE>silver/api/urls.py</FILE>
        <FILE>silver/api/views.py</FILE>
        <FILE>silver/documents_generator.py</FILE>
        <FILE>silver/management/commands/generate_docs.py</FILE>
        <FILE>silver/models.py</FILE>
        <FILE>silver/tests/commands/test_generate_billing_documents.py</FILE>
        <FILE>silver/tests/commands/test_generate_docs.py</FILE>
        <FILE>silver/tests/factories.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #224 from PressLabs/issue-invoice-at-end-of-billing-cycle-fix-#217 Issue invoice at end of billing cycle fix #217 and #228</MESSAGE>
      <SHA>f10b1d40544074b7fe093714edc6ef040710efe2</SHA>
      <PATCHEDFILES>
        <FILE>requirements/common.txt</FILE>
        <FILE>requirements/test.txt</FILE>
        <FILE>silver/admin.py</FILE>
        <FILE>silver/api/serializers.py</FILE>
        <FILE>silver/api/views.py</FILE>
        <FILE>silver/documents_generator.py</FILE>
        <FILE>silver/migrations/0009_auto_20150717_1428.py</FILE>
        <FILE>silver/models.py</FILE>
        <FILE>silver/tests/commands/test_generate_docs.py</FILE>
        <FILE>silver/tests/factories.py</FILE>
        <FILE>silver/tests/spec/test_subscription.py</FILE>
        <FILE>silver/tests/unit/test_invoice.py</FILE>
        <FILE>silver/tests/unit/test_proforma.py</FILE>
        <FILE>silver/tests/unit/test_subscription.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
