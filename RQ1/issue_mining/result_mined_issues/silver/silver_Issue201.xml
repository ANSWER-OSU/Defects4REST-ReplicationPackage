<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>201</ISSUENO>
  <ISSUEURL>https://github.com/silverapp/silver/issues/201</ISSUEURL>
  <TITLE>The Invoice paid action is incomplete if there is a proforma behind it</TITLE>
  <DESCRIPTION>The flow is the following: 1 - I create a draft Proforma - The payment is not visible and unpaid (OK) 2 - I issue the proforma. The payment is visible and unpaid (OK) 3 - I create the invoice from proforma. The payment is visible and unpaid (OK) 4 - I go on the invoice and click Pay this invoice. The invoice moves to paid (OK), the proforma stays at issued (NOT OK, it should move to paid), the payment is visible and unpaid (NOT OK, it should move to paid) To be sure other documents flows are working as expected: I tested also the flow: 1 - same 2 - same 3 - same 4 - click pay this proforma. This is working ok, The proforma goes to paid, the invoice goes to paid, the payments goes to paid I tested also the flow: 1 - created a draft invoice (no proforma attached), payment is not visible and unpaid (OK) 2 - issued the invoice, payment is visible and unpaid (OK) 3 - pay this invoice, invoice goes to paid, payments goes to paid (OK)</DESCRIPTION>
  <REPONAME>silver</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #199 from PressLabs/tests-fix Tests fix</MESSAGE>
    <SHA>58596bcfc55d82cb58e90a07ad44b1f2e76823c5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #202 from PressLabs/proforma-paid-transition-fix-#201 Proforma paid transition fix (closes #201)</MESSAGE>
      <SHA>4dc6c8da10ff0e683f6541fb5dc90149d7214125</SHA>
      <PATCHEDFILES>
        <FILE>silver/models.py</FILE>
        <FILE>silver/tests/spec/test_invoice.py</FILE>
        <FILE>silver/tests/spec/test_proforma.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
