<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>18535</ISSUENO>
  <ISSUEURL>https://github.com/netbox-community/netbox/issues/18535</ISSUEURL>
  <TITLE>Allow NetBox to start cleanly if incompatible plugins are present</TITLE>
  <DESCRIPTION>### NetBox version v4.2.2 ### Feature type Data model extension ### Proposed functionality Currently we raise an `ImproperlyConfigured` exception and refuse to start NetBox at all if any plugin has `min_version` or `max_version` specified such that the installed version of NetBox is outside the compatible range. Proposal is to allow NetBox to recognize incompatible plugins at startup and skip loading them (while emitting an appropriate warning), rather than raising an exception. This should probably be done with a custom exception type that inherits from `ImproperlyConfigured` so that these exceptions can be caught separately. ### Use case It is not always easy to upgrade plugins at the same time as a NetBox installation, or a plugin might not yet be updated to the current NetBox version; this often leads to support issues where plugins must be painstakingly removed from the local configuration during an upgrade. This change would make it possible for plugins' published compatibility ranges to be enforced through the invalid plugins simply being disabled rather than interfering with the overall application's startup. Note that plugins will need to be more diligent about defining `max_version` and pinning it to the most recent NetBox release against which it has been tested. ### Database changes N/A ### External dependencies N/A</DESCRIPTION>
  <REPONAME>netbox</REPONAME>
  <TIMEDIFFERENCEDAYS>39</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Closes #7598: Enable custom field filtering for GraphQL (#18701)</MESSAGE>
    <SHA>c35f5f829a97bb9ecaf65b255101f38c80a82250</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Closes: #18535 - Skip incompatible plugins during startup (#18537) * Skip incompatible plugins during startup and remove from PLUGINS * Handle exceptions on request processors in incompatible plugins, and display status in Plugins page * Revert &quot;Handle exceptions on request processors in incompatible plugins, and display status in Plugins page&quot; This reverts commit d97bf2ab146114cc13d751878a17a383de0fd5f8. * Resolve merge conflicts * Skip incompatible plugins during startup and remove from PLUGINS * Rename Installed column to Active, and add custom PluginActiveColumn with tooltip * Fix is_installed * Simplify plugin_config.validate syntax Co-authored-by: Jeremy Stretch &lt;jstretch@netboxlabs.com&gt; * Merge feature * Revert &quot;Merge feature&quot; This reverts commit d1ea60f08270b9e79d30b9fa9859049aa371f4c6. * Undo simplification * Add failed_to_load logic * Use a TemplateColumn for is_installed * Remove custom column class * Remove merge vestige * Simplify plugin attributes for is_installed column * Use placeholders for false values to increase legibility of the plugins table --------- Co-authored-by: Jeremy Stretch &lt;jstretch@netboxlabs.com&gt;</MESSAGE>
      <SHA>b5d970f7bbee10c34c6086b41708f1b379f683bd</SHA>
      <PATCHEDFILES>
        <FILE>netbox/core/exceptions.py</FILE>
        <FILE>netbox/core/plugins.py</FILE>
        <FILE>netbox/core/tables/plugins.py</FILE>
        <FILE>netbox/core/tables/template_code.py</FILE>
        <FILE>netbox/netbox/middleware.py</FILE>
        <FILE>netbox/netbox/plugins/__init__.py</FILE>
        <FILE>netbox/netbox/settings.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
