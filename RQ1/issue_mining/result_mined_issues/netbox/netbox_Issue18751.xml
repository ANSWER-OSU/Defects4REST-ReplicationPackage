<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>18751</ISSUENO>
  <ISSUEURL>https://github.com/netbox-community/netbox/issues/18751</ISSUEURL>
  <TITLE>Make ALLOW_TOKEN_RETRIEVAL = False the default</TITLE>
  <DESCRIPTION>### NetBox version v4.2.3 ### Feature type Change to existing functionality ### Proposed functionality Currently, a newly setup netbox will have set ALLOW_TOKEN_RETRIEVAL = True. This is a bad and insecure default, as API tokens of users should not be visible to administrators. ### Use case Be more secure by default. If somebody gets administrator permissions on accident (people make errors), they immediatly have access to all tokens with the current default. That should not be the case ### Database changes _No response_ ### External dependencies _No response_</DESCRIPTION>
  <REPONAME>netbox</REPONAME>
  <TIMEDIFFERENCEDAYS>20</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixes #18141: Fix quick-add support for plugin models</MESSAGE>
    <SHA>7aba6500ddef8a58d8d914b9899ee987a4a39a94</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Make ALLOW_TOKEN_RETRIEVAL = False the default Fixes #18751</MESSAGE>
      <SHA>58d965983507eedc520cc970fa7ec02ee46b04d6</SHA>
      <PATCHEDFILES>
        <FILE>docs/configuration/security.md</FILE>
        <FILE>netbox/netbox/settings.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Closes #18751: Set the default value of ALLOW_TOKEN_RETRIEVAL to False</MESSAGE>
      <SHA>83d2659aa736ca9d49d24d21e6abd3943309f929</SHA>
      <PATCHEDFILES>
        <FILE>docs/configuration/security.md</FILE>
        <FILE>netbox/netbox/settings.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Closes #18751: Set the default value of `ALLOW_TOKEN_RETRIEVAL` to False (#18943) * Closes #18751: Set the default value of ALLOW_TOKEN_RETRIEVAL to False * Enable token retrieval during testing</MESSAGE>
      <SHA>d25605c261a75e4da6c07f0b9f5e5ebba84e3f71</SHA>
      <PATCHEDFILES>
        <FILE>docs/configuration/security.md</FILE>
        <FILE>netbox/netbox/configuration_testing.py</FILE>
        <FILE>netbox/netbox/settings.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
