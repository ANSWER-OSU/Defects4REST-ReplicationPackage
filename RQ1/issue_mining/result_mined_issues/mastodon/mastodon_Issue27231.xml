<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>27231</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/27231</ISSUEURL>
  <TITLE>Import following list never finished</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Open https://mastodon.social/settings/imports 2. Select following list 3. Choose file of followers exported from previous instance 4. Select Merge 5. Upload ### Expected behaviour Finished with downloadable list of failures ### Actual behaviour In progress with no list of failures ### Detailed description I migrated Mastodon instances yesterday and then imported my following list from the previous instance. After more than 24 hours, the import is still &quot;In progress&quot;, with 202 / 204 imported, with 1 failure. So it appears to be stuck on 1 imported follower. Also, the Failures list is not clickable, because it's still in progress, unlike with finished imports. ![Screenshot 2023-10-01 at 10 39 35 AM](https://github.com/mastodon/mastodon/assets/56086/23f57008-7974-4ff9-b5f0-f3db18660db9) ### Mastodon instance mastodon.social ### Mastodon version v4.2.0+pr-27116-50e1f46 ### Browser name and version Safari 17 ### Operating system macOS 13.6 ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix explore prompt appearing because of posts being received out of order (#27211)</MESSAGE>
    <SHA>d80a819fc60b530042784cc3f20cd3041ee0a996</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix import progress not updating on certain failures Fixes #27231</MESSAGE>
      <SHA>d6c777f5bbc52ebe1bdf4849b80e0cf46c740c38</SHA>
      <PATCHEDFILES>
        <FILE>app/workers/import/row_worker.rb</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
