<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>27273</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/27273</ISSUEURL>
  <TITLE>search for posts 'broken' when not logged in (4.2.0)</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Go to a server running Mastodon 4.2 without logging in (https://mastodon.social/search) 2. Enter a search term. For instance, I used &quot;Gaetz&quot; since he's in the news today. 3. View the search results. There will be no posts listed under the &quot;all&quot; tab, and the 'posts' tab will provide the misleading message &quot;Could not find anything for these search terms&quot; ... ### Expected behaviour Either show search results the same as for logged-in users, or clarify the response to say that search is turned off for anonymous users ### Actual behaviour &quot;post&quot; search results are not shown. Instead shows misleading message &quot;Could not find anything for these search terms&quot; ### Detailed description Note, this is not a problem with search itself. When logged in, I see plenty of search results (mstdn.science). It also is not a problem with displaying posts to anonymous users - the hashtag search works as expected and displays the posts properly (https://mastodon.social/tags/gaetz) If this behavior is intentional, then the website should be clear about why it is not returning any results. The current response could give the wrong impression to someone who is curious about Mastodon and uses the search function to see what sort of activity is on Mastodon (concluding either that there is no activity, or that search is broken). I tested on both mastodon.social (v4.2.1-rc1+pr-27261-dd5f312) and mstdn.sciesce (4.2.0) ### Mastodon instance mastodon.social ### Mastodon version v4.2.1-rc1+pr-27261-dd5f312 ### Browser name and version Firefox 118.0.1 (64-bit) ### Operating system Windows 11 ### Technical details _No response_</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>50</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Change to single opt-in during profile setup in onboarding in web UI (#27876)</MESSAGE>
    <SHA>0e9801443f8f91ff49b47f82151ee5984c9bd6c1</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Change search popout to not list unusable search options when logged out Fixes #27273</MESSAGE>
      <SHA>85c27a472551aa5fd5bbe6a503ed8a3c10c447c8</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/features/compose/components/search.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Change search popout to not list unusable search options when logged out Fixes #27273</MESSAGE>
      <SHA>06f27c93ce8f553c6619ff52ba7277f143a441bc</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/features/compose/components/search.jsx</FILE>
        <FILE>app/javascript/mastodon/locales/en.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Change search popout to not list unusable search options when logged out Fixes #27273</MESSAGE>
      <SHA>71302844e92b92e8c14b9ac2e8977d2ece68ebd5</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/features/compose/components/search.jsx</FILE>
        <FILE>app/javascript/mastodon/locales/en.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Change search popout to not list unusable search options when logged out Fixes #27273</MESSAGE>
      <SHA>c5ce744409ea7b9a9fd7ba487d125e27e593216f</SHA>
      <PATCHEDFILES>
        <FILE>app/javascript/mastodon/features/compose/components/search.jsx</FILE>
        <FILE>app/javascript/mastodon/locales/en.json</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
