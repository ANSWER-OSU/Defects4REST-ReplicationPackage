<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32790</ISSUENO>
  <ISSUEURL>https://github.com/mastodon/mastodon/issues/32790</ISSUEURL>
  <TITLE>tootctl error &quot;uninitialized constant HttpLog&quot; when trying to use the tool</TITLE>
  <DESCRIPTION>### Steps to reproduce the problem 1. Try to run some `tootctl` command 2. An error `uninitialized constant HttpLog` appears after a few seconds ### Expected behaviour The tootctl command to sucessfully run ### Actual behaviour The `uninitialized constant HttpLog` error appears and halts the command ### Detailed description Every `tootctl` command I try to run end up like this: ``` bash $ live/bin/tootctl cache clear /home/mastodon/live/lib/mastodon/cli/progress_helper.rb:8:in `&lt;main&gt;': uninitialized constant HttpLog (NameError) HttpLog.configuration.logger = dev_null ^^^^^^^ Did you mean? HTTPClient from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `&lt;main&gt;' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `&lt;main&gt;' from live/bin/tootctl:5:in `require_relative' from live/bin/tootctl:5:in `&lt;main&gt;' $ live/bin/tootctl --version /home/mastodon/live/lib/mastodon/cli/progress_helper.rb:8:in `&lt;main&gt;': uninitialized constant HttpLog (NameError) HttpLog.configuration.logger = dev_null ^^^^^^^ Did you mean? HTTPClient from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `&lt;main&gt;' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `&lt;main&gt;' from live/bin/tootctl:5:in `require_relative' from live/bin/tootctl:5:in `&lt;main&gt;' $ live/bin/tootctl media usage /home/mastodon/live/lib/mastodon/cli/progress_helper.rb:8:in `&lt;main&gt;': uninitialized constant HttpLog (NameError) HttpLog.configuration.logger = dev_null ^^^^^^^ Did you mean? HTTPClient from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `&lt;main&gt;' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `&lt;main&gt;' from live/bin/tootctl:5:in `require_relative' from live/bin/tootctl:5:in `&lt;main&gt;' $ live/bin/tootctl search deploy --clean /home/mastodon/live/lib/mastodon/cli/progress_helper.rb:8:in `&lt;main&gt;': uninitialized constant HttpLog (NameError) HttpLog.configuration.logger = dev_null ^^^^^^^ Did you mean? HTTPClient from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/base.rb:8:in `&lt;main&gt;' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `require_relative' from /home/mastodon/live/lib/mastodon/cli/main.rb:3:in `&lt;main&gt;' from live/bin/tootctl:5:in `require_relative' from live/bin/tootctl:5:in `&lt;main&gt;' ``` When I edit the file `progress_helper.rb` and comment the line 8, the error disappears, and the command runs without a glitch. It didn't happen at least until `v4.4.0-alpha.1-0a1b5df`. ### Mastodon instance bolha.one, ursal.zone ### Mastodon version v4.4.0-alpha.1-d482211 ### Technical details If this is happening on your own Mastodon server, please fill out those: - Ruby version: `ruby 3.3.6 (2024-11-05 revision 75015d4c1f) [x86_64-linux]` - Node.js version: `v20.18.0`</DESCRIPTION>
  <REPONAME>mastodon</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix out-of-view post contents being inconsistent with in-view post contents (#32778)</MESSAGE>
    <SHA>d482211aa6293f78f161cbc7149e829966cd8e3a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix “uninitialized constant HttpLog” errors in tootctl Fixes #32790</MESSAGE>
      <SHA>74ce52870e79078772803a79072a9e5e51970b62</SHA>
      <PATCHEDFILES>
        <FILE>lib/mastodon/cli/progress_helper.rb</FILE>
        <FILE>lib/tasks/mastodon.rake</FILE>
        <FILE>lib/tasks/repo.rake</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
