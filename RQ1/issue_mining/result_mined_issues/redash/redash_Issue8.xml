<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>8</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/8</ISSUEURL>
  <TITLE>Query updater improvements</TITLE>
  <DESCRIPTION>As part of the implementation of this we should consider to switching to using standard task queue, such as [rq](http://python-rq.org). - [x] Use the peewee models in the manager/worker code - [ ] Status page for all jobs - [x] Ability to &quot;safe&quot; restart the updater (so no queries are lost) (https://github.com/EverythingMe/redash/commit/83e2618bf314ccd5abf71201eb426b6f422e61eb) - [x] Bug: when canceling executing query with no process (meaning it's not really executing anymore), the cancel fails. Instead it should catch the exception and cancel this job. - [x] Better visibility on workers status and restart of dead ones - [x] Ability to cancel running query</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>201</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update peewee version to be able to use window functions.</MESSAGE>
    <SHA>2d3a0cc917bb92062eacc858c0eff32f9109716a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Switch to using peewee models in Manager + fix bugs + add tests (#8).</MESSAGE>
      <SHA>166b1a7c6be7af4bc3249e7f4777d17a0f83060d</SHA>
      <PATCHEDFILES>
        <FILE>redash/__init__.py</FILE>
        <FILE>redash/data/manager.py</FILE>
        <FILE>tests/test_manager.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: user should be able to cancel query even if process not existing already (#8).</MESSAGE>
      <SHA>d9af5d3943bd6515923ec6131197c776fd0b1b97</SHA>
      <PATCHEDFILES>
        <FILE>redash/data/worker.py</FILE>
        <FILE>tests/test_job.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Cleaner shutdown (#8)</MESSAGE>
      <SHA>2938e579802dd2c79bdb40d82f07e4aa187aece9</SHA>
      <PATCHEDFILES>
        <FILE>redash/data/query_runner_pg.py</FILE>
        <FILE>redash/data/worker.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Switch to using peewee models in Manager + fix bugs + add tests (#8).</MESSAGE>
      <SHA>3c895310f4757794326c53abc80dd8c39f14ebd2</SHA>
      <PATCHEDFILES>
        <FILE>redash/__init__.py</FILE>
        <FILE>redash/data/manager.py</FILE>
        <FILE>tests/test_manager.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix: user should be able to cancel query even if process not existing already (#8).</MESSAGE>
      <SHA>7ed9dc90d33cfef94e5630518b6374e9438026e2</SHA>
      <PATCHEDFILES>
        <FILE>redash/data/worker.py</FILE>
        <FILE>tests/test_job.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Cleaner shutdown (#8)</MESSAGE>
      <SHA>ac89584083acd799bedd788adc73cd732bf400b8</SHA>
      <PATCHEDFILES>
        <FILE>redash/data/query_runner_pg.py</FILE>
        <FILE>redash/data/worker.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #8 from getredash/master from getredash</MESSAGE>
      <SHA>68676797c003dfe88d44cfed6064cd781382c248</SHA>
      <PATCHEDFILES>
        <FILE>client/app/components/CodeBlock.less</FILE>
        <FILE>client/app/components/HelpTrigger.less</FILE>
        <FILE>client/app/components/ParameterMappingInput.less</FILE>
        <FILE>client/app/components/ParameterValueInput.less</FILE>
        <FILE>client/app/components/Parameters.less</FILE>
        <FILE>client/app/components/TagsList.less</FILE>
        <FILE>client/app/components/cards-list/CardsList.less</FILE>
        <FILE>client/app/components/dashboards/dashboard-widget/Widget.less</FILE>
        <FILE>client/app/components/dynamic-form/DynamicForm.less</FILE>
        <FILE>client/app/components/dynamic-parameters/DynamicParameters.less</FILE>
        <FILE>client/app/components/empty-state/empty-state.less</FILE>
        <FILE>client/app/components/queries/EmbedQueryDialog.less</FILE>
        <FILE>client/app/components/queries/add-to-dashboard-dialog.less</FILE>
        <FILE>client/app/components/queries/editor-components/databricks/DatabricksSchemaBrowser.less</FILE>
        <FILE>client/app/pages/dashboards/DashboardPage.less</FILE>
        <FILE>client/app/pages/dashboards/components/DashboardHeader.less</FILE>
        <FILE>client/app/redash-font/style.less</FILE>
        <FILE>redash/cli/rq.py</FILE>
        <FILE>redash/tasks/__init__.py</FILE>
        <FILE>redash/tasks/general.py</FILE>
        <FILE>redash/tasks/queries/execution.py</FILE>
        <FILE>redash/tasks/schedule.py</FILE>
        <FILE>redash/tasks/worker.py</FILE>
        <FILE>redash/worker.py</FILE>
        <FILE>requirements.txt</FILE>
        <FILE>worker.conf</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #8 from codygo-solutions/1396-table-design 1396 table design</MESSAGE>
      <SHA>d6417541d36be6de7e343897888ad97858588832</SHA>
      <PATCHEDFILES>
        <FILE>client/app/components/Paginator.jsx</FILE>
        <FILE>client/app/components/Paginator.less</FILE>
        <FILE>viz-lib/src/visualizations/table/Renderer.tsx</FILE>
        <FILE>viz-lib/src/visualizations/table/renderer.less</FILE>
        <FILE>viz-lib/src/visualizations/variables.less</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
