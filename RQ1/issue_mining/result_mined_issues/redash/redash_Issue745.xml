<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>745</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/745</ISSUEURL>
  <TITLE>Cannot create user using cli</TITLE>
  <DESCRIPTION>I'm trying to add user with: ``` sudo -u redash bin/run ./manage.py users create --admin --password &quot;admin&quot; &quot;Admin&quot; &quot;admin&quot; ``` And I got this message: ``` [2016-01-07 14:38:06,207][PID:12742][WARNING][redash.query_runner] MQL query runner enabled but not supported, not registering. Either disable or install missing dependencies. [2016-01-07 14:38:06,257][PID:12742][WARNING][redash.query_runner] Oracle query runner enabled but not supported, not registering. Either disable or install missing dependencies. Creating user (admin, Admin)... Admin: True Login with Google Auth: False [2016-01-07 14:38:06,634][PID:12742][ERROR][peewee] INSERT INTO &quot;users&quot; (&quot;updated_at&quot;, &quot;created_at&quot;, &quot;name&quot;, &quot;email&quot;, &quot;password_hash&quot;, &quot;groups&quot;, &quot;api_key&quot;) VALUES (%s, %s, %s, %s, %s, %s, %s) RETURNING &quot;id&quot; [datetime.datetime(2016, 1, 7, 14, 38, 6, 632460), datetime.datetime(2016, 1, 7, 14, 38, 6, 554274), u'Admin', u'admin', u'$6$rounds=90991$DiUKf0o7KU2isus/$9P.KmZaiAeMOMIH.bnkyiq/Er.bmoLQVS0pf1y.qopfdnkWyuCsqauPUT6a1mOZFvbySRTph11UbA4uAL8Xtd/', [1], u'ZYBtGLE5mdlanDxKhItYYQ9v3G92DSR6GpfeNC53'] Traceback (most recent call last): File &quot;/usr/local/lib/python2.7/dist-packages/playhouse/postgres_ext.py&quot;, line 360, in execute_sql cursor.execute(sql, params or ()) IntegrityError: null value in column &quot;org_id&quot; violates not-null constraint DETAIL: Failing row contains (4, 2016-01-07 14:38:06.63246+00, 2016-01-07 14:38:06.554274+00, null, Admin, admin, $6$rounds=90991$DiUKf0o7KU2isus/$9P.KmZaiAeMOMIH.bnkyiq/Er.bmoLQ..., {1}, ZYBtGLE5mdlanDxKhItYYQ9v3G92DSR6GpfeNC53). Failed creating user: null value in column &quot;org_id&quot; violates not-null constraint DETAIL: Failing row contains (4, 2016-01-07 14:38:06.63246+00, 2016-01-07 14:38:06.554274+00, null, Admin, admin, $6$rounds=90991$DiUKf0o7KU2isus/$9P.KmZaiAeMOMIH.bnkyiq/Er.bmoLQ..., {1}, ZYBtGLE5mdlanDxKhItYYQ9v3G92DSR6GpfeNC53). ``` I installed redash on ubuntu machine and created tables with: ``` sudo -u redash bin/run ./manage.py database create_tables ``` I don't have any organizations.</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix SSLify skip list.</MESSAGE>
    <SHA>0228d170575b833832a4d4b7940c5c245618d6fb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #745: when creating user from CLI, use default org.</MESSAGE>
      <SHA>19a23bf3a305b3f26b558248a20470e544f497dc</SHA>
      <PATCHEDFILES>
        <FILE>cli/users.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
