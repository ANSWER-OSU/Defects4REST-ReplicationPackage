<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5646</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/5646</ISSUEURL>
  <TITLE>lastSelectedDataSourceId always reverts to alphabetically first data source</TITLE>
  <DESCRIPTION>### Issue Summary Despite the localstorage get `lastSelectedDataSourceId` visibly updating when selecting a different data source, it is subsequently reverted to the ID of the first data source in alphabetical order. ### Steps to Reproduce 1. Create a new query 2. Change to an alternative data source that is NOT alphabetically first 3. Observe `lastSelectedDataSourceId` updates in localstorage 4. Refresh or reload the new query page 5. Observe that `lastSelectedDataSourceId` reverts to the ID of the first alphabetically listed data source ### Technical details: * Redash Version: 10.0.0-beta (92e5d78d) * Browser/OS: Chrome macOS * How did you install Redash: Docker</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>553</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Bump pyyaml from 5.1.2 to 5.4 (#5442) Bumps [pyyaml](https://github.com/yaml/pyyaml) from 5.1.2 to 5.4. - [Release notes](https://github.com/yaml/pyyaml/releases) - [Changelog](https://github.com/yaml/pyyaml/blob/master/CHANGES) - [Commits](https://github.com/yaml/pyyaml/compare/5.1.2...5.4) Signed-off-by: dependabot[bot] &lt;support@github.com&gt; Co-authored-by: dependabot[bot] &lt;49699333+dependabot[bot]@users.noreply.github.com&gt;</MESSAGE>
    <SHA>3444f2b06c159f6a18d88fcd058b50bf89377963</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix persisting datasource selection choice Closes getredash/redash#5646. We were already storing this in localStorage, however we weren't accounting for the fact that it was stored as a string, rather than an integer.</MESSAGE>
      <SHA>6f45ba77bb9ffc309ca7e35b1d42006756bc740e</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/QuerySource.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix persisting datasource selection choice Closes getredash/redash#5646. We were already storing this in localStorage, however we weren't accounting for the fact that it was stored as a string, rather than an integer.</MESSAGE>
      <SHA>bc742aa98539418f17cb949ef36a199cc68701e7</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/QuerySource.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix persisting datasource selection choice (#6181) * Fix persisting datasource selection choice Closes getredash/redash#5646. We were already storing this in localStorage, however we weren't accounting for the fact that it was stored as a string, rather than an integer. * Restyled by prettier (#6182) Co-authored-by: Restyled.io &lt;commits@restyled.io&gt; --------- Co-authored-by: restyled-io[bot] &lt;32688539+restyled-io[bot]@users.noreply.github.com&gt; Co-authored-by: Restyled.io &lt;commits@restyled.io&gt;</MESSAGE>
      <SHA>d5b821e30a22224fe62d265cd08af07754c5e931</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/QuerySource.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix persisting datasource selection choice (#6181) * Fix persisting datasource selection choice Closes getredash/redash#5646. We were already storing this in localStorage, however we weren't accounting for the fact that it was stored as a string, rather than an integer. * Restyled by prettier (#6182) Co-authored-by: Restyled.io &lt;commits@restyled.io&gt; --------- Co-authored-by: restyled-io[bot] &lt;32688539+restyled-io[bot]@users.noreply.github.com&gt; Co-authored-by: Restyled.io &lt;commits@restyled.io&gt;</MESSAGE>
      <SHA>bc7af44efb28593544d1b0b459bc6551a8554527</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/QuerySource.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix persisting datasource selection choice (#6181) * Fix persisting datasource selection choice Closes getredash/redash#5646. We were already storing this in localStorage, however we weren't accounting for the fact that it was stored as a string, rather than an integer. * Restyled by prettier (#6182) Co-authored-by: Restyled.io &lt;commits@restyled.io&gt; --------- Co-authored-by: restyled-io[bot] &lt;32688539+restyled-io[bot]@users.noreply.github.com&gt; Co-authored-by: Restyled.io &lt;commits@restyled.io&gt;</MESSAGE>
      <SHA>f9ef070acb5da7b267102f9c6896ea50ab55e2b5</SHA>
      <PATCHEDFILES>
        <FILE>client/app/pages/queries/QuerySource.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
