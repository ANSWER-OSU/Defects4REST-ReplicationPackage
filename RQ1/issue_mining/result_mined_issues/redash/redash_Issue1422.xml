<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1422</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/1422</ISSUEURL>
  <TITLE>NameError: global name 'cassandra' is not defined</TITLE>
  <DESCRIPTION>Hey, ### Issue Summary I added `export REDASH_ADDITIONAL_QUERY_RUNNERS=redash.query_runner.cass` to `opt/redash/.env`. After that, I was able to create a new cassandra datasource but when querying is failing and displaying: **global name 'cassandra' is not defined** I have installed the DataStax Cassandra driver `sudo pip install cassandra-driver` and using Python 2.7.6. These are the traces of `/opt/redash/logs/celery_error.log` ``` 2016-11-23 02:09:15,625: WARNING/Worker-5] Unexpected error while running query: Traceback (most recent call last): File &quot;/opt/redash/redash.0.12.0.b2449/redash/tasks/queries.py&quot;, line 410, in run data, error = query_runner.run_query(annotated_query, self.user) File &quot;/opt/redash/redash.0.12.0.b2449/redash/query_runner/cass.py&quot;, line 90, in run_query except cassandra.cluster.Error, e: NameError: global name 'cassandra' is not defined ``` ### Technical details * Redash version 0.12.0+b2449 * OS Ubuntu 3.13.0-88-generic / Browser: Chrome. * How did you install Redash: running the provisioning script Thanks</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #1421 from getredash/arikfr-patch-1 Change: [BigQuery] only specify useLegacySQL is it's True</MESSAGE>
    <SHA>e6482cffabd3ef287b0012dc9fc23b5b77c2c98e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[Cassandra] Fix: cassandra.cluster.Error wasn't imported Fixed #1422.</MESSAGE>
      <SHA>52c71bc740e1f8f856e2399202359bffebe1a006</SHA>
      <PATCHEDFILES>
        <FILE>redash/query_runner/cass.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[Cassandra] Fix: cassandra.cluster.Error wasn't imported Fixed #1422.</MESSAGE>
      <SHA>004d52908e6fcc7263bf12342f52f97e2c231b32</SHA>
      <PATCHEDFILES>
        <FILE>redash/query_runner/cass.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[Cassandra] Fix: cassandra.cluster.Error wasn't imported Fixed #1422.</MESSAGE>
      <SHA>e06740d5ddee9af90d842d20b92704c3192d2f34</SHA>
      <PATCHEDFILES>
        <FILE>query_runner/cass.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
