<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3572</ISSUENO>
  <ISSUEURL>https://github.com/getredash/redash/issues/3572</ISSUEURL>
  <TITLE>A forked query clones all visualizations except for table visualizations</TITLE>
  <DESCRIPTION>&lt;!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help &amp; questions use https://discuss.redash.io/c/support For feature requests &amp; ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. --&gt; ### Issue Summary Suppose I have &quot;Query A&quot; that includes two chart visualizations and two table visualizations for a total of **four visualizations**. One of the table visualizations is the default, the other is a custom table visualization that hides certain columns and formats others. I fork &quot;Query A&quot; and call it &quot;Query B&quot;. After the fork, &quot;Query B&quot; is identical to &quot;Query A&quot; except it only has **three total visualizations**: two charts and the default table, but my custom table is not forked. ### Steps to Reproduce 1. Make a query and add a second table visualization in addition to the default 2. Fork the query 3. Notice that the second table visualization is not included I would expect all the visualizations to come along with the query when it is forked. ### Technical details: * Redash Version: 7.0.0 * Browser/OS: Chrome, Firefox, Safari * How did you install Redash: SaaS</DESCRIPTION>
  <REPONAME>redash</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Append &quot;UTC&quot; to timestamp on embeds (in print view) (#3574) To communicate what timezone the timestamp is.</MESSAGE>
    <SHA>ba62b46a453c5a6a37af20c6c4241366c3950a4e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fork query does not fork tables but instead adds default table (#3580) * getredash/redash#3572 Fork query does not fork tables but instead adds default table * Fix code style * CR1</MESSAGE>
      <SHA>4a8d9a7fb0ab69493922417170f665f384129d7d</SHA>
      <PATCHEDFILES>
        <FILE>redash/models/__init__.py</FILE>
        <FILE>tests/models/test_queries.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Upgrade to v7.0.0 (#6) Squashed commits of the following: * Delete an unused global (#3231) Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * Fix: forked query wasn't opening in MULTI_ORG env (#3236) * Send argsrepr value with execute_query task (#3235) * request.view_args might be None and add org_id to ApiUser (#3237) * Handle the case when a QueryTracker is None and change order. (#3238) * Fix: Query editor duplicates keystrokes [#2972] (#3239) * Simple user view (#3244) * show a simple user details page when viewing a user who isn't you (or you arent the admin) * add a snapshot test * lint * getredash/redash#3213 Scatter charts can have category Y axis (similar to Bubble) (#3243) * Upgrade requests package (#3245) * Support overriding the default Celery schedule database file via SCHEDULE_DB environment variable. (#3056) By default Celery will use a file celerybeat-schedule in the current directory. This is an issue in a Kubernetes/Openshift environment as the file may be lost or even impossible to write. * Closes #2396: Add finer-grained scheduling. (#2426) * Closes #187: Add finer-grained scheduling - backend. * Closes #2396 - Add finer-grained scheduling - frontend. * Fix linting issues * Rename ScheduleDialgo to .jsx * Feature: Refresh schedule - code optimizations * Feature: Refresh schedule - save/cancel actions * Feature: Refresh schedule - styling (#3247) * Fix: Able to set out-of-range refresh interval * Fix: Refresh schedule phrase overlaps title (#3250) * Add &quot;Active at&quot; column to user list. (#3026) * add last_active_at to users page * Use our JSON encoder as the SQLAlchemy JSON serializer. * Fixed some inconsistencies in the user query class methods. * Minor cosmetic fixes. * Add some make tasks for easier development. * Add user detail sync system based on Redis backend. There is a periodic Celery task that updates a new “details” JSONB column in the “user” table with the data from Redis. Currently this is only used for tracking the date of last activity of a user but can be extended with other user information later. Updates a few dependencies. * Normalize a few Flask extension API names. * Reduce implementation complexity of JSONEncoder. * Use request_started signal to make sure we have a request context. Otherwise loading the user based on the request won’t work. * Fix test that checks if disabled users can login. This correctly uses a URL path that includes the current organization and checks for the error message. The previous test seems to have been a red herring. * Minor cosmetic fixes. * Remove needs_sync in favor of just deleting things. * Misc review fixes. * Ignore line length. * Split redash.models import several modules. * Move walrus UTC DateTimeField into redash.models.types. * Restore distinctly loading dashboards. * Simplify default values for user details. * Define __repr__ methods generically. * Consistently have underscore methods at the top of model methods. * Fix tests. * Split redash.models import several modules. * Update to latest walrus and redis-py. * Update kombu to 4.2.2 for redis-py 3.x compatibility. * Remove redis-cli container after running Make task. * Move buffer condition after datetime/time conditions. * Update walrus to 0.7.1. * Refactor some query APIs. This uses the flask-sqlalchemy helpers consistently and makes more use of mixins. * Post rebase fixes. * Use correct kombu version * Fix migration down revision * Invitation Pending changes (#3229) * determine invitation_pending according to empty password. This commit will be reverted, I'm just deferring the implementation * show '(Invitation Pending)' to users who haven't accepted their invitation yet * allow resending invitations * allow deletion of pending users from user list * set invitation as not pending when following invite link * prevent deleting activated users * test that users who follow invitation links are set as non-pending invitations * prevent re-using invitations * invitees who use SSO will now also be marked as &quot;non-pending&quot; * lint * client: Remove estraverse (#3254) Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * Redis based implementation of user active_at timestamp update (#3256) * Switch to simpler implementation * Fix active_at update code * Fix sync test * update Flask-OAuthLib (#3262) * Fix invitation pending for existing users (#3261) * default `is_invitation_pending` to false and actively set it to true when inviting users, so that existing users won't show &quot;Invitation Pending&quot; * fix tests that broke due to default is_invitation_pending value * update Flask-OAuthLib * [Data Sources] Implement Apache Drill (#3188) * Added support for Apache Drill datasource * Improvements in `Drill` query runner and minor refactoring 1. Drill query runner now inherits from `BaseHTTPQueryRunner`, because they both have a lot of common code. 2. `BaseHTTPQueryRunner.get_response` method now accepts `http_method` argument (original implementation was only capable of sending `GET` HTTP requests). 3. Added `order` to `BaseHTTPRequestRunner` configuration schema to fix order of UI elements based on the schema. 4. Eliminated duplicate method `_guess_type` in `GoogleSpreadsheet`, `Results` and `Drill` query runners, moved `guess_type` to `redash.query_runner`. 5. Removed tests for `_guess_type` in `GoogleSpreadsheet`, `Results` and `Drill` query runners, merged them into single test case and moved to `tests.query_runner.test_utils`. 6. Various minor changes (code style, imports, etc). * Fix: Refresh schedule interval count doesn't adhere to permission rules (#3265) * Fix: Refresh schedule interval count doesn't adhere to permission rules * Fix “4.28 weeks” to “30 days” * Merge interval type and count into one &lt;Select&gt; * Fix: Refresh schedule durations not pluralized sufficiently (#3268) * Fix: Refresh schedule durations not pluralized sufficiently * Allows omitting single value number in durationHumanize (#3274) * Verify admin email address (#3267) * add an bit * prompt on homepage when user's email hasn't been verified * set e-mail as verified for new setups and invited users * copy &amp; paste invite links, it's time for verified e-mails! * default `is_invitation_pending` to false and actively set it to true when inviting users, so that existing users won't show &quot;Invitation Pending&quot; * fix tests that broke due to default is_invitation_pending value * treat admin's e-mail address as verified * add verification endpoint * send verification e-mail * Update client/app/components/empty-state/empty-state.html Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/authentication/account.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/handlers/authentication.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/templates/emails/verify.html Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/authentication/account.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/templates/verify.html Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/templates/emails/verify.txt Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * add link in case redirects are disabled * POSTing to /email_verification makes more sense than GETting /send_verification * avoid sending invitations when no_invite is passed along * Update client/app/pages/users/new.html Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * move e-mail verification prompt to home-page * get rid of redundant $scope * return JSON * flip is_email_verified's default value so that existing users do not show as not-verified * e-mail verification propmt isn't dangerous, it just wants to warn you * Scheduler tests (jest/enzyme) (#3269) * Setup enzyme and initial ScheduleDialog test * Added tests for each schedule setting * Added refreshOptions tests * Added count out-of-range tests * Added modal confirm/cancel tests * Fixed tests failing due to server timezone difference * Rebased to master * Pleasant alert-warning colors (#3276) * Pleasant alert-warning colors * Fix for json viewer primitive color * handlers: Fix post users (#3273) * Update Antd to latest version + fix tests (#3281) * Pin version of pyparsing (#3282) * Separate Bootstrap/Ant styling (#3279) * Separate Ant less dependency tree * Change order between variables and ant imports * Remove inc/variables from ant.less * Update input-height-base for antd * Set same input-color for Ant and Bootstrap * Dashboard Parameters (#2756) * getredash/redash#2641 Step 1: split Add Widget/Add Textbox buttons * Convert Add widget/textbox dialogs to React components * getredash/redash#2641 Step 2: Implement new dashboard parameters logic * Resolve conflicts and fix build errors * getredash/redash#2641 Refactoring and improve code quality * Add Edit parameter mappings dialog to the widget * getredash/redash#2641 Changes after code review * Use Ant's Select component instead on &lt;select&gt; tags * Fix Antd imports * Fix Antd imports * Fix Cannot read property 'getParametersDefs' of undefined * Fix widgets static params bugs (don't show input, don't init from URL) * Minor UI/UX fixes * Migrate DynamicForm to React (#3209) * create DynamicForm React component * Render fields based on target in DynamicForm * Add missing title property to fields * Fix style properties in DynamicForm * Render File fields in DynamicForm * Use React for middle component instead of Angular * Functional save button * Update label style * Render functional actions * Handle file inputs * Update render methods to fix code climate issues * Fix ant input number showing duplicate arrows * Update DynamicForm style to be vertical * Separate imports from antd in DynamicForm * Add Feedback Icons to DynamicForm * Change Action props on DynamicForm - use type and pullRight instead of class prop - update data sources and destinations pages accordingly * Remove setDefaults method from DynamicForm fields * Update antd version * Remove unnecessary class selectors * Remove another unnecessary class selector * Remove tree validations and introduce ParameterizedQuery (#3230) * Fix invitation pending for older invitations (#3298) * explicitly look for a False under details['is_invitation_pending'] and not any falsey result, to avoid locking out invitations which were created before the Pending Invitation feature was introduced. Solves https://github.com/getredash/redash/issues/3297 * test that old invites (that do not have any is_invitation_pending flag set in their details object) are still acceptable * Multifilter's dropdown cropped when visualization container is too small * Use None as &quot;not scheduled&quot; default value of a query (#3277) * Use null as the default scheduled value. * Don't serialize None to json, so we can use SQL is not null predicate. * Fix warning about unicode in tests * Handling empty query.schedule in UI (#3283) * Add migration to convert empty schedules to null and drop the not null contraint. * Update form text colors (#3296) * Create ant variables and update form colors * Remove less extension from imports in ant.less * Update font-weight for labels * Add percy snapshot for create data source page * Remove bold in labels only for checkboxes and radio buttons * Allow execution of highlighted subquery (#3288) * allow execution of selected subquery * fix query save while highlighted * don't modify queryText and update UI when running selected * code style and transition * Fix query selection execution background color * make naming consistent * override default integer/float formatting with environment variables (#3307) * Add regenerate function of user's API key (#3224) * Add regenerate function of user's API Key * Update client/app/pages/users/show.js Co-Authored-By: kyoshidajp &lt;claddvd@gmail.com&gt; * Remove unused error message * Refactoring: Inline temp * Update client/app/pages/users/show.js Co-Authored-By: kyoshidajp &lt;claddvd@gmail.com&gt; * Change action event of regenerate user API key * add wait time before percy data source page snapshot (#3320) * Fix an error of exporting dict value as Excel (#3323) * support for fetching all JQL results by way of pagination (#3304) * Use Ant's Paginator component; migrate SortIcon to React (#3317) * Textless query result endpoint (#3311) * add an endpoint for running a query by its id and (optional) parameters without having to provide the query text * check for access to query before running it * Add configuration for the Support probot. (#3327) * Remove link to roadmap (#3329) It's no longer maintained * Filtering out incompatible dashboard params (#3330) * Add: Uptycs query runner (#3319) * adding uptycs query_runner in redash * as per comment from Arik comment fixed the code * fixed function_name * fixed some indentation issues * fixed the indentation issue and taken out customer_id from secret * fixed the dependency of urllib3 * fixed the indententaton issue * remved the urllib3 from requirements * fixed the indentation issues * added the new square image for Uptycs. Removed unnecessary variable and made ssl as an option * fixed indentation issue * Renamed SSL to verify_ssl and also added verify_ssl validate in verify in missing places * Migrate PageHeader component to React (#3324) * Migrate PageHeader component to React * CR1 * Convert Angular services to CommonJS-style and use them in React components instead of injecting (#3331) * Refine Auth service: remove dead code and fix race condition * Export services in CommonJS style * Refine Users, Events and OfflineListener services * Refactor Notifications service - rewrite to CommonJS * Replace Angular service injection with imports in React components * Fix Footer tests * Events service -&gt; recordEvent function * CR1 * Allow query owners to hard-overwrite query content in case of overlap with other user (#2370) * Hard overwrite on conflict for query owners (re #283) * Use AlertDialog instead of custom global function. * Refine SettingsMenu service and &lt;settings-screen&gt; component (#3339) * Refine SettingsMenu service and &lt;settings-screen&gt; component * Rename services/settingsMenu file to match default export name * CR1 * Move BigQueryGCE to its own file (#3356) * Move BigQueryGCE to its own file * Add missing import * Add Percy Page Screenshots (#3338) * Add Percy Page Screenshots * Add missing space * WIP: Add dashboard details section for dashboard owner and more (#2934) Show dashboard creator on dashboard page * getredash/redash#3355 Widget params: Date/Date range value empty in static param input (#3357) * Refactor Policy and OrganizationStatus services (#3345) * Refactor Policy and OrganizationStatus services * Cypress tests: preset the admin API key to a static value (#3358) * Server-side parameter validation (#3315) * stop testing `collect_query_parameters`, it's an implementation detail * add tests for `missing_query_params` * rename SQLQuery -&gt; ParameterizedSqlQuery * rename sql_query.py to parameterized_query.py * split to parameterized queries and parameterized SQL queries, where parameterized queries only do templating and parameterized SQL queries add tree validation on top of it * move missing parameter detection to ParameterizedQuery * get rid of some old code * fix tests * set syntax to `custom` * revert the max-age-related refactoring * tree validations * BaseQueryRunner is no longer a factory for ParameterizedQuery, for now * add an endpoint for running a query by its id and (optional) parameters without having to provide the query text * adds parameter schema to ParameterizedQuery * adds parameter schema validation (currently for strings) * validate number parameters * validate date parameters * validate parameters on POST /api/queries/&lt;id&gt;/results * validate enum parameters * validate date range parameters * validate query-based dropdowns by preprocessing them at the handler level and converting them to a populated enum * change _is_date_range to be a tad more succinct * a single assignment with a `map` is sufficiently explanatory * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/handlers/query_results.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * build error message inside the error * support all types of numbers as number parameters * check for permissions when populating query-based dropdowns * check for access to query before running it * check for empty rows when populating query-based enums * don't bother loading query results if user doesn't have access * on unexpected parameter types * parameter schema default is a list, not a dictionary * remove redundant null guards * Frontend lint update (#3253) * client: Add lint command Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Override eslint rule object-curly-newline to keep current style Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Override eslint rule no-else-return to keep current style Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Fix eslint import/named Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: eslint-5 Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * codeclimate: Delete the old setting Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Downgrade eslint 5 to 4 in codeclimate Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: npx install-peerdeps --dev eslint-config-airbnb Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Enbale .jsx lint Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Set warn Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Fix lint indent, implicit-arrow-linebreak, lines-between-class-members Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Disable eslint operator-linebreak Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * Revert &quot;client: Downgrade eslint 5 to 4 in codeclimate&quot; This reverts commit f0fb0f005992a8b3c92eae505fcc2767b9d55266. * client: Fix react/button-has-type Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Disable an eslint rule react/jsx-one-expression-per-line Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * codeclimate: Disable no-multiple-empty-lines Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * client: Disable eslint react/destructuring-assignment Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * yandex_metrica: changed auth from params to headers (#3360) * Filename set when /results called directly (#3359) * filename set when /results called directly * /results filename changed from query name to id * Long line shortened * Fix: Escape button in tag edit modal (#3363) * Update CodeClimate configuration format to Version 2 (#3286) * codeclimate: Update format v2 * codeclimate: Ignore generated files * Fix: make ClickHouse password and username truly optional (#3362) * clickhouse optional password * clickhouse URL and user made optional * Migrate FavoritesControl component to React * Migrate TagsList component to React * CR1 * CR2 * Fix: Static param value not editable for Text/Number (#3369) * CR3 * Fix: static param text value is `[object Object]` (#3371) * Tune CodeClimate's config to make it less annoying (#3370) * Fix some incompatible dependencies (#3348) * Pin requests-oauthlib to work around incompatible deptree. * Update boto3/botocore to fix incompatible deptree. * Fix eslint errors * CR1 * Migrate EmptyState component to React (#3373) * Migrate EmptyState component to React * CR1 * CR2 * Widget param url prefix p to p_w (#3380) * Show disabled unpublished queries for alert and dashboard modals. (#3347) * BigQuery should correctly handle tmp tables that do not have a schema field. (#3382) * Alternative implementation: Step component * Bring back data sources step for non admins * No need to export Step * Refine implementation, fix 'shouldShow' condition, fix eslint warnings * Last refinements: * Update Step implementation to be easier to read. * Set some props to required to remove default value. * Fix Cypress E2E failing in CI * Fix Add datasource step; EmptyState.icon is optional * Migrate &quot;time ago&quot; components to React (#3385) * Replace &lt;am-time-ago&gt; (angular-moment) and &lt;rd-timer&gt; with React component * PropTypes: Moment validation * Increase polling interval * Refine component implementation * Add tooltip with formatted date/time * Refine component implementation * fix lint error - getDerivedStateFromProps should be placed after state (#3391) * Add archived queries section to queries list. (#2888) * Add archived queries section to queries list. * Refactor route building for list based controllers. This also fixes the dashboard empty state page. * Ignore to copy some files onto docker container (#3388) * Ignore to copy some files onto docker container Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * Dockerignore venv/ Signed-off-by: koooge &lt;koooooge@gmail.com&gt; * Make the logic around schedule['until'] easier to read (#3376) * [Widget Params] Migrated edit params + new widget dialog to Ant Modal (#3387) * Use textless endpoint for pristine queries (#3367) * use the textless endpoint (/api/queries/:id/results) for pristine queriest * Revert &quot;use the textless endpoint (/api/queries/:id/results) for pristine&quot; This reverts commit cd2cee77385ecf79efd2f1aa21fab0dd43943264. * move execution preparation to a different function, which will be soon reused * go to textless /api/queries/:id/results by default * let the query view decide if text or textless endpoint is needed * lint * Fix: Selected item in dropdown unreadable (#3398) * Fix: only login user when it's the current user. (#3396) Otherwise it would login the admin as the user... * Added pre-push hook (#3390) * [Widget Params] Switched parameter list to table style (all parts) (#3332) * [Widget Params] Split title and mapping editing * [Widget Params] Restyled source editing * [Widget Params] Switched parameter list to table style * Displaying different labels and help phrases when changing type Added link to knowledge base Fixed issue with existing param default select value * Add YAML support in QueryEditor (#3395) * Migrate Dashboards/Queries/Users list pages to React (#3381) * Refine existing implementation of dashboards/queries/users lists and a common base controller * Migrate common list page controller to React and refactor it's logic * Migrate Dashboard list page to React * Migrate Queries list page to React * Migrate Users list page to React * Remove react-timeago dependency * Use composition instead of inheritance * Refine implementation * Merge sidebar into single component * Refine column definitions * Use simple controller instead of React context * Refine implementation * Restore changes from getredash/redash#2888 * Tweak Users list page * Ability to render dynamically defined components * Tweak users list page * User list page for non-admins * Fix: ItemsTable ignores isAvailable field * Refine implementation * Refine implementation * Implement LiveItemsList as higher order component * Some fixes * Move some definitions to a better place * Some fixes * Refine components * Refine UsersList page * More comments for a god of comments * Fix wrong tables size on smaller screens * Tweak tables * Fix: cohorts get stuck when passing strings instead of numbers. (#3397) * Fix: cohorts get stuck when passing strings instead of numbers. Parse the value to get a number. * Use parseInt for stage * Remove redundant parseInt * Refactor TagsControl; fix TagsEditorModal animation (#3399) * Refactor TagsControl; fix TagsEditorModal animation * Update tooltip text Co-Authored-By: kravets-levko &lt;levko.ne@gmail.com&gt; * Update tooltip text Co-Authored-By: kravets-levko &lt;levko.ne@gmail.com&gt; * CR1 * [Bug fix] Few small bugs on Queries list page (#3402) * Link to query page * Sidebar menu item title: `Archive` -&gt; `Archived` * Whitespaces in empty state block * Coerce to moment when 'datetime' selected by user. (#3150) * Work around a resizing issue. (#3412) * Work around a resizing issue. Fix #3353. * Add comment to remove this when we delete Angular. Co-Authored-By: jezdez &lt;jannis@leidel.info&gt; * Show active and pending users separately (for admins) (#3400) * Fix: “Add TextBox” dialog not opening (#3414) * [Widget Params] Title edit fixes (#3413) * [Codebase Improvement] Refine dialog wrapper and use it for all existing dialogs (#3407) * [UI/UX Improvement] Use Ant's Button component on users list page (#3416) * Unify query based dropdown population (#3337) * stop testing `collect_query_parameters`, it's an implementation detail * add tests for `missing_query_params` * rename SQLQuery -&gt; ParameterizedSqlQuery * rename sql_query.py to parameterized_query.py * split to parameterized queries and parameterized SQL queries, where parameterized queries only do templating and parameterized SQL queries add tree validation on top of it * move missing parameter detection to ParameterizedQuery * get rid of some old code * fix tests * set syntax to `custom` * revert the max-age-related refactoring * tree validations * BaseQueryRunner is no longer a factory for ParameterizedQuery, for now * add an endpoint for running a query by its id and (optional) parameters without having to provide the query text * adds parameter schema to ParameterizedQuery * adds parameter schema validation (currently for strings) * validate number parameters * validate date parameters * validate parameters on POST /api/queries/&lt;id&gt;/results * validate enum parameters * validate date range parameters * validate query-based dropdowns by preprocessing them at the handler level and converting them to a populated enum * change _is_date_range to be a tad more succinct * a single assignment with a `map` is sufficiently explanatory * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/handlers/query_results.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * Update redash/utils/parameterized_query.py Co-Authored-By: rauchy &lt;omer@rauchy.net&gt; * build error message inside the error * support all types of numbers as number parameters * check for permissions when populating query-based dropdowns * check for access to query before running it * check for empty rows when populating query-based enums * don't bother loading query results if user doesn't have access * on unexpected parameter types * parameter schema default is a list, not a dictionary * fix a totally unrelated typo * remove redundant null guards * introduce /dropdown.json endpoint with dummy data * wire frontend to /dropdown.json * always return name/value combos from /dropdown.json * load actual data into /dropdown.json * pluck correct values for `name` and `value` * reuse dropdwon plucking logic in QueryResultResource * simplify _get_dropdown_values * when doing parameter validation, we only care about the value and not the display name * rename dropdown to dropdownOptions * move dropdown_values to utils/parameterized_query.py * stop converting queries to enums and encapsulate the work inside ParameterizedQuery (almost - /dropdown.json would still access the dropdown_values method) * re-order arguments by importance * test query parameter validation * tests for dropdown_values logic * remove `.json` suffix to the dropdown endpoint * allow `BaseResource` to handle JSON stuff * move _pluck_name_and_value outside its containing method * case-insensitive lookup when plucking name and value * separate concerns and simplify test isolation for `dropdown_values` * pick the default column according to the order specified in the query result columns attribute * use `current_org` instead of passing `org` * test that user has access to the query when calling the /dropdown endpoint * Added short modal specific styling (#3366) * Handle InterruptException in Athena query runnner like in the Presto query runner. (#3403) * Upgrade Sentry SDK (#3418) * replace raven with sentry-sdk * use sentry-sdk in celery * use sentry-sdk with flask * unify Flask and Celery initializations for Sentry * extract sentry stuff to own module * it's time for Sentry 0.7.2 * [Bug fix] Show query result footer only when there is a query result. (#3422) * Bug fix] Saving a new query removes reference to last query result (#3421) * Correctly test if the current query result is for the current query. * Serialize a new query with its visualizations. * [Feature] Alternative implementation of dashboard param title editing (#3417) * Enable remote debugging with ptvsd (#3419) * open port 3000 for remote debugging * add ptvsd * use port 5678 to avoid changes in VSCode's default config * attach to ptvsd * no need to wait for attach * actually, --debugger seems to be working * create a new docker entry point for remote debugging * alternative method to switch to debugging * Converted Share modal to Ant (#3424) * [Bug fix] Notifications randomly shown with visible page or not shown with inactive page (#3426) * [Bug fix] Query Parameters: don't save urlPrefix (#3427) * Pre-commit hook to run on modified files only (#3410) * Pre-commit hook to run on modified files only * Removed git add, fixed script dup * Removed pre-push, testing related files only in pre-commit * [Widget Params] Updated help url and tooltip (#3428) * send ip and user id to sentry (#3430) * Version update time ⏰ (#3429) * Version update time ⏰ * Need more ☕️ * HelpTrigger (#3431) * Moved to HelpTrigger * Moved share dialog “Learn more” to HelpTrigger * [Feature] Table visualization: Raise the upper limit of MAX_JSON_SIZE (#3310) * move constant value to clientConfig * change name maxJsonSize to tableCellMaxJSONSize * value from environment. default is 50000 * React version of UserEdit (#3354) * Update DynamicForm export * Move UserShow to users folder * Migrate User profile header and create DynamicForm for basic data * Update UserShow to use UserProfile prop * Add API Key input * Add handler to regenerate API Key button * Handle user profile save * Add readOnly prop to DynamicForm and begin disabled user behavior * Add Change Password Modal * Remove action buttons for disabled users * Add send password reset behavior * Add minLength and password comparison to Password Modal * Resend Invitation button * Add Convert User Info * Fix UserShow test * Some code updates * Add enable/disable user button * Add UserPolicy as an idea * Remove UserPolicy * Create Edit Profile spec * Move User profile screenshot to Edit Profile Spec * Add tests for saving user and changing password errors * CC is back :) - Fix trailing spaces * Add test for succesful password update * A few improvements from code review * Remove Toggle User button when seeing your own profile * Create InputWithCopy * Fix possible errors when network is off and improve Email not sent alert * Add default response object for $http possible errors * Changes in UserEdit - removed onClick from methods name - regenerate API Key now uses InputWithCopy - Password title added * Update UserEdit render behavior and styling - Password title changed to h5 - change rendering rules for actions - Password modal is now closed when password is changed - change DynamicForm readOnly to the fields and add hideSubmitButton * Create ChangePasswordDialog and update UserEdit * Fix possible console error * Remove password match assertion from spec * Fix typo * [Feature] Sharing disabled if dashboard has query params (#3439) * Fix: remove widgets when deleting a visualization. (#3423) Closes #3257. * remove the word &quot;type&quot; from error message, as enum out-of-range errors (#3449) have nothing to do with types. * Change: encrypt data source options. (#2970) * Change: encrypt data source options * Implement migration * HelpTrigger to open in drawer (#3436) * HelpTrigger to open in drawer * Fixed “typo” * Simplified version - removed postMessage * Changed some wording * Add support for Amazon ES service with IAM authentication (#3446) * Add support for Amazon ES service with IAM authentication * Add required dependency. * Fix: ScheduleDialog won't render for &quot;30 days&quot; interval with no time value (#3447) * HelpTrigger in header (#3457) * Moved component from services-&gt;components * Added help trigger to header * Reverted tooltip-anchor swap * Moved trigger location in html (to mirror saas) * Removed white space * Changed tooltip text to “Help” * [Codebase improvement] Refine ItemsList base component (previously LiveItemsList) (#3415) * Fixes to Percy (#3440) * Add check for repository url * Use CIRCLE_REPOSITORY_URL directly * Change percy waiting to be with resources instead of time * Add data sources types resource to Edit Data Source + eslint fixes * Separate Page Screenshots in different spec files * Version data - footer -&gt; header menu (#3458) * [Bug fix] Widget oblivious to updated parameter values (#3445) * Fix: timedelta values were not JSON serialized properly (#3463) . * Remove options NullPool does not support (#3460) * when working with a schema, fail in the case that there are parameters (#3452) which are not part of the schema * Fix: when max_age is None the handler fails (#3462) * Fix: JS Map needs a set call rather than assignment (#3464) * Fix: ParameterizedQuery: support for upper cases column names. (#3461) * Fix: ParameterizedQuery: support for upper cases column names. * Fix test name * avoid Flask debug error message about strict slashes (#3469) * support e-mail verification for multi org setups (#3468) * Help trigger dynamic component (#3472) * Provide default value for .pop to avoid KeyError exception (#3474) * monitor &quot;schemas&quot; queue to run refresh_schema (#3459) * monitor &quot;schemas&quot; queue to run refresh_schema `refresh_schema` tasks won't run because &quot;schemas&quot; queue isn't consumed with default settings. and it cause leaking redis storage, a &quot;schemas&quot; list is growing with time. this PR fix it, adds &quot;schemas&quot; queue to monitor by celery. * use scheduled_worker for &quot;schemas&quot; queue instead of &quot;adhoc_worker&quot; * Fix some flex layout issue (#3476) * Fix max-age issues on textless endpoint (#3477) * max_age should default to -1 * pass maxAge along to `execute` * Cleaner approach for _is_collection_a_view (#3113) * Fix collection fields retreival bug when Views are present in MongoDB * fixing _is_collection_a_view function * Update redash/query_runner/mongodb.py Co-Authored-By: jodevsa &lt;jodevsa@gmail.com&gt; * using options() instead of try/except on collstats to detect if a collection is a view * [Feature] Migrate Group List and Details pages to React (#3411) * [Feature, Tech debt] Improve list pages layout (#3482) * fix broken link in CONTRIBUTING.md (#3483) * Use series name as pie chart label (#3484) It was unconditionally using the column name; this uses the series name instead if specified in the chart editor. * Create PULL_REQUEST_TEMPLATE.md (#3485) * Fix update logo (#3489) * Fix prometheus query runner: get_schema and query range (#3471) * Pin SQLAlchemy-Utils version (#3490) Pin the version of SQLAlchemy-Utils following the discussion in #2970. * Add custom JSON encoder for PostgreSQL (#3442) To handle columns with [range types][1] and display them as a string custom JSON encoder for PostgreSQL was added. Merging this PR will fix issue #1764 [1]:https://www.postgresql.org/docs/9.3/rangetypes.html * Make sure Flask app created in Celery's worker process (#3465) * Make sure Flask app created in worker process * Add reference to GitHub issue * Update Percy token (#3492) * Fix DynamicForm ignoring default value for checkboxes (#3487) * Be more permissive when parameters are safe (#3383) * use the textless endpoint (/api/queries/:id/results) for pristine queriest * reverse conditional. not not is making me the headaches. * add ParameterizedQuery#is_safe with an inital naive implementation which treats any query with a text parameter as not safe. This will be remedied later when DB drivers will handle these parameters. * allow getting new query results even if user has only view permissions to the data source (given that the query is safe) * fix lint error - getDerivedStateFromProps should be placed after state * Revert &quot;use the textless endpoint (/api/queries/:id/results) for pristine&quot; This reverts commit cd2cee77385ecf79efd2f1aa21fab0dd43943264. * move execution preparation to a different function, which will be soon reused * go to textless /api/queries/:id/results by default * let the query view decide if text or textless endpoint is needed * allow safe queries to be executed in the UI even if the user has no permission to execute and create new query results * change `run_query`'s signature to accept a ParameterizedQuery instead of constructing it inside * use dict#get instead of a None guard * use ParameterizedQuery in queries handler as well * test that /queries/:id/results allows execution of safe queries even if user has view_only permissions * lint * raise HTTP 400 when receiving invalid parameter values. Fixes #3394 * remove unused methods * avoid cyclic imports by importing only when needed * verify that a ParameterizedQuery without any parameters is considered safe * introduce query.parameter_schema * encapsulate ParameterizedQuery creation inside Query * set invitation as not-pending in render_token_login_page only when (#3500) handling invites (as opposed to password reset links) * adding gevent worker in requirements.txt, adding some gunicorn config… (#3333) * adding gevent worker in requirements.txt, adding some gunicorn configurable parameters with defaults * reverting the change as it's going to be set via env variable(s) * Verify address when users change their e-mail (#3504) * re-verify e-mail address on change * send verification e-mail to the new address * Support AWS IAM profile for Amazon Elasticsearch (#3005) * LDAP Authentication. Create two envars REDASH_LDAP_USE_SSL and REDASH_LDAP_AUTH_BIND (#2776) * Add two new envars. REDASH_LDAP_USE_SSL which determines if the connection will use ssl and LDAP_AUTH_BIND which determines if the binding is SIMPLE or ANONYMOUS * Add use_ssl paremeter * Rename LDAP_AUTH_BIND to LDAP_AUTH_METHOD and modify LDAP_SSL using parse_boolean * Fix typo * import ANONYMOUS constant from ldap3 * Add NTLM authentication * Add comment to authentication method envar * [Feature] Migrate Alerts List Page to React (#3505) * Added &lt;QuerySelector /&gt; component (#3494) * Updated npm to support react hooks * Added &lt;QuerySelector /&gt; * Changed selectQuery to also clear, completed 2-&gt;3 dots in msg, avoiding setSearching on stale rejection. * Removed unused highlight lib * CircleCI build improvements (#3511) * Make sure master builds tarball/docker image only when backend and frontend tests pass. * Build a redash/preview image alongside redash/redash image. * Fix version variable * QuerySelector in Alert page (#3501) * Migrated query edit/add param dialog to React/AntD/Hooks (#3488) * Fixed navbar responsiveness (#3510) * Fixed navbar responsiveness * Adjustments so that logo should never hide * Fix verification_email endpoint when in MULTI_ORG mode (#3502) * append slug to /verification_email endpoint when in MULTI_ORG mode * Revert &quot;append slug to /verification_email endpoint when in MULTI_ORG mode&quot; This reverts commit 817fb034c4cbb396cf4dbfbe52d1f4890689ba6a. * fix for /email_verification in MULTI_ORG setups * Fix eslint error on AlertsList (#3518) * Moved widget and dashboard save logic out of dialog (#3522) * Migrated AddTextboxDialog to AntD (#3524) * Migrate User Pages to React (#3506) * Create React version for the EmailSettingsWarning * Migrate the Create User Page * Migrate UserProfile to React * Add /users/me to the routes (Percy ftw) * Fix UserShow test spec * Remove Error Messages component * Show invitation link if email server not setup (#3519) * return invite link to client if e-mail server is not set up * add a couple of tests to make sure invite links are only returned when neccessary * show invite link when e-mail is not configured * remove &quot;an e-mail has been sent&quot; when there's no e-mail configured * return invite_url in re-invites as well. Also refactor to reuse the code. * Use CreateUserDialog instead of Page * Render invite link on Resend Invitation click * Add email validation to DynamicForm * Fix EmailWarning position + update user list with user creation success * Fix console error on UserProfile * Redirect from /users/new + rename createUser -&gt; showCreateUserDialog * Use alert instead of toastr for user creation errors * Remove logic from CreateUserDialog * CR * Use Promise.reject instead of throw to avoid console error * Added UTC display to scheduler dialog (#3517) * [Refactor] Refine New user modal (#3529) * Add Hangouts Chat as alert destination (#3525) * Add support for Google Hangouts Chat as alert destination * Remove redundant imports * Remove code used for debugging * Fix pep8 warnings * Update redash/destinations/hangoutschat.py Add friendly name by separating type and description Co-Authored-By: pieter-venter &lt;pieterventer@geotab.com&gt; * Fix pep8 warnings. Rename image to match desitnation type. * Show message for unknown alert state in default color * Remove Flask-Admin. (#3532) * Make the &quot;celery&quot; queue the default instead of &quot;schema&quot; to stay backward-compatible. (#3534) Fix #3325. * Remove duplicate column information for late-binding views (#3537) Since the svv_columns system view supports them now https://docs.aws.amazon.com/redshift/latest/dg/r_SVV_COLUMNS.html * Remove docker-compose.production.yml in favor of setup/docker-compose.yml. (#3533) Fix #3251. * Param fix (#3528) * Name help text for date range only * Autofocus on name input * Form acts on enter key * Fixed range check * Fixed startsWith * Pin pymapd version to 0.7.1 (#3543) Newer versions dropped support for Python 2. Closes #3542. * Fix long tag labels breaking table layout (#3545) * [Bug fix] Wrong behavior when clicking table rows on list pages (#3540) * Update PULL_REQUEST_TEMPLATE.md (#3549) * Fix: order dashboard favorites (#3552) ## What type of PR is this? (check all applicable) - [x] Refactor - [x] Bug Fix ## Description Move favorites list handlers to their relevant modules (`redash.handlers.queries` and `redash.handlers.dashboards`) and applied `order_results` to dashboards. * Add: Docker entrypoint to do Celery healthchecks. (#3548) * Snowflake: add support for regions and enable by default (#3550) * Bring back Snowflake from its exile. * Snowflake: add support for regions. * Upgrade jest &amp; babel (#3405) * Download Query Result links: use query name for downloaded filename (#3559) * getredash/redash#3554 Download Query Result links: use query name for downloaded filename * CR1 * New Celery/Queries Execution Status API (#3057) * Remove QueryTaskTracker * Remove scheudling of cleanup_tasks * Add Celery introspection tools * First iteration of updating the admin API. * Show more details * Add option to skip building npm in Dockerfile * Show started_at * update the refresh schedule, as it's too fast * Update Celery monitor to report on all active tasks. * Update task parsing for new format * WIP: improved celery status screen * Fix property name. * Update counters * Update tab name * Update counters names * Move component to its own file and fix lint issues * Add migratin to remove Redis keys * Improve columns layout * Remove skip_npm_build arg as it's not used anymore. * Convert query from SQL to Python * Simplify column definition. * Show alert on error. * Create weekly-digest.yml * npm audit fixes (#3561) * [Bug fix] Handle errors on Group members, Group datasources and User profile pages (#3564) * Update Amazon Elasticsearch Service image (#3567) * Convert all dropdown values to strings to support parameter lookup (#3563) * convert all dropdown values to strings to support parameter lookup. solves #3562 * unicode all the way down * show correct default values in QueryBasedParameterInput by converting them to strings * Prevent blank edit-in-place value (#3557) * change the order of configuration of the Elasticsearch data source to (#3571) make sense * Fix webpack config to work with symlinks (#3573) * Append &quot;UTC&quot; to timestamp on embeds (in print view) (#3574) To communicate what timezone the timestamp is. * Fork query does not fork tables but instead adds default table (#3580) * getredash/redash#3572 Fork query does not fork tables but instead adds default table * Fix code style * CR1 * Add SAML scheme override env var (#2947) * Add SAML scheme override env var * Make it pretty, please the linter * goodbye, similar-code false positives. (#3578) * Fix for parameter mapping bug #3581 (#3582) * Fix for parameter mapping bug #3581 * Must run original snapshot with original dashboard params * Schema Viewer Drawer (#3291) * Process extra column metadata for a few sql-based data sources. * Add Table and Column metadata tables. * Periodically update table and column schema tables in a celery task. * Fetching schema returns data from table and column metadata tables. * Add tests for backend changes. * Front-end shows extra table metadata and uses new schema response. * Delete datasource schema data when deleting a data source. * Process and store data source schema when a data source is first created or after a migration. * Tables should have a unique name per datasource. * Addressing review comments. * Update migration file for mixins. * Appease PEP8 * Upgrade migration file for rebase. * Cascade delete. * Adding org_id * Remove redundant column and table prefixes. * Non-existing tables and columns should be filtered out on the server side not client side. * Fetching table samples should be optional and should happen in a separate task per table. * Allow users to force a schema refresh. * Use updated_at to help prune old schema metadata periodically. * Using settings.SCHEMAS_REFRESH_QUEUE * Added alt+enter key binding (#3479) * Cypress test - dashboard create/archive (#3565) * Revert &quot;Schema Viewer Drawer (#3291)&quot; (#3585) This reverts commit cb4d81d6ad7d113910ff6128431c2a63dff22215. * Widget title link not updated when parameter value changes (#3586) * Revert &quot;Add SAML scheme override env var (#2947)&quot; (#3587) This reverts commit 4768fd081eff108f4e830a30ef02d3ae088075c7. * update to latest stable version (#3588) * [Codebase improvement] Reuse handlers base require_fields (#3577) * [Bug fix] Update user list when an user is created (#3594) * Fix: accept integer values in dropdowns. (#3596) * Textbox testing - add, remove, edit (#3589) * Update v7 CHANGELOG and version (#3595) * Fix: triggers not created for queries.search_vector (#3634) * Prepared for deployment to Aptible * added processes to run in a Procfile * exposed port 5000 in Dockerfile * Fix: CircleCI release branch regex * Do not attempt to create dashboard.tags The `dashboards.tags` column is added manually to get the 969126bd800f migration to work. That in turn breaks the &quot;inline_tags&quot; migration, this commit fixes that. * Add ja-redash-specific documentation * Fix doc.md indentation * Correct the upgrade instructions Also, it turns out that you don't need to manually trigger `npm run build` - for some reason that is done automatically. * Update visualisations' colour palette - the default base colours use seaborn's default palette (https://seaborn.pydata.org/tutorial/color_palettes.html) - the extra colours were selected from the xkcd color survey (https://xkcd.com/color/rgb/) * Attempt to mitigate ImportError bytes_type * Fix some rebase issues</MESSAGE>
      <SHA>84f0f5ab99d70bbea05a9fa5ffd3de018b935554</SHA>
      <PATCHEDFILES>
        <FILE>.circleci/Dockerfile.cypress</FILE>
        <FILE>.circleci/config.yml</FILE>
        <FILE>.circleci/docker-compose.cypress.yml</FILE>
        <FILE>.circleci/docker_build</FILE>
        <FILE>.circleci/docker_tag</FILE>
        <FILE>.codeclimate.yml</FILE>
        <FILE>.dockerignore</FILE>
        <FILE>.github/PULL_REQUEST_TEMPLATE.md</FILE>
        <FILE>.github/support.yml</FILE>
        <FILE>.github/weekly-digest.yml</FILE>
        <FILE>CHANGELOG.md</FILE>
        <FILE>CONTRIBUTING.md</FILE>
        <FILE>Dockerfile</FILE>
        <FILE>LICENSE</FILE>
        <FILE>Makefile</FILE>
        <FILE>bin/docker-entrypoint</FILE>
        <FILE>client/.babelrc</FILE>
        <FILE>client/.eslintrc.js</FILE>
        <FILE>client/app/__tests__/enzyme_setup.js</FILE>
        <FILE>client/app/__tests__/mocks.js</FILE>
        <FILE>client/app/assets/images/db-logos/aws_es.png</FILE>
        <FILE>client/app/assets/images/db-logos/drill.png</FILE>
        <FILE>client/app/assets/images/db-logos/uptycs.png</FILE>
        <FILE>client/app/assets/images/destinations/hangouts_chat.png</FILE>
        <FILE>client/app/assets/images/destinations/slack.png</FILE>
        <FILE>client/app/assets/less/ant.less</FILE>
        <FILE>client/app/assets/less/inc/ant-variables.less</FILE>
        <FILE>client/app/assets/less/inc/base.less</FILE>
        <FILE>client/app/assets/less/inc/generics.less</FILE>
        <FILE>client/app/assets/less/inc/navbar.less</FILE>
        <FILE>client/app/assets/less/inc/variables.less</FILE>
        <FILE>client/app/assets/less/inc/visualizations/misc.less</FILE>
        <FILE>client/app/assets/less/main.less</FILE>
        <FILE>client/app/assets/less/redash/ant.less</FILE>
        <FILE>client/app/assets/less/redash/query.less</FILE>
        <FILE>client/app/assets/less/redash/redash-newstyle.less</FILE>
        <FILE>client/app/assets/less/redash/tags-control.less</FILE>
        <FILE>client/app/components/AutocompleteToggle.jsx</FILE>
        <FILE>client/app/components/BigMessage.jsx</FILE>
        <FILE>client/app/components/DateInput.jsx</FILE>
        <FILE>client/app/components/DateRangeInput.jsx</FILE>
        <FILE>client/app/components/DateTimeInput.jsx</FILE>
        <FILE>client/app/components/DateTimeRangeInput.jsx</FILE>
        <FILE>client/app/components/DialogWrapper.jsx</FILE>
        <FILE>client/app/components/DynamicComponent.jsx</FILE>
        <FILE>client/app/components/EditInPlace.jsx</FILE>
        <FILE>client/app/components/EditParameterSettingsDialog.jsx</FILE>
        <FILE>client/app/components/EmailSettingsWarning.jsx</FILE>
        <FILE>client/app/components/FavoritesControl.jsx</FILE>
        <FILE>client/app/components/Footer.jsx</FILE>
        <FILE>client/app/components/Footer.test.js</FILE>
        <FILE>client/app/components/HelpTrigger.jsx</FILE>
        <FILE>client/app/components/HelpTrigger.less</FILE>
        <FILE>client/app/components/InputWithCopy.jsx</FILE>
        <FILE>client/app/components/NoTaggedObjectsFound.jsx</FILE>
        <FILE>client/app/components/PageHeader.jsx</FILE>
        <FILE>client/app/components/Paginator.jsx</FILE>
        <FILE>client/app/components/ParameterMappingInput.jsx</FILE>
        <FILE>client/app/components/ParameterMappingInput.less</FILE>
        <FILE>client/app/components/ParameterValueInput.jsx</FILE>
        <FILE>client/app/components/PreviewCard.jsx</FILE>
        <FILE>client/app/components/QueryBasedParameterInput.jsx</FILE>
        <FILE>client/app/components/QueryEditor.css</FILE>
        <FILE>client/app/components/QueryEditor.jsx</FILE>
        <FILE>client/app/components/QuerySelector.jsx</FILE>
        <FILE>client/app/components/SelectItemsDialog.jsx</FILE>
        <FILE>client/app/components/SortIcon.jsx</FILE>
        <FILE>client/app/components/TagsList.jsx</FILE>
        <FILE>client/app/components/TimeAgo.jsx</FILE>
        <FILE>client/app/components/__snapshots__/Footer.test.js.snap</FILE>
        <FILE>client/app/components/admin/CeleryStatus.jsx</FILE>
        <FILE>client/app/components/alerts/alert-subscriptions/index.js</FILE>
        <FILE>client/app/components/app-header/app-header.css</FILE>
        <FILE>client/app/components/app-header/app-header.html</FILE>
        <FILE>client/app/components/app-header/index.js</FILE>
        <FILE>client/app/components/app-view/index.js</FILE>
        <FILE>client/app/components/dashboards/AddTextboxDialog.jsx</FILE>
        <FILE>client/app/components/dashboards/AddTextboxDialog.less</FILE>
        <FILE>client/app/components/dashboards/AddWidgetDialog.jsx</FILE>
        <FILE>client/app/components/dashboards/EditParameterMappingsDialog.jsx</FILE>
        <FILE>client/app/components/dashboards/add-widget-dialog.html</FILE>
        <FILE>client/app/components/dashboards/add-widget-dialog.js</FILE>
        <FILE>client/app/components/dashboards/add-widget-dialog.less</FILE>
        <FILE>client/app/components/dashboards/edit-dashboard-dialog.html</FILE>
        <FILE>client/app/components/dashboards/edit-dashboard-dialog.js</FILE>
        <FILE>client/app/components/dashboards/widget.html</FILE>
        <FILE>client/app/components/dashboards/widget.js</FILE>
        <FILE>client/app/components/dynamic-form.html</FILE>
        <FILE>client/app/components/dynamic-form.js</FILE>
        <FILE>client/app/components/dynamic-form/DynamicForm.jsx</FILE>
        <FILE>client/app/components/dynamic-form/dynamicFormHelper.js</FILE>
        <FILE>client/app/components/dynamic-table/default-cell/index.js</FILE>
        <FILE>client/app/components/dynamic-table/dynamic-table.html</FILE>
        <FILE>client/app/components/dynamic-table/index.js</FILE>
        <FILE>client/app/components/dynamic-table/json-cell/index.js</FILE>
        <FILE>client/app/components/dynamic-table/json-cell/json-view-interactive.less</FILE>
        <FILE>client/app/components/email-settings-warning/index.js</FILE>
        <FILE>client/app/components/empty-state/EmptyState.jsx</FILE>
        <FILE>client/app/components/empty-state/empty-state.html</FILE>
        <FILE>client/app/components/empty-state/empty-state.js</FILE>
        <FILE>client/app/components/error-messages.js</FILE>
        <FILE>client/app/components/favorites-control/index.js</FILE>
        <FILE>client/app/components/filters.html</FILE>
        <FILE>client/app/components/groups/CreateGroupDialog.jsx</FILE>
        <FILE>client/app/components/groups/DeleteGroupButton.jsx</FILE>
        <FILE>client/app/components/groups/DetailsPageSidebar.jsx</FILE>
        <FILE>client/app/components/groups/GroupName.jsx</FILE>
        <FILE>client/app/components/groups/ListItemAddon.jsx</FILE>
        <FILE>client/app/components/groups/edit-group-dialog.html</FILE>
        <FILE>client/app/components/groups/edit-group-dialog.js</FILE>
        <FILE>client/app/components/groups/group-name.js</FILE>
        <FILE>client/app/components/items-list/ItemsList.jsx</FILE>
        <FILE>client/app/components/items-list/classes/ItemsFetcher.js</FILE>
        <FILE>client/app/components/items-list/classes/ItemsSource.js</FILE>
        <FILE>client/app/components/items-list/classes/Paginator.js</FILE>
        <FILE>client/app/components/items-list/classes/Sorter.js</FILE>
        <FILE>client/app/components/items-list/classes/StateStorage.js</FILE>
        <FILE>client/app/components/items-list/components/EmptyState.jsx</FILE>
        <FILE>client/app/components/items-list/components/ItemsTable.jsx</FILE>
        <FILE>client/app/components/items-list/components/LoadingState.jsx</FILE>
        <FILE>client/app/components/items-list/components/Sidebar.jsx</FILE>
        <FILE>client/app/components/keywordBuilder.js</FILE>
        <FILE>client/app/components/layouts/ContentWithSidebar.jsx</FILE>
        <FILE>client/app/components/layouts/content-with-sidebar.less</FILE>
        <FILE>client/app/components/page-header/index.js</FILE>
        <FILE>client/app/components/page-header/page-header.html</FILE>
        <FILE>client/app/components/paginator.js</FILE>
        <FILE>client/app/components/parameter-input.html</FILE>
        <FILE>client/app/components/parameter-settings.html</FILE>
        <FILE>client/app/components/parameters.html</FILE>
        <FILE>client/app/components/parameters.js</FILE>
        <FILE>client/app/components/permissions-editor/index.js</FILE>
        <FILE>client/app/components/proptypes.js</FILE>
        <FILE>client/app/components/queries/ScheduleDialog.css</FILE>
        <FILE>client/app/components/queries/ScheduleDialog.jsx</FILE>
        <FILE>client/app/components/queries/ScheduleDialog.test.js</FILE>
        <FILE>client/app/components/queries/SchedulePhrase.jsx</FILE>
        <FILE>client/app/components/queries/__snapshots__/ScheduleDialog.test.js.snap</FILE>
        <FILE>client/app/components/queries/alert-unsaved-changes.js</FILE>
        <FILE>client/app/components/queries/query-results-link.js</FILE>
        <FILE>client/app/components/queries/schedule-dialog.html</FILE>
        <FILE>client/app/components/queries/schedule-dialog.js</FILE>
        <FILE>client/app/components/queries/schema-browser.js</FILE>
        <FILE>client/app/components/queries/visualization-embed.html</FILE>
        <FILE>client/app/components/queries/visualization-embed.js</FILE>
        <FILE>client/app/components/query-based-parameter.html</FILE>
        <FILE>client/app/components/query-link.js</FILE>
        <FILE>client/app/components/rd-time-ago.js</FILE>
        <FILE>client/app/components/rd-timer.js</FILE>
        <FILE>client/app/components/settings-screen.html</FILE>
        <FILE>client/app/components/settings-screen.js</FILE>
        <FILE>client/app/components/sort-icon.js</FILE>
        <FILE>client/app/components/tab-nav/index.js</FILE>
        <FILE>client/app/components/tags-control/DashboardTagsControl.jsx</FILE>
        <FILE>client/app/components/tags-control/EditTagsDialog.jsx</FILE>
        <FILE>client/app/components/tags-control/ModelTagsControl.jsx</FILE>
        <FILE>client/app/components/tags-control/QueryTagsControl.jsx</FILE>
        <FILE>client/app/components/tags-control/TagsControl.jsx</FILE>
        <FILE>client/app/components/tags-control/TagsEditorModal.jsx</FILE>
        <FILE>client/app/components/tags-list/tags-list.html</FILE>
        <FILE>client/app/components/tags-list/tags-list.js</FILE>
        <FILE>client/app/components/transclude-replace.js</FILE>
        <FILE>client/app/components/type-picker.html</FILE>
        <FILE>client/app/components/type-picker.js</FILE>
        <FILE>client/app/components/users/ChangePasswordDialog.jsx</FILE>
        <FILE>client/app/components/users/CreateUserDialog.jsx</FILE>
        <FILE>client/app/components/users/UserEdit.jsx</FILE>
        <FILE>client/app/components/users/UserShow.jsx</FILE>
        <FILE>client/app/components/users/UserShow.test.js</FILE>
        <FILE>client/app/components/users/__snapshots__/UserShow.test.js.snap</FILE>
        <FILE>client/app/config/dashboard-grid-options.js</FILE>
        <FILE>client/app/config/index.js</FILE>
        <FILE>client/app/directives/autofocus.js</FILE>
        <FILE>client/app/directives/compare-to.js</FILE>
        <FILE>client/app/directives/index.js</FILE>
        <FILE>client/app/directives/resizable-toggle.js</FILE>
        <FILE>client/app/directives/resize-event.js</FILE>
        <FILE>client/app/directives/title.js</FILE>
        <FILE>client/app/filters/datetime.js</FILE>
        <FILE>client/app/filters/index.js</FILE>
        <FILE>client/app/filters/markdown.js</FILE>
        <FILE>client/app/index.js</FILE>
        <FILE>client/app/lib/list-ctrl.js</FILE>
        <FILE>client/app/lib/pagination/index.js</FILE>
        <FILE>client/app/lib/pagination/live-paginator.js</FILE>
        <FILE>client/app/lib/settings-menu.js</FILE>
        <FILE>client/app/lib/utils.js</FILE>
        <FILE>client/app/pages/admin/outdated-queries/outdated-queries.html</FILE>
        <FILE>client/app/pages/admin/status/index.js</FILE>
        <FILE>client/app/pages/admin/status/status.html</FILE>
        <FILE>client/app/pages/admin/tasks/index.js</FILE>
        <FILE>client/app/pages/admin/tasks/tasks.html</FILE>
        <FILE>client/app/pages/alert/alert.html</FILE>
        <FILE>client/app/pages/alert/index.js</FILE>
        <FILE>client/app/pages/alerts-list/alerts-list.html</FILE>
        <FILE>client/app/pages/alerts-list/index.js</FILE>
        <FILE>client/app/pages/alerts/AlertsList.jsx</FILE>
        <FILE>client/app/pages/dashboards/DashboardList.jsx</FILE>
        <FILE>client/app/pages/dashboards/DashboardListEmptyState.jsx</FILE>
        <FILE>client/app/pages/dashboards/ShareDashboardDialog.jsx</FILE>
        <FILE>client/app/pages/dashboards/dashboard-list.html</FILE>
        <FILE>client/app/pages/dashboards/dashboard-list.js</FILE>
        <FILE>client/app/pages/dashboards/dashboard.html</FILE>
        <FILE>client/app/pages/dashboards/dashboard.js</FILE>
        <FILE>client/app/pages/dashboards/dashboard.less</FILE>
        <FILE>client/app/pages/dashboards/public-dashboard-page.html</FILE>
        <FILE>client/app/pages/dashboards/public-dashboard-page.js</FILE>
        <FILE>client/app/pages/dashboards/share-dashboard.html</FILE>
        <FILE>client/app/pages/data-sources/list.js</FILE>
        <FILE>client/app/pages/data-sources/show.html</FILE>
        <FILE>client/app/pages/data-sources/show.js</FILE>
        <FILE>client/app/pages/destinations/list.js</FILE>
        <FILE>client/app/pages/destinations/show.html</FILE>
        <FILE>client/app/pages/destinations/show.js</FILE>
        <FILE>client/app/pages/groups/GroupDataSources.jsx</FILE>
        <FILE>client/app/pages/groups/GroupMembers.jsx</FILE>
        <FILE>client/app/pages/groups/GroupsList.jsx</FILE>
        <FILE>client/app/pages/groups/data-sources.html</FILE>
        <FILE>client/app/pages/groups/data-sources.js</FILE>
        <FILE>client/app/pages/groups/list.html</FILE>
        <FILE>client/app/pages/groups/list.js</FILE>
        <FILE>client/app/pages/groups/show.html</FILE>
        <FILE>client/app/pages/groups/show.js</FILE>
        <FILE>client/app/pages/home/home.html</FILE>
        <FILE>client/app/pages/home/index.js</FILE>
        <FILE>client/app/pages/queries-list/QueriesList.jsx</FILE>
        <FILE>client/app/pages/queries-list/QueriesListEmptyState.jsx</FILE>
        <FILE>client/app/pages/queries-list/index.js</FILE>
        <FILE>client/app/pages/queries-list/queries-list.html</FILE>
        <FILE>client/app/pages/queries/add-to-dashboard.js</FILE>
        <FILE>client/app/pages/queries/query.html</FILE>
        <FILE>client/app/pages/queries/source-view.js</FILE>
        <FILE>client/app/pages/queries/view.js</FILE>
        <FILE>client/app/pages/query-snippets/edit.js</FILE>
        <FILE>client/app/pages/query-snippets/list.js</FILE>
        <FILE>client/app/pages/settings/organization.html</FILE>
        <FILE>client/app/pages/settings/organization.js</FILE>
        <FILE>client/app/pages/users/UserProfile.jsx</FILE>
        <FILE>client/app/pages/users/UsersList.jsx</FILE>
        <FILE>client/app/pages/users/index.js</FILE>
        <FILE>client/app/pages/users/list.html</FILE>
        <FILE>client/app/pages/users/list.js</FILE>
        <FILE>client/app/pages/users/new.html</FILE>
        <FILE>client/app/pages/users/new.js</FILE>
        <FILE>client/app/pages/users/settings.less</FILE>
        <FILE>client/app/pages/users/show.html</FILE>
        <FILE>client/app/pages/users/show.js</FILE>
        <FILE>client/app/services/alert-dialog.js</FILE>
        <FILE>client/app/services/alert-subscription.js</FILE>
        <FILE>client/app/services/alert.js</FILE>
        <FILE>client/app/services/auth.js</FILE>
        <FILE>client/app/services/dashboard.js</FILE>
        <FILE>client/app/services/data-source.js</FILE>
        <FILE>client/app/services/destination.js</FILE>
        <FILE>client/app/services/events.js</FILE>
        <FILE>client/app/services/getTags.js</FILE>
        <FILE>client/app/services/group.js</FILE>
        <FILE>client/app/services/http.js</FILE>
        <FILE>client/app/services/keyboard-shortcuts.js</FILE>
        <FILE>client/app/services/navigateTo.js</FILE>
        <FILE>client/app/services/ng.js</FILE>
        <FILE>client/app/services/notifications.js</FILE>
        <FILE>client/app/services/offline-listener.js</FILE>
        <FILE>client/app/services/organization-status.js</FILE>
        <FILE>client/app/services/organizationStatus.js</FILE>
        <FILE>client/app/services/policy.js</FILE>
        <FILE>client/app/services/policy/DefaultPolicy.js</FILE>
        <FILE>client/app/services/policy/index.js</FILE>
        <FILE>client/app/services/query-result.js</FILE>
        <FILE>client/app/services/query-snippet.js</FILE>
        <FILE>client/app/services/query.js</FILE>
        <FILE>client/app/services/recordEvent.js</FILE>
        <FILE>client/app/services/settingsMenu.js</FILE>
        <FILE>client/app/services/user.js</FILE>
        <FILE>client/app/services/widget.js</FILE>
        <FILE>client/app/visualizations/box-plot/index.js</FILE>
        <FILE>client/app/visualizations/chart/chart-editor.html</FILE>
        <FILE>client/app/visualizations/chart/index.js</FILE>
        <FILE>client/app/visualizations/chart/plotly/index.js</FILE>
        <FILE>client/app/visualizations/chart/plotly/utils.js</FILE>
        <FILE>client/app/visualizations/choropleth/index.js</FILE>
        <FILE>client/app/visualizations/cohort/index.js</FILE>
        <FILE>client/app/visualizations/map/index.js</FILE>
        <FILE>client/app/visualizations/sankey/index.js</FILE>
        <FILE>cypress/cypress.js</FILE>
        <FILE>cypress/integration/dashboard/dashboard_spec.js</FILE>
        <FILE>cypress/integration/data-source/create_data_source_spec.js</FILE>
        <FILE>cypress/integration/data-source/edit_data_source_spec.js</FILE>
        <FILE>cypress/integration/destination/create_destination_spec.js</FILE>
        <FILE>cypress/integration/group/edit_group_spec.js</FILE>
        <FILE>cypress/integration/group/group_list_spec.js</FILE>
        <FILE>cypress/integration/query/create_query_spec.js</FILE>
        <FILE>cypress/integration/settings/organization_settings_spec.js</FILE>
        <FILE>cypress/integration/user/edit_profile_spec.js</FILE>
        <FILE>cypress/integration/user/login_spec.js</FILE>
        <FILE>cypress/integration/user/user_list_spec.js</FILE>
        <FILE>cypress/support/commands.js</FILE>
        <FILE>docker-compose.production.yml</FILE>
        <FILE>docker-compose.yml</FILE>
        <FILE>migrations/versions/640888ce445d_.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
