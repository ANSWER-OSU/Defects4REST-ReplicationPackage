<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30362</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/30362</ISSUEURL>
  <TITLE>An user with user-&gt;rights-&gt;projet-&gt;lire can see task time from other user on all projects</TITLE>
  <DESCRIPTION>### Bug An user with `user-&gt;rights-&gt;projet-&gt;lire` can see task time from other user on all project just by clicking on the cross to clear filter on page `projet/tasks/time.php` ### Dolibarr Version 19.0.2 ### Environment PHP _No response_ ### Environment Database _No response_ ### Steps to reproduce the behavior and expected behavior 1. Create a project 2. Create some tasks on this project 3. Add some time spent on those tasks 4. Create an external user 5. Add this User as contact of this project 6. Add only permission `user-&gt;rights-&gt;projet-&gt;lire` to this external user 7. Go to `projet/tasks/time.php` and clear filter by clicking on the cross ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Doc</MESSAGE>
    <SHA>dd4089348a372ef67ff2fb15c2200f4202b6d6e6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #30362 Fix an user with user-&gt;rights-&gt;projet-&gt;lire can see task time from other user on all project</MESSAGE>
      <SHA>54512bb21517b6e8a58222cd1c8caea6751f1420</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/projet/tasks/time.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX #30362 Fix an user with user-&gt;rights-&gt;projet-&gt;lire can see task time from other user on all project (#30363) Conflicts: htdocs/projet/tasks/time.php</MESSAGE>
      <SHA>23eeabe4768b3d8d08dac59448e6689d852076df</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/projet/class/project.class.php</FILE>
        <FILE>htdocs/projet/tasks/time.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
