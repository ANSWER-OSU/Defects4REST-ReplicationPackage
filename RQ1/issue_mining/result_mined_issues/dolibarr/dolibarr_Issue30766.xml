<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>30766</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/30766</ISSUEURL>
  <TITLE>Extra field “Can Always Be Edited” Setting Not Working as Expected</TITLE>
  <DESCRIPTION>&lt;img width=&quot;1233&quot; alt=&quot;Screenshot 2024-08-26 at 5 11 27 PM&quot; src=&quot;https://github.com/user-attachments/assets/28a5572b-b4f7-4fe5-9eda-6a04946af445&quot;&gt; &lt;img width=&quot;1232&quot; alt=&quot;Screenshot 2024-08-26 at 5 11 03 PM&quot; src=&quot;https://github.com/user-attachments/assets/a8e70147-ba44-4ded-ba20-6c6069015d20&quot;&gt; &lt;img width=&quot;1253&quot; alt=&quot;Screenshot 2024-08-26 at 5 10 10 PM&quot; src=&quot;https://github.com/user-attachments/assets/1fd31885-9542-456f-8262-3bb55e5ece37&quot;&gt; ### Bug I’m experiencing an issue with the “Can always be edited” setting for extra fields in Dolibarr. Despite this option being unchecked, I am still able to edit the values of these extra fields even when the status is not set to “Draft.” This behavior is inconsistent with the expected functionality, where the extra field should only be editable when the status is “Draft” and the “Can always be edited” option is unchecked. ### Dolibarr Version 19.0.2 ### Environment PHP _No response_ ### Environment Database Mysql ### Steps to reproduce the behavior and expected behavior 1. Go to the module where extra fields are used (e.g., Knowledge management). 2. Create an extra field and make sure the “Can always be edited” option is unchecked. 3. Create a record in the knowledge management and validate it 4. Try editing the extra field value without setting the record back to draft 5. its editable! ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>86</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: missing hook printFieldListOption (#32006)</MESSAGE>
    <SHA>de8d705eebe9499f787d82f3da9df08095e9024f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #30766 Extra field Can Always Be Edited (#31876) * fix alwayseditable * Update extrafields.class.php * Update extrafields.class.php * Update extrafields.class.php * enhance fix alwayseditable * fix phan</MESSAGE>
      <SHA>f71bb45bd7aea050a95bb91d55b96cbd95c8da33</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/class/commonobject.class.php</FILE>
        <FILE>htdocs/core/class/extrafields.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #30766 Extra field Can Always Be Edited (#31876) * fix alwayseditable * Update extrafields.class.php * Update extrafields.class.php * Update extrafields.class.php * enhance fix alwayseditable * fix phan</MESSAGE>
      <SHA>914ed1b18cc1c388b1b9bd45982d43ec7c3dc432</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/class/commonobject.class.php</FILE>
        <FILE>htdocs/core/class/extrafields.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
