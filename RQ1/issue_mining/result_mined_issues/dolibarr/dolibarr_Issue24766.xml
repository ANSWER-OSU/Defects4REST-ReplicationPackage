<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24766</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/24766</ISSUEURL>
  <TITLE>Bug - ODT - Supplier orders</TITLE>
  <DESCRIPTION>### Bug ODT generation does not take into account : {object_date_commande} {object_options_xxx} --&gt; Extrafields on supplier orders. ### Environment Version 16.x ### Environment OS Debian ### Environment Web server Apache2 ### Environment PHP 7.4 ### Environment Database MySQL ### Environment URL(s) _No response_ ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior Create an extrafields on a supplier order : http://xxx/admin/supplierorder_extrafields.php Select ODT template from the admin pannel : http://xxx/admin/supplier_order.php Create a new supplier order Access supplier order : http://xxx/fourn/commande/card.php?id=xxx Generate a document from the ODT template ### Attached files An exemple of an ODT template causing the issue : [example_supplier_order.odt](https://github.com/Dolibarr/dolibarr/files/11472153/example_supplier_order.odt) (extrafield 'date_commande_extended' should be created before using this template)</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>27</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix regression</MESSAGE>
    <SHA>88175964f9519bd7341fe379244416e4dec69397</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #24766 ODT - Supplier orders</MESSAGE>
      <SHA>397b3ee5cae61b0d52b351b9c3f0c2712ec678da</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/class/commondocgenerator.class.php</FILE>
        <FILE>htdocs/core/modules/supplier_order/doc/doc_generic_supplier_order_odt.modules.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #24766 ODT - Supplier orders - mod ODT Doc Template</MESSAGE>
      <SHA>28ebd3a3239789c89e8bc6f1672c185b56f564d8</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/install/doctemplates/supplier_orders/template_supplier_order.odt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #25051 from vmaury/Fix_24766_Odt_Supplier Fix #24766 odt supplier</MESSAGE>
      <SHA>02c6766a92268a638eb964b4093936db2c9d2121</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/class/commondocgenerator.class.php</FILE>
        <FILE>htdocs/core/modules/supplier_order/doc/doc_generic_supplier_order_odt.modules.php</FILE>
        <FILE>htdocs/install/doctemplates/supplier_orders/template_supplier_order.odt</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
