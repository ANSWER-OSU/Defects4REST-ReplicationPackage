<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>24355</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/24355</ISSUEURL>
  <TITLE>Update Contract Line : discount is not updated</TITLE>
  <DESCRIPTION>### Bug Update contract line : price_ht (subprice with discount) is not updated. To update a contract line, function update() is used instead of updateline() function ### Environment Version 17.0 ### Environment OS linux ### Environment Web server _No response_ ### Environment PHP php 8.1 ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior Actual behavior : if I update a contract line, only subprice is updated Expected behavior : if I update a contract line, subprice and price_ht must be updated ### Steps to reproduce the behavior - In a contract, edit the subprice of a line with a discount - In database, check the price_ht ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>13</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '16.0' of git@github.com:Dolibarr/dolibarr.git into 17.0</MESSAGE>
    <SHA>3af71d5deda3f18cb0f5362c0e0588f6ff832b47</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #24355 Update price with discount</MESSAGE>
      <SHA>6e93503898950038d4bf44223cc123e4bf23d5f2</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/contrat/card.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #24471 from simnandez/17.0 Fix #24355 Update price with discount</MESSAGE>
      <SHA>5737d604fd936b590bb72b6e56716788337e9e3d</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/contrat/card.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
