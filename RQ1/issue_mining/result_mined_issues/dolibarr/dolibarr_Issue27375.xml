<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>27375</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/27375</ISSUEURL>
  <TITLE>dol_eval - Invalid Regex replacement</TITLE>
  <DESCRIPTION>### Bug Phan reports: ```text PhanPluginInvalidPregRegexReplacement: Call to \preg_replace was passed an invalid replacement reference '$1' to pattern '/^!?[a-zA-Z0-9_]+\\(/' ``` The match expressions do not have a group, so '$1' does not exist - '$0' probably exists. The intention of the replacement is not clear with limited analysis so I leave it up to someone more familiar with the code to determine the proper fixes for these 4 lines: https://github.com/Dolibarr/dolibarr/blame/f45f5c3291b060bdd25df3777b5957a5e5e00317/htdocs/core/lib/functions.lib.php#L9615-L9616 https://github.com/Dolibarr/dolibarr/blame/f45f5c3291b060bdd25df3777b5957a5e5e00317/htdocs/core/lib/functions.lib.php#L9642-L9643 ### Environment Version 19.0 upto develop included ### Environment OS _No response_ ### Environment Web server _No response_ ### Environment PHP _No response_ ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>22</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch '19.0' of git@github.com:Dolibarr/dolibarr.git into 19.0</MESSAGE>
    <SHA>3bb3a8d6ed35a6cbbef47088570bab36ac9c22f5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #27375</MESSAGE>
      <SHA>75df3bc24d446d638ba271adf9119bfade3a09e6</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/lib/functions.lib.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
