<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>25884</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/25884</ISSUEURL>
  <TITLE>Bad user ID (object id) reassingment on CREATE user [SOLVED]</TITLE>
  <DESCRIPTION>### Bug On Dolibarr 18, when creating a new user (i.e., when object=NULL), I noticed an issue at the top of the `/user/card.php` file where the `$id` value is being overwritten with: ``` if (empty($id)) { $id = $user-&gt;id; } ``` While this might make sense in certain scenarios, it shouldn't reassign the value when creating a new user. In this case, this re-assignment is causing that Dolibarr LOAD EXTRAFIELDS VALUES of the logged user (me when creating a new user)!! A more suitable condition might be: ``` if (empty($id) &amp;&amp; $action!='create') { $id = $user-&gt;id; } ``` - Note 1: I've tested this minor change, and it worked well. @eldy, could you please incorporate this change into the code? I've checked the develop-branch, and it hasn't been fixed yet. - Note 2: this conditional re-assignment doesn't exist on Dolibarr 17 branch ! ### Environment Version 18.0 ### Environment OS _No response_ ### Environment Web server _No response_ ### Environment PHP _No response_ ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix dispatch tab on reception (no way to change batch number once set)</MESSAGE>
    <SHA>e31cdbe297b79aa90ea36997975b599a4daec755</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #25884</MESSAGE>
      <SHA>81921b9906544e7fbc52bd05c01fe44c675a2c71</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/user/card.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
