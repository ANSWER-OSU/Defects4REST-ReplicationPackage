<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>32765</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/32765</ISSUEURL>
  <TITLE>JS Error: Uncaught TypeError: Cannot read properties of undefined (reading 'submitter') on function printCommonFooter()</TITLE>
  <DESCRIPTION>### Bug When a &quot;Mandatory Form Field&quot; is defined for purchase order; happen two things: 1- Mandatory fields defined of type INPUT does not being mandatory 2- The auto update when change vendor select, stops working ### Dolibarr Version 20.0.3 ### Environment PHP 8.1.31 ### Environment Database 11.4.4-MariaDB ### Steps to reproduce the behavior and expected behavior 1. Set **Wait until a key is pressed before loading content of Project combo list** on Module Project Setup to value 2 ![Image](https://github.com/user-attachments/assets/712e7a7d-cf08-41fe-8aed-1a2b2be4b97a) 2. Define a mandory field for purchase order; &gt; Setup -&gt; Default values/filters/sorting -&gt; Mandatory form fields ![Image](https://github.com/user-attachments/assets/7255b382-c8bd-4801-95ba-8d12eedc00f4) **Relative URL =** fourn/commande/card.php?action=create **Field =** projectid 3. On Commerce create new purchase order &gt; Commerce -&gt; New Order 4. Select Vendor ![Image](https://github.com/user-attachments/assets/5ae53030-d652-4012-9cf2-2902f3412bed) When vendor is selected a error is registred on console log ![Image](https://github.com/user-attachments/assets/823be59f-6289-48a9-be26-cf015da88683) 5. Let Project empty 6. Press CREATE DRAFT button Instead of create a draft document, the vendor info is refreshed; that should be refreshed on selecting vendor 7. Let Project empty 8. Press CREATE DRAFT again to create the draft document, but the mandatory field &quot;Project&quot; does not checked and remains empty ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #32737 from hregis/fix_20_avoid_warnings_php FIX #32736 + avoid php warning</MESSAGE>
    <SHA>cd186f4d8e346f70b79fdcbf75be5edfd5a9c60f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #32765 JS Error: Uncaught TypeError FIX #32765 JS Error: Uncaught TypeError</MESSAGE>
      <SHA>f649f59cb9258bc7695938d761eeb60839499506</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/lib/functions.lib.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #32766 from PsyCrow-code/patch-1 FIX #32765 JS Error: Uncaught TypeError</MESSAGE>
      <SHA>5568734d1ea4e528ac4c1acaf4a6ee96e2a6dd91</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/lib/functions.lib.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
