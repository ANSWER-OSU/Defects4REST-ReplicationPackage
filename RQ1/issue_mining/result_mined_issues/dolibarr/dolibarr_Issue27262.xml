<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>27262</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/27262</ISSUEURL>
  <TITLE>Object of class User could not be converted to string in .../htdocs/fourn/class/fournisseur.facture-rec.class.php</TITLE>
  <DESCRIPTION>### Bug While generating recurrent invoice in Dolibarr 18.0.4 AH01071: Got error 'PHP message: PHP Fatal error: Uncaught Error: Object of class User could not be converted to string in .../htdocs/fourn/class/fournisseur.facture-rec.class.php:1330 Stack trace: #0 .../htdocs/cron/class/cronjob.class.php(1290): FactureFournisseurRec-&gt;createRecurringInvoices() #1 .../htdocs/cron/card.php(105): Cronjob-&gt;run_jobs('...') #2 {main} thrown in .../htdocs/fourn/class/fournisseur.facture-rec.class.php on line 1330', referer: https://.../cron/card.php?action=execute&amp;token=...&amp;id=3&amp;securitykey=... ### Environment Version 18.0.4 ### Environment OS (Synology) Linux 3.2.101 #42962 SMP PREEMPT Fri Mar 24 00:27:46 CST 2023 i686 ### Environment Web server Apache/2.4.54 ### Environment PHP php 7.4.30 ### Environment Database MariaDB 5.5.5-10.3.32-MariaDB ### Environment URL(s) cron/card.php?action=execute ### Expected and actual behavior Generate recurrent invoice without error ### Steps to reproduce the behavior Started recurrent invoice generation fomr ### Attached files cron/list.php?leftmenu=admintools&amp;idmenu=15701 Not sure how to reproduce it - the issue seems to be with User to string conversion.</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #27169 from Thomas905/fix/searchthirdpartydon FIX : search by thirdparty in don list</MESSAGE>
    <SHA>0181267b3cf16a3ee193cd65ba7e15a4fd897214</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #27262 Recurrent invoice - user to string conversion</MESSAGE>
      <SHA>b221ff35b2b11de7cb7edb663ad537a375c5eef9</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/fourn/class/fournisseur.facture-rec.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #27263 from mdeweerd/fix/user-to-string FIX #27262 Recurrent invoice - user to string conversion</MESSAGE>
      <SHA>1d361467689a69b1bc3ef7c014587becdf3004d3</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/fourn/class/fournisseur.facture-rec.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
