<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>33169</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/33169</ISSUEURL>
  <TITLE>Anyone can cancel vacation requests?</TITLE>
  <DESCRIPTION>### Bug A user with rights to read all vacation requests can cancel requests of other users. ### Dolibarr Version 20.0.4 ### Environment PHP 7.3 ### Environment Database MariaDB 10.3.39 ### Steps to reproduce the behavior and expected behavior Here are the rights of my user : ![Image](https://github.com/user-attachments/assets/22688afa-6212-42b5-a9f9-2fc1cf15b38b) And here is a vacation request for someone that is not me, and for whom I am not the hierarchical superior : ![Image](https://github.com/user-attachments/assets/ce5b9791-4b5e-4cc1-baa2-4082abe82198) I tested this with other profiles (with the same rights) and it's the same. I also tested on an old version (18.0.4) and it's the same. Is this intended? Is there any other right that might have an impact on this? ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>14</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update pgsql.class.php - function num_rows (#33358) to avoid error when $resultset = null or false Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
    <SHA>b500efd6ffe2b19159e0e279d1ec266f23a0563f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX #33169 Anyone can cancel vacation requests (#33343) * fix anyone can cancel * Fix cancel button visibility based on user permissions * fix --------- Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
      <SHA>881b5eb6314b9f58876c1ff249aa0515a392d032</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/holiday/card.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
