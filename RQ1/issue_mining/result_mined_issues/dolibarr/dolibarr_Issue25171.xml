<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>25171</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/25171</ISSUEURL>
  <TITLE>no function to retrieve contacts of a societe</TITLE>
  <DESCRIPTION>### Bug I mark this as a bug even it's not a real one, even it seems to be I wanted in one of my custom modules to retrieve all contacts of a societe I naturaly tried to use `$societe-&gt;list_contact(-1, &quot;external', ...);` but even if the societe do have some, no one has been retrieved. The reason : for external contacts, `list_contact` is only looking in `llx_socpeople` table, but, only for societe contacts, these are stored in `llx_societe_contacts` table `llx_societe_contacts` has very a similary structure as `llx_element_contacts`, except for the unique key 'element_id, fk_c_type_contact, fk_socpeople' which is absent of llx_societe_contacts (a same societe can have several contacts of same types). And I looked every where in the code, there is no function to retrieve all contacts (by code) of a societe. I suggest 2 ways to correct this : - delete the unique key in llx_element_contacts, and store societe contacts in this table. If so, no need to modify generic list_contact method - modify generic list_contact method, so that when searching for external societe contacts, it select in llx_societe_contacts table. I'll happy to hear some comments about this ! ### Environment Version all ### Environment OS _No response_ ### Environment Web server _No response_ ### Environment PHP _No response_ ### Environment Database _No response_ ### Environment URL(s) _No response_ ### Expected and actual behavior _No response_ ### Steps to reproduce the behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge branch 'develop' of git@github.com:Dolibarr/dolibarr.git into develop</MESSAGE>
    <SHA>5781555913ae2b3061bf4f296163bf879a174728</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix #25171 : add a function in Societe class to retrieve contacts of a societe</MESSAGE>
      <SHA>c57fcdb7ece57104d9d8b189d900bc439433cb3a</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/societe/class/societe.class.php</FILE>
        <FILE>htdocs/theme/eldy/global.inc.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #25171 : add a function in Societe class to retrieve contacts of a societe</MESSAGE>
      <SHA>58e6ce7f637a3eb0afeb25b69c61e0582425dd89</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/societe/class/societe.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #25171 : add method getContacts in Societe class to retrieve contacts of a societe</MESSAGE>
      <SHA>3e9af3ad8bd5e87efcda33b13d4f2fa0b4760c20</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/societe/class/societe.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #25171 : add method getContacts in Societe class to retrieve contacts of a societe</MESSAGE>
      <SHA>f63737a018fb511329864c8009453a438d9bd69c</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/core/triggers/interface_20_modWorkflow_WorkflowManager.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #25181 from vmaury/Fix_25171_societe_contacts NEW #25171 : add a function in Societe class to retrieve contacts of â€¦</MESSAGE>
      <SHA>f48fa01a5e8f960f5667dab91f0c55c356a2ae3d</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/societe/class/societe.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
