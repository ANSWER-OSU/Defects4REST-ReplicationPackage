<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>33949</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/33949</ISSUEURL>
  <TITLE>BUG: default value not changed when updating an extrafield using the API</TITLE>
  <DESCRIPTION>### Bug BUG: the default value is not changed when updating an extrafield Did a PUT to this API endpoint `/api/index.php/setup/extrafields/projet/call_to_action` with these request_data ``` { &quot;type&quot;: &quot;varchar&quot;, &quot;label&quot;: &quot;Call_to_action&quot;, &quot;size&quot;: &quot;26&quot;, &quot;default&quot;: &quot;Begin Registration&quot;, &quot;unique&quot;: &quot;0&quot;, &quot;required&quot;: &quot;0&quot;, &quot;pos&quot;: &quot;160&quot;, &quot;alwayseditable&quot;: &quot;0&quot;, &quot;list&quot;: &quot;1&quot;, &quot;printable&quot;: &quot;0&quot;, &quot;totalizable&quot;: &quot;0&quot; } ``` But if you then do a GET to this API endpoint `http://localhost:22180/api/index.php/setup/extrafields/projet/call_to_action` and I get this reply where the default value is null ``` { &quot;projet&quot;: { &quot;call_to_action&quot;: { &quot;id&quot;: &quot;521&quot;, &quot;type&quot;: &quot;varchar&quot;, &quot;label&quot;: &quot;Call_to_action&quot;, &quot;size&quot;: &quot;26&quot;, &quot;elementtype&quot;: &quot;projet&quot;, &quot;default&quot;: null, &quot;computed&quot;: null, &quot;unique&quot;: &quot;0&quot;, &quot;required&quot;: &quot;0&quot;, &quot;param&quot;: &quot;&quot;, &quot;pos&quot;: &quot;160&quot;, &quot;alwayseditable&quot;: &quot;0&quot;, &quot;perms&quot;: null, &quot;list&quot;: &quot;1&quot;, &quot;printable&quot;: &quot;0&quot;, &quot;totalizable&quot;: &quot;0&quot;, &quot;langs&quot;: null, &quot;help&quot;: null, &quot;css&quot;: null, &quot;cssview&quot;: null, &quot;csslist&quot;: null, &quot;fk_user_author&quot;: &quot;2&quot;, &quot;fk_user_modif&quot;: &quot;2&quot;, &quot;datec&quot;: &quot;2025-04-22 18:38:09&quot;, &quot;tms&quot;: &quot;2025-04-22 18:38:09&quot; } } } ``` ### Dolibarr Version 22.0.0-alpha ### Environment PHP official docker devel image version ### Environment Database mariadb latest ### Steps to reproduce the behavior and expected behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fix webhook_history database (#33889) * Fix webhook_history database * add error meesage</MESSAGE>
    <SHA>de99ce364779281a8df3884786ec29ed5fdb396c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>FIX BUG: default value not changed when updating an extrafield #33949 Update can now change default value for extrafields and fixes #33949</MESSAGE>
      <SHA>c663c919bf8e08e772f95ddcd2ddf7647526c624</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/api/class/api_setup.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>FIX BUG: default value not changed when updating an extrafield using API #33949 (#33950) * FIX BUG: default value not changed when updating an extrafield #33949 Update can now change default value for extrafields and fixes #33949 * Also use $default in updateExtrafields The previous commit changed postExtrafields, but that is okay, because both needs to be changed --------- Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
      <SHA>9142dbb4d25ed33d36b3ac101280ae19aeebd24c</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/api/class/api_setup.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
