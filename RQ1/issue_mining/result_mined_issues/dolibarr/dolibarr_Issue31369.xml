<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>31369</ISSUENO>
  <ISSUEURL>https://github.com/Dolibarr/dolibarr/issues/31369</ISSUEURL>
  <TITLE>Bug: date_solde not taken when creating a bank account via API</TITLE>
  <DESCRIPTION>### Bug Version: 20.0.1 Hello, I'm able to create a bank account via API but although initialising a solde value works, initialising a date_solde doesn't. This results in having the solde initial with the date of today, always. ![image](https://github.com/user-attachments/assets/b3b4cece-6d25-4c35-b275-ca908f722561) I looked at the code in `/htdocs/compta/bank/class/api_bankaccounts.class.php` And at line 172 I have `$account-&gt;date_solde = time();` I checked that hardcoding setting $account-&gt;date_solde to some value have the desired effect. So the problem is that instead of retrieving date_solde from the API call, it always set $account-&gt;date_solde to the date of right now I replaced `$account-&gt;date_solde = time();` by ``` if (isset($request_data['date_solde'])) { $account-&gt;date_solde = $this-&gt;_checkValForAPI('date_solde', $request_data['date_solde'], $account); } else { $account-&gt;date_solde = time(); } ``` Then it works properly ### Dolibarr Version 20.0.1 ### Environment PHP _No response_ ### Environment Database _No response_ ### Steps to reproduce the behavior and expected behavior _No response_ ### Attached files _No response_</DESCRIPTION>
  <REPONAME>dolibarr</REPONAME>
  <TIMEDIFFERENCEDAYS>11</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add a tick on payment ok page</MESSAGE>
    <SHA>235d23a2b2161679c9791deaeca4aa7bdc8a414b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Bug fix #31369 date_solde not taken into account when sent through API</MESSAGE>
      <SHA>ff1311c8fd6540cf1ad74c49a1f87937860622c9</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/bank/class/api_bankaccounts.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Bug fix #31369 date_solde not taken into account when sent through API (#31490) * Bug fix #31369 date_solde not taken into account when sent through API * Move $account-&gt;date_solde = time() above --------- Co-authored-by: mikael &lt;mikael@expevelidv751.expertinet.net&gt; Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
      <SHA>e8f7237c63d6f7e69521d7e0a621a8c10daa1f32</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/bank/class/api_bankaccounts.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Bug fix #31369 date_solde not taken into account when sent through API (#31490) * Bug fix #31369 date_solde not taken into account when sent through API * Move $account-&gt;date_solde = time() above --------- Co-authored-by: mikael &lt;mikael@expevelidv751.expertinet.net&gt; Co-authored-by: Laurent Destailleur &lt;eldy@destailleur.fr&gt;</MESSAGE>
      <SHA>d55f90b460e8488facf9bb286574937de3dd180b</SHA>
      <PATCHEDFILES>
        <FILE>htdocs/compta/bank/class/api_bankaccounts.class.php</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
