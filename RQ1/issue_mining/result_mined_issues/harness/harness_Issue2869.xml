<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2869</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2869</ISSUEURL>
  <TITLE>nil pointer dereference on linter</TITLE>
  <DESCRIPTION>**log** ```bash {&quot;arch&quot;:&quot;amd64&quot;,&quot;build&quot;:46,&quot;level&quot;:&quot;error&quot;,&quot;machine&quot;:&quot;ip-192-168-123-142.ap-northeast-1.compute.internal&quot;,&quot;msg&quot;:&quot;runner: unexpected panic: runtime error: invalid memory address or nil pointer dereference&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;pipeline&quot;:&quot;api-gateway-k8s&quot;,&quot;repo&quot;:&quot;iftechio/api-gateway-k8s&quot;,&quot;stage&quot;:1,&quot;stage-id&quot;:6438,&quot;time&quot;:&quot;2019-11-05T09:15:03Z&quot;} goroutine 1 [running]: runtime/debug.Stack(0x1, 0x1, 0x1) /usr/local/go/src/runtime/debug/stack.go:24 +0x9d runtime/debug.PrintStack() /usr/local/go/src/runtime/debug/stack.go:16 +0x22 github.com/drone/drone/operator/runner.(*Runner).Run.func1(0xc0006d67a0) /drone/src/operator/runner/runner.go:134 +0xa1 panic(0x11e3740, 0x1da0110) /usr/local/go/src/runtime/panic.go:679 +0x1b2 github.com/drone/drone-yaml/yaml/linter.checkPipeline(0xc0004bea80, 0x0, 0x0, 0xc0008cd9c0) /go/pkg/mod/github.com/drone/drone-yaml@v1.2.3-0.20190902155851-ad8ad9816fbf/yaml/linter/linter.go:80 +0x1ac github.com/drone/drone-yaml/yaml/linter.Lint(0x1521dc0, 0xc0004bea80, 0xc00040e400, 0x8, 0xc0006d7260) /go/pkg/mod/github.com/drone/drone-yaml@v1.2.3-0.20190902155851-ad8ad9816fbf/yaml/linter/linter.go:54 +0x337 github.com/drone/drone/operator/runner.(*Runner).Run(0xc0004b4600, 0x154ec40, 0xc00030ba80, 0x1926, 0x0, 0x0) /drone/src/operator/runner/runner.go:234 +0x185a main.main() ``` **recurrent** When using starlark, during the step creation phase, a function returns null incorrectly. ```py def make_pipeline(ctx): return { 'kind': 'pipeline', 'name': 'xxx', 'steps': [ get_null(), ... ] } ``` In the web page, the build has been in the Pending state, so I looked at the log and found this problem. fix in [drone-yaml#55](https://github.com/drone/drone-yaml/pull/55)</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [CDE-332]: upsert gitspaces infraprovider (#2909) * feat: [CDE-332]: lint issues * feat: [CDE-332]: upsert infraprovider resources</MESSAGE>
    <SHA>8a28d1b04bae3a2dace94da8f3223a9d45f8d301</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [PIPE-21976]: add flattened directory listing (#2869) * remove unused parameter * updated open api to include flatten_driectories param * add flattened directory listing</MESSAGE>
      <SHA>d79a1a290c5aa4688c1c125b6545792b443cc86f</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/repo/content_get.go</FILE>
        <FILE>app/api/handler/repo/content_get.go</FILE>
        <FILE>app/api/openapi/repo.go</FILE>
        <FILE>app/api/request/git.go</FILE>
        <FILE>app/services/capabilities/list_files.go</FILE>
        <FILE>git/api/fs.go</FILE>
        <FILE>git/api/match_files.go</FILE>
        <FILE>git/api/tree.go</FILE>
        <FILE>git/tree.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
