<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>842</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/842</ISSUEURL>
  <TITLE>How to deploy the committed application in the drone if the drone is running as a docker container</TITLE>
  <DESCRIPTION>Recently, i have learned a lot about the drone, now on my digitalocean server I install the drone as a docker container followed by this article https://www.digitalocean.com/community/tutorials/how-to-perform-continuous-integration-testing-with-drone-io-on-coreos-and-docker , and the drone can get my node.js code commits from github and run the tests successfully. However, when the tests is running over, I want to use the committed code to build a image, run this image into a app container which links to other database containers. However, as I mentioned, my drone is running in a docker container, so the issues come as. 1. in the yml document has several docker commands to start the containers in the host environment. - docker ps -a - docker start ce9e 7b84 9a9f a755 firstly docker command could not be found, secondly I think the docker in the container could not control the docker process in the host environment. 1. the committed code is in /var/cache/drone/src/github.com/helxsz/food in the container environment, and in the host environment there is no code found, given these issues, I am wondering what is the purpose of running the drone in the docker container apart from doing the tests. is it a bad practice to run the drone in the docker container, should it be to run the drone directly in the host environment.</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[code-1136] diff api for pullreq (#825)</MESSAGE>
    <SHA>5418dd77ef4de5e0f5347a6f4e80026cfdebb6e3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>store PR commit count in the DB (#842)</MESSAGE>
      <SHA>03b33aca77eb1530639e8919b0773812cf51a27c</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/pullreq/merge.go</FILE>
        <FILE>app/api/controller/pullreq/pr_find.go</FILE>
        <FILE>app/api/controller/repo/diff.go</FILE>
        <FILE>app/services/pullreq/handlers_branch.go</FILE>
        <FILE>app/services/pullreq/handlers_mergeable.go</FILE>
        <FILE>app/store/database/migrate/postgres/0037_alter_pullreq_add_commit_count.down.sql</FILE>
        <FILE>app/store/database/migrate/postgres/0037_alter_pullreq_add_commit_count.up.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0037_alter_pullreq_add_commit_count.down.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0037_alter_pullreq_add_commit_count.up.sql</FILE>
        <FILE>app/store/database/pullreq.go</FILE>
        <FILE>types/pullreq.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
