<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>726</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/726</ISSUEURL>
  <TITLE>port is dropped during gitlab auth</TITLE>
  <DESCRIPTION>I'm trying to run gitlab and drone on same host but different ports. Problem is the auth to gitlab on port (8888) is being dropped for the port that drone is using (8000) func (r *Gitlab) GetHost() string { uri, _ := url.Parse(r.url) return uri.Host } http://10.0.0.242:8000/api/auth/gitlab.com</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: [code-1099]: fix rbac perms on webhook and branch protection pages (#801)</MESSAGE>
    <SHA>bd5437515c61c1bd2c230976057f8aa20712ec72</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[maint] gitrpc package removed (#726)</MESSAGE>
      <SHA>67f560874d5c77d013e96e07a318a20253dd2f57</SHA>
      <PATCHEDFILES>
        <FILE>Dockerfile</FILE>
        <FILE>Makefile</FILE>
        <FILE>app/api/controller/check/check_report.go</FILE>
        <FILE>app/api/controller/check/controller.go</FILE>
        <FILE>app/api/controller/check/wire.go</FILE>
        <FILE>app/api/controller/pullreq/comment_create.go</FILE>
        <FILE>app/api/controller/pullreq/controller.go</FILE>
        <FILE>app/api/controller/pullreq/file_view_add.go</FILE>
        <FILE>app/api/controller/pullreq/mapper.go</FILE>
        <FILE>app/api/controller/pullreq/merge.go</FILE>
        <FILE>app/api/controller/pullreq/pr_commits.go</FILE>
        <FILE>app/api/controller/pullreq/pr_create.go</FILE>
        <FILE>app/api/controller/pullreq/pr_find.go</FILE>
        <FILE>app/api/controller/pullreq/pr_state.go</FILE>
        <FILE>app/api/controller/pullreq/review_submit.go</FILE>
        <FILE>app/api/controller/pullreq/wire.go</FILE>
        <FILE>app/api/controller/repo/blame.go</FILE>
        <FILE>app/api/controller/repo/commit.go</FILE>
        <FILE>app/api/controller/repo/content_get.go</FILE>
        <FILE>app/api/controller/repo/content_paths_details.go</FILE>
        <FILE>app/api/controller/repo/controller.go</FILE>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/create_branch.go</FILE>
        <FILE>app/api/controller/repo/create_commit_tag.go</FILE>
        <FILE>app/api/controller/repo/delete.go</FILE>
        <FILE>app/api/controller/repo/delete_branch.go</FILE>
        <FILE>app/api/controller/repo/delete_tag.go</FILE>
        <FILE>app/api/controller/repo/diff.go</FILE>
        <FILE>app/api/controller/repo/get_branch.go</FILE>
        <FILE>app/api/controller/repo/get_commit.go</FILE>
        <FILE>app/api/controller/repo/get_commit_divergences.go</FILE>
        <FILE>app/api/controller/repo/git_info_refs.go</FILE>
        <FILE>app/api/controller/repo/git_service_pack.go</FILE>
        <FILE>app/api/controller/repo/list_branches.go</FILE>
        <FILE>app/api/controller/repo/list_commit_tags.go</FILE>
        <FILE>app/api/controller/repo/list_commits.go</FILE>
        <FILE>app/api/controller/repo/merge_check.go</FILE>
        <FILE>app/api/controller/repo/pipeline_generate.go</FILE>
        <FILE>app/api/controller/repo/raw.go</FILE>
        <FILE>app/api/controller/repo/wire.go</FILE>
        <FILE>app/api/controller/util.go</FILE>
        <FILE>app/api/middleware/logging/logging.go</FILE>
        <FILE>app/api/openapi/repo.go</FILE>
        <FILE>app/api/usererror/translate.go</FILE>
        <FILE>app/pipeline/commit/gitness.go</FILE>
        <FILE>app/pipeline/commit/wire.go</FILE>
        <FILE>app/pipeline/file/gitness.go</FILE>
        <FILE>app/pipeline/file/wire.go</FILE>
        <FILE>app/services/codecomments/migrator.go</FILE>
        <FILE>app/services/codecomments/migrator_test.go</FILE>
        <FILE>app/services/codecomments/wire.go</FILE>
        <FILE>app/services/codeowners/service.go</FILE>
        <FILE>app/services/codeowners/service_test.go</FILE>
        <FILE>app/services/codeowners/wire.go</FILE>
        <FILE>app/services/exporter/repository.go</FILE>
        <FILE>app/services/exporter/wire.go</FILE>
        <FILE>app/services/importer/pipelines.go</FILE>
        <FILE>app/services/importer/repository.go</FILE>
        <FILE>app/services/importer/wire.go</FILE>
        <FILE>app/services/pullreq/handlers_branch.go</FILE>
        <FILE>app/services/pullreq/handlers_file_viewed.go</FILE>
        <FILE>app/services/pullreq/handlers_head_ref.go</FILE>
        <FILE>app/services/pullreq/handlers_mergeable.go</FILE>
        <FILE>app/services/pullreq/service.go</FILE>
        <FILE>app/services/pullreq/wire.go</FILE>
        <FILE>app/services/webhook/handler_branch.go</FILE>
        <FILE>app/services/webhook/service.go</FILE>
        <FILE>app/services/webhook/types.go</FILE>
        <FILE>app/services/webhook/wire.go</FILE>
        <FILE>cli/server/config.go</FILE>
        <FILE>cli/server/server.go</FILE>
        <FILE>cli/server/system.go</FILE>
        <FILE>cmd/gitness/wire.go</FILE>
        <FILE>cmd/gitness/wire_gen.go</FILE>
        <FILE>errors/status.go</FILE>
        <FILE>errors/stderr.go</FILE>
        <FILE>git/adapter.go</FILE>
        <FILE>git/adapter/adapter.go</FILE>
        <FILE>git/adapter/adapter_test.go</FILE>
        <FILE>git/adapter/blame.go</FILE>
        <FILE>git/adapter/blame_test.go</FILE>
        <FILE>git/adapter/blob.go</FILE>
        <FILE>git/adapter/branch.go</FILE>
        <FILE>git/adapter/commit.go</FILE>
        <FILE>git/adapter/config.go</FILE>
        <FILE>git/adapter/diff.go</FILE>
        <FILE>git/adapter/env.go</FILE>
        <FILE>git/adapter/errors.go</FILE>
        <FILE>git/adapter/gogit.go</FILE>
        <FILE>git/adapter/http.go</FILE>
        <FILE>git/adapter/last_commit_cache.go</FILE>
        <FILE>git/adapter/mapping.go</FILE>
        <FILE>git/adapter/match_files.go</FILE>
        <FILE>git/adapter/merge.go</FILE>
        <FILE>git/adapter/paths_details.go</FILE>
        <FILE>git/adapter/ref.go</FILE>
        <FILE>git/adapter/repo.go</FILE>
        <FILE>git/adapter/shared_repo.go</FILE>
        <FILE>git/adapter/submodule.go</FILE>
        <FILE>git/adapter/tag.go</FILE>
        <FILE>git/adapter/tree.go</FILE>
        <FILE>git/adapter/vars.go</FILE>
        <FILE>git/adapter/wire.go</FILE>
        <FILE>git/blame.go</FILE>
        <FILE>git/blob.go</FILE>
        <FILE>git/branch.go</FILE>
        <FILE>git/check/branch.go</FILE>
        <FILE>git/check/branch_test.go</FILE>
        <FILE>git/commit.go</FILE>
        <FILE>git/common.go</FILE>
        <FILE>git/context.go</FILE>
        <FILE>git/diff.go</FILE>
        <FILE>git/diff/diff.go</FILE>
        <FILE>git/enum/entry.go</FILE>
        <FILE>git/enum/hunk_headers.go</FILE>
        <FILE>git/enum/merge.go</FILE>
        <FILE>git/enum/ref.go</FILE>
        <FILE>git/env.go</FILE>
        <FILE>git/errors.go</FILE>
        <FILE>git/hash/aggregate_xor.go</FILE>
        <FILE>git/hash/aggregate_xor_test.go</FILE>
        <FILE>git/hash/git.go</FILE>
        <FILE>git/hash/hash.go</FILE>
        <FILE>git/hash/source.go</FILE>
        <FILE>git/hash/source_test.go</FILE>
        <FILE>git/http.go</FILE>
        <FILE>git/hunk.go</FILE>
        <FILE>git/interface.go</FILE>
        <FILE>git/kuberesolver.go</FILE>
        <FILE>git/mapping.go</FILE>
        <FILE>git/match_files.go</FILE>
        <FILE>git/merge.go</FILE>
        <FILE>git/operations.go</FILE>
        <FILE>git/params.go</FILE>
        <FILE>git/parser/diff_cut.go</FILE>
        <FILE>git/parser/diff_cut_test.go</FILE>
        <FILE>git/parser/diff_headers.go</FILE>
        <FILE>git/parser/diff_headers_test.go</FILE>
        <FILE>git/parser/hunk.go</FILE>
        <FILE>git/path.go</FILE>
        <FILE>git/pipeline.go</FILE>
        <FILE>git/push_remote.go</FILE>
        <FILE>git/ref.go</FILE>
        <FILE>git/repo.go</FILE>
        <FILE>git/service.go</FILE>
        <FILE>git/shared.go</FILE>
        <FILE>git/sort.go</FILE>
        <FILE>git/storage/local.go</FILE>
        <FILE>git/storage/storage.go</FILE>
        <FILE>git/storage/wire.go</FILE>
        <FILE>git/stream.go</FILE>
        <FILE>git/submodule.go</FILE>
        <FILE>git/tag.go</FILE>
        <FILE>git/tempdir/file.go</FILE>
        <FILE>git/tree.go</FILE>
        <FILE>git/types/errors.go</FILE>
        <FILE>git/types/hunk.go</FILE>
        <FILE>git/types/types.go</FILE>
        <FILE>git/upload.go</FILE>
        <FILE>git/validate.go</FILE>
        <FILE>git/wire.go</FILE>
        <FILE>gitrpc/branch.go</FILE>
        <FILE>gitrpc/client.go</FILE>
        <FILE>gitrpc/commit.go</FILE>
        <FILE>gitrpc/config.go</FILE>
        <FILE>gitrpc/diff.go</FILE>
        <FILE>gitrpc/enum/ref.go</FILE>
        <FILE>gitrpc/errors.go</FILE>
        <FILE>gitrpc/internal/files/file.go</FILE>
        <FILE>gitrpc/internal/gitea/errors.go</FILE>
        <FILE>gitrpc/internal/middleware/error.go</FILE>
        <FILE>gitrpc/internal/middleware/log.go</FILE>
        <FILE>gitrpc/internal/service/blame.go</FILE>
        <FILE>gitrpc/internal/service/blob.go</FILE>
        <FILE>gitrpc/internal/service/branch.go</FILE>
        <FILE>gitrpc/internal/service/commit.go</FILE>
        <FILE>gitrpc/internal/service/diff.go</FILE>
        <FILE>gitrpc/internal/service/errors.go</FILE>
        <FILE>gitrpc/internal/service/http.go</FILE>
        <FILE>gitrpc/internal/service/mapping.go</FILE>
        <FILE>gitrpc/internal/service/match_files.go</FILE>
        <FILE>gitrpc/internal/service/merge.go</FILE>
        <FILE>gitrpc/internal/service/operations.go</FILE>
        <FILE>gitrpc/internal/service/operations_test.go</FILE>
        <FILE>gitrpc/internal/service/push.go</FILE>
        <FILE>gitrpc/internal/service/repo.go</FILE>
        <FILE>gitrpc/internal/service/submodule.go</FILE>
        <FILE>gitrpc/internal/service/tree.go</FILE>
        <FILE>gitrpc/internal/service/upload.go</FILE>
        <FILE>gitrpc/internal/slices/slice.go</FILE>
        <FILE>gitrpc/internal/streamio/stream.go</FILE>
        <FILE>gitrpc/log_interceptor.go</FILE>
        <FILE>gitrpc/mapping.go</FILE>
        <FILE>gitrpc/merge.go</FILE>
        <FILE>gitrpc/operations.go</FILE>
        <FILE>gitrpc/pipeline.go</FILE>
        <FILE>gitrpc/proto/blame.proto</FILE>
        <FILE>gitrpc/proto/diff.proto</FILE>
        <FILE>gitrpc/proto/http.proto</FILE>
        <FILE>gitrpc/proto/merge.proto</FILE>
        <FILE>gitrpc/proto/operations.proto</FILE>
        <FILE>gitrpc/proto/push.proto</FILE>
        <FILE>gitrpc/proto/ref.proto</FILE>
        <FILE>gitrpc/proto/repo.proto</FILE>
        <FILE>gitrpc/proto/shared.proto</FILE>
        <FILE>gitrpc/push_remote.go</FILE>
        <FILE>gitrpc/ref.go</FILE>
        <FILE>gitrpc/repo.go</FILE>
        <FILE>gitrpc/rpc/blame.pb.go</FILE>
        <FILE>gitrpc/rpc/blame_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/diff.pb.go</FILE>
        <FILE>gitrpc/rpc/diff_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/http.pb.go</FILE>
        <FILE>gitrpc/rpc/http_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/merge.pb.go</FILE>
        <FILE>gitrpc/rpc/merge_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/operations.pb.go</FILE>
        <FILE>gitrpc/rpc/operations_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/push.pb.go</FILE>
        <FILE>gitrpc/rpc/push_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/ref.pb.go</FILE>
        <FILE>gitrpc/rpc/ref_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/repo.pb.go</FILE>
        <FILE>gitrpc/rpc/repo_grpc.pb.go</FILE>
        <FILE>gitrpc/rpc/shared.pb.go</FILE>
        <FILE>gitrpc/server/config.go</FILE>
        <FILE>gitrpc/server/cron/clean_slate_data.go</FILE>
        <FILE>gitrpc/server/cron/clean_slate_data_test.go</FILE>
        <FILE>gitrpc/server/cron/manager.go</FILE>
        <FILE>gitrpc/server/cron/manager_test.go</FILE>
        <FILE>gitrpc/server/http.go</FILE>
        <FILE>gitrpc/server/http_log.go</FILE>
        <FILE>gitrpc/server/server.go</FILE>
        <FILE>gitrpc/server/wire.go</FILE>
        <FILE>gitrpc/smarthttp.go</FILE>
        <FILE>gitrpc/tag.go</FILE>
        <FILE>gitrpc/upload.go</FILE>
        <FILE>go.mod</FILE>
        <FILE>go.sum</FILE>
        <FILE>store/database/util.go</FILE>
        <FILE>types/config.go</FILE>
        <FILE>types/enum/pullreq.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
