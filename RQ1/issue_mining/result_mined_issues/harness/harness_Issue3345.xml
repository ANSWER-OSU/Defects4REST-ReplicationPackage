<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3345</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/3345</ISSUEURL>
  <TITLE>Drone CI/CD Pipeline Stuck in Pending State with 'http: no content returned: re-connect and re-try' in Runner Logs</TITLE>
  <DESCRIPTION>I have been encountering repeated &quot;http: no content returned: re-connect and re-try&quot; errors in the logs of my Drone Runner. My build status in Drone CI/CD is always &quot;pending&quot; and does not proceed. I have been unable to identify the cause of this issue. Here are the relevant configurations and logs: My drone.yml configuration: ``` kind: pipeline type: ssh name: drone clone: disable: true steps: - name: build-and-deploy-ipa environment: SCP_PASSWORD: from_secret: scp_password SSH_PASSWORD: from_secret: ssh_password commands: - sshpass -p $SSH_PASSWORD ssh -p 1022 xxx@xxx 'cd /Projects/project-gitlab/project_app &amp;&amp; git fetch origin &amp;&amp; git checkout feature/sit-clone &amp;&amp; git pull origin feature/sit-clone' - sshpass -p $SSH_PASSWORD ssh -p 1022 xxx@xxx 'cd /Projects/project-gitlab/project_app &amp;&amp; rm -f build/ios/ipa/app.ipa &amp;&amp; flutter pub get' - sshpass -p $SSH_PASSWORD ssh -p 1022 xxx@xxx 'cd /Projects/project-gitlab/project_app &amp;&amp; flutter build ipa --export-options-plist=ios/exportOptions.plist --dart-define=BYPASS_VERSION_CHECK=true' - sshpass -p $SSH_PASSWORD ssh -p 1022 xxx@xxx 'scp -p $SCP_PASSWORD build/ios/ipa/app.ipa root@xxx:/srv/nginx/content/download/ios/sunod' - sshpass -p $SSH_PASSWORD ssh -p 1022 xxx@xxx 'echo &quot;Deployed ipa @LAB&quot; trigger: branch: - feature/test ``` The intention of this pipeline is to have the runner SSH into a Mac and execute several commands, particularly Flutter commands, My docker-compose.yml configuration: ``` version: '3' services: drone-server: image: drone/drone:latest container_name: drone-server ports: - 80:80 volumes: - /var/lib/drone:/data restart: always environment: - DRONE_LOGS_DEBUG=true - DRONE_GITLAB_SERVER=xxx - DRONE_GITLAB_CLIENT_ID=xxx - DRONE_GITLAB_CLIENT_SECRET=xxx - DRONE_SERVER_HOST=xxx - DRONE_SERVER_PROTO=http - DRONE_RPC_SECRET=xxx - DRONE_USER_CREATE=username:xxx,machine:false,admin:true,token:xxx - DRONE_LOGS_TRACE=true drone-runner: image: drone/drone-runner-docker:latest container_name: drone-runner ports: - 3000:3000 restart: always depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock environment: - DRONE_RPC_HOST=drone-server - DRONE_RPC_PROTO=http - DRONE_RPC_SECRET=xxx - DRONE_RUNNER_CAPACITY=2 - DRONE_RUNNER_NAME=drone-runner - DRONE_LOGS_TRACE=true ``` log messages from my Drone Runner: `time=&quot;2023-08-05T19:30:29Z&quot; level=trace msg=&quot;http: no content returned: re-connect and re-try&quot; time=&quot;2023-08-05T19:30:59Z&quot; level=trace msg=&quot;http: no content returned: re-connect and re-try&quot; time=&quot;2023-08-05T19:31:09Z&quot; level=trace msg=&quot;http: no content returned: re-connect and re-try&quot; ...`</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>515</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [CODE-3135]: Update Dockerfile.uiv2 (#3370)</MESSAGE>
    <SHA>bc125029ff611eb6b8464030003dd125d989857a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking session argument (#3345) * argument changed to session * fixed failing go lint check * updated method usage * corrected spelling mistake * feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking internal boolean argument</MESSAGE>
      <SHA>a5f510c4b2013e45336ce5aae281d68acebf836d</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/migrate/create_repo.go</FILE>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/import.go</FILE>
        <FILE>app/api/controller/repo/move.go</FILE>
        <FILE>types/check/common.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat: [PIPE-24894]: Revert &quot;changed signature of RepoIdentifier to start taking session argument (#3345)&quot; (#3424) * Revert &quot;feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking session argument (#3345)&quot; This reverts commit a5f510c4b2013e45336ce5aae281d68acebf836d.</MESSAGE>
      <SHA>5018aacfb70d990ede4b1349d147bc7c04babbd0</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/migrate/create_repo.go</FILE>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/import.go</FILE>
        <FILE>app/api/controller/repo/move.go</FILE>
        <FILE>types/check/common.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking session argument (#3345) (#3425) * feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking session argument (#3345) * argument changed to session * fixed failing go lint check * updated method usage * corrected spelling mistake * feat: [PIPE-23710]: changed signature of RepoIdentifier to start taking internal boolean argument</MESSAGE>
      <SHA>8b81b19c3dff1db8a7a5d1415db617ec560e19ac</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/migrate/create_repo.go</FILE>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/import.go</FILE>
        <FILE>app/api/controller/repo/move.go</FILE>
        <FILE>types/check/common.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
