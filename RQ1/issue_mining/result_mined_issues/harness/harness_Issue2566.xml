<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2566</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2566</ISSUEURL>
  <TITLE>Unable to fetch stage details when using string interpolation in pipeline</TITLE>
  <DESCRIPTION>I added the following in my `.drone.yml`: ```yaml environment: build_number: ${BUILD_NUMBER} ``` and this shows up in my logs: ```yaml {&quot;commit&quot;:&quot;bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0&quot;,&quot;event&quot;:&quot;push&quot;,&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;webhook parsed&quot;,&quot;name&quot;:&quot;bazare-public&quot;,&quot;namespace&quot;:&quot;tjimsk&quot;,&quot;time&quot;:&quot;2019-01-04T21:15:04Z&quot;} {&quot;commit&quot;:&quot;bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0&quot;,&quot;event&quot;:&quot;push&quot;,&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;trigger: received&quot;,&quot;ref&quot;:&quot;refs/heads/master&quot;,&quot;repo&quot;:&quot;&lt;repository-name&gt;&quot;,&quot;time&quot;:&quot;2019-01-04T21:15:04Z&quot;} {&quot;fields.time&quot;:&quot;2019-01-04T21:15:06Z&quot;,&quot;latency&quot;:1589002566,&quot;level&quot;:&quot;debug&quot;,&quot;method&quot;:&quot;POST&quot;,&quot;msg&quot;:&quot;&quot;,&quot;remote&quot;:&quot;10.28.3.5:51760&quot;,&quot;request&quot;:&quot;/hook&quot;,&quot;request-id&quot;:&quot;596a9389-0fe3-4f72-b3c8-a815e94c1e15&quot;,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;level&quot;:&quot;debug&quot;,&quot;machine&quot;:&quot;drone-74666b56c4-lqt8k&quot;,&quot;msg&quot;:&quot;manager: accept stage&quot;,&quot;stage-id&quot;:2,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;level&quot;:&quot;debug&quot;,&quot;machine&quot;:&quot;drone-74666b56c4-lqt8k&quot;,&quot;msg&quot;:&quot;manager: stage accepted&quot;,&quot;stage-id&quot;:2,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;manager: fetching stage details&quot;,&quot;step-id&quot;:2,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;build&quot;:2,&quot;error&quot;:&quot;runtime error: invalid memory address or nil pointer dereference&quot;,&quot;level&quot;:&quot;error&quot;,&quot;machine&quot;:&quot;drone-74666b56c4-lqt8k&quot;,&quot;msg&quot;:&quot;runner: unexpected panic&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;pipeline&quot;:&quot;public&quot;,&quot;repo&quot;:&quot;&lt;repository-name&gt;&quot;,&quot;stage&quot;:1,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;level&quot;:&quot;debug&quot;,&quot;machine&quot;:&quot;drone-74666b56c4-lqt8k&quot;,&quot;msg&quot;:&quot;runner: polling queue&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;kernel&quot;:&quot;&quot;,&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;manager: request queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-01-04T21:15:06Z&quot;,&quot;variant&quot;:&quot;&quot;} {&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;events: stream eror&quot;,&quot;request-id&quot;:&quot;729b25b5-260a-457c-be9e-f1b51bb7b4dc&quot;,&quot;time&quot;:&quot;2019-01-04T21:16:12Z&quot;,&quot;user.admin&quot;:true,&quot;user.login&quot;:&quot;tjimsk&quot;} {&quot;level&quot;:&quot;debug&quot;,&quot;msg&quot;:&quot;events: stream closed&quot;,&quot;request-id&quot;:&quot;729b25b5-260a-457c-be9e-f1b51bb7b4dc&quot;,&quot;time&quot;:&quot;2019-01-04T21:16:12Z&quot;,&quot;user.admin&quot;:true,&quot;user.login&quot;:&quot;tjimsk&quot;} ``` The pipeline gets stuck instead of reporting it can't find the variable. That should be handled better as even the logs don't really say that much.</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>feat: [CDE-255]: Fixed Gitness Issues (#2564) * feat: [CDE-255]: fixed ui lint issue * feat: [CDE-255]: Fixed Gitness Issues</MESSAGE>
    <SHA>dab431568fa1181d0ffbe223019d87543fcda224</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>change the user used for the audit call in repo import (#2566) * change the user used for the audit call in repo import</MESSAGE>
      <SHA>b10a30ca8f87b88eb9f44e62a12b3cd43d3008ba</SHA>
      <PATCHEDFILES>
        <FILE>app/services/importer/repository.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
