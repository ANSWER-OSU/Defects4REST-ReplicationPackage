<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2458</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2458</ISSUEURL>
  <TITLE>drone always suddenly in pending state</TITLE>
  <DESCRIPTION>&lt;!-- PLEASE READ BEFORE DELETING Bugs or Issues? Please do not open a GitHub issue until you have discussed and verified with community support: https://discourse.drone.io/ Failing Builds? Please do not use GitHub issues for generic support questions. Instead please use Stack Overflow: http://stackoverflow.com/questions/tagged/drone.io --&gt; As shown in the question,at first it was normal,after a few times,it alway suddenly in pending state,just like that ![image](https://user-images.githubusercontent.com/23305845/43196007-38290540-9039-11e8-9ea3-eff9baba010a.png) Deploy with Docker Stack ```yml version: &quot;3&quot; services: drone-server: image: drone/drone ports: - 8999:8000 - 9000 volumes: - drone:/var/lib/drone deploy: replicas: 1 restart_policy: condition: on-failure environment: - DRONE_OPEN=true - DRONE_HOST=http://localhost:8999 - DRONE_GITLAB=true - DRONE_GITLAB_CLIENT=24fbdfd9978f6XXXXXX49f55b51316d3d7684d0b00b195884c08781 - DRONE_GITLAB_SECRET=59XXXXXe28cd8f0c858fb3afecf52342 - DRONE_GITLAB_URL=http://localhost - DRONE_SECRET=mytest2018 drone-agent: image: drone/agent deploy: replicas: 1 restart_policy: condition: on-failure depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock environment: - DRONE_SERVER=drone-server:9000 - DRONE_SECRET=mytest2018 volumes: drone: driver: local ``` Who has met such a problem, and how do you solve it? Best wishes to you!</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Render off-screen diffs in a single pre tag to boost performance (#2271) * Tan's last PR :) * Sync with main * Prevent browser crash on big PR (&gt;200 files changed) * Fixed link to comment not working * Add NPE prevention * Fixed Show Diff works only once * Fix Harness nav is not auto-collapsed when visiting PR Changes * Add code to restore new and edited comments * Render off-screen diffs in a single pre tag to boost performance</MESSAGE>
    <SHA>f626dc640e59f4cc3bc393284c4e2519e1b3078c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CDE-217]: Migration: Fix column and constraint (#2458) * feat: [CDE-217]: address comments * feat: [CDE-217]: Migration: Fix column and constraint * feat: [CDE-217]: Migration: Fix column and constraint</MESSAGE>
      <SHA>86be5e2e8da52f74a54021676f5a535d9671ed21</SHA>
      <PATCHEDFILES>
        <FILE>app/store/database/migrate/postgres/0064_alter_delegate_provision_modify_column.down.sql</FILE>
        <FILE>app/store/database/migrate/postgres/0064_alter_delegate_provision_modify_column.up.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0064_alter_delegate_provision_modify_column.down.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0064_alter_delegate_provision_modify_column.up.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
