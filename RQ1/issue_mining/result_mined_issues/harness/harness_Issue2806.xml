<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2806</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2806</ISSUEURL>
  <TITLE>Running drone-agent error through kubernetes</TITLE>
  <DESCRIPTION>### Environment variable setting： #### drone-server： - name: DRONE_KUBERNETES_ENABLED value: &quot;true&quot; - name: DRONE_KUBERNETES_NAMESPACE value: default - name: DRONE_KUBERNETES_SERVICE_ACCOUNT value: drone-pipeline - name: DRONE_GIT_ALWAYS_AUTH value: &quot;false&quot; - name: DRONE_RPC_SERVER value: &quot;http://drone&quot; - name: DRONE_SERVER_HOST value: &quot;drone&quot; - name: DRONE_RPC_PROTO value: &quot;http&quot; - name: DRONE_RPC_HOST value: drone.devops:80 - name: DRONE_SERVER_PROTO value: http - name: DRONE_RPC_SECRET valueFrom: secretKeyRef: name: drone-secret key: secret - name: DRONE_DATABASE_DATASOURCE value: &quot;/var/lib/drone/drone.sqlite&quot; - name: DRONE_DATABASE_DRIVER value: &quot;sqlite3&quot; - name: DRONE_LOGS_DEBUG value: &quot;true&quot; - name: DRONE_GITEA_SERVER value: http://gitea.devops:3000 #### agent： ``` ... - name: DRONE_RPC_HOST value: http://drone:80 - name: DRONE_SERVER_HOST value: http://drone:80 - name: DRONE_RPC_SERVER value: http://drone:80 - name: DRONE_RPC_SECRET - name: DOCKER_HOST value: tcp://localhost:2375 - name: DRONE_LOGS_DEBUG value: &quot;true&quot; ... ``` #### ERROR ``` {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} {&quot;arch&quot;:&quot;amd64&quot;,&quot;error&quot;:&quot;not implemented&quot;,&quot;level&quot;:&quot;warning&quot;,&quot;machine&quot;:&quot;drone-debug&quot;,&quot;msg&quot;:&quot;runner: cannot get queue item&quot;,&quot;os&quot;:&quot;linux&quot;,&quot;time&quot;:&quot;2019-08-29T12:26:15Z&quot;} ```</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: [CODE-2516]: fix typo in dockerfile (#2823) * Update Dockerfile</MESSAGE>
    <SHA>ddf3f1d3b92cd623aa4bbcf1189e4d3c8ee16ae9</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CODE-2500]: add support for webhook internal url (#2806) * feat: [CODE-2500]: add support for webhook internal url * feat: [CODE-2500]: add support for webhook internal url * feat: [CODE-2500]: add support for webhook internal url</MESSAGE>
      <SHA>f7411b41c97e63a26928702524061f87010502e8</SHA>
      <PATCHEDFILES>
        <FILE>app/api/controller/webhook/common.go</FILE>
        <FILE>app/api/controller/webhook/create.go</FILE>
        <FILE>app/api/controller/webhook/update.go</FILE>
        <FILE>app/services/migrate/webhook.go</FILE>
        <FILE>app/services/webhook/service.go</FILE>
        <FILE>app/services/webhook/trigger.go</FILE>
        <FILE>cli/operations/server/config.go</FILE>
        <FILE>types/config.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
