<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>607</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/607</ISSUEURL>
  <TITLE>Drone reporting pull request branches as &quot;master&quot;</TITLE>
  <DESCRIPTION>In builds I'm getting some branches reported as master, which is pretty bad because our build script checks DRONE_BRANCH for master and then deploys. Seems like drone is pulling out the base branch? Surely this would be wrong? https://github.com/drone/drone/blob/c3966b1a59b542e3337b02e05819a918d0fd444e/plugin/remote/github/github.go#L280 Here's some example json from a green PR (https://github.com/AndrewVos/builder-test-green-repo/pull/2) ``` json { &quot;repository&quot;: { &quot;master_branch&quot;: &quot;master&quot;, &quot;default_branch&quot;: &quot;master&quot;, &quot;full_name&quot;: &quot;AndrewVos/builder-test-green-repo&quot;, &quot;name&quot;: &quot;builder-test-green-repo&quot;, &quot;id&quot;: 15211076 }, &quot;pull_request&quot;: { &quot;base&quot;: { &quot;repo&quot;: { &quot;master_branch&quot;: &quot;master&quot;, &quot;default_branch&quot;: &quot;master&quot;, &quot;full_name&quot;: &quot;AndrewVos/builder-test-green-repo&quot;, &quot;name&quot;: &quot;builder-test-green-repo&quot;, &quot;id&quot;: 15211076 }, &quot;sha&quot;: &quot;576be25d7e3d5320e92472d5734b50b17c1822e0&quot;, &quot;ref&quot;: &quot;master&quot;, &quot;label&quot;: &quot;AndrewVos:master&quot; }, &quot;head&quot;: { &quot;repo&quot;: { &quot;full_name&quot;: &quot;AndrewVos/builder-test-green-repo&quot;, &quot;name&quot;: &quot;builder-test-green-repo&quot;, }, &quot;sha&quot;: &quot;7f39d6495acae9db022cc20e7f0d940158e0337d&quot;, &quot;ref&quot;: &quot;pool-request&quot;, &quot;label&quot;: &quot;AndrewVos:pool-request&quot; }, }, &quot;number&quot;: 2, &quot;action&quot;: &quot;opened&quot; } ```</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[MISC] improve url generation to reduce configuration overhead (#606)</MESSAGE>
    <SHA>1246bd78abaeec5fbcb8e11ea41db4287267120f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>[MISC] Replace `BIND` with `PORT`, fix space_path for postgres (#607)</MESSAGE>
      <SHA>5ca48e7f59a990af2bdfbeb980499616abeef5eb</SHA>
      <PATCHEDFILES>
        <FILE>cli/server/config.go</FILE>
        <FILE>cli/server/config_test.go</FILE>
        <FILE>cli/server/server.go</FILE>
        <FILE>gitrpc/server/config.go</FILE>
        <FILE>gitrpc/server/http.go</FILE>
        <FILE>gitrpc/server/server.go</FILE>
        <FILE>http/server.go</FILE>
        <FILE>internal/server/wire.go</FILE>
        <FILE>internal/store/database/space_path.go</FILE>
        <FILE>types/config.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
