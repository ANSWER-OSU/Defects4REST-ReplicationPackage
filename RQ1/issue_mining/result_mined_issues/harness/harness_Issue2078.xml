<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2078</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2078</ISSUEURL>
  <TITLE>Commit author email is empty with gogs/gitea providers</TITLE>
  <DESCRIPTION>Gitea version: 1.1.2 Drone version: 0.7.1 Steps to reproduce: * setup a Gitea 1.1.2 instance * setup drone server/agent with following docker-compose.yml ``` services: drone-server: image: drone/drone:0.7.1 ports: - 80:8000 volumes: - ./drone:/var/lib/drone/ restart: always environment: - DRONE_OPEN=false - DRONE_GITEA=true - DRONE_GITEA_URL=https://git.company.com/ - DRONE_GITEA_PRIVATE_MODE:true - DRONE_SECRET=&lt;something&gt; drone-agent: image: drone/drone:0.7.1 command: agent restart: always depends_on: [ drone-server ] volumes: - /var/run/docker.sock:/var/run/docker.sock environment: - DRONE_SERVER=ws://drone-server:8000/ws/broker - DRONE_SECRET=&lt;something&gt; ``` * create and active a repository with following .drone.yml ``` pipeline: debug: image: alpine:3.4 commands: - env ``` Expected behavior: in the build output, see `DRONE_COMMIT_AUTHOR_EMAIL`. Actual behavior: No `DRONE_COMMIT_AUTHOR_EMAIL` in build output, or any environment variable with email. Extra information: * I tried with Gogs provider, but same result. * Post hook payload with removed sensitive information ``` { &quot;secret&quot;: &quot;&lt;removed&gt;&quot;, &quot;ref&quot;: &quot;refs/heads/master&quot;, &quot;before&quot;: &quot;9a6d4950fcd4b23593693b66281dc9737998f3c0&quot;, &quot;after&quot;: &quot;e1ce9a14a8c89a968de7511a389912661be93ac4&quot;, &quot;compare_url&quot;: &quot;https://git.company.com/ci/drone-test/compare/9a6d4950fcd4b23593693b66281dc9737998f3c0...e1ce9a14a8c89a968de7511a389912661be93ac4&quot;, &quot;commits&quot;: [ { &quot;id&quot;: &quot;e1ce9a14a8c89a968de7511a389912661be93ac4&quot;, &quot;message&quot;: &quot;do something\n&quot;, &quot;url&quot;: &quot;https://git.company.com/ci/drone-test/commit/e1ce9a14a8c89a968de7511a389912661be93ac4&quot;, &quot;author&quot;: { &quot;name&quot;: &quot;My Real Name&quot;, &quot;email&quot;: &quot;me@myemail.com&quot;, &quot;username&quot;: &quot;my_username&quot; }, &quot;committer&quot;: { &quot;name&quot;: &quot;My Real Name&quot;, &quot;email&quot;: &quot;me@myemail.com&quot;, &quot;username&quot;: &quot;my_username&quot; }, &quot;timestamp&quot;: &quot;2017-06-20T08:39:13Z&quot; } ], &quot;repository&quot;: { &quot;id&quot;: 7, &quot;owner&quot;: { &quot;id&quot;: 3, &quot;login&quot;: &quot;ci&quot;, &quot;full_name&quot;: &quot;&quot;, &quot;email&quot;: &quot;ci@my_username.com&quot;, &quot;avatar_url&quot;: &quot;https://secure.gravatar.com/avatar/795cee0be515bbc377c8da227c0a0363&quot;, &quot;username&quot;: &quot;ci&quot; }, &quot;name&quot;: &quot;drone-test&quot;, &quot;full_name&quot;: &quot;ci/drone-test&quot;, &quot;description&quot;: &quot;&quot;, &quot;private&quot;: true, &quot;fork&quot;: false, &quot;mirror&quot;: false, &quot;html_url&quot;: &quot;https://git.company.com/ci/drone-test&quot;, &quot;ssh_url&quot;: &quot;ssh://git@git.company.com:2222/ci/drone-test.git&quot;, &quot;clone_url&quot;: &quot;https://git.company.com/ci/drone-test.git&quot;, &quot;website&quot;: &quot;&quot;, &quot;stars_count&quot;: 0, &quot;forks_count&quot;: 0, &quot;watchers_count&quot;: 1, &quot;open_issues_count&quot;: 0, &quot;default_branch&quot;: &quot;master&quot;, &quot;created_at&quot;: &quot;2017-04-18T07:39:22Z&quot;, &quot;updated_at&quot;: &quot;2017-06-20T08:08:36Z&quot;, &quot;permissions&quot;: { &quot;admin&quot;: false, &quot;push&quot;: false, &quot;pull&quot;: false } }, &quot;pusher&quot;: { &quot;id&quot;: 1, &quot;login&quot;: &quot;my_username&quot;, &quot;full_name&quot;: &quot;My Real Name&quot;, &quot;email&quot;: &quot;me@myemail.com&quot;, &quot;avatar_url&quot;: &quot;https://git.company.com/avatars/74170010fb38c17915d187346da8a985&quot;, &quot;username&quot;: &quot;my_username&quot; }, &quot;sender&quot;: { &quot;id&quot;: 1, &quot;login&quot;: &quot;my_username&quot;, &quot;full_name&quot;: &quot;My Real Name&quot;, &quot;email&quot;: &quot;me@myemail.com&quot;, &quot;avatar_url&quot;: &quot;https://git.company.com/avatars/74170010fb38c17915d187346da8a985&quot;, &quot;username&quot;: &quot;my_username&quot; } } ```</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>fix: [CDE-62]: Fixing foreign key constraint in gitspaces table, making gits_infra_provisioned_id nullable (#2079)</MESSAGE>
    <SHA>7c2431c6528a160ee3d4bb03ba49bf694c1faed5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: [CDE-42]: Gitspace UI changes (#2078)</MESSAGE>
      <SHA>a6894572a4167d2beb167192173da5b235235390</SHA>
      <PATCHEDFILES>
        <FILE>web/src/cde/components/CreateGitspace/CreateGitspace.tsx</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectIDE/SelectIDE.tsx</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectInfraProvider/SelectInfraProvider.tsx</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectMachine/SelectMachine.module.scss</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectMachine/SelectMachine.module.scss.d.ts</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectMachine/SelectMachine.tsx</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectRegion/SelectRegion.tsx</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectRegion/assests/Empty.png</FILE>
        <FILE>web/src/cde/components/CreateGitspace/components/SelectRepository/SelectRepository.tsx</FILE>
        <FILE>web/src/cde/components/GitspaceDetails/GitspaceDetails.tsx</FILE>
        <FILE>web/src/cde/components/GitspaceLogs/GitspaceLogs.module.scss</FILE>
        <FILE>web/src/cde/components/GitspaceLogs/GitspaceLogs.module.scss.d.ts</FILE>
        <FILE>web/src/cde/components/GitspaceLogs/GitspaceLogs.tsx</FILE>
        <FILE>web/src/cde/components/GitspaceLogs/GitspaceLogs.utils.ts</FILE>
        <FILE>web/src/cde/components/ListGitspaces/ListGitspaces.module.scss</FILE>
        <FILE>web/src/cde/components/ListGitspaces/ListGitspaces.module.scss.d.ts</FILE>
        <FILE>web/src/cde/components/ListGitspaces/ListGitspaces.tsx</FILE>
        <FILE>web/src/cde/constants/index.ts</FILE>
        <FILE>web/src/cde/pages/GitspaceDetail/GitspaceDetail.module.scss</FILE>
        <FILE>web/src/cde/pages/GitspaceDetail/GitspaceDetail.tsx</FILE>
        <FILE>web/src/cde/pages/GitspacesListing/GitspacesListing.tsx</FILE>
        <FILE>web/src/cde/pages/GitspacesListing/mock.ts</FILE>
        <FILE>web/src/framework/strings/stringTypes.ts</FILE>
        <FILE>web/src/i18n/strings.en.yaml</FILE>
        <FILE>web/src/services/cde/index.tsx</FILE>
        <FILE>web/src/services/cde/swagger.yaml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
