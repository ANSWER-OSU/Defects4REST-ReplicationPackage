<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2021</ISSUENO>
  <ISSUEURL>https://github.com/harness/harness/issues/2021</ISSUEURL>
  <TITLE>drone exec ignores when: local: false</TITLE>
  <DESCRIPTION>Drone version: .6 Repro steps: 1. create a .drone.yml file with some steps that have secrets 2. add { when: { local: false }} yml equiv to the steps with secrets 3. run drone exec if will try to still run the containers that are marked for local: false from a conversation with @bradrydzewski it looks like this may have been lost from .5 but should get brought back into .6</DESCRIPTION>
  <REPONAME>harness</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Exclude soft deleted spaces on membership listing (#2059)</MESSAGE>
    <SHA>831cf18abc48d4f2b0bf1e0eb95b93176a2524d6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Support Public Access (#2021)</MESSAGE>
      <SHA>c365ef246a6f2134cb0ed074f519f29096db7044</SHA>
      <PATCHEDFILES>
        <FILE>app/api/auth/auth.go</FILE>
        <FILE>app/api/auth/pipeline.go</FILE>
        <FILE>app/api/auth/repo.go</FILE>
        <FILE>app/api/auth/space.go</FILE>
        <FILE>app/api/controller/check/controller.go</FILE>
        <FILE>app/api/controller/principal/controller.go</FILE>
        <FILE>app/api/controller/principal/find.go</FILE>
        <FILE>app/api/controller/principal/interface.go</FILE>
        <FILE>app/api/controller/principal/search.go</FILE>
        <FILE>app/api/controller/principal/wire.go</FILE>
        <FILE>app/api/controller/pullreq/controller.go</FILE>
        <FILE>app/api/controller/pullreq/pr_create.go</FILE>
        <FILE>app/api/controller/pullreq/pr_state.go</FILE>
        <FILE>app/api/controller/pullreq/pr_update.go</FILE>
        <FILE>app/api/controller/pullreq/reviewer_add.go</FILE>
        <FILE>app/api/controller/repo/archive.go</FILE>
        <FILE>app/api/controller/repo/blame.go</FILE>
        <FILE>app/api/controller/repo/codeowner_validate.go</FILE>
        <FILE>app/api/controller/repo/commit.go</FILE>
        <FILE>app/api/controller/repo/content_get.go</FILE>
        <FILE>app/api/controller/repo/content_paths_details.go</FILE>
        <FILE>app/api/controller/repo/controller.go</FILE>
        <FILE>app/api/controller/repo/create.go</FILE>
        <FILE>app/api/controller/repo/create_branch.go</FILE>
        <FILE>app/api/controller/repo/create_commit_tag.go</FILE>
        <FILE>app/api/controller/repo/default_branch.go</FILE>
        <FILE>app/api/controller/repo/delete_branch.go</FILE>
        <FILE>app/api/controller/repo/delete_tag.go</FILE>
        <FILE>app/api/controller/repo/diff.go</FILE>
        <FILE>app/api/controller/repo/find.go</FILE>
        <FILE>app/api/controller/repo/get_branch.go</FILE>
        <FILE>app/api/controller/repo/get_commit.go</FILE>
        <FILE>app/api/controller/repo/get_commit_divergences.go</FILE>
        <FILE>app/api/controller/repo/git_info_refs.go</FILE>
        <FILE>app/api/controller/repo/git_service_pack.go</FILE>
        <FILE>app/api/controller/repo/helper.go</FILE>
        <FILE>app/api/controller/repo/import.go</FILE>
        <FILE>app/api/controller/repo/import_progress.go</FILE>
        <FILE>app/api/controller/repo/list_branches.go</FILE>
        <FILE>app/api/controller/repo/list_commit_tags.go</FILE>
        <FILE>app/api/controller/repo/list_commits.go</FILE>
        <FILE>app/api/controller/repo/list_paths.go</FILE>
        <FILE>app/api/controller/repo/merge_check.go</FILE>
        <FILE>app/api/controller/repo/move.go</FILE>
        <FILE>app/api/controller/repo/pipeline_generate.go</FILE>
        <FILE>app/api/controller/repo/purge.go</FILE>
        <FILE>app/api/controller/repo/raw.go</FILE>
        <FILE>app/api/controller/repo/restore.go</FILE>
        <FILE>app/api/controller/repo/rule_create.go</FILE>
        <FILE>app/api/controller/repo/rule_delete.go</FILE>
        <FILE>app/api/controller/repo/rule_find.go</FILE>
        <FILE>app/api/controller/repo/rule_list.go</FILE>
        <FILE>app/api/controller/repo/rule_update.go</FILE>
        <FILE>app/api/controller/repo/soft_delete.go</FILE>
        <FILE>app/api/controller/repo/update.go</FILE>
        <FILE>app/api/controller/repo/update_public_access.go</FILE>
        <FILE>app/api/controller/repo/wire.go</FILE>
        <FILE>app/api/controller/reposettings/controller.go</FILE>
        <FILE>app/api/controller/reposettings/general_find.go</FILE>
        <FILE>app/api/controller/reposettings/general_update.go</FILE>
        <FILE>app/api/controller/reposettings/security_find.go</FILE>
        <FILE>app/api/controller/reposettings/security_update.go</FILE>
        <FILE>app/api/controller/space/controller.go</FILE>
        <FILE>app/api/controller/space/create.go</FILE>
        <FILE>app/api/controller/space/events.go</FILE>
        <FILE>app/api/controller/space/export.go</FILE>
        <FILE>app/api/controller/space/export_progress.go</FILE>
        <FILE>app/api/controller/space/find.go</FILE>
        <FILE>app/api/controller/space/helper.go</FILE>
        <FILE>app/api/controller/space/import.go</FILE>
        <FILE>app/api/controller/space/import_repositories.go</FILE>
        <FILE>app/api/controller/space/list_repositories.go</FILE>
        <FILE>app/api/controller/space/list_spaces.go</FILE>
        <FILE>app/api/controller/space/membership_add.go</FILE>
        <FILE>app/api/controller/space/membership_delete.go</FILE>
        <FILE>app/api/controller/space/membership_list.go</FILE>
        <FILE>app/api/controller/space/membership_update.go</FILE>
        <FILE>app/api/controller/space/move.go</FILE>
        <FILE>app/api/controller/space/purge.go</FILE>
        <FILE>app/api/controller/space/restore.go</FILE>
        <FILE>app/api/controller/space/soft_delete.go</FILE>
        <FILE>app/api/controller/space/update.go</FILE>
        <FILE>app/api/controller/space/update_public_access.go</FILE>
        <FILE>app/api/controller/space/wire.go</FILE>
        <FILE>app/api/controller/upload/controller.go</FILE>
        <FILE>app/api/controller/upload/download.go</FILE>
        <FILE>app/api/controller/upload/upload.go</FILE>
        <FILE>app/api/controller/webhook/controller.go</FILE>
        <FILE>app/api/handler/principal/find.go</FILE>
        <FILE>app/api/handler/principal/search.go</FILE>
        <FILE>app/api/handler/repo/git_info_refs.go</FILE>
        <FILE>app/api/handler/repo/git_service_pack.go</FILE>
        <FILE>app/api/handler/repo/update_public_access.go</FILE>
        <FILE>app/api/handler/space/update_public_access.go</FILE>
        <FILE>app/api/middleware/authn/authn.go</FILE>
        <FILE>app/api/openapi/repo.go</FILE>
        <FILE>app/api/openapi/space.go</FILE>
        <FILE>app/api/usererror/translate.go</FILE>
        <FILE>app/auth/anonymous.go</FILE>
        <FILE>app/auth/authz/membership.go</FILE>
        <FILE>app/auth/authz/public_access.go</FILE>
        <FILE>app/auth/authz/wire.go</FILE>
        <FILE>app/pipeline/converter/converter.go</FILE>
        <FILE>app/pipeline/converter/jsonnet/jsonnet.go</FILE>
        <FILE>app/pipeline/converter/service.go</FILE>
        <FILE>app/pipeline/converter/starlark/args.go</FILE>
        <FILE>app/pipeline/converter/starlark/starlark.go</FILE>
        <FILE>app/pipeline/manager/client.go</FILE>
        <FILE>app/pipeline/manager/convert.go</FILE>
        <FILE>app/pipeline/manager/manager.go</FILE>
        <FILE>app/pipeline/manager/wire.go</FILE>
        <FILE>app/pipeline/triggerer/trigger.go</FILE>
        <FILE>app/pipeline/triggerer/wire.go</FILE>
        <FILE>app/router/api.go</FILE>
        <FILE>app/services/exporter/repository.go</FILE>
        <FILE>app/services/importer/provider.go</FILE>
        <FILE>app/services/importer/repository.go</FILE>
        <FILE>app/services/importer/wire.go</FILE>
        <FILE>app/services/publicaccess/public_access.go</FILE>
        <FILE>app/services/publicaccess/resources.go</FILE>
        <FILE>app/services/publicaccess/service.go</FILE>
        <FILE>app/services/publicaccess/wire.go</FILE>
        <FILE>app/store/database.go</FILE>
        <FILE>app/store/database/migrate/postgres/0050_create_table_public_resources.down.sql</FILE>
        <FILE>app/store/database/migrate/postgres/0050_create_table_public_resources.up.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0050_create_table_public_resources.down.sql</FILE>
        <FILE>app/store/database/migrate/sqlite/0050_create_table_public_resources.up.sql</FILE>
        <FILE>app/store/database/public_access.go</FILE>
        <FILE>app/store/database/repo.go</FILE>
        <FILE>app/store/database/space.go</FILE>
        <FILE>app/store/database/wire.go</FILE>
        <FILE>audit/objects.go</FILE>
        <FILE>cmd/gitness/wire.go</FILE>
        <FILE>cmd/gitness/wire_gen.go</FILE>
        <FILE>types/check/common.go</FILE>
        <FILE>types/enum/membership_role.go</FILE>
        <FILE>types/enum/permission.go</FILE>
        <FILE>types/enum/public_resource.go</FILE>
        <FILE>types/principal.go</FILE>
        <FILE>types/repo.go</FILE>
        <FILE>types/space.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
