<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3351</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3351</ISSUEURL>
  <TITLE>bug: Not support updating snis with PATCH</TITLE>
  <DESCRIPTION>### Issue description Fail to update snis using PATCH ### Environment * apisix version: 2.2 * OS: ubuntu * OpenResty / Nginx version:1.19 ### Minimal test code / Steps to reproduce the issue 1.intsert ssl with snis 2.patch snis ### What's the actual result? (including assertion message &amp; call stack if applicable) ``` HTTP/1.1 400 Bad Request Server: openresty Date: Wed, 20 Jan 2021 01:20:37 GMT Content-Type: application/json Transfer-Encoding: chunked Connection: keep-alive Access-Control-Allow-Origin: * Access-Control-Allow-Credentials: true Access-Control-Expose-Headers: * Access-Control-Max-Age: 3600 {&quot;error_msg&quot;:&quot;invalid configuration: additional properties forbidden, found 1&quot;} ``` ### What's the expected result? 200</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>test: avoid unstable case caused by delete upstream 1 (#3385) Test cases from other files may still refer upstream 1.</MESSAGE>
    <SHA>bf16615583c7645d51473f66fd5a970c9740afc4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: SSL resource supports PATCH with sub path Fix #3351. Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
      <SHA>d6cad37a28b270cccfacf7a0bd100a450d8c1d5e</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>t/admin/ssl2.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: SSL resource supports PATCH with sub path (#3405) Fix #3351</MESSAGE>
      <SHA>c90f0dcfb4218a9c6ade70b21b7974342aad5ed4</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>t/admin/ssl2.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
