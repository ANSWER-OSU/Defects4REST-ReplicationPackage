<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3261</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/3261</ISSUEURL>
  <TITLE>request help: support chash key splicing</TITLE>
  <DESCRIPTION>### Issue description Nginx support hash key splicing, just as follow ``` hash ${request_uri}${http_token}${http_sign} consistent ``` I can't find how to replace it with chash in apisix， and I think it’s an importance function in prd env Thanks for helping ### Environment * apisix version (2.1): * OS: (ubuntu 16) * OpenResty / Nginx version: (1.19`)</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>chore: enhance upstream discovery (#3269) Signed-off-by: spacewander &lt;spacewanderlzx@gmail.com&gt;</MESSAGE>
    <SHA>fcd880f23f7847fc0e1f74748a776aa6e2c3c4d3</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat:support hash on vars_combinations (#3261)</MESSAGE>
      <SHA>806fc06b5de5197cb1807c337bfe98e332fab1b7</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/balancer/chash.lua</FILE>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>doc/admin-api.md</FILE>
        <FILE>t/node/chash-hashon.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: reindex test case (#3261)</MESSAGE>
      <SHA>0cf69b2e95cf96d1f23b6a963403c370957bb5d3</SHA>
      <PATCHEDFILES>
        <FILE>t/node/chash-hashon.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: correct spelling (#3261)</MESSAGE>
      <SHA>7b274cc111bf3a345d3df4ee6a166ab67c1b316b</SHA>
      <PATCHEDFILES>
        <FILE>t/node/chash-hashon.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: check err and add log for resolve_var(#3261)</MESSAGE>
      <SHA>9a8a67078ac841410cd5c9ed2fece8cbc28a34dc</SHA>
      <PATCHEDFILES>
        <FILE>apisix/balancer/chash.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: add space before = (#3261)</MESSAGE>
      <SHA>b200e1d404e82fbe7cc141cb123131c99b0ddc80</SHA>
      <PATCHEDFILES>
        <FILE>apisix/balancer/chash.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: define local err (#3261)</MESSAGE>
      <SHA>1dfde635e3e4f9090be6b1b2254b184e5a12f4b1</SHA>
      <PATCHEDFILES>
        <FILE>apisix/balancer/chash.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat: support hash on vars_combinations (#3278) related #3261</MESSAGE>
      <SHA>d1d653317623d2656ca393c34961795ac0b12481</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/balancer/chash.lua</FILE>
        <FILE>apisix/schema_def.lua</FILE>
        <FILE>doc/admin-api.md</FILE>
        <FILE>t/node/chash-hashon.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
