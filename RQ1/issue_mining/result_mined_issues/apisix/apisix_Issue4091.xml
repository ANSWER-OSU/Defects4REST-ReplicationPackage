<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4091</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/4091</ISSUEURL>
  <TITLE>feature: support to fetch balancer `ip`/`port` from `ctx.vars`</TITLE>
  <DESCRIPTION>we have stored the upstream ip/port in `ctx` object, here is the link: https://github.com/apache/apisix/blob/master/apisix/balancer.lua#L204-L205 we should support to fetch from `ctx.vars`, here is the example: ```lua local up_ip = ctx.vars[&quot;balancer_ip&quot;] local up_port = ctx.vars[&quot;balancer_port&quot;] ``` Then we can use this value in plugins(eg: SkyWalking). I think we can use the same way as &quot;consumer_name&quot;, which is the code link: https://github.com/apache/apisix/blob/master/apisix/core/ctx.lua#L176</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>docs: Arabic translation of README.md. (#4044) Co-authored-by: John Bampton &lt;jbampton@gmail.com&gt;</MESSAGE>
    <SHA>86e49837d20147471eeb852d60d4c5e2f15a2bd4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>feat: support to fetch balancer ip/port from ctx.var close #4091</MESSAGE>
      <SHA>a78bd10f4f1efb3547cae880d7cdea7d7ffb08e1</SHA>
      <PATCHEDFILES>
        <FILE>apisix/core/ctx.lua</FILE>
        <FILE>t/core/ctx2.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
