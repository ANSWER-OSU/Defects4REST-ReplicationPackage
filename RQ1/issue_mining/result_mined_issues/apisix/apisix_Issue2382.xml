<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2382</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/2382</ISSUEURL>
  <TITLE>bug: failed to load module 'apisix.ssl.router.radixtree_sni' not found</TITLE>
  <DESCRIPTION>https://github.com/apache/apisix/runs/1235803490#step:6:228 ``` Usage: apisix [action] &lt;argument&gt; help: show this message, then exit init: initialize the local nginx.conf init_etcd: initialize the data of etcd start: start the apisix server stop: stop the apisix server restart: restart the apisix server reload: reload the apisix server version: print the version of apisix =====found error log===== Error: /10 15:54:44 [error] 21841#21841: init_worker_by_lua error: /usr/local/apisix//deps/share/lua/5.1/apisix/router.lua:83: module 'apisix.ssl.router.radixtree_sni' not found: no field package.preload['apisix.ssl.router.radixtree_sni'] no file '/usr/local/apisix//deps/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/apisix//deps/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/apisix/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/apisix/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni.ljbc' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni/init.ljbc' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni.ljbc' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni/init.ljbc' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni/init.lua' no file './apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/luajit/share/luajit-2.1.0-beta3/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/openresty-debug/luajit/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/luajit/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/home/runner/.luarocks/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/home/runner/.luarocks/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file './apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/lib/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/lib/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/apisix//deps/lib64/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/apisix//deps/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni.so' no file './apisix/ssl/router/radixtree_sni.so' no file '/usr/local/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/openresty-debug/luajit/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/lib/lua/5.1/loadall.so' no file '/home/runner/.luarocks/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file './apisix/ssl/router/radixtree_sni.so' no file '/usr/local/lib/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/lib/x86_64-linux-gnu/lua/5.1/apisix/ssl/router/radixtree_sni.so' no file '/usr/local/lib/lua/5.1/loadall.so' no file '/usr/local/apisix//deps/lib64/lua/5.1/apisix.so' no file '/usr/local/apisix//deps/lib/lua/5.1/apisix.so' no file '/usr/local/openresty-debug/site/lualib/apisix.so' no file '/usr/local/openresty-debug/lualib/apisix.so' no file './apisix.so' no file '/usr/local/lib/lua/5.1/apisix.so' no file '/usr/local/openresty-debug/luajit/lib/lua/5.1/apisix.so' no file '/usr/local/lib/lua/5.1/loadall.so' no file '/home/runner/.luarocks/lib/lua/5.1/apisix.so' no file '/usr/lib/lua/5.1/apisix.so' no file './apisix.so' no file '/usr/local/lib/lua/5.1/apisix.so' no file '/usr/lib/x86_64-linux-gnu/lua/5.1/apisix.so' no file '/usr/local/lib/lua/5.1/loadall.so' stack traceback: [C]: in function 'require' /usr/local/ap Error: /10 15:54:44 [error] 21838#21838: init_worker_by_lua error: /usr/local/apisix//deps/share/lua/5.1/apisix/router.lua:83: module 'apisix.ssl.router.radixtree_sni' not found: no field package.preload['apisix.ssl.router.radixtree_sni'] no file '/usr/local/apisix//deps/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/apisix//deps/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/apisix/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/apisix/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni.ljbc' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni/init.ljbc' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni.ljbc' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni/init.ljbc' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/site/lualib/apisix/ssl/router/radixtree_sni/init.lua' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/lualib/apisix/ssl/router/radixtree_sni/init.lua' no file './apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/openresty-debug/luajit/share/luajit-2.1.0-beta3/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni.lua' no file '/usr/local/share/lua/5.1/apisix/ssl/router/radixtree_sni/init.lua' ...</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>bugfix: check every etcd version, rather than only check the first one (#2380)</MESSAGE>
    <SHA>647d8d9a62668aa066775ce2a3dc4c32a9c03209</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>bugfix: install the Lua files in `apisix/ssl/router` . (#2383) fix #2382</MESSAGE>
      <SHA>d6b00bb6bc31e58d1fbddba01a1173f76445fb62</SHA>
      <PATCHEDFILES>
        <FILE>.travis/linux_apisix_master_luarocks_runner.sh</FILE>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
