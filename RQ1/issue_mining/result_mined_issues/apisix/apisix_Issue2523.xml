<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2523</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/2523</ISSUEURL>
  <TITLE>request help: jwt-auth plugin RS256 algorithm is not easy to use</TITLE>
  <DESCRIPTION>### Issue description I didn't find documentation for using the RS256 algorithm in the jwt plugin.After try, I achieved it. 1. : set a consumer and config the value of the jwt-auth option, use the private key here. ``` curl http://127.0.0.1:9080/apisix/admin/consumers -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d ' { &quot;username&quot;: &quot;RS256_algorithm&quot;, &quot;plugins&quot;: { &quot;jwt-auth&quot;: { &quot;key&quot;: &quot;RS256-key&quot;, &quot;secret&quot;: &quot;-----BEGIN RSA PRIVATE KEY-----\nMIICXwIBAAKBgQC50wrZORquQ1W6xS66Hvx9PA/Yp1kL4GosLCDYCFFeuyHemdZC\neDW+jzTfjdfDAExsZ4Z5/gNegOZC3nEIh/IDoEJHHMwziTz1jxh/7VXuFGvdZcIi\naPpKS6EZ+dVx/NfYMcyY+1gf1ASxJghOD+9Np7IepqKuAqxx1BVnk+rvmwIDAQAB\nAoGBAKqZ3vPfQWeL2kFGlse5ewVfBw1ZVp9YwSEcwmqT+GCIXWgIxHTx+CWjRF+Z\n0eTteTxtL0EAvAcfQEdUAWJbrQumsWR1hcWauDwbCRKH5zHCByT6TcJXZ4V5LjhY\neS8EcEruX+vIOwUt7Kr2mAjMy5nwtzhO6OFEmjFBlTLQwfWBAkEA2sXq/PP4cRDZ\nHQWD/d0fTtiHp54L078EAfzdCRhrDFlzAZCCyjANEsGgLJ/Ojjut7Nj0uLmyRMyW\n03j1s6nkUwJBANlx1CWn2XilMHrm6kyx2S6lptCuF7ff0+IDmynHlMCAx9YXApXh\nUbikerduA8q6gUgRL58kG04/v+0UcbbpXpkCQQCexC1yH3f4TfrSdfNBI90ZskhY\nW3lH1QMKkkCy3hap4qx0wTQ5mT+TkhM071DOpf7luNl4ycLW7Qa0N79QAIZjAkEA\nlvlYofiDnyeanIq9vRhywdeUFin6H9nRpIh6cCy5lFsV5Qi+68+wzPGunrNNALIz\n1xTPqsAIEXFj0bkzJxuraQJBAKKRBmn5pCJ5AckXQdsJz5oRBpSrizrsJrbwVHGx\nAZ0Yyd5HHTNck7R9DwTXJFqELEO1JwMXO/iXuj7H0WolPgs=\n-----END RSA PRIVATE KEY-----\n&quot;, &quot;algorithm&quot;: &quot;RS256&quot; } } } ``` 2. : add a Route or add a Service , and enable the jwt-auth plugin 3. : get the token in jwt-auth plugin ``` curl http://127.0.0.1:9080/apisix/plugin/jwt/sign?key=RS256-key -X GET ``` example: `eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJrZXkiOiJSUzI1Ni1rZXkiLCJleHAiOjE2MDM4MTY0MDV9.Wru7HT7xJLIIHdootPje7Xn9tbvPQAugKR0LFT0ALwRvjqJwPxtkNcCFcM-HOJgO0UVJCTzPe792CIs115fnfTORqMjN2H1g7Cbi2xcJaeDwZoyL1J27kaSJfcB42r4vyK3WQoG3Yk9y7zVVTAey-HpVvu-2m1CMOA2yNw7H810` 4. : update value of the jwt-auth option on same consumer config, use the public key here. ``` curl http://127.0.0.1:9080/apisix/admin/consumers -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d ' { &quot;username&quot;: &quot;RS256_algorithm&quot;, &quot;plugins&quot;: { &quot;jwt-auth&quot;: { &quot;key&quot;: &quot;RS256-key&quot;, &quot;secret&quot;: &quot;-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC50wrZORquQ1W6xS66Hvx9PA/Y\np1kL4GosLCDYCFFeuyHemdZCeDW+jzTfjdfDAExsZ4Z5/gNegOZC3nEIh/IDoEJH\nHMwziTz1jxh/7VXuFGvdZcIiaPpKS6EZ+dVx/NfYMcyY+1gf1ASxJghOD+9Np7Ie\npqKuAqxx1BVnk+rvmwIDAQAB\n-----END PUBLIC KEY-----\n&quot;, &quot;algorithm&quot;: &quot;RS256&quot; } } } ``` 5. : valid jwt success If use the RS256 algorithm, I want to set both the public and private keys at the same time. #2355 ### Environment * apisix version (cmd: `apisix version`): master(lastest version) * OS:macos</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>10</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>change(jwt-auth): split schema to adapt different occasions (#2459) Close #2288.</MESSAGE>
    <SHA>9500a8219aab57ca80da5e717470f2062403eadd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>example for #2523</MESSAGE>
      <SHA>033f5e91c0ca254b88a7c1d0ec0ffb9e560891d2</SHA>
      <PATCHEDFILES>
        <FILE>apisix/plugins/jwt-auth.lua</FILE>
        <FILE>t/plugin/jwt-auth.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix: jwt-auth plugin RS256 algorithm is not easy to use. (#2523) fix: add more test cases for jwt plugin. (#2355) fix #2523 fix #2355</MESSAGE>
      <SHA>6630ae1452d37486404d00d3c5b15b133b37893d</SHA>
      <PATCHEDFILES>
        <FILE>apisix/plugins/jwt-auth.lua</FILE>
        <FILE>doc/plugins/jwt-auth.md</FILE>
        <FILE>doc/zh-cn/plugins/jwt-auth.md</FILE>
        <FILE>t/plugin/jwt-auth.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>feat(jwt-auth): support to use of the RS256 algorithm (#2594) * example for #2523 * fix: jwt-auth plugin RS256 algorithm is not easy to use. (#2523) fix: add more test cases for jwt plugin. (#2355) fix #2523 fix #2355</MESSAGE>
      <SHA>27875e57901ff1bbb1161bbd55364ecef2990e27</SHA>
      <PATCHEDFILES>
        <FILE>apisix/plugins/jwt-auth.lua</FILE>
        <FILE>doc/plugins/jwt-auth.md</FILE>
        <FILE>doc/zh-cn/plugins/jwt-auth.md</FILE>
        <FILE>t/plugin/jwt-auth.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
