<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>2771</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/2771</ISSUEURL>
  <TITLE>bug: admin api matches config ID by prefix</TITLE>
  <DESCRIPTION>### Issue description Admin api appears to match config Id by prefix instead of an exact string match. ### Environment * apisix version (cmd: `apisix version`): 2.0 * OS: osx + linux ### Minimal test code / Steps to reproduce the issue 1. PUT a new upstream with id: abc 2. GET upstream by id: ab ### What's the actual result? (including assertion message &amp; call stack if applicable) The upstream abc is returned. ### What's the expected result? A NOT_FOUND is expected here</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>docs: add a English link of node-status.md (#2753)</MESSAGE>
    <SHA>c1ac7d6952217592f711ebc3750d8b211bc8a981</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix(etcd): avoid getting with prefix Fix #2771.</MESSAGE>
      <SHA>279f945169a9874edcfaebb025e0e0ad0a31aa1a</SHA>
      <PATCHEDFILES>
        <FILE>apisix/core/config_etcd.lua</FILE>
        <FILE>apisix/core/etcd.lua</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix(etcd): avoid getting with prefix Fix #2771.</MESSAGE>
      <SHA>1c323980b3871e3cb76669abde7f0e648bc13e06</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/consumers.lua</FILE>
        <FILE>apisix/admin/global_rules.lua</FILE>
        <FILE>apisix/admin/plugin_metadata.lua</FILE>
        <FILE>apisix/admin/proto.lua</FILE>
        <FILE>apisix/admin/routes.lua</FILE>
        <FILE>apisix/admin/services.lua</FILE>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>apisix/admin/stream_routes.lua</FILE>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/core/config_etcd.lua</FILE>
        <FILE>apisix/core/etcd.lua</FILE>
        <FILE>t/core/etcd.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix(etcd): avoid getting with prefix Fix #2771.</MESSAGE>
      <SHA>0b97a03ff00e7553ebf8545399e7621a405f4161</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/consumers.lua</FILE>
        <FILE>apisix/admin/global_rules.lua</FILE>
        <FILE>apisix/admin/plugin_metadata.lua</FILE>
        <FILE>apisix/admin/proto.lua</FILE>
        <FILE>apisix/admin/routes.lua</FILE>
        <FILE>apisix/admin/services.lua</FILE>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>apisix/admin/stream_routes.lua</FILE>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/core/config_etcd.lua</FILE>
        <FILE>apisix/core/etcd.lua</FILE>
        <FILE>t/core/etcd.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix(etcd): avoid getting with prefix Fix #2771.</MESSAGE>
      <SHA>ff11d1b92e26ec00486c571157044e61fe090436</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/consumers.lua</FILE>
        <FILE>apisix/admin/global_rules.lua</FILE>
        <FILE>apisix/admin/plugin_metadata.lua</FILE>
        <FILE>apisix/admin/proto.lua</FILE>
        <FILE>apisix/admin/routes.lua</FILE>
        <FILE>apisix/admin/services.lua</FILE>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>apisix/admin/stream_routes.lua</FILE>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/core/config_etcd.lua</FILE>
        <FILE>apisix/core/etcd.lua</FILE>
        <FILE>t/core/etcd.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix(etcd): avoid getting with prefix (#2772) Fix #2771.</MESSAGE>
      <SHA>8983a8dd278fec89d40b3d9a14eca9ecf9a187fd</SHA>
      <PATCHEDFILES>
        <FILE>apisix/admin/consumers.lua</FILE>
        <FILE>apisix/admin/global_rules.lua</FILE>
        <FILE>apisix/admin/plugin_metadata.lua</FILE>
        <FILE>apisix/admin/proto.lua</FILE>
        <FILE>apisix/admin/routes.lua</FILE>
        <FILE>apisix/admin/services.lua</FILE>
        <FILE>apisix/admin/ssl.lua</FILE>
        <FILE>apisix/admin/stream_routes.lua</FILE>
        <FILE>apisix/admin/upstreams.lua</FILE>
        <FILE>apisix/core/config_etcd.lua</FILE>
        <FILE>apisix/core/etcd.lua</FILE>
        <FILE>t/core/etcd.t</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
