<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>6225</ISSUENO>
  <ISSUEURL>https://github.com/apache/apisix/issues/6225</ISSUEURL>
  <TITLE>request help: install failed via source on Mac(2.12.0)</TITLE>
  <DESCRIPTION>### Issue description after `make deps` successfully, but `make install` or `sudo make install` failed. it seems no authority to mkdir dir `/usr/share/lua` . Installed lua with brew, so this related dir should locate at `/usr/local/Cellar/lua/5.1/share` . ```bash ➜ apisix git:(master) sudo make install Password: install -d /usr/local/apisix/ install -d /usr/local/apisix/logs/ install -d /usr/local/apisix/conf/cert install conf/mime.types /usr/local/apisix/conf/mime.types install conf/config.yaml /usr/local/apisix/conf/config.yaml install conf/config-default.yaml /usr/local/apisix/conf/config-default.yaml install conf/debug.yaml /usr/local/apisix/conf/debug.yaml install conf/cert/* /usr/local/apisix/conf/cert/ install -d /usr/share/lua/5.1/apisix install: mkdir /usr/share/lua: Operation not permitted make: *** [install] Error 71 ``` ### Environment - apisix version (cmd: `apisix version`): 2.12.0 - OS (cmd: `uname -a`): Darwin Kwanhur-MacBook-Pro.local 20.6.0 Darwin Kernel Version 20.6.0: Tue Oct 12 18:33:42 PDT 2021; root:xnu-7195.141.8~1/RELEASE_X86_64 x86_64 - luarocks version, if the issue is about installation (cmd: `luarocks --version`): /usr/local/bin/luarocks 3.7.0 ```bash ➜ brew info lua lua: stable 5.4.3 (bottled) Powerful, lightweight programming language https://www.lua.org/ /usr/local/Cellar/lua/5.4.3 (29 files, 746.3KB) * Poured from bottle on 2021-09-19 at 21:07:48 From: git://mirrors.ustc.edu.cn/homebrew-core.git/Formula/lua.rb License: MIT ``` ```bash ➜ brew info luarocks luarocks: stable 3.7.0 (bottled), HEAD Package manager for the Lua programming language https://luarocks.org/ /usr/local/Cellar/luarocks/3.7.0 (105 files, 715KB) * Poured from bottle on 2021-09-19 at 21:22:43 From: git://mirrors.ustc.edu.cn/homebrew-core.git/Formula/luarocks.rb License: MIT ```</DESCRIPTION>
  <REPONAME>apisix</REPONAME>
  <TIMEDIFFERENCEDAYS>22</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>ci: support for generating flame graph (#6136)</MESSAGE>
    <SHA>d8b9b709a8064ec1893df4b8acdc91f97962dc85</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>docs(build): add guide for install failed on MacOS close #6225 Signed-off-by: kwanhur &lt;huang_hua2012@163.com&gt;</MESSAGE>
      <SHA>8ff4006ff73a6b347813bb2a6d9af7ebca92d9db</SHA>
      <PATCHEDFILES>
        <FILE>docs/en/latest/how-to-build.md</FILE>
        <FILE>docs/zh/latest/how-to-build.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>docs(build): add guide for install failed on MacOS close #6225 Signed-off-by: kwanhur &lt;huang_hua2012@163.com&gt;</MESSAGE>
      <SHA>d5da0a111741c31f1ba58d1811e428456632cba5</SHA>
      <PATCHEDFILES>
        <FILE>docs/en/latest/how-to-build.md</FILE>
        <FILE>docs/zh/latest/how-to-build.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
