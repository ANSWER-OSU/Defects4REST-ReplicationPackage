<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5251</ISSUENO>
  <ISSUEURL>https://github.com/hummingbot/hummingbot/issues/5251</ISSUEURL>
  <TITLE>Binance market order without price fail with illegal characters</TITLE>
  <DESCRIPTION>**Describe the bug** New market orders to Binance without a price (which is optional) fail with illegal characters because price is being submitted as string NaN. **Steps To Reproduce** Create a custom strategy that utilises market orders and attempt to submit a market order without a price e.g `if side == 'buy': order_id = self.buy_with_specific_market( market_trading_pair_tuple=self._market_info, amount=self._order_amount, order_type=OrderType.MARKET )` Here are the steps to reproduce the issue (see attachments in the section below): 1. Set up your configuration file with these parameters: ... 2. Start the bot using this command: ... ... **Release version** v1.3.0 **Error Message** `{2022-04-24 03:02:10,118 - 28767 - hummingbot.connector.exchange.binance.binance_exchange - NETWORK - Error submitting SELL MARKET order to Binance for 0.00020000 BTC-AUD NaN. Traceback (most recent call last): File &quot;/opt/hummingbot/hummingbot/connector/exchange/binance/binance_exchange.py&quot;, line 526, in _create_order order_result = await self._api_request( File &quot;/opt/hummingbot/hummingbot/connector/exchange/binance/binance_exchange.py&quot;, line 1010, in _api_request return await web_utils.api_request( File &quot;/opt/hummingbot/hummingbot/connector/exchange/binance/binance_web_utils.py&quot;, line 113, in api_request raise IOError(f&quot;The request to Binance failed. Error: {error_response}. Request: {request}&quot;) OSError: The request to Binance failed. Error: {&quot;code&quot;:-1100,&quot;msg&quot;:&quot;Illegal characters found in parameter 'price'; legal range is '^([0-9]{1,20})(\\.[0-9]{1,20})?$'.&quot;}. Request: RESTRequest(method=POST, url='https://api.binance.com/api/v3/order', params=None, data={'symbol': 'BTCAUD', 'side': 'SELL', 'quantity': '0.00020000', 'type': 'MARKET', 'newClientOrderId': 'x-XEKWYICXSBCAD1805984ff5179a47b1306', 'price': 'NaN'}, headers={'Content-Type': 'application/json'}, is_auth_required=True, throttler_limit_id='/order') 2022-04-24 03:02:10,119 - 28767 - hummingbot.connector.exchange.binance.binance_exchange - WARNING - The request to Binance failed. Error: {&quot;code&quot;:-1100,&quot;msg&quot;:&quot;Illegal characters found in parameter 'price'; legal range is '^([0-9]{1,20})(\\.[0-9]{1,20})?$'.&quot;}. Request: RESTRequest(method=POST, url='https://api.binance.com/api/v3/order', params=None, data={'symbol': 'BTCAUD', 'side': 'SELL', 'quantity': '0.00020000', 'type': 'MARKET', 'newClientOrderId': 'x-XEKWYICXSBCAD1805984ff5179a47b1306', 'price': 'NaN'}, headers={'Content-Type': 'application/json'}, is_auth_required=True, throttler_limit_id='/order') 2022-04-24 03:02:10,120 - 28767 - hummingbot.core.event.event_reporter - EVENT_LOG - {&quot;timestamp&quot;: 1650769330.0, &quot;order_id&quot;: &quot;x-XEKWYICXSBCAD1805984ff5179a47b1306&quot;, &quot;order_type&quot;: &quot;OrderType.MARKET&quot;, &quot;event_name&quot;: &quot;MarketOrderFailureEvent&quot;, &quot;event_source&quot;: &quot;binance&quot;} 2022-04-24 03:02:10,120 - 28767 - hummingbot.connector.client_order_tracker - INFO - Order x-XEKWYICXSBCAD1805984ff5179a47b1306 has failed. Order Update: OrderUpdate(trading_pair='BTC-AUD', update_timestamp=1650769330.0, new_state=&lt;OrderState.FAILED: 6&gt;, client_order_id='x-XEKWYICXSBCAD1805984ff5179a47b1306', exchange_order_id=None)` *WARNING: Do NOT publish any exchange API keys or your wallet's private key. Whoever has access to them may steal your assets!* **discord username:** J0E</DESCRIPTION>
  <REPONAME>hummingbot</REPONAME>
  <TIMEDIFFERENCEDAYS>79</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5229 from hummingbot/fix/kucoin_coinflex_test fix / added kucoin_testnet and coinflex to fix unknown status</MESSAGE>
    <SHA>4d39601155d6ca4920ba796134df8d7086355c56</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Binance market order without price fail with illegal characters #5251</MESSAGE>
      <SHA>e2f4df69ddf0e7ac09cb6c07daed0e951764ce6c</SHA>
      <PATCHEDFILES>
        <FILE>hummingbot/connector/exchange/binance/binance_exchange.py</FILE>
        <FILE>test/hummingbot/connector/exchange/binance/test_binance_exchange.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
