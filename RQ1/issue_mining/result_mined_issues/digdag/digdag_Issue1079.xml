<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1079</ISSUENO>
  <ISSUEURL>https://github.com/treasure-data/digdag/issues/1079</ISSUEURL>
  <TITLE>Authenticator as a System Plugin</TITLE>
  <DESCRIPTION>Hi, We need to integrate Digdag within a system using oAuth2. Before starting working on a PR we'd like to have feedback on our plans: 1. Making the Authenticator interface a system plugin and move it to the SPIs. 2. Make the JwtAuthenticator the default plugin to keep things as they are. 3. Create an oAuth2 &quot;Authenticator&quot; plugin that could be enabled and configured by properties. 4. Make the WebUI able to do oAuth2 Implicit Grant auth when configured to do so. 1 and 2 would be one PR while 3 and 4 another one. Let me know of any issue with this plan. Thanks, Pierre</DESCRIPTION>
  <REPONAME>digdag</REPONAME>
  <TIMEDIFFERENCEDAYS>104</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #1075 from ehaupt/master Add an example workflow with instructions on how to call via REST API.</MESSAGE>
    <SHA>9f52d355ab2bc4cf7082164fcea6efd92e0d20de</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Issue #1079: Moved the Authenticator interface to the SPI module. - Made the Authenticator implementations to be provided as system plugins. - Refactored the JwtAuthenticator into a plugin and made it the default one to keep everything backward compatible.</MESSAGE>
      <SHA>66de22c8f5885b10215d913af3403b7fa2641b65</SHA>
      <PATCHEDFILES>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Server.java</FILE>
        <FILE>digdag-docs/src/command_reference.rst</FILE>
        <FILE>digdag-docs/src/internal.md</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/AuthRequestFilter.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerBootstrap.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerConfig.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerModule.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthRequestFilterTest.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthenticatorTest.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/Authenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfig.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfigProvider.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorPlugin.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/UserConfig.java</FILE>
        <FILE>digdag-standards/src/main/resources/META-INF/services/io.digdag.spi.Plugin</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge pull request #1098 from pdelagrave/auth_spi Issue #1079: Moved the Authenticator interface to the SPI module.</MESSAGE>
      <SHA>9b36743e2e348269d8010f66aa1bb9f6a78ee2ac</SHA>
      <PATCHEDFILES>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Server.java</FILE>
        <FILE>digdag-docs/src/command_reference.rst</FILE>
        <FILE>digdag-docs/src/internal.md</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/AuthRequestFilter.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerBootstrap.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerConfig.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerModule.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthRequestFilterTest.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthenticatorTest.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/Authenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfig.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfigProvider.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorPlugin.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/UserConfig.java</FILE>
        <FILE>digdag-standards/src/main/resources/META-INF/services/io.digdag.spi.Plugin</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Issue #1079: Moved the Authenticator interface to the SPI module. - Made the Authenticator implementations to be provided as system plugins. - Refactored the JwtAuthenticator into a plugin and made it the default one to keep everything backward compatible.</MESSAGE>
      <SHA>f1bd98d7848e9ebdc119cd86da3679ebe831ba7a</SHA>
      <PATCHEDFILES>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Server.java</FILE>
        <FILE>digdag-docs/src/command_reference.rst</FILE>
        <FILE>digdag-docs/src/internal.md</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/AuthRequestFilter.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerBootstrap.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerConfig.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerModule.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthRequestFilterTest.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthenticatorTest.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/Authenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfig.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfigProvider.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorPlugin.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/UserConfig.java</FILE>
        <FILE>digdag-standards/src/main/resources/META-INF/services/io.digdag.spi.Plugin</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Issue #1079: Moved the Authenticator interface to the SPI module. - Made the Authenticator implementations to be provided as system plugins. - Refactored the JwtAuthenticator into a plugin and made it the default one to keep everything backward compatible.</MESSAGE>
      <SHA>a140d0376b6f038a59661a47924434bbd46eba5c</SHA>
      <PATCHEDFILES>
        <FILE>digdag-cli/src/main/java/io/digdag/cli/Server.java</FILE>
        <FILE>digdag-docs/src/internal.md</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/AuthRequestFilter.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerBootstrap.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerConfig.java</FILE>
        <FILE>digdag-server/src/main/java/io/digdag/server/ServerModule.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthRequestFilterTest.java</FILE>
        <FILE>digdag-server/src/test/java/io/digdag/server/AuthenticatorTest.java</FILE>
        <FILE>digdag-spi/src/main/java/io/digdag/spi/Authenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticator.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfig.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorConfigProvider.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/JwtAuthenticatorPlugin.java</FILE>
        <FILE>digdag-standards/src/main/java/io/digdag/standards/auth/jwt/UserConfig.java</FILE>
        <FILE>digdag-standards/src/main/resources/META-INF/services/io.digdag.spi.Plugin</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
