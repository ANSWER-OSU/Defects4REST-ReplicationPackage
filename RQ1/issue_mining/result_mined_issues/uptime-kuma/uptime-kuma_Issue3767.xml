<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>3767</ISSUENO>
  <ISSUEURL>https://github.com/louislam/uptime-kuma/issues/3767</ISSUEURL>
  <TITLE>Podman container Pending without healthcheck</TITLE>
  <DESCRIPTION>### ⚠️ Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue ### ️ Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy) ### Description Podman API provide State.Health with empty values for containers without healthcheck, which detected as PENDING by Kuma. Podman container **with** healthcheck defined: ``` .... &quot;State&quot;:{ &quot;Status&quot;:&quot;running&quot;, &quot;Running&quot;:true, &quot;Paused&quot;:false, &quot;Restarting&quot;:false, &quot;OOMKilled&quot;:false, &quot;Dead&quot;:false, &quot;Pid&quot;:165204, &quot;ExitCode&quot;:0, &quot;Error&quot;:&quot;&quot;, &quot;StartedAt&quot;:&quot;2023-09-13T12:01:30.947248168Z&quot;, &quot;FinishedAt&quot;:&quot;0001-01-01T00:00:00Z&quot;, &quot;Health&quot;:{ &quot;Status&quot;:&quot;healthy&quot;, &quot;FailingStreak&quot;:0, &quot;Log&quot;:[ SKIPPED ] } }, .... ``` Podman container **without** healthcheck defined: ``` .... &quot;State&quot;:{ &quot;Status&quot;:&quot;running&quot;, &quot;Running&quot;:true, &quot;Paused&quot;:false, &quot;Restarting&quot;:false, &quot;OOMKilled&quot;:false, &quot;Dead&quot;:false, &quot;Pid&quot;:3089279, &quot;ExitCode&quot;:0, &quot;Error&quot;:&quot;&quot;, &quot;StartedAt&quot;:&quot;2023-09-19T09:41:10.64045291Z&quot;, &quot;FinishedAt&quot;:&quot;0001-01-01T00:00:00Z&quot;, &quot;Health&quot;:{ &quot;Status&quot;:&quot;&quot;, &quot;FailingStreak&quot;:0, &quot;Log&quot;:null } }, .... ``` ### Reproduction steps * run container without healthcheck in podman * configure kuma to monitor it ### Expected behavior Kuma detect container as UP ### Actual Behavior Kuma detect container as PENDING ### Uptime-Kuma Version Uptime Kuma Version: 1.23.1 ### Operating System and Arch Fedora 37 amd64 ### Browser Firefox ### Docker Version podman version 4.6.2 ### NodeJS Version _No response_ ### Relevant log output ```shell Kuma log: 2023-09-19T17:42:08+06:00 [MONITOR] WARN: Monitor #25 'TEST': Pending: | Max retries: 1 | Retry: 0 | Retry Interval: 60 seconds | Type: docker TcpDump: GET /containers/keen_torvalds/json HTTP/1.1 Accept: */* User-Agent: Uptime-Kuma/1.23.1 Host: podmanproxy:2375 Connection: close HTTP/1.1 200 OK Api-Version: 1.41 Content-Type: application/json Libpod-Api-Version: 4.6.2 Server: Libpod/4.6.2 (linux) X-Reference-Id: 0xc000be6558 Date: Tue, 19 Sep 2023 11:41:08 GMT Connection: close Transfer-Encoding: chunked {&quot;Id&quot;:&quot;496a2cb6e16a7822d7669be2ebbf1f32f6d09751d677a93d54b67c3020e66f72&quot;,&quot;Created&quot;:&quot;2023-09-19T09:41:10.589808818Z&quot;,&quot;Path&quot;:&quot;sh&quot;,&quot;Args&quot;:[&quot;-c&quot;,&quot;apk add tcpdump socat; tcpdump -w - -Unq tcp port not 9999 | socat -t0 -T0 - tcp:laptop.lan:9999&quot;],&quot;State&quot;:{&quot;Status&quot;:&quot;running&quot;,&quot;Running&quot;:true,&quot;Paused&quot;:false,&quot;Restarting&quot;:false,&quot;OOMKilled&quot;:false,&quot;Dead&quot;:false,&quot;Pid&quot;:3089279,&quot;ExitCode&quot;:0,&quot;Error&quot;:&quot;&quot;,&quot;StartedAt&quot;:&quot;2023-09-19T09:41:10.64045291Z&quot;,&quot;FinishedAt&quot;:&quot;0001-01-01T00:00:00Z&quot;,&quot;Health&quot;:{&quot;Status&quot;:&quot;&quot;,&quot;FailingStreak&quot;:0,&quot;Log&quot;:null}},&quot;Image&quot;:&quot;sha256:7e01a0d0a1dcd9e539f8e9bbd80106d59efbdf97293b3d38f5d7a34501526cdb&quot;,&quot;ResolvConfPath&quot;:&quot;/run/containers/storage/btrfs-containers/42fca70f376092b3d93fbe719df76b824c99ea689fbb8bfcab416371d17d6d18/userdata/resolv.conf&quot;,&quot;HostnamePath&quot;:&quot;/run/containers/storage/btrfs-containers/496a2cb6e16a7822d7669be2ebbf1f32f6d09751d677a93d54b67c3020e66f72/userdata/hostname&quot;,&quot;HostsPath&quot;:&quot;/run/containers/storage/btrfs-containers/42fca70f376092b3d93fbe719df76b824c99ea689fbb8bfcab416371d17d6d18/userdata/hosts&quot;,&quot;LogPath&quot;:&quot;&quot;,&quot;Name&quot;:&quot;/keen_torvalds&quot;,&quot;RestartCount&quot;:0,&quot;Driver&quot;:&quot;btrfs&quot;,&quot;Platform&quot;:&quot;linux&quot;,&quot;MountLabel&quot;:&quot;&quot;,&quot;ProcessLabel&quot;:&quot;&quot;,&quot;AppArmorProfile&quot;:&quot;&quot;,&quot;ExecIDs&quot;:[],&quot;HostConfig&quot;:{&quot;Binds&quot;:[],&quot;ContainerIDFile&quot;:&quot;&quot;,&quot;LogConfig&quot;:{&quot;Type&quot;:&quot;journald&quot;,&quot;Config&quot;:null},&quot;NetworkMode&quot;:&quot;container:42fca70f376092b3d93fbe719df76b824c99ea689fbb8bfcab416371d17d6d18&quot;,&quot;PortBindings&quot;:{},&quot;RestartPolicy&quot;:{&quot;Name&quot;:&quot;&quot;,&quot;MaximumRetryCount&quot;:0},&quot;AutoRemove&quot;:true,&quot;VolumeDriver&quot;:&quot;&quot;,&quot;VolumesFrom&quot;:null,&quot;ConsoleSize&quot;:[0,0],&quot;CapAdd&quot;:[&quot;NET_RAW&quot;],&quot;CapDrop&quot;:[],&quot;CgroupnsMode&quot;:&quot;&quot;,&quot;Dns&quot;:[],&quot;DnsOptions&quot;:[],&quot;DnsSearch&quot;:[],&quot;ExtraHosts&quot;:[],&quot;GroupAdd&quot;:[],&quot;IpcMode&quot;:&quot;shareable&quot;,&quot;Cgroup&quot;:&quot;&quot;,&quot;Links&quot;:null,&quot;OomScoreAdj&quot;:0,&quot;PidMode&quot;:&quot;private&quot;,&quot;Privileged&quot;:false,&quot;PublishAllPorts&quot;:false,&quot;ReadonlyRootfs&quot;:false,&quot;SecurityOpt&quot;:[],&quot;UTSMode&quot;:&quot;private&quot;,&quot;UsernsMode&quot;:&quot;&quot;,&quot;ShmSize&quot;:65536000,&quot;Runtime&quot;:&quot;oci&quot;,&quot;Isolation&quot;:&quot;&quot;,&quot;CpuShares&quot;:0,&quot;Memory&quot;:0,&quot;NanoCpus&quot;:0,&quot;CgroupParent&quot;:&quot;&quot;,&quot;BlkioWeight&quot;:0,&quot;BlkioWeightDevice&quot;:null,&quot;BlkioDeviceReadBps&quot;:null,&quot;BlkioDeviceWriteBps&quot;:null,&quot;BlkioDeviceReadIOps&quot;:null,&quot;BlkioDeviceWriteIOps&quot;:null,&quot;CpuPeriod&quot;:0,&quot;CpuQuota&quot;:0,&quot;CpuRealtimePeriod&quot;:0,&quot;CpuRealtimeRuntime&quot;:0,&quot;CpusetCpus&quot;:&quot;&quot;,&quot;CpusetMems&quot;:&quot;&quot;,&quot;Devices&quot;:[],&quot;DeviceCgroupRules&quot;:null,&quot;DeviceRequests&quot;:null,&quot;MemoryReservation&quot;:0,&quot;MemorySwap&quot;:0,&quot;MemorySwappiness&quot;:0,&quot;OomKillDisable&quot;:false,&quot;PidsLimit&quot;:2048,&quot;Ulimits&quot;:[{&quot;Name&quot;:&quot;RLIMIT_NPROC&quot;,&quot;Hard&quot;:4194304,&quot;Soft&quot;:4194304}],&quot;CpuCount&quot;:0,&quot;CpuPercent&quot;:0,&quot;IOMaximumIOps&quot;:0,&quot;IOMaximumBandwidth&quot;:0,&quot;MaskedPaths&quot;:null,&quot;ReadonlyPaths&quot;:null},&quot;GraphDriver&quot;:{&quot;Data&quot;:null,&quot;Name&quot;:&quot;btrfs&quot;},&quot;SizeRootFs&quot;:0,&quot;Mounts&quot;:[],&quot;Config&quot;:{&quot;Hostname&quot;:&quot;496a2cb6e16a&quot;,&quot;Domainname&quot;:&quot;&quot;,&quot;User&quot;:&quot;&quot;,&quot;AttachStdin&quot;:false,&quot;AttachStdout&quot;:false,&quot;AttachStderr&quot;:false,&quot;ExposedPorts&quot;:{&quot;2375/tcp&quot;:{}},&quot;Tty&quot;:true,&quot;OpenStdin&quot;:true,&quot;StdinOnce&quot;:false,&quot;Env&quot;:[&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;,&quot;TERM=xterm&quot;,&quot;container=podman&quot;,&quot;HOME=/root&quot;,&quot;HOSTNAME=496a2cb6e16a&quot;],&quot;Cmd&quot;:[&quot;sh&quot;,&quot;-c&quot;,&quot;apk add tcpdump socat; tcpdump -w - -Unq tcp port not 9999 | socat -t0 -T0 - tcp:gram.lan:9999&quot;],&quot;Image&quot;:&quot;docker.io/library/alpine:latest&quot;,&quot;Volumes&quot;:null,&quot;WorkingDir&quot;:&quot;/&quot;,&quot;Entrypoint&quot;:[],&quot;OnBuild&quot;:null,&quot;Labels&quot;:{},&quot;StopSignal&quot;:&quot;15&quot;,&quot;StopTimeout&quot;:10},&quot;NetworkSettings&quot;:{&quot;Bridge&quot;:&quot;&quot;,&quot;SandboxID&quot;:&quot;&quot;,&quot;HairpinMode&quot;:false,&quot;LinkLocalIPv6Address&quot;:&quot;&quot;,&quot;LinkLocalIPv6PrefixLen&quot;:0,&quot;Ports&quot;:{&quot;2375/tcp&quot;:null},&quot;SandboxKey&quot;:&quot;/run/netns/netns-0ceac2ae-63a2-0a69-b779-3f25d373ed50&quot;,&quot;SecondaryIPAddresses&quot;:null,&quot;SecondaryIPv6Addresses&quot;:null,&quot;EndpointID&quot;:&quot;&quot;,&quot;Gateway&quot;:&quot;&quot;,&quot;GlobalIPv6Address&quot;:&quot;&quot;,&quot;GlobalIPv6PrefixLen&quot;:0,&quot;IPAddress&quot;:&quot;&quot;,&quot;IPPrefixLen&quot;:0,&quot;IPv6Gateway&quot;:&quot;&quot;,&quot;MacAddress&quot;:&quot;&quot;,&quot;Networks&quot;:{&quot;podwg&quot;:{&quot;IPAMConfig&quot;:null,&quot;Links&quot;:null,&quot;Aliases&quot;:[&quot;42fca70f3760&quot;],&quot;NetworkID&quot;:&quot;podwg&quot;,&quot;EndpointID&quot;:&quot;&quot;,&quot;Gateway&quot;:&quot;10.89.0.1&quot;,&quot;IPAddress&quot;:&quot;10.89.0.133&quot;,&quot;IPPrefixLen&quot;:24,&quot;IPv6Gateway&quot;:&quot;&quot;,&quot;GlobalIPv6Address&quot;:&quot;&quot;,&quot;GlobalIPv6PrefixLen&quot;:0,&quot;MacAddress&quot;:&quot;5a:bb:0a:f9:56:a0&quot;,&quot;DriverOpts&quot;:null}}}} ```</DESCRIPTION>
  <REPONAME>uptime-kuma</REPONAME>
  <TIMEDIFFERENCEDAYS>159</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Corrected &quot;Login&quot; &amp; &quot;Logout&quot; to verbs (EN) (#4320) Co-authored-by: Louis Lam &lt;louislam@users.noreply.github.com&gt;</MESSAGE>
    <SHA>8456912ae3df3e9ed705636cf8e509690f890f2d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Treat empty docker Health check as healthy to support podman Podman will include the Health dict even if no health check is defined for the container (see https://github.com/containers/podman/issues/20029). This makes the check in uptime-kuma stuck in Pending Fixes https://github.com/louislam/uptime-kuma/issues/3767</MESSAGE>
      <SHA>286f28962a734ccd6ac1399dad4dc0ee521430a9</SHA>
      <PATCHEDFILES>
        <FILE>server/model/monitor.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Treat empty docker Health check as healthy to support podman Podman will include the Health dict even if no health check is defined for the container (see https://github.com/containers/podman/issues/20029). This makes the check in uptime-kuma stuck in Pending Fixes https://github.com/louislam/uptime-kuma/issues/3767</MESSAGE>
      <SHA>9bc476b7f530fdf3ac2b4bcd885b94c82cf02cb1</SHA>
      <PATCHEDFILES>
        <FILE>server/model/monitor.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix #3767 by @nougad - treat empty healthcheck reported by podman as up</MESSAGE>
      <SHA>68c85f29ca43f11b180e710c006b7919dadb2888</SHA>
      <PATCHEDFILES>
        <FILE>server/model/monitor.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>fix #3767 by @nougad - treat empty healthcheck reported by podman as up</MESSAGE>
      <SHA>7f5dfcc05106724e410372303da6bd7c4657e47a</SHA>
      <PATCHEDFILES>
        <FILE>server/model/monitor.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
