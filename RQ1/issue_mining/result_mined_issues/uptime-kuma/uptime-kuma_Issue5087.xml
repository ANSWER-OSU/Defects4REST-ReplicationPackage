<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5087</ISSUENO>
  <ISSUEURL>https://github.com/louislam/uptime-kuma/issues/5087</ISSUEURL>
  <TITLE>Data too long for column `info_json` when monitoring cloudfunctions.net Endpoints</TITLE>
  <DESCRIPTION>### I have found these related issues/pull requests - ### ️ Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy) ### Description When monitoring Google cloudfunctions `ER_DATA_TOO_LONG` errors are thrown in the logs and no Certificate Expiry dates are shown. ### Reproduction steps Any fake cloudfunction url does the trick for testing even though it returns 404 - Like: https://abc.cloudfunctions.net/ ### Expected behavior No errors in the logs / Certificate Expiry etc. are displayed correctly. Considering that the JSON it's trying to save has a significant amount of characters it probably makes sense to strip some infos from it..? ### Actual Behavior No certificate expiry date is visible / errors are shown in logs ### Uptime-Kuma Version 2.0.0-dev ### Operating System and Arch Docker ### Browser Google Chrome 128.0.6613.114 ### ️ Deployment Environment - Runtime: Docker - Database: MariaDB 11.4.3 - Filesystem used to store the database on: HDD - number of monitors: 5 ### Relevant log output ```shell uptime-kuma | code: 'ER_DATA_TOO_LONG', uptime-kuma | errno: 1406, uptime-kuma | sqlState: '22001', uptime-kuma | sqlMessage: &quot;Data too long for column 'info_json' at row 1&quot;, uptime-kuma | sql: 'insert into `monitor_tls_info` (`info_json`, `monitor_id`) values (\'{\\&quot;valid\\&quot;:true,\\&quot;certInfo\\&quot;:{\\&quot;subject\\&quot;:{\\&quot;CN\\&quot;:\\&quot;misc.google.com\\&quot;},\\&quot;issuer\\&quot;:{\\&quot;C\\&quot;:\\&quot;US\\&quot;,\\&quot;O\\&quot;:\\&quot;Google Trust Services\\&quot;,\\&quot;CN\\&quot;:\\&quot;WR2\\&quot;},\\&quot;subjectaltname\\&quot;:\\&quot;DNS:misc.google.com, DNS:*.actions.google.com, .... :EC:'... 60832 more characters uptime-kuma | } ```</DESCRIPTION>
  <REPONAME>uptime-kuma</REPONAME>
  <TIMEDIFFERENCEDAYS>52</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Add serverchan3 support for serverchan notification provider (#5145) Co-authored-by: Frank Elsinga &lt;frank@elsinga.de&gt;</MESSAGE>
    <SHA>00717755254b441c6bfb7cecab15e5a741507499</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>created new migration script for #5087 info_json</MESSAGE>
      <SHA>068054ccbe516725b93d31bb0ae50f4bc0164122</SHA>
      <PATCHEDFILES>
        <FILE>db/knex_migrations/2024-09-3-0000-alter-info_json.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #5087</MESSAGE>
      <SHA>5731c596e13f98773d0f854cf090e0bfdf05cc54</SHA>
      <PATCHEDFILES>
        <FILE>db/knex_migrations/2024-11-27-1927-fix-info-json-data-type.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix #5087 and fix migration state (#5260)</MESSAGE>
      <SHA>277d6fe0cee9306d4e298d8ed53f5474c3682928</SHA>
      <PATCHEDFILES>
        <FILE>db/knex_migrations/2024-11-27-1927-fix-info-json-data-type.js</FILE>
        <FILE>server/database.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
