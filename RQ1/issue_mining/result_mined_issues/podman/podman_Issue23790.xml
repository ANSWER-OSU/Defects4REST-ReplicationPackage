<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23790</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23790</ISSUEURL>
  <TITLE>Failed to start podman-clean-transient.service: Unit boot-complete.target not found.</TITLE>
  <DESCRIPTION>### Discussed in https://github.com/containers/podman/discussions/23716 &lt;div type='discussions-op-text'&gt; &lt;sup&gt;Originally posted by **cwrau** August 22, 2024&lt;/sup&gt; I found the service `podman-clean-transient.service` and having the description ``` This service runs once each boot to remove potential leftover container state from previous boots. This is needed when using transient storage mode in podman where the database and other configs are stored in tmpfs, but some other files are not. If we don't run this after an unclean boot then there may be some leftover files that grow over time. ``` I found it good to be enabled, but starting it I got the error from the title; ``` Failed to start podman-clean-transient.service: Unit boot-complete.target not found. ``` How is this supposed to work? The user scope doesn't have this target, it's only available for the system scope. Or am I missing something?&lt;/div&gt; --- [Sounds like a bug as the unit only works as root.](https://github.com/containers/podman/discussions/23716#discussioncomment-10432290)</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>65</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #24407 from Luap99/readthedocs readthedocs: build extra formats</MESSAGE>
    <SHA>f139bc17b3cc34c010c9cc7bd993367bf3ffb01c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>make podman-clean-transient.service work as user In the user session there is no boot-complete.target so the Requires= fails. We do not need it and I am not sure if we need it for the root unit either but I deicded to keep it there to not change anything and for the user session we patch it out. I patched this in the Makefile, while we could try to define two different source files for that it would make the Makefile logic even more complicated. In particular as this file is a .in we would need to add it to PODMAN_GENERATED_UNIT_FILES and then somehow fix the loop. To much work IMO so the sed trick to patch the user file is simpler. Fixes #23790 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>6b8e8cbbf71a0e808738e1e558f5aa741b6e0359</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
