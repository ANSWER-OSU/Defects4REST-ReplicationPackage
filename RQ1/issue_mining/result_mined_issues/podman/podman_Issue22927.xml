<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>22927</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/22927</ISSUEURL>
  <TITLE>Podman-machine default installer, won't resolve/progress on a download issue (lost connection, incomplete file...)</TITLE>
  <DESCRIPTION>### Bug description When initializing podman-desktop, the installer is building a default-machine. A file download process took long (maybe a connection issue), so I exit it. On the next retry, it results in: `error: exit code 125` In terminal executing `podman machine init` resulted in `unable to extract and unexpected EOF` error. This lead me to find-delete downloaded file, which solved the issue, and installer completed on the next try. My assumption is podman or podman-desktop app not making a download completion/verification record, and therefore not deleting/overwriting it on next attempts, instead it tries to extract the incomplete file. Is best if the file is checked and verified, before extraction, and if not retry overwrite invalid file. Thanks. ### Operating system Windows 10 x64 (ver 22H2 / Build 19045.4412) ### Installation Method Installer from website/GitHub releases ### Version 1.10.2 ### Steps to reproduce Break the download in default machine install process. (or corrupt the file) ### Relevant log output ```shell $ podman machine init time=&quot;2024-05-28T10:11:56+03:30&quot; level=error msg=&quot;Error extracting compressed file: \&quot;unexpected EOF\&quot;&quot; Error: unexpected EOF ``` ``` ### Additional context _No response_</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>102</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #23649 from pwright/patch-1 typo</MESSAGE>
    <SHA>40ca23077d4f0ce0973adb781a35905cd7a53b37</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Get WSL disk as an OCI artifact [Since a few days][1] WSL disk releases are also pushed to [quay.io/podman/machine-os-wsl][2]. This PR updates `podman machine init` mechanism to download WSL disk images. The WSL disk images are now pulled from quay.io as for the rest of the providers. Fixes [#22927][3] and [RUN-2177][4] [1]: https://github.com/containers/podman-machine-wsl-os/pull/6 [2]: https://quay.io/repository/podman/machine-os-wsl?tab=tags [3]: https://github.com/containers/podman/issues/22927 [4]: https://issues.redhat.com/browse/RUN-2177 Signed-off-by: Mario Loriedo &lt;mario.loriedo@gmail.com&gt;</MESSAGE>
      <SHA>b2e6d5326526272a0f221d761d86a16ba7f2c3b5</SHA>
      <PATCHEDFILES>
        <FILE>pkg/machine/applehv/stubber.go</FILE>
        <FILE>pkg/machine/e2e/machine_test.go</FILE>
        <FILE>pkg/machine/e2e/machine_wsl_test.go</FILE>
        <FILE>pkg/machine/hyperv/stubber.go</FILE>
        <FILE>pkg/machine/libkrun/stubber.go</FILE>
        <FILE>pkg/machine/ocipull/ociartifact.go</FILE>
        <FILE>pkg/machine/qemu/stubber.go</FILE>
        <FILE>pkg/machine/shim/host.go</FILE>
        <FILE>pkg/machine/vmconfigs/config.go</FILE>
        <FILE>pkg/machine/wsl/fedora.go</FILE>
        <FILE>pkg/machine/wsl/stubber.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
