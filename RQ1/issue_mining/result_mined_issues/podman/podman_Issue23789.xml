<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23789</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23789</ISSUEURL>
  <TITLE>race? Failed to retrieve cgroup stats: open .../user.slice/sha.scope/memory.stats and pids.current: ENOENT</TITLE>
  <DESCRIPTION>New one-off (so far) in [rawhide rootless parallel](https://api.cirrus-ci.com/v1/artifact/task/5252627401801728/html/sys-podman-rawhide-rootless-host-sqlite.log.html#t--00371p): ``` &lt;+026ms&gt; # $ podman container stats --no-stream --format {{&quot;\n&quot;}} &lt;+163ms&gt; # time=&quot;2024-08-27T22:13:08-05:00&quot; level=warning msg=&quot;Failed to retrieve cgroup stats: open /sys/fs/cgroup/user.slice/user-4839.slice/user@4839.service/user.slice/libpod-7328f381a1cde439c6e20df0aa54dfe87e731daf1716f97279072fe7786b7480.scope/memory.stat: no such file or directory&quot; # time=&quot;2024-08-27T22:13:08-05:00&quot; level=warning msg=&quot;Failed to retrieve cgroup stats: open /sys/fs/cgroup/user.slice/user-4839.slice/user@4839.service/user.slice/libpod-7328f381a1cde439c6e20df0aa54dfe87e731daf1716f97279072fe7786b7480.scope/pids.current: no such file or directory&quot; # #/vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv # #| FAIL: Command succeeded, but issued unexpected warnings # #\^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ```</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>62</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #24352 from edsantiago/systemd-leak-cleanup System tests: clean up unit file leaks</MESSAGE>
    <SHA>0962a1e1bf47f7c3d7f6468917e6f74bf6844966</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>libpod: report cgroups deleted during Stat() call The cgroup.Stat() operation is not atomic, so it's possible that the cgroup is removed during the Stat() call. Catch specific errors that can occur when the cgroup is missing and validate the existence of the cgroup path. If the cgroup is not found, return a more specific error indicating that the container has been removed. Closes: https://github.com/containers/podman/issues/23789 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>f1d437d4bf6f93a273d6c1b9e6192815b0e9d3d0</SHA>
      <PATCHEDFILES>
        <FILE>libpod/stats_linux.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>libpod: report cgroups deleted during Stat() call The cgroup.Stat() operation is not atomic, so it's possible that the cgroup is removed during the Stat() call. Catch specific errors that can occur when the cgroup is missing and validate the existence of the cgroup path. If the cgroup is not found, return a more specific error indicating that the container has been removed. Closes: https://github.com/containers/podman/issues/23789 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>c93c6bb915571308cc0ab3872f2447c8a19f86af</SHA>
      <PATCHEDFILES>
        <FILE>libpod/stats_linux.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>libpod: report cgroups deleted during Stat() call The cgroup.Stat() operation is not atomic, so it's possible that the cgroup is removed during the Stat() call. Catch specific errors that can occur when the cgroup is missing and validate the existence of the cgroup path. If the cgroup is not found, return a more specific error indicating that the container has been removed. Closes: https://github.com/containers/podman/issues/23789 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>1f44d0f8b2b12d1d67d3474b160310d121af91d6</SHA>
      <PATCHEDFILES>
        <FILE>libpod/stats_linux.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
