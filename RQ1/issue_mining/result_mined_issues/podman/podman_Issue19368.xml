<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19368</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/19368</ISSUEURL>
  <TITLE>Container kill does not return 409 error code for stopped containers</TITLE>
  <DESCRIPTION>### Issue Description podman kill ( compat / libpod ) does not return 409 error code ( https://docs.docker.com/engine/api/v1.43/#tag/Container/operation/ContainerKill ) for stopped containers ### Steps to reproduce the issue Steps to reproduce the issue 1. podman -r run -d --name nginx nginx 2. podman -r stop nginx 3. podman -r kill nginx ### Describe the results you received ``` {&quot;cause&quot;:&quot;container state improper&quot;,&quot;message&quot;:&quot;can only kill running containers. 6830d229c01064f76b9de62b76b80492fe4d08136c7b459bc0de926b1581093f is in state exited: container state improper&quot;,&quot;response&quot;:500} ``` ### Describe the results you expected 409 is returned ### podman info output ```yaml 4.6.0 ``` ### Podman in a container No ### Privileged Or Rootless None ### Upstream Latest Release Yes ### Additional environment details Additional environment details ### Additional information _No response_</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #19333 from lsm5/conditionalize-gvproxy [CI:BUILD] RPM: separate out gvproxy for copr and rawhide</MESSAGE>
    <SHA>b6a52f1f8b39e2c6eb8547b5cb249905d2958e5b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>API: kill: return 409 on invalid state If the container isn't running, make sure to return 409 as specified in the Docker API [1] and the Podman reference. [1] https://docs.docker.com/engine/api/v1.43/#tag/Container/operation/ContainerKill Fixes: #19368 Signed-off-by: Valentin Rothberg &lt;vrothberg@redhat.com&gt;</MESSAGE>
      <SHA>f2794f9a8268c3d137842bb651fab7a197ef4318</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/containers.go</FILE>
        <FILE>test/apiv2/20-containers.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>API: kill: return 409 on invalid state If the container isn't running, make sure to return 409 as specified in the Docker API [1] and the Podman reference. [1] https://docs.docker.com/engine/api/v1.43/#tag/Container/operation/ContainerKill Fixes: #19368 Signed-off-by: Valentin Rothberg &lt;vrothberg@redhat.com&gt;</MESSAGE>
      <SHA>954177e7ee9a1d698563cd5d15a0796c1c5a7f45</SHA>
      <PATCHEDFILES>
        <FILE>pkg/api/handlers/compat/containers.go</FILE>
        <FILE>test/apiv2/20-containers.at</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
