<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>19936</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/19936</ISSUEURL>
  <TITLE>Not using volumes after Podman Machine restart to rootful?</TITLE>
  <DESCRIPTION>### Issue Description After restarting the Podman Machine all the containers were gone. After re-running the docker-compose file for the containers it restarts the containers but doesn't use the data from volumes. ### Steps to reproduce the issue Steps to reproduce the issue: 1. Setup WordPress through official docker-compose and upload some files 2. Edit port from 8080:80 -&gt; 80:80 3. Run` podman machine set --rootful` to enable access to 80 port 4. Restart Podman 5. Run the edited docker-compose ### Describe the results you received Wordpress reset itself. Despite the files being inside the volume it started up to the setup page and doesn't detect installed plugins or uploaded files. ### Describe the results you expected After restarting Podman and running the docker-compose with minor changes the old volume should be automatically used. Wordpress should be as I left it with the same files and plugins except running on a different port. ### podman info output ```yaml host: arch: amd64 buildahVersion: 1.31.2 cgroupControllers: - cpuset - cpu - cpuacct - blkio - memory - devices - freezer - net_cls - perf_event - net_prio - hugetlb - pids - rdma - misc cgroupManager: cgroupfs cgroupVersion: v1 conmon: package: conmon-2.1.7-2.fc38.x86_64 path: /usr/bin/conmon version: 'conmon version 2.1.7, commit: ' cpuUtilization: idlePercent: 97.25 systemPercent: 1.1 userPercent: 1.65 cpus: 12 databaseBackend: boltdb distribution: distribution: fedora variant: container version: &quot;38&quot; eventLogger: journald freeLocks: 2040 hostname: kaPa idMappings: gidmap: null uidmap: null kernel: 5.15.90.1-microsoft-standard-WSL2 linkmode: dynamic logDriver: journald memFree: 11972517888 memTotal: 16715456512 networkBackend: netavark networkBackendInfo: backend: netavark dns: package: aardvark-dns-1.7.0-1.fc38.x86_64 path: /usr/libexec/podman/aardvark-dns version: aardvark-dns 1.7.0 package: netavark-1.7.0-1.fc38.x86_64 path: /usr/libexec/podman/netavark version: netavark 1.7.0 ociRuntime: name: crun package: crun-1.8.7-1.fc38.x86_64 path: /usr/bin/crun version: |- crun version 1.8.7 commit: 53a9996ce82d1ee818349bdcc64797a1fa0433c4 rundir: /run/crun spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +LIBKRUN +WASM:wasmedge +YAJL os: linux pasta: executable: /usr/bin/pasta package: passt-0^20230823.ga7e4bfb-1.fc38.x86_64 version: | pasta 0^20230823.ga7e4bfb-1.fc38.x86_64 Copyright Red Hat GNU Affero GPL version 3 or later &lt;https://www.gnu.org/licenses/agpl-3.0.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. remoteSocket: exists: true path: /run/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: false serviceIsRemote: true slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns-1.2.1-1.fc38.x86_64 version: |- slirp4netns version 1.2.1 commit: 09e31e92fa3d2a1d3ca261adaeb012c8d75a8194 libslirp: 4.7.0 SLIRP_CONFIG_VERSION_MAX: 4 libseccomp: 2.5.3 swapFree: 4294967296 swapTotal: 4294967296 uptime: 11h 47m 58.00s (Approximately 0.46 days) plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan - ipvlan volume: - local registries: search: - docker.io store: configFile: /usr/share/containers/storage.conf containerStore: number: 4 paused: 0 running: 2 stopped: 2 graphDriverName: overlay graphOptions: overlay.mountopt: nodev,metacopy=on graphRoot: /var/lib/containers/storage graphRootAllocated: 1081101176832 graphRootUsed: 8370696192 graphStatus: Backing Filesystem: extfs Native Overlay Diff: &quot;false&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;true&quot; imageCopyTmpDir: /var/tmp imageStore: number: 4 runRoot: /run/containers/storage transientStore: false volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.6.2 Built: 1693251588 BuiltTime: Mon Aug 28 21:39:48 2023 GitCommit: &quot;&quot; GoVersion: go1.20.7 Os: linux OsArch: linux/amd64 Version: 4.6.2 ``` ### Podman in a container No ### Privileged Or Rootless Privileged ### Upstream Latest Release Yes ### Additional environment details I am running docker inside Windows WSL(2). ### Additional information _No response_</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>36</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #20363 from ygalblum/quadlet-kube-oneshot-test System Test - Quadlet kube oneshot</MESSAGE>
    <SHA>5853e2bee972b64da4815589949a531cb32038ec</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>machine set: document --rootful better If you change this option all the containers disappear from the default connection and socket. Thus it is required to recreate the resources. Sharing between root and rootless is not possible for various reasons. Fixes #19936 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>dc705d37020ca28c6bd5215b236e597a31d5b5b7</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-set.1.md.in</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
