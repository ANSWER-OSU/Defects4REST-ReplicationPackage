<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20119</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/20119</ISSUEURL>
  <TITLE>URGENT: CI is broken: new f39 image fubar</TITLE>
  <DESCRIPTION>Fallout from #20082: &quot;useradd not found&quot;. [Sample failure](https://api.cirrus-ci.com/v1/artifact/task/4756712645722112/html/int-podman-fedora-37-root-container-boltdb.log.html#t--Podman-exec-podman-exec-with-user-only-in-container--1). All CI jobs are failing. **WE TESTED THIS**. It was working. I can only conclude that someone upstream modified the f39 image in the registry. Suggestion: my usual one. Stop relying on registries that we do not control. Sorry, it's my bedtime, I can't deal with this now. Good luck.</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #20115 from baude/hypervstarting hyperv: set more realistic starting state</MESSAGE>
    <SHA>9ba00229058634f86ab2ef9ffd2f5f7d26e3db4b</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>unbreak CI: useradd not found The fedora minimal 39 image has been updated on the fedora registry and removed the `useradd` binary. Since we were pulling by tag and not by digest, updates to images outside of our control always entail a certain risk - and now it bit us. To fix it, try to move as many users of `useradd` to _our_ CITEST_IMAGE and migrate the code where necessary to this Alpine-based tooling. However, the Alpine-based `adduser` binary (not useradd!) doesn't work well when being executed as a non-root user and will just error out. Hence, move the fedora minimal image back to version 34 which is still including the `useradd` binary. Ultimately, all images on public registries should be pulled via digest to make sure we pin them down. I refrain from doing this now to make sure we can cherry-pick this PR to older branches and get things back into a working state ASAP. Fixes: #20119 Signed-off-by: Valentin Rothberg &lt;vrothberg@redhat.com&gt;</MESSAGE>
      <SHA>26b5b1dd3c34d4f8cfa8804d8abe7c8c4dc8c4ca</SHA>
      <PATCHEDFILES>
        <FILE>test/e2e/config.go</FILE>
        <FILE>test/e2e/exec_test.go</FILE>
        <FILE>test/e2e/pod_create_test.go</FILE>
        <FILE>test/e2e/run_userns_test.go</FILE>
        <FILE>test/e2e/run_volume_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
