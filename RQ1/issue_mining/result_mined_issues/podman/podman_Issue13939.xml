<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>13939</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/13939</ISSUEURL>
  <TITLE>Unexpected behavior when setting mount propagations for named volumes</TITLE>
  <DESCRIPTION>&lt;!-- --------------------------------------------------- BUG REPORT INFORMATION --------------------------------------------------- Use the commands below to provide key information from your environment: You do NOT have to include this information if this is a FEATURE REQUEST **NOTE** A large number of issues reported against Podman are often found to already be fixed in more current versions of the project. Before reporting an issue, please verify the version you are running with `podman version` and compare it to the latest release documented on the top of Podman's [README.md](../README.md). If they differ, please update your version of Podman to the latest possible and retry your command before creating an issue. Also, there is a running list of known issues in the [Podman Troubleshooting Guide](https://github.com/containers/podman/blob/main/troubleshooting.md), please reference that page before opening a new issue. If you are filing a bug against `podman build`, please instead file a bug against Buildah (https://github.com/containers/buildah/issues). Podman build executes Buildah to perform container builds, and as such the Buildah maintainers are best equipped to handle these bugs. --&gt; **Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** I am very confused when following the documentation for creating a pod/container and volumes/mounts. The documentation clearly tells me i cannot set the propagation when using named volumes and it is only supported on binds. &gt; Propagation property can be specified **only for bind mounted volumes** and not for internal volumes or named volumes. However, podman does not really care and accepts a custom propagation for named volumes without any issue. Either the documentation is outdated, the behavior is different as the &quot;named&quot; volume is technically a mounted bind directory or it is a unexpected behavior and the request should actually be rejected with a error. **Steps to reproduce the issue:** ``` podman volume create bug podman container create -v bug:/path:slave --name bug docker.io/nginx ``` **Describe the results you received:** ```json &quot;Mounts&quot;: [ { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;bug&quot;, &quot;Source&quot;: &quot;/home/rhillmann/.local/share/containers/storage/volumes/bug/_data&quot;, &quot;Destination&quot;: &quot;/path&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;slave&quot; } ], ``` **Describe the results you expected:** A error message or reflected documentation **Additional information you deem important (e.g. issue happens only occasionally):** **Output of `podman version`:** ``` Client: Podman Engine Version: 4.0.3 API Version: 4.0.3 Go Version: go1.18 Git Commit: 62534053086fdeba7b93117e7c4dc6e797835a3e Built: Mon Apr 4 14:54:02 2022 OS/Arch: linux/amd64 ``` **Output of `podman info --debug`:** ``` host: arch: amd64 buildahVersion: 1.24.3 cgroupControllers: - memory - pids cgroupManager: systemd cgroupVersion: v2 conmon: package: /usr/bin/conmon is owned by conmon 1:2.1.0-1 path: /usr/bin/conmon version: 'conmon version 2.1.0, commit: bdb4f6e56cd193d40b75ffc9725d4b74a18cb33c' cpus: 8 distribution: distribution: arch version: unknown eventLogger: journald hostname: mucn1122 idMappings: gidmap: - container_id: 0 host_id: 1000 size: 1 - container_id: 1 host_id: 100000 size: 100000 uidmap: - container_id: 0 host_id: 1000 size: 1 - container_id: 1 host_id: 100000 size: 100000 kernel: 5.17.3-arch1-1 linkmode: dynamic logDriver: journald memFree: 14479036416 memTotal: 33375592448 networkBackend: netavark ociRuntime: name: crun package: /usr/bin/crun is owned by crun 1.4.4-1 path: /usr/bin/crun version: |- crun version 1.4.4 commit: 6521fcc5806f20f6187eb933f9f45130c86da230 spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +YAJL os: linux remoteSocket: exists: true path: /run/user/1000/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: true seccompEnabled: true seccompProfilePath: /etc/containers/seccomp.json selinuxEnabled: false serviceIsRemote: false slirp4netns: executable: /bin/slirp4netns package: /usr/bin/slirp4netns is owned by slirp4netns 1.1.12-1 version: |- slirp4netns version 1.1.12 commit: 7a104a101aa3278a2152351a082a6df71f57c9a3 libslirp: 4.6.1 SLIRP_CONFIG_VERSION_MAX: 3 libseccomp: 2.5.3 swapFree: 0 swapTotal: 0 uptime: 15h 40m 42.14s (Approximately 0.62 days) plugins: log: - k8s-file - none - passthrough - journald network: - bridge - macvlan volume: - local registries: {} store: configFile: /home/rhillmann/.config/containers/storage.conf containerStore: number: 2 paused: 0 running: 0 stopped: 2 graphDriverName: overlay graphOptions: {} graphRoot: /home/rhillmann/.local/share/containers/storage graphStatus: Backing Filesystem: btrfs Native Overlay Diff: &quot;true&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 2 runRoot: /run/user/1000/containers volumePath: /home/rhillmann/.local/share/containers/storage/volumes version: APIVersion: 4.0.3 Built: 1649076842 BuiltTime: Mon Apr 4 14:54:02 2022 GitCommit: 62534053086fdeba7b93117e7c4dc6e797835a3e GoVersion: go1.18 OsArch: linux/amd64 Version: 4.0.3 ``` **Additional environment details (AWS, VirtualBox, physical, etc.):** Same result in rootfull and rootless mode</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>49</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #14383 from jwhonce/wip/info_todo Add Authorization field to Plugins for Info</MESSAGE>
    <SHA>a550af260a536aeaa35e4b8810971748a6f16f5f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mount propagation works with named volumes Fixes: https://github.com/containers/podman/issues/13939 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>c0ad9a43e4baffec7f217c327ff1c6004843bdd9</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-build.1.md</FILE>
        <FILE>docs/source/markdown/podman-create.1.md</FILE>
        <FILE>docs/source/markdown/podman-pod-create.1.md</FILE>
        <FILE>docs/source/markdown/podman-run.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mount propagation works with named volumes Fixes: https://github.com/containers/podman/issues/13939 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>ef3197885e92a4604823a739cbdc732b41b4ab31</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-build.1.md</FILE>
        <FILE>docs/source/markdown/podman-create.1.md</FILE>
        <FILE>docs/source/markdown/podman-pod-create.1.md</FILE>
        <FILE>docs/source/markdown/podman-run.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
