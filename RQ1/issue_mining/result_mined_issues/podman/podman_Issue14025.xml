<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>14025</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/14025</ISSUEURL>
  <TITLE>Custom volumes configuration in containers.conf is ignored if a container is started with additional volumes</TITLE>
  <DESCRIPTION>**Is this a BUG REPORT or FEATURE REQUEST? (leave only one on its own line)** /kind bug **Description** The customized [containers]::volumes in /etc/containers/containers.conf file setting is disregarded if a container is started with additional container specific volumes. The setting is honored only when no volumes are specified at the time of starting containers. **Steps to reproduce the issue:** 1. Customize /etc/containers/containers.conf [containers] volumes = [&quot;/dev/log:/dev/log&quot;,] 2. Start a container with some volumes using `podman run -v ...` option **Describe the results you received:** `podman inspect` does not show the /dev/log bind mounted **Describe the results you expected:** `podman inspect` should bind mount /dev/log from host inside container **Additional information you deem important (e.g. issue happens only occasionally):** **Output of `podman version`:** ``` Client: Podman Engine Version: 4.0.2 API Version: 4.0.2 Go Version: go1.17.7 Built: Tue Mar 15 15:15:06 2022 OS/Arch: linux/amd64 ``` **Output of `podman info --debug`:** ``` host: arch: amd64 buildahVersion: 1.24.1 cgroupControllers: - cpuset - cpu - cpuacct - blkio - memory - devices - freezer - net_cls - perf_event - net_prio - hugetlb - pids - rdma cgroupManager: systemd cgroupVersion: v1 conmon: package: conmon-2.1.0-1.module+el8.6.0+14131+b9baa4cc.x86_64 path: /usr/bin/conmon version: 'conmon version 2.1.0, commit: 69671bb13ee783c4924db64b241139d61db0 7321' cpus: 8 distribution: distribution: '&quot;rhel&quot;' version: &quot;8.6&quot; eventLogger: file hostname: rhel-vm idMappings: gidmap: null uidmap: null kernel: 4.18.0-369.el8.x86_64 linkmode: dynamic logDriver: k8s-file memFree: 31864328192 memTotal: 33506676736 networkBackend: cni ociRuntime: name: runc package: runc-1.0.3-2.module+el8.6.0+14276+008f0e37.x86_64 path: /usr/bin/runc version: |- runc version 1.0.3 spec: 1.0.2-dev go: go1.17.5 libseccomp: 2.5.2 os: linux remoteSocket: path: /run/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_AUDIT_WRITE,CAP_MKNOD,CAP_NET_RAW,CAP_CHOWN,CAP_DAC_OVERRI DE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CA P_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: true serviceIsRemote: false slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns-1.1.8-2.module+el8.6.0+14272+4d6325e6.x86_64 version: |- slirp4netns version 1.1.8 commit: d361001f495417b880f20329121e3aa431a8f90f libslirp: 4.4.0 SLIRP_CONFIG_VERSION_MAX: 3 libseccomp: 2.5.2 swapFree: 11731464192 swapTotal: 11731464192 uptime: 26h 48m 37.3s (Approximately 1.08 days) plugins: log: - k8s-file - none - passthrough - journald network: - bridge - macvlan - ipvlan volume: - local - filevol registries: search: - registry.fedoraproject.org - registry.access.redhat.com - registry.centos.org - docker.io store: configFile: /etc/containers/storage.conf containerStore: number: 0 paused: 0 running: 0 stopped: 0 graphDriverName: overlay graphOptions: overlay.mountopt: nodev,metacopy=on graphRoot: /var/lib/containers/storage graphStatus: Backing Filesystem: xfs Native Overlay Diff: &quot;false&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;true&quot; imageCopyTmpDir: /var/tmp imageStore: number: 3 runRoot: /run/containers/storage volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.0.2 Built: 1647371706 BuiltTime: Tue Mar 15 15:15:06 2022 GitCommit: &quot;&quot; GoVersion: go1.17.7 OsArch: linux/amd64 Version: 4.0.2 ``` **Package info (e.g. output of `rpm -q podman` or `apt list podman`):** ``` podman-4.0.2-1.module_el8.7.0+1106+45480ee0.x86_64 ``` **Have you tested with the latest version of Podman and have you checked the Podman Troubleshooting Guide? (https://github.com/containers/podman/blob/main/troubleshooting.md)** Yes **Additional environment details (AWS, VirtualBox, physical, etc.):** VM</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #14009 from vrothberg/add-benchmarks benchmarks: add more image benchmarks</MESSAGE>
    <SHA>5ac00a7287e4a9e6292f4a6ca5dfa9a02e5ca907</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>run: honor default volumes if any with added volumes Podman ignores default configured volumes from containers.conf if additional volume is supplied, we could instead append default configured volumes with added volumes Closes: https://github.com/containers/podman/issues/14025 Signed-off-by: Aditya R &lt;arajan@redhat.com&gt;</MESSAGE>
      <SHA>659e39ecc9b028889bed950cf61dfd8cbf389ddc</SHA>
      <PATCHEDFILES>
        <FILE>cmd/podman/containers/run.go</FILE>
        <FILE>test/e2e/containers_conf_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
