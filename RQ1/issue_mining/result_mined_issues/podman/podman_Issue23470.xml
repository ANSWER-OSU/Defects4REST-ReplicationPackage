<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23470</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23470</ISSUEURL>
  <TITLE>remote: kube: publish containerPort by default</TITLE>
  <DESCRIPTION>Looks like a bug in the tests themselves, port conflict on 80, multiple tests running at once: ``` Podman kube play [It] podman play kube should not publish containerPort by default ... # podman-remote [options] kube play /tmp/CI_Xnh8/podman-e2e-1779494458/subtest-50866493/kube.yaml time=&quot;2024-07-11T15:49:19-05:00&quot; level=warning msg=&quot;IdleTracker: StateClosed transition by connection marked un-managed&quot; X-Reference-Id=0xc00019d720 Pod: 892f3d313fcf456f4ba1dfca9515256317dffc537ca7ec1a678ae99ca4027078 Container: a0daf3d19882360f456ee4769fd5fe534eba8e3addd324b7a799f1d2efae610b [FAILED] Expected &lt;string&gt;: podman rulez to equal &lt;string&gt;: connection refused ``` or, in other cases: ``` [FAILED] Expected &lt;string&gt;: Get &quot;http://localhost:80&quot;: read tcp 127.0.0.1:56764-&gt;127.0.0.1:80: read: connection reset by peer to contain substring &lt;string&gt;: connection refused ``` What troubles me is that `Expect(ExitCleanly())` is not catching this. Filing as a placeholder. I'll take a look when time allows, unless anyone else feels like tackling it. * debian-13 : int remote debian-13 root host sqlite [remote] * [07-31 13:56](https://api.cirrus-ci.com/v1/artifact/task/5958161096507392/html/int-remote-debian-13-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--1) in Podman kube play podman play kube should not publish containerPort by default * [07-22 15:38](https://api.cirrus-ci.com/v1/artifact/task/5053918479122432/html/int-remote-debian-13-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--1) in Podman kube play podman play kube should not publish containerPort by default * fedora-40 : int remote fedora-40 root host sqlite [remote] * [07-31 23:04](https://api.cirrus-ci.com/v1/artifact/task/5218281039069184/html/int-remote-fedora-40-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--1) in Podman kube play podman play kube should not publish containerPort by default * [07-31 11:17](https://api.cirrus-ci.com/v1/artifact/task/6580336769892352/html/int-remote-fedora-40-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--1) in Podman kube play podman play kube should not publish containerPort by default * [07-31 11:17](https://api.cirrus-ci.com/v1/artifact/task/6580336769892352/html/int-remote-fedora-40-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--2) in Podman kube play podman play kube should not publish containerPort by default * [07-11 16:53](https://api.cirrus-ci.com/v1/artifact/task/4739302964330496/html/int-remote-fedora-40-root-host-sqlite.log.html#t--Podman-kube-play-podman-play-kube-should-not-publish-containerPort-by-default--1) in Podman kube play podman play kube should not publish containerPort by default | x | x | x | x | x | x | | ---: | ---: | ---: | ---: | ---: | ---: | | int(6) | remote(6) | fedora-40(4) | root(6) | host(6) | sqlite(6) | | | | debian-13(2) | | | |</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>6</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #23532 from containers/renovate/golang.org-x-tools-0.x fix(deps): update module golang.org/x/tools to v0.24.0</MESSAGE>
    <SHA>4e788bc611284b5b1284f751dbc4b192de8c548e</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>CI: e2e: serialize root containerPort tests Two tests, both check port 80 on host, one wants it live, the other wants it blocked. Prevent them from running concurrently. Fixes: #23470 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>1a2e1eb46e1583713a4068ea6ba42e48c9f6060d</SHA>
      <PATCHEDFILES>
        <FILE>test/e2e/play_kube_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
