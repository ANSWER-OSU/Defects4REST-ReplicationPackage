<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23502</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23502</ISSUEURL>
  <TITLE>Updating podman from 5.2.0 to 5.3.0-dev on Windows may incorrectly modify machine provider config file</TITLE>
  <DESCRIPTION>### Issue Description If a user installs 5.2.0, modifies the machine provider in `99-podman-machine-provider.conf` after the installation to switch from `hyper-v` to `wsl` or vice versa and then runs the installer to update podman to 5.3.0-dev, the machine provider in `99-podman-machine-provider.conf` is reset to its original value. ### Steps to reproduce the issue Download `podman-5.2.0-setup.exe` and run the scenario `update-with-user-changed-config-file` of the windows installer test suite: ```pwsh .\contrib\win-installer\test-installer.ps1 ` -scenario update-with-user-changed-config-file ` -setupExePath &quot;.\contrib\win-installer\podman-5.3.0-dev-setup.exe&quot; ` -previousSetupExePath &quot;.\podman-5.2.0-setup.exe&quot; ``` ### Describe the results you received The result is described here https://github.com/containers/podman/issues/23495</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #23484 from edsantiago/safename-600 CI: completion system test: use safename</MESSAGE>
    <SHA>43a077db87971ff1b6689fba45c31e6d3be3fe41</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Change Windows installer MajorUpgrade Schedule Use Schedule &quot;afterInstallExecute&quot; (instead of the default &quot;afterInstallValidate&quot;) in the Windows installer MajorUpgrade element. That avoid overriding eventual users changes to the podman machine configuration file created by the installer. Fixes #23502 Signed-off-by: Mario Loriedo &lt;mario.loriedo@gmail.com&gt;</MESSAGE>
      <SHA>01d739a65e4749bdae1db04a9ac3c78b5c9c70b6</SHA>
      <PATCHEDFILES>
        <FILE>contrib/win-installer/podman.wxs</FILE>
        <FILE>contrib/win-installer/test-installer.ps1</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
