<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>17860</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/17860</ISSUEURL>
  <TITLE>ulimit test: Too many open files</TITLE>
  <DESCRIPTION>Looks like `5` isn't enough: ``` not ok 89 podman run ulimit from containers.conf ... $ podman run --rm quay.io/libpod/testimage:20221018 grep Max open files /proc/self/limits Error: OCI runtime error: crun: openat2 `proc/sys`: Too many open files ``` Should be an easy fix, I'll try to get to it today, but am juggling too many things at once</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #17834 from rhatdan/ulimits Add support for oom_score_adj value from containers.conf</MESSAGE>
    <SHA>39b0de19e197498e95f629657bb804e9cc3ed4cd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>New ulimit test: bump up minimum nfiles ...and add a comment explaining why. The minimum, determined via binary search, is actually 27! Anything under that will barf: $ bin/podman run --ulimit nofile=26:26 --rm quay.io/libpod/testimage:20221018 true Error: OCI runtime error: crun: openat2 `proc/sysrq-trigger`: Too many open files Play it safe, go with 30. (Does this seem alarming to anyone else, or am I the only one??) Fixes: #17860 Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>6b2101bc747458e1c41a1e203ecace8b7220d9ed</SHA>
      <PATCHEDFILES>
        <FILE>test/system/030-run.bats</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
