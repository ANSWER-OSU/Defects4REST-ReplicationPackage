<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>25435</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/25435</ISSUEURL>
  <TITLE>Run podman machine os apply displays the error: unsupported OS</TITLE>
  <DESCRIPTION>### Issue Description Executing `podman machine os apply` on Windows to update Podman server-side version results in an error message: `Error: unsupported OS`. ### Steps to reproduce the issue Steps to reproduce the issue 1. Executing `podman machine os apply quay.io/podman/machine-os:5.4` on Windows 2. Waiting for a moment. 3. Failed with `Error: unsupported OS`. ### Describe the results you received It only display below: ``` Error: unsupported OS Error: Process exited with status 125 ``` ### Describe the results you expected Podman server-side version can be properly updated using `podman machine os apply`. ### podman info output ```yaml Client: APIVersion: 5.4.0 Built: 1739297196 BuiltTime: Wed Feb 12 02:06:36 2025 GitCommit: f9f7d48b24b1ca4403f189caaeab1cb8ff4a9aa2 GoVersion: go1.23.6 Os: windows OsArch: windows/amd64 Version: 5.4.0 host: arch: amd64 buildahVersion: 1.37.3 cgroupControllers: - cpuset - cpu - cpuacct - blkio - memory - devices - freezer - net_cls - perf_event - net_prio - hugetlb - pids - rdma - misc cgroupManager: cgroupfs cgroupVersion: v1 conmon: package: conmon-2.1.12-2.fc40.x86_64 path: /usr/bin/conmon version: 'conmon version 2.1.12, commit: ' cpuUtilization: idlePercent: 99.71 systemPercent: 0.22 userPercent: 0.07 cpus: 4 databaseBackend: sqlite distribution: distribution: fedora variant: container version: &quot;40&quot; eventLogger: journald freeLocks: 2047 hostname: ThinkPad-E560 idMappings: gidmap: null uidmap: null kernel: 5.15.167.4-microsoft-standard-WSL2 linkmode: dynamic logDriver: journald memFree: 3576872960 memTotal: 4048412672 networkBackend: netavark networkBackendInfo: backend: netavark dns: package: aardvark-dns-1.12.2-2.fc40.x86_64 path: /usr/libexec/podman/aardvark-dns version: aardvark-dns 1.12.2 package: netavark-1.12.2-1.fc40.x86_64 path: /usr/libexec/podman/netavark version: netavark 1.12.2 ociRuntime: name: crun package: crun-1.17-1.fc40.x86_64 path: /usr/bin/crun version: |- crun version 1.17 commit: 000fa0d4eeed8938301f3bcf8206405315bc1017 rundir: /run/crun spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +LIBKRUN +WASM:wasmedge +YAJL os: linux pasta: executable: /usr/bin/pasta package: passt-0^20240906.g6b38f07-1.fc40.x86_64 version: | pasta 0^20240906.g6b38f07-1.fc40.x86_64 Copyright Red Hat GNU General Public License, version 2 or later &lt;https://www.gnu.org/licenses/old-licenses/gpl-2.0.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. remoteSocket: exists: true path: /run/podman/podman.sock rootlessNetworkCmd: pasta security: apparmorEnabled: false capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: false serviceIsRemote: true slirp4netns: executable: &quot;&quot; package: &quot;&quot; version: &quot;&quot; swapFree: 1073741824 swapTotal: 1073741824 uptime: 0h 39m 22.00s variant: &quot;&quot; plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan - ipvlan volume: - local registries: docker.elastic.co: Blocked: false Insecure: false Location: elastic.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: docker.elastic.co PullFromMirror: &quot;&quot; docker.io: Blocked: false Insecure: false Location: docker.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: docker.io PullFromMirror: &quot;&quot; gcr.io: Blocked: false Insecure: false Location: gcr.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: gcr.io PullFromMirror: &quot;&quot; ghcr.io: Blocked: false Insecure: false Location: ghcr.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: ghcr.io PullFromMirror: &quot;&quot; mcr.microsoft.com: Blocked: false Insecure: false Location: mcr.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: mcr.microsoft.com PullFromMirror: &quot;&quot; nvcr.io: Blocked: false Insecure: false Location: nvcr.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: nvcr.io PullFromMirror: &quot;&quot; quay.io: Blocked: false Insecure: false Location: quay.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: quay.io PullFromMirror: &quot;&quot; registry.k8s.io: Blocked: false Insecure: false Location: k8s.m.daocloud.io MirrorByDigestOnly: false Mirrors: null Prefix: registry.k8s.io PullFromMirror: &quot;&quot; search: - docker.io store: configFile: /usr/share/containers/storage.conf containerStore: number: 1 paused: 0 running: 0 stopped: 1 graphDriverName: overlay graphOptions: overlay.imagestore: /usr/lib/containers/storage overlay.mountopt: nodev,metacopy=on graphRoot: /var/lib/containers/storage graphRootAllocated: 1081101176832 graphRootUsed: 1035567104 graphStatus: Backing Filesystem: extfs Native Overlay Diff: &quot;false&quot; Supports d_type: &quot;true&quot; Supports shifting: &quot;false&quot; Supports volatile: &quot;true&quot; Using metacopy: &quot;true&quot; imageCopyTmpDir: /var/tmp imageStore: number: 1 runRoot: /run/containers/storage transientStore: false volumePath: /var/lib/containers/storage/volumes version: APIVersion: 5.2.3 Built: 1727136000 BuiltTime: Tue Sep 24 08:00:00 2024 GitCommit: &quot;&quot; GoVersion: go1.22.7 Os: linux OsArch: linux/amd64 Version: 5.2.3 ``` ### Podman in a container No ### Privileged Or Rootless Privileged ### Upstream Latest Release Yes ### Additional environment details ```yaml Client: Podman Engine Version: 5.4.0 API Version: 5.4.0 Go Version: go1.23.6 Git Commit: f9f7d48b24b1ca4403f189caaeab1cb8ff4a9aa2 Built: Wed Feb 12 02:06:36 2025 OS/Arch: windows/amd64 Server: Podman Engine Version: 5.2.3 API Version: 5.2.3 Go Version: go1.22.7 Built: Tue Sep 24 08:00:00 2024 OS/Arch: linux/amd64 ```</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #25447 from containers/renovate/pytest-8.x chore(deps): update dependency pytest to v8.3.5</MESSAGE>
    <SHA>2c3615a5ff8de1e1ca299eb41ffaa930dee3f5ce</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Update documentation for podman-machine-os-apply A user reported that it was a surprise to receive an unsupported os error when trying to use `podman machine os apply` with WSL machines. This is intentional however the documentation needed to be updated to explicitly state why (it is not based on FCOS). Fixes: #25435 Signed-off-by: Brent Baude &lt;bbaude@redhat.com&gt;</MESSAGE>
      <SHA>2e07150eb575f94af1e543470cbebe926b844146</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-os-apply.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update documentation for podman-machine-os-apply A user reported that it was a surprise to receive an unsupported os error when trying to use `podman machine os apply` with WSL machines. This is intentional however the documentation needed to be updated to explicitly state why (it is not based on FCOS). Fixes: #25435 Signed-off-by: Brent Baude &lt;bbaude@redhat.com&gt;</MESSAGE>
      <SHA>a67220fe480332e81612955440a54c016b0db02c</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-os-apply.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update documentation for podman-machine-os-apply A user reported that it was a surprise to receive an unsupported os error when trying to use `podman machine os apply` with WSL machines. This is intentional however the documentation needed to be updated to explicitly state why (it is not based on FCOS). Fixes: #25435 Signed-off-by: Brent Baude &lt;bbaude@redhat.com&gt;</MESSAGE>
      <SHA>7f4282a7e84cb97cf6cef4ba0dd777593e1a4751</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-os-apply.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Update documentation for podman-machine-os-apply A user reported that it was a surprise to receive an unsupported os error when trying to use `podman machine os apply` with WSL machines. This is intentional however the documentation needed to be updated to explicitly state why (it is not based on FCOS). Fixes: #25435 Signed-off-by: Brent Baude &lt;bbaude@redhat.com&gt;</MESSAGE>
      <SHA>f8d34e83d329054079ac5917dff38b5bb35f5a6f</SHA>
      <PATCHEDFILES>
        <FILE>docs/source/markdown/podman-machine-os-apply.1.md</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
