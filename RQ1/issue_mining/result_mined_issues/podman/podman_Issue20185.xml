<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>20185</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/20185</ISSUEURL>
  <TITLE>podman run --replace does not work with --detach</TITLE>
  <DESCRIPTION>### Issue Description `podman run --detach` can be used to print the ID of the container. However, if used in combination with `--replace`, it may (or may not) print the container name as well. This is confusing, and it would be better to consistently not print the container name, or update the documentation. ### Steps to reproduce the issue ``` $ podman --version podman version 4.6.2 $ podman run -it -d --rm --replace --name test1 ubuntu:jammy # No name is printed f00064ad5c5a7131d29fe16d389c8ded7644b0f27b9401061d78e05989d392a1 $ podman run -it -d --rm --replace --name test1 ubuntu:jammy # Name is printed WARN[0010] StopSignal SIGTERM failed to stop container test1 in 10 seconds, resorting to SIGKILL test1 11f997f00144d9fca4e9b1c3421243756093eee9a62f505d84cb3d805f7660d8 ``` ### Describe the results you received - ### Describe the results you expected - ### podman info output ```yaml host: arch: riscv64 buildahVersion: 1.28.2 cgroupControllers: - cpuset - cpu - io - memory - hugetlb - pids - rdma - misc cgroupManager: systemd cgroupVersion: v2 conmon: package: conmon_2.1.6+ds1-1_riscv64 path: /usr/bin/conmon version: 'conmon version 2.1.6, commit: unknown' cpuUtilization: idlePercent: 90.86 systemPercent: 0.96 userPercent: 8.18 cpus: 4 distribution: codename: lunar distribution: ubuntu version: &quot;23.04&quot; eventLogger: journald hostname: ubuntu idMappings: gidmap: null uidmap: null kernel: 6.2.0-19-generic linkmode: dynamic logDriver: journald memFree: 1458507776 memTotal: 4092555264 networkBackend: netavark ociRuntime: name: crun package: crun_1.8-1_riscv64 path: /usr/bin/crun version: |- crun version 1.8 commit: 0356bf4aff9a133d655dc13b1d9ac9424706cac4 rundir: /run/user/0/crun spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +YAJL os: linux remoteSocket: exists: true path: /run/podman/podman.sock security: apparmorEnabled: true capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: false serviceIsRemote: false slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns_1.2.0-1_riscv64 version: |- slirp4netns version 1.2.0 commit: 656041d45cfca7a4176f6b7eed9e4fe6c11e8383 libslirp: 4.7.0 SLIRP_CONFIG_VERSION_MAX: 4 libseccomp: 2.5.4 swapFree: 12858683392 swapTotal: 12884897792 uptime: 690h 56m 3.00s (Approximately 28.75 days) plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan volume: - local registries: {} store: configFile: /usr/share/containers/storage.conf containerStore: number: 1 paused: 0 running: 1 stopped: 0 graphDriverName: overlay graphOptions: {} graphRoot: /var/lib/containers/storage graphRootAllocated: 123723825152 graphRootUsed: 23621816320 graphStatus: Backing Filesystem: extfs Native Overlay Diff: &quot;true&quot; Supports d_type: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 4 runRoot: /run/containers/storage volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.3.1 Built: 0 BuiltTime: Thu Jan 1 00:00:00 1970 GitCommit: &quot;&quot; GoVersion: go1.20.2 Os: linux OsArch: linux/riscv64 Version: 4.3.1 ``` ### Podman in a container No ### Privileged Or Rootless None ### Upstream Latest Release No ### Additional environment details - ### Additional information -</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #20148 from vrothberg/conmon-env libpod: pass entire environment to conmon</MESSAGE>
    <SHA>35824b647cc87e11ad6712ecaabafcacc3b66e96</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>podman: run --replace prints only the new container id print only the new container ID when using --replace instead of the terminated container ID if it was stopped. Closes: https://github.com/containers/podman/issues/20185 Signed-off-by: Giuseppe Scrivano &lt;gscrivan@redhat.com&gt;</MESSAGE>
      <SHA>f21c1d238da393cb11c75e408a736336b979e6d5</SHA>
      <PATCHEDFILES>
        <FILE>cmd/podman/containers/create.go</FILE>
        <FILE>cmd/podman/containers/rm.go</FILE>
        <FILE>test/e2e/run_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
