<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>18514</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/18514</ISSUEURL>
  <TITLE>[systests] quadlet hang, no details</TITLE>
  <DESCRIPTION>Seen twice in system tests: ``` [+1320s] ok 348 quadlet kube - basic [+1893s] ok 349 quadlet - rootfs [+2494s] not ok 350 quadlet - selinux disable # (from function `run_podman' in file test/system/helpers.bash, line 218, # from function `basic_setup' in file test/system/helpers.bash, line 49, # from function `setup' in test file test/system/252-quadlet.bats, line 25) # `basic_setup' failed # # podman rm -t 0 --all --force --ignore # timeout: sending signal TERM to command ?/var/tmp/go/src/github.com/containers/podman/bin/podman? # [ rc=124 (** EXPECTED 0 **) ] # *** TIMED OUT *** # # [teardown] # # podman pod rm -t 0 --all --force --ignore # timeout: sending signal TERM to command ?/var/tmp/go/src/github.com/containers/podman/bin/podman? # [ rc=124 ] # *** TIMED OUT *** ``` ...and, game over. No more logs from there, Cirrus times out. Look at the timestamps, though: those are absurd. Nine minutes per test? This is probably the kind of thing that needs to be debugged by looking at journal logs. Or maybe by instrumenting. * fedora-38-aarch64 : sys podman fedora-38-aarch64 root host sqlite * PR #17831 * [05-05 22:16](https://api.cirrus-ci.com/v1/task/6741329842012160/logs/main.log#t--00350) * rawhide : sys podman rawhide root host sqlite * PR #18498 * [05-08 15:26](https://api.cirrus-ci.com/v1/task/5279928027971584/logs/main.log#t--00350)</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>330</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #18513 from edsantiago/wait_wait e2e: fix race in a play-kube test</MESSAGE>
    <SHA>d49a537b8f3a0c8940cb28db7a64894e2ad87195</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>system tests: timeoutize quadlet, systemd Run $QUADLET and all systemctl/journalctl commands using 'timeout'. Nothing should ever, ever take more than the default 2 minutes. Followup to #18514, in which quadlet tests are found to be taking 9-10 minutes. Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>d24bec0d038286e6f60f8fd08a3a0a1ab60f2eb4</SHA>
      <PATCHEDFILES>
        <FILE>test/system/252-quadlet.bats</FILE>
        <FILE>test/system/helpers.systemd.bash</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>systests: test instrumentation for #18514: if we get a timeout in teardown(), run and show the output of podman system locks for #18831: if we hit unmount/EINVAL, nothing will ever work again, so signal all future tests to skip. Signed-off-by: Ed Santiago &lt;santiago@redhat.com&gt;</MESSAGE>
      <SHA>00292ae1c47794061b17d14086e9e5437b625265</SHA>
      <PATCHEDFILES>
        <FILE>test/system/helpers.bash</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
