<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>21181</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/21181</ISSUEURL>
  <TITLE>Podman Redirects Successful Outputs to STDERR, Causing Azure DevOps Failures</TITLE>
  <DESCRIPTION>### Issue Description I am facing an issue with Podman where it outputs to standard error (STDERR) even when the operation is successful. This behavior is causing problems in our Azure DevOps pipeline. **Impact on Azure DevOps:** In our Azure DevOps environment, the pipeline stages consider any output to STDERR as an error, causing the stage to fail. To mitigate this, we tried redirecting all STDERR to STDOUT. However, this approach has a drawback: actual errors are no longer recognized as such, and the stage incorrectly shows as successful (marked green) because we streamed the errors to STDOUT, which suppresses the real error recognition. ---- - Is there a known workaround or a fix for this issue where Podman outputs to STDERR even for successful operations? - How can we differentiate between actual errors and normal output in such scenarios, especially in a CI/CD pipeline like Azure DevOps? Thank you in advance for your assistance and insights. ### Steps to reproduce the issue When running the podman pull command, Podman directs its output to STDERR instead of standard output (STDOUT). This can be reproduced by running a command like `podman pull [image] 2&gt;stderr.txt`, where the output, even if successful, is saved to `stderr.txt`. ### Describe the results you received ``` [container]# podman pull hello-world 2&gt;stderr.txt d2c94e258dcb3c5ac2798d32e1249e42ef01cba4841c2234249495f87264ac5a [container]# cat stderr.txt Trying to pull docker.io/library/hello-world:latest... Getting image source signatures Copying blob sha256:c1ec31eb59444d78df06a974d155e597c894ab4cda84f08294145e845394988e Copying config sha256:d2c94e258dcb3c5ac2798d32e1249e42ef01cba4841c2234249495f87264ac5a Writing manifest to image destination ``` ### Describe the results you expected -- ### podman info output ```yaml host: arch: amd64 buildahVersion: 1.32.0 cgroupControllers: - cpuset - cpu - cpuacct - blkio - memory - devices - freezer - net_cls - perf_event - net_prio - hugetlb - pids cgroupManager: cgroupfs cgroupVersion: v1 conmon: package: conmon_100:2.1.10-1_amd64 path: /usr/bin/conmon version: 'conmon version 2.1.10, commit: 2dcd736e46ded79a53339462bc251694b150f870' cpuUtilization: idlePercent: 89.64 systemPercent: 5.54 userPercent: 4.82 cpus: 8 databaseBackend: boltdb distribution: codename: jammy distribution: ubuntu version: &quot;22.04&quot; eventLogger: file freeLocks: 2048 hostname: deploy-agent-68df654766-pzcv6 idMappings: gidmap: null uidmap: null kernel: 5.10.192-183.736.amzn2.x86_64 linkmode: dynamic logDriver: k8s-file memFree: 4445495296 memTotal: 16277569536 networkBackend: cni networkBackendInfo: backend: cni dns: {} package: 'containernetworking, containernetworking-plugins: /opt/cni/bin' path: /opt/cni/bin ociRuntime: name: runc package: cri-o-runc_100:1.1.11-1_amd64 path: /usr/lib/cri-o-runc/sbin/runc version: |- runc version unknown spec: 1.0.2-dev go: go1.21.5 libseccomp: 2.5.3 os: linux pasta: executable: &quot;&quot; package: &quot;&quot; version: &quot;&quot; remoteSocket: exists: false path: /run/podman/podman.sock security: apparmorEnabled: false capabilities: CAP_AUDIT_WRITE,CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_MKNOD,CAP_NET_BIND_SERVICE,CAP_NET_RAW,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: false serviceIsRemote: false slirp4netns: executable: &quot;&quot; package: &quot;&quot; version: &quot;&quot; swapFree: 0 swapTotal: 0 uptime: 1743h 43m 49.00s (Approximately 72.62 days) plugins: authorization: null log: - k8s-file - none - passthrough network: - bridge - macvlan - ipvlan volume: - local registries: search: - docker.io store: configFile: /usr/share/containers/storage.conf containerStore: number: 0 paused: 0 running: 0 stopped: 0 graphDriverName: overlay graphOptions: {} graphRoot: /var/lib/containers/storage graphRootAllocated: 536858308608 graphRootUsed: 31000961024 graphStatus: Backing Filesystem: overlayfs Native Overlay Diff: &quot;false&quot; Supports d_type: &quot;true&quot; Supports shifting: &quot;true&quot; Supports volatile: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 0 runRoot: /run/containers/storage transientStore: false volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.7.0 Built: 0 BuiltTime: Thu Jan 1 00:00:00 1970 GitCommit: &quot;&quot; GoVersion: go1.21.5 Os: linux OsArch: linux/amd64 Version: 4.7.0 ``` ### Podman in a container Yes ### Privileged Or Rootless Privileged ### Upstream Latest Release Yes ### Additional environment details Additional environment details ### Additional information Additional information like issue happens only occasionally or issue happens with a particular architecture or on a particular setting</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>23</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #21175 from baude/consolidateIgnitionReadySocket consolidate ignition ready socket unit</MESSAGE>
    <SHA>1697a8bfcffcaa1f8c9905970374562f465d9cf6</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Match Docker pull/push by defaulting to progress write to stdout Fixes: https://github.com/containers/podman/issues/21181 Signed-off-by: Daniel J Walsh &lt;dwalsh@redhat.com&gt;</MESSAGE>
      <SHA>89b328088af51c9c89d637ba1e2bf1d200fd8005</SHA>
      <PATCHEDFILES>
        <FILE>cmd/podman/images/pull.go</FILE>
        <FILE>cmd/podman/images/push.go</FILE>
        <FILE>test/e2e/pull_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
