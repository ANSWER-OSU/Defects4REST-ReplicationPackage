<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>23132</ISSUENO>
  <ISSUEURL>https://github.com/containers/podman/issues/23132</ISSUEURL>
  <TITLE>podman create --device invalid-device --privileged does not raise error</TITLE>
  <DESCRIPTION>### Issue Description I cannot reliably assign static IP addresses, and force to use the custom network in the first place. I've tried multiple ways to specifcy the network and the static IP addresses, and this method seems to fully comply with the (confusing) instructions in the `podman create` docs. ### Steps to reproduce the issue Create a container that matches this inspect dump: ```json [ { &quot;Id&quot;: &quot;46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82&quot;, &quot;Created&quot;: &quot;2024-06-28T13:48:56.228665411+02:00&quot;, &quot;Path&quot;: &quot;/sbin/init&quot;, &quot;Args&quot;: [ &quot;/sbin/init&quot; ], &quot;State&quot;: { &quot;OciVersion&quot;: &quot;1.1.0&quot;, &quot;Status&quot;: &quot;running&quot;, &quot;Running&quot;: true, &quot;Paused&quot;: false, &quot;Restarting&quot;: false, &quot;OOMKilled&quot;: false, &quot;Dead&quot;: false, &quot;Pid&quot;: 43915, &quot;ConmonPid&quot;: 43913, &quot;ExitCode&quot;: 0, &quot;Error&quot;: &quot;&quot;, &quot;StartedAt&quot;: &quot;2024-06-28T13:48:58.517884723+02:00&quot;, &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;, &quot;Health&quot;: { &quot;Status&quot;: &quot;&quot;, &quot;FailingStreak&quot;: 0, &quot;Log&quot;: null }, &quot;CgroupPath&quot;: &quot;/machine.slice/libpod-46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82.scope&quot;, &quot;CheckpointedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;, &quot;RestoredAt&quot;: &quot;0001-01-01T00:00:00Z&quot; }, &quot;Image&quot;: &quot;b661cbe9df82e3da9b4b59169838199513318e72413d9a57150e77ff1859b254&quot;, &quot;ImageDigest&quot;: &quot;sha256:9ccc4a764a4c04a5a7ab891188168b50fa16f1d86b16ceab45b25d5fd8a0ba13&quot;, &quot;ImageName&quot;: &quot;ghcr.io/siderolabs/talos:v1.7.5&quot;, &quot;Rootfs&quot;: &quot;&quot;, &quot;Pod&quot;: &quot;&quot;, &quot;ResolvConfPath&quot;: &quot;/run/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata/resolv.conf&quot;, &quot;HostnamePath&quot;: &quot;/run/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata/hostname&quot;, &quot;HostsPath&quot;: &quot;/run/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata/hosts&quot;, &quot;StaticDir&quot;: &quot;/var/lib/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata&quot;, &quot;OCIConfigPath&quot;: &quot;/var/lib/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata/config.json&quot;, &quot;OCIRuntime&quot;: &quot;crun&quot;, &quot;ConmonPidFile&quot;: &quot;/run/containers/storage/overlay-containers/46e9d4d6bb1668a720024a2af14fc884e8bd7521cbae2d19ab2a10039d656a82/userdata/conmon.pid&quot;, &quot;PidFile&quot;: &quot;/run/taloslinux-projectplatform-src/controlplane-0.pid&quot;, &quot;Name&quot;: &quot;controlplane-0&quot;, &quot;RestartCount&quot;: 0, &quot;Driver&quot;: &quot;overlay&quot;, &quot;MountLabel&quot;: &quot;&quot;, &quot;ProcessLabel&quot;: &quot;&quot;, &quot;AppArmorProfile&quot;: &quot;&quot;, &quot;EffectiveCaps&quot;: [ &quot;CAP_AUDIT_CONTROL&quot;, &quot;CAP_AUDIT_READ&quot;, &quot;CAP_AUDIT_WRITE&quot;, &quot;CAP_BLOCK_SUSPEND&quot;, &quot;CAP_BPF&quot;, &quot;CAP_CHECKPOINT_RESTORE&quot;, &quot;CAP_CHOWN&quot;, &quot;CAP_DAC_OVERRIDE&quot;, &quot;CAP_DAC_READ_SEARCH&quot;, &quot;CAP_FOWNER&quot;, &quot;CAP_FSETID&quot;, &quot;CAP_IPC_LOCK&quot;, &quot;CAP_IPC_OWNER&quot;, &quot;CAP_KILL&quot;, &quot;CAP_LEASE&quot;, &quot;CAP_LINUX_IMMUTABLE&quot;, &quot;CAP_MAC_ADMIN&quot;, &quot;CAP_MAC_OVERRIDE&quot;, &quot;CAP_MKNOD&quot;, &quot;CAP_NET_ADMIN&quot;, &quot;CAP_NET_BIND_SERVICE&quot;, &quot;CAP_NET_BROADCAST&quot;, &quot;CAP_NET_RAW&quot;, &quot;CAP_PERFMON&quot;, &quot;CAP_SETFCAP&quot;, &quot;CAP_SETGID&quot;, &quot;CAP_SETPCAP&quot;, &quot;CAP_SETUID&quot;, &quot;CAP_SYSLOG&quot;, &quot;CAP_SYS_ADMIN&quot;, &quot;CAP_SYS_BOOT&quot;, &quot;CAP_SYS_CHROOT&quot;, &quot;CAP_SYS_MODULE&quot;, &quot;CAP_SYS_NICE&quot;, &quot;CAP_SYS_PACCT&quot;, &quot;CAP_SYS_PTRACE&quot;, &quot;CAP_SYS_RAWIO&quot;, &quot;CAP_SYS_RESOURCE&quot;, &quot;CAP_SYS_TIME&quot;, &quot;CAP_SYS_TTY_CONFIG&quot;, &quot;CAP_WAKE_ALARM&quot; ], &quot;BoundingCaps&quot;: [ &quot;CAP_AUDIT_CONTROL&quot;, &quot;CAP_AUDIT_READ&quot;, &quot;CAP_AUDIT_WRITE&quot;, &quot;CAP_BLOCK_SUSPEND&quot;, &quot;CAP_BPF&quot;, &quot;CAP_CHECKPOINT_RESTORE&quot;, &quot;CAP_CHOWN&quot;, &quot;CAP_DAC_OVERRIDE&quot;, &quot;CAP_DAC_READ_SEARCH&quot;, &quot;CAP_FOWNER&quot;, &quot;CAP_FSETID&quot;, &quot;CAP_IPC_LOCK&quot;, &quot;CAP_IPC_OWNER&quot;, &quot;CAP_KILL&quot;, &quot;CAP_LEASE&quot;, &quot;CAP_LINUX_IMMUTABLE&quot;, &quot;CAP_MAC_ADMIN&quot;, &quot;CAP_MAC_OVERRIDE&quot;, &quot;CAP_MKNOD&quot;, &quot;CAP_NET_ADMIN&quot;, &quot;CAP_NET_BIND_SERVICE&quot;, &quot;CAP_NET_BROADCAST&quot;, &quot;CAP_NET_RAW&quot;, &quot;CAP_PERFMON&quot;, &quot;CAP_SETFCAP&quot;, &quot;CAP_SETGID&quot;, &quot;CAP_SETPCAP&quot;, &quot;CAP_SETUID&quot;, &quot;CAP_SYSLOG&quot;, &quot;CAP_SYS_ADMIN&quot;, &quot;CAP_SYS_BOOT&quot;, &quot;CAP_SYS_CHROOT&quot;, &quot;CAP_SYS_MODULE&quot;, &quot;CAP_SYS_NICE&quot;, &quot;CAP_SYS_PACCT&quot;, &quot;CAP_SYS_PTRACE&quot;, &quot;CAP_SYS_RAWIO&quot;, &quot;CAP_SYS_RESOURCE&quot;, &quot;CAP_SYS_TIME&quot;, &quot;CAP_SYS_TTY_CONFIG&quot;, &quot;CAP_WAKE_ALARM&quot; ], &quot;ExecIDs&quot;: [], &quot;GraphDriver&quot;: { &quot;Name&quot;: &quot;overlay&quot;, &quot;Data&quot;: { &quot;LowerDir&quot;: &quot;/var/lib/containers/storage/overlay/323e4f85e1289b6242ddf124be9dbbc6631bd1f601709d67e7bc5b61fd25fed5/diff&quot;, &quot;MergedDir&quot;: &quot;/var/lib/containers/storage/overlay/6c21924a40d40a3b0c1486398e5397759f587abd7ec3dc1c27ee3c7e04307ce7/merged&quot;, &quot;UpperDir&quot;: &quot;/var/lib/containers/storage/overlay/6c21924a40d40a3b0c1486398e5397759f587abd7ec3dc1c27ee3c7e04307ce7/diff&quot;, &quot;WorkDir&quot;: &quot;/var/lib/containers/storage/overlay/6c21924a40d40a3b0c1486398e5397759f587abd7ec3dc1c27ee3c7e04307ce7/work&quot; } }, &quot;Mounts&quot;: [ { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;c8fa46fbe818e8d1faa1e1cd508fcc4038cae161e3e4583dc5a5feea3634cfb9&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/c8fa46fbe818e8d1faa1e1cd508fcc4038cae161e3e4583dc5a5feea3634cfb9/_data&quot;, &quot;Destination&quot;: &quot;/etc/cni&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;45b50b36c0e8c2a05294f7f0af11b9d4b93d6dc89080b0deedc1f59c08aec8e5&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/45b50b36c0e8c2a05294f7f0af11b9d4b93d6dc89080b0deedc1f59c08aec8e5/_data&quot;, &quot;Destination&quot;: &quot;/etc/kubernetes&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;100d8c290bcf1866a41e003ea248da5c735d90b5121bc1d2ba844406662248eb&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/100d8c290bcf1866a41e003ea248da5c735d90b5121bc1d2ba844406662248eb/_data&quot;, &quot;Destination&quot;: &quot;/opt&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;12bf6066792df2e0fbc93ddacafb34511e209a39d344ff4bed7e4797b8939962&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/12bf6066792df2e0fbc93ddacafb34511e209a39d344ff4bed7e4797b8939962/_data&quot;, &quot;Destination&quot;: &quot;/system/state&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;fed7c8c6e0e65438f093e125f66aa39b817ca3a3e1fa5a1017b84cb1b780df90&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/fed7c8c6e0e65438f093e125f66aa39b817ca3a3e1fa5a1017b84cb1b780df90/_data&quot;, &quot;Destination&quot;: &quot;/usr/etc/udev&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;2f9c669639dc2cb546ac1875b7b416a328a18ac97cacc66d2e5ae20b3392f6e6&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/2f9c669639dc2cb546ac1875b7b416a328a18ac97cacc66d2e5ae20b3392f6e6/_data&quot;, &quot;Destination&quot;: &quot;/usr/libexec/kubernetes&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; }, { &quot;Type&quot;: &quot;volume&quot;, &quot;Name&quot;: &quot;1e9aa8273f6be9ea07ff4e9a084de69e5a99f5fb439f7577728619ae7bebb840&quot;, &quot;Source&quot;: &quot;/var/lib/containers/storage/volumes/1e9aa8273f6be9ea07ff4e9a084de69e5a99f5fb439f7577728619ae7bebb840/_data&quot;, &quot;Destination&quot;: &quot;/var&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Mode&quot;: &quot;&quot;, &quot;Options&quot;: [ &quot;nosuid&quot;, &quot;nodev&quot;, &quot;rbind&quot; ], &quot;RW&quot;: true, &quot;Propagation&quot;: &quot;rprivate&quot; } ], &quot;Dependencies&quot;: [], &quot;NetworkSettings&quot;: { &quot;EndpointID&quot;: &quot;&quot;, &quot;Gateway&quot;: &quot;10.88.0.1&quot;, &quot;IPAddress&quot;: &quot;10.88.0.17&quot;, &quot;IPPrefixLen&quot;: 16, &quot;IPv6Gateway&quot;: &quot;&quot;, &quot;GlobalIPv6Address&quot;: &quot;&quot;, &quot;GlobalIPv6PrefixLen&quot;: 0, &quot;MacAddress&quot;: &quot;c2:8b:8b:0a:9c:c6&quot;, &quot;Bridge&quot;: &quot;&quot;, &quot;SandboxID&quot;: &quot;&quot;, &quot;HairpinMode&quot;: false, &quot;LinkLocalIPv6Address&quot;: &quot;&quot;, &quot;LinkLocalIPv6PrefixLen&quot;: 0, &quot;Ports&quot;: {}, &quot;SandboxKey&quot;: &quot;/run/netns/netns-2a246366-2a05-8781-3520-57fa82e9987f&quot;, &quot;Networks&quot;: { &quot;podman&quot;: { &quot;EndpointID&quot;: &quot;&quot;, &quot;Gateway&quot;: &quot;10.88.0.1&quot;, &quot;IPAddress&quot;: &quot;10.88.0.17&quot;, &quot;IPPrefixLen&quot;: 16, &quot;IPv6Gateway&quot;: &quot;&quot;, &quot;GlobalIPv6Address&quot;: &quot;&quot;, &quot;GlobalIPv6PrefixLen&quot;: 0, &quot;MacAddress&quot;: &quot;c2:8b:8b:0a:9c:c6&quot;, &quot;NetworkID&quot;: &quot;podman&quot;, &quot;DriverOpts&quot;: null, &quot;IPAMConfig&quot;: null, &quot;Links&quot;: null, &quot;Aliases&quot;: [ &quot;46e9d4d6bb16&quot;, &quot;controlplane-0&quot; ] } } }, &quot;Namespace&quot;: &quot;&quot;, &quot;IsInfra&quot;: false, &quot;IsService&quot;: false, &quot;KubeExitCodePropagation&quot;: &quot;invalid&quot;, &quot;lockNumber&quot;: 0, &quot;Config&quot;: { &quot;Hostname&quot;: &quot;controlplane-0&quot;, &quot;Domainname&quot;: &quot;&quot;, &quot;User&quot;: &quot;&quot;, &quot;AttachStdin&quot;: false, &quot;AttachStdout&quot;: false, &quot;AttachStderr&quot;: false, &quot;Tty&quot;: false, &quot;OpenStdin&quot;: false, &quot;StdinOnce&quot;: false, &quot;Env&quot;: [ &quot;PLATFORM=container&quot;, &quot;USERDATA=CENSORED&quot;, &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;, &quot;container=podman&quot;, &quot;HOSTNAME=controlplane-0&quot;, &quot;HOME=&quot;, &quot;container_uuid=46e9d4d6bb1668a720024a2af14fc884&quot; ], &quot;Cmd&quot;: null, &quot;Image&quot;: &quot;ghcr.io/siderolabs/talos:v1.7.5&quot;, &quot;Volumes&quot;: null, &quot;WorkingDir&quot;: &quot;/&quot;, &quot;Entrypoint&quot;: &quot;/sbin/init&quot;, &quot;OnBuild&quot;: null, &quot;Labels&quot;: { &quot;app&quot;: &quot;taloslinux-projectplatform-src&quot;, &quot;org.opencontainers.image.source&quot;: &quot;https://github.com/siderolabs/talos&quot; }, &quot;Annotations&quot;: { &quot;io.container.manager&quot;: &quot;libpod&quot;, &quot;io.podman.annotations.privileged&quot;: &quot;TRUE&quot;, &quot;io.podman.annotations.seccomp&quot;: &quot;unconfined&quot;, &quot;org.opencontainers.image.stopSignal&quot;: &quot;37&quot; }, &quot;StopSignal&quot;: 37, &quot;HealthcheckOnFailureAction&quot;: &quot;none&quot;, &quot;CreateCommand&quot;: [ &quot;podman&quot;, &quot;container&quot;, &quot;create&quot;, &quot;--env=PLATFORM=container&quot;, &quot;--env=USERDATA=CENSORED&quot;, &quot;--device&quot;, &quot;--network=bb7c9de1d0966a607e8d2d219210641f570e8d947f8d886e3694990bfad19955:ip=172.16.128.2,ip6=fde5:c139:5e49:5ad6::2&quot;, &quot;--name&quot;, &quot;controlplane-0&quot;, &quot;--hostname&quot;, &quot;controlplane-0&quot;, &quot;--label=app=taloslinux-projectplatform-src&quot;, &quot;--pidfile=/run/taloslinux-projectplatform-src/controlplane-0.pid&quot;, &quot;--mount=type=tmpfs,destination=/run&quot;, &quot;--mount=type=tmpfs,destination=/system&quot;, &quot;--mount=type=tmpfs,destination=/tmp&quot;, &quot;--mount=type=volume,destination=/etc/cni&quot;, &quot;--mount=type=volume,destination=/etc/kubernetes&quot;, &quot;--mount=type=volume,destination=/opt&quot;, &quot;--mount=type=volume,destination=/system/state&quot;, &quot;--mount=type=volume,destination=/usr/etc/udev&quot;, &quot;--mount=type=volume,destination=/usr/libexec/kubernetes&quot;, &quot;--mount=type=volume,destination=/var&quot;, &quot;--privileged&quot;, &quot;--read-only&quot;, &quot;--security-opt&quot;, &quot;seccomp=unconfined&quot;, &quot;--&quot;, &quot;ghcr.io/siderolabs/talos:v1.7.5&quot; ], &quot;SystemdMode&quot;: true, &quot;Umask&quot;: &quot;0022&quot;, &quot;Timeout&quot;: 0, &quot;StopTimeout&quot;: 10, &quot;Passwd&quot;: true, &quot;sdNotifyMode&quot;: &quot;container&quot; }, &quot;HostConfig&quot;: { &quot;Binds&quot;: [ &quot;c8fa46fbe818e8d1faa1e1cd508fcc4038cae161e3e4583dc5a5feea3634cfb9:/etc/cni:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;45b50b36c0e8c2a05294f7f0af11b9d4b93d6dc89080b0deedc1f59c08aec8e5:/etc/kubernetes:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;100d8c290bcf1866a41e003ea248da5c735d90b5121bc1d2ba844406662248eb:/opt:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;12bf6066792df2e0fbc93ddacafb34511e209a39d344ff4bed7e4797b8939962:/system/state:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;fed7c8c6e0e65438f093e125f66aa39b817ca3a3e1fa5a1017b84cb1b780df90:/usr/etc/udev:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;2f9c669639dc2cb546ac1875b7b416a328a18ac97cacc66d2e5ae20b3392f6e6:/usr/libexec/kubernetes:rw,rprivate,nosuid,nodev,rbind&quot;, &quot;1e9aa8273f6be9ea07ff4e9a084de69e5a99f5fb439f7577728619ae7bebb840:/var:rw,rprivate,nosuid,nodev,rbind&quot; ], &quot;CgroupManager&quot;: &quot;systemd&quot;, &quot;CgroupMode&quot;: &quot;private&quot;, &quot;ContainerIDFile&quot;: &quot;&quot;, &quot;LogConfig&quot;: { &quot;Type&quot;: &quot;journald&quot;, &quot;Config&quot;: null, &quot;Path&quot;: &quot;&quot;, &quot;Tag&quot;: &quot;&quot;, &quot;Size&quot;: &quot;0B&quot; }, &quot;NetworkMode&quot;: &quot;bridge&quot;, &quot;PortBindings&quot;: {}, &quot;RestartPolicy&quot;: { &quot;Name&quot;: &quot;&quot;, &quot;MaximumRetryCount&quot;: 0 }, &quot;AutoRemove&quot;: false, &quot;VolumeDriver&quot;: &quot;&quot;, &quot;VolumesFrom&quot;: null, &quot;CapAdd&quot;: [], &quot;CapDrop&quot;: [], &quot;Dns&quot;: [], &quot;DnsOptions&quot;: [], &quot;DnsSearch&quot;: [], &quot;ExtraHosts&quot;: [], &quot;GroupAdd&quot;: [], &quot;IpcMode&quot;: &quot;shareable&quot;, &quot;Cgroup&quot;: &quot;&quot;, &quot;Cgroups&quot;: &quot;default&quot;, &quot;Links&quot;: null, &quot;OomScoreAdj&quot;: 0, &quot;PidMode&quot;: &quot;private&quot;, &quot;Privileged&quot;: true, &quot;PublishAllPorts&quot;: false, &quot;ReadonlyRootfs&quot;: true, &quot;SecurityOpt&quot;: [ &quot;seccomp=unconfined&quot;, &quot;unmask=all&quot; ], &quot;Tmpfs&quot;: { &quot;/run&quot;: &quot;rw,rprivate,nosuid,nodev,tmpcopyup&quot;, &quot;/system&quot;: &quot;rw,rprivate,nosuid,nodev,tmpcopyup&quot;, &quot;/tmp&quot;: &quot;rw,rprivate,nosuid,nodev,tmpcopyup&quot; }, &quot;UTSMode&quot;: &quot;private&quot;, &quot;UsernsMode&quot;: &quot;&quot;, &quot;ShmSize&quot;: 65536000, &quot;Runtime&quot;: &quot;oci&quot;, &quot;ConsoleSize&quot;: [ 0, 0 ], &quot;Isolation&quot;: &quot;&quot;, &quot;CpuShares&quot;: 0, &quot;Memory&quot;: 0, &quot;NanoCpus&quot;: 0, &quot;CgroupParent&quot;: &quot;&quot;, &quot;BlkioWeight&quot;: 0, &quot;BlkioWeightDevice&quot;: null, &quot;BlkioDeviceReadBps&quot;: null, &quot;BlkioDeviceWriteBps&quot;: null, &quot;BlkioDeviceReadIOps&quot;: null, &quot;BlkioDeviceWriteIOps&quot;: null, &quot;CpuPeriod&quot;: 0, &quot;CpuQuota&quot;: 0, &quot;CpuRealtimePeriod&quot;: 0, &quot;CpuRealtimeRuntime&quot;: 0, &quot;CpusetCpus&quot;: &quot;&quot;, &quot;CpusetMems&quot;: &quot;&quot;, &quot;Devices&quot;: [], &quot;DiskQuota&quot;: 0, &quot;KernelMemory&quot;: 0, &quot;MemoryReservation&quot;: 0, &quot;MemorySwap&quot;: 0, &quot;MemorySwappiness&quot;: 0, &quot;OomKillDisable&quot;: false, &quot;PidsLimit&quot;: 2048, &quot;Ulimits&quot;: [ { &quot;Name&quot;: &quot;RLIMIT_NPROC&quot;, &quot;Soft&quot;: 262144, &quot;Hard&quot;: 262144 } ], &quot;CpuCount&quot;: 0, &quot;CpuPercent&quot;: 0, &quot;IOMaximumIOps&quot;: 0, &quot;IOMaximumBandwidth&quot;: 0, &quot;CgroupConf&quot;: null } } ] ``` And a network that matches this `network inspect` dump: ```json [ { &quot;name&quot;: &quot;taloslinux-projectplatform-src&quot;, &quot;id&quot;: &quot;bb7c9de1d0966a607e8d2d219210641f570e8d947f8d886e3694990bfad19955&quot;, &quot;driver&quot;: &quot;ipvlan&quot;, &quot;network_interface&quot;: &quot;ens3&quot;, &quot;created&quot;: &quot;2024-06-28T13:48:55.009641169+02:00&quot;, &quot;subnets&quot;: [ { &quot;subnet&quot;: &quot;172.16.128.0/24&quot;, &quot;gateway&quot;: &quot;172.16.128.1&quot; }, { &quot;subnet&quot;: &quot;fde5:c139:5e49:5ad6::/63&quot;, &quot;gateway&quot;: &quot;fde5:c139:5e49:5ad6::1&quot; } ], &quot;ipv6_enabled&quot;: true, &quot;internal&quot;: false, &quot;dns_enabled&quot;: false, &quot;labels&quot;: { &quot;app&quot;: &quot;taloslinux-projectplatform-src&quot; }, &quot;options&quot;: { &quot;mode&quot;: &quot;l3s&quot; }, &quot;ipam_options&quot;: { &quot;driver&quot;: &quot;host-local&quot; } } ] ``` ### Describe the results you received Sometimes (not always, with the same invocation) another IP-address in a custom network's subnet is assigned. Sometimes, the custom network isn't selected but rather the default network `podman`, and IP-addresses in its subnet. ### Describe the results you expected I expect any fault condition, such as specifying a custom network that cannot be found or used for some reason, to cause a fatal fault, rather than silently reverting to the default network. I also expect that custom networks can be specified including IP address assignment. ### podman info output ```yaml host: arch: amd64 buildahVersion: 1.33.5 cgroupControllers: - cpuset - cpu - io - memory - hugetlb - pids - rdma - misc cgroupManager: systemd cgroupVersion: v2 conmon: package: conmon_2.1.10+ds1-1build2_amd64 path: /usr/bin/conmon version: 'conmon version 2.1.10, commit: unknown' cpuUtilization: idlePercent: 99.07 systemPercent: 0.41 userPercent: 0.51 cpus: 8 databaseBackend: sqlite distribution: codename: noble distribution: ubuntu version: &quot;24.04&quot; eventLogger: journald freeLocks: 2008 hostname: projectplatform.u-shapedassembl.src.surf-hosted.nl idMappings: gidmap: null uidmap: null kernel: 6.8.0-36-generic linkmode: dynamic logDriver: journald memFree: 28175257600 memTotal: 33655078912 networkBackend: netavark networkBackendInfo: backend: netavark dns: package: aardvark-dns_1.4.0-5_amd64 path: /usr/lib/podman/aardvark-dns version: aardvark-dns 1.4.0 package: netavark_1.4.0-4_amd64 path: /usr/lib/podman/netavark version: netavark 1.11.0 ociRuntime: name: crun package: crun_1.14.1-1_amd64 path: /usr/bin/crun version: |- crun version 1.14.1 commit: de537a7965bfbe9992e2cfae0baeb56a08128171 rundir: /run/user/0/crun spec: 1.0.0 +SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +WASM:wasmedge +YAJL os: linux pasta: executable: /usr/bin/pasta package: passt_0.0~git20240220.1e6f92b-1_amd64 version: | pasta unknown version Copyright Red Hat GNU General Public License, version 2 or later &lt;https://www.gnu.org/licenses/old-licenses/gpl-2.0.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. remoteSocket: exists: true path: /run/podman/podman.sock security: apparmorEnabled: true capabilities: CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT rootless: false seccompEnabled: true seccompProfilePath: /usr/share/containers/seccomp.json selinuxEnabled: false serviceIsRemote: false slirp4netns: executable: /usr/bin/slirp4netns package: slirp4netns_1.2.1-1build2_amd64 version: |- slirp4netns version 1.2.1 commit: 09e31e92fa3d2a1d3ca261adaeb012c8d75a8194 libslirp: 4.7.0 SLIRP_CONFIG_VERSION_MAX: 4 libseccomp: 2.5.5 swapFree: 0 swapTotal: 0 uptime: 1h 40m 52.00s (Approximately 0.04 days) variant: &quot;&quot; plugins: authorization: null log: - k8s-file - none - passthrough - journald network: - bridge - macvlan - ipvlan volume: - local registries: {} store: configFile: /usr/share/containers/storage.conf containerStore: number: 5 paused: 0 running: 5 stopped: 0 graphDriverName: overlay graphOptions: {} graphRoot: /var/lib/containers/storage graphRootAllocated: 20617822208 graphRootUsed: 9570705408 graphStatus: Backing Filesystem: extfs Native Overlay Diff: &quot;true&quot; Supports d_type: &quot;true&quot; Supports shifting: &quot;true&quot; Supports volatile: &quot;true&quot; Using metacopy: &quot;false&quot; imageCopyTmpDir: /var/tmp imageStore: number: 2 runRoot: /run/containers/storage transientStore: false volumePath: /var/lib/containers/storage/volumes version: APIVersion: 4.9.3 Built: 0 BuiltTime: Thu Jan 1 01:00:00 1970 GitCommit: &quot;&quot; GoVersion: go1.22.1 Os: linux OsArch: linux/amd64 Version: 4.9.3 ``` ### Podman in a container No ### Privileged Or Rootless Privileged ### Upstream Latest Release No ### Additional environment details Additional environment details ### Additional information Client: Podman Engine Version: 4.9.3 API Version: 4.9.3 Go Version: go1.22.1 Built: Thu Jan 1 01:00:00 1970 OS/Arch: linux/amd64</DESCRIPTION>
  <REPONAME>podman</REPONAME>
  <TIMEDIFFERENCEDAYS>2</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #23119 from lsm5/packit-rhel-centos-separation [skip-ci] Packit: split rhel and centos-stream jobs</MESSAGE>
    <SHA>8650348bc97271db329f87e71a1a36823ced0115</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>specgen: parse devices even with privileged set When a users asks for specific devices we should still add them and not ignore them just because privileged adds all of them. Most notably if you set --device /dev/null:/dev/test you expect /dev/test in the container, however as we ignored them this was not the case. Another side effect is that the input was not validated at at all. This leads to confusion as descriped in the issue. Fixes #23132 Signed-off-by: Paul Holzinger &lt;pholzing@redhat.com&gt;</MESSAGE>
      <SHA>83863a6863e5f506cf7181da2e8226696043bcd2</SHA>
      <PATCHEDFILES>
        <FILE>pkg/specgen/generate/oci_linux.go</FILE>
        <FILE>pkg/util/utils_linux.go</FILE>
        <FILE>test/e2e/run_test.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
