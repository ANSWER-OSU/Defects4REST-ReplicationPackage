<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4781</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/4781</ISSUEURL>
  <TITLE>workflow_job_template_nodes POST authentication issuees</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When trying to POST to workflow_job_template_nodes using basic auth and/or token-auth AWX replies with 401 failure. `awx_web | 2019-09-19 08:40:32,754 WARNING awx.api.generics status 401 received by user AnonymousUser attempting to access /api/v2/workflow_job_template_nodes/ from XXX.XXX.XXX.XXX awx_web | 2019-09-19 08:40:32,780 WARNING django.request Bad Request: /api/v2/workflow_job_template_nodes/ awx_web | 2019-09-19 08:40:32,780 WARNING django.request Bad Request: /api/v2/workflow_job_template_nodes/ awx_web | [pid: 153|app: 0|req: 57/208] XXX.XXX.XXX.XXX () {38 vars in 568 bytes} [Thu Sep 19 08:40:32 2019] POST /api/v2/workflow_job_template_nodes/ =&gt; generated 140 bytes in 74 msecs (HTTP/1.1 400) 8 headers in 246 bytes (1 switches on core 0) awx_web | XXX.XXX.XXX.XXX - - [19/Sep/2019:08:40:32 +0000] &quot;POST /api/v2/workflow_job_template_nodes/ HTTP/1.1&quot; 400 140 &quot;-&quot; &quot;curl/7.54.0&quot; &quot;-&quot;` ##### ENVIRONMENT * AWX version: 7.0.0 * AWX install method: docker on linux * Ansible version: 2.6 * Operating System: CentOS * Web Browser: Curl 7.54 ##### STEPS TO REPRODUCE 0. nodes.json `{ { &quot;type&quot;: &quot;workflow_job_template_node&quot;, &quot;workflow_job_template&quot;: { &quot;id&quot;: 1238, &quot;name&quot;: &quot;DNS WF&quot;, &quot;description&quot;: &quot;&quot; }, &quot;unified_job_template&quot;: { &quot;id&quot;: 820, &quot;name&quot;: &quot;template-name&quot;, &quot;unified_job_type&quot;: &quot;job&quot; } &quot;extra_data&quot;: {}, &quot;inventory&quot;: null, &quot;scm_branch&quot;: null, &quot;job_type&quot;: null, &quot;job_tags&quot;: &quot;&quot;, &quot;skip_tags&quot;: null, &quot;limit&quot;: &quot;&quot;, &quot;diff_mode&quot;: null, &quot;verbosity&quot;: null, &quot;workflow_job_template&quot;: 1238, &quot;unified_job_template&quot;: 820, &quot;success_nodes&quot;: [], &quot;failure_nodes&quot;: [], &quot;always_nodes&quot;: [] } } ` 1. `curl -vvv -f -H 'Authorization: Token XXXX' -u username:password -H 'Content-Type: application/json' -XPOST http://awxhost/api/v2/workflow_job_template_nodes/ -d @nodes.json` ##### EXPECTED RESULTS Creation of nodes for related workflow ##### ACTUAL RESULTS Authorization failure. Client: ``` * The requested URL returned error: 400 Bad Request * stopped the pause stream! 100 706 0 0 100 706 0 7887 --:--:-- --:--:-- --:--:-- 7932 * Closing connection 0 curl: (22) The requested URL returned error: 400 Bad Request ``` Server: ``awx_web | 2019-09-19 08:40:32,754 WARNING awx.api.generics status 401 received by user AnonymousUser attempting to access /api/v2/workflow_job_template_nodes/ from XXX.XXX.XXX.XXX awx_web | 2019-09-19 08:40:32,780 WARNING django.request Bad Request: /api/v2/workflow_job_template_nodes/ awx_web | 2019-09-19 08:40:32,780 WARNING django.request Bad Request: /api/v2/workflow_job_template_nodes/ awx_web | [pid: 153|app: 0|req: 57/208] XXX.XXX.XXX.XXX () {38 vars in 568 bytes} [Thu Sep 19 08:40:32 2019] POST /api/v2/workflow_job_template_nodes/ =&gt; generated 140 bytes in 74 msecs (HTTP/1.1 400) 8 headers in 246 bytes (1 switches on core 0) awx_web | XXX.XXX.XXX.XXX - - [19/Sep/2019:08:40:32 +0000] &quot;POST /api/v2/workflow_job_template_nodes/ HTTP/1.1&quot; 400 140 &quot;-&quot; &quot;curl/7.54.0&quot; &quot;-&quot;`` ##### ADDITIONAL INFORMATION</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>27</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #4725 from chrismeyersfsu/fix-inv_migration_3_8_1 add missing imports</MESSAGE>
    <SHA>2f716af8a067edb642a3e81b146c8789f27b1acd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #4781 from kdelee/awxkit_silent_delete_fix When deleting a job sometimes we get this error</MESSAGE>
      <SHA>96c0b618f74855913baf374da60cb8674cc2c08f</SHA>
      <PATCHEDFILES>
        <FILE>awxkit/awxkit/api/pages/base.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
