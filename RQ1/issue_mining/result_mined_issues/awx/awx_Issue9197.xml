<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9197</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9197</ISSUEURL>
  <TITLE>AWX 17.0.1: have to log in twice</TITLE>
  <DESCRIPTION>&lt;!-- Issues are for **concrete, actionable bugs and feature requests** only - if you're just asking for debugging help or technical support, please use: - http://webchat.freenode.net/?channels=ansible-awx - https://groups.google.com/forum/#!forum/awx-project We have to limit this because of limited volunteer time to respond to issues! --&gt; ##### ISSUE TYPE - Bug Report ##### SUMMARY Sometimes I have to log in twice to AWX ##### ENVIRONMENT * AWX version: 17.0.1 * AWX install method: docker on linux * Ansible version: 2.9.17 * Operating System: openSUSE Leap 15.2 * Web Browser: Firefox on linux and windows. ##### STEPS TO REPRODUCE Sometimes when I log in to AWX I get a popup that i can't read because it disappears too fast, and are redirected to the login page and have to log in again. ##### EXPECTED RESULTS I would expect that logging in on AWX would actually log me in. ##### ACTUAL RESULTS I log in to AWX, then I get a popup that i can't read because it disappears too fast, and are redirected to the login page and have to log in again. ##### ADDITIONAL INFORMATION just guessing: could this be happening because the previous session timed out or the browser was just closed, instead of properly logging out of AWX?</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>121</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #10215 from keithjgrant/9218-sort-in-modal fix namespaced url params SUMMARY Fixes issues when multiple lists are on the page (generally only occurs now when on a list page with an open modal that contains a second list) — Navigating within the modal list currently wipes out URL parameters for the main list, causing the page to reload, which closes the modal. The fix prevents changes to one set of namespaced URL parameters from wiping out URL parameters from another namespace Refactors query string utils to consolidate a lot of repeated logic from components into a new util, updateQueryString. Use this function to modify query string parameters while maintaining params for multiple namespaces at the same time. QS utils that are no longer needed have been deleted: replaceParams and encodeNonDefaultQueryString Addresses #10181 and #9218 ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Keith Grant &lt;keithjgrant@gmail.com&gt; Reviewed-by: John Mitchell &lt;None&gt; Reviewed-by: Alex Corey &lt;Alex.swansboro@gmail.com&gt;</MESSAGE>
    <SHA>d70dfec6b6be47ce3df0b50e5dffc5da4c876281</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9908 from marshmalien/session-work Add Session context and redirects SUMMARY Issues: #8272 #9197 #8155 #9311 When user is logged out due to inactivity, redirect to the Login Page with a warning alert stating that their session expired. When a user logs in on one tab, redirect from login page to home on the other tabs. Clear session state when it expires and/or when a user logs out. Redirect users to direct link destination after authentication @AlexSCorey is looking at possibly rolling #9915 (SSO login redirect override URL is not working) into this PR ISSUE TYPE Feature Pull Request COMPONENT NAME UI Reviewed-by: Kersom &lt;None&gt; Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt; Reviewed-by: Keith Grant &lt;keithjgrant@gmail.com&gt; Reviewed-by: Alex Corey &lt;Alex.swansboro@gmail.com&gt; Reviewed-by: Marliana Lara &lt;marliana.lara@gmail.com&gt; Reviewed-by: Tiago Góes &lt;tiago.goes2009@gmail.com&gt;</MESSAGE>
      <SHA>fef24355abd445312b4c939ea257bad8906540ff</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/App.jsx</FILE>
        <FILE>awx/ui_next/src/App.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/AppContainer/AppContainer.jsx</FILE>
        <FILE>awx/ui_next/src/components/AppContainer/AppContainer.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/ContentError/ContentError.jsx</FILE>
        <FILE>awx/ui_next/src/constants.js</FILE>
        <FILE>awx/ui_next/src/contexts/Config.jsx</FILE>
        <FILE>awx/ui_next/src/contexts/Session.jsx</FILE>
        <FILE>awx/ui_next/src/locales/en/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/es/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/fr/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/ja/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/nl/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/zh/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/zu/messages.po</FILE>
        <FILE>awx/ui_next/src/screens/Login/Login.jsx</FILE>
        <FILE>awx/ui_next/src/setupTests.js</FILE>
        <FILE>awx/ui_next/testUtils/enzymeHelpers.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
