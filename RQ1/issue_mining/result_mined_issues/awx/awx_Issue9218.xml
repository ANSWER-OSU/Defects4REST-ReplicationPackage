<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9218</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9218</ISSUEURL>
  <TITLE>[ui_next] Paging credentials closes the launch popup</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY After upgrading AWX from 14.1.0 (to 15.0.1 to 16.0.0) to 17.0.1 it has been noticed that if you launch a job template from the templates menu (that has been found via filtering, or via pagination) using the &quot;Launch Template&quot; button, and paginating the credential list results in the Modal popup closing and the URL that was filtered returning to the root templates URL. If Launching the template from within the Template itself, the issue is not apparent. In summary, paginating the credentials in the popup modal from the templates list causes the root URL to reset and the filtering/pagination to be lost. ##### ENVIRONMENT * AWX version: 17.0.0.1 * AWX install method: Kubernetes * Ansible version: 2.9.17 * Operating System: Container host - Ubuntu Server, using awx container * Web Browser: Chrome/Edge/Firefox/Brave ##### STEPS TO REPRODUCE - Install AWX 17.0.1 using Kubernetes - Configure multiple templates (to exceed default 20 per page) - Paginate template list to 2nd page or higher - Click &quot;Launch Template&quot; from one of the templates in the list - Paginate the credential list - Watch modal close, and the search results be reset ##### EXPECTED RESULTS - The credential is selected and applied to the launch template ##### ACTUAL RESULTS - The launch template modal is closed, search filter emptied and the progress lost - The URL in the address bar is reset prior to launch template is clicked ##### ADDITIONAL INFORMATION - The time between modal closing and URL change is too fast for screen capture - Can upload additional photos upon request - URL Changes Observed - URL in Template List before launching template: https://awx.my.domain/#/templates?template.page=2 - URL after paginating credential list: https://awx.my.domain/#/templates?credential.page=2 - Happy to provide a PR, however I am not too familiar with react/the code base surrounding the issue. If pointed in the right direction, id be happy to do further investigation into the issue.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>118</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #10335 from mabashian/10129-multi-choice-survey Properly validate multiple choice survey questions SUMMARY link #10129 In action: ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Kersom &lt;None&gt;</MESSAGE>
    <SHA>49eccfb19f19179a23e0a8a816a6251f57717565</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #10215 from keithjgrant/9218-sort-in-modal fix namespaced url params SUMMARY Fixes issues when multiple lists are on the page (generally only occurs now when on a list page with an open modal that contains a second list) â€” Navigating within the modal list currently wipes out URL parameters for the main list, causing the page to reload, which closes the modal. The fix prevents changes to one set of namespaced URL parameters from wiping out URL parameters from another namespace Refactors query string utils to consolidate a lot of repeated logic from components into a new util, updateQueryString. Use this function to modify query string parameters while maintaining params for multiple namespaces at the same time. QS utils that are no longer needed have been deleted: replaceParams and encodeNonDefaultQueryString Addresses #10181 and #9218 ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Keith Grant &lt;keithjgrant@gmail.com&gt; Reviewed-by: John Mitchell &lt;None&gt; Reviewed-by: Alex Corey &lt;Alex.swansboro@gmail.com&gt;</MESSAGE>
      <SHA>d70dfec6b6be47ce3df0b50e5dffc5da4c876281</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/components/ListHeader/ListHeader.jsx</FILE>
        <FILE>awx/ui_next/src/components/ListHeader/ListHeader.test.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedDataList/PaginatedDataList.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedTable/HeaderRow.jsx</FILE>
        <FILE>awx/ui_next/src/components/PaginatedTable/PaginatedTable.jsx</FILE>
        <FILE>awx/ui_next/src/screens/ActivityStream/ActivityStream.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Host/Host.jsx</FILE>
        <FILE>awx/ui_next/src/screens/Inventory/InventoryList/useWsInventories.js</FILE>
        <FILE>awx/ui_next/src/screens/Job/JobOutput/JobOutput.jsx</FILE>
        <FILE>awx/ui_next/src/util/qs.js</FILE>
        <FILE>awx/ui_next/src/util/qs.test.js</FILE>
        <FILE>awx/ui_next/src/util/useRequest.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
