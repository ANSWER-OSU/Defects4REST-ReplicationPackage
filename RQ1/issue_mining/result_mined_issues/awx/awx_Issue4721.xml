<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4721</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/4721</ISSUEURL>
  <TITLE>[CLI] when tower is upgrading/returning /migrations_notran/ , CLI throws error with bad info</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY &lt;!-- Briefly describe the problem. --&gt; If tower is actively upgrading (or busted as it sometimes gets in development environment), running `awx -h` will return a hard to interpret error that does not really help you. ##### STEPS TO REPRODUCE &lt;!-- Please describe exactly how to reproduce the problem. --&gt; When tower is in the state that you get the &quot;upgrading screen&quot; instead of normal response, e.g. when normal request ends up redirecting you to `/migrations_notran/` and you see: `172.18.0.1 GET /migrations_notran/ - HTTP/1.1 200` in the logs, running the following gets weird error: ``` awx -h 'Base' object has no attribute 'available_versions' ``` ##### EXPECTED RESULTS &lt;!-- What did you expect to happen when running the steps above? --&gt; Help text, perhaps some message saying server is not responding normally ##### ACTUAL RESULTS &lt;!-- What actually happened? --&gt; Error message ##### Additional information I think this is an underlying awxkit problem, I've seen this before using just plain awxkit</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>record the parent workflow ID for job events that originate from a WF</MESSAGE>
    <SHA>ee2acd6639bedc31c97b67f52ceeba15e8e04b5c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>cli: show a better error if AWX is migrating see: https://github.com/ansible/awx/issues/4721</MESSAGE>
      <SHA>b91884fcd0ba13b13d18e3b61dc90e1250af3b70</SHA>
      <PATCHEDFILES>
        <FILE>awxkit/awxkit/cli/client.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>cli: show a better error if AWX is migrating see: https://github.com/ansible/awx/issues/4721</MESSAGE>
      <SHA>9d93cf80217558bb05cd3f5c596966ea32a3738b</SHA>
      <PATCHEDFILES>
        <FILE>awxkit/awxkit/cli/client.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
