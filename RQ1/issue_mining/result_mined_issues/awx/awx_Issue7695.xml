<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>7695</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/7695</ISSUEURL>
  <TITLE>Installer: Don't quote passwords when not subject to shell interpolation</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When setting `docker_registry_password` either with `-e` or directly in the `installer/inventory` file, the installer fails when the docker registry authentication fails, because the value `s3cr1t` is passed as `'s3cr1t'` due to the changes introduced in #3987. ##### ENVIRONMENT * AWX version: 13.0.0 (#bedbafe0f) * AWX install method: docker on linux * Ansible version: 2.8.12.post0 * Operating System: Ubuntu 19.10 local / RHEL 7.6 remote * Web Browser: Firefox 78.0.2 (64-bit) ##### STEPS TO REPRODUCE ```bash cd installer ansible-playbook -i inventory -e docker_registry_password=&quot;s3cr1t&quot; install.yml \ --start-at-task=&quot;Authenticate with Docker registry if registry password given&quot; -e &quot;awx_version=13.0.0&quot; ``` &lt;!-- Please describe exactly how to reproduce the problem. --&gt; ##### EXPECTED RESULTS TASK [image_push : Authenticate with Docker registry if registry password given] ******************************************************************************** changed: [REMOTESERVER -&gt; localhost] &lt;!-- What did you expect to happen when running the steps above? --&gt; ##### ACTUAL RESULTS TASK [image_push : Authenticate with Docker registry if registry password given] ******************************************************************************** fatal: [REMOTESERVER -&gt; localhost]: FAILED! =&gt; {&quot;changed&quot;: false, &quot;msg&quot;: &quot;Logging into dockerhub.internal.site for user philipsd6 failed - 401 Client Error: Unauthorized (\&quot;Get https://dockerhub.internal.site/v2/: unauthorized: BAD_CREDENTIAL\&quot;)&quot;} &lt;!-- What actually happened? --&gt; ##### ADDITIONAL INFORMATION The `quote` filter used in #3987 is appropriate for all the cases where passwords are exposed to the shell, via the shell or command module, or via templating into environment files. But this variable is supplied directly to the `docker_image` module, so it shouldn't be quoted. &lt;!-- Include any links to sosreport, database dumps, screenshots or other information. --&gt;</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #7613 from keithjgrant/6622-template-list-websockets Add websocket support to TemplateList Reviewed-by: https://github.com/apps/softwarefactory-project-zuul</MESSAGE>
    <SHA>bedbafe0f9106e1a51f5c933d4b08bea201f7394</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Installer: remove quote filter from docker_registry_password The docker_registry_password var isn't interpolated by the shell, so it shouldn't be quoted Fixes: #7695 Signed-off-by: Philip Douglass &lt;philip@philipdouglass.com&gt;</MESSAGE>
      <SHA>7f71777975627c9f693fdfa00fa4f18a34c49e97</SHA>
      <PATCHEDFILES>
        <FILE>installer/roles/image_push/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Installer: remove quote filter from docker_registry_password The docker_registry_password var isn't interpolated by the shell, so it shouldn't be quoted Fixes: #7695 Signed-off-by: Philip DOUGLASS &lt;philip.douglass@amadeus.com&gt;</MESSAGE>
      <SHA>ab20b5bd1087957a6bbc37f9b36b41ed306d6d81</SHA>
      <PATCHEDFILES>
        <FILE>installer/roles/image_push/tasks/main.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
