<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5741</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/5741</ISSUEURL>
  <TITLE>SSH Machine Credential Signed Certificate not calling add-key</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When using SSH Signed Cert credential, my job fails to SSH to the server. I see similar issues in the log, but in all cases add-key gets called and then fails. In my case it's not apparent that the provided SSH Signed Key is being used at all. ##### ENVIRONMENT * AWX version: 5.0.0.0 * AWX install method: docker on linux * Ansible version: 2.8.1 * Operating System: Windows * Web Browser: Chrome ##### STEPS TO REPRODUCE Create a credential type &quot;machine&quot; with an ssh private key and a public key signed by a CA trusted by the target host. This was tested by manually SSHing into the host using the private key and signed public key that are entered into AWX. Then run any job using the provided credential. ##### EXPECTED RESULTS I expect authentication to succeed. More generally, I expect the logs to show Ansible adding the signed key and the using it. [The logs](https://pastebin.com/iKsTTQa2) don't show any such behavior occurring, and it's near impossible to determine what exactly is causing the failure. ##### ACTUAL RESULTS Authentication will fail with the following error https://pastebin.com/J3cmmK5u</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5740 from ansible/subsystem-metrics-fix-4.1 Fix sync-only operation in async context backport 4.1</MESSAGE>
    <SHA>2765c7403f6494c7f02be1f2f55a783d2d975978</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #5741 from ansible/setuptools-scm-toml-4.1 Setuptools scm toml backport 4.1</MESSAGE>
      <SHA>685aa2c9c6392bd0f8f640c0887e53776b304d66</SHA>
      <PATCHEDFILES>
        <FILE>Makefile</FILE>
        <FILE>docs/licenses/packaging.txt</FILE>
        <FILE>docs/licenses/pkgconfig.txt</FILE>
        <FILE>docs/licenses/ruamel-yaml-clib.txt</FILE>
        <FILE>docs/licenses/setuptools-scm.txt</FILE>
        <FILE>docs/licenses/tomli.txt</FILE>
        <FILE>requirements/README.md</FILE>
        <FILE>requirements/requirements.in</FILE>
        <FILE>requirements/requirements.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
