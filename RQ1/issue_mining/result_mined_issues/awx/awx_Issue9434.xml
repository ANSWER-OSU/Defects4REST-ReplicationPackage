<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9434</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9434</ISSUEURL>
  <TITLE>request_tower_configuration.ps1 problem windows 2012 and 2016</TITLE>
  <DESCRIPTION>We have to limit this because of limited volunteer time to respond to issues! --&gt; ##### ISSUE TYPE - Bug Report ##### SUMMARY `request_tower_configuration.ps1` doesn't run on windows 2012 and 2016 ##### ENVIRONMENT * AWX version: 17.0.1 * AWX install method: ansible tower * Ansible version: 2.9.15 * Operating System: Red Hat Enterprise Linux release 8.3 (Ootpa) * Web Browser: Firefox 85.0.1 ##### STEPS TO REPRODUCE 1. download the latest version of request_tower_configuration.ps1 https://github.com/ansible/awx/blob/devel/tools/scripts/request_tower_configuration.ps1 2. Execute Powershell 3. Set Execution policy to Unrestricted (ref http://go.microsoft.com/fwlink/?LinkID=135170 ) $ `Set-ExecutionPolicy -ExecutionPolicy Unrestricted` (confirm yes at the request) ``` PS C:\Users\Administrator&gt; Set-ExecutionPolicy -ExecutionPolicy Unrestricted Execution Policy Change The execution policy helps protect you from scripts that you do not trust. Changing the execution policy might expose you to the security risks described in the about_Execution_Policies help topic at http://go.microsoft.com/fwlink/?LinkID=135170. Do you want to change the execution policy? [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is &quot;N&quot;): a ``` 4. Execute request_tower_configuration.ps1 `$ C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s https://10.0.121.63 -k -c fc951820-04eb-4a27-9c9c-d9a1c01f48ff -t 42 ` 5. Get Powershell version with `$ (Get-Host).Version ` ##### EXPECTED RESULTS Like windows 2019 ``` PS C:\Users\Administrator&gt; C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s https://10.0.121.63 -k -c f c951820-04eb-4a27-9c9c-d9a1c01f48ff -t 42 403 received... retrying in 1 minute (Attempt 1) PS C:\Users\Administrator&gt; ``` ##### ACTUAL RESULTS - Windows 2012 - Powershell version (5.1.14409.1018) ``` Windows PowerShell Copyright (C) 2016 Microsoft Corporation. All rights reserved. PS C:\Users\Administrator&gt; C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s https://10.0.121.63 -k -c fc951820-04eb-4a27-9c9c-d9a1c01f48ff -t 42 C:\Users\Administrator\Desktop\request_tower_configuration.ps1 : The property 'StatusCode' cannot be found on this object. Verify that the property exists. At line:1 char:1 + C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s htt ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [request_tower_configuration.ps1], PropertyNotFoundException + FullyQualifiedErrorId : PropertyNotFoundStrict,request_tower_configuration.ps1 PS C:\Users\Administrator&gt; ``` - Windows 2016 - Powershell version (5.1.14393.3866) ``` Windows PowerShell Copyright (C) 2016 Microsoft Corporation. All rights reserved. PS C:\Users\Administrator&gt; C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s https://10.0.121.63 -k -c f c951820-04eb-4a27-9c9c-d9a1c01f48ff -t 42 C:\Users\Administrator\Desktop\request_tower_configuration.ps1 : The property 'StatusCode' cannot be found on this object. Verify that the property exists. At line:1 char:1 + C:\Users\Administrator\Desktop\request_tower_configuration.ps1 -s htt ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [request_tower_configuration.ps1], PropertyNotFoundException + FullyQualifiedErrorId : PropertyNotFoundStrict,request_tower_configuration.ps1 PS C:\Users\Administrator&gt; ``` ##### ADDITIONAL INFORMATION It runs without errors when run without arguments: ``` PS C:\Users\Administrator&gt; C:\Users\Administrator\Desktop\request_tower_configuration.ps1 Request server configuration from Ansible Tower Usage: Execution using positional parameters: request_tower_configuration.ps1 https://example.towerhost.net 44d7507f2ead49af5fca80aa18fd24bc 38 Ignore self-signed certificates using named parameters: request_tower_configuration.ps1 -k -s https://example.towerhost.local -c 44d7507f2ead49af5fca80aa18fd24bc -t 38 Execution using optional extra_vars: request_tower_configuration.ps1 https://example.towerhost.net 44d7507f2ead49af5fca80aa18fd24bc 38 '{ key: value, dic t: { key: value }}' Options: -help, -h Show this message -tower_url, -s Tower server (e.g. https://&lt;server address&gt;[:server port]) (required) -insecure, -k Allow insecure SSL connections and transfers -host_config_key, -c &lt;host config key&gt; Host config key (required) -job_template_id, -t &lt;job template id&gt; Job template ID (required) -extra_vars, -e [&lt;extra vars&gt;] Extra variables ```</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>36</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #9827 from ansible/jakemcdermott-playbook-max-size Limit the visible playbook select region SUMMARY before after Reviewed-by: Kersom &lt;None&gt;</MESSAGE>
    <SHA>a10c3c04939ec03370ca08c8c65d463d129e9b1c</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9673 from jborean93/pwsh-request Fix up request tower ps script SUMMARY Fixes the request_tower_configuration.ps1 script with the following: Added PowerShell 6+ support, can now run on Linux Removes the uneeded strict and ErrorActionPreference settings which could impact the global settings Enables TLS 1.2 support on Windows PowerShell Fixes -insecure handling for certificates Works across ps versions Original didn't actually work (at least in my testing) Hopefully doesn't impact the global state Fixes IE not loaded error on Windows PowerShell when running on a new profile Changes the encoding to UTF-8 (no BOM) and made it executable Can now be invoked on Linux like ./request_tower_configuration.ps1 ... There are no non-ASCII chars in the script so this won't matter on Windows Fixes #9434 ISSUE TYPE Bugfix Pull Request COMPONENT NAME Tools AWX VERSION N/A Reviewed-by: Ryan Petrello &lt;None&gt;</MESSAGE>
      <SHA>f48e600563269d31c1a9ccaaebaa90a39a9810de</SHA>
      <PATCHEDFILES>
        <FILE>tools/scripts/request_tower_configuration.ps1</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
