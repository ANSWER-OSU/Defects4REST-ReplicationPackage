<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>4492</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/4492</ISSUEURL>
  <TITLE>API/SDK configure CUSTOM_LOGO doesn't take affect</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug Report ##### SUMMARY When utilizing the UI, one can head to Settings/UI and upload an image file. This &quot;replaces&quot; the Image file on the login screen. One can also view this image in a &quot;data:url&quot; format at api/v2/settings/ui CUSTOM_LOGO: &quot;data:image/png;base64,Base64EncodedStringhere=&quot; Attempting the same via the API or tower-cli (example below) produces no &quot;error&quot; and updates the CUSTOM_LOGO attribute properly when viewed in the API, but doesn't actually &quot;take effect&quot; in that the logo is not actually changed at login. ##### ENVIRONMENT * AWX version: 6.1.0 * AWX install method: openshift * Ansible version: Whatever comes built-in with 6.1.0's ansible virtualenv * Operating System: Openshift 3.11 running on RHEL 7.6 * Web Browser: Firefox ##### STEPS TO REPRODUCE Reproduce using the tower-cli: ``` with open(&quot;/path/to/a/png/file.png, 'rb') as logofile: logo_64_encode = base64.b64encode(logofile.read()).decode() created_data_url = 'data:image/png;base64,{}'.format(logo_64_encode) # Placeholder: Setup AWX auth - however you do it since there's 10,000 ways # Set a bunch of other settings as examples - these all WORK FINE # Assuming you have some valid data in login_message and custom_venv_paths variables settings_resource.modify('CUSTOM_LOGIN_INFO', login_message) settings_resource.modify('CUSTOM_VENV_PATHS', json.dumps(custom_venv_paths)) # Setup AWX Custom Logo using above data:url - this shows a successful return and updates CUSTOM_LOGO - but never displays settings_resource.modify('CUSTOM_LOGO', created_data_url) ``` ##### EXPECTED RESULTS if the tower-cli call succeeded (no errors) an i can see the encoded data:url in CUSTOM_LOGO - i would expect a Custom Image to be displayed at the login prompt. ##### ACTUAL RESULTS No image is displayed. Uploading the same image via the UI's &quot;browse&quot; option causes it to display immediately, same apparent data:url object written to CUSTOM_LOGO ##### ADDITIONAL INFORMATION N/A</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>4</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #4474 from AlanCoding/per_update_cache_37 [3.7] Per update roles and collections cache</MESSAGE>
    <SHA>b4c3da55d2e6de8b4533613accca0927a854bb0a</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #4492 from rooftopcellist/fix_broken_ui_links Use quotations when marking strings for translation [3.7.2]</MESSAGE>
      <SHA>6e75d25b74e366675e4b80b7705482ee89561335</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/client/src/inventories-hosts/inventories/related/sources/sources.form.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
