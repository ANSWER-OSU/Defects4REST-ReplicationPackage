<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5878</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/5878</ISSUEURL>
  <TITLE>Add Approval-Node-Handling to workflow.py</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Feature Idea ##### SUMMARY As approval nodes are a welcome addition to workflows in AWX they should be usable via awx-cli and Ansible module tower_workflow_template. Currently awx-cli generates this output on getting a schema with at least one Approval-Node: ```bash $ awx-cli workflow schema 67 *** DETAILS: Getting records. ************************************************* GET https://&lt;host&gt;/api/v2/workflow_job_template_nodes/ Params: [('workflow_job_template', 67)] Traceback (most recent call last): File &quot;/home/&lt;user&gt;/.local/bin/awx-cli&quot;, line 11, in &lt;module&gt; load_entry_point('ansible-tower-cli==3.3.7', 'console_scripts', 'awx-cli')() File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 764, in __call__ return self.main(*args, **kwargs) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 717, in main rv = self.invoke(ctx) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/cli/base.py&quot;, line 129, in invoke return super(TowerCLI, self).invoke(ctx) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 1137, in invoke return _process_result(sub_ctx.command.invoke(sub_ctx)) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 1137, in invoke return _process_result(sub_ctx.command.invoke(sub_ctx)) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 956, in invoke return ctx.invoke(self.callback, **ctx.params) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/click/core.py&quot;, line 555, in invoke return callback(*args, **kwargs) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/conf.py&quot;, line 373, in method_with_context_managed method(*args, **kwargs) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/cli/resource.py&quot;, line 107, in func result = method(*args, **kwargs) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/resources/workflow.py&quot;, line 286, in schema existing_network = self._get_schema(wfjt) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/resources/workflow.py&quot;, line 261, in _get_schema return self._workflow_node_structure(node_results) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/resources/workflow.py&quot;, line 250, in _workflow_node_structure schema_dict.append(branch_schema(root_node_id)) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/resources/workflow.py&quot;, line 245, in branch_schema branch_schema(sub_node_id)) File &quot;/home/&lt;user&gt;/.local/lib/python2.7/site-packages/tower_cli/resources/workflow.py&quot;, line 233, in branch_schema ujt_key = JOB_TYPES[job_type] KeyError: u'workflow_approval' ```</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>3</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5869 from ansible/ui_issue_5843 Don't repeatedly traverse workflow nodes when finding ancestors</MESSAGE>
    <SHA>9cd577bbabc07c6cf9fdb0cf8087d6bca5800802</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #5878 from ansible/try-find-delete-4.2 [4.2.0] deleting folder contents using find command</MESSAGE>
      <SHA>03a6613ab6fa3e2c76b6e3af13a3586f83d53f52</SHA>
      <PATCHEDFILES>
        <FILE>awx/playbooks/project_update.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
