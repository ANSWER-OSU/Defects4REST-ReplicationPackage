<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>15656</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/15656</ISSUEURL>
  <TITLE>Improve API Access Control in AWX</TITLE>
  <DESCRIPTION>### Please confirm the following - [X] I agree to follow this project's [code of conduct](https://docs.ansible.com/ansible/latest/community/code_of_conduct.html). - [X] I have checked the [current issues](https://github.com/ansible/awx/issues) for duplicates. - [X] I understand that AWX is open source software provided for free and that I might not receive a timely response. ### Feature type Enhancement to Existing Feature ### Feature Summary To meet security requirements, there is sometimes a need to restrict unauthorized access to the AWX API, including the root endpoint and documentation. By default, some endpoints are accessible without authentication, which may pose a risk of information leakage. **Proposal:** Introduce a new configuration parameter (**API_RESTRICT_ANONYMOUS_ACCESS**) that allows administrators to control unauthorized access to the API. ### Select the relevant components - [ ] UI - [X] API - [X] Docs - [ ] Collection - [ ] CLI - [ ] Other ### Steps to reproduce 1. Deploy AWX with default settings. 2. Navigate to the root API endpoint (/api/) or documentation endpoint (/api/doc/) without authentication. 3. Observe that certain information is accessible without requiring authentication. ### Current results Some API endpoints, including the root and documentation endpoints, are accessible to unauthenticated users by default. This may lead to potential information exposure in environments with heightened security requirements. ### Sugested feature result - Introduce a configuration parameter: API_RESTRICT_ANONYMOUS_ACCESS. - When enabled: - Require authentication for all API endpoints except those essential for login. - Restrict access to /api/ and /api/doc/ for unauthorized users. - By default, this parameter should be disabled to maintain the current behavior and ensure compatibility with existing installations. ### Additional information - This feature would allow organizations with strict security policies to use AWX without the need for custom modifications. - Administrators can enable or disable the feature based on their specific security needs. - The default settings ensure seamless upgrades for current installations.</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>110</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Move RBAC functional tests into folder (#15723)</MESSAGE>
    <SHA>14808cb99b54147f08ab37dc822c78ca94adbefc</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Add full api restriction setting (#15656) Signed-off-by: Юрий Савинкин &lt;isavinkin@astralinux.ru&gt;</MESSAGE>
      <SHA>00425cb2e4b9cb0438570f3318cb23006a3c9571</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/conf.py</FILE>
        <FILE>awx/conf/tests/unit/test_validators.py</FILE>
        <FILE>awx/main/middleware.py</FILE>
        <FILE>awx/main/tests/unit/test_middleware.py</FILE>
        <FILE>awx/settings/defaults.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add full api restriction setting (#15656) Signed-off-by: Yuriy Savinkin &lt;stkwar@gmail.com&gt;</MESSAGE>
      <SHA>e61089d37a9f4520349ff9ce6c28be708a8a9e2e</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/conf.py</FILE>
        <FILE>awx/conf/tests/unit/test_validators.py</FILE>
        <FILE>awx/main/middleware.py</FILE>
        <FILE>awx/main/tests/unit/test_middleware.py</FILE>
        <FILE>awx/settings/defaults.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Add full api restriction setting (#15656) Signed-off-by: Yuriy Savinkin &lt;stkwar@gmail.com&gt;</MESSAGE>
      <SHA>85bf9491646323c2256a359c20895a13568b1c31</SHA>
      <PATCHEDFILES>
        <FILE>awx/api/conf.py</FILE>
        <FILE>awx/conf/tests/unit/test_validators.py</FILE>
        <FILE>awx/main/middleware.py</FILE>
        <FILE>awx/main/tests/unit/test_middleware.py</FILE>
        <FILE>awx/settings/defaults.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
