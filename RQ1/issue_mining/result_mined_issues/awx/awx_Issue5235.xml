<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>5235</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/5235</ISSUEURL>
  <TITLE>Refactor VariablesField to handle variables stored as JSON</TITLE>
  <DESCRIPTION>##### ISSUE TYPE - Bug ##### SUMMARY If you use the `VariablesField` in a form and create a resource with variables formatted as JSON, the edit form field will be toggled to `YAML` by default. https://github.com/ansible/awx/blob/devel/awx/ui_next/src/components/CodeMirrorInput/VariablesField.jsx#L19 defaults to `yaml` even if the stored value is JSON. `VariablesInput` is configured a bit differently but uses utility functions to determine whether value(s) are JSON/YAML https://github.com/ansible/awx/blob/devel/awx/ui_next/src/components/CodeMirrorInput/VariablesInput.jsx#L32. One idea for achieving this would be to wrap the component with `withFormik` in order to have access to the value on props. https://jaredpalmer.com/formik/docs/api/withformik https://github.com/ansible/awx/pull/5180#issuecomment-548875368</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>78</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #5223 from sarabrajsingh/release_3.8.4 [3.8.4] bumped django version from 2.2.18 to 2.2.20</MESSAGE>
    <SHA>6b5bd349b08a5fc8747d4d872b3a5de037e8b361</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #5235 from chrismeyersfsu/settingify-notification-loop add setting for notification job status retry loop</MESSAGE>
      <SHA>f2157b920dd010bf7f080e205162fefed42b2f2b</SHA>
      <PATCHEDFILES>
        <FILE>awx/main/tasks.py</FILE>
        <FILE>awx/settings/defaults.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
