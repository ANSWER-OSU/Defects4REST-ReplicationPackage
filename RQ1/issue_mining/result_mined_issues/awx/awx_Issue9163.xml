<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>9163</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/9163</ISSUEURL>
  <TITLE>Admins cannot access Workflow Approvals page</TITLE>
  <DESCRIPTION>&lt;!-- Issues are for **concrete, actionable bugs and feature requests** only - if you're just asking for debugging help or technical support, please use: - http://webchat.freenode.net/?channels=ansible-awx - https://groups.google.com/forum/#!forum/awx-project We have to limit this because of limited volunteer time to respond to issues! --&gt; ##### ISSUE TYPE - Bug Report ##### SUMMARY &lt;!-- Briefly describe the problem. --&gt; After upgrading from 15.0.1 to 17.0.0, admin users cannot access the Workflow Approvals page. Non-admin users can access the page as expected. Relevant error from the browser: `TypeError: Cannot read property 'username' of undefined at dI (WorkflowApprovalStatus.jsx:50) at Xo (react-dom.production.min.js:153) at vs (react-dom.production.min.js:261) at cl (react-dom.production.min.js:246) at sl (react-dom.production.min.js:246) at Qs (react-dom.production.min.js:239) at react-dom.production.min.js:123 at t.unstable_runWithPriority (scheduler.production.min.js:19) at Hi (react-dom.production.min.js:122) at Gi (react-dom.production.min.js:123)` ##### ENVIRONMENT * AWX version: 17.0.0 * AWX install method: docker on linux * Ansible version: X.Y.Z * Operating System: * Web Browser: ##### STEPS TO REPRODUCE &lt;!-- Please describe exactly how to reproduce the problem. --&gt; ##### EXPECTED RESULTS &lt;!-- What did you expect to happen when running the steps above? --&gt; ##### ACTUAL RESULTS &lt;!-- What actually happened? --&gt; ##### ADDITIONAL INFORMATION &lt;!-- Include any links to sosreport, database dumps, screenshots or other information. --&gt;</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>112</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #10148 from keithjgrant/8907-launch-prompt-vars-validation Add Variables field validation in launch prompt SUMMARY Adds validation for the Variables field during launch prompts. Prevents unexpected expanding of YAML expressions in the default value (similar to #7506) — this was caused by the default value being parsed into a JavaScript object and then re-translated back to YAML when mounting the &quot;Other Prompts&quot; step addresses #8907 ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Jake McDermott &lt;yo@jakemcdermott.me&gt; Reviewed-by: Tiago Góes &lt;tiago.goes2009@gmail.com&gt;</MESSAGE>
    <SHA>2191ab1c6c039da75c7f58840e573014381f97d4</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Merge pull request #9988 from mabashian/9163-admin-approvals-page Fixes bug where workflow approvals page would crash if deleted username was referenced SUMMARY link #9163 The tooltip on the status labels for completed workflow approvals attempts to show the username of the user that acted on it. If that user has been deleted then the key is not present in the object. This would cause the page to crash. To fix this, I conditionally show a different string when the username is not available. If a user wants to see which deleted user acted on the approval they'll have to go to the activity stream. ISSUE TYPE Bugfix Pull Request COMPONENT NAME UI Reviewed-by: Alex Corey &lt;Alex.swansboro@gmail.com&gt; Reviewed-by: Mat Wilson &lt;mawilson@redhat.com&gt;</MESSAGE>
      <SHA>b1cd7eb997d4a78264e91e2dc51b6d867a34edad</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui_next/src/locales/en/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/es/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/fr/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/ja/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/nl/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/zh/messages.po</FILE>
        <FILE>awx/ui_next/src/locales/zu/messages.po</FILE>
        <FILE>awx/ui_next/src/screens/WorkflowApproval/shared/WorkflowApprovalStatus.jsx</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
