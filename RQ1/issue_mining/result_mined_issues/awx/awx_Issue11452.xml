<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>11452</ISSUENO>
  <ISSUEURL>https://github.com/ansible/awx/issues/11452</ISSUEURL>
  <TITLE>TypeError: Converting circular structure to JSON trying to relaunch Jobs</TITLE>
  <DESCRIPTION>### Please confirm the following - [X] I agree to follow this project's [code of conduct](http://docs.ansible.com/ansible/latest/community/code_of_conduct.html). - [X] I have checked the [current issues](https://github.com/ansible/awx/issues) for duplicates. - [X] I understand that AWX is open source software provided for free and that I am not entitled to status updates or other assurances. ### Summary Trying to relaunch a job is causing `Failed to launch job.` `TypeError: Converting circular structure to JSON --&gt; starting at object with constructor 'HTMLButtonElement'` ### AWX version devel ### Installation method docker on linux ### Modifications no ### Ansible version _No response_ ### Operating system _No response_ ### Web browser Chrome ### Steps to reproduce 1. Create a job template 2. Launch this JT 3. Go to jobs list 4. Relaunch the job ### Expected results The job to relaunch successfully and run ### Actual results ``` TypeError: Converting circular structure to JSON --&gt; starting at object with constructor 'HTMLButtonElement' | property '__reactFiber$ufx73v3ec7m' -&gt; object with constructor 'Bl' --- property 'stateNode' closes the circle at stringify (&lt;anonymous&gt;) at https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:912670 at Object.l.transformRequest (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:912674) at https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1450812 at Object.u [as forEach] (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:356646) at Object.e.exports (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1450785) at e.exports (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1450199) at u.request (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1449016) at u.r.forEach.u.&lt;computed&gt; [as post] (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1449469) at Function.post (https://localhost:8043/static/js/2.c2ae93d7.chunk.js:2:1059419) ``` ![image](https://user-images.githubusercontent.com/12464858/145837634-7227b6ae-d1e4-4553-9a74-c5bc68aa3569.png) ### Additional information _No response_</DESCRIPTION>
  <REPONAME>awx</REPONAME>
  <TIMEDIFFERENCEDAYS>23</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Merge pull request #11470 from rebeccahhh/devel Jobs page filter status with OR operator</MESSAGE>
    <SHA>ddc428532fd239a261478eb8ecad4da0ace64af1</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fix relaunch of jobs Events were passed to `handleRelaunch` and those events structure were not parseable to JSON - breaking the relaunch of jobs. React 17 changes were the reason why this bug was evident. See: https://github.com/ansible/awx/issues/11452</MESSAGE>
      <SHA>713ad8e5a4470b1bc7b9acb663f6512e2292ae1e</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/src/components/JobList/JobListItem.js</FILE>
        <FILE>awx/ui/src/components/LaunchButton/LaunchButton.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobDetail/JobDetail.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobOutput/shared/OutputToolbar.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix relaunch of jobs Events were passed to `handleRelaunch` and those events structure were not parseable to JSON - breaking the relaunch of jobs. React 17 changes made this bug visible. See: https://github.com/ansible/awx/issues/11452</MESSAGE>
      <SHA>b287f4f4c7f64a98811e1ca556a4d15b6d2ce2d8</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/src/components/JobList/JobListItem.js</FILE>
        <FILE>awx/ui/src/components/LaunchButton/LaunchButton.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobDetail/JobDetail.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobOutput/shared/OutputToolbar.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix relaunch of jobs Events were passed to `handleRelaunch` and those events structure were not parseable to JSON - breaking the relaunch of jobs. React 17 changes made this bug visible. Also, remove withRouter from LaunchButton. See: https://github.com/ansible/awx/issues/11452</MESSAGE>
      <SHA>ab6e650e9c0e3b1d50739b852c469957aabaa40b</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/src/components/JobList/JobListItem.js</FILE>
        <FILE>awx/ui/src/components/LaunchButton/LaunchButton.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobDetail/JobDetail.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobOutput/shared/OutputToolbar.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix relaunch of jobs Events were passed to `handleRelaunch` and those events structure were not parseable to JSON - breaking the relaunch of jobs. React 17 changes made this bug visible. Also, remove withRouter from LaunchButton. See: https://github.com/ansible/awx/issues/11452</MESSAGE>
      <SHA>5195a86c20204514e1912ee6742becd2aad3cc54</SHA>
      <PATCHEDFILES>
        <FILE>awx/ui/src/components/JobList/JobListItem.js</FILE>
        <FILE>awx/ui/src/components/LaunchButton/LaunchButton.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobDetail/JobDetail.js</FILE>
        <FILE>awx/ui/src/screens/Job/JobOutput/shared/OutputToolbar.js</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
