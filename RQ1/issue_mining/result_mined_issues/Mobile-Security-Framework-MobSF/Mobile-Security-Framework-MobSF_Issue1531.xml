<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>1531</ISSUENO>
  <ISSUEURL>https://github.com/MobSF/Mobile-Security-Framework-MobSF/issues/1531</ISSUEURL>
  <TITLE>IsADirectoryError: [Errno 21] Is a directory: '/Users/&lt;user&gt;/MobSF/uploads/&lt;hash&gt;/Pods/SQLite.swift'</TITLE>
  <DESCRIPTION>## ENVIRONMENT ``` OS and Version: MacOS 10.15.6 Python Version: Python 3.8.5 MobSF Version: Mobile Security Framework v3.1.4 Beta ``` ## EXPLANATION OF THE ISSUE Uploaded ZIP file of iOS source code and stopped scanning after throwing following error in the UI: ``` Error Inappropriate argument type. 'NoneType' object is not subscriptable ``` ## STEPS TO REPRODUCE THE ISSUE ``` 1. ZIP iOS source code 2. Upload to MobSF UI 3. Returns error while scanning ``` ## LOG FILE ``` [INFO] 08/Sep/2020 10:04:29 - OS: Darwin [INFO] 08/Sep/2020 10:04:29 - Platform: macOS-10.15.6-x86_64-i386-64bit [INFO] 08/Sep/2020 10:04:29 - Dist: darwin 19.6.0 [INFO] 08/Sep/2020 10:04:29 - MobSF Basic Environment Check [INFO] 08/Sep/2020 10:04:29 - Checking for Update. [INFO] 08/Sep/2020 10:04:29 - No updates available. [INFO] 08/Sep/2020 10:04:32 - Starting Analysis on : Archive.zip [INFO] 08/Sep/2020 10:04:32 - Extracting ZIP [INFO] 08/Sep/2020 10:04:32 - Unzipping [INFO] 08/Sep/2020 10:04:41 - Checking for ZIP Validity and Mode [INFO] 08/Sep/2020 10:04:41 - Redirecting to iOS Source Code Analyzer [INFO] 08/Sep/2020 10:04:41 - iOS Static Analysis Started [INFO] 08/Sep/2020 10:04:41 - iOS Source Code Analysis Started [INFO] 08/Sep/2020 10:04:41 - ZIP Already Extracted [INFO] 08/Sep/2020 10:04:41 - Generating Hashes [INFO] 08/Sep/2020 10:04:42 - Get Files, BIN Plist -&gt; XML, and Normalize [INFO] 08/Sep/2020 10:04:43 - iOS Info.plist Analysis Started [INFO] 08/Sep/2020 10:04:43 - Finding Info.plist in iOS Source [INFO] 08/Sep/2020 10:04:43 - Checking Permissions [INFO] 08/Sep/2020 10:04:43 - Checking for Insecure Connections [INFO] 08/Sep/2020 10:04:43 - Fetching Details from App Store: $(PRODUCT_BUNDLE_IDENTIFIER) [WARNING] 08/Sep/2020 10:04:43 - Unable to get app details. [INFO] 08/Sep/2020 10:04:43 - Starting iOS Source Code and PLIST Analysis [ERROR] 08/Sep/2020 10:05:04 - iOS Source Code Analysis Traceback (most recent call last): File &quot;/Users/&lt;user&gt;/Mobile-Security-Framework-MobSF/StaticAnalyzer/views/ios/code_analysis.py&quot;, line 72, in ios_source_analysis pfile.read_text('utf-8', 'ignore'), relative_java_path) File &quot;/usr/local/Cellar/python@3.8/3.8.5/Frameworks/Python.framework/Versions/3.8/lib/python3.8/pathlib.py&quot;, line 1232, in read_text with self.open(mode='r', encoding=encoding, errors=errors) as f: File &quot;/usr/local/Cellar/python@3.8/3.8.5/Frameworks/Python.framework/Versions/3.8/lib/python3.8/pathlib.py&quot;, line 1218, in open return io.open(self, mode, buffering, encoding, errors, newline, IsADirectoryError: [Errno 21] Is a directory: '/Users/&lt;user&gt;/Mobile-Security-Framework-MobSF/uploads/c7e6bb61c08833d2a8fd2896a75edc3f/Pods/SQLite.swift' [INFO] 08/Sep/2020 10:05:04 - Fetching icon path [ERROR] 08/Sep/2020 10:05:04 - Error Perfroming Static Analysis Traceback (most recent call last): File &quot;/Users/&lt;user&gt;/Mobile-Security-Framework-MobSF/StaticAnalyzer/views/ios/static_analyzer.py&quot;, line 199, in static_analyzer_ios list(set(code_analysis_dic['urls_list']))) TypeError: 'NoneType' object is not subscriptable [ERROR] 08/Sep/2020 10:05:04 - 'NoneType' object is not subscriptable [ERROR] 08/Sep/2020 10:05:04 - Internal Server Error: /StaticAnalyzer_iOS/ ```</DESCRIPTION>
  <REPONAME>Mobile-Security-Framework-MobSF</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>frida upgrade</MESSAGE>
    <SHA>686755a4984665ee0d72fe63bf7f17139bb03863</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Fixed #1531 Fixed #1531 Using is_dir() on pfile to check if it's a directory and if True, skip it.</MESSAGE>
      <SHA>938a19ebc7f1b697e3ba4637239a359002522e4b</SHA>
      <PATCHEDFILES>
        <FILE>StaticAnalyzer/views/ios/code_analysis.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Merge branch 'master' into Fixed-#1531</MESSAGE>
      <SHA>7f56931c5ef143da76799f94f1814315020a5a87</SHA>
      <PATCHEDFILES>
        <FILE>DynamicAnalyzer/tools/onDevice/frida/frida-server-12.11.12-android-arm</FILE>
        <FILE>DynamicAnalyzer/tools/onDevice/frida/frida-server-12.11.12-android-arm64</FILE>
        <FILE>DynamicAnalyzer/tools/onDevice/frida/frida-server-12.11.12-android-x86</FILE>
        <FILE>DynamicAnalyzer/tools/onDevice/frida/frida-server-12.11.12-android-x86_64</FILE>
        <FILE>DynamicAnalyzer/views/android/environment.py</FILE>
        <FILE>requirements.txt</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fixed #1531 (#1532) Fixed #1531 Using is_dir() on pfile to check if it's a directory and if True, skip it. Co-authored-by: Ajin Abraham &lt;ajin25@gmail.com&gt;</MESSAGE>
      <SHA>14236db914e8657e991eb046d31c8e2819f5a0f7</SHA>
      <PATCHEDFILES>
        <FILE>StaticAnalyzer/views/ios/code_analysis.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
