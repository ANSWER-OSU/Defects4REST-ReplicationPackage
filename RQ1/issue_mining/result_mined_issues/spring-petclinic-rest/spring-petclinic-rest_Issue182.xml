<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>182</ISSUENO>
  <ISSUEURL>https://github.com/spring-petclinic/spring-petclinic-rest/issues/182</ISSUEURL>
  <TITLE>Restarting with external database configured re-runs the database init scripts</TITLE>
  <DESCRIPTION>When starting the application with the following docker-compose definition, restarting the application fails because it is trying to initialize the (then existing) database again: ```yaml services: backend: image: springcommunity/spring-petclinic-rest:3.2.1 ports: - &quot;9966:9966&quot; environment: SPRING_PROFILES_ACTIVE: postgres,spring-data-jpa SPRING_DATASOURCE_URL: jdbc:postgresql://database:5432/petclinic SPRING_DATASOURCE_USERNAME: petclinic SPRING_DATASOURCE_PASSWORD: petclinic depends_on: - database database: image: postgres:latest environment: POSTGRES_DB: petclinic POSTGRES_USER: petclinic POSTGRES_PASSWORD: petclinic ports: - &quot;5432:5432&quot; volumes: - dbdata:/var/lib/postgresql/data volumes: dbdata: ``` Is this a bug or is there a way for the application to detect that the database has been initialized already? When adding `SPRING_SQL_INIT_MODE: never` after the first run, the application works fine since this forces the application to skip the database initialization.</DESCRIPTION>
  <REPONAME>spring-petclinic-rest</REPONAME>
  <TIMEDIFFERENCEDAYS>18</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Implements the use of ProblemDetail for HTTP error responses. (issue #149 and PR #173) (#175) * feat: Implements the use of ProblemDetail for HTTP error responses. * fix: Fixing OpenAPI documentation and implementing date and time details in ProblemDetail. * fix: Implements some adjustments to properties. * fix: Adjusts the Time Sample property to the ISO 8601 standard.</MESSAGE>
    <SHA>182e68cadb3eef4ae51c248eb361fc7877f6ee41</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Handles container restarts for already initialized postgresql database #182</MESSAGE>
      <SHA>0a1f8869d94e55d84a5b5232acc9c20470e7a5a1</SHA>
      <PATCHEDFILES>
        <FILE>src/main/resources/db/postgres/data.sql</FILE>
        <FILE>src/main/resources/db/postgres/schema.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Handles container restarts for already initialized postgresql database #182 (#185)</MESSAGE>
      <SHA>26a80b7a510af1fda0acdfb45d65aa480bdb7607</SHA>
      <PATCHEDFILES>
        <FILE>src/main/resources/db/postgres/data.sql</FILE>
        <FILE>src/main/resources/db/postgres/schema.sql</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
