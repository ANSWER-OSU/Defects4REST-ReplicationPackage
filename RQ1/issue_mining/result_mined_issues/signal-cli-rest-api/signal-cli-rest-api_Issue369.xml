<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>369</ISSUENO>
  <ISSUEURL>https://github.com/bbernhard/signal-cli-rest-api/issues/369</ISSUEURL>
  <TITLE>Search endpoint broken with multiple accounts</TITLE>
  <DESCRIPTION>### The problem I have 2 Signal accounts registered on the server (version 0.66). When trying to use `/v1/search`, the following error is returned: `Multiple users found, you need to specify an account (phone number) with -a\n` Directly using signal-cli-native from within the container works when supplying one of the registered accounts with the -a parameter like suggested in the error message. Maybe the search endpoint could be changed to to `/v1/search/{number}`? ### Are you using the latest released version? - [X] Yes ### Have you read the troubleshooting page? - [X] Yes ### What type of installation are you running? signal-cli-rest-api Docker Container ### In which mode are you using the docker container? Native Mode ### What's the architecture of your host system? x86-64 ### Additional information This issue was previously mentioned in a feature request: [Search for registered numbers with specific account for multiple users #253](253)</DESCRIPTION>
  <REPONAME>signal-cli-rest-api</REPONAME>
  <TIMEDIFFERENCEDAYS>17</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>updated graalvm to version 22.3.0</MESSAGE>
    <SHA>d8ded891a1e8b41946a7c46216ba7ba55a27a826</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fixed bug in search endpoint * when multiple accounts are registered, signal-cli expects the account specified with '-a'. In order to stay backwards compatible, the search endpoint was extended with an optional number parameter. i.e: '/search/{number}'. In case only one account is registered, the number parameter can be omitted. see #369</MESSAGE>
      <SHA>4dc19813b655b3ae1396d212933cccc28487c3bf</SHA>
      <PATCHEDFILES>
        <FILE>src/api/api.go</FILE>
        <FILE>src/client/client.go</FILE>
        <FILE>src/docs/docs.go</FILE>
        <FILE>src/docs/swagger.json</FILE>
        <FILE>src/docs/swagger.yaml</FILE>
        <FILE>src/main.go</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
