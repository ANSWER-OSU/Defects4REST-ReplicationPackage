<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>856</ISSUENO>
  <ISSUEURL>https://github.com/nocodb/nocodb/issues/856</ISSUEURL>
  <TITLE>Stop returning REST response with `Has Many`, `Belongs To`, or `Many to Many` by default, because they can be controlled if query params `bt`, `hm`, or `mm` are set</TITLE>
  <DESCRIPTION>please provide the following details : NocoDB used as docker : false (heroku) NocoDB version : 0.83.5 Database used in NC_DB URL pg Project was created by clicking : New Project by connecting to external database Database on which spreadsheet is created : pg OS on which NocoDB is running : heroku hobby dynamo Node.js version if running as node : v12.22.6 Database version : * NoCoDB: PostgreSQL 13.5 (Ubuntu 13.5-2.pgdg20.04+1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0, 64-bit * Project DB: PostgreSQL 14.1 on aarch64-unknown-linux-gnu, compiled by gcc (Ubuntu 10.3.0-1ubuntu1~20.04) 10.3.0, 64-bit **Steps To Reproduce** 1. Query GET for a resource that has bt, hm or mm without setting bt, hm, mm `api/v1/countries` which `has many`.`places` **Expected behavior** JSON should return the entity without any joins **Actual behaviour** All relations are returned with no apparent way to turn it off ```[ { &quot;Id&quot;: 1, &quot;title&quot;: &quot;Country A&quot;, &quot;CreatedAt&quot;: &quot;2021-12-09T11:05:44.540Z&quot;, &quot;UpdatedAt&quot;: &quot;2021-12-12T11:00:23.904Z&quot;, &quot;is_published&quot;: true, &quot;placesList&quot;: [ { &quot;Id&quot;: 4, &quot;title&quot;: &quot;Place A&quot;, &quot;CountriesId&quot;: 1 }, { &quot;Id&quot;: 6, &quot;title&quot;: &quot;Place B&quot;, &quot;CountriesId&quot;: 1 }, { &quot;Id&quot;: 7, &quot;title&quot;: &quot;Place C&quot;, &quot;CountriesId&quot;: 1 } ] }, { &quot;Id&quot;: 2, &quot;title&quot;: &quot;Country B&quot;, &quot;CreatedAt&quot;: &quot;2021-12-09T11:05:50.562Z&quot;, &quot;UpdatedAt&quot;: &quot;2021-12-12T11:00:39.131Z&quot;, &quot;is_published&quot;: true, &quot;placesList&quot;: [] } ] ``` I tried setting bt, hm, mm to `undefined` or `null` or `false` to disable this behaviour but go this error when I try ```{ &quot;msg&quot;: &quot;Cannot read property 'columnToAlias' of undefined&quot; } ``` Node: **v12.22.6** Arch: **x64** Platform: **linux** Docker: **false** Database: **pg** ProjectOnRootDB: **false** RootDB: **pg** PackageVersion: **0.83.5**</DESCRIPTION>
  <REPONAME>nocodb</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>refactor: update docker-compose file version re #857 Signed-off-by: Pranav C &lt;pranavxc@gmail.com&gt;</MESSAGE>
    <SHA>0e8f8d3d079367760c3b3f4998fbd5ce3f072a3d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>fix: handle wrong nested relation param values re #856 Signed-off-by: Pranav C &lt;pranavxc@gmail.com&gt;</MESSAGE>
      <SHA>bd1816a34c990e6b7fbafb6c68bab6e95453bccf</SHA>
      <PATCHEDFILES>
        <FILE>packages/nocodb/src/lib/dataMapper/lib/sql/BaseModelSql.ts</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
