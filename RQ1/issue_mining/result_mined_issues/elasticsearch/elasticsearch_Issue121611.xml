<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>121611</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/121611</ISSUEURL>
  <TITLE>[CI] DocsClientYamlTestSuiteIT test {yaml=reference/snapshot-restore/apis/get-snapshot-api/line_488} failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic-platform-support #6345 / rocky-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/5rwxstwztm3ic) - [elasticsearch-pull-request #56262 / part-1-entitlements](https://gradle-enterprise.elastic.co/s/osvtjkh6xtidi) **Reproduction Line:** ``` ./gradlew &quot;:docs:yamlRestTest&quot; --tests &quot;org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/snapshot-restore/apis/get-snapshot-api/line_488}&quot; -Dtests.seed=CB9D0099C8C38A7E -Dtests.locale=cs -Dtests.timezone=Europe/Belfast -Druntime.java=23 ``` **Applicable branches:** main **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test%20%7Byaml%3Dreference%2Fsnapshot-restore%2Fapis%2Fget-snapshot-api%2Fline_488%7D),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Failure at [reference/snapshot-restore/apis/get-snapshot-api:197]: Expected a map containing snapshots: a list containing 0: a map containing failures: an empty list include_global_state: &lt;true&gt; end_time: &quot;2025-02-12T13:12:14.312Z&quot; duration_in_millis: &lt;0&gt; version_id: &lt;9010000&gt; repository: &quot;my_repository&quot; uuid: &quot;vB4VLr-ISbqKfM6qTK-KNA&quot; version: &quot;9.1.0&quot; start_time: &quot;2025-02-12T13:12:14.312Z&quot; shards: a map containing total: expected &lt;0&gt; but was &lt;1&gt; failed: &lt;0&gt; successful: expected &lt;0&gt; but was &lt;1&gt; indices: an empty list 0: &lt;unexpected&gt; but was &quot;.security-7&quot; feature_states: an empty list 0: &lt;unexpected&gt; but was &lt;{feature_name=security, indices=[.security-7]}&gt; start_time_in_millis: &lt;1739365934312L&gt; data_streams: an empty list [truncated] ``` **Issue Reasons:** - [main] 2 failures in test test {yaml=reference/snapshot-restore/apis/get-snapshot-api/line_488} (0.7% fail rate in 281 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>37</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>[8.x] Implement runtime skip_unavailable=true (#121240) (#121602) * Implement runtime skip_unavailable=true (#121240) * Implement runtime skip_unavailable=true (cherry picked from commit 2fbec770158c421c316a0277df02f0f454fce7a7) # Conflicts: # x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/session/EsqlSession.java * [CI] Auto commit changes from spotless --------- Co-authored-by: elasticsearchmachine &lt;infra-root+elasticsearchmachine@elastic.co&gt;</MESSAGE>
    <SHA>bae9192d5057b6086b85ed3d4eac5bf76ddfe4bb</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT test {yaml=reference/snapshot-restore/apis/get-snapshot-api/line_488} #121611</MESSAGE>
      <SHA>facce5feb2b4a024b7a7b0b6f8d8fa25f5bcc0af</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT test {yaml=reference/snapshot-restore/apis/get-snapshot-api/line_488} #121611</MESSAGE>
      <SHA>b8babb663af2a794eb9f05d9cdbf344eccd91c6d</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103</MESSAGE>
      <SHA>cac356ae64f3b5c5ee4b0c580e5c0307501831e1</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103</MESSAGE>
      <SHA>15e94eeff433c38366afa76b66d248cf180a1ebb</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>9da26708917c0b889e944650e33641676f102490</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>42b31229a2d9fa23e703e7355e32d17f1e278ee3</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>8bee2eeccc11a12a1414f584bd1b1e431b80009d</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124819) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>192297f36db47af3b8ba0a6082b8208040cd0aef</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124822) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>f536f3fd4170f3e8912895ba92a67f61e901109e</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124817) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>ee80f764b66ddecfec4ba3ba55e1583cce26cba1</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
