<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>125166</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/125166</ISSUEURL>
  <TITLE>[CI] Ec2DiscoveryTests testFilterByMultipleTags failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-pull-request #63612 / part-1](https://gradle-enterprise.elastic.co/s/hm5bafitxuoxu) - [elasticsearch-intake #20410 / part1](https://gradle-enterprise.elastic.co/s/gth357kwcxafw) - [elasticsearch-intake #20409 / part1](https://gradle-enterprise.elastic.co/s/feuu6r7552mxw) - [elasticsearch-intake #20408 / part1](https://gradle-enterprise.elastic.co/s/icbd655ny7gyo) - [elasticsearch-intake #20390 / part1](https://gradle-enterprise.elastic.co/s/q5oxbu6odnhze) - [elasticsearch-periodic-platform-support #7105 / ubuntu-2004-aarch64_checkpart1_platform-support-arm](https://gradle-enterprise.elastic.co/s/z5awrit6kvd3u) - [elasticsearch-pull-request #63448 / part-1](https://gradle-enterprise.elastic.co/s/kho2oq6lm6eqq) - [elasticsearch-pull-request #63442 / part-1](https://gradle-enterprise.elastic.co/s/xzfwgks3yhjf6) - [elasticsearch-pull-request #63427 / part-1](https://gradle-enterprise.elastic.co/s/arnoxkgnuztqk) - [elasticsearch-pull-request #63406 / part-1](https://gradle-enterprise.elastic.co/s/2u5ttocbmdhys) **Reproduction Line:** ``` ./gradlew &quot;:plugins:discovery-ec2:test&quot; --tests &quot;org.elasticsearch.discovery.ec2.Ec2DiscoveryTests.testFilterByMultipleTags&quot; -Dtests.seed=14E31C1D1F072933 -Dtests.locale=dz -Dtests.timezone=Asia/Karachi -Druntime.java=24 ``` **Applicable branches:** main **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.discovery.ec2.Ec2DiscoveryTests),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testFilterByMultipleTags),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Expected: a collection with size &lt;2&gt; but: collection size was &lt;0&gt; ``` **Issue Reasons:** - [main] 3 consecutive failures in step part1 - [main] 3 consecutive failures in pipeline elasticsearch-intake - [main] 12 failures in test testFilterByMultipleTags (5.2% fail rate in 233 executions) - [main] 6 failures in step part-1 (5.7% fail rate in 106 executions) - [main] 5 failures in step part1 (15.2% fail rate in 33 executions) - [main] 6 failures in pipeline elasticsearch-pull-request (5.8% fail rate in 104 executions) - [main] 5 failures in pipeline elasticsearch-intake (15.2% fail rate in 33 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Update docker.elastic.co/wolfi/chainguard-base:latest Docker digest to 5ba5def (#125144) This PR contains the following updates: | Package | Update | Change | |---|---|---| | docker.elastic.co/wolfi/chainguard-base | digest | `a37e513` -&gt; `5ba5def` | --- ### Configuration **Schedule**: Branch creation - &quot;after 1pm on tuesday&quot; (UTC), Automerge - At any time (no schedule defined). **Automerge**: Disabled by config. Please merge this manually once you are satisfied. â™» **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox. **Ignore**: Close this PR and you won't be reminded about this update again. --- - [ ] &lt;!-- rebase-check --&gt;If you want to rebase/retry this PR, check this box --- This PR has been generated by [Renovate Bot](https://redirect.github.com/renovatebot/renovate). &lt;!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzOS4xMDcuMCIsInVwZGF0ZWRJblZlciI6IjM5LjEwNy4wIiwidGFyZ2V0QnJhbmNoIjoiOC54IiwibGFiZWxzIjpbIjpEZWxpdmVyeS9QYWNrYWdpbmciLCI+bm9uLWlzc3VlIiwiVGVhbTpEZWxpdmVyeSIsImF1dG8tbWVyZ2Utd2l0aG91dC1hcHByb3ZhbCJdfQ==--&gt;</MESSAGE>
    <SHA>d4e1d676b8bdaca0a79cb7db5f009fb656d0bb25</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.discovery.ec2.Ec2DiscoveryTests testFilterByMultipleTags #125166</MESSAGE>
      <SHA>7cffc50e46f109e844f68999c4ee1bfa6ab8e8b7</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Work around `testFilterByTags` failure (#125109) A SDK bug[^1] means that these values sometimes don't parse as an integer. We don't need them to do so in order to pass the test, so this commit relaxes the test to accept any string. Closes #125090 Closes #125166 [^1]: https://github.com/aws/aws-sdk-java-v2/issues/5968</MESSAGE>
      <SHA>23769da8e35520dc2fa59a5fa2f709f9aeff3f03</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
        <FILE>plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Work around `testFilterByTags` failure (#125109) A SDK bug[^1] means that these values sometimes don't parse as an integer. We don't need them to do so in order to pass the test, so this commit relaxes the test to accept any string. Closes #125090 Closes #125166 [^1]: https://github.com/aws/aws-sdk-java-v2/issues/5968</MESSAGE>
      <SHA>1b22b0e6f20551ad8fc2637a707e841c77848e47</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
        <FILE>plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Work around `testFilterByTags` failure (#125109) A SDK bug[^1] means that these values sometimes don't parse as an integer. We don't need them to do so in order to pass the test, so this commit relaxes the test to accept any string. Closes #125090 Closes #125166 [^1]: https://github.com/aws/aws-sdk-java-v2/issues/5968</MESSAGE>
      <SHA>8c4d9d1b25d355a0503b34bcad5415b6e7416f28</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
        <FILE>plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Work around `testFilterByTags` failure (#125109) A SDK bug[^1] means that these values sometimes don't parse as an integer. We don't need them to do so in order to pass the test, so this commit relaxes the test to accept any string. Closes #125090 Closes #125166 [^1]: https://github.com/aws/aws-sdk-java-v2/issues/5968</MESSAGE>
      <SHA>b534a105ecce94a2797051d2c3e2769e7b0f14ea</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
        <FILE>plugins/discovery-ec2/src/test/java/org/elasticsearch/discovery/ec2/Ec2DiscoveryTests.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
