<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>126252</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/126252</ISSUEURL>
  <TITLE>[CI] ExplainDataStreamLifecycleIT testExplainLifecycleForIndicesWithErrors failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic-platform-support #7441 / amazonlinux-2023_platform-support-aws](https://gradle-enterprise.elastic.co/s/o4r2g5baue6le) - [elasticsearch-periodic #7419 / openjdk23_entitlements_false_checkpart1_java-matrix](https://gradle-enterprise.elastic.co/s/q7igvz5mr6wym) - [elasticsearch-periodic #7419 / openjdk24_entitlements_false_checkpart1_java-matrix](https://gradle-enterprise.elastic.co/s/ibomvupxephle) - [elasticsearch-periodic-platform-support #7441 / rocky-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/5arena2eereeg) - [elasticsearch-periodic-platform-support #7441 / debian-12_platform-support-unix](https://gradle-enterprise.elastic.co/s/ybncoibmnmxig) - [elasticsearch-periodic-platform-support #7441 / opensuse-leap-15_platform-support-unix](https://gradle-enterprise.elastic.co/s/hxypnsdleehlq) - [elasticsearch-periodic-platform-support #7441 / almalinux-8_platform-support-unix](https://gradle-enterprise.elastic.co/s/x6bjb3ewrjx7m) - [elasticsearch-periodic-platform-support #7441 / oraclelinux-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/qtgih7p5b43ug) - [elasticsearch-periodic-platform-support #7441 / sles-15_platform-support-unix](https://gradle-enterprise.elastic.co/s/sf4t5ud5nwgsi) - [elasticsearch-pull-request #66266 / part-1](https://gradle-enterprise.elastic.co/s/mqwdvf4bdivxu) **Reproduction Line:** ``` ./gradlew &quot;:modules:data-streams:internalClusterTest&quot; --tests &quot;org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT.testExplainLifecycleForIndicesWithErrors&quot; -Dtests.seed=93802F6833D45A19 -Dtests.locale=az-AZ -Dtests.timezone=MIT -Druntime.java=24 ``` **Applicable branches:** main **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(testExplainLifecycleForIndicesWithErrors),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Expected: is null but: was &lt;ErrorEntry[firstOccurrenceTimestamp=1743715367602, error={&quot;type&quot;:&quot;exception&quot;,&quot;reason&quot;:&quot;Force merge request only had 1 successful shards out of a total of 2&quot;}, recordedTimestamp=1743715374608, retryCount=7]&gt; ``` **Issue Reasons:** - [main] 14 failures in test testExplainLifecycleForIndicesWithErrors (7.8% fail rate in 179 executions) - [main] 4 failures in step part-1 (6.3% fail rate in 63 executions) - [main] 3 failures in pipeline elasticsearch-pull-request (4.6% fail rate in 65 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Mute org.elasticsearch.xpack.searchablesnapshots.SearchableSnapshotsIntegTests testCreateAndRestoreSearchableSnapshot #119709</MESSAGE>
    <SHA>3004d4452330c1448f6154e53d5a4b7771adf147</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT testExplainLifecycleForIndicesWithErrors #126252</MESSAGE>
      <SHA>bcdf51ad5167cbc60d1c303e11bda76826a30c44</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Fix test to anticipate force merge failure (#126282) This test had a copy paste mistake. When the cluster has only one data node the replicas cannot be assigned so we end up with a force merge error. In the case of the failure store this was not asserted correctly. On the other hand, this test only checked for the existence of an error and it was not ensuring that the current error is not the rollover error that should have recovered. We make this test a bit more explicit. Fixes: https://github.com/elastic/elasticsearch/issues/126252</MESSAGE>
      <SHA>a525b3d92418638b8be7882ce8a04ba569f2ec55</SHA>
      <PATCHEDFILES>
        <FILE>modules/data-streams/src/internalClusterTest/java/org/elasticsearch/datastreams/lifecycle/ExplainDataStreamLifecycleIT.java</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT testExplainLifecycleForIndicesWithErrors #126252</MESSAGE>
      <SHA>9085688525ffa3e1d3cb6f4941f8bdbccf15cade</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
