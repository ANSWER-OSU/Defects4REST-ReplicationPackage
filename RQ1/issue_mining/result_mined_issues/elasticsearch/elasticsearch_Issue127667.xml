<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>127667</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/127667</ISSUEURL>
  <TITLE>Transport versions are mixed up</TITLE>
  <DESCRIPTION>### Description Here's main: ```java public static final TransportVersion ESQL_REPORT_ORIGINAL_TYPES_BACKPORT_8_19 = def(8_841_0_22); public static final TransportVersion INTRODUCE_FAILURES_LIFECYCLE_BACKPORT_8_19 = def(8_841_0_23); public static final TransportVersion V_9_0_0 = def(9_000_0_09); ``` Here's 8.19: ```java public static final TransportVersion ESQL_REPORT_ORIGINAL_TYPES_BACKPORT_8_19 = def(8_841_0_22); public static final TransportVersion PINNED_RETRIEVER_8_19 = def(8_841_0_23); public static final TransportVersion ESQL_AGGREGATE_METRIC_DOUBLE_BLOCK_8_19 = def(8_841_0_24); ``` These aren't compatible with one another and `main` can't rolling upgrade from 8.19 at the moment.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Unmute PolicyUtilsTests.testFormatFilesEntitlement (#127654)</MESSAGE>
    <SHA>0df08733520ccec3db236643c6193e502b75780d</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>ESQL: Fix transport versions In #127623 we backported #127299 and added a backport transport version for it - `ESQL_AGGREGATE_METRIC_DOUBLE_BLOCK_8_19` aka `8_841_0_24`. This brings that version forwards to `main` and adds support for parsing streams with that version. In #127639 we backported #126401 and added a backport transport version for it - `PINNED_RETRIEVER_8_19` aka `8_841_0_23`. This brings that version forwards to `main` and adds support for parsing streams with that versions. In #127633 we a claimed a backport transport version to backport #127314 - `INTRODUCE_FAILURES_LIFECYCLE_BACKPORT_8_19` aka `8_841_0_23`. That's the same versions as `PINNED_RETRIEVER_8_19`. It's just that this one is in `main` and `PINNED_RETRIEVER_8_19` is in `8.19`. To allow me to bring `PINNED_RETRIEVER_8_19` for wards I've had to revert #127633. Closes #127667</MESSAGE>
      <SHA>2c93edc31e92e9574f7910c19e25fd305b6388f8</SHA>
      <PATCHEDFILES>
        <FILE>server/src/main/java/org/elasticsearch/TransportVersions.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamFailureStore.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamLifecycle.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamOptions.java</FILE>
        <FILE>x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/datastreams/DataStreamFeatureSetUsage.java</FILE>
        <FILE>x-pack/plugin/esql/compute/src/main/java/org/elasticsearch/compute/data/Block.java</FILE>
        <FILE>x-pack/plugin/search-business-rules/src/main/java/org/elasticsearch/xpack/searchbusinessrules/retriever/PinnedRankDoc.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>ESQL: Fix transport versions (#127668) In #127623 we backported #127299 and added a backport transport version for it - `ESQL_AGGREGATE_METRIC_DOUBLE_BLOCK_8_19` aka `8_841_0_24`. This brings that version forwards to `main` and adds support for parsing streams with that version. In #127639 we backported #126401 and added a backport transport version for it - `PINNED_RETRIEVER_8_19` aka `8_841_0_23`. This brings that version forwards to `main` and adds support for parsing streams with that versions. In #127633 we a claimed a backport transport version to backport #127314 - `INTRODUCE_FAILURES_LIFECYCLE_BACKPORT_8_19` aka `8_841_0_23`. That's the same versions as `PINNED_RETRIEVER_8_19`. It's just that this one is in `main` and `PINNED_RETRIEVER_8_19` is in `8.19`. To allow me to bring `PINNED_RETRIEVER_8_19` for wards I've had to revert #127633. Closes #127667</MESSAGE>
      <SHA>2acd5636f15f82df8e7a4ab21f829f8549c1d141</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/127668.yaml</FILE>
        <FILE>server/src/main/java/org/elasticsearch/TransportVersions.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamFailureStore.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamLifecycle.java</FILE>
        <FILE>server/src/main/java/org/elasticsearch/cluster/metadata/DataStreamOptions.java</FILE>
        <FILE>x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/datastreams/DataStreamFeatureSetUsage.java</FILE>
        <FILE>x-pack/plugin/esql/compute/src/main/java/org/elasticsearch/compute/data/Block.java</FILE>
        <FILE>x-pack/plugin/search-business-rules/src/main/java/org/elasticsearch/xpack/searchbusinessrules/retriever/PinnedRankDoc.java</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
