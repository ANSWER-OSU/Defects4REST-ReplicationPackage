<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>119804</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/119804</ISSUEURL>
  <TITLE>[CI] MixedClusterClientYamlTestSuiteIT test {p0=search.vectors/110_knn_query_with_filter/PRE_FILTER: knn query with internal filter as pre-filter} failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic #5760 / 8.12.2_bwc](https://gradle-enterprise.elastic.co/s/2oec47ob7mlke) - [elasticsearch-periodic #5755 / 8.14.3_bwc](https://gradle-enterprise.elastic.co/s/gzd3sank5jeby) - [elasticsearch-periodic #5755 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/cznaukainsgmu) - [elasticsearch-pull-request #49316 / 8.14.3_bwc](https://gradle-enterprise.elastic.co/s/lmtsgcguohqag) - [elasticsearch-pull-request #49316 / 8.13.4_bwc](https://gradle-enterprise.elastic.co/s/2npbuwbxatkjy) - [elasticsearch-pull-request #49316 / 8.12.2_bwc](https://gradle-enterprise.elastic.co/s/o7inheghwqelc) - [elasticsearch-periodic #5750 / 8.12.2_bwc](https://gradle-enterprise.elastic.co/s/dm53o3v7j4w3a) **Reproduction Line:** ``` ./gradlew &quot;:qa:mixed-cluster:v8.12.2#mixedClusterTest&quot; -Dtests.class=&quot;org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT&quot; -Dtests.method=&quot;test {p0=search.vectors/110_knn_query_with_filter/POST_FILTER: knn query with filter from a parent bool query as post-filter}&quot; -Dtests.seed=BC8F90630E5B76C9 -Dtests.bwc=true -Dtests.locale=jgo-Latn-CM -Dtests.timezone=Africa/Kampala -Druntime.java=23 ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test%20%7Bp0%3Dsearch.vectors%2F110_knn_query_with_filter%2FPRE_FILTER%3A%20knn%20query%20with%20internal%20filter%20as%20pre-filter%7D),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Failure at [search.vectors/110_knn_query_with_filter:238]: expected [2xx] status code but api [search] returned [400 Bad Request] [{&quot;error&quot;:{&quot;root_cause&quot;:[{&quot;type&quot;:&quot;x_content_parse_exception&quot;,&quot;reason&quot;:&quot;[1:134] [knn] unknown field [k]&quot;,&quot;stack_trace&quot;:&quot;org.elasticsearch.ElasticsearchException$1: [1:134] [knn] unknown field [k]\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:699)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:695)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:627)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.build(RestResponse.java:180)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.&lt;init&gt;(RestResponse.java:140)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestResponse.&lt;init&gt;(RestResponse.java:111)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:443)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.tryAllHandlers(RestController.java:570)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:325)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.dispatchRequest(AbstractHttpServerTransport.java:458)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.handleIncomingRequest(AbstractHttpServerTransport.java:554)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.incomingRequest(AbstractHttpServerTransport.java:431)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.handlePipelinedRequest(Netty4HttpPipeliningHandler.java:128)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.channelRead(Netty4HttpPipeliningHandler.java:118)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n\tat io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.elasticsearch.xcontent.XContentParseException: [1:134] [knn] unknown field [k]\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$errorOnUnknown$2(ObjectParser.java:105)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:299)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.parse(ConstructingObjectParser.java:166)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.apply(ConstructingObjectParser.java:158)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.vectors.KnnVectorQueryBuilder.fromXContent(KnnVectorQueryBuilder.java:91)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.lambda$static$1(BoolQueryBuilder.java:266)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.parseArray(AbstractObjectParser.java:418)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.lambda$declareObjectArrayOrNull$13(AbstractObjectParser.java:304)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$declareField$10(ObjectParser.java:431)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseArray(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:643)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:315)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:259)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.fromXContent(BoolQueryBuilder.java:294)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseTopLevelQuery(AbstractQueryBuilder.java:392)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1333)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1235)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.parseSearchRequest(RestSearchAction.java:180)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.lambda$prepareRequest$1(RestSearchAction.java:119)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestRequest.withContentOrSourceParamParserOrNull(RestRequest.java:550)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.prepareRequest(RestSearchAction.java:118)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:80)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.doHandleRequest(SecurityRestFilter.java:94)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.handleRequest(SecurityRestFilter.java:73)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:441)\n\t... 44 more\n&quot;}],&quot;type&quot;:&quot;x_content_parse_exception&quot;,&quot;reason&quot;:&quot;[1:138] [bool] failed to parse field [must]&quot;,&quot;caused_by&quot;:{&quot;type&quot;:&quot;x_content_parse_exception&quot;,&quot;reason&quot;:&quot;[1:134] [knn] unknown field [k]&quot;,&quot;stack_trace&quot;:&quot;org.elasticsearch.xcontent.XContentParseException: [1:134] [knn] unknown field [k]\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$errorOnUnknown$2(ObjectParser.java:105)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:299)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.parse(ConstructingObjectParser.java:166)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.apply(ConstructingObjectParser.java:158)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.vectors.KnnVectorQueryBuilder.fromXContent(KnnVectorQueryBuilder.java:91)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.lambda$static$1(BoolQueryBuilder.java:266)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.parseArray(AbstractObjectParser.java:418)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.lambda$declareObjectArrayOrNull$13(AbstractObjectParser.java:304)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$declareField$10(ObjectParser.java:431)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseArray(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:643)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:315)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:259)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.fromXContent(BoolQueryBuilder.java:294)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseTopLevelQuery(AbstractQueryBuilder.java:392)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1333)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1235)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.parseSearchRequest(RestSearchAction.java:180)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.lambda$prepareRequest$1(RestSearchAction.java:119)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestRequest.withContentOrSourceParamParserOrNull(RestRequest.java:550)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.prepareRequest(RestSearchAction.java:118)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:80)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.doHandleRequest(SecurityRestFilter.java:94)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.handleRequest(SecurityRestFilter.java:73)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:441)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.tryAllHandlers(RestController.java:570)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:325)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.dispatchRequest(AbstractHttpServerTransport.java:458)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.handleIncomingRequest(AbstractHttpServerTransport.java:554)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.incomingRequest(AbstractHttpServerTransport.java:431)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.handlePipelinedRequest(Netty4HttpPipeliningHandler.java:128)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.channelRead(Netty4HttpPipeliningHandler.java:118)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n\tat io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n&quot;},&quot;stack_trace&quot;:&quot;org.elasticsearch.xcontent.XContentParseException: [1:138] [bool] failed to parse field [must]\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.throwFailedToParse(ObjectParser.java:616)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:611)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseArray(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:643)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:315)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:259)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.fromXContent(BoolQueryBuilder.java:294)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseTopLevelQuery(AbstractQueryBuilder.java:392)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1333)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1235)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.parseSearchRequest(RestSearchAction.java:180)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.lambda$prepareRequest$1(RestSearchAction.java:119)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestRequest.withContentOrSourceParamParserOrNull(RestRequest.java:550)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.action.search.RestSearchAction.prepareRequest(RestSearchAction.java:118)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:80)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.doHandleRequest(SecurityRestFilter.java:94)\n\tat org.elasticsearch.security@8.12.2/org.elasticsearch.xpack.security.rest.SecurityRestFilter.handleRequest(SecurityRestFilter.java:73)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:441)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.tryAllHandlers(RestController.java:570)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:325)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.dispatchRequest(AbstractHttpServerTransport.java:458)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.handleIncomingRequest(AbstractHttpServerTransport.java:554)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.http.AbstractHttpServerTransport.incomingRequest(AbstractHttpServerTransport.java:431)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.handlePipelinedRequest(Netty4HttpPipeliningHandler.java:128)\n\tat org.elasticsearch.transport.netty4@8.12.2/org.elasticsearch.http.netty4.Netty4HttpPipeliningHandler.channelRead(Netty4HttpPipeliningHandler.java:118)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.94.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)\n\tat io.netty.transport@4.1.94.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.common@4.1.94.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n\tat io.netty.common@4.1.94.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.elasticsearch.xcontent.XContentParseException: [1:134] [knn] unknown field [k]\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$errorOnUnknown$2(ObjectParser.java:105)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:299)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.parse(ConstructingObjectParser.java:166)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ConstructingObjectParser.apply(ConstructingObjectParser.java:158)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.vectors.KnnVectorQueryBuilder.fromXContent(KnnVectorQueryBuilder.java:91)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.search.SearchModule.lambda$registerQuery$21(SearchModule.java:1203)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.NamedXContentRegistry.parseNamedObject(NamedXContentRegistry.java:147)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder$1.namedObject(AbstractQueryBuilder.java:384)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.AbstractQueryBuilder.parseInnerQueryBuilder(AbstractQueryBuilder.java:418)\n\tat org.elasticsearch.server@8.12.2/org.elasticsearch.index.query.BoolQueryBuilder.lambda$static$1(BoolQueryBuilder.java:266)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.parseArray(AbstractObjectParser.java:418)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.AbstractObjectParser.lambda$declareObjectArrayOrNull$13(AbstractObjectParser.java:304)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.lambda$declareField$10(ObjectParser.java:431)\n\tat org.elasticsearch.xcontent@8.12.2/org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:609)\n\t... 64 more\n&quot;},&quot;status&quot;:400}] ``` **Issue Reasons:** - [8.x] 2 consecutive failures in step 8.14.3_bwc - [8.x] 2 consecutive failures in step 8.13.4_bwc - [8.x] 7 failures in test test {p0=search.vectors/110_knn_query_with_filter/PRE_FILTER: knn query with internal filter as pre-filter} (3.3% fail rate in 209 executions) - [8.x] 3 failures in step 8.12.2_bwc (75.0% fail rate in 4 executions) - [8.x] 2 failures in step 8.14.3_bwc (50.0% fail rate in 4 executions) - [8.x] 2 failures in step 8.13.4_bwc (50.0% fail rate in 4 executions) - [8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>5</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Mute org.elasticsearch.xpack.restart.FullClusterRestartIT testTransformLegacyTemplateCleanup {cluster=UPGRADED} #119395</MESSAGE>
    <SHA>b0f9ece70072f306f597496c963247ff407691fd</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT test {p0=search.vectors/110_knn_query_with_filter/PRE_FILTER: knn query with internal filter as pre-filter} #119804</MESSAGE>
      <SHA>da8fd91c0398eeffd475f755248d51a88b8ce7fc</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
