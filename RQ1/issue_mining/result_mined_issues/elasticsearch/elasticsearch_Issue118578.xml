<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>118578</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/118578</ISSUEURL>
  <TITLE>Support Date Nanos for In function</TITLE>
  <DESCRIPTION>Support date nanos `IN` expressions. This will also need to support mixed millisecond dates and nanosecond dates, and casting from strings.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>33</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Remove default auto_expand_replicas of lookup indices (#120073) This change disables auto_expand_replicas on lookup indices to enhance the lookup join user experience. Users can, however, enable this setting at any time to optimize performance.</MESSAGE>
    <SHA>7750cf5b94e05bf7ee1c5c5ce796d62b04407d88</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>ESQL Support IN operator for Date nanos (#119772) Add support for using nanosecond dates with the IN operator. This behavior should be consistent with equals, and support comparisons between milliseconds and nanoseconds the same as the binary comparison operators support it. Resolves #118578 --------- Co-authored-by: elasticsearchmachine &lt;infra-root+elasticsearchmachine@elastic.co&gt;</MESSAGE>
      <SHA>187a6a7dc50faa112f8477e0c8633dbde1493051</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/119772.yaml</FILE>
        <FILE>x-pack/plugin/esql/build.gradle</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date_nanos.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InMillisNanosEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InNanosMillisEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/action/EsqlCapabilities.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/In.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/X-InEvaluator.java.st</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>ESQL Support IN operator for Date nanos (#119772) Add support for using nanosecond dates with the IN operator. This behavior should be consistent with equals, and support comparisons between milliseconds and nanoseconds the same as the binary comparison operators support it. Resolves #118578 --------- Co-authored-by: elasticsearchmachine &lt;infra-root+elasticsearchmachine@elastic.co&gt;</MESSAGE>
      <SHA>4f0e47ca2bb21d7abbeb491ef6467bc8a802dfc9</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/119772.yaml</FILE>
        <FILE>x-pack/plugin/esql/build.gradle</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date_nanos.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InMillisNanosEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InNanosMillisEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/action/EsqlCapabilities.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/In.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/X-InEvaluator.java.st</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[8.x] ESQL Support IN operator for Date nanos (#119772) (#120126) * ESQL Support IN operator for Date nanos (#119772) Add support for using nanosecond dates with the IN operator. This behavior should be consistent with equals, and support comparisons between milliseconds and nanoseconds the same as the binary comparison operators support it. Resolves #118578 --------- Co-authored-by: elasticsearchmachine &lt;infra-root+elasticsearchmachine@elastic.co&gt; * remove use of future java functions --------- Co-authored-by: elasticsearchmachine &lt;infra-root+elasticsearchmachine@elastic.co&gt;</MESSAGE>
      <SHA>7603eded80d6cabe9ebc8a4618b24f05659d84ba</SHA>
      <PATCHEDFILES>
        <FILE>docs/changelog/119772.yaml</FILE>
        <FILE>docs/reference/esql/functions/kibana/definition/bucket.json</FILE>
        <FILE>docs/reference/esql/functions/layout/qstr.asciidoc</FILE>
        <FILE>x-pack/plugin/esql/build.gradle</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/qa/testFixtures/src/main/resources/date_nanos.csv-spec</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InMillisNanosEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/generated-src/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/InNanosMillisEvaluator.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/action/EsqlCapabilities.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/In.java</FILE>
        <FILE>x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/predicate/operator/comparison/X-InEvaluator.java.st</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
