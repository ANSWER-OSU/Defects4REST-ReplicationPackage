<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>122983</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/122983</ISSUEURL>
  <TITLE>[CI] DocsClientYamlTestSuiteIT test {yaml=reference/troubleshooting/troubleshooting-unbalanced-cluster/line_24} failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic-platform-support #6511 / rhel-9_platform-support-unix](https://gradle-enterprise.elastic.co/s/ulrmt5kt4kddk) - [elasticsearch-intake #18288 / part1](https://gradle-enterprise.elastic.co/s/ktfxg2st22c5s) **Reproduction Line:** ``` ./gradlew &quot;:docs:yamlRestTest&quot; --tests &quot;org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/troubleshooting/troubleshooting-unbalanced-cluster/line_24}&quot; -Dtests.seed=81042935C81610BA -Dtests.locale=oc-Latn-FR -Dtests.timezone=Pacific/Wallis -Druntime.java=23 ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(test%20%7Byaml%3Dreference%2Ftroubleshooting%2Ftroubleshooting-unbalanced-cluster%2Fline_24%7D),title:'Test',type:optionsListControl))))) **Failure Message:** ``` java.lang.AssertionError: Failure at [reference/troubleshooting/troubleshooting-unbalanced-cluster:22]: field [$body] was expected to match the provided regex but didn't Expected: shards \s+shards.undesired \s+write_load.forecast \s+disk.indices.forecast \s+disk.indices \s+disk.used \s+disk.avail \s+disk.total \s+disk.percent \s+host \s+ip \s+node \s+node.role\s* \s+1 \s+0 \s+0.0 \s+\d+(\.\d+)?[tgmk]?b \s+\d+(\.\d+)?[tgmk]?b \s+\d+(\.\d+)?[tgmk]?b \s+\d+(\.\d+)?[tgmk]?b \s+\d+(\.\d+)?[tgmk]?b \s+\d+ \s+127.0.0.1 \s+127.0.0.1 \s+.+\s* but: was &quot;shards shards.undesired write_load.forecast disk.indices.forecast disk.indices disk.used disk.avail disk.total disk.percent host ip node node.role\n 2 0 0.0 0b 33.7kb 25.5gb 342.4gb 368gb 6 127.0.0.1 127.0.0.1 node-0 cdfhilmrstw\n&quot; ``` **Issue Reasons:** - [8.x] 2 failures in test test {yaml=reference/troubleshooting/troubleshooting-unbalanced-cluster/line_24} (0.5% fail rate in 378 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>21</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>Fixing the document count in reindex data stream status in-progress indices (#122976) (#122979)</MESSAGE>
    <SHA>b8841ea8492f7bf6bfa833e47be6bc9436c2d279</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT test {yaml=reference/troubleshooting/troubleshooting-unbalanced-cluster/line_24} #122983</MESSAGE>
      <SHA>1420de762af400dbe192be79c5c94c42052fb906</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103</MESSAGE>
      <SHA>cac356ae64f3b5c5ee4b0c580e5c0307501831e1</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103</MESSAGE>
      <SHA>15e94eeff433c38366afa76b66d248cf180a1ebb</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>9da26708917c0b889e944650e33641676f102490</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>42b31229a2d9fa23e703e7355e32d17f1e278ee3</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>8bee2eeccc11a12a1414f584bd1b1e431b80009d</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124819) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>192297f36db47af3b8ba0a6082b8208040cd0aef</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124822) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>f536f3fd4170f3e8912895ba92a67f61e901109e</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Disable queryable built-in feature in docs YAML tests (#124684) (#124817) The .security index is created asynchronously on a cluster startup. This affects some of the docs YAML tests in a way that they need to account for the existence of the .security index or wait for the index to be created and green. This PR disables the feature for docs YAML tests. Disabling the feature in docs YAML tests will solve the flakiness without affecting the coverage. Resolves https://github.com/elastic/elasticsearch/issues/122343 Resolves https://github.com/elastic/elasticsearch/issues/121748 Resolves https://github.com/elastic/elasticsearch/issues/121611 Resolves https://github.com/elastic/elasticsearch/issues/121345 Resolves https://github.com/elastic/elasticsearch/issues/121338 Resolves https://github.com/elastic/elasticsearch/issues/121337 Resolves https://github.com/elastic/elasticsearch/issues/121288 Resolves https://github.com/elastic/elasticsearch/issues/121287 Resolves https://github.com/elastic/elasticsearch/issues/121867 Resolves https://github.com/elastic/elasticsearch/issues/122335 Resolves https://github.com/elastic/elasticsearch/issues/122681 Resolves https://github.com/elastic/elasticsearch/issues/121976 Resolves https://github.com/elastic/elasticsearch/issues/123094 Resolves https://github.com/elastic/elasticsearch/issues/123192 Resolves https://github.com/elastic/elasticsearch/issues/122983 Resolves https://github.com/elastic/elasticsearch/issues/124671 Resolves https://github.com/elastic/elasticsearch/issues/124103 (cherry picked from commit cac356ae64f3b5c5ee4b0c580e5c0307501831e1) # Conflicts: # muted-tests.yml</MESSAGE>
      <SHA>ee80f764b66ddecfec4ba3ba55e1583cce26cba1</SHA>
      <PATCHEDFILES>
        <FILE>docs/build.gradle</FILE>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
