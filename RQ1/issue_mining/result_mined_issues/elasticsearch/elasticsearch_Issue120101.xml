<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>120101</ISSUENO>
  <ISSUEURL>https://github.com/elastic/elasticsearch/issues/120101</ISSUEURL>
  <TITLE>[CI] MinioSearchableSnapshotsIT class failing</TITLE>
  <DESCRIPTION>**Build Scans:** - [elasticsearch-periodic-platform-support #5849 / ubuntu-2004-aarch64_checkpart2_platform-support-arm](https://gradle-enterprise.elastic.co/s/lpm75m6q5s4ui) - [elasticsearch-periodic #5860 / openjdk17_checkpart2_java-matrix](https://gradle-enterprise.elastic.co/s/ht6ebw7ynqweg) - [elasticsearch-intake #15773 / part2](https://gradle-enterprise.elastic.co/s/n4rmkfpk27zuy) - [elasticsearch-periodic #5855 / single-processor-node-tests](https://gradle-enterprise.elastic.co/s/k2655lsjlc72c) - [elasticsearch-intake #15768 / part2](https://gradle-enterprise.elastic.co/s/w2x2lwzpvhewk) - [elasticsearch-periodic #5850 / concurrent-search-tests](https://gradle-enterprise.elastic.co/s/m5okfk24xqgnm) - [elasticsearch-periodic-platform-support #5839 / ubuntu-1804_platform-support-unix](https://gradle-enterprise.elastic.co/s/kyb3z6nf7i72g) - [elasticsearch-pull-request #50469 / part-2](https://gradle-enterprise.elastic.co/s/5wbf35zciq5ck) - [elasticsearch-intake #15747 / part2](https://gradle-enterprise.elastic.co/s/kikcag2p543ps) - [elasticsearch-pull-request #50430 / part-2](https://gradle-enterprise.elastic.co/s/tpyeefoddu5z4) **Reproduction Line:** ``` undefined ``` **Applicable branches:** 8.x **Reproduces locally?:** N/A **Failure History:** [See dashboard](https://es-delivery-stats.elastic.dev/app/dashboards#/view/dcec9e60-72ac-11ee-8f39-55975ded9e63?_g=(refreshInterval:(pause:!t,value:60000),time:(from:now-7d%2Fd,to:now))&amp;_a=(controlGroupState:(initialChildControlState:('0c0c9cb8-ccd2-45c6-9b13-96bac4abc542':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:task.keyword,order:0,selectedOptions:!(),title:'GradleTask',type:optionsListControl),'4e6ad9d6-6fdc-4fcc-bf1a-aa6ca79e0850':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:className.keyword,order:1,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT),title:'Suite',type:optionsListControl),'144933da-5c1b-4257-a969-7f43455a7901':(dataViewId:fbbdc689-be23-4b3d-8057-aa402e9ed0c5,fieldName:name.keyword,order:2,selectedOptions:!(org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT),title:'Test',type:optionsListControl))))) **Failure Message:** ``` undefined ``` **Issue Reasons:** - [8.x] 2 consecutive failures in class org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT - [8.x] 10 failures in class org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT (7.5% fail rate in 133 executions) - [8.x] 2 failures in step part-2 (11.8% fail rate in 17 executions) - [8.x] 3 failures in step part2 (12.5% fail rate in 24 executions) - [8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions) - [8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions) - [8.x] 2 failures in pipeline elasticsearch-pull-request (11.8% fail rate in 17 executions) - [8.x] 3 failures in pipeline elasticsearch-intake (12.5% fail rate in 24 executions) **Note:** This issue was created using new test triage automation. Please report issues or feedback to es-delivery.</DESCRIPTION>
  <REPONAME>elasticsearch</REPONAME>
  <TIMEDIFFERENCEDAYS>1</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>ESQL: Drop support for brackets from METADATA syntax (#119846) This drops the deprecated support for having the METADATA clause provided within square brakets. Fixes #115401</MESSAGE>
    <SHA>212e16bc3a5f6bef412f2ba158d5ace7f62ea300</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT #120101</MESSAGE>
      <SHA>35341330b2942a6a05af57567a1228223132526f</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>Mute org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT org.elasticsearch.xpack.searchablesnapshots.minio.MinioSearchableSnapshotsIT #120101</MESSAGE>
      <SHA>5e1b2c26eba4630038a7a2e16fde383b1f33b2cf</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>[Test] Fix testcontainers wait for Minio This PR changes the wait strategy from the default HostPortWaitStrategy to LogMessageWaitStrategy to accommodate the change in the latest Minio docker image. The default HostPortWaitStrategy has two issues: 1. It assumes certain Linux commands such as grep and nc available inside the container. This is not the case for the latest version of Minio docker image which does not have either of the commands. 2. The first item on their own is not fatal since the check also falls back on just reading the listening port as a file with `/bin/bash -c '&lt;/dev/tcp/localhost/9000'`. However, the command stirng is build using the system's current locale which may not be Engilsh and can have different symbols for print integers like 9000. This completely breaks the command and in turn leads to total failure of the wait check. There is no easy fix for the above issues nor do I think it is necessary to fix. So the PR simply switches the wait strategy to be log message based. Resolves: #118548 Resolves: #120115 Resolves: #120117 Resolves: #120101</MESSAGE>
      <SHA>efca1c6b35c8b73ee2936749679190bd749a81db</SHA>
      <PATCHEDFILES>
        <FILE>muted-tests.yml</FILE>
        <FILE>test/fixtures/minio-fixture/src/main/java/org/elasticsearch/test/fixtures/minio/MinioTestContainer.java</FILE>
        <FILE>x-pack/plugin/snapshot-repo-test-kit/qa/minio/build.gradle</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
