<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>136</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/136</ISSUEURL>
  <TITLE>twitter v2 API</TITLE>
  <DESCRIPTION>we currently use [twitter's existing (legacy? :P) search API](https://developer.twitter.com/en/docs/tweets/search/overview/standard) that &quot;searches against a sampling of recent Tweets published in the past 7 days.&quot; this confused @aaronpk when he searched for `streampdx`, and got no results since they're all over 7d old. twitter just launched their new premium search API, which includes full history! both paid and free tiers. * https://twittercommunity.com/t/ushering-in-a-new-era-for-the-twitter-developer-platform-with-the-twitter-api-v2/162087#how-about-those-of-you-that-are-already-on-the-platform-4 * https://blog.twitter.com/developer/en_us/topics/tools/2018/access-the-full-history-of-tweets.html * https://developer.twitter.com/en/docs/tweets/search/overview/premium ...except you have to [ask permission, tell them what you're building, and get approved.](https://developer.twitter.com/en/apply/user) :( i can't tell if that's just because it's in beta right now, or permanent. Good news is, I went through that approval process recently with a test account, and it went fine. Plus, the intro tier (&quot;Essential&quot;) doesn't require approval at all any more, and they've dropped many of the approval requirements, including the limits on replicating Twitter's UX. Huge! --- ## Missing features These are blocking migrating Bridgy at least, if not granary: - [ ] [Fetching retweets](https://github.com/twitterdev/open-evolution/blob/main/approved/002-retweets.md). Currently [you can look up the _users_ who have retweeted a given tweet](https://developer.twitter.com/en/docs/twitter-api/tweets/retweets/api-reference/get-tweets-id-retweeted_by), but not the retweet objects themselves, notably their ids, which we need in Bridgy at least. - [ ] `conversation_id` is awesome, but it's always based on a top-level tweet, and we need to be able to fetch replies to any tweet, including replies themselves, which the v2 API can't do yet, and I'm not holding my breath. - https://twittercommunity.com/t/best-way-to-get-replies-to-a-reply-in-a-conversation/159695 - https://twittercommunity.com/t/embedded-conversation-conversation-id-tweet-id/150802</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>2350</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>rss: switch from util.UTC to timezone.utc</MESSAGE>
    <SHA>e3e0792d85c46812a6bf5f79d37eaedc0d9c7b0f</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>start migrating Twitter to API v2! #136, https://developer.twitter.com/en/docs/twitter-api this migrates tweet_to_object(), tweet_to_activity(), and some initial tests. lots more to do.</MESSAGE>
      <SHA>d63e4404cd8875b5e809f3d620829c92a4926a88</SHA>
      <PATCHEDFILES>
        <FILE>granary/tests/test_twitter.py</FILE>
        <FILE>granary/twitter.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>start migrating Twitter to API v2! #136, https://developer.twitter.com/en/docs/twitter-api this migrates tweet_to_object(), tweet_to_activity(), and some initial tests. lots more to do.</MESSAGE>
      <SHA>a5bcf68c1d2ac89ca1be6d78d60130d72f424422</SHA>
      <PATCHEDFILES>
        <FILE>granary/tests/test_twitter.py</FILE>
        <FILE>granary/twitter.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>start migrating Twitter to API v2! #136, https://developer.twitter.com/en/docs/twitter-api this migrates tweet_to_object(), tweet_to_activity(), and some initial tests. lots more to do.</MESSAGE>
      <SHA>badfec3536945f830f6959cd8e5c02ad9d90dc7d</SHA>
      <PATCHEDFILES>
        <FILE>granary/tests/test_twitter.py</FILE>
        <FILE>granary/twitter.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
    <COMMIT>
      <MESSAGE>start migrating Twitter to API v2! #136, https://developer.twitter.com/en/docs/twitter-api this migrates tweet_to_object(), tweet_to_activity(), and some initial tests. lots more to do.</MESSAGE>
      <SHA>a1c4f4520abcfba0f2583f949cafd2b91c606259</SHA>
      <PATCHEDFILES>
        <FILE>granary/tests/test_twitter.py</FILE>
        <FILE>granary/twitter.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
