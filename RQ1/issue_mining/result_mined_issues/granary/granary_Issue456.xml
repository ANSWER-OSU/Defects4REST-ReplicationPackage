<?xml version="1.0" ?>
<ISSUE>
  <ISSUENO>456</ISSUENO>
  <ISSUEURL>https://github.com/snarfed/granary/issues/456</ISSUEURL>
  <TITLE>“white-space: pre” prevents words from wrapping in tweet bodies</TITLE>
  <DESCRIPTION>I use Granary to generate a JSON Feed for [the Twitter account](https://twitter.com/NWSBUFFALO) of the Buffalo office of the National Weather Service. [This tweet](https://twitter.com/NWSBUFFALO/status/1603518606997716992) is rendered poorly in Reeder for Mac and iOS: all of the text is put onto one line. This happens because the line has the rule `white-space: pre` applied, as you can see in the `content_html` in the JSON Feed entry: ```html &lt;div style=&quot;white-space: pre&quot;&gt;Here are some experimental Lake Effect Snow Warning polygons, which narrows down the place and time. The warning for WNY runs from 7PM Friday to 1PM Monday, but we've broken it down into for segments. For more info, see: &lt;a href=&quot;https://www.weather.gov/buf/lespolygon&quot;&gt;weather.gov/buf/lespolygon&lt;/a&gt;&lt;/div&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://twitter.com/NWSBUFFALO/status/1603518606997716992&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://pbs.twimg.com/media/FkDXqYSUEAEWrFr.png&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://twitter.com/NWSBUFFALO/status/1603518606997716992&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://pbs.twimg.com/media/FkDXqYrUUAA0Rjg.png&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://twitter.com/NWSBUFFALO/status/1603518606997716992&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://pbs.twimg.com/media/FkDXqZIUUAApaGj.png&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;a class=&quot;link&quot; href=&quot;https://twitter.com/NWSBUFFALO/status/1603518606997716992&quot;&gt; &lt;img class=&quot;u-photo&quot; src=&quot;https://pbs.twimg.com/media/FkDXqZhUYAAnKPA.png&quot; alt=&quot;&quot; /&gt; &lt;/a&gt; &lt;/p&gt; ``` I’m guessing that this style is applied as a result of there being multiple images; other tweets in the feed that have just one image don’t show this rendering problem. In this particular case the desirable thing would be to replace the newline after “see:” with a `&lt;br&gt;` tag, and to get rid of the `white-space: pre`, but I know that Twitter and HTML have different ideas of which whitespace should be preserved and I assume this is a way of getting the former’s rules in the latter’s context.</DESCRIPTION>
  <REPONAME>granary</REPONAME>
  <TIMEDIFFERENCEDAYS>0</TIMEDIFFERENCEDAYS>
  <BUGGYCOMMIT>
    <MESSAGE>update google deps</MESSAGE>
    <SHA>69fb0696adc2e668d463888970b2dd8e52661db5</SHA>
  </BUGGYCOMMIT>
  <PATCHCOMMITS>
    <COMMIT>
      <MESSAGE>jsonfeed: switch from white-space: pre back to &lt;br&gt;s ...because some feed readers follow it strictly and don't even line wrap, eg Reeder in #456. parallels doing this for Atom a while back in 0ac54362ae10e30b7137a3fa405c9fba8e75dc4b. thanks for the report @bdesham!</MESSAGE>
      <SHA>5de34621b0d502b2044a48f2fdd49594d99b2b50</SHA>
      <PATCHEDFILES>
        <FILE>README.md</FILE>
        <FILE>granary/jsonfeed.py</FILE>
        <FILE>granary/tests/test_jsonfeed.py</FILE>
      </PATCHEDFILES>
    </COMMIT>
  </PATCHCOMMITS>
</ISSUE>
