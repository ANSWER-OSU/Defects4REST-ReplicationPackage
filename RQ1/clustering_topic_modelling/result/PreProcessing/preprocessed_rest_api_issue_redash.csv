issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence,combined_text
417,redash,https://github.com/getredash/redash/issues/417,Fix: Integer columns are formatted as floats (with .00),,source-file | source-file,integer columns formatted floats,bug,0.85,Fix: Integer columns are formatted as floats (with .00) 
3562,redash,https://github.com/getredash/redash/issues/3562,Issues with Query Based Dropdown when the value is numeric,"When the values the query returns for the dropdown are numeric, we have two issues: 1. We dont load the correct value because the value from the URL passed as string, while the actual value is a number. 2. We dont load results at all, because they fail parameter schema validation (the string doesn't match the values the dropdown has, which are numbers).",source-file | test-file | other-file | source-file | test-file | container-file | config-file | config-file | other-file | other-file | config-file | other-file | documentation-file | config-file | config-file | documentation-file | documentation-file | container-file | other-file | other-file | other-file | other-file | source-file | test-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | test-file | other-file | test-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | config-file | config-file | source-file,issues query based dropdown value numeric values query returns dropdown numeric two issues dont load correct value value url passed string actual value number dont load results fail parameter schema validation string match values dropdown numbers,bug,0.9,"Issues with Query Based Dropdown when the value is numeric When the values the query returns for the dropdown are numeric, we have two issues: 1. We dont load the correct value because the value from the URL passed as string, while the actual value is a number. 2. We dont load results at all, because they fail parameter schema validation (the string doesn't match the values the dropdown has, which are numbers)."
755,redash,https://github.com/getredash/redash/issues/755,Results containing opening bracket (<) are not displayed,"I have this query: SELECT keywords from recent_searches; Some of these contain HTML tags or quotes. Like so (output from postgres console):  keywords   10916</cite><span 11576</cite><span 12739</cite><span 1506'-'1 21666</cite><span 29002</cite><span 30328</cite><span 32710</cite><span 44035</cite><span 04289+and+1=(select+0)--+- 04289+and+1=(select+1)--+- 62244</cite><span 93201</cite><span (ok markdown chokes a bit on that I'm not sure how to convey it better) In the Redash query results, the ""keywords"" field shows up as blank for those items (which were search log entries from bots trying to perform SQL injection attacks). Every item listed above shows up as blank. Which is better than breaking something, but if that data can be escaped cleanly and displayed it would be an improvement.",source-file | source-file,results containing opening bracket displayed query select keywords recent searches contain html tags quotes like output postgres console keywords cite span cite span cite span cite span cite span cite span cite span cite span select select cite span cite span markdown chokes bit sure convey better query results keywords field shows blank items search log entries bots trying perform sql injection attacks every item listed shows blank better breaking something data escaped cleanly displayed would improvement,bug,0.85,"Results containing opening bracket (<) are not displayed I have this query: SELECT keywords from recent_searches; Some of these contain HTML tags or quotes. Like so (output from postgres console):  keywords   10916</cite><span 11576</cite><span 12739</cite><span 1506'-'1 21666</cite><span 29002</cite><span 30328</cite><span 32710</cite><span 44035</cite><span 04289+and+1=(select+0)--+- 04289+and+1=(select+1)--+- 62244</cite><span 93201</cite><span (ok markdown chokes a bit on that I'm not sure how to convey it better) In the Redash query results, the ""keywords"" field shows up as blank for those items (which were search log entries from bots trying to perform SQL injection attacks). Every item listed above shows up as blank. Which is better than breaking something, but if that data can be escaped cleanly and displayed it would be an improvement."
1842,redash,https://github.com/getredash/redash/issues/1842,Updating Alert Destination email field does not change the value in the database," Issue Summary Updating the email address list for an Alert Destination does not update the database.  Steps to Reproduce 1. Create an email alert destination group, refresh page. 2. Change one or more emails, save. Refresh page. 3. The email group is the same as it was when created. 4. Confirm via a DB query (select * from notification_destinations;)  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: Various, consistent behaves the same * How did you install Redash: https://raw.githubusercontent.com/getredash/redash/master/bin/upgrade More details: Checking the API log for the update (when I click the save button) things look ok:  [2017-06-23 21:17:26,311][PID:25417][INFO][metrics] method=POST path=/api/destinations/1 endpoint=destination status=200 content_type=application/json content_length=144 duration=7.94 query_count=4 query_duration=2.80  Enabling statement logging in PostgreSQL shows this happening (with sanitized emails):  2017-06-23 21:31:54.550 UTC [459] redash@redash LOG: statement: BEGIN 2017-06-23 21:31:54.551 UTC [459] redash@redash LOG: statement: SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings FROM organizations WHERE organizations.slug = 'default' LIMIT 1 2017-06-23 21:31:54.552 UTC [459] redash@redash LOG: statement: SELECT users.groups AS users_groups, users.updated_at AS users_updated_at, users.created_at AS users_created_at, users.id AS users_id, users.org_id AS users_org_id, users.name AS users_name, users.email AS users_email, users.password_hash AS users_password_hash, users.api_key AS users_api_key FROM users WHERE users.id = '1' AND 1 = users.org_id 2017-06-23 21:31:54.554 UTC [459] redash@redash LOG: statement: SELECT groups.id AS groups_id, groups.org_id AS groups_org_id, groups.type AS groups_type, groups.name AS groups_name, groups.permissions AS groups_permissions, groups.created_at AS groups_created_at FROM groups WHERE groups.id IN (1, 2, 3) 2017-06-23 21:31:54.555 UTC [459] redash@redash LOG: statement: SELECT notification_destinations.id AS notification_destinations_id, notification_destinations.org_id AS notification_destinations_org_id, notification_destinations.user_id AS notification_destinations_user_id, notification_destinations.name AS notification_destinations_name, notification_destinations.type AS notification_destinations_type, notification_destinations.options AS notification_destinations_options, notification_destinations.created_at AS notification_destinations_created_at FROM notification_destinations WHERE notification_destinations.id = '1' AND 1 = notification_destinations.org_id 2017-06-23 21:31:54.557 UTC [459] redash@redash LOG: statement: COMMIT  In other words, it does not appear to be even attempting to update the addresses.",source-file | source-file | test-file | source-file | source-file,updating alert destination email field value database summary updating email address list alert destination database steps reproduce create email alert destination group refresh page one emails save refresh page email group created confirm via query select notification destinations technical details browser various consistent behaves install https raw githubusercontent getredash upgrade details checking api log click save button things look pid metrics method post path api destinations endpoint destination status content type application json content length duration query count query duration enabling statement logging postgresql shows happening sanitized emails utc log statement begin utc log statement select organizations updated organizations updated organizations created organizations created organizations organizations organizations name organizations name organizations slug organizations slug organizations settings organizations settings organizations organizations slug default limit utc log statement select users groups users groups users updated users updated users created users created users users users users users name users name users email users email users password hash users password hash users api key users api key users users users utc log statement select groups groups groups groups groups type groups type groups name groups name groups permissions groups permissions groups created groups created groups groups utc log statement select notification destinations notification destinations notification destinations notification destinations notification destinations user notification destinations user notification destinations name notification destinations name notification destinations type notification destinations type notification destinations options notification destinations options notification destinations created notification destinations created notification destinations notification destinations notification destinations utc log statement words appear even attempting addresses,bug,0.95,"Updating Alert Destination email field does not change the value in the database  Issue Summary Updating the email address list for an Alert Destination does not update the database.  Steps to Reproduce 1. Create an email alert destination group, refresh page. 2. Change one or more emails, save. Refresh page. 3. The email group is the same as it was when created. 4. Confirm via a DB query (select * from notification_destinations;)  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: Various, consistent behaves the same * How did you install Redash: https://raw.githubusercontent.com/getredash/redash/master/bin/upgrade More details: Checking the API log for the update (when I click the save button) things look ok:  [2017-06-23 21:17:26,311][PID:25417][INFO][metrics] method=POST path=/api/destinations/1 endpoint=destination status=200 content_type=application/json content_length=144 duration=7.94 query_count=4 query_duration=2.80  Enabling statement logging in PostgreSQL shows this happening (with sanitized emails):  2017-06-23 21:31:54.550 UTC [459] redash@redash LOG: statement: BEGIN 2017-06-23 21:31:54.551 UTC [459] redash@redash LOG: statement: SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings FROM organizations WHERE organizations.slug = 'default' LIMIT 1 2017-06-23 21:31:54.552 UTC [459] redash@redash LOG: statement: SELECT users.groups AS users_groups, users.updated_at AS users_updated_at, users.created_at AS users_created_at, users.id AS users_id, users.org_id AS users_org_id, users.name AS users_name, users.email AS users_email, users.password_hash AS users_password_hash, users.api_key AS users_api_key FROM users WHERE users.id = '1' AND 1 = users.org_id 2017-06-23 21:31:54.554 UTC [459] redash@redash LOG: statement: SELECT groups.id AS groups_id, groups.org_id AS groups_org_id, groups.type AS groups_type, groups.name AS groups_name, groups.permissions AS groups_permissions, groups.created_at AS groups_created_at FROM groups WHERE groups.id IN (1, 2, 3) 2017-06-23 21:31:54.555 UTC [459] redash@redash LOG: statement: SELECT notification_destinations.id AS notification_destinations_id, notification_destinations.org_id AS notification_destinations_org_id, notification_destinations.user_id AS notification_destinations_user_id, notification_destinations.name AS notification_destinations_name, notification_destinations.type AS notification_destinations_type, notification_destinations.options AS notification_destinations_options, notification_destinations.created_at AS notification_destinations_created_at FROM notification_destinations WHERE notification_destinations.id = '1' AND 1 = notification_destinations.org_id 2017-06-23 21:31:54.557 UTC [459] redash@redash LOG: statement: COMMIT  In other words, it does not appear to be even attempting to update the addresses."
1950,redash,https://github.com/getredash/redash/issues/1950,record_event task fails for view events generated by an user who accesses a dashboard using a public sharing link," Issue Summary If I share a dashboard and access it through the generated public URL, the worker prints an error to the log when it tries to write the view event into the events log table from the record_event task.  Steps to Reproduce I was able to reproduce this issue by using the docker-compose.yml file provided in the repository (i.e. in a dev setup): 1. Setup a fresh instance of Redash 2. Create a new dashboard 3. Click the share button and enable public sharing 4. Copy the public sharing link (e.g. `http://localhost:5000/public/dashboards/CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J?org_slug=default`) and access it with a clean browser profile (or private window that has no redash login cookies around)  What happens? The following error can be seen in the worker logs:  [2017-09-07 08:03:40,006: ERROR/MainProcess] Task redash.tasks.record_event[41674041-c67b-4659-a151-99f9e73e3301] raised unexpected: DataError('(psycopg2.DataError) invalid input syntax for integer: ""CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J""\nLINE 1: id, additional_properties, created_at) VALUES (1, \'CH6m72tek\n ^\n',) Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 240, in trace_task R = retval = fun(*args, **kwargs) File ""/app/redash/worker.py"", line 69, in __call__ return TaskBase.__call__(self, *args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 438, in __protected_call__ return self.run(*args, **kwargs) File ""/app/redash/tasks/general.py"", line 15, in record_event models.db.session.commit() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/scoping.py"", line 157, in do return getattr(self.registry(), name)(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 874, in commit self.transaction.commit() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 461, in commit self._prepare_impl() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 441, in _prepare_impl self.session.flush() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2137, in flush self._flush(objects) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2257, in _flush transaction.rollback(_capture_exception=True) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py"", line 60, in __exit__ compat.reraise(exc_type, exc_value, exc_tb) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2221, in _flush flush_context.execute() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py"", line 389, in execute rec.execute(self) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py"", line 548, in execute uow File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py"", line 181, in save_obj mapper, table, insert) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py"", line 835, in _emit_insert_statements execute(statement, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 945, in execute return meth(self, multiparams, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py"", line 263, in _execute_on_connection return connection._execute_clauseelement(self, multiparams, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1053, in _execute_clauseelement compiled_sql, distilled_params File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1189, in _execute_context context) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1393, in _handle_dbapi_exception exc_info File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py"", line 202, in raise_from_cause reraise(type(exception), exception, tb=exc_tb, cause=cause) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1182, in _execute_context context) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py"", line 469, in do_execute cursor.execute(statement, parameters) DataError: (psycopg2.DataError) invalid input syntax for integer: ""CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J"" LINE 1: id, additional_properties, created_at) VALUES (1, 'CH6m72tek ^ [SQL: 'INSERT INTO events (org_id, user_id, action, object_type, object_id, additional_properties, created_at) VALUES (%(org_id)s, %(user_id)s, %(action)s, %(object_type)s, %(object_id)s, %(additional_properties)s, %(created_at)s) RETURNING events.id'] [parameters: {'user_id': u'CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J', 'created_at': datetime.datetime(2017, 9, 7, 8, 3, 39), 'object_type': 'dashboard', 'org_id': 1, 'object_id': 1, 'additional_properties': '{""ip"": ""172.20.0.1"", ""public"": true, ""referer"": null, ""user_agent"": ""Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0"", ""headless"": false}', 'action': 'view'}]  Coincidentally, the value that fails to be set to the user_id field (`CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J`) is the token seen in the public sharing URL (`http://localhost:5000/public/dashboards/CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J?org_slug=default`)  What should happen? The view event is properly saved to the events table and the task does not crash.  Technical details: * Redash Version: Both stable release 2.0.0 and latest master with commit ID 2a22b98c77757f378d3a4ed1ec8eceb99f0a8b35 * How did you install Redash: Stable v2.0.0 by upgrading a previous version with the bin/upgrade script and the latest commit in master using the provided docker-compose configuration and following the developer environment setup. I believe this issue was discussed in #1238 but that lacked a proper STR to actually fix the root cause of this issue. It did had some good ideas about what could cause the bug and it indeed seems that an anonymous user causes an incorrect user_id to be included in the view event.",source-file | source-file | other-file | documentation-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file,record event task fails view events generated user accesses dashboard public sharing link summary share dashboard access generated public url worker prints log tries write view event events log table record event task steps reproduce able reproduce docker compose yml provided repository setup setup fresh instance create new dashboard click share button enable public sharing copy public sharing link http localhost public dashboards tekgbplwzelzuxwzdtwu llbsewvyvxm slug default access clean browser profile private window login cookies around happens following seen worker logs mainprocess task tasks record event raised unexpected dataerror psycopg dataerror invalid input syntax integer tekgbplwzelzuxwzdtwu llbsewvyvxm nline additional properties created values tek traceback recent call last local python dist packages celery app trace trace task retval fun args kwargs app worker call return taskbase call self args kwargs local python dist packages celery app trace protected call return self args kwargs app tasks general record event models session local python dist packages sqlalchemy orm scoping return getattr self registry name args kwargs local python dist packages sqlalchemy orm session self transaction local python dist packages sqlalchemy orm session self prepare impl local python dist packages sqlalchemy orm session prepare impl self session flush local python dist packages sqlalchemy orm session flush self flush objects local python dist packages sqlalchemy orm session flush transaction rollback capture exception true local python dist packages sqlalchemy util langhelpers exit compat reraise exc type exc value exc local python dist packages sqlalchemy orm session flush flush context execute local python dist packages sqlalchemy orm unitofwork execute rec execute self local python dist packages sqlalchemy orm unitofwork execute uow local python dist packages sqlalchemy orm persistence save obj mapper table insert local python dist packages sqlalchemy orm persistence emit insert statements execute statement params local python dist packages sqlalchemy engine base execute return meth self multiparams params local python dist packages sqlalchemy sql elements execute connection return connection execute clauseelement self multiparams params local python dist packages sqlalchemy engine base execute clauseelement compiled sql distilled params local python dist packages sqlalchemy engine base execute context context local python dist packages sqlalchemy engine base handle dbapi exception exc local python dist packages sqlalchemy util compat raise cause reraise type exception exception exc cause cause local python dist packages sqlalchemy engine base execute context context local python dist packages sqlalchemy engine default execute cursor execute statement parameters dataerror psycopg dataerror invalid input syntax integer tekgbplwzelzuxwzdtwu llbsewvyvxm additional properties created values tek sql insert events user action object type object additional properties created values user action object type object additional properties created returning events parameters user tekgbplwzelzuxwzdtwu llbsewvyvxm created datetime datetime object type dashboard object additional properties public true referer null user agent mozilla ubuntu linux gecko firefox headless false action view coincidentally value fails set user field tekgbplwzelzuxwzdtwu llbsewvyvxm token seen public sharing url http localhost public dashboards tekgbplwzelzuxwzdtwu llbsewvyvxm slug default happen view event properly saved events table task crash technical details stable latest eceb install stable upgrading previous upgrade script latest provided docker compose configuration following developer environment setup believe discussed lacked proper str actually root cause good ideas could cause bug indeed seems anonymous user causes incorrect user included view event,bug,0.95,"record_event task fails for view events generated by an user who accesses a dashboard using a public sharing link  Issue Summary If I share a dashboard and access it through the generated public URL, the worker prints an error to the log when it tries to write the view event into the events log table from the record_event task.  Steps to Reproduce I was able to reproduce this issue by using the docker-compose.yml file provided in the repository (i.e. in a dev setup): 1. Setup a fresh instance of Redash 2. Create a new dashboard 3. Click the share button and enable public sharing 4. Copy the public sharing link (e.g. `http://localhost:5000/public/dashboards/CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J?org_slug=default`) and access it with a clean browser profile (or private window that has no redash login cookies around)  What happens? The following error can be seen in the worker logs:  [2017-09-07 08:03:40,006: ERROR/MainProcess] Task redash.tasks.record_event[41674041-c67b-4659-a151-99f9e73e3301] raised unexpected: DataError('(psycopg2.DataError) invalid input syntax for integer: ""CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J""\nLINE 1: id, additional_properties, created_at) VALUES (1, \'CH6m72tek\n ^\n',) Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 240, in trace_task R = retval = fun(*args, **kwargs) File ""/app/redash/worker.py"", line 69, in __call__ return TaskBase.__call__(self, *args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 438, in __protected_call__ return self.run(*args, **kwargs) File ""/app/redash/tasks/general.py"", line 15, in record_event models.db.session.commit() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/scoping.py"", line 157, in do return getattr(self.registry(), name)(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 874, in commit self.transaction.commit() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 461, in commit self._prepare_impl() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 441, in _prepare_impl self.session.flush() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2137, in flush self._flush(objects) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2257, in _flush transaction.rollback(_capture_exception=True) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py"", line 60, in __exit__ compat.reraise(exc_type, exc_value, exc_tb) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py"", line 2221, in _flush flush_context.execute() File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py"", line 389, in execute rec.execute(self) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py"", line 548, in execute uow File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py"", line 181, in save_obj mapper, table, insert) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py"", line 835, in _emit_insert_statements execute(statement, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 945, in execute return meth(self, multiparams, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py"", line 263, in _execute_on_connection return connection._execute_clauseelement(self, multiparams, params) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1053, in _execute_clauseelement compiled_sql, distilled_params File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1189, in _execute_context context) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1393, in _handle_dbapi_exception exc_info File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py"", line 202, in raise_from_cause reraise(type(exception), exception, tb=exc_tb, cause=cause) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py"", line 1182, in _execute_context context) File ""/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py"", line 469, in do_execute cursor.execute(statement, parameters) DataError: (psycopg2.DataError) invalid input syntax for integer: ""CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J"" LINE 1: id, additional_properties, created_at) VALUES (1, 'CH6m72tek ^ [SQL: 'INSERT INTO events (org_id, user_id, action, object_type, object_id, additional_properties, created_at) VALUES (%(org_id)s, %(user_id)s, %(action)s, %(object_type)s, %(object_id)s, %(additional_properties)s, %(created_at)s) RETURNING events.id'] [parameters: {'user_id': u'CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J', 'created_at': datetime.datetime(2017, 9, 7, 8, 3, 39), 'object_type': 'dashboard', 'org_id': 1, 'object_id': 1, 'additional_properties': '{""ip"": ""172.20.0.1"", ""public"": true, ""referer"": null, ""user_agent"": ""Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:55.0) Gecko/20100101 Firefox/55.0"", ""headless"": false}', 'action': 'view'}]  Coincidentally, the value that fails to be set to the user_id field (`CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J`) is the token seen in the public sharing URL (`http://localhost:5000/public/dashboards/CH6m72tekgbplwzelZuxWzdtWu3LlbsewVYVxm8J?org_slug=default`)  What should happen? The view event is properly saved to the events table and the task does not crash.  Technical details: * Redash Version: Both stable release 2.0.0 and latest master with commit ID 2a22b98c77757f378d3a4ed1ec8eceb99f0a8b35 * How did you install Redash: Stable v2.0.0 by upgrading a previous version with the bin/upgrade script and the latest commit in master using the provided docker-compose configuration and following the developer environment setup. I believe this issue was discussed in #1238 but that lacked a proper STR to actually fix the root cause of this issue. It did had some good ideas about what could cause the bug and it indeed seems that an anonymous user causes an incorrect user_id to be included in the view event."
1825,redash,https://github.com/getredash/redash/issues/1825,An unauthorized (read only) user can create queries," Issue Summary I created a user on the default group and set the data source capabilities to ""Read only"" on that group. Accessing as this brand new user, I really can't create a new query, but I can fork a existing one, and modify it as I want. I think this could be a security flaw.  Steps to Reproduce 1. Installed with docker, connect to a data source (I created a MySQL one); 2. Create a few queries; 3. Create a user and assign him to the ""default"" group; 4. Set the permissions of the data source for the default group to read only; 5. Do login with the brand new user and click to list the queries; 6. Choice one of the queries and fork it. I expect that a ""read only"" role should really be read only.  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: Google Chrome 59/Fedora 25 * How did you install Redash: Docker with the suggested `docker-compose.production.yml`",source-file | test-file | source-file,unauthorized read user create queries summary created user default group set data capabilities read group accessing brand new user really create new query fork existing one modify want think could security flaw steps reproduce installed docker connect data created mysql one create queries create user assign default group set permissions data default group read login brand new user click list queries choice one queries fork expect read role really read technical details browser google chrome fedora install docker suggested docker compose production yml,bug,0.85,"An unauthorized (read only) user can create queries  Issue Summary I created a user on the default group and set the data source capabilities to ""Read only"" on that group. Accessing as this brand new user, I really can't create a new query, but I can fork a existing one, and modify it as I want. I think this could be a security flaw.  Steps to Reproduce 1. Installed with docker, connect to a data source (I created a MySQL one); 2. Create a few queries; 3. Create a user and assign him to the ""default"" group; 4. Set the permissions of the data source for the default group to read only; 5. Do login with the brand new user and click to list the queries; 6. Choice one of the queries and fork it. I expect that a ""read only"" role should really be read only.  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: Google Chrome 59/Fedora 25 * How did you install Redash: Docker with the suggested `docker-compose.production.yml`"
443,redash,https://github.com/getredash/redash/issues/443,When searching schemas by name you cannot see the columns,"1. choose any schema from the right list in ""new query"", click and you see the columns 2. now, write the schema name in the search box 3. try clicking on the schema name, the column names don't appear",other-file | other-file,searching schemas name cannot see columns choose schema right list new query click see columns write schema name search box clicking schema name column names appear,bug,0.85,"When searching schemas by name you cannot see the columns 1. choose any schema from the right list in ""new query"", click and you see the columns 2. now, write the schema name in the search box 3. try clicking on the schema name, the column names don't appear"
1499,redash,https://github.com/getredash/redash/issues/1499,Queries search should be case insensitive,,source-file | test-file | test-file | source-file,queries search case insensitive,bug,0.85,Queries search should be case insensitive 
1439,redash,https://github.com/getredash/redash/issues/1439,Issue with dashboard layout causes API exceptions,"Hi, we've recently hit a bug with one of our dashboards. There seems to be an issue with the layout, resulting in 500 API errors:  [2016-12-01 02:30:50,198][PID:4692][ERROR][redash] Exception on /api/dashboards/test-dashboard [GET] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1475, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login.py"", line 792, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/handlers/base.py"", line 25, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/permissions.py"", line 47, in decorated return fn(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/handlers/dashboards.py"", line 47, in get response = dashboard.to_dict(with_widgets=True, user=self.current_user) File ""/opt/redash/redash.0.12.0.b2354/redash/models.py"", line 1114, in to_dict for widget_id in row: TypeError: 'NoneType' object is not iterable  This change in `redash/models.py` appears to fix the problem: Old:  for row in layout: new_row = [] for widget_id in row:   New:  for row in layout: if not row: continue new_row = [] for widget_id in row:  ",source-file | source-file,dashboard layout causes api exceptions recently hit bug one dashboards seems layout resulting api errors pid exception api dashboards dashboard get traceback recent call last local python dist packages flask app full dispatch self dispatch local python dist packages flask app dispatch return self view functions rule endpoint req view args local python dist packages flask restful init wrapper resp resource args kwargs local python dist packages flask login decorated view return func args kwargs local python dist packages flask views view return self dispatch args kwargs opt handlers base dispatch return super baseresource self dispatch args kwargs local python dist packages flask restful init dispatch resp meth args kwargs opt permissions decorated return args kwargs opt handlers dashboards get response dashboard dict widgets true user self current user opt models dict widget row typeerror nonetype object iterable models appears old row layout new row widget row new row layout row continue new row widget row,bug,0.95,"Issue with dashboard layout causes API exceptions Hi, we've recently hit a bug with one of our dashboards. There seems to be an issue with the layout, resulting in 500 API errors:  [2016-12-01 02:30:50,198][PID:4692][ERROR][redash] Exception on /api/dashboards/test-dashboard [GET] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1475, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login.py"", line 792, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/handlers/base.py"", line 25, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/permissions.py"", line 47, in decorated return fn(*args, **kwargs) File ""/opt/redash/redash.0.12.0.b2354/redash/handlers/dashboards.py"", line 47, in get response = dashboard.to_dict(with_widgets=True, user=self.current_user) File ""/opt/redash/redash.0.12.0.b2354/redash/models.py"", line 1114, in to_dict for widget_id in row: TypeError: 'NoneType' object is not iterable  This change in `redash/models.py` appears to fix the problem: Old:  for row in layout: new_row = [] for widget_id in row:   New:  for row in layout: if not row: continue new_row = [] for widget_id in row:  "
1194,redash,https://github.com/getredash/redash/issues/1194,Shared dashboard crashes if one of the queries has no results yet,"When loading a shared dashboard, if one of the queries doesn't have results yet, the dashboard won't load.",source-file | test-file,shared dashboard crashes one queries results yet loading shared dashboard one queries results yet dashboard load,bug,0.85,"Shared dashboard crashes if one of the queries has no results yet When loading a shared dashboard, if one of the queries doesn't have results yet, the dashboard won't load."
2235,redash,https://github.com/getredash/redash/issues/2235,LDAP Auth /login_auth/login 404,"<!--  # # Need support? USE THE FORUM! https://discuss.redash.io/c/support. # # Don't have steps to reproduce and actually not sure it's a bug? # Use the forum! https://discuss.redash.io/c/support. #  **Got an idea for a new feature?** Check if it isn't on the roadmap already: http://bit.ly/redash-roadmap and start a new discussion in the features category: https://discuss.redash.io/c/feature-requests . Found a bug? Please fill out the sections below thank you -->  Issue Summary With LDAP auth enabled, app routes url to '/ldap/login' based on ldap_auth.py in authentication. Template login page redirects to '/ldap_auth/login' which returns a 404 since there is no route pointing to that url.  Steps to Reproduce 1. enable LDAP auth 2. navigate to localhost and click link to SSO login page 3. observe 404 Fix: adjust route in /authentication/ldap_auth.py  Technical details: * Redash Version: redash.3.0.0.b3134 * Browser/OS: Chrome * How did you install Redash: ami",source-file | source-file | other-file | source-file | source-file | other-file,ldap auth login auth login need use forum https discuss steps reproduce actually sure bug use forum https discuss got idea new feature check roadmap already http bit roadmap start new discussion features category https discuss feature requests found bug please fill sections thank summary ldap auth enabled app routes url ldap login based ldap auth authentication template login page redirects ldap auth login returns since route pointing url steps reproduce enable ldap auth navigate localhost click link sso login page observe adjust route authentication ldap auth technical details browser chrome install ami,bug,0.9,"LDAP Auth /login_auth/login 404 <!--  # # Need support? USE THE FORUM! https://discuss.redash.io/c/support. # # Don't have steps to reproduce and actually not sure it's a bug? # Use the forum! https://discuss.redash.io/c/support. #  **Got an idea for a new feature?** Check if it isn't on the roadmap already: http://bit.ly/redash-roadmap and start a new discussion in the features category: https://discuss.redash.io/c/feature-requests . Found a bug? Please fill out the sections below thank you -->  Issue Summary With LDAP auth enabled, app routes url to '/ldap/login' based on ldap_auth.py in authentication. Template login page redirects to '/ldap_auth/login' which returns a 404 since there is no route pointing to that url.  Steps to Reproduce 1. enable LDAP auth 2. navigate to localhost and click link to SSO login page 3. observe 404 Fix: adjust route in /authentication/ldap_auth.py  Technical details: * Redash Version: redash.3.0.0.b3134 * Browser/OS: Chrome * How did you install Redash: ami"
1694,redash,https://github.com/getredash/redash/issues/1694,Multiple Redash users with the same email-id,"- Currently in the Redash code, It is possible to create multiple users with the same email-id, because email is not case insensitive. - For example It is possible to create two users like InFo@reDaSh.io and INFO@REDASH.IO, Now when we try to login through Google Auth, Redash gets email id as info@redash.io which matches with none of the emails ( InFo@reDaSh.io and INFO@REDASH.IO ). This issue has been the source of several login failures at our company.",source-file,multiple users email currently possible create multiple users email email case insensitive example possible create two users like login google auth gets email matches none emails several login failures company,bug,0.85,"Multiple Redash users with the same email-id - Currently in the Redash code, It is possible to create multiple users with the same email-id, because email is not case insensitive. - For example It is possible to create two users like InFo@reDaSh.io and INFO@REDASH.IO, Now when we try to login through Google Auth, Redash gets email id as info@redash.io which matches with none of the emails ( InFo@reDaSh.io and INFO@REDASH.IO ). This issue has been the source of several login failures at our company."
783,redash,https://github.com/getredash/redash/issues/783,AttributeError: 'datetime.timedelta' object has no attribute 'isoformat',"On the latest 0.9.2-rc:  [2016-01-21 14:30:36,838: ERROR/MainProcess] Task redash.tasks.execute_query[766d3f9f-68a6-4a64-8cd9-b7e4e18bf2af] raised unexpected: AttributeError(""'datetime.timedelta' object has no attribute 'isoformat'"",) Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 240, in trace_task R = retval = fun(*args, **kwargs) File ""/opt/redash/redash/tasks.py"", line 31, in __call__ return super(BaseTask, self).__call__(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 437, in __protected_call__ return self.run(*args, **kwargs) File ""/opt/redash/redash/tasks.py"", line 286, in execute_query data, error = query_runner.run_query(annotated_query) File ""/opt/redash/redash/query_runner/pg.py"", line 132, in run_query json_data = json.dumps(data, cls=JSONEncoder) File ""/usr/lib/python2.7/json/__init__.py"", line 250, in dumps sort_keys=sort_keys, **kw).encode(obj) File ""/usr/lib/python2.7/json/encoder.py"", line 207, in encode chunks = self.iterencode(o, _one_shot=True) File ""/usr/lib/python2.7/json/encoder.py"", line 270, in iterencode return _iterencode(o, 0) File ""/opt/redash/redash/utils.py"", line 57, in default return o.isoformat() AttributeError: 'datetime.timedelta' object has no attribute 'isoformat' ",source-file | source-file | source-file,attributeerror datetime timedelta object attribute isoformat latest mainprocess task tasks execute query raised unexpected attributeerror datetime timedelta object attribute isoformat traceback recent call last local python dist packages celery app trace trace task retval fun args kwargs opt tasks call return super basetask self call args kwargs local python dist packages celery app trace protected call return self args kwargs opt tasks execute query data query runner query annotated query opt query runner query json data json dumps data cls jsonencoder python json init dumps sort keys sort keys encode obj python json encoder encode chunks self iterencode one shot true python json encoder iterencode return iterencode opt utils default return isoformat attributeerror datetime timedelta object attribute isoformat,bug,0.9,"AttributeError: 'datetime.timedelta' object has no attribute 'isoformat' On the latest 0.9.2-rc:  [2016-01-21 14:30:36,838: ERROR/MainProcess] Task redash.tasks.execute_query[766d3f9f-68a6-4a64-8cd9-b7e4e18bf2af] raised unexpected: AttributeError(""'datetime.timedelta' object has no attribute 'isoformat'"",) Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 240, in trace_task R = retval = fun(*args, **kwargs) File ""/opt/redash/redash/tasks.py"", line 31, in __call__ return super(BaseTask, self).__call__(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/celery/app/trace.py"", line 437, in __protected_call__ return self.run(*args, **kwargs) File ""/opt/redash/redash/tasks.py"", line 286, in execute_query data, error = query_runner.run_query(annotated_query) File ""/opt/redash/redash/query_runner/pg.py"", line 132, in run_query json_data = json.dumps(data, cls=JSONEncoder) File ""/usr/lib/python2.7/json/__init__.py"", line 250, in dumps sort_keys=sort_keys, **kw).encode(obj) File ""/usr/lib/python2.7/json/encoder.py"", line 207, in encode chunks = self.iterencode(o, _one_shot=True) File ""/usr/lib/python2.7/json/encoder.py"", line 270, in iterencode return _iterencode(o, 0) File ""/opt/redash/redash/utils.py"", line 57, in default return o.isoformat() AttributeError: 'datetime.timedelta' object has no attribute 'isoformat' "
832,redash,https://github.com/getredash/redash/issues/832,Trouble adding data sources,"Hi there, When I add a datasource, it says it's saved it, with a green tick, but if I open it back up again to modify it, all of the settings have gone. Nick.",other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,trouble adding data sources datasource says saved green tick open back modify settings gone nick,bug,0.85,"Trouble adding data sources Hi there, When I add a datasource, it says it's saved it, with a green tick, but if I open it back up again to modify it, all of the settings have gone. Nick."
669,redash,https://github.com/getredash/redash/issues/669,User can't save query without query text,(seems like it doesn't pass the `data_source_id`),source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file,user save query without query text seems like pass data,bug,0.8,User can't save query without query text (seems like it doesn't pass the `data_source_id`)
1432,redash,https://github.com/getredash/redash/issues/1432,Delete visualization with many series fails with '414 Request-URI Too Long'," Issue Summary Delete visualization fails with '414 Request-URI Too Long' when the visualization has a lot (100+) of series. apache log shows: > DELETE /api/visualizations/7?created_at=2016-11-23T15:32:17.259565%2B09:00&description=&name=Time&options=%7B%22showlegend%22:false,%22yAxis%22:%5B%7B%22title%22:%7B%22text%22:%22%22%7D,%22rangeMax%22:1499999999999,%22type%22:%22datetime%22,%22rangeMin%22:1471000000000,%22series%22:%7B%22stacking%22:null%7D,%22globalSeriesType%22:%22line%22,%22sortX%22:true,%22seriesOptions%22:%7B%221%22:%7B%22zIndex%22:0,%22index%22:0,%22type%22:%22line%22,%22yAxis%22:0%7D,%222%22:%7B%22zIndex%22:1,%22index%22:0,%22type%22:%22line%22,%22yAxis%22:0%7D,%223%22:%7B%22zIndex%22:2,%22index%22:0,%22type%22:%22line%22, Do we need all the `options` in GET parameter?  Technical details: * Redash Version: 12.0 * Browser/OS: Chrome/Win8 * How did you install Redash: Bitnami+git clone",source-file | source-file | source-file | source-file,delete visualization many series fails uri long summary delete visualization fails uri long visualization lot series apache log shows delete api visualizations created description name time options showlegend false yaxis title text rangemax type datetime rangemin series stacking null globalseriestype sortx true seriesoptions zindex index type yaxis zindex index type yaxis zindex index type need options get parameter technical details browser chrome win install bitnami git clone,bug,0.9,"Delete visualization with many series fails with '414 Request-URI Too Long'  Issue Summary Delete visualization fails with '414 Request-URI Too Long' when the visualization has a lot (100+) of series. apache log shows: > DELETE /api/visualizations/7?created_at=2016-11-23T15:32:17.259565%2B09:00&description=&name=Time&options=%7B%22showlegend%22:false,%22yAxis%22:%5B%7B%22title%22:%7B%22text%22:%22%22%7D,%22rangeMax%22:1499999999999,%22type%22:%22datetime%22,%22rangeMin%22:1471000000000,%22series%22:%7B%22stacking%22:null%7D,%22globalSeriesType%22:%22line%22,%22sortX%22:true,%22seriesOptions%22:%7B%221%22:%7B%22zIndex%22:0,%22index%22:0,%22type%22:%22line%22,%22yAxis%22:0%7D,%222%22:%7B%22zIndex%22:1,%22index%22:0,%22type%22:%22line%22,%22yAxis%22:0%7D,%223%22:%7B%22zIndex%22:2,%22index%22:0,%22type%22:%22line%22, Do we need all the `options` in GET parameter?  Technical details: * Redash Version: 12.0 * Browser/OS: Chrome/Win8 * How did you install Redash: Bitnami+git clone"
3736,redash,https://github.com/getredash/redash/issues/3736,Exporting data should returns SQL types and not python types," Issue Summary When I export the result of a select, the primitive types returned are those of Python and not those of sql, booleans usually come as False/True rather than false/true. A summary of the issue and the browser/OS environment in which it occurs.  Steps to Reproduce 1. Select data from any table 2. Export the data.  Technical details: * Redash Version: 7.0.0+b17535 (15c815fb) * Browser/OS: Chrome/Ubuntu * How did you install Redash:",source-file | source-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file,exporting data returns sql types python types summary export result select primitive types returned python sql booleans usually come false true rather false true summary browser environment occurs steps reproduce select data table export data technical details browser chrome ubuntu install,bug,0.85,"Exporting data should returns SQL types and not python types  Issue Summary When I export the result of a select, the primitive types returned are those of Python and not those of sql, booleans usually come as False/True rather than false/true. A summary of the issue and the browser/OS environment in which it occurs.  Steps to Reproduce 1. Select data from any table 2. Export the data.  Technical details: * Redash Version: 7.0.0+b17535 (15c815fb) * Browser/OS: Chrome/Ubuntu * How did you install Redash:"
277,redash,https://github.com/getredash/redash/issues/277,make the data source name unique,I found that I can add multiple datasource with a same name. Maybe we should make this field unique.,source-file,make data name unique found multiple datasource name maybe make field unique,bug,0.8,make the data source name unique I found that I can add multiple datasource with a same name. Maybe we should make this field unique.
3297,redash,https://github.com/getredash/redash/issues/3297,Pending invitation links broken in latest version,"<!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary It looks like the change in #3261 doesn't handle the case of existing users that haven't accepted their invitations yet, so users trying to sign up using invitations created in a previous version incorrectly get the ""This invitation has already been accepted"" message. https://github.com/getredash/redash/pull/3229/files#diff-a0c5448134fdb627ae48d25bad76393fR40 I was able to fix this in our org with: sql UPDATE users SET details = '{""is_invitation_pending"": true}'::json WHERE password_hash IS NULL  Maybe this case should be handled in the migration here? https://github.com/getredash/redash/blob/master/migrations/versions/e7f8a917aa8e_add_user_details_json_column.py  Steps to Reproduce 1. Send invitation from a version prior to #3229 and #3261 2. Upgrade to current master 3. Try to access the invitation link Any other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?  Technical details: * Redash Version: * Browser/OS: * How did you install Redash:",source-file | source-file | test-file | container-file | config-file | config-file | other-file | other-file | config-file | other-file | documentation-file | config-file | config-file | documentation-file | documentation-file | container-file | other-file | other-file | other-file | other-file | source-file | test-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | test-file | other-file | test-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | config-file | config-file | source-file,pending invitation links broken latest use github bug reports anything else posted https discuss help questions use https discuss feature requests ideas use https discuss feature requests found security vulnerability please email security report security vulnerabilities acknowledge receipt vulnerability strive send regular updates progress curious status disclosure please feel free email want encrypt disclosure email use pgp key summary looks like handle case existing users accepted invitations yet users trying sign invitations created previous incorrectly get invitation already accepted message https github getredash files diff fdb bad able sql users set details invitation pending true json password hash null maybe case handled migration https github getredash blob migrations versions user details json column steps reproduce send invitation prior upgrade current access invitation link consider bug expect happen instead technical details browser install,bug,0.85,"Pending invitation links broken in latest version <!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary It looks like the change in #3261 doesn't handle the case of existing users that haven't accepted their invitations yet, so users trying to sign up using invitations created in a previous version incorrectly get the ""This invitation has already been accepted"" message. https://github.com/getredash/redash/pull/3229/files#diff-a0c5448134fdb627ae48d25bad76393fR40 I was able to fix this in our org with: sql UPDATE users SET details = '{""is_invitation_pending"": true}'::json WHERE password_hash IS NULL  Maybe this case should be handled in the migration here? https://github.com/getredash/redash/blob/master/migrations/versions/e7f8a917aa8e_add_user_details_json_column.py  Steps to Reproduce 1. Send invitation from a version prior to #3229 and #3261 2. Upgrade to current master 3. Try to access the invitation link Any other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?  Technical details: * Redash Version: * Browser/OS: * How did you install Redash:"
2856,redash,https://github.com/getredash/redash/issues/2856,Data Source page fail to load," Issue Summary Cannot view Data Source page ![image](https://user-images.githubusercontent.com/5693018/46110589-c8329180-c1ec-11e8-8633-5480ae9bd72d.png)  Steps to Reproduce 1. Run redash on last commit  Technical details: * Redash Version: 5.0.0 * Browser/OS: Chrome/Windows * How did you install Redash: Docker installation Error in logs:  Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 2000, in __call__ return self.wsgi_app(environ, start_response) File ""/usr/local/lib/python2.7/dist-packages/werkzeug/contrib/fixers.py"", line 152, in __call__ return self.app(environ, start_response) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1991, in wsgi_app response = self.make_response(self.handle_exception(e)) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1567, in handle_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 268, in error_router return self.handle_error(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1988, in wsgi_app response = self.full_dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1641, in full_dispatch_request rv = self.handle_user_exception(e) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1544, in handle_user_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 268, in error_router return self.handle_error(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1639, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1625, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login/utils.py"", line 228, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/app/redash/handlers/base.py"", line 31, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/app/redash/permissions.py"", line 48, in decorated return fn(*args, **kwargs) File ""/app/redash/handlers/data_sources.py"", line 30, in get page = 'admin/data_source' + str(ds.id) AttributeError: 'dict' object has no attribute 'id'  Its seems that it happens because this commit 6 hours ago: https://github.com/getredash/redash/commit/34e39eda4a02916380b47c1e20849a372926e083#diff-e4f1edabf1a4b181b47d35025f0070ad",source-file | config-file | config-file | config-file | other-file | other-file | other-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | container-file | container-file | other-file | documentation-file | other-file | test-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | test-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | documentation-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | config-file | source-file | other-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,data page fail load summary cannot view data page image https user images githubusercontent png steps reproduce last technical details browser chrome windows install docker installation logs traceback recent call last local python dist packages flask app call return self wsgi app environ start response local python dist packages werkzeug contrib fixers call return self app environ start response local python dist packages flask app wsgi app response self make response self handle exception local python dist packages flask restful init router return original handler local python dist packages flask app handle exception reraise exc type exc value local python dist packages flask restful init router return self handle local python dist packages flask app wsgi app response self full dispatch local python dist packages flask app full dispatch self handle user exception local python dist packages flask restful init router return original handler local python dist packages flask app handle user exception reraise exc type exc value local python dist packages flask restful init router return self handle local python dist packages flask app full dispatch self dispatch local python dist packages flask app dispatch return self view functions rule endpoint req view args local python dist packages flask restful init wrapper resp resource args kwargs local python dist packages flask login utils decorated view return func args kwargs local python dist packages flask views view return self dispatch args kwargs app handlers base dispatch return super baseresource self dispatch args kwargs local python dist packages flask restful init dispatch resp meth args kwargs app permissions decorated return args kwargs app handlers data sources get page admin data str attributeerror dict object attribute seems happens hours ago https github getredash eda diff edabf,bug,0.9,"Data Source page fail to load  Issue Summary Cannot view Data Source page ![image](https://user-images.githubusercontent.com/5693018/46110589-c8329180-c1ec-11e8-8633-5480ae9bd72d.png)  Steps to Reproduce 1. Run redash on last commit  Technical details: * Redash Version: 5.0.0 * Browser/OS: Chrome/Windows * How did you install Redash: Docker installation Error in logs:  Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 2000, in __call__ return self.wsgi_app(environ, start_response) File ""/usr/local/lib/python2.7/dist-packages/werkzeug/contrib/fixers.py"", line 152, in __call__ return self.app(environ, start_response) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1991, in wsgi_app response = self.make_response(self.handle_exception(e)) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1567, in handle_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 268, in error_router return self.handle_error(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1988, in wsgi_app response = self.full_dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1641, in full_dispatch_request rv = self.handle_user_exception(e) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1544, in handle_user_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 268, in error_router return self.handle_error(e) File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1639, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1625, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login/utils.py"", line 228, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/app/redash/handlers/base.py"", line 31, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/app/redash/permissions.py"", line 48, in decorated return fn(*args, **kwargs) File ""/app/redash/handlers/data_sources.py"", line 30, in get page = 'admin/data_source' + str(ds.id) AttributeError: 'dict' object has no attribute 'id'  Its seems that it happens because this commit 6 hours ago: https://github.com/getredash/redash/commit/34e39eda4a02916380b47c1e20849a372926e083#diff-e4f1edabf1a4b181b47d35025f0070ad"
275,redash,https://github.com/getredash/redash/issues/275,show login failure message?,how about display a message when login failed? in current version the pages only reload when then login failed,other-file | source-file | source-file | source-file,show login failure message display message login failed current pages reload login failed,bug,0.8,show login failure message? how about display a message when login failed? in current version the pages only reload when then login failed
4469,redash,https://github.com/getredash/redash/issues/4469,Redash can't create user from Google with long profile_image_url," Redash can't create user with long profile_image_url My coworker tried to login to redash and it failed.  [2019-12-20 14:32:12,927] ERROR in app: Exception on /oauth/google_callback [GET] Traceback (most recent call last): File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1982, in wsgi_app response = self.full_dispatch_request() File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1614, in full_dispatch_request rv = self.handle_user_exception(e) File ""/usr/local/lib/python2.7/site-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1517, in handle_user_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1612, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1598, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/app/redash/authentication/google_oauth.py"", line 101, in authorized user = create_and_login_user(org, profile['name'], profile['email'], picture_url) File ""/app/redash/authentication/__init__.py"", line 257, in create_and_login_user models.db.session.commit() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py"", line 153, in do return getattr(self.registry(), name)(*args, **kwargs) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 943, in commit self.transaction.commit() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 467, in commit self._prepare_impl() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 447, in _prepare_impl self.session.flush() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2254, in flush self._flush(objects) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2380, in _flush transaction.rollback(_capture_exception=True) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/util/langhelpers.py"", line 66, in __exit__ compat.reraise(exc_type, exc_value, exc_tb) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2344, in _flush flush_context.execute() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py"", line 391, in execute rec.execute(self) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py"", line 556, in execute uow File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py"", line 181, in save_obj mapper, table, insert) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py"", line 866, in _emit_insert_statements execute(statement, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 948, in execute return meth(self, multiparams, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/elements.py"", line 269, in _execute_on_connection return connection._execute_clauseelement(self, multiparams, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1060, in _execute_clauseelement compiled_sql, distilled_params File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1200, in _execute_context context) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1413, in _handle_dbapi_exception exc_info File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py"", line 265, in raise_from_cause reraise(type(exception), exception, tb=exc_tb, cause=cause) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1193, in _execute_context context) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/default.py"", line 509, in do_execute cursor.execute(statement, parameters) DataError: (psycopg2.DataError) value too long for type character varying(320) [SQL: 'INSERT INTO users (updated_at, created_at, org_id, name, email, profile_image_url, password_hash, groups, api_key, disabled_at, details) VALUES (now(), now(), %(org_id)s, %(name)s, %(email)s, %(profile_image_url)s, %(password_hash)s, %(groups)s, %(api_key)s, %(disabled_at)s, %(details)s) RETURNING users.id'] [parameters: {'name': u'<redacted>', 'org_id': <redacted>, 'profile_image_url': u'https://lh3.googleusercontent.com/a-/AAuE7mCQC1y8a0Bew0vZ3zVr835IDK1pq8_J75Jy4YNUwe2TdaYqr8vJBF1eQB8k5u6kooonWTfrnVdpOjR3_Epvit-sKbkbjq12GgcW6qv1iva  (517 characters truncated)  JfmDWlN_ESNOyJu6JRgNKLqFN5pJQJQ44IcS0OEt5ozElvbEV35vX7sw-OBptVnBUPW4wy9cElsIhnw8ISHgp8zSqJhwQfrn5bII6fN42EMrq1_sv66KBAm-0NIit0QYWkocdT58V4PClb8?sz=40', 'disabled_at': None, 'details': '{""is_invitation_pending"": false}', 'groups': [2], 'api_key': '<redacted>', 'email': u'<redacted>', 'password_hash': None}] (Background on this error at: http://sqlalche.me/e/9h9h)  Turns out, he had basic auto-generated one letter avatar \([more info](https://gsuiteupdates.googleblog.com/2015/09/change-to-default-avatar-for-google.html)\) for which Google returns profile_image_url 815 characters long. Maybe they generate it on the fly, who knows. We changed this auto-generated avatar to a normal one and it succeeded.  Steps to Reproduce 1. Have an user in identity provider (G suite in our case) with profile_image_url longer than 320 characters 2. Try to login first time 3. Get internal server error  Technical details: * Redash Version: 8.0 * Browser/OS: Chrome * How did you install Redash: Helmchart",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,create user google long profile image url create user long profile image url coworker tried login failed app exception oauth google callback get traceback recent call last local python site packages flask app wsgi app response self full dispatch local python site packages flask app full dispatch self handle user exception local python site packages flask restful init router return original handler local python site packages flask app handle user exception reraise exc type exc value local python site packages flask app full dispatch self dispatch local python site packages flask app dispatch return self view functions rule endpoint req view args app authentication google oauth authorized user create login user profile name profile email picture url app authentication init create login user models session local python site packages sqlalchemy orm scoping return getattr self registry name args kwargs local python site packages sqlalchemy orm session self transaction local python site packages sqlalchemy orm session self prepare impl local python site packages sqlalchemy orm session prepare impl self session flush local python site packages sqlalchemy orm session flush self flush objects local python site packages sqlalchemy orm session flush transaction rollback capture exception true local python site packages sqlalchemy util langhelpers exit compat reraise exc type exc value exc local python site packages sqlalchemy orm session flush flush context execute local python site packages sqlalchemy orm unitofwork execute rec execute self local python site packages sqlalchemy orm unitofwork execute uow local python site packages sqlalchemy orm persistence save obj mapper table insert local python site packages sqlalchemy orm persistence emit insert statements execute statement params local python site packages sqlalchemy engine base execute return meth self multiparams params local python site packages sqlalchemy sql elements execute connection return connection execute clauseelement self multiparams params local python site packages sqlalchemy engine base execute clauseelement compiled sql distilled params local python site packages sqlalchemy engine base execute context context local python site packages sqlalchemy engine base handle dbapi exception exc local python site packages sqlalchemy util compat raise cause reraise type exception exception exc cause cause local python site packages sqlalchemy engine base execute context context local python site packages sqlalchemy engine default execute cursor execute statement parameters dataerror psycopg dataerror value long type character varying sql insert users updated created name email profile image url password hash groups api key disabled details values name email profile image url password hash groups api key disabled details returning users parameters name redacted redacted profile image url https googleusercontent aaue mcqc bew zvr idk ynuwe tdayqr vjbf eqb kooonwtfrnvdpojr epvit skbkbjq ggcw iva characters truncated jfmdwln esnoyju jrgnklqfn pjqjq ics oet ozelvbev obptvnbupw celsihnw ishgp zsqjhwqfrn bii emrq kbam niit qywkocdt pclb disabled none details invitation pending false groups api key redacted email redacted password hash none background http sqlalche turns basic auto generated one letter avatar https gsuiteupdates googleblog default avatar google html google returns profile image url characters long maybe generate fly knows changed auto generated avatar normal one succeeded steps reproduce user identity provider suite case profile image url longer characters login first time get internal server technical details browser chrome install helmchart,bug,0.95,"Redash can't create user from Google with long profile_image_url  Redash can't create user with long profile_image_url My coworker tried to login to redash and it failed.  [2019-12-20 14:32:12,927] ERROR in app: Exception on /oauth/google_callback [GET] Traceback (most recent call last): File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1982, in wsgi_app response = self.full_dispatch_request() File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1614, in full_dispatch_request rv = self.handle_user_exception(e) File ""/usr/local/lib/python2.7/site-packages/flask_restful/__init__.py"", line 271, in error_router return original_handler(e) File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1517, in handle_user_exception reraise(exc_type, exc_value, tb) File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1612, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/site-packages/flask/app.py"", line 1598, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/app/redash/authentication/google_oauth.py"", line 101, in authorized user = create_and_login_user(org, profile['name'], profile['email'], picture_url) File ""/app/redash/authentication/__init__.py"", line 257, in create_and_login_user models.db.session.commit() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py"", line 153, in do return getattr(self.registry(), name)(*args, **kwargs) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 943, in commit self.transaction.commit() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 467, in commit self._prepare_impl() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 447, in _prepare_impl self.session.flush() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2254, in flush self._flush(objects) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2380, in _flush transaction.rollback(_capture_exception=True) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/util/langhelpers.py"", line 66, in __exit__ compat.reraise(exc_type, exc_value, exc_tb) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py"", line 2344, in _flush flush_context.execute() File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py"", line 391, in execute rec.execute(self) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py"", line 556, in execute uow File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py"", line 181, in save_obj mapper, table, insert) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py"", line 866, in _emit_insert_statements execute(statement, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 948, in execute return meth(self, multiparams, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/elements.py"", line 269, in _execute_on_connection return connection._execute_clauseelement(self, multiparams, params) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1060, in _execute_clauseelement compiled_sql, distilled_params File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1200, in _execute_context context) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1413, in _handle_dbapi_exception exc_info File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py"", line 265, in raise_from_cause reraise(type(exception), exception, tb=exc_tb, cause=cause) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py"", line 1193, in _execute_context context) File ""/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/default.py"", line 509, in do_execute cursor.execute(statement, parameters) DataError: (psycopg2.DataError) value too long for type character varying(320) [SQL: 'INSERT INTO users (updated_at, created_at, org_id, name, email, profile_image_url, password_hash, groups, api_key, disabled_at, details) VALUES (now(), now(), %(org_id)s, %(name)s, %(email)s, %(profile_image_url)s, %(password_hash)s, %(groups)s, %(api_key)s, %(disabled_at)s, %(details)s) RETURNING users.id'] [parameters: {'name': u'<redacted>', 'org_id': <redacted>, 'profile_image_url': u'https://lh3.googleusercontent.com/a-/AAuE7mCQC1y8a0Bew0vZ3zVr835IDK1pq8_J75Jy4YNUwe2TdaYqr8vJBF1eQB8k5u6kooonWTfrnVdpOjR3_Epvit-sKbkbjq12GgcW6qv1iva  (517 characters truncated)  JfmDWlN_ESNOyJu6JRgNKLqFN5pJQJQ44IcS0OEt5ozElvbEV35vX7sw-OBptVnBUPW4wy9cElsIhnw8ISHgp8zSqJhwQfrn5bII6fN42EMrq1_sv66KBAm-0NIit0QYWkocdT58V4PClb8?sz=40', 'disabled_at': None, 'details': '{""is_invitation_pending"": false}', 'groups': [2], 'api_key': '<redacted>', 'email': u'<redacted>', 'password_hash': None}] (Background on this error at: http://sqlalche.me/e/9h9h)  Turns out, he had basic auto-generated one letter avatar \([more info](https://gsuiteupdates.googleblog.com/2015/09/change-to-default-avatar-for-google.html)\) for which Google returns profile_image_url 815 characters long. Maybe they generate it on the fly, who knows. We changed this auto-generated avatar to a normal one and it succeeded.  Steps to Reproduce 1. Have an user in identity provider (G suite in our case) with profile_image_url longer than 320 characters 2. Try to login first time 3. Get internal server error  Technical details: * Redash Version: 8.0 * Browser/OS: Chrome * How did you install Redash: Helmchart"
1451,redash,https://github.com/getredash/redash/issues/1451,Support for sanitized HTML in tables output,The new table results component doesn't support HTML in query results. Need to support sanitized HTML as we had before.,other-file | source-file | other-file | source-file,sanitized html tables output new table results component html query results need sanitized html,bug,0.85,Support for sanitized HTML in tables output The new table results component doesn't support HTML in query results. Need to support sanitized HTML as we had before.
3034,redash,https://github.com/getredash/redash/issues/3034,redash chokes on `select 'NaN'::double precision`," Issue Summary  Steps to Reproduce Try running this query against a Postgres datasource:  select 'NaN'::double precision  It'll take about 15 seconds or so, and eventually you'll get:  Error running query: failed communicating with server. Please check your Internet connection and try again.  The javascript console in Chrome says:  SyntaxError: Unexpected token N in JSON at position 226 at JSON.parse (<anonymous>) at Y (angular.js:1345) at Mt (angular.js:10878) at angular.js:10969 at i (angular.js:325) at Tt (angular.js:10968) at l (angular.js:11828) at s (angular.js:16696) at angular.js:16712 at f.$eval (angular.js:17994)   Technical details: * Redash Version: 5.0.1 * Browser/OS: Chrome * How did you install Redash: Docker image  Workaround  select 'NaN'::double precision::text ",source-file | config-file | config-file | config-file | other-file | other-file | other-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | container-file | container-file | other-file | documentation-file | other-file | test-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | test-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | documentation-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | config-file | source-file | other-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,chokes select nan double precision summary steps reproduce running query postgres datasource select nan double precision take seconds eventually get running query failed communicating server please check internet connection javascript console chrome says syntaxerror unexpected token json position json parse anonymous angular angular angular angular angular angular angular angular eval angular technical details browser chrome install docker image workaround select nan double precision text,bug,0.9,"redash chokes on `select 'NaN'::double precision`  Issue Summary  Steps to Reproduce Try running this query against a Postgres datasource:  select 'NaN'::double precision  It'll take about 15 seconds or so, and eventually you'll get:  Error running query: failed communicating with server. Please check your Internet connection and try again.  The javascript console in Chrome says:  SyntaxError: Unexpected token N in JSON at position 226 at JSON.parse (<anonymous>) at Y (angular.js:1345) at Mt (angular.js:10878) at angular.js:10969 at i (angular.js:325) at Tt (angular.js:10968) at l (angular.js:11828) at s (angular.js:16696) at angular.js:16712 at f.$eval (angular.js:17994)   Technical details: * Redash Version: 5.0.1 * Browser/OS: Chrome * How did you install Redash: Docker image  Workaround  select 'NaN'::double precision::text "
1979,redash,https://github.com/getredash/redash/issues/1979,The API key for one query may be used to retrieve another query's results," Issue Summary A query's API key may be used to obtain another query's results via the REST api when including the API key in the query string.  Steps to Reproduce 1. Create one query and execute it to obtain results (call it query A) 2. Create another query and execute it to obtain different results (call it query B) 3. Get the query's API key for query A (A_API_KEY) and the query number for query A (A_QUERY_NUMBER) 4. Get the result number from query B's most recent run (B_RESULT_NUMBER) 5. Execute the below code and you'll see that the API key for query A can get results from query B bash REDASH_DOMAIN='yourdomain.com' A_QUERY_NUMBER='query number for query A' A_API_KEY_A='api key for query A' B_RESULT_NUMBER='query result number for query b' # this will download query B's results using query A's access key wget \ -O query_b_results.csv \ ""https://$REDASH_DOMAIN/api/queries/$A_QUERY_NUMBER/results/$B_RESULT_NUMBER.csv?api_key=$A_API_KEY""  This is a bug because one query's API key should NOT be able to access another query's results.  Technical details: * Redash Version: 1.0.3 * Browser/OS: (Command Line) / Linux Mint 18.2 * How did you install Redash: Command line",source-file | test-file | source-file | test-file | other-file | documentation-file | other-file | other-file | config-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | config-file | config-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | config-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file,api key one query may used retrieve another query results summary query api key may used obtain another query results via rest api including api key query string steps reproduce create one query execute obtain results call query create another query execute obtain different results call query get query api key query api key query number query query number get result number query recent result number execute see api key query get results query bash domain yourdomain query number query number query api key api key query result number query result number query download query results query access key wget query results csv https domain api queries query number results result number csv api key api key bug one query api key able access another query results technical details browser command linux mint install command,bug,0.95,"The API key for one query may be used to retrieve another query's results  Issue Summary A query's API key may be used to obtain another query's results via the REST api when including the API key in the query string.  Steps to Reproduce 1. Create one query and execute it to obtain results (call it query A) 2. Create another query and execute it to obtain different results (call it query B) 3. Get the query's API key for query A (A_API_KEY) and the query number for query A (A_QUERY_NUMBER) 4. Get the result number from query B's most recent run (B_RESULT_NUMBER) 5. Execute the below code and you'll see that the API key for query A can get results from query B bash REDASH_DOMAIN='yourdomain.com' A_QUERY_NUMBER='query number for query A' A_API_KEY_A='api key for query A' B_RESULT_NUMBER='query result number for query b' # this will download query B's results using query A's access key wget \ -O query_b_results.csv \ ""https://$REDASH_DOMAIN/api/queries/$A_QUERY_NUMBER/results/$B_RESULT_NUMBER.csv?api_key=$A_API_KEY""  This is a bug because one query's API key should NOT be able to access another query's results.  Technical details: * Redash Version: 1.0.3 * Browser/OS: (Command Line) / Linux Mint 18.2 * How did you install Redash: Command line"
1247,redash,https://github.com/getredash/redash/issues/1247,Download Dataset does not work when not logged in," Issue Summary Using a query public URL, trying to download the dataset as a CSV when not logged in fails  Steps to Reproduce 1. Create a query that returns a table 2. Create a public link using ""embed"" (use the src argument) 3. Open the link from an **anonymous** browser window 4. Click Download Dataset CSV Getting ![image](https://cloud.githubusercontent.com/assets/106487/17824986/fee1e108-6619-11e6-9f55-4e3c99a8f633.png)  Technical details: - Redash Version: 0.11.1+b2095 - Browser/OS: Chrome / Mac",source-file | source-file | source-file | source-file,download dataset work logged summary query public url trying download dataset csv logged fails steps reproduce create query returns table create public link embed use argument open link anonymous browser window click download dataset csv getting image https cloud githubusercontent assets fee png technical details browser chrome mac,bug,0.85,"Download Dataset does not work when not logged in  Issue Summary Using a query public URL, trying to download the dataset as a CSV when not logged in fails  Steps to Reproduce 1. Create a query that returns a table 2. Create a public link using ""embed"" (use the src argument) 3. Open the link from an **anonymous** browser window 4. Click Download Dataset CSV Getting ![image](https://cloud.githubusercontent.com/assets/106487/17824986/fee1e108-6619-11e6-9f55-4e3c99a8f633.png)  Technical details: - Redash Version: 0.11.1+b2095 - Browser/OS: Chrome / Mac"
4099,redash,https://github.com/getredash/redash/issues/4099,Dashboards list includes dashboards with text widgets where you have no access to any other widgets,"in this case, a use named A, he has not have any datasource access or view permission, while the dashboard have a text widget, the user A can find the dashboard which have text widget on dashboard lis page, the reason is than this python file: app/redash/model/__init__.py about the class Dashboard with that method : python @classmethod def all(cls, org, group_ids, user_id): query = ( Dashboard.query .options( subqueryload(Dashboard.user).load_only('_profile_image_url', 'name'), ) .outerjoin(Widget) .outerjoin(Visualization) .outerjoin(Query) .outerjoin(DataSourceGroup, Query.data_source_id == DataSourceGroup.data_source_id) .filter( Dashboard.is_archived == False, (DataSourceGroup.group_id.in_(group_ids) | (Dashboard.user_id == user_id) ((Widget.dashboard != None) & (Widget.visualization == None, Dashboard.org == org) .distinct()) query = query.filter(or_(Dashboard.user_id == user_id, Dashboard.is_draft == False)) return query  the query on Widget.visualization == None so will find all dashboard that have text widget * Redash Version: 6.0.7.0.8.0 * Browser/OS: chrome/ios * How did you install Redash: k8s",source-file | test-file | other-file | source-file | source-file | source-file | source-file | test-file,dashboards list includes dashboards text widgets access widgets case use named datasource access view permission dashboard text widget user find dashboard text widget dashboard lis page reason python app model init class dashboard method python classmethod def cls group ids user query dashboard query options subqueryload dashboard user load profile image url name outerjoin widget outerjoin visualization outerjoin query outerjoin datasourcegroup query data datasourcegroup data filter dashboard archived false datasourcegroup group group ids dashboard user user widget dashboard none widget visualization none dashboard distinct query query filter dashboard user user dashboard draft false return query query widget visualization none find dashboard text widget browser chrome ios install,bug,0.85,"Dashboards list includes dashboards with text widgets where you have no access to any other widgets in this case, a use named A, he has not have any datasource access or view permission, while the dashboard have a text widget, the user A can find the dashboard which have text widget on dashboard lis page, the reason is than this python file: app/redash/model/__init__.py about the class Dashboard with that method : python @classmethod def all(cls, org, group_ids, user_id): query = ( Dashboard.query .options( subqueryload(Dashboard.user).load_only('_profile_image_url', 'name'), ) .outerjoin(Widget) .outerjoin(Visualization) .outerjoin(Query) .outerjoin(DataSourceGroup, Query.data_source_id == DataSourceGroup.data_source_id) .filter( Dashboard.is_archived == False, (DataSourceGroup.group_id.in_(group_ids) | (Dashboard.user_id == user_id) ((Widget.dashboard != None) & (Widget.visualization == None, Dashboard.org == org) .distinct()) query = query.filter(or_(Dashboard.user_id == user_id, Dashboard.is_draft == False)) return query  the query on Widget.visualization == None so will find all dashboard that have text widget * Redash Version: 6.0.7.0.8.0 * Browser/OS: chrome/ios * How did you install Redash: k8s"
541,redash,https://github.com/getredash/redash/issues/541,Cannot delete dashboard from home page,"On the home page, clicking the ""X"" next to a dashboard brings up the ""are you sure"" alert, but clicking OK results in the dashboard not being deleted. The title disappears, but if you reload the page the dashboard is still there. Version 0.7.1+b1015",source-file | source-file,cannot delete dashboard home page home page clicking next dashboard brings sure alert clicking results dashboard deleted title disappears reload page dashboard still,bug,0.85,"Cannot delete dashboard from home page On the home page, clicking the ""X"" next to a dashboard brings up the ""are you sure"" alert, but clicking OK results in the dashboard not being deleted. The title disappears, but if you reload the page the dashboard is still there. Version 0.7.1+b1015"
2504,redash,https://github.com/getredash/redash/issues/2504,BUG: Google Sheets parsing does not respect guessed column type,"I have a google sheet with columns `id`, `name` and `abbreviation`. One of the rows has values: |id|name|abbreviation| |--|--|--| |||| |3569|Nantes|NAN| |||| Redash is able to query the sheet and retrieve the data. However it fails to render it in browser and returns the error: ![image](https://user-images.githubusercontent.com/14027470/39469398-e3af900c-4d2f-11e8-801b-95bdcbaa6a0f.png) Inspecting in chrome dev tools, we see a 200 response from api for `query_results` but error at `JSON.parse`: ![image](https://user-images.githubusercontent.com/14027470/39469437-12668eb4-4d30-11e8-8a4a-280b6b017866.png) Inspecting the response at position 2520006 we see the following JSON object: json {""abbreviation"": NaN, ""id"": 3569, ""name"": ""Nantes""}  We also see that redash correctly guessed the type of column for abbreviation as `string` if we inspect the `columns` array of the response: json { ""columns"": [{ ""friendly_name"": ""id"", ""type"": ""integer"", ""name"": ""id"" }, { ""friendly_name"": ""name"", ""type"": ""string"", ""name"": ""name"" }, { ""friendly_name"": ""abbreviation"", ""type"": ""string"", ""name"": ""abbreviation"" }] }  This means that the backend is incorrectly parsing and storing the data. Looking at how the Google Sheets query runner works, it roughly does the following upon getting the data: 1. inspect some rows to determine the column type `_guess_type` https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L27-L47 1. parse the data for every row https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L118 https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L50 `_value_eval_list` does not seem to take into account the guessed type of the column which means it parses it independently. It parses the value for each data type until it succeeds or assumes `STRING`. in Python `float(""NAN"")` actually returns a float `NaN`. Here's an example: https://repl.it/repls/SteelOnlyLoopfission This is tested with Python 2.7.x and redash version 3.0.0+b3134 ## Solution One solution is to refactor/rewrite the `_value_eval_list` function to take in second parameter `col_type` and update the multiple if clauses to switch on col_type for member. Pseudo code: python def _value_eval_list(value, col_types): value_list = [] raw_values = zip(col_types,value) for rv in raw_values: if (rv[1] == TYPE_FLOAT): value_list.append(float(rv[0])) if (rv[1] == TYPE_STRING): value_list.append(rv[0])  return value_list  Calling this function might look like (inside `parse_worksheet()` line 117-118): python column_types = [c['type'] for c in columns] rows = [dict(zip(column_names, _value_eval_list(row , column_types for row in worksheet[HEADER_INDEX + 1:]]  ## Further Investigation More investigation is required but I think that's the issue and solution. I have _not_ tested this in Redash v4. Based on master branch it looks like it is an issue.",other-file | source-file,bug google sheets parsing respect guessed column type google sheet columns name abbreviation one rows values name abbreviation nantes nan able query sheet retrieve data however fails render browser returns image https user images githubusercontent bdcbaa png inspecting chrome tools see response api query results json parse image https user images githubusercontent png inspecting response position see following json object json abbreviation nan name nantes also see correctly guessed type column abbreviation string inspect columns array response json columns friendly name type integer name friendly name name type string name name friendly name abbreviation type string name abbreviation means backend incorrectly parsing storing data looking google sheets query runner works roughly following upon getting data inspect rows determine column type guess type https github getredash blob edec abd query runner google spreadsheets parse data every row https github getredash blob edec abd query runner google spreadsheets https github getredash blob edec abd query runner google spreadsheets value eval list seem take account guessed type column means parses independently parses value data type succeeds assumes string python float nan actually returns float nan example https repl repls steelonlyloopfission tested python solution one solution refactor rewrite value eval list function take second parameter col type multiple clauses switch col type member pseudo python def value eval list value col types value list raw values zip col types value raw values type float value list append float type string value list append return value list calling function might look like inside parse worksheet python column types type columns rows dict zip column names value eval list row column types row worksheet header index investigation investigation required think solution tested based branch looks like,bug,0.95,"BUG: Google Sheets parsing does not respect guessed column type I have a google sheet with columns `id`, `name` and `abbreviation`. One of the rows has values: |id|name|abbreviation| |--|--|--| |||| |3569|Nantes|NAN| |||| Redash is able to query the sheet and retrieve the data. However it fails to render it in browser and returns the error: ![image](https://user-images.githubusercontent.com/14027470/39469398-e3af900c-4d2f-11e8-801b-95bdcbaa6a0f.png) Inspecting in chrome dev tools, we see a 200 response from api for `query_results` but error at `JSON.parse`: ![image](https://user-images.githubusercontent.com/14027470/39469437-12668eb4-4d30-11e8-8a4a-280b6b017866.png) Inspecting the response at position 2520006 we see the following JSON object: json {""abbreviation"": NaN, ""id"": 3569, ""name"": ""Nantes""}  We also see that redash correctly guessed the type of column for abbreviation as `string` if we inspect the `columns` array of the response: json { ""columns"": [{ ""friendly_name"": ""id"", ""type"": ""integer"", ""name"": ""id"" }, { ""friendly_name"": ""name"", ""type"": ""string"", ""name"": ""name"" }, { ""friendly_name"": ""abbreviation"", ""type"": ""string"", ""name"": ""abbreviation"" }] }  This means that the backend is incorrectly parsing and storing the data. Looking at how the Google Sheets query runner works, it roughly does the following upon getting the data: 1. inspect some rows to determine the column type `_guess_type` https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L27-L47 1. parse the data for every row https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L118 https://github.com/getredash/redash/blob/3edec570f17ff3052b01abd8dd75c7c343940f90/redash/query_runner/google_spreadsheets.py#L50 `_value_eval_list` does not seem to take into account the guessed type of the column which means it parses it independently. It parses the value for each data type until it succeeds or assumes `STRING`. in Python `float(""NAN"")` actually returns a float `NaN`. Here's an example: https://repl.it/repls/SteelOnlyLoopfission This is tested with Python 2.7.x and redash version 3.0.0+b3134 ## Solution One solution is to refactor/rewrite the `_value_eval_list` function to take in second parameter `col_type` and update the multiple if clauses to switch on col_type for member. Pseudo code: python def _value_eval_list(value, col_types): value_list = [] raw_values = zip(col_types,value) for rv in raw_values: if (rv[1] == TYPE_FLOAT): value_list.append(float(rv[0])) if (rv[1] == TYPE_STRING): value_list.append(rv[0])  return value_list  Calling this function might look like (inside `parse_worksheet()` line 117-118): python column_types = [c['type'] for c in columns] rows = [dict(zip(column_names, _value_eval_list(row , column_types for row in worksheet[HEADER_INDEX + 1:]]  ## Further Investigation More investigation is required but I think that's the issue and solution. I have _not_ tested this in Redash v4. Based on master branch it looks like it is an issue."
3394,redash,https://github.com/getredash/redash/issues/3394,InvalidParameterError causes query results to fail with 500 instead of 400 status code, title ,source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | container-file | config-file | config-file | other-file | other-file | config-file | other-file | documentation-file | config-file | config-file | documentation-file | documentation-file | container-file | other-file | other-file | other-file | other-file | source-file | test-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | source-file | source-file | source-file | other-file | other-file | test-file | other-file | test-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | config-file | config-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file,invalidparametererror causes query results fail instead status title,bug,0.9,InvalidParameterError causes query results to fail with 500 instead of 400 status code  title 
2965,redash,https://github.com/getredash/redash/issues/2965,GA Data Source throws an error when no rows returned," Issue Summary Google Analytics Data Source throws `Error running query: 'rows'` when the query result is empty. I have a pretty simple query with dimensions and filters, like: json { ""ids"": ""ga:177xxxxxx"", ""start_date"": ""2018-10-08"", ""end_date"": ""2018-10-12"", ""metrics"": ""ga:uniqueEvents"", ""dimensions"": ""ga:dimension1,ga:dimension3"", ""filters"": ""ga:dimension2==userrole;ga:eventCategory==eventcategory;ga:eventAction==enentaction;ga:dimension1!=demo"" }  Sometimes it returns empty result as there is no data. This results in error in redash.  Steps to Reproduce 1. Create the Google Analytics Data Source 2. Make some query returning zero rows 3. Execute it in query editor `Error running query: 'rows'` will be thrown. While this might be considered not a bug, I'd expect just an empty result with no errors.  Technical details: * Redash Version: 5.0.1 * Browser/OS: Chrome/macOS * How did you install Redash: docker-compose",source-file | source-file | config-file | config-file | config-file | other-file | other-file | other-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | container-file | container-file | other-file | documentation-file | other-file | test-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | test-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | documentation-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | config-file | source-file | other-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,data throws rows returned summary google analytics data throws running query rows query result empty pretty simple query dimensions filters like json ids xxxxxx start date end date metrics uniqueevents dimensions dimension dimension filters dimension userrole eventcategory eventcategory eventaction enentaction dimension demo sometimes returns empty result data results steps reproduce create google analytics data make query returning zero rows execute query editor running query rows thrown might considered bug expect empty result errors technical details browser chrome macos install docker compose,bug,0.9,"GA Data Source throws an error when no rows returned  Issue Summary Google Analytics Data Source throws `Error running query: 'rows'` when the query result is empty. I have a pretty simple query with dimensions and filters, like: json { ""ids"": ""ga:177xxxxxx"", ""start_date"": ""2018-10-08"", ""end_date"": ""2018-10-12"", ""metrics"": ""ga:uniqueEvents"", ""dimensions"": ""ga:dimension1,ga:dimension3"", ""filters"": ""ga:dimension2==userrole;ga:eventCategory==eventcategory;ga:eventAction==enentaction;ga:dimension1!=demo"" }  Sometimes it returns empty result as there is no data. This results in error in redash.  Steps to Reproduce 1. Create the Google Analytics Data Source 2. Make some query returning zero rows 3. Execute it in query editor `Error running query: 'rows'` will be thrown. While this might be considered not a bug, I'd expect just an empty result with no errors.  Technical details: * Redash Version: 5.0.1 * Browser/OS: Chrome/macOS * How did you install Redash: docker-compose"
1824,redash,https://github.com/getredash/redash/issues/1824,AttributeError: 'ApiUser' object has no attribute 'email'," Issue Summary API POST calls to /api/queries//refresh throw this error on 1.0.3+b2850  Steps to Reproduce 1. Make a POST call to /api/queries//refresh 2. See error in api_error.log and 500 result Full error with trace:  Exception on /api/queries//refresh [POST] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1639, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1625, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login/utils.py"", line 228, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/base.py"", line 28, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/queries.py"", line 266, in post return run_query(query.data_source, parameter_values, query.query_text, query.id) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/query_results.py"", line 45, in run_query job = enqueue_query(query_text, data_source, current_user.id, metadata={""Username"": current_user.email, ""Query ID"": query_id}) File ""/usr/local/lib/python2.7/dist-packages/werkzeug/local.py"", line 343, in __getattr__ return getattr(self._get_current_object(), name) AttributeError: 'ApiUser' object has no attribute 'email'  Same request worked in some previous version of Redash. Looking at the current code on master, it seems to still make the same reference to `current_user.email` so assuming this bug still exists, but haven't confirmed that yet.  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: N/A * How did you install Redash: N/A",source-file | test-file | source-file | test-file | other-file | documentation-file | other-file | other-file | config-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | config-file | config-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | config-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file,attributeerror apiuser object attribute email summary api post calls api queries refresh throw steps reproduce make post call api queries refresh see api log result full trace exception api queries refresh post traceback recent call last local python dist packages flask app full dispatch self dispatch local python dist packages flask app dispatch return self view functions rule endpoint req view args local python dist packages flask restful init wrapper resp resource args kwargs local python dist packages flask login utils decorated view return func args kwargs local python dist packages flask views view return self dispatch args kwargs opt handlers base dispatch return super baseresource self dispatch args kwargs local python dist packages flask restful init dispatch resp meth args kwargs opt handlers queries post return query query data parameter values query query text query opt handlers query results query job enqueue query query text data current user metadata username current user email query query local python dist packages werkzeug local getattr return getattr self get current object name attributeerror apiuser object attribute email worked previous looking current seems still make reference current user email assuming bug still exists confirmed yet technical details browser install,bug,0.9,"AttributeError: 'ApiUser' object has no attribute 'email'  Issue Summary API POST calls to /api/queries//refresh throw this error on 1.0.3+b2850  Steps to Reproduce 1. Make a POST call to /api/queries//refresh 2. See error in api_error.log and 500 result Full error with trace:  Exception on /api/queries//refresh [POST] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1639, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1625, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login/utils.py"", line 228, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/base.py"", line 28, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/queries.py"", line 266, in post return run_query(query.data_source, parameter_values, query.query_text, query.id) File ""/opt/redash/redash.1.0.3.b2850/redash/handlers/query_results.py"", line 45, in run_query job = enqueue_query(query_text, data_source, current_user.id, metadata={""Username"": current_user.email, ""Query ID"": query_id}) File ""/usr/local/lib/python2.7/dist-packages/werkzeug/local.py"", line 343, in __getattr__ return getattr(self._get_current_object(), name) AttributeError: 'ApiUser' object has no attribute 'email'  Same request worked in some previous version of Redash. Looking at the current code on master, it seems to still make the same reference to `current_user.email` so assuming this bug still exists, but haven't confirmed that yet.  Technical details: * Redash Version: 1.0.3+b2850 * Browser/OS: N/A * How did you install Redash: N/A"
3372,redash,https://github.com/getredash/redash/issues/3372,When creating a visualisation after running a query the query results are deleted,"We are testing the latest stable version of redash (6.0.0+b10818 (7fa66654) Found a regression when creating a new visualization, to reproduce: 0. Open a new browser tab and log into redash 1. Run a query 2. Create a new visualization 3. The X & Y drop downs are empty 4. When you cancel the visualization creation you see that the query results disappeared Note - the issue occurs only when you run redash for the first time on a new session",source-file,creating visualisation running query query results deleted testing latest stable found regression creating new visualization reproduce open new browser tab log query create new visualization drop downs empty cancel visualization creation see query results disappeared note occurs first time new session,bug,0.85,"When creating a visualisation after running a query the query results are deleted We are testing the latest stable version of redash (6.0.0+b10818 (7fa66654) Found a regression when creating a new visualization, to reproduce: 0. Open a new browser tab and log into redash 1. Run a query 2. Create a new visualization 3. The X & Y drop downs are empty 4. When you cancel the visualization creation you see that the query results disappeared Note - the issue occurs only when you run redash for the first time on a new session"
1447,redash,https://github.com/getredash/redash/issues/1447,REDASH_MULTI_ORG broken in Angular 1.5,"The latest code in master no longer works with `REDASH_MULTI_ORG=True`. What I can gleam is that the asset requests are being thought to be an organization (http://host/app.js -> http://host/org where org: app.js). I think there may have been some logic for this in the template previously, but it's been lost. The output is as follows (I've added a print for the `SLUG = X` in `authentication/org_resolving.py`):  [2016-12-05 11:51:45,164][PID:5358][CRITICAL][root] SLUG = styles.css 11:51:45 web.1 | [2016-12-05 11:51:45,167][PID:5358][ERROR][redash] Exception on /styles.css/ [GET] 11:51:45 web.1 | Traceback (most recent call last): 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1817, in wsgi_app 11:51:45 web.1 | response = self.full_dispatch_request() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1477, in full_dispatch_request 11:51:45 web.1 | rv = self.handle_user_exception(e) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_restful/__init__.py"", line 271, in error_router 11:51:45 web.1 | return original_handler(e) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1381, in handle_user_exception 11:51:45 web.1 | reraise(exc_type, exc_value, tb) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1475, in full_dispatch_request 11:51:45 web.1 | rv = self.dispatch_request() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1461, in dispatch_request 11:51:45 web.1 | return self.view_functions[rule.endpoint](**req.view_args) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 790, in decorated_view 11:51:45 web.1 | elif not current_user.is_authenticated: 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 343, in __getattr__ 11:51:45 web.1 | return getattr(self._get_current_object(), name) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 302, in _get_current_object 11:51:45 web.1 | return self.__local() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 47, in <lambda> 11:51:45 web.1 | current_user = LocalProxy(lambda: _get_user()) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 858, in _get_user 11:51:45 web.1 | current_app.login_manager._load_user() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 389, in _load_user 11:51:45 web.1 | return self.reload_user() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 351, in reload_user 11:51:45 web.1 | user = self.user_callback(user_id) 11:51:45 web.1 | File ""redash/redash/authentication/__init__.py"", line 40, in load_user 11:51:45 web.1 | return models.User.get_by_id_and_org(user_id, current_org.id) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 343, in __getattr__ 11:51:45 web.1 | return getattr(self._get_current_object(), name) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 302, in _get_current_object 11:51:45 web.1 | return self.__local() 11:51:45 web.1 | File ""redash/redash/authentication/org_resolving.py"", line 19, in _get_current_org 11:51:45 web.1 | org = Organization.get_by_slug(slug) 11:51:45 web.1 | File ""redash/models.py"", line 302, in get_by_slug 11:51:45 web.1 | return cls.get(cls.slug == slug) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/peewee.py"", line 4012, in get 11:51:45 web.1 | return sq.get() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/peewee.py"", line 2645, in get 11:51:45 web.1 | % self.sql()) 11:51:45 web.1 | OrganizationDoesNotExist: Instance matching query does not exist: 11:51:45 web.1 | SQL: SELECT ""t1"".""id"", ""t1"".""updated_at"", ""t1"".""created_at"", ""t1"".""name"", ""t1"".""slug"", ""t1"".""settings"" FROM ""organizations"" AS t1 WHERE (""t1"".""slug"" = %s) 11:51:45 web.1 | PARAMS: [u'styles.css'] ",other-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,multi broken angular latest longer works multi true gleam asset requests thought organization http host app http host app think may logic template previously lost output follows added print slug authentication resolving pid critical root slug styles css web pid exception styles css get web traceback recent call last web anaconda envs python site packages flask app wsgi app web response self full dispatch web anaconda envs python site packages flask app full dispatch web self handle user exception web anaconda envs python site packages flask restful init router web return original handler web anaconda envs python site packages flask app handle user exception web reraise exc type exc value web anaconda envs python site packages flask app full dispatch web self dispatch web anaconda envs python site packages flask app dispatch web return self view functions rule endpoint req view args web anaconda envs python site packages flask login decorated view web elif current user authenticated web anaconda envs python site packages werkzeug local getattr web return getattr self get current object name web anaconda envs python site packages werkzeug local get current object web return self local web anaconda envs python site packages flask login lambda web current user localproxy lambda get user web anaconda envs python site packages flask login get user web current app login manager load user web anaconda envs python site packages flask login load user web return self reload user web anaconda envs python site packages flask login reload user web user self user callback user web authentication init load user web return models user get user current web anaconda envs python site packages werkzeug local getattr web return getattr self get current object name web anaconda envs python site packages werkzeug local get current object web return self local web authentication resolving get current web organization get slug slug web models get slug web return cls get cls slug slug web anaconda envs python site packages peewee get web return get web anaconda envs python site packages peewee get web self sql web organizationdoesnotexist instance matching query exist web sql select updated created name slug settings organizations slug web params styles css,bug,0.9,"REDASH_MULTI_ORG broken in Angular 1.5 The latest code in master no longer works with `REDASH_MULTI_ORG=True`. What I can gleam is that the asset requests are being thought to be an organization (http://host/app.js -> http://host/org where org: app.js). I think there may have been some logic for this in the template previously, but it's been lost. The output is as follows (I've added a print for the `SLUG = X` in `authentication/org_resolving.py`):  [2016-12-05 11:51:45,164][PID:5358][CRITICAL][root] SLUG = styles.css 11:51:45 web.1 | [2016-12-05 11:51:45,167][PID:5358][ERROR][redash] Exception on /styles.css/ [GET] 11:51:45 web.1 | Traceback (most recent call last): 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1817, in wsgi_app 11:51:45 web.1 | response = self.full_dispatch_request() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1477, in full_dispatch_request 11:51:45 web.1 | rv = self.handle_user_exception(e) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_restful/__init__.py"", line 271, in error_router 11:51:45 web.1 | return original_handler(e) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1381, in handle_user_exception 11:51:45 web.1 | reraise(exc_type, exc_value, tb) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1475, in full_dispatch_request 11:51:45 web.1 | rv = self.dispatch_request() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask/app.py"", line 1461, in dispatch_request 11:51:45 web.1 | return self.view_functions[rule.endpoint](**req.view_args) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 790, in decorated_view 11:51:45 web.1 | elif not current_user.is_authenticated: 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 343, in __getattr__ 11:51:45 web.1 | return getattr(self._get_current_object(), name) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 302, in _get_current_object 11:51:45 web.1 | return self.__local() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 47, in <lambda> 11:51:45 web.1 | current_user = LocalProxy(lambda: _get_user()) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 858, in _get_user 11:51:45 web.1 | current_app.login_manager._load_user() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 389, in _load_user 11:51:45 web.1 | return self.reload_user() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/flask_login.py"", line 351, in reload_user 11:51:45 web.1 | user = self.user_callback(user_id) 11:51:45 web.1 | File ""redash/redash/authentication/__init__.py"", line 40, in load_user 11:51:45 web.1 | return models.User.get_by_id_and_org(user_id, current_org.id) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 343, in __getattr__ 11:51:45 web.1 | return getattr(self._get_current_object(), name) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/werkzeug/local.py"", line 302, in _get_current_object 11:51:45 web.1 | return self.__local() 11:51:45 web.1 | File ""redash/redash/authentication/org_resolving.py"", line 19, in _get_current_org 11:51:45 web.1 | org = Organization.get_by_slug(slug) 11:51:45 web.1 | File ""redash/models.py"", line 302, in get_by_slug 11:51:45 web.1 | return cls.get(cls.slug == slug) 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/peewee.py"", line 4012, in get 11:51:45 web.1 | return sq.get() 11:51:45 web.1 | File "".anaconda/envs/redash/lib/python2.7/site-packages/peewee.py"", line 2645, in get 11:51:45 web.1 | % self.sql()) 11:51:45 web.1 | OrganizationDoesNotExist: Instance matching query does not exist: 11:51:45 web.1 | SQL: SELECT ""t1"".""id"", ""t1"".""updated_at"", ""t1"".""created_at"", ""t1"".""name"", ""t1"".""slug"", ""t1"".""settings"" FROM ""organizations"" AS t1 WHERE (""t1"".""slug"" = %s) 11:51:45 web.1 | PARAMS: [u'styles.css'] "
916,redash,https://github.com/getredash/redash/issues/916,Vertica doesn't show schema,Vertica query runner returns error due to incompatible get_schema method,source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,vertica show schema vertica query runner returns due incompatible get schema method,bug,0.8,Vertica doesn't show schema Vertica query runner returns error due to incompatible get_schema method
1259,redash,https://github.com/getredash/redash/issues/1259,Can't logout when using only Google Apps SSO," Issue Summary Trying to logout Redash keep redirecting me to the login page and signing me in automatically. This happened on a fresh installation with the following settings, which I think that is somehow related with the issue: - **REDASH_GOOGLE_APPS_DOMAINS**: ""domain1.com,gmail.com"" - **REDASH_PASSWORD_LOGIN_ENABLED**: ""false""  the logs:  [2016-08-26 03:32:45,014][PID:25][INFO][metrics] method=GET path=/logout endpoint=redash.logout status=302 content_type=text/html; charset=utf-8 content_length=237 duration=6.48 query_count=2 query_duration=2.41 [2016-08-26 03:32:45,016][PID:25][INFO][metrics] method=GET path=/logout endpoint=redash.logout status=500 content_type=? content_length=-1 duration=8.56 query_count=2 query_duration=2.41 [2016-08-26 03:32:45,163][PID:25][INFO][metrics] method=GET path=/login endpoint=redash.login status=302 content_type=text/html; charset=utf-8 content_length=251 duration=2.97 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,165][PID:25][INFO][metrics] method=GET path=/login endpoint=redash.login status=500 content_type=? content_length=-1 duration=5.24 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,438][PID:25][INFO][metrics] method=GET path=/oauth/google endpoint=google_oauth.authorize status=302 content_type=text/html; charset=utf-8 content_length=941 duration=2.95 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,440][PID:25][INFO][metrics] method=GET path=/oauth/google endpoint=google_oauth.authorize status=500 content_type=? content_length=-1 duration=5.40 query_count=0 query_duration=0.00 [2016-08-26 03:32:46,375][PID:25][INFO][requests.packages.urllib3.connectionpool] Starting new HTTPS connection (1): www.googleapis.com [2016-08-26 03:32:46,634][PID:25][INFO][metrics] method=GET path=/oauth/google_callback endpoint=google_oauth.callback status=302 content_type=text/html; charset=utf-8 content_length=209 duration=494.07 query_count=6 query_duration=3.87 [2016-08-26 03:32:46,637][PID:25][INFO][metrics] method=GET path=/oauth/google_callback endpoint=google_oauth.callback status=500 content_type=? content_length=-1 duration=496.63 query_count=6 query_duration=3.87 [2016-08-26 03:32:46,789][PID:30][INFO][metrics] method=GET path=/ endpoint=redash.index status=200 content_type=text/html; charset=utf-8 content_length=3420 duration=8.75 query_count=4 query_duration=3.33 [2016-08-26 03:32:46,791][PID:30][INFO][metrics] method=GET path=/ endpoint=redash.index status=500 content_type=? content_length=-1 duration=10.59 query_count=4 query_duration=3.33 [2016-08-26 03:32:48,043][PID:30][INFO][metrics] method=GET path=/api/dashboards endpoint=dashboards status=200 content_type=application/json content_length=2 duration=11.50 query_count=5 query_duration=5.29 [2016-08-26 03:32:48,045][PID:30][INFO][metrics] method=GET path=/api/dashboards endpoint=dashboards status=500 content_type=? content_length=-1 duration=13.32 query_count=5 query_duration=5.29 [2016-08-26 03:32:48,222][PID:30][INFO][metrics] method=GET path=/api/queries/recent endpoint=recent_queries status=200 content_type=application/json content_length=2 duration=14.51 query_count=5 query_duration=7.75 [2016-08-26 03:32:48,225][PID:30][INFO][metrics] method=GET path=/api/queries/recent endpoint=recent_queries status=500 content_type=? content_length=-1 duration=17.70 query_count=5 query_duration=7.75 [2016-08-26 03:32:48,226][PID:25][INFO][metrics] method=GET path=/api/dashboards/recent endpoint=recent_dashboards status=200 content_type=application/json content_length=2 duration=15.83 query_count=7 query_duration=7.64 [2016-08-26 03:32:48,228][PID:25][INFO][metrics] method=GET path=/api/dashboards/recent endpoint=recent_dashboards status=500 content_type=? content_length=-1 duration=18.15 query_count=7 query_duration=7.64 [2016-08-26 03:32:49,253][PID:32][INFO][metrics] method=POST path=/api/events endpoint=events status=200 content_type=application/json content_length=4 duration=9.48 query_count=3 query_duration=2.62 [2016-08-26 03:32:49,255][PID:32][INFO][metrics] method=POST path=/api/events endpoint=events status=500 content_type=? content_length=-1 duration=11.85 query_count=3 query_duration=2.62   - Redash Version: 0.12.0-rc - Browser/OS: Chrome Incognito Mode - How did you install Redash: docker",source-file | source-file | other-file | source-file | source-file | other-file,logout google apps sso summary trying logout keep redirecting login page signing automatically happened fresh installation following settings think somehow related google apps domains domain gmail password login enabled false logs pid metrics method get path logout endpoint logout status content type text html charset utf content length duration query count query duration pid metrics method get path logout endpoint logout status content type content length duration query count query duration pid metrics method get path login endpoint login status content type text html charset utf content length duration query count query duration pid metrics method get path login endpoint login status content type content length duration query count query duration pid metrics method get path oauth google endpoint google oauth authorize status content type text html charset utf content length duration query count query duration pid metrics method get path oauth google endpoint google oauth authorize status content type content length duration query count query duration pid requests packages urllib connectionpool starting new https connection www googleapis pid metrics method get path oauth google callback endpoint google oauth callback status content type text html charset utf content length duration query count query duration pid metrics method get path oauth google callback endpoint google oauth callback status content type content length duration query count query duration pid metrics method get path endpoint index status content type text html charset utf content length duration query count query duration pid metrics method get path endpoint index status content type content length duration query count query duration pid metrics method get path api dashboards endpoint dashboards status content type application json content length duration query count query duration pid metrics method get path api dashboards endpoint dashboards status content type content length duration query count query duration pid metrics method get path api queries recent endpoint recent queries status content type application json content length duration query count query duration pid metrics method get path api queries recent endpoint recent queries status content type content length duration query count query duration pid metrics method get path api dashboards recent endpoint recent dashboards status content type application json content length duration query count query duration pid metrics method get path api dashboards recent endpoint recent dashboards status content type content length duration query count query duration pid metrics method post path api events endpoint events status content type application json content length duration query count query duration pid metrics method post path api events endpoint events status content type content length duration query count query duration browser chrome incognito mode install docker,bug,0.9,"Can't logout when using only Google Apps SSO  Issue Summary Trying to logout Redash keep redirecting me to the login page and signing me in automatically. This happened on a fresh installation with the following settings, which I think that is somehow related with the issue: - **REDASH_GOOGLE_APPS_DOMAINS**: ""domain1.com,gmail.com"" - **REDASH_PASSWORD_LOGIN_ENABLED**: ""false""  the logs:  [2016-08-26 03:32:45,014][PID:25][INFO][metrics] method=GET path=/logout endpoint=redash.logout status=302 content_type=text/html; charset=utf-8 content_length=237 duration=6.48 query_count=2 query_duration=2.41 [2016-08-26 03:32:45,016][PID:25][INFO][metrics] method=GET path=/logout endpoint=redash.logout status=500 content_type=? content_length=-1 duration=8.56 query_count=2 query_duration=2.41 [2016-08-26 03:32:45,163][PID:25][INFO][metrics] method=GET path=/login endpoint=redash.login status=302 content_type=text/html; charset=utf-8 content_length=251 duration=2.97 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,165][PID:25][INFO][metrics] method=GET path=/login endpoint=redash.login status=500 content_type=? content_length=-1 duration=5.24 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,438][PID:25][INFO][metrics] method=GET path=/oauth/google endpoint=google_oauth.authorize status=302 content_type=text/html; charset=utf-8 content_length=941 duration=2.95 query_count=0 query_duration=0.00 [2016-08-26 03:32:45,440][PID:25][INFO][metrics] method=GET path=/oauth/google endpoint=google_oauth.authorize status=500 content_type=? content_length=-1 duration=5.40 query_count=0 query_duration=0.00 [2016-08-26 03:32:46,375][PID:25][INFO][requests.packages.urllib3.connectionpool] Starting new HTTPS connection (1): www.googleapis.com [2016-08-26 03:32:46,634][PID:25][INFO][metrics] method=GET path=/oauth/google_callback endpoint=google_oauth.callback status=302 content_type=text/html; charset=utf-8 content_length=209 duration=494.07 query_count=6 query_duration=3.87 [2016-08-26 03:32:46,637][PID:25][INFO][metrics] method=GET path=/oauth/google_callback endpoint=google_oauth.callback status=500 content_type=? content_length=-1 duration=496.63 query_count=6 query_duration=3.87 [2016-08-26 03:32:46,789][PID:30][INFO][metrics] method=GET path=/ endpoint=redash.index status=200 content_type=text/html; charset=utf-8 content_length=3420 duration=8.75 query_count=4 query_duration=3.33 [2016-08-26 03:32:46,791][PID:30][INFO][metrics] method=GET path=/ endpoint=redash.index status=500 content_type=? content_length=-1 duration=10.59 query_count=4 query_duration=3.33 [2016-08-26 03:32:48,043][PID:30][INFO][metrics] method=GET path=/api/dashboards endpoint=dashboards status=200 content_type=application/json content_length=2 duration=11.50 query_count=5 query_duration=5.29 [2016-08-26 03:32:48,045][PID:30][INFO][metrics] method=GET path=/api/dashboards endpoint=dashboards status=500 content_type=? content_length=-1 duration=13.32 query_count=5 query_duration=5.29 [2016-08-26 03:32:48,222][PID:30][INFO][metrics] method=GET path=/api/queries/recent endpoint=recent_queries status=200 content_type=application/json content_length=2 duration=14.51 query_count=5 query_duration=7.75 [2016-08-26 03:32:48,225][PID:30][INFO][metrics] method=GET path=/api/queries/recent endpoint=recent_queries status=500 content_type=? content_length=-1 duration=17.70 query_count=5 query_duration=7.75 [2016-08-26 03:32:48,226][PID:25][INFO][metrics] method=GET path=/api/dashboards/recent endpoint=recent_dashboards status=200 content_type=application/json content_length=2 duration=15.83 query_count=7 query_duration=7.64 [2016-08-26 03:32:48,228][PID:25][INFO][metrics] method=GET path=/api/dashboards/recent endpoint=recent_dashboards status=500 content_type=? content_length=-1 duration=18.15 query_count=7 query_duration=7.64 [2016-08-26 03:32:49,253][PID:32][INFO][metrics] method=POST path=/api/events endpoint=events status=200 content_type=application/json content_length=4 duration=9.48 query_count=3 query_duration=2.62 [2016-08-26 03:32:49,255][PID:32][INFO][metrics] method=POST path=/api/events endpoint=events status=500 content_type=? content_length=-1 duration=11.85 query_count=3 query_duration=2.62   - Redash Version: 0.12.0-rc - Browser/OS: Chrome Incognito Mode - How did you install Redash: docker"
3711,redash,https://github.com/getredash/redash/issues/3711,Cannot Add Query-based Dropdown Parameter to a Saved Query,"<!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary On a new query, query-based dropdown parameters get their values from `/api/queries/:id/dropdown` and on saved queries they get them by association from their parent query id (`/api/queries/:parent_id/dropdowns/:id`). When adding a query-based dropdown parameter to a saved query, the association is not yet created which results in a 403.  Steps to Reproduce 1. Create a new query without a parameter 2. Save it 3. Add a query-based parameter to the query. 4. The dropdown is not populated with values (a 403 occurs)",other-file | source-file | source-file | source-file | test-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | test-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file,cannot query based dropdown parameter saved query use github bug reports anything else posted https discuss help questions use https discuss feature requests ideas use https discuss feature requests found security vulnerability please email security report security vulnerabilities acknowledge receipt vulnerability strive send regular updates progress curious status disclosure please feel free email want encrypt disclosure email use pgp key summary new query query based dropdown parameters get values api queries dropdown saved queries get association parent query api queries parent dropdowns adding query based dropdown parameter saved query association yet created results steps reproduce create new query without parameter save query based parameter query dropdown populated values occurs,bug,0.95,"Cannot Add Query-based Dropdown Parameter to a Saved Query <!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary On a new query, query-based dropdown parameters get their values from `/api/queries/:id/dropdown` and on saved queries they get them by association from their parent query id (`/api/queries/:parent_id/dropdowns/:id`). When adding a query-based dropdown parameter to a saved query, the association is not yet created which results in a 403.  Steps to Reproduce 1. Create a new query without a parameter 2. Save it 3. Add a query-based parameter to the query. 4. The dropdown is not populated with values (a 403 occurs)"
3294,redash,https://github.com/getredash/redash/issues/3294,Forked queries cannot be scheduled to recur,"As described here: https://github.com/getredash/redash/pull/2426#issuecomment-454827177 This is due to forked queries having a `None` value for `schedule` but the UI expects the schedule format to be like  { 'interval': , 'until': , 'day_of_week': , 'time':  } ",source-file | source-file,forked queries cannot scheduled recur described https github getredash issuecomment due forked queries none value schedule expects schedule format like interval day week time,bug,0.85,"Forked queries cannot be scheduled to recur As described here: https://github.com/getredash/redash/pull/2426#issuecomment-454827177 This is due to forked queries having a `None` value for `schedule` but the UI expects the schedule format to be like  { 'interval': , 'until': , 'day_of_week': , 'time':  } "
655,redash,https://github.com/getredash/redash/issues/655,crash when adding an empty query to a dashboard,"1. Create a new, empty query. Name it and save 2. Create a new dashboard, add the empty query 3. Reload, see the errors on the JS console",source-file,crash adding empty query dashboard create new empty query name save create new dashboard empty query reload see errors console,bug,0.85,"crash when adding an empty query to a dashboard 1. Create a new, empty query. Name it and save 2. Create a new dashboard, add the empty query 3. Reload, see the errors on the JS console"
785,redash,https://github.com/getredash/redash/issues/785,"DataError: invalid input syntax for integer: ""admin""","Latest 0.9.2-RC. When you make a user admin with a checkbox: ![image](https://cloud.githubusercontent.com/assets/89186/12489616/1c1ac55c-c069-11e5-9cee-e97b299f522d.png)  [2016-01-21 17:58:21,655][PID:12][ERROR][redash.wsgi] Exception on /api/users/2 [POST] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1475, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login.py"", line 792, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash/handlers/base.py"", line 19, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash/handlers/users.py"", line 76, in post user.update_instance(**params) File ""/opt/redash/redash/models.py"", line 106, in update_instance self.save(only=self.dirty_fields) File ""/opt/redash/redash/models.py"", line 93, in save super(BaseModel, self).save(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 4146, in save rows = self.update(**field_dict).where(self._pk_expr()).execute() File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2751, in execute return self.database.rows_affected(self._execute()) File ""/opt/redash/redash/metrics/database.py"", line 50, in metered_execute result = real_execute(self, *args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2371, in _execute return self.database.execute_sql(sql, params, self.require_commit) File ""/opt/redash/redash/metrics/database.py"", line 22, in execute_sql result = super(MeteredPostgresqlExtDatabase, self).execute_sql(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/playhouse/postgres_ext.py"", line 369, in execute_sql self.commit() File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2922, in __exit__ reraise(new_type, new_type(*exc_value.args), traceback) File ""/usr/local/lib/python2.7/dist-packages/playhouse/postgres_ext.py"", line 360, in execute_sql cursor.execute(sql, params or ()) DataError: invalid input syntax for integer: ""admin"" LINE 1: "" = E'foo@bar.com', ""groups"" = ARRAY[2, E'admin']   Adding to admin group works.",documentation-file | source-file | other-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file,dataerror invalid input syntax integer admin latest make user admin checkbox image https cloud githubusercontent assets cee png pid wsgi exception api users post traceback recent call last local python dist packages flask app full dispatch self dispatch local python dist packages flask app dispatch return self view functions rule endpoint req view args local python dist packages flask restful init wrapper resp resource args kwargs local python dist packages flask login decorated view return func args kwargs local python dist packages flask views view return self dispatch args kwargs opt handlers base dispatch return super baseresource self dispatch args kwargs local python dist packages flask restful init dispatch resp meth args kwargs opt handlers users post user instance params opt models instance self save self dirty fields opt models save super basemodel self save args kwargs local python dist packages peewee save rows self field dict self expr execute local python dist packages peewee execute return self database rows affected self execute opt metrics database metered execute result real execute self args kwargs local python dist packages peewee execute return self database execute sql sql params self require opt metrics database execute sql result super meteredpostgresqlextdatabase self execute sql args kwargs local python dist packages playhouse postgres ext execute sql self local python dist packages peewee exit reraise new type new type exc value args traceback local python dist packages playhouse postgres ext execute sql cursor execute sql params dataerror invalid input syntax integer admin foo bar groups array admin adding admin group works,bug,0.9,"DataError: invalid input syntax for integer: ""admin"" Latest 0.9.2-RC. When you make a user admin with a checkbox: ![image](https://cloud.githubusercontent.com/assets/89186/12489616/1c1ac55c-c069-11e5-9cee-e97b299f522d.png)  [2016-01-21 17:58:21,655][PID:12][ERROR][redash.wsgi] Exception on /api/users/2 [POST] Traceback (most recent call last): File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1475, in full_dispatch_request rv = self.dispatch_request() File ""/usr/local/lib/python2.7/dist-packages/flask/app.py"", line 1461, in dispatch_request return self.view_functions[rule.endpoint](**req.view_args) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 477, in wrapper resp = resource(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_login.py"", line 792, in decorated_view return func(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask/views.py"", line 84, in view return self.dispatch_request(*args, **kwargs) File ""/opt/redash/redash/handlers/base.py"", line 19, in dispatch_request return super(BaseResource, self).dispatch_request(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/flask_restful/__init__.py"", line 587, in dispatch_request resp = meth(*args, **kwargs) File ""/opt/redash/redash/handlers/users.py"", line 76, in post user.update_instance(**params) File ""/opt/redash/redash/models.py"", line 106, in update_instance self.save(only=self.dirty_fields) File ""/opt/redash/redash/models.py"", line 93, in save super(BaseModel, self).save(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 4146, in save rows = self.update(**field_dict).where(self._pk_expr()).execute() File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2751, in execute return self.database.rows_affected(self._execute()) File ""/opt/redash/redash/metrics/database.py"", line 50, in metered_execute result = real_execute(self, *args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2371, in _execute return self.database.execute_sql(sql, params, self.require_commit) File ""/opt/redash/redash/metrics/database.py"", line 22, in execute_sql result = super(MeteredPostgresqlExtDatabase, self).execute_sql(*args, **kwargs) File ""/usr/local/lib/python2.7/dist-packages/playhouse/postgres_ext.py"", line 369, in execute_sql self.commit() File ""/usr/local/lib/python2.7/dist-packages/peewee.py"", line 2922, in __exit__ reraise(new_type, new_type(*exc_value.args), traceback) File ""/usr/local/lib/python2.7/dist-packages/playhouse/postgres_ext.py"", line 360, in execute_sql cursor.execute(sql, params or ()) DataError: invalid input syntax for integer: ""admin"" LINE 1: "" = E'foo@bar.com', ""groups"" = ARRAY[2, E'admin']   Adding to admin group works."
2858,redash,https://github.com/getredash/redash/issues/2858,Cannot retrieve Athena/Glue schema," Issue Summary Redash cannot retrieve Athena(Glue) schema  Steps to Reproduce - Setup an Athena data source using Glue catalog - Attempt to list schemas in either UI or via API directly  % http redash.clasia.internal/api/data_sources/1/schema Authorization:redacted HTTP/1.1 200 OK Connection: keep-alive Content-Encoding: gzip Content-Type: application/json Date: Thu, 27 Sep 2018 03:05:09 GMT Server: nginx/1.9.10 Transfer-Encoding: chunked { ""error"": { ""code"": 2, ""message"": ""Error retrieving schema."" } }  Changing the redash log level to debug, and monitoring logs via `docker-compose logs --tail=0 --follow` I can see the boto debug logger listing and describing all Glue catalog tables and their data schemas. This does not appear to be an IAM permissions issue. There is no indication of an internal failure within redash.  Technical details: * Redash Version: 5.0.0+b4754 * Browser/OS: Backend issue * How did you install Redash: From AMI ami-0fcac8599721ee168",source-file | test-file | source-file | test-file | config-file | config-file | config-file | other-file | other-file | other-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | container-file | container-file | other-file | documentation-file | other-file | test-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | other-file | other-file | test-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | documentation-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | config-file | source-file | other-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,cannot retrieve athena glue schema summary cannot retrieve athena glue schema steps reproduce setup athena data glue catalog attempt list schemas either via api directly http clasia internal api data sources schema authorization redacted http connection keep alive content encoding gzip content type application json date sep gmt server nginx transfer encoding chunked message retrieving schema changing log level monitoring logs via docker compose logs tail follow see boto logger listing describing glue catalog tables data schemas appear iam permissions indication internal failure within technical details browser backend install ami ami fcac,bug,0.9,"Cannot retrieve Athena/Glue schema  Issue Summary Redash cannot retrieve Athena(Glue) schema  Steps to Reproduce - Setup an Athena data source using Glue catalog - Attempt to list schemas in either UI or via API directly  % http redash.clasia.internal/api/data_sources/1/schema Authorization:redacted HTTP/1.1 200 OK Connection: keep-alive Content-Encoding: gzip Content-Type: application/json Date: Thu, 27 Sep 2018 03:05:09 GMT Server: nginx/1.9.10 Transfer-Encoding: chunked { ""error"": { ""code"": 2, ""message"": ""Error retrieving schema."" } }  Changing the redash log level to debug, and monitoring logs via `docker-compose logs --tail=0 --follow` I can see the boto debug logger listing and describing all Glue catalog tables and their data schemas. This does not appear to be an IAM permissions issue. There is no indication of an internal failure within redash.  Technical details: * Redash Version: 5.0.0+b4754 * Browser/OS: Backend issue * How did you install Redash: From AMI ami-0fcac8599721ee168"
961,redash,https://github.com/getredash/redash/issues/961,Support for UUID type in MSSQL query runner,Currently it fails on serializing to JSON (need to add fallback in the serializer to cast into string).,source-file | source-file | source-file | source-file | source-file,uuid type mssql query runner currently fails serializing json need fallback serializer cast string,bug,0.9,Support for UUID type in MSSQL query runner Currently it fails on serializing to JSON (need to add fallback in the serializer to cast into string).
4893,redash,https://github.com/getredash/redash/issues/4893,Admin shows n/a for started value in manager column,"<!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary When going to the admin section you can see in the manager column that the ""Started"" value is always ""n/a"". <img width=""630"" alt=""CleanShot 2020-05-15 at 01 58 09@2x"" src=""https://user-images.githubusercontent.com/1610/81997320-b31fa600-964f-11ea-90c0-e0c2988fdcce.png"">  Steps to Reproduce I **think** this a regression from first https://github.com/getredash/redash/commit/26f0ce0749c1f683ba3b8f0b1d2a9e70cb6ea0e2#diff-5ca0dc869c9c3218d8a95ba7f99f5f4cL460 where it removed the QueryTaskTracker and by that the ability to store the `started_at` time and then later when Celery was removed, where this code path became no-op. Originally this value was shown in v6.0.0 here: https://github.com/getredash/redash/blob/4780bd9c5ef212dd4c38bafb525abc991812d59b/client/app/pages/admin/status/status.html#L35 Now it's pulled in from the `/status.json` api in https://github.com/getredash/redash/blob/8010781f0d3d14260523e135a5abef0847714b9e/client/app/pages/admin/SystemStatus.jsx#L47 but the value behind is not set anymore in https://github.com/getredash/redash/blob/8010781f0d3d14260523e135a5abef0847714b9e/redash/tasks/queries/maintenance.py#L95-L101. Any other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?  Technical details: * Redash Version: 8010781f0d3d14260523e135a5abef0847714b9e * Browser/OS: Firefox macOS * How did you install Redash: Docker",source-file | source-file | source-file | source-file,admin shows started value manager column use github bug reports anything else posted https discuss help questions use https discuss feature requests ideas use https discuss feature requests found security vulnerability please email security report security vulnerabilities acknowledge receipt vulnerability strive send regular updates progress curious status disclosure please feel free email want encrypt disclosure email use pgp key summary going admin section see manager column started value always img width alt cleanshot https user images githubusercontent fdcce png steps reproduce think regression first https github getredash diff removed querytasktracker ability store started time later celery removed path became originally value shown https github getredash blob bafb abc client app pages admin status status html pulled status json api https github getredash blob abef client app pages admin systemstatus jsx value behind set anymore https github getredash blob abef tasks queries maintenance consider bug expect happen instead technical details abef browser firefox macos install docker,bug,0.9,"Admin shows n/a for started value in manager column <!-- We use GitHub only for bug reports Anything else should be posted to https://discuss.redash.io For support, help & questions use https://discuss.redash.io/c/support For feature requests & ideas use https://discuss.redash.io/c/feature-requests **Found a security vulnerability?** Please email security@redash.io to report any security vulnerabilities. We will acknowledge receipt of your vulnerability and strive to send you regular updates about our progress. If you're curious about the status of your disclosure please feel free to email us again. If you want to encrypt your disclosure email, you can use this PGP key. -->  Issue Summary When going to the admin section you can see in the manager column that the ""Started"" value is always ""n/a"". <img width=""630"" alt=""CleanShot 2020-05-15 at 01 58 09@2x"" src=""https://user-images.githubusercontent.com/1610/81997320-b31fa600-964f-11ea-90c0-e0c2988fdcce.png"">  Steps to Reproduce I **think** this a regression from first https://github.com/getredash/redash/commit/26f0ce0749c1f683ba3b8f0b1d2a9e70cb6ea0e2#diff-5ca0dc869c9c3218d8a95ba7f99f5f4cL460 where it removed the QueryTaskTracker and by that the ability to store the `started_at` time and then later when Celery was removed, where this code path became no-op. Originally this value was shown in v6.0.0 here: https://github.com/getredash/redash/blob/4780bd9c5ef212dd4c38bafb525abc991812d59b/client/app/pages/admin/status/status.html#L35 Now it's pulled in from the `/status.json` api in https://github.com/getredash/redash/blob/8010781f0d3d14260523e135a5abef0847714b9e/client/app/pages/admin/SystemStatus.jsx#L47 but the value behind is not set anymore in https://github.com/getredash/redash/blob/8010781f0d3d14260523e135a5abef0847714b9e/redash/tasks/queries/maintenance.py#L95-L101. Any other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?  Technical details: * Redash Version: 8010781f0d3d14260523e135a5abef0847714b9e * Browser/OS: Firefox macOS * How did you install Redash: Docker"
2137,redash,https://github.com/getredash/redash/issues/2137,Case insensitive parameters in Redash query result cache, Issue Summary Redash may display wrong results for query with case sensitive parameter. It looks like results cache is ignoring param letters size.  Steps to Reproduce 1. Create a query with global text parameter. 2. Create dashboard with visualization for this query. 3. Open dashboard with parameter set to lowercase letter for example 'test' 4. Open dashboard on a new tab with parameter 'TEST'. In the last step you should receive visualization for parameter 'test' even when parameter value is set to 'TEST' I have been able to reproduce this scenario on demo.redash.io. To reproduce do: 1. Open link: http://demo.redash.io/dashboard/ma_dashboard?p_dashboard_name=test You should see rows from dashboard table with name `test` 2. Open link: http://demo.redash.io/dashboard/ma_dashboard?p_dashboard_name=Test You should see rows from dashboard table with name `test` even when parameter `dashboard_name` is set to `Test`. After refreshing visualization result changed to proper one.  Technical details: * Redash Version: 3.0.0+b3134 * Browser/OS: Chrome/Firefox/Opera * How did you install Redash: used demo.redash.io,source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,case insensitive parameters query result cache summary may display wrong results query case sensitive parameter looks like results cache ignoring param letters size steps reproduce create query global text parameter create dashboard visualization query open dashboard parameter set lowercase letter example open dashboard new tab parameter last step receive visualization parameter even parameter value set able reproduce scenario demo reproduce open link http demo dashboard dashboard dashboard name see rows dashboard table name open link http demo dashboard dashboard dashboard name see rows dashboard table name even parameter dashboard name set refreshing visualization result changed proper one technical details browser chrome firefox opera install used demo,bug,0.9,Case insensitive parameters in Redash query result cache  Issue Summary Redash may display wrong results for query with case sensitive parameter. It looks like results cache is ignoring param letters size.  Steps to Reproduce 1. Create a query with global text parameter. 2. Create dashboard with visualization for this query. 3. Open dashboard with parameter set to lowercase letter for example 'test' 4. Open dashboard on a new tab with parameter 'TEST'. In the last step you should receive visualization for parameter 'test' even when parameter value is set to 'TEST' I have been able to reproduce this scenario on demo.redash.io. To reproduce do: 1. Open link: http://demo.redash.io/dashboard/ma_dashboard?p_dashboard_name=test You should see rows from dashboard table with name `test` 2. Open link: http://demo.redash.io/dashboard/ma_dashboard?p_dashboard_name=Test You should see rows from dashboard table with name `test` even when parameter `dashboard_name` is set to `Test`. After refreshing visualization result changed to proper one.  Technical details: * Redash Version: 3.0.0+b3134 * Browser/OS: Chrome/Firefox/Opera * How did you install Redash: used demo.redash.io
2718,redash,https://github.com/getredash/redash/issues/2718,Cannot select a query to use for a new alert or search queries when adding a widget to a dashboard," Issue Summary When creating a new alert, the query search doesn't find any queries to create alerts from. Similarly, the query search in ""Add Widget"" dialog of a dashboard finds no results.  Steps to Reproduce 1. Create a query named ""Alert"" 2. Go to the ""New Alert"" page 3. Try to search for the query you just created (""Alert"") When the search happens, the following error is logged to the web console: > Error: ""[$resource:badcfg] Error in resource configuration for action `search`. Expected response to contain an array but got an object (Request: get api/queries/search) It seems that #2686 changed the response format for the query search, but the model (https://github.com/getredash/redash/blob/a014df36d86ab78974befe979d68c9ef5378634b/client/app/services/query.js#L290-L295) and (some) callers of that .search() method were not converted to use the new API.  Technical details: * Redash Version: 5.0.0-beta (a014df3) * Browser/OS: Firefox 61 / Linux * How did you install Redash: Built from source",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,cannot select query use new alert search queries adding widget dashboard summary creating new alert query search find queries create alerts similarly query search widget dialog dashboard finds results steps reproduce create query named alert new alert page search query created alert search happens following logged web console resource badcfg resource configuration action search expected response contain array got object get api queries search seems changed response format query search model https github getredash blob befe client app services query callers search method converted use new api technical details beta browser firefox linux install built,bug,0.95,"Cannot select a query to use for a new alert or search queries when adding a widget to a dashboard  Issue Summary When creating a new alert, the query search doesn't find any queries to create alerts from. Similarly, the query search in ""Add Widget"" dialog of a dashboard finds no results.  Steps to Reproduce 1. Create a query named ""Alert"" 2. Go to the ""New Alert"" page 3. Try to search for the query you just created (""Alert"") When the search happens, the following error is logged to the web console: > Error: ""[$resource:badcfg] Error in resource configuration for action `search`. Expected response to contain an array but got an object (Request: get api/queries/search) It seems that #2686 changed the response format for the query search, but the model (https://github.com/getredash/redash/blob/a014df36d86ab78974befe979d68c9ef5378634b/client/app/services/query.js#L290-L295) and (some) callers of that .search() method were not converted to use the new API.  Technical details: * Redash Version: 5.0.0-beta (a014df3) * Browser/OS: Firefox 61 / Linux * How did you install Redash: Built from source"
303,redash,https://github.com/getredash/redash/issues/303,"""Show Total"" duplicates values on multiple runs",To Reproduce: - Take any graph - Select show total. - Select show total again. - Notice how the numbers multiply (it seems like it's summing the total together with the series). - Repeat until infinity and profit. ;-),source-file | source-file,show total duplicates values multiple runs reproduce take graph select show total select show total notice numbers multiply seems like summing total together series repeat infinity profit,bug,0.85,"""Show Total"" duplicates values on multiple runs To Reproduce: - Take any graph - Select show total. - Select show total again. - Notice how the numbers multiply (it seems like it's summing the total together with the series). - Repeat until infinity and profit. ;-)"
