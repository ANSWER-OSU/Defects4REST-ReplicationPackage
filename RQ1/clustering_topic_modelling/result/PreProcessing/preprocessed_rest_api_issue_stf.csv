issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence,combined_text
735,stf,https://github.com/openstf/stf/issues/735,Bad filtering of Battery Level and Battery Temp,"<!-- *Before creating an issue please make sure you are using the latest version of STF.* --> **Description:** During filtering devices via Battery Level or Battery Temp filer, I noticed, that results for query like: batteryLevel: > 20 Did not return Android devices passing this criteria. The same issue I observed when I tried to filter devices using this query: batteryTemp: >20 STF source code checkout with : d5ab5fd83d2e9a1dab2c61dc42b0ba999a6dbb1a **Steps to reproduce** A) Insert in input tag with name=""deviceFilter"" this query: batteryLevel: >50 **What is the expected behavior?** We should expect to see only devices which battery level is bigger then 50%. But we see only devices, which body contains 50%. B) Insert in input tag with name=""deviceFilter"" this query: batteryTemp: <40 **What is the expected behavior?** We should expect to see only devices which battery temp is lower then 40C. But we see only devices, which body contains 40. **Investigation**: The problem is mostly connected with using text filtering for both of params: Battery Level and Battery Temp. stf/res/app/device-list/column/device-column-service.js: ln340 As we can see both of params are marked as TextCell. To parse them as values we might to add additional extra checking in : stf/res/app/device-list/column/device-column-service.js: ln340 to parse those data properly by adding this part: , filter: function(item, filter) { if ( options.title == ""Battery Level"" || options.title == ""Battery Temp"" ) { //Exception in TextCell. We want to filter after integer values for two columns, Battery Level and Battery Temp var remove_unit_character = '' switch (options.title){ case ""Battery Level"": remove_unit_character = ""%"" break case ""Battery Temp"": remove_unit_character = ""C"" break } var parsed_value = parseInt((options.value(item)).replace(remove_unit_character,'')) return filterOps[filter.op || '=']( parsed_value , Number(filter.query) ) } else{ return filterIgnoreCase(options.value(item), filter.query) } }",source-file,bad filtering battery level battery temp creating please make sure latest description filtering devices via battery level battery temp filer noticed results query like batterylevel return android devices passing criteria observed tried filter devices query batterytemp checkout dab dbb steps reproduce insert input tag name devicefilter query batterylevel expected behavior expect see devices battery level bigger see devices body contains insert input tag name devicefilter query batterytemp expected behavior expect see devices battery temp lower see devices body contains investigation mostly connected text filtering params battery level battery temp res app device list column device column service see params marked textcell parse values might additional extra checking res app device list column device column service parse data properly adding part filter function item filter options title battery level options title battery temp exception textcell want filter integer values two columns battery level battery temp var unit character switch options title case battery level unit character break case battery temp unit character break var parsed value parseint options value item replace unit character return filterops filter parsed value number filter query else return filterignorecase options value item filter query,bug,0.9,"Bad filtering of Battery Level and Battery Temp <!-- *Before creating an issue please make sure you are using the latest version of STF.* --> **Description:** During filtering devices via Battery Level or Battery Temp filer, I noticed, that results for query like: batteryLevel: > 20 Did not return Android devices passing this criteria. The same issue I observed when I tried to filter devices using this query: batteryTemp: >20 STF source code checkout with : d5ab5fd83d2e9a1dab2c61dc42b0ba999a6dbb1a **Steps to reproduce** A) Insert in input tag with name=""deviceFilter"" this query: batteryLevel: >50 **What is the expected behavior?** We should expect to see only devices which battery level is bigger then 50%. But we see only devices, which body contains 50%. B) Insert in input tag with name=""deviceFilter"" this query: batteryTemp: <40 **What is the expected behavior?** We should expect to see only devices which battery temp is lower then 40C. But we see only devices, which body contains 40. **Investigation**: The problem is mostly connected with using text filtering for both of params: Battery Level and Battery Temp. stf/res/app/device-list/column/device-column-service.js: ln340 As we can see both of params are marked as TextCell. To parse them as values we might to add additional extra checking in : stf/res/app/device-list/column/device-column-service.js: ln340 to parse those data properly by adding this part: , filter: function(item, filter) { if ( options.title == ""Battery Level"" || options.title == ""Battery Temp"" ) { //Exception in TextCell. We want to filter after integer values for two columns, Battery Level and Battery Temp var remove_unit_character = '' switch (options.title){ case ""Battery Level"": remove_unit_character = ""%"" break case ""Battery Temp"": remove_unit_character = ""C"" break } var parsed_value = parseInt((options.value(item)).replace(remove_unit_character,'')) return filterOps[filter.op || '=']( parsed_value , Number(filter.query) ) } else{ return filterIgnoreCase(options.value(item), filter.query) } }"
