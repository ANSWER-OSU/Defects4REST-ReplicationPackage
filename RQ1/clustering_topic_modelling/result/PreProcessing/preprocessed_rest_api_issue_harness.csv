issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence,combined_text
2475,harness,https://github.com/harness/harness/issues/2475,BUG: Gitea integration sending wrong URLs to Gitea,"First of all this is a copy of my bug report which got automaticly closed (https://github.com/drone/drone/issues/2470). Secondly @bradrydzewski said I should report this on https://discourse.drone.io/ - Since then my account didn't get approved so I'm opening this issue a second time. I am running a drone ci instance using the following docker-compose.yml  version: '2' networks: drone: external: false proxy: external: name: proxy services: drone-server: image: drone/drone:0.8 expose: - 8000 - 9000 volumes: - ./drone:/var/lib/drone/ restart: always networks: - proxy - drone environment: - DRONE_OPEN=true - DRONE_HOST={{REMOVED}} - DRONE_SECRET={{REMOVED}}D - DRONE_GITEA=true - DRONE_GITEA_URL={{REMOVED}} - DRONE_GITEA_GIT_USERNAME=Drone - DRONE_GITEA_GIT_PASSWORD={{REMOVED}} - DRONE_GITEA_PRIVATE_MODE=true drone-agent: image: drone/agent:0.8 command: agent restart: always networks: - drone depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock environment: - DRONE_SERVER=drone-server:9000 - DRONE_SECRET={{REMOVED}}  After pushing into a activated repository Gitea shows the build status. ![Example image](https://user-images.githubusercontent.com/11004008/44058996-32bb097a-9f50-11e8-9d06-65a1e2cc26cb.png ""Example image"") If the build succeeded the URL is working as expected (Redirecting to the defined DRONE_HOST) But if a build is still pending or fails the URL redirects to http://drone-server:8000/ I don't think this is an intended behavior. If you need any other details or configuration, let me know.",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,bug gitea integration sending wrong urls gitea first copy bug report got automaticly closed https github drone drone issues secondly bradrydzewski said report https discourse drone since account get approved opening second time running drone instance following docker compose yml networks drone external false proxy external name proxy services drone server image drone drone expose volumes drone var drone restart always networks proxy drone environment drone open true drone host removed drone secret removed drone gitea true drone gitea url removed drone gitea git username drone drone gitea git password removed drone gitea private mode true drone agent image drone agent command agent restart always networks drone depends drone server volumes var docker sock var docker sock environment drone server drone server drone secret removed pushing activated repository gitea shows status example image https user images githubusercontent png example image succeeded url working expected redirecting defined drone host still pending fails url redirects http drone server think intended behavior need details configuration let know,bug,0.85,"BUG: Gitea integration sending wrong URLs to Gitea First of all this is a copy of my bug report which got automaticly closed (https://github.com/drone/drone/issues/2470). Secondly @bradrydzewski said I should report this on https://discourse.drone.io/ - Since then my account didn't get approved so I'm opening this issue a second time. I am running a drone ci instance using the following docker-compose.yml  version: '2' networks: drone: external: false proxy: external: name: proxy services: drone-server: image: drone/drone:0.8 expose: - 8000 - 9000 volumes: - ./drone:/var/lib/drone/ restart: always networks: - proxy - drone environment: - DRONE_OPEN=true - DRONE_HOST={{REMOVED}} - DRONE_SECRET={{REMOVED}}D - DRONE_GITEA=true - DRONE_GITEA_URL={{REMOVED}} - DRONE_GITEA_GIT_USERNAME=Drone - DRONE_GITEA_GIT_PASSWORD={{REMOVED}} - DRONE_GITEA_PRIVATE_MODE=true drone-agent: image: drone/agent:0.8 command: agent restart: always networks: - drone depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock environment: - DRONE_SERVER=drone-server:9000 - DRONE_SECRET={{REMOVED}}  After pushing into a activated repository Gitea shows the build status. ![Example image](https://user-images.githubusercontent.com/11004008/44058996-32bb097a-9f50-11e8-9d06-65a1e2cc26cb.png ""Example image"") If the build succeeded the URL is working as expected (Redirecting to the defined DRONE_HOST) But if a build is still pending or fails the URL redirects to http://drone-server:8000/ I don't think this is an intended behavior. If you need any other details or configuration, let me know."
2525,harness,https://github.com/harness/harness/issues/2525,1.0.0.-rc.1 agent - invalid character '<' looking for beginning of value,"Running agent rc.1 throws the following error in logs {""level"":""error"",""error"":""invalid character '<' looking for beginning of value"",""platform"":""linux/amd64"",""time"":""2018-11-11T20:07:46Z"",""message"":""cannot get queue item""} the agent call the rpc service ""POST /rpc/v1/request"" response ""<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=""IE=edge""><meta name=viewport content=""width=device-width,initial-scale=1""><link rel=icon href=/favicon.png><title>Drone | Continuous Integration</title><link href=/css/app.b667b0e1.css rel=preload as=style><link href=/js/app.28abcb1f.js rel=preload as=script><link href=/js/chunk-vendors.6bc2aeab.js rel=preload as=script><link href=/css/app.b667b0e1.css rel=stylesheet></head><body><noscript><strong>We're sorry but Drone does not work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div id=app></div><script src=/js/chunk-vendors.6bc2aeab.js></script><script src=/js/app.28abcb1f.js></script></body></html>""",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,agent invalid character looking beginning value running agent throws following logs level invalid character looking beginning value platform linux amd time message cannot get queue item agent call rpc service post rpc response doctype html html lang head meta charset utf meta http equiv compatible content edge meta name viewport content width device width initial scale link rel icon href favicon png title drone continuous integration title link href css app css rel preload style link href app abcb rel preload script link href chunk vendors aeab rel preload script link href css app css rel stylesheet head body noscript strong sorry drone work properly without javascript enabled please enable continue strong noscript div app div script chunk vendors aeab script script app abcb script body html,bug,0.95,"1.0.0.-rc.1 agent - invalid character '<' looking for beginning of value Running agent rc.1 throws the following error in logs {""level"":""error"",""error"":""invalid character '<' looking for beginning of value"",""platform"":""linux/amd64"",""time"":""2018-11-11T20:07:46Z"",""message"":""cannot get queue item""} the agent call the rpc service ""POST /rpc/v1/request"" response ""<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=""IE=edge""><meta name=viewport content=""width=device-width,initial-scale=1""><link rel=icon href=/favicon.png><title>Drone | Continuous Integration</title><link href=/css/app.b667b0e1.css rel=preload as=style><link href=/js/app.28abcb1f.js rel=preload as=script><link href=/js/chunk-vendors.6bc2aeab.js rel=preload as=script><link href=/css/app.b667b0e1.css rel=stylesheet></head><body><noscript><strong>We're sorry but Drone does not work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div id=app></div><script src=/js/chunk-vendors.6bc2aeab.js></script><script src=/js/app.28abcb1f.js></script></body></html>"""
2776,harness,https://github.com/harness/harness/issues/2776,Gitlab 'merged' webhook is ignored,"Assessing the new `action` added in this issue [issue](https://github.com/drone/drone/issues/2685) condition, it seems like `merged` webhooks (hooks firing from gitlab when the repository is merged ) are ignored in drone. That means: - The repository is properly integrated with drone - Hooks are fired and a 200 response is received from drone. - Drone logs show no recollection of handling the `merged` hook (as opposed to `opened` hooks, which are properly evaluated) - Using debug logging, I get this message:  {""fields.time"":""2019-08-05T14:37:51Z"",""latency"":625401,""level"":""debug"",""method"":""POST"",""msg"":"""",""remote"":""172.18.0.1:37804"",""request"":""/hook"",""request-id"":""1P0fKgKxws4QTAmMxVIWV23bHJY"",""time"":""2019-08-05T14:37:51Z""}  I have specific interest to act on this merged event, rather then use the push event fired on the target branch. Any help will be much advised.",source-file | source-file | source-file | source-file,gitlab merged webhook ignored assessing new action added https github drone drone issues condition seems like merged webhooks hooks firing gitlab repository merged ignored drone means repository properly integrated drone hooks fired response received drone drone logs show recollection handling merged hook opposed opened hooks properly evaluated logging get message fields time latency level method post msg remote hook fkgkxws qtammxviwv bhjy time specific interest act merged event rather use push event fired target branch help much advised,bug,0.9,"Gitlab 'merged' webhook is ignored Assessing the new `action` added in this issue [issue](https://github.com/drone/drone/issues/2685) condition, it seems like `merged` webhooks (hooks firing from gitlab when the repository is merged ) are ignored in drone. That means: - The repository is properly integrated with drone - Hooks are fired and a 200 response is received from drone. - Drone logs show no recollection of handling the `merged` hook (as opposed to `opened` hooks, which are properly evaluated) - Using debug logging, I get this message:  {""fields.time"":""2019-08-05T14:37:51Z"",""latency"":625401,""level"":""debug"",""method"":""POST"",""msg"":"""",""remote"":""172.18.0.1:37804"",""request"":""/hook"",""request-id"":""1P0fKgKxws4QTAmMxVIWV23bHJY"",""time"":""2019-08-05T14:37:51Z""}  I have specific interest to act on this merged event, rather then use the push event fired on the target branch. Any help will be much advised."
1190,harness,https://github.com/harness/harness/issues/1190,0.3 series stack traces when attempting to add a repository,"The following is output when attempting to Add a repository from a fresh Drone-CI installation (via the .deb package) for the 0.3 series. This happens on any repository, so it doesn't appear to be triggered by existing configuration. 2015/09/05 23:48:06 http: panic serving 192.30.252.34:32556: runtime error: invalid memory address or nil pointer dereference goroutine 171 [running]: net/http.func011() /usr/local/go/src/pkg/net/http/server.go:1100 +0xb7 runtime.panic(0xb42de0, 0x11b98d3) /usr/local/go/src/pkg/runtime/panic.c:248 +0x18d github.com/drone/drone/server/handler.PostHook(0xc20894d9e0, 0xc20894d830, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/handler/hook.go:46 +0xfdb github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd5d430, 0xc20894d9e0, 0xc20894d830, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/handler.go:25 +0x54 github.com/zenazn/goji/web.(_router).route(0xc208026348, 0xc2089bd260, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2089912c0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func006(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/user.go:21 +0x1a6 net/http.HandlerFunc.ServeHTTP(0xc2089912e0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func001(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/header.go:28 +0x4e9 net/http.HandlerFunc.ServeHTTP(0xc2081fb6a0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 main.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/main.go:176 +0x721 net/http.HandlerFunc.ServeHTTP(0xc208991300, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/options.go:22 +0x261 net/http.HandlerFunc.ServeHTTP(0xc2081fb6d0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(_cStack).ServeHTTP(0xc2089bd260, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:46 +0x7f github.com/zenazn/goji/web.(_Mux).ServeHTTP(0xc208026310, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:45 +0x5f net/http.(_ServeMux).ServeHTTP(0xc208022930, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1511 +0x1a3 net/http.serverHandler.ServeHTTP(0xc208005a40, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1673 +0x19f net/http.(_conn).serve(0xc2089fad00) /usr/local/go/src/pkg/net/http/server.go:1174 +0xa7e created by net/http.(_Server).Serve /usr/local/go/src/pkg/net/http/server.go:1721 +0x313",source-file | source-file | source-file | source-file | source-file,series stack traces attempting repository following output attempting repository fresh drone installation via deb package series happens repository appear triggered existing configuration http panic serving runtime invalid memory address nil pointer dereference goroutine running http func local pkg http server runtime panic local pkg runtime panic github drone drone server handler posthook var cache drone github drone drone server handler hook xfdb github zenazn goji web handlerfuncwrap servehttpc var cache drone github zenazn goji web handler github zenazn goji web router route var cache drone github zenazn goji web router github zenazn goji web func var cache drone github zenazn goji web middleware http handlerfunc servehttp local pkg http server github drone drone server middleware func var cache drone github drone drone server middleware user http handlerfunc servehttp local pkg http server github drone drone server middleware func var cache drone github drone drone server middleware header http handlerfunc servehttp local pkg http server func var cache drone github drone drone server http handlerfunc servehttp local pkg http server github drone drone server middleware func var cache drone github drone drone server middleware options http handlerfunc servehttp local pkg http server github zenazn goji web cstack servehttp var cache drone github zenazn goji web middleware github zenazn goji web mux servehttp var cache drone github zenazn goji web mux http servemux servehttp local pkg http server http serverhandler servehttp local pkg http server http conn serve fad local pkg http server created http server serve local pkg http server,bug,0.9,"0.3 series stack traces when attempting to add a repository The following is output when attempting to Add a repository from a fresh Drone-CI installation (via the .deb package) for the 0.3 series. This happens on any repository, so it doesn't appear to be triggered by existing configuration. 2015/09/05 23:48:06 http: panic serving 192.30.252.34:32556: runtime error: invalid memory address or nil pointer dereference goroutine 171 [running]: net/http.func011() /usr/local/go/src/pkg/net/http/server.go:1100 +0xb7 runtime.panic(0xb42de0, 0x11b98d3) /usr/local/go/src/pkg/runtime/panic.c:248 +0x18d github.com/drone/drone/server/handler.PostHook(0xc20894d9e0, 0xc20894d830, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/handler/hook.go:46 +0xfdb github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd5d430, 0xc20894d9e0, 0xc20894d830, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/handler.go:25 +0x54 github.com/zenazn/goji/web.(_router).route(0xc208026348, 0xc2089bd260, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2089912c0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func006(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/user.go:21 +0x1a6 net/http.HandlerFunc.ServeHTTP(0xc2089912e0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func001(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/header.go:28 +0x4e9 net/http.HandlerFunc.ServeHTTP(0xc2081fb6a0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 main.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/main.go:176 +0x721 net/http.HandlerFunc.ServeHTTP(0xc208991300, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func002(0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/drone/drone/server/middleware/options.go:22 +0x261 net/http.HandlerFunc.ServeHTTP(0xc2081fb6d0, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(_cStack).ServeHTTP(0xc2089bd260, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:46 +0x7f github.com/zenazn/goji/web.(_Mux).ServeHTTP(0xc208026310, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:45 +0x5f net/http.(_ServeMux).ServeHTTP(0xc208022930, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1511 +0x1a3 net/http.serverHandler.ServeHTTP(0xc208005a40, 0x7f65f2564928, 0xc20863d4a0, 0xc2083d68f0) /usr/local/go/src/pkg/net/http/server.go:1673 +0x19f net/http.(_conn).serve(0xc2089fad00) /usr/local/go/src/pkg/net/http/server.go:1174 +0xa7e created by net/http.(_Server).Serve /usr/local/go/src/pkg/net/http/server.go:1721 +0x313"
2943,harness,https://github.com/harness/harness/issues/2943,drone orgsecret rm 404,"I use `drone orgsecret add daocloud.io docker_password my_password` successfully. But when rm orgsecret, it said 404. ![image](https://user-images.githubusercontent.com/1883728/77022090-a1a97d00-69c3-11ea-9298-a22a07e3a29b.png)",source-file | source-file | source-file | source-file | source-file | source-file,drone orgsecret use drone orgsecret daocloud docker password password successfully orgsecret said image https user images githubusercontent png,bug,0.9,"drone orgsecret rm 404 I use `drone orgsecret add daocloud.io docker_password my_password` successfully. But when rm orgsecret, it said 404. ![image](https://user-images.githubusercontent.com/1883728/77022090-a1a97d00-69c3-11ea-9298-a22a07e3a29b.png)"
3402,harness,https://github.com/harness/harness/issues/3402,Can't import repository from GitHub,"Hi team, trying to import a Spring Petclinic repo (https://github.com/spring-projects/spring-petclinic.git) in Gitness and no luck. This query fails with HTTP 400: http://localhost:3000/api/v1/repos/import Request: `{""description"":"""",""parent_ref"":""spring-petclinic"",""uid"":""spring-petclinic.git"",""provider"":{""type"":""github"",""username"":"""",""password"":""""},""provider_repo"":""spring-projects/spring-petclinic.git""}` Video: https://www.youtube.com/watch?v=v4x6G4BwxhA",source-file | source-file | source-file | source-file | source-file,import repository github team trying import spring petclinic repo https github spring projects spring petclinic git gitness luck query fails http http localhost api repos import description parent ref spring petclinic uid spring petclinic git provider type github username password provider repo spring projects spring petclinic git video https www youtube watch bwxha,bug,0.9,"Can't import repository from GitHub Hi team, trying to import a Spring Petclinic repo (https://github.com/spring-projects/spring-petclinic.git) in Gitness and no luck. This query fails with HTTP 400: http://localhost:3000/api/v1/repos/import Request: `{""description"":"""",""parent_ref"":""spring-petclinic"",""uid"":""spring-petclinic.git"",""provider"":{""type"":""github"",""username"":"""",""password"":""""},""provider_repo"":""spring-projects/spring-petclinic.git""}` Video: https://www.youtube.com/watch?v=v4x6G4BwxhA"
557,harness,https://github.com/harness/harness/issues/557,Logout functionality fails silently,"It's returning a 200 OK, but clicking logout loads this empty page (and doesn't clear session): ![image](https://cloud.githubusercontent.com/assets/2149341/4623449/2c1a6f3a-534f-11e4-94ea-02ae012c9c43.png)",other-file | other-file | other-file | source-file | other-file | other-file | other-file,logout functionality fails silently returning clicking logout loads empty page clear session image https cloud githubusercontent assets png,bug,0.9,"Logout functionality fails silently It's returning a 200 OK, but clicking logout loads this empty page (and doesn't clear session): ![image](https://cloud.githubusercontent.com/assets/2149341/4623449/2c1a6f3a-534f-11e4-94ea-02ae012c9c43.png)"
3420,harness,https://github.com/harness/harness/issues/3420,Sending commits via API,"I am having problems sending commits via api I am using the following Endpoint [POST] /api/v1/repos/{repo}/commits The response i am getting is: json { ""message"": ""sha does not match for path README.md [given: 3d84e33764a95d00f5b1d4a7c8362580e4fad381, expected: 73a4f96320a42cc62d0271e62aad9213ff165ff1]"" }  If it knows the sha already why do we have to send it? Would it be possible to remove the necessity of sending sha in the request?",source-file,sending commits via api problems sending commits via api following endpoint post api repos repo commits response getting json message sha match path readme given fad expected aad knows sha already send would possible necessity sending sha,bug,0.85,"Sending commits via API I am having problems sending commits via api I am using the following Endpoint [POST] /api/v1/repos/{repo}/commits The response i am getting is: json { ""message"": ""sha does not match for path README.md [given: 3d84e33764a95d00f5b1d4a7c8362580e4fad381, expected: 73a4f96320a42cc62d0271e62aad9213ff165ff1]"" }  If it knows the sha already why do we have to send it? Would it be possible to remove the necessity of sending sha in the request?"
983,harness,https://github.com/harness/harness/issues/983,HTTP 400 Error While GitHub Authentication,"I'm getting error while trying to auth with GitHub. Actually this error same with Telmo's [problem](https://github.com/drone/drone/issues/679#issuecomment-68703200). But that issue closed without resolving problem.  [server] port="":8001""  [github] client=""xxx"" secret=""yyy"" orgs=[] open=true  ![image](https://cloud.githubusercontent.com/assets/782514/7216251/4bb27d2a-e601-11e4-971b-7da2973d0e1d.png) (of course using my real domain instead of _domain.com_) I'm following these steps and getting error : 1. Browsing to http://domain.com:8001/ 2. Clicking to GitHub button and redirected to Github.com 3. Allowing application and redirecting back to this url: `http://domain.com:8001/api/auth/github.com?code=62e5cb142fb19ad657b0&state=I6MYHH2YJVHZWXWW44WNWM4DPOZPWCEKHH4BQHCIBQDG64ZX3AOQ%3D%3D%3D%3D` 4. But it's just a blank page. Here Chrome Console logs : ![image](https://cloud.githubusercontent.com/assets/782514/7216277/677c0c46-e602-11e4-8172-64663e915415.png)",other-file | source-file | documentation-file | other-file | other-file | other-file | other-file | other-file | documentation-file,http github authentication getting trying auth github actually telmo https github drone drone issues issuecomment closed without resolving server port github client xxx secret yyy orgs open true image https cloud githubusercontent assets png course real domain instead domain following steps getting browsing http domain clicking github button redirected github allowing application redirecting back url http domain api auth github state myhh yjvhzwxww wnwm dpozpwcekhh bqhcibqdg aoq blank page chrome console logs image https cloud githubusercontent assets png,bug,0.85,"HTTP 400 Error While GitHub Authentication I'm getting error while trying to auth with GitHub. Actually this error same with Telmo's [problem](https://github.com/drone/drone/issues/679#issuecomment-68703200). But that issue closed without resolving problem.  [server] port="":8001""  [github] client=""xxx"" secret=""yyy"" orgs=[] open=true  ![image](https://cloud.githubusercontent.com/assets/782514/7216251/4bb27d2a-e601-11e4-971b-7da2973d0e1d.png) (of course using my real domain instead of _domain.com_) I'm following these steps and getting error : 1. Browsing to http://domain.com:8001/ 2. Clicking to GitHub button and redirected to Github.com 3. Allowing application and redirecting back to this url: `http://domain.com:8001/api/auth/github.com?code=62e5cb142fb19ad657b0&state=I6MYHH2YJVHZWXWW44WNWM4DPOZPWCEKHH4BQHCIBQDG64ZX3AOQ%3D%3D%3D%3D` 4. But it's just a blank page. Here Chrome Console logs : ![image](https://cloud.githubusercontent.com/assets/782514/7216277/677c0c46-e602-11e4-8172-64663e915415.png)"
2154,harness,https://github.com/harness/harness/issues/2154,Drone server failed to unmarshal webhook payload from Gogs (labels are present),"Steps to reproduce: 1. Create PR with labels. 2. See drone-server logs. These errors are found there in my case:  drone-server_1 | time=""2017-08-07T06:00:10Z"" level=error msg=""failure to parse hook. json: cannot unmarshal object into Go struct field .labels of type string"" drone-server_1 | time=""2017-08-07T06:00:10Z"" level=error msg=""Error #01: json: cannot unmarshal object into Go struct field .labels of type string\n"" ip=89.188.125.8 latency=16.784072ms method=POST path=""/hook"" status=400 time=""2017-08-07T06:00:10Z"" user-agent=GogsServer  3. See ""labels"" section of payload (can be found in webhook edit page in Gogs). In my case: json ""labels"": [ { ""id"": 268, ""name"": ""component/library"", ""color"": ""7614de"", ""url"": """" } ],  It seems like drone webhook processing function works incorrectly, somewhere around [this](https://github.com/drone/drone/blob/c8313f8cd8b398becaa46563121a4c5526b1081a/server/hook.go#L324) line. Gitter discussion is [here](https://gitter.im/drone/drone?at=59887a8845fc670746015e41).",source-file | source-file | database-file | database-file | database-file | database-file,drone server failed unmarshal webhook payload gogs labels present steps reproduce create labels see drone server logs errors found case drone server time level msg failure parse hook json cannot unmarshal object struct field labels type string drone server time level msg json cannot unmarshal object struct field labels type string latency method post path hook status time user agent gogsserver see labels section payload found webhook edit page gogs case json labels name component library color url seems like drone webhook processing function works incorrectly somewhere around https github drone drone blob becaa server hook gitter discussion https gitter drone drone,bug,0.95,"Drone server failed to unmarshal webhook payload from Gogs (labels are present) Steps to reproduce: 1. Create PR with labels. 2. See drone-server logs. These errors are found there in my case:  drone-server_1 | time=""2017-08-07T06:00:10Z"" level=error msg=""failure to parse hook. json: cannot unmarshal object into Go struct field .labels of type string"" drone-server_1 | time=""2017-08-07T06:00:10Z"" level=error msg=""Error #01: json: cannot unmarshal object into Go struct field .labels of type string\n"" ip=89.188.125.8 latency=16.784072ms method=POST path=""/hook"" status=400 time=""2017-08-07T06:00:10Z"" user-agent=GogsServer  3. See ""labels"" section of payload (can be found in webhook edit page in Gogs). In my case: json ""labels"": [ { ""id"": 268, ""name"": ""component/library"", ""color"": ""7614de"", ""url"": """" } ],  It seems like drone webhook processing function works incorrectly, somewhere around [this](https://github.com/drone/drone/blob/c8313f8cd8b398becaa46563121a4c5526b1081a/server/hook.go#L324) line. Gitter discussion is [here](https://gitter.im/drone/drone?at=59887a8845fc670746015e41)."
639,harness,https://github.com/harness/harness/issues/639,Params cannot contain the equals sign,"Because of https://github.com/drone/drone/blob/master/shared/build/script/script.go#L106 , seems you'll only get the portion of a param up until the = sign. Maybe something as simple as `strings.SplitN(env, ""="", 2)` ?",source-file | test-file | source-file | test-file | test-file | test-file | source-file | test-file | source-file | container-file,params cannot contain equals sign https github drone drone blob shared script script seems get portion param sign maybe something simple strings splitn env,bug,0.85,"Params cannot contain the equals sign Because of https://github.com/drone/drone/blob/master/shared/build/script/script.go#L106 , seems you'll only get the portion of a param up until the = sign. Maybe something as simple as `strings.SplitN(env, ""="", 2)` ?"
2710,harness,https://github.com/harness/harness/issues/2710,Sync Gitlab project in subgroups KO,"When you try to access on Gitlab sub-group project, the Ui respond 404 and the API respond: ",other-file | other-file | other-file | source-file | documentation-file | other-file | other-file | source-file,sync gitlab project subgroups access gitlab sub group project respond api respond,bug,0.85,"Sync Gitlab project in subgroups KO When you try to access on Gitlab sub-group project, the Ui respond 404 and the API respond: "
738,harness,https://github.com/harness/harness/issues/738,delete account - http 400,"I've setup Drone to sync against Bitbucket. When I click the main menu (top left) and select 'Users' I see a single user which is my Bitbucket account. When I click on that, I see on the user edit screen a button labelled 'Delete Account'. Clicking that results in a DELETE request to http://mydrone/api/users/bitbucket.org/<user> which returns HTTP 400 response. I'm guessing this is left-over code from when Drone supported local user accounts?",source-file,delete account http setup drone sync bitbucket click menu top left select users see single user bitbucket account click see user edit screen button labelled delete account clicking results delete http mydrone api users bitbucket user returns http response guessing left drone supported local user accounts,bug,0.9,"delete account - http 400 I've setup Drone to sync against Bitbucket. When I click the main menu (top left) and select 'Users' I see a single user which is my Bitbucket account. When I click on that, I see on the user edit screen a button labelled 'Delete Account'. Clicking that results in a DELETE request to http://mydrone/api/users/bitbucket.org/<user> which returns HTTP 400 response. I'm guessing this is left-over code from when Drone supported local user accounts?"
637,harness,https://github.com/harness/harness/issues/637,"Team Settings, forbidden access?","I just set up a fresh Drone.io instance and added a new team. At some point, when I clicked on ""Team Settings"" from the team-specific dashboard, I get a ""Forbidden"" message and a ""400: Bad Request"" response. This seemed to happen out of the blue. I installed Drone.io using a Docker container which I believe installs the latest version of Drone. Is there something that might cause this? Is there a way for me to delete the team given I no longer have access?",source-file,team settings forbidden access set fresh drone instance added new team point clicked team settings team specific dashboard get forbidden message bad response seemed happen blue installed drone docker container believe installs latest drone something might cause way delete team given longer access,bug,0.85,"Team Settings, forbidden access? I just set up a fresh Drone.io instance and added a new team. At some point, when I clicked on ""Team Settings"" from the team-specific dashboard, I get a ""Forbidden"" message and a ""400: Bad Request"" response. This seemed to happen out of the blue. I installed Drone.io using a Docker container which I believe installs the latest version of Drone. Is there something that might cause this? Is there a way for me to delete the team given I no longer have access?"
3274,harness,https://github.com/harness/harness/issues/3274,gitea oauth: cannot exchange code,"gitea: version [1.17.2] drone log:  {""level"":""error"",""msg"":""oauth: cannot exchange code: gta_xxxxxx: : ""  gitea log:  GET /login/oauth/access_token for 111.22.248.4:0, 405 Method Not Allowed  look [gitea oauth2-provider.md](https://github.com/go-gitea/gitea/blob/711cbcce8d6a193f5738c45861d11cb86b412ec7/docs/content/doc/developers/oauth2-provider.md) Need to change GET to POST",source-file | source-file,gitea oauth cannot exchange gitea drone log level msg oauth cannot exchange gta xxxxxx gitea log get login oauth access token method allowed look gitea oauth provider https github gitea gitea blob cbcce docs content developers oauth provider need get post,bug,0.9,"gitea oauth: cannot exchange code gitea: version [1.17.2] drone log:  {""level"":""error"",""msg"":""oauth: cannot exchange code: gta_xxxxxx: : ""  gitea log:  GET /login/oauth/access_token for 111.22.248.4:0, 405 Method Not Allowed  look [gitea oauth2-provider.md](https://github.com/go-gitea/gitea/blob/711cbcce8d6a193f5738c45861d11cb86b412ec7/docs/content/doc/developers/oauth2-provider.md) Need to change GET to POST"
2047,harness,https://github.com/harness/harness/issues/2047,Restarted build doesn't get correct {{build.link}},"The build only gets correct {{build.link}} when first run, after which {{build.link}} will use `localhost` instead the correct host url",source-file | test-file | test-file,restarted get correct link gets correct link first link use localhost instead correct host url,bug,0.85,"Restarted build doesn't get correct {{build.link}} The build only gets correct {{build.link}} when first run, after which {{build.link}} will use `localhost` instead the correct host url"
495,harness,https://github.com/harness/harness/issues/495,[exp] Gitlab Auth issue,"since last commits, i can't auth via gitlab, got NotFound Ok, go to `server/main.go` and add handler:  go goji.Post(""/api/auth/:host"", handler.GetLogin)  Launch drone, and test: Internal Error  @iMac  drone rvm:(ruby-2.1.3) git:(exp)  ./debian/drone/usr/local/bin/droned --config=./drone.conf 2014/10/01 19:38:16.206024 Starting Goji on [::]:8000 2014/10/01 19:40:23.911282 [iMac-Kirill/224rnGM5Au-000001] Started POST ""/api/auth/git.teobit.ru"" from 127.0.0.1:58796 2014/10/01 19:40:24.265804 [iMac-Kirill/224rnGM5Au-000001] Returning 400 in 354.500938ms 2014/10/01 19:40:24.635285 [iMac-Kirill/224rnGM5Au-000002] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:40:24.635454 [iMac-Kirill/224rnGM5Au-000002] Returning 200 in 142.609us 2014/10/01 19:45:25.809654 [iMac-Kirill/224rnGM5Au-000003] Started POST ""/api/auth/git.teobit.ru"" from 127.0.0.1:58796 2014/10/01 19:45:26.090742 [iMac-Kirill/224rnGM5Au-000003] Returning 400 in 281.071105ms 2014/10/01 19:45:26.497144 [iMac-Kirill/224rnGM5Au-000004] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:45:26.497312 [iMac-Kirill/224rnGM5Au-000004] Returning 200 in 145.985us 2014/10/01 19:45:28.678011 [iMac-Kirill/224rnGM5Au-000005] Started GET ""/gitlab"" from 127.0.0.1:58796 2014/10/01 19:45:28.678176 [iMac-Kirill/224rnGM5Au-000005] Returning 200 in 139.485us 2014/10/01 19:45:28.861238 [iMac-Kirill/224rnGM5Au-000006] Started GET ""/api/user"" from 127.0.0.1:58796 invalid token 2014/10/01 19:45:28.861321 [iMac-Kirill/224rnGM5Au-000006] Returning 401 in 64.215us 2014/10/01 19:45:29.041267 [iMac-Kirill/224rnGM5Au-000007] Started GET ""/api/stream/user"" from 127.0.0.1:63467 2014/10/01 19:45:29.137947 [iMac-Kirill/224rnGM5Au-000008] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:45:29.138098 [iMac-Kirill/224rnGM5Au-000008] Returning 200 in 124.012us 2014/10/01 19:45:30.498867 [iMac-Kirill/224rnGM5Au-000009] Started POST ""/api/auth/gitlab.com"" from 127.0.0.1:58796 2014/10/01 19:45:31.000913 [iMac-Kirill/224rnGM5Au-000009] panic: interface conversion: interface is nil, not capability.Capability /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/recoverer.go:24 (0x42cd86b) func.006: debug.PrintStack() /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/panic.c:248 (0x40cbdfd) panic: runtimenewstackcall(d->fn, (byte*)d->args, d->siz); /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/iface.goc:292 (0x40dea10) assertE2Tret: runtimepanic(err); /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/iface.goc:280 (0x40de990) assertE2T: assertE2Tret(t, e, (byte*)&retbase); /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/capability/context.go:31 (0x42af94c) FromContext: return c.Value(reqkey).(Capability) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/capability/capability.go:22 (0x42af871) Enabled: return FromContext(c).Get(key) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/handler/login.go:51 (0x415295d) GetLogin: if capability.Enabled(ctx, capability.Registration) == false { /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/web.go:127 (0x416e894) HandlerFunc.ServeHTTPC: h(c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/router.go:210 (0x416d5a9) routeMachine.route: rm.routes[si].handler.ServeHTTPC(*c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/router.go:250 (0x416d91a) (*router).route: methods, ok := rm.route(c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware.go:94 (0x416e96f) func.002: router.route(&cs.C, w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/middleware/user.go:21 (0x415c819) func.005: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/middleware/header.go:25 (0x415b9bf) func.001: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/main.go:190 (0x40bd6d5) func.002: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/options.go:70 (0x42cd7ab) func.004: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/recoverer.go:29 (0x42cda29) func.007: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/logger.go:28 (0x42cd4a0) func.002: h.ServeHTTP(lw, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/request_id.go:68 (0x42cdd5f) func.008: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware.go:51 (0x4169b9f) (*cStack).ServeHTTP: s.m.ServeHTTP(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/mux.go:77 (0x416ad1f) (*Mux).ServeHTTP: stack.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1511 (0x412ca83) (*ServeMux).ServeHTTP: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1673 (0x412d3af) serverHandler.ServeHTTP: handler.ServeHTTP(rw, req) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1174 (0x412ae2e) (*conn).serve: serverHandler{c.server}.ServeHTTP(w, w.req) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/proc.c:1445 (0x40d0620) goexit: runtimegoexit(void) ",other-file | other-file | other-file | source-file | documentation-file | other-file | other-file,exp gitlab auth since last commits auth via gitlab got notfound server handler goji post api auth host handler getlogin launch drone internal imac drone rvm ruby git exp debian drone local droned config drone conf starting goji imac kirill rngm started post api auth git teobit imac kirill rngm returning imac kirill rngm started get favicon ico imac kirill rngm returning imac kirill rngm started post api auth git teobit imac kirill rngm returning imac kirill rngm started get favicon ico imac kirill rngm returning imac kirill rngm started get gitlab imac kirill rngm returning imac kirill rngm started get api user invalid token imac kirill rngm returning imac kirill rngm started get api stream user imac kirill rngm started get favicon ico imac kirill rngm returning imac kirill rngm started post api auth gitlab imac kirill rngm panic interface conversion interface nil capability capability users bugagazavr documents github zenazn goji web middleware recoverer func printstack local cellar libexec pkg runtime panic cbdfd panic runtimenewstackcall byte args siz local cellar libexec pkg runtime iface goc dea asserte tret runtimepanic err local cellar libexec pkg runtime iface goc asserte asserte tret byte retbase users bugagazavr documents github drone drone server capability context fromcontext return value reqkey capability users bugagazavr documents github drone drone server capability capability enabled return fromcontext get key users bugagazavr documents github drone drone server handler login getlogin capability enabled ctx capability registration false users bugagazavr documents github zenazn goji web web handlerfunc servehttpc users bugagazavr documents github zenazn goji web router routemachine route routes handler servehttpc users bugagazavr documents github zenazn goji web router router route methods route users bugagazavr documents github zenazn goji web middleware func router route local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github drone drone server middleware user func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github drone drone server middleware header func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github drone drone server func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github zenazn goji web middleware options func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github zenazn goji web middleware recoverer cda func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github zenazn goji web middleware logger func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github zenazn goji web middleware cdd func servehttp local cellar libexec pkg http server handlerfunc servehttp users bugagazavr documents github zenazn goji web middleware cstack servehttp servehttp users bugagazavr documents github zenazn goji web mux mux servehttp stack servehttp local cellar libexec pkg http server servemux servehttp servehttp local cellar libexec pkg http server serverhandler servehttp handler servehttp req local cellar libexec pkg http server conn serve serverhandler server servehttp req local cellar libexec pkg runtime proc goexit runtimegoexit void,bug,0.95,"[exp] Gitlab Auth issue since last commits, i can't auth via gitlab, got NotFound Ok, go to `server/main.go` and add handler:  go goji.Post(""/api/auth/:host"", handler.GetLogin)  Launch drone, and test: Internal Error  @iMac  drone rvm:(ruby-2.1.3) git:(exp)  ./debian/drone/usr/local/bin/droned --config=./drone.conf 2014/10/01 19:38:16.206024 Starting Goji on [::]:8000 2014/10/01 19:40:23.911282 [iMac-Kirill/224rnGM5Au-000001] Started POST ""/api/auth/git.teobit.ru"" from 127.0.0.1:58796 2014/10/01 19:40:24.265804 [iMac-Kirill/224rnGM5Au-000001] Returning 400 in 354.500938ms 2014/10/01 19:40:24.635285 [iMac-Kirill/224rnGM5Au-000002] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:40:24.635454 [iMac-Kirill/224rnGM5Au-000002] Returning 200 in 142.609us 2014/10/01 19:45:25.809654 [iMac-Kirill/224rnGM5Au-000003] Started POST ""/api/auth/git.teobit.ru"" from 127.0.0.1:58796 2014/10/01 19:45:26.090742 [iMac-Kirill/224rnGM5Au-000003] Returning 400 in 281.071105ms 2014/10/01 19:45:26.497144 [iMac-Kirill/224rnGM5Au-000004] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:45:26.497312 [iMac-Kirill/224rnGM5Au-000004] Returning 200 in 145.985us 2014/10/01 19:45:28.678011 [iMac-Kirill/224rnGM5Au-000005] Started GET ""/gitlab"" from 127.0.0.1:58796 2014/10/01 19:45:28.678176 [iMac-Kirill/224rnGM5Au-000005] Returning 200 in 139.485us 2014/10/01 19:45:28.861238 [iMac-Kirill/224rnGM5Au-000006] Started GET ""/api/user"" from 127.0.0.1:58796 invalid token 2014/10/01 19:45:28.861321 [iMac-Kirill/224rnGM5Au-000006] Returning 401 in 64.215us 2014/10/01 19:45:29.041267 [iMac-Kirill/224rnGM5Au-000007] Started GET ""/api/stream/user"" from 127.0.0.1:63467 2014/10/01 19:45:29.137947 [iMac-Kirill/224rnGM5Au-000008] Started GET ""/favicon.ico"" from 127.0.0.1:58796 2014/10/01 19:45:29.138098 [iMac-Kirill/224rnGM5Au-000008] Returning 200 in 124.012us 2014/10/01 19:45:30.498867 [iMac-Kirill/224rnGM5Au-000009] Started POST ""/api/auth/gitlab.com"" from 127.0.0.1:58796 2014/10/01 19:45:31.000913 [iMac-Kirill/224rnGM5Au-000009] panic: interface conversion: interface is nil, not capability.Capability /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/recoverer.go:24 (0x42cd86b) func.006: debug.PrintStack() /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/panic.c:248 (0x40cbdfd) panic: runtimenewstackcall(d->fn, (byte*)d->args, d->siz); /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/iface.goc:292 (0x40dea10) assertE2Tret: runtimepanic(err); /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/iface.goc:280 (0x40de990) assertE2T: assertE2Tret(t, e, (byte*)&retbase); /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/capability/context.go:31 (0x42af94c) FromContext: return c.Value(reqkey).(Capability) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/capability/capability.go:22 (0x42af871) Enabled: return FromContext(c).Get(key) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/handler/login.go:51 (0x415295d) GetLogin: if capability.Enabled(ctx, capability.Registration) == false { /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/web.go:127 (0x416e894) HandlerFunc.ServeHTTPC: h(c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/router.go:210 (0x416d5a9) routeMachine.route: rm.routes[si].handler.ServeHTTPC(*c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/router.go:250 (0x416d91a) (*router).route: methods, ok := rm.route(c, w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware.go:94 (0x416e96f) func.002: router.route(&cs.C, w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/middleware/user.go:21 (0x415c819) func.005: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/middleware/header.go:25 (0x415b9bf) func.001: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/drone/drone/server/main.go:190 (0x40bd6d5) func.002: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/options.go:70 (0x42cd7ab) func.004: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/recoverer.go:29 (0x42cda29) func.007: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/logger.go:28 (0x42cd4a0) func.002: h.ServeHTTP(lw, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware/request_id.go:68 (0x42cdd5f) func.008: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1235 (0x412b2b0) HandlerFunc.ServeHTTP: f(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/middleware.go:51 (0x4169b9f) (*cStack).ServeHTTP: s.m.ServeHTTP(w, r) /Users/bugagazavr/Documents/Go/src/github.com/zenazn/goji/web/mux.go:77 (0x416ad1f) (*Mux).ServeHTTP: stack.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1511 (0x412ca83) (*ServeMux).ServeHTTP: h.ServeHTTP(w, r) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1673 (0x412d3af) serverHandler.ServeHTTP: handler.ServeHTTP(rw, req) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/net/http/server.go:1174 (0x412ae2e) (*conn).serve: serverHandler{c.server}.ServeHTTP(w, w.req) /usr/local/Cellar/go/1.3.2/libexec/src/pkg/runtime/proc.c:1445 (0x40d0620) goexit: runtimegoexit(void) "
942,harness,https://github.com/harness/harness/issues/942,Drone doesn't work with Gitlab 7.9+,"As @kowalczykp and others have noted on Gitter, Drone does not appear to work with the latest versions of Gitlab. Drone will issue a 400 Bad Request for all incoming webhooks. Manually verified with tcpflow on ubuntu. `tcpflow -p -c -i eth0 port 80` Seems to stem from the gitlab go library. https://github.com/Bugagazavr/go-gitlab-client/blob/master/hook_payload.go#L93 Indirectly the message reads. _""Invalid hook received, payload format not recognized.""_",other-file | other-file,drone work gitlab kowalczykp others noted gitter drone appear work latest versions gitlab drone bad incoming webhooks manually verified tcpflow ubuntu tcpflow eth port seems stem gitlab library https github bugagazavr gitlab client blob hook payload indirectly message reads invalid hook received payload format recognized,bug,0.9,"Drone doesn't work with Gitlab 7.9+ As @kowalczykp and others have noted on Gitter, Drone does not appear to work with the latest versions of Gitlab. Drone will issue a 400 Bad Request for all incoming webhooks. Manually verified with tcpflow on ubuntu. `tcpflow -p -c -i eth0 port 80` Seems to stem from the gitlab go library. https://github.com/Bugagazavr/go-gitlab-client/blob/master/hook_payload.go#L93 Indirectly the message reads. _""Invalid hook received, payload format not recognized.""_"
1086,harness,https://github.com/harness/harness/issues/1086,"[Drone, Gitlab] ""Activate Now"" returns 500 Internal Server Error","Gitlab version: 7.12.2 Steps: - Setup Drone in gitlab under applications  Name: Drone Callback URL: http://drone.[myserver].com/api/auth/gitlab.com  - Setup drone.yml with client and secret keys to talk to gitlab  [gitlab] url = ""http://gitlab.[myserver].com"" client = ""exampleclientkey"" secret = ""examplesecretkey"" skip_verify=false open=false  - Activate returns:  POST http://drone.[myserver].com/api/repos/gitlab.[myserver].com/user/test 500 (Internal Server Error)  Logs: - Nothing in the apache log for gitlab - Not sure where else to look Cheers",other-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | source-file | other-file | documentation-file | other-file | other-file | other-file | source-file | source-file | source-file,drone gitlab activate returns internal server gitlab steps setup drone gitlab applications name drone callback url http drone myserver api auth gitlab setup drone yml client secret keys talk gitlab gitlab url http gitlab myserver client exampleclientkey secret examplesecretkey skip verify false open false activate returns post http drone myserver api repos gitlab myserver user internal server logs nothing apache log gitlab sure else look cheers,bug,0.9,"[Drone, Gitlab] ""Activate Now"" returns 500 Internal Server Error Gitlab version: 7.12.2 Steps: - Setup Drone in gitlab under applications  Name: Drone Callback URL: http://drone.[myserver].com/api/auth/gitlab.com  - Setup drone.yml with client and secret keys to talk to gitlab  [gitlab] url = ""http://gitlab.[myserver].com"" client = ""exampleclientkey"" secret = ""examplesecretkey"" skip_verify=false open=false  - Activate returns:  POST http://drone.[myserver].com/api/repos/gitlab.[myserver].com/user/test 500 (Internal Server Error)  Logs: - Nothing in the apache log for gitlab - Not sure where else to look Cheers"
809,harness,https://github.com/harness/harness/issues/809,invalid character '<' looking for beginning of value,"While trying to login using gitlab.com in drone, i get the following error  2015/01/13 14:32:18 invalid character '<' looking for beginning of value  I launched drone this way  DRONE_SERVER_PORT=localhost:9876 DRONE_GITLAB_URL=""http://gitlab.com"" droned  i tried using the Dockerfile and also using the debian package on ubuntu14.04 . Btw i also tried to authenticate manually against https://gitlab.com/api/v3/session and it works, so it does not seems to be related to wrong credentials. Any ideas?",source-file | test-file | source-file | test-file | test-file,invalid character looking beginning value trying login gitlab drone get following invalid character looking beginning value launched drone way drone server port localhost drone gitlab url http gitlab droned tried dockerfile also debian package ubuntu btw also tried authenticate manually https gitlab api session works seems related wrong credentials ideas,bug,0.85,"invalid character '<' looking for beginning of value While trying to login using gitlab.com in drone, i get the following error  2015/01/13 14:32:18 invalid character '<' looking for beginning of value  I launched drone this way  DRONE_SERVER_PORT=localhost:9876 DRONE_GITLAB_URL=""http://gitlab.com"" droned  i tried using the Dockerfile and also using the debian package on ubuntu14.04 . Btw i also tried to authenticate manually against https://gitlab.com/api/v3/session and it works, so it does not seems to be related to wrong credentials. Any ideas?"
2010,harness,https://github.com/harness/harness/issues/2010,Show errors on webhooks in user interface,I had a wrong indent in my .drone.yml. This resulted in a very unclear HTTP 400 response from Drone on my webhook in Bitbucket. I can figure 2 solutions: - either add the error to the HTTP 400 response - or show an attempted build in the user interface of Drone with what's going on,source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,show errors webhooks user interface wrong indent drone yml resulted unclear http response drone webhook bitbucket figure solutions either http response show attempted user interface drone going,bug,0.85,Show errors on webhooks in user interface I had a wrong indent in my .drone.yml. This resulted in a very unclear HTTP 400 response from Drone on my webhook in Bitbucket. I can figure 2 solutions: - either add the error to the HTTP 400 response - or show an attempted build in the user interface of Drone with what's going on
2977,harness,https://github.com/harness/harness/issues/2977,No completed webhook sent,"Based on the [docs](https://docs.drone.io/webhooks/examples/#completed) there should be a webhook with a completed action. Saw [this](https://github.com/drone/drone/pull/2923) PR about implementing it. Am I missing something, or it is really not implemented correctly?",source-file | source-file | source-file | source-file | source-file | source-file | source-file | database-file | database-file | database-file | database-file | source-file | source-file,completed webhook sent based docs https docs drone webhooks examples completed webhook completed action saw https github drone drone implementing missing something really implemented correctly,bug,0.85,"No completed webhook sent Based on the [docs](https://docs.drone.io/webhooks/examples/#completed) there should be a webhook with a completed action. Saw [this](https://github.com/drone/drone/pull/2923) PR about implementing it. Am I missing something, or it is really not implemented correctly?"
2650,harness,https://github.com/harness/harness/issues/2650,Can't activate a repository from Bitbucket private account,"**Configuration:** Private bitbucket account Host: Ubuntu 18.04.2 LTS Docker version: 18.09.4 Docker run command for drone:  docker run \ --volume=/drone/data:/data \ --env=DRONE_BITBUCKET_CLIENT_ID= \ --env=DRONE_BITBUCKET_CLIENT_SECRET= \ --env=DRONE_RPC_SECRET= \ --env=DRONE_SERVER_HOST=our.domain.io \ --env=DRONE_SERVER_PROTO=http \ --env=DRONE_TLS_AUTOCERT=false \ --publish=80:80 \ --publish=443:443 \ --restart=always \ --detach=true \ --name=drone-server \ drone/drone:1  Issue steps: 1. Go to our drone url: our.domain.io 2. See the list of repositories (good) 3. Click on one repo 4. Click on 'activate' Expected: 1. connect to the repo for configuration actual: Get GUI message: ""There was a problem enabling your repository. Not Found."" Details from Chrome console: Request URL: http://our.domain.io/api/repos/project/reponame Request Method: POST Status Code: 404 Not Found Remote Address: xx.xx.xx.xx:80 Referrer Policy: no-referrer-when-downgrade",source-file,activate repository bitbucket private account configuration private bitbucket account host ubuntu lts docker docker command drone docker volume drone data data env drone bitbucket client env drone bitbucket client secret env drone rpc secret env drone server host domain env drone server proto http env drone tls autocert false publish publish restart always detach true name drone server drone drone steps drone url domain see list repositories good click one repo click activate expected connect repo configuration actual get gui message enabling repository found details chrome console url http domain api repos project reponame method post status found remote address referrer policy referrer downgrade,bug,0.9,"Can't activate a repository from Bitbucket private account **Configuration:** Private bitbucket account Host: Ubuntu 18.04.2 LTS Docker version: 18.09.4 Docker run command for drone:  docker run \ --volume=/drone/data:/data \ --env=DRONE_BITBUCKET_CLIENT_ID= \ --env=DRONE_BITBUCKET_CLIENT_SECRET= \ --env=DRONE_RPC_SECRET= \ --env=DRONE_SERVER_HOST=our.domain.io \ --env=DRONE_SERVER_PROTO=http \ --env=DRONE_TLS_AUTOCERT=false \ --publish=80:80 \ --publish=443:443 \ --restart=always \ --detach=true \ --name=drone-server \ drone/drone:1  Issue steps: 1. Go to our drone url: our.domain.io 2. See the list of repositories (good) 3. Click on one repo 4. Click on 'activate' Expected: 1. connect to the repo for configuration actual: Get GUI message: ""There was a problem enabling your repository. Not Found."" Details from Chrome console: Request URL: http://our.domain.io/api/repos/project/reponame Request Method: POST Status Code: 404 Not Found Remote Address: xx.xx.xx.xx:80 Referrer Policy: no-referrer-when-downgrade"
2763,harness,https://github.com/harness/harness/issues/2763,Drone 1.X: Secrets per image,In drone 0.8 there was possibility to add Secrets scoped to certain images. This would allow only trusted images to use secrets. Now in Drone 1.0 when i try add secret for image i am getting following error:  flag provided but not defined: -image  This allows everyone to create a custom image and read all the secrets from it by putting them in **.drone.yml** file which can be considered as a security issue.,source-file | source-file | source-file | source-file | source-file | source-file | database-file | database-file | database-file | database-file | source-file | source-file | source-file,drone secrets per image drone possibility secrets scoped certain images would allow trusted images use secrets drone secret image getting following flag provided defined image allows everyone create custom image read secrets putting drone yml considered security,bug,0.85,Drone 1.X: Secrets per image In drone 0.8 there was possibility to add Secrets scoped to certain images. This would allow only trusted images to use secrets. Now in Drone 1.0 when i try add secret for image i am getting following error:  flag provided but not defined: -image  This allows everyone to create a custom image and read all the secrets from it by putting them in **.drone.yml** file which can be considered as a security issue.
474,harness,https://github.com/harness/harness/issues/474,"""Method Not Allowed"" after login when clicking ""Rebuild"" with expired session","When clicking ""Rebuild"" with an expired session the POST request redirects you to /login with the return_url set to the URL of post request. And after the login it does a GET request to that URL which is declined with ""Method Not Allowed"".",other-file | other-file | source-file | other-file | source-file | documentation-file | other-file | other-file,method allowed login clicking rebuild expired session clicking rebuild expired session post redirects login return url set url post login get url declined method allowed,bug,0.9,"""Method Not Allowed"" after login when clicking ""Rebuild"" with expired session When clicking ""Rebuild"" with an expired session the POST request redirects you to /login with the return_url set to the URL of post request. And after the login it does a GET request to that URL which is declined with ""Method Not Allowed""."
525,harness,https://github.com/harness/harness/issues/525,exp not working after initial auth w/ github enterprise [0.3],"After authorizing against github enterprise I am redirected to a blank page with the following log (with actual code and state of course)  2014/10/09 00:01:59.800599 [47744fe7df1d/brZBwyUGPx-000025] Started GET ""/api/auth/enterprise.github.com?code=yyyy&state=xxxx"" from 10.0.2.2:63002 2014/10/09 00:01:59.800654 [47744fe7df1d/brZBwyUGPx-000025] Returning 400 in 37.051us  This looks like the same error I was receiving when trying to use 0.3 against github.com without a verified email. Is there something looking for specifically a verified email? /user/emails is sending back a valid email, but verified is set to false.",other-file | other-file | source-file | other-file | other-file | other-file | other-file | other-file,exp working initial auth github enterprise authorizing github enterprise redirected blank page following log actual state course brzbwyugpx started get api auth enterprise github yyyy state xxxx brzbwyugpx returning looks like receiving trying use github without verified email something looking specifically verified email user emails sending back valid email verified set false,bug,0.85,"exp not working after initial auth w/ github enterprise [0.3] After authorizing against github enterprise I am redirected to a blank page with the following log (with actual code and state of course)  2014/10/09 00:01:59.800599 [47744fe7df1d/brZBwyUGPx-000025] Started GET ""/api/auth/enterprise.github.com?code=yyyy&state=xxxx"" from 10.0.2.2:63002 2014/10/09 00:01:59.800654 [47744fe7df1d/brZBwyUGPx-000025] Returning 400 in 37.051us  This looks like the same error I was receiving when trying to use 0.3 against github.com without a verified email. Is there something looking for specifically a verified email? /user/emails is sending back a valid email, but verified is set to false."
3416,harness,https://github.com/harness/harness/issues/3416,login error Not Found,"Gitness cannot log in again after running for a period of time, account lost  docker run -d --name gitness --restart always \ -e GITNESS_PRINCIPAL_ADMIN_PASSWORD=gitness \ -e GITNESS_USER_SIGNUP_ENABLED=false \ -p 3000:3000 \ -v /var/run/docker.sock:/var/run/docker.sock \ -v /data/gitness:/data \ harness/gitness ",source-file,login found gitness cannot log running period time account lost docker name gitness restart always gitness principal admin password gitness gitness user signup enabled false var docker sock var docker sock data gitness data gitness,bug,0.8,"login error Not Found Gitness cannot log in again after running for a period of time, account lost  docker run -d --name gitness --restart always \ -e GITNESS_PRINCIPAL_ADMIN_PASSWORD=gitness \ -e GITNESS_USER_SIGNUP_ENABLED=false \ -p 3000:3000 \ -v /var/run/docker.sock:/var/run/docker.sock \ -v /data/gitness:/data \ harness/gitness "
1184,harness,https://github.com/harness/harness/issues/1184,github `orgs` restriction not letting people in,"After disabling self-registration, I updated to  GITHUB_ORGS=""ensime,fommil"" REMOTE_CONFIG=""https://github.com?client_id=$CLIENT&client_secret=$SECRET&orgs=$GITHUB_ORGS&open=false""  (of which one is me and I am an owner of `ensime`) but when I log in, I see this  Login is restricted to approved organization members only  so I'm guessing org restriction is currently not working.",documentation-file | documentation-file | source-file,github orgs restriction letting people disabling self registration updated github orgs ensime fommil remote config https github client client client secret secret orgs github orgs open false one owner ensime log see login restricted approved organization members guessing restriction currently working,bug,0.85,"github `orgs` restriction not letting people in After disabling self-registration, I updated to  GITHUB_ORGS=""ensime,fommil"" REMOTE_CONFIG=""https://github.com?client_id=$CLIENT&client_secret=$SECRET&orgs=$GITHUB_ORGS&open=false""  (of which one is me and I am an owner of `ensime`) but when I log in, I see this  Login is restricted to approved organization members only  so I'm guessing org restriction is currently not working."
2251,harness,https://github.com/harness/harness/issues/2251,/api/info/queue reports running_count > 0 when there are no running builds,"version 0.7.3+build.1139 I observe the following: /api/info/queue returns  { ""pending"": null, ""running"": [ { ""id"": ""191"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""171"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""199"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""183"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""203"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""195"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } } ], ""stats"": { ""worker_count"": 12, ""pending_count"": 0, ""running_count"": 6, ""completed_count"": 0 } }  Note `""running_count"": 6` But there are no builds, and /api/builds doesn't report any:  [] ",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,api queue reports running count running builds observe following api queue returns pending null running data labels platform linux amd data labels platform linux amd data labels platform linux amd data labels platform linux amd data labels platform linux amd data labels platform linux amd stats worker count pending count running count completed count note running count builds api builds report,bug,0.95,"/api/info/queue reports running_count > 0 when there are no running builds version 0.7.3+build.1139 I observe the following: /api/info/queue returns  { ""pending"": null, ""running"": [ { ""id"": ""191"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""171"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""199"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""183"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""203"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } }, { ""id"": ""195"", ""data"": """", ""labels"": { ""platform"": ""linux/amd64"" } } ], ""stats"": { ""worker_count"": 12, ""pending_count"": 0, ""running_count"": 6, ""completed_count"": 0 } }  Note `""running_count"": 6` But there are no builds, and /api/builds doesn't report any:  [] "
1022,harness,https://github.com/harness/harness/issues/1022,Update private repo params as structure JSON (not yaml string),"Content of params (private variable) during update is expected yaml string format . It would be easier if params KVP can be accepted in json format. Below returns : 500 Internal Server Error  curl -v -X PUT ""http://droneio.xyz.com/api/repos/github.com/npateriya/godemo?access_token=XYZ"" -d `{params: { hello: world } }`  Yaml param for single variable works but not sure how to embed multiple KVP yaml in json.  curl -v -X PUT ""http://droneio.xyz.com/api/repos/github.com/npateriya/godemo?access_token=XYZ"" -d `{params: hello: world }` ",test-file,private repo params structure json yaml string content params private variable expected yaml string format would easier params kvp accepted json format returns internal server curl put http droneio xyz api repos github npateriya godemo access token xyz params hello world yaml param single variable works sure embed multiple kvp yaml json curl put http droneio xyz api repos github npateriya godemo access token xyz params hello world,bug,0.85,"Update private repo params as structure JSON (not yaml string) Content of params (private variable) during update is expected yaml string format . It would be easier if params KVP can be accepted in json format. Below returns : 500 Internal Server Error  curl -v -X PUT ""http://droneio.xyz.com/api/repos/github.com/npateriya/godemo?access_token=XYZ"" -d `{params: { hello: world } }`  Yaml param for single variable works but not sure how to embed multiple KVP yaml in json.  curl -v -X PUT ""http://droneio.xyz.com/api/repos/github.com/npateriya/godemo?access_token=XYZ"" -d `{params: hello: world }` "
481,harness,https://github.com/harness/harness/issues/481,"0.3 Release, POST to /v1/remotes is not found","On latest build I have error, when trying to configure Github/Github enterprise:  Request URL:http://drone-dev.yandex.net/v1/remotes Request Method:POST Status Code:404 Not Found  May be it caused by wrong URL (without concrete remote plugin) passed to client.",source-file,post remotes found latest trying configure github github enterprise url http drone yandex remotes method post status found may caused wrong url without concrete remote plugin passed client,bug,0.9,"0.3 Release, POST to /v1/remotes is not found On latest build I have error, when trying to configure Github/Github enterprise:  Request URL:http://drone-dev.yandex.net/v1/remotes Request Method:POST Status Code:404 Not Found  May be it caused by wrong URL (without concrete remote plugin) passed to client."
1173,harness,https://github.com/harness/harness/issues/1173,Inconsistent use of `*_url` in JSON,"We currently have an inconsistent use of `_url` prefix in our JSON data. For example, we use `link_url` and `clone_url` in some cases, and use `avatar` instead of `avatar_url` in other cases. Avatar may be the only example, but we need to audit and fix so that we can finalize the REST api",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,inconsistent use url json currently inconsistent use url prefix json data example use link url clone url cases use avatar instead avatar url cases avatar may example need audit finalize rest api,bug,0.9,"Inconsistent use of `*_url` in JSON We currently have an inconsistent use of `_url` prefix in our JSON data. For example, we use `link_url` and `clone_url` in some cases, and use `avatar` instead of `avatar_url` in other cases. Avatar may be the only example, but we need to audit and fix so that we can finalize the REST api"
1775,harness,https://github.com/harness/harness/issues/1775,expose errors in oauth2 authorization code grant,"Right now when the oauth2 provider (ie Bitbucket) fails to grant an authorization code an `error` query parameter is returned, as defined in the oauth2 specification: https://tools.ietf.org/html/rfc6749#section-4.1.2.1 Drone currently looks for the `code` and re-directs, without checking for the `error` query parameter. In error scenarios (misconfiguration for example) this can result in redirect loops, and by not catching and exposing the error it can be difficult to debug. We should therefore start catching and returning the error. This is the block of code: https://github.com/drone/drone/blob/master/remote/bitbucket/bitbucket.go#L46:L50 Which could be adjusted to something like this:  diff package bitbucket import ( + ""errors"" ""fmt"" ""net/http"" ""net/url""   diff code := r.FormValue(""code"") + if err := r.FormValue(""error""); err != """" { + return nil, errors.New(err) + } if len(code) == 0 { http.Redirect(w, r, config.AuthCodeURL(""drone""), http.StatusSeeOther) return nil, nil }  Note that this should be adjusted in both the GitHub and Bitbucket implementations.",source-file | test-file | source-file | source-file | test-file | source-file | source-file,expose errors oauth authorization grant right oauth provider bitbucket fails grant authorization query parameter returned defined oauth specification https tools ietf html rfc section drone currently looks directs without checking query parameter scenarios misconfiguration example result redirect loops catching exposing difficult therefore start catching returning block https github drone drone blob remote bitbucket bitbucket could adjusted something like diff package bitbucket import errors fmt http url diff formvalue err formvalue err return nil errors new err len http redirect config authcodeurl drone http statusseeother return nil nil note adjusted github bitbucket implementations,bug,0.9,"expose errors in oauth2 authorization code grant Right now when the oauth2 provider (ie Bitbucket) fails to grant an authorization code an `error` query parameter is returned, as defined in the oauth2 specification: https://tools.ietf.org/html/rfc6749#section-4.1.2.1 Drone currently looks for the `code` and re-directs, without checking for the `error` query parameter. In error scenarios (misconfiguration for example) this can result in redirect loops, and by not catching and exposing the error it can be difficult to debug. We should therefore start catching and returning the error. This is the block of code: https://github.com/drone/drone/blob/master/remote/bitbucket/bitbucket.go#L46:L50 Which could be adjusted to something like this:  diff package bitbucket import ( + ""errors"" ""fmt"" ""net/http"" ""net/url""   diff code := r.FormValue(""code"") + if err := r.FormValue(""error""); err != """" { + return nil, errors.New(err) + } if len(code) == 0 { http.Redirect(w, r, config.AuthCodeURL(""drone""), http.StatusSeeOther) return nil, nil }  Note that this should be adjusted in both the GitHub and Bitbucket implementations."
31,harness,https://github.com/harness/harness/issues/31,More verbose logs and server answers,"This is low priority, but seems like drone doesn't like to tell user what is wrong. For example it only sends error messages like `Not found` or `Unauthorized` without context.",config-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file | test-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,verbose logs server answers low priority seems like drone like tell user wrong example sends messages like found unauthorized without context,bug,0.8,"More verbose logs and server answers This is low priority, but seems like drone doesn't like to tell user what is wrong. For example it only sends error messages like `Not found` or `Unauthorized` without context."
2524,harness,https://github.com/harness/harness/issues/2524,1.0.0.-rc.1 agent - invalid character '<' looking for beginning of value,"Running agent rc.1 throws the following error in logs **{""level"":""error"",""error"":""invalid character '<' looking for beginning of value"",""platform"":""linux/amd64"",""time"":""2018-11-11T20:07:46Z"",""message"":""cannot get queue item""}** Happens regardless of specified platform",source-file | source-file | source-file,agent invalid character looking beginning value running agent throws following logs level invalid character looking beginning value platform linux amd time message cannot get queue item happens regardless specified platform,bug,0.9,"1.0.0.-rc.1 agent - invalid character '<' looking for beginning of value Running agent rc.1 throws the following error in logs **{""level"":""error"",""error"":""invalid character '<' looking for beginning of value"",""platform"":""linux/amd64"",""time"":""2018-11-11T20:07:46Z"",""message"":""cannot get queue item""}** Happens regardless of specified platform"
937,harness,https://github.com/harness/harness/issues/937,Cannot disable gitlab repo.,"I cannot disable any gitlab repo on my drone account:  drone disable git-server.de/nils/python-skeleton  does nothing, does not return anything, does not show any effect either. same with  drone delete git-server.de/nils/python-skeleton  however  drone status git-server.de/nils/python-skeleton  shows me the status of the last build.",source-file,cannot disable gitlab repo cannot disable gitlab repo drone account drone disable git server nils python skeleton nothing return anything show effect either drone delete git server nils python skeleton however drone status git server nils python skeleton shows status last,bug,0.85,"Cannot disable gitlab repo. I cannot disable any gitlab repo on my drone account:  drone disable git-server.de/nils/python-skeleton  does nothing, does not return anything, does not show any effect either. same with  drone delete git-server.de/nils/python-skeleton  however  drone status git-server.de/nils/python-skeleton  shows me the status of the last build."
2193,harness,https://github.com/harness/harness/issues/2193,Panic when trying to read non-existent vault secret,"If you try to reference a vault secret that does not exist in vault, drone will then panic and put the build in a forever pending state. This is with `drone/drone:0.8.0`. The stack trace:  Sep 5 21:46:11 drone6-server drone6[6307]: runtime error: invalid memory address or nil pointer dereference Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/panic.go:489 (0x42f29f) Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/panic.go:63 (0x42e14e) Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/signal_unix.go:290 (0x44430f) Sep 5 21:46:11 drone6-server drone6[6307]: /go/src/github.com/drone/drone/extras/secrets/vault.go:93 (0xa160c6) Sep 5 21:46:11 drone6-server drone6[6307]: /go/src/github.com/drone/drone/extras/secrets/vault.go:52 (0xa15c53) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/server/hook.go:222 (0x96871e) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/token/token.go:17 (0x8d3ff0) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/session/user.go:68 (0x8d3492) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/store.go:15 (0x9cd767) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/contrib/ginrus/ginrus.go:26 (0x9cdbbf) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/header/header.go:25 (0x8cb040) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/header/header.go:17 (0x8cafe9) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/recovery.go:45 (0x8c8caa) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/gin.go:284 (0x8c0850) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/gin.go:265 (0x8c016b) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/net/http/server.go:2568 (0x6ceb92) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/net/http/server.go:1825 (0x6cad32) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/runtime/asm_amd64.s:2197 (0x45dda1) ",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,panic trying read non existent vault secret reference vault secret exist vault drone panic put forever pending state drone drone stack trace sep drone server drone runtime invalid memory address nil pointer dereference sep drone server drone local runtime panic sep drone server drone local runtime panic sep drone server drone local runtime signal unix sep drone server drone github drone drone extras secrets vault sep drone server drone github drone drone extras secrets vault sep drone server drone github drone drone server hook sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone router middleware token token sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone router middleware session user sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone router middleware store sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone vendor github gin gonic contrib ginrus ginrus cdbbf sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone router middleware header header sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone router middleware header header cafe sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone vendor github gin gonic gin recovery caa sep drone server drone github drone drone vendor github gin gonic gin context baa sep drone server drone github drone drone vendor github gin gonic gin gin sep drone server drone github drone drone vendor github gin gonic gin gin sep drone server drone local http server ceb sep drone server drone local http server cad sep drone server drone local runtime asm amd dda,bug,0.9,"Panic when trying to read non-existent vault secret If you try to reference a vault secret that does not exist in vault, drone will then panic and put the build in a forever pending state. This is with `drone/drone:0.8.0`. The stack trace:  Sep 5 21:46:11 drone6-server drone6[6307]: runtime error: invalid memory address or nil pointer dereference Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/panic.go:489 (0x42f29f) Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/panic.go:63 (0x42e14e) Sep 5 21:46:11 drone6-server drone6[6307]: /usr/local/go/src/runtime/signal_unix.go:290 (0x44430f) Sep 5 21:46:11 drone6-server drone6[6307]: /go/src/github.com/drone/drone/extras/secrets/vault.go:93 (0xa160c6) Sep 5 21:46:11 drone6-server drone6[6307]: /go/src/github.com/drone/drone/extras/secrets/vault.go:52 (0xa15c53) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/server/hook.go:222 (0x96871e) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/token/token.go:17 (0x8d3ff0) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/session/user.go:68 (0x8d3492) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/store.go:15 (0x9cd767) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/contrib/ginrus/ginrus.go:26 (0x9cdbbf) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/header/header.go:25 (0x8cb040) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/router/middleware/header/header.go:17 (0x8cafe9) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/recovery.go:45 (0x8c8caa) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/context.go:97 (0x8baa1a) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/gin.go:284 (0x8c0850) Sep 5 21:46:12 drone6-server drone6[6307]: /go/src/github.com/drone/drone/vendor/github.com/gin-gonic/gin/gin.go:265 (0x8c016b) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/net/http/server.go:2568 (0x6ceb92) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/net/http/server.go:1825 (0x6cad32) Sep 5 21:46:12 drone6-server drone6[6307]: /usr/local/go/src/runtime/asm_amd64.s:2197 (0x45dda1) "
1005,harness,https://github.com/harness/harness/issues/1005,"Gitlab webhook calls fail due to ""object_kind"":""push""","Gitlab 7.9 added a field `""object_kind"":""push""` to the webhook POST body. Drone returns a 400 Bad Request with that property included, but succeeds if it's removed.",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | database-file | database-file | database-file | database-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,gitlab webhook calls fail due object kind push gitlab added field object kind push webhook post body drone returns bad property included succeeds removed,bug,0.95,"Gitlab webhook calls fail due to ""object_kind"":""push"" Gitlab 7.9 added a field `""object_kind"":""push""` to the webhook POST body. Drone returns a 400 Bad Request with that property included, but succeeds if it's removed."
1183,harness,https://github.com/harness/harness/issues/1183,github auth defaulting to open,"Despite what the docs say, self registration is allowed unless I explicitly added `open=false` REMOTE_CONFIG=""https://github.com?client_id=$CLIENT&client_secret=$SECRET&open=false""",source-file | test-file | source-file | test-file | source-file | test-file | source-file,github auth defaulting open despite docs say self registration allowed unless explicitly added open false remote config https github client client client secret secret open false,bug,0.85,"github auth defaulting to open Despite what the docs say, self registration is allowed unless I explicitly added `open=false` REMOTE_CONFIG=""https://github.com?client_id=$CLIENT&client_secret=$SECRET&open=false"""
660,harness,https://github.com/harness/harness/issues/660,Display login failure messages,"When using Drone with GitLab and using invalid credentials, the page shows a white screen. It would be helpful for the end user if there was an error message shown.",source-file,display login failure messages drone gitlab invalid credentials page shows white screen would helpful end user message shown,bug,0.85,"Display login failure messages When using Drone with GitLab and using invalid credentials, the page shows a white screen. It would be helpful for the end user if there was an error message shown."
1701,harness,https://github.com/harness/harness/issues/1701,"[gogs] Incorrect resolution of relative ""avatar_url""","Drone is showing all broken images as avatars for repositories from Gogs source. I've seen it's due to relative URLs being found in ""avatar_url"" element of the `api/v1/orgs/orgname` endpoint, for example: `""avatar_url"":""/gogs/avatars/6""` Drone is turning that into an url relative to the Drone url, not the Gogs url.",source-file | test-file,gogs incorrect resolution relative avatar url drone showing broken images avatars repositories gogs seen due relative urls found avatar url element api orgs orgname endpoint example avatar url gogs avatars drone turning url relative drone url gogs url,bug,0.9,"[gogs] Incorrect resolution of relative ""avatar_url"" Drone is showing all broken images as avatars for repositories from Gogs source. I've seen it's due to relative URLs being found in ""avatar_url"" element of the `api/v1/orgs/orgname` endpoint, for example: `""avatar_url"":""/gogs/avatars/6""` Drone is turning that into an url relative to the Drone url, not the Gogs url."
652,harness,https://github.com/harness/harness/issues/652,Cannot add BitBucket repo in 0.3,"For some reason I can't add a BitBucket repo at all in 0.3. It pulls my repos fine and syncs them locally, but it doesn't actually add any hooks on BitBuckets side. When I click activate the spinning wheel runs, then disappears and no errors get printed out to `/var/log/upstart/drone.log` but I do get a 500 error upon adding it in the developer console.  POST https://drone.mooash.com/api/repos/bitbucket.org/Mooash/Testing 500 (Internal Server Error) angular.js:7991 (anonymous function) angular.js:7991 C angular.js:7813f angular.js:7547 C angular.js:10943 C angular.js:10943 (anonymous function) angular.js:11029 h.$eval angular.js:11949 h.$digest angular.js:11775 h.$apply angular.js:12055 (anonymous function) angular.js:17833 (anonymous function) angular.js:2612 q angular.js:309 Zc.c angular.js:2611  At first I thought it was due to my repo being called something with spaces so `%20` characters get printed in the URL.",other-file | other-file | source-file | documentation-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file | other-file | other-file | source-file | other-file | other-file | other-file | other-file | source-file | other-file | other-file | source-file | other-file,cannot bitbucket repo reason bitbucket repo pulls repos fine syncs locally actually hooks bitbuckets side click activate spinning wheel runs disappears errors get printed var log upstart drone log get upon adding developer console post https drone mooash api repos bitbucket mooash testing internal server angular anonymous function angular angular angular angular angular anonymous function angular eval angular digest angular apply angular anonymous function angular anonymous function angular angular angular first thought due repo called something spaces characters get printed url,bug,0.9,"Cannot add BitBucket repo in 0.3 For some reason I can't add a BitBucket repo at all in 0.3. It pulls my repos fine and syncs them locally, but it doesn't actually add any hooks on BitBuckets side. When I click activate the spinning wheel runs, then disappears and no errors get printed out to `/var/log/upstart/drone.log` but I do get a 500 error upon adding it in the developer console.  POST https://drone.mooash.com/api/repos/bitbucket.org/Mooash/Testing 500 (Internal Server Error) angular.js:7991 (anonymous function) angular.js:7991 C angular.js:7813f angular.js:7547 C angular.js:10943 C angular.js:10943 (anonymous function) angular.js:11029 h.$eval angular.js:11949 h.$digest angular.js:11775 h.$apply angular.js:12055 (anonymous function) angular.js:17833 (anonymous function) angular.js:2612 q angular.js:309 Zc.c angular.js:2611  At first I thought it was due to my repo being called something with spaces so `%20` characters get printed in the URL."
2643,harness,https://github.com/harness/harness/issues/2643,Issue with sub-projects with Gitlab,"When not using sub projects Drone is fine when we try activation Drone with a sub-project we get a 404 error as follows. {""admin"":false,""error"":""404 Project Not Found"",""level"":""warning"",""msg"":""api: cannot sync repository permissions"",""name"":""android-pipeline-test"",""namespace"":""android"",""read"":true,""request-id"":""1JPTXf4qtGu0Uo5qJ9G4VQuGBby"",""time"":""2019-04-04T16:36:13Z"",""user.login"":""drone.ci"",""write"":false}",documentation-file | source-file | source-file | source-file | source-file,sub projects gitlab sub projects drone fine activation drone sub project get follows admin false project found level warning msg api cannot sync repository permissions name android pipeline namespace android read true jptxf qtgu vqugbby time user login drone write false,bug,0.9,"Issue with sub-projects with Gitlab When not using sub projects Drone is fine when we try activation Drone with a sub-project we get a 404 error as follows. {""admin"":false,""error"":""404 Project Not Found"",""level"":""warning"",""msg"":""api: cannot sync repository permissions"",""name"":""android-pipeline-test"",""namespace"":""android"",""read"":true,""request-id"":""1JPTXf4qtGu0Uo5qJ9G4VQuGBby"",""time"":""2019-04-04T16:36:13Z"",""user.login"":""drone.ci"",""write"":false}"
265,harness,https://github.com/harness/harness/issues/265,URLs from Slack and github has been broken.,"Seems https://github.com/drone/drone/pull/247/files changed to require a branch parameter, which is missing from some of the places that links to build, at least for me slack notify and link from github pull request are failing now. They use these urls respectively: from slack: http://myserver.com/github.com/Nordaaker/Input/commit/14fb2f277a7fa5042b2b2ef67cda2dc5e0018c3d gives sql: no rows in result set and from github: http://myserver.com/github.com/Nordaaker/Input/commit/reset-pwd/14fb2f277a7fa5042b2b2ef67cda2dc5e0018c3d (Github pull requests - gives a 404) Not sure if the right fix here is to make those old urls work or to only use the first format with ?branch=<> added.",source-file | test-file | source-file | test-file | source-file | source-file,urls slack github broken seems https github drone drone files changed require branch parameter missing places links least slack notify link github failing use urls respectively slack http myserver github nordaaker input cda gives sql rows result set github http myserver github nordaaker input reset pwd cda github requests gives sure right make old urls work use first format branch added,bug,0.9,"URLs from Slack and github has been broken. Seems https://github.com/drone/drone/pull/247/files changed to require a branch parameter, which is missing from some of the places that links to build, at least for me slack notify and link from github pull request are failing now. They use these urls respectively: from slack: http://myserver.com/github.com/Nordaaker/Input/commit/14fb2f277a7fa5042b2b2ef67cda2dc5e0018c3d gives sql: no rows in result set and from github: http://myserver.com/github.com/Nordaaker/Input/commit/reset-pwd/14fb2f277a7fa5042b2b2ef67cda2dc5e0018c3d (Github pull requests - gives a 404) Not sure if the right fix here is to make those old urls work or to only use the first format with ?branch=<> added."
1280,harness,https://github.com/harness/harness/issues/1280,Problem with BitBucket,"hi, wanted to try drone today in combination with BitBucket. Sadly did not have very much luck. Used the latest docker-container (0.4) and followed the instructions. First it seemed to work fine. After I pressed ""Login"" it displays me the repositories and when I then click on one, it tells me that it has to get activated first. So I press ""Activate Now"". That is when the problem starts. Because all I get then is the following error message:  Unable to activate this repository. You must have administrative access to this repository. Also, please check the third-party application access policy to ensure Drone is approved.  In the browser console I get:  http://localhost:8800/api/repos/janoberhauser/drone-test: Failed to load resource: the server responded with a status of 500 (Internal Server Error)  and in Docker:  Error #01: Bad request  To be sure I really gave it all the access-rights there are. So that can not be the issue. Also was I totally unable to find any kind of third-party application access policy in BitBucket. I guess that is only in GitHub. So anybody any idea what is going wrong. Is there maybe something wrong with the container because it is just 19h old. Thanks!",source-file | source-file,bitbucket wanted drone today combination bitbucket sadly much luck used latest docker container followed instructions first seemed work fine pressed login displays repositories click one tells get activated first press activate starts get following message unable activate repository must administrative access repository also please check third party application access policy ensure drone approved browser console get http localhost api repos janoberhauser drone failed load resource server responded status internal server docker bad sure really gave access rights also totally unable find kind third party application access policy bitbucket guess github anybody idea going wrong maybe something wrong container old thanks,bug,0.85,"Problem with BitBucket hi, wanted to try drone today in combination with BitBucket. Sadly did not have very much luck. Used the latest docker-container (0.4) and followed the instructions. First it seemed to work fine. After I pressed ""Login"" it displays me the repositories and when I then click on one, it tells me that it has to get activated first. So I press ""Activate Now"". That is when the problem starts. Because all I get then is the following error message:  Unable to activate this repository. You must have administrative access to this repository. Also, please check the third-party application access policy to ensure Drone is approved.  In the browser console I get:  http://localhost:8800/api/repos/janoberhauser/drone-test: Failed to load resource: the server responded with a status of 500 (Internal Server Error)  and in Docker:  Error #01: Bad request  To be sure I really gave it all the access-rights there are. So that can not be the issue. Also was I totally unable to find any kind of third-party application access policy in BitBucket. I guess that is only in GitHub. So anybody any idea what is going wrong. Is there maybe something wrong with the container because it is just 19h old. Thanks!"
1217,harness,https://github.com/harness/harness/issues/1217,Missing webhooks when commit message is big,I had to run this on drone 0.3 `alter table commits alter column commit_message type varchar;` the commit message was limited to 255 characters and it was causing missing webhooks.  2015/09/29 20:19:00 Unable to persist commit bbd96e4c1908177b81b4b3a8e77c3aaf8aea9974@develop. meddler.Insert: DB error in QueryRow: pq: value too long for type character varying(255) ,source-file,missing webhooks message big drone alter table commits alter column message type varchar message limited characters causing missing webhooks unable persist bbd aaf aea develop meddler insert queryrow value long type character varying,bug,0.85,Missing webhooks when commit message is big I had to run this on drone 0.3 `alter table commits alter column commit_message type varchar;` the commit message was limited to 255 characters and it was causing missing webhooks.  2015/09/29 20:19:00 Unable to persist commit bbd96e4c1908177b81b4b3a8e77c3aaf8aea9974@develop. meddler.Insert: DB error in QueryRow: pq: value too long for type character varying(255) 
477,harness,https://github.com/harness/harness/issues/477,Gravatars no longer showing up,"So I'm working on the drone wall project, and consuming the ""gravatar"" field to get people's faces to show up. A few days, ago, most gravatar fields started coming back blank. Some research yielded the following: https://developer.github.com/changes/2014-09-05-removing-gravatar-id/ Would it be possible for drone to surface this avatar_url field rather than (or in addition to) the now-empty gravatar one?",other-file | other-file | source-file | other-file | other-file | other-file | other-file | other-file | documentation-file | source-file,gravatars longer showing working drone wall project consuming gravatar field get people faces show days ago gravatar fields started coming back blank research yielded following https developer github changes removing gravatar would possible drone surface avatar url field rather addition empty gravatar one,bug,0.85,"Gravatars no longer showing up So I'm working on the drone wall project, and consuming the ""gravatar"" field to get people's faces to show up. A few days, ago, most gravatar fields started coming back blank. Some research yielded the following: https://developer.github.com/changes/2014-09-05-removing-gravatar-id/ Would it be possible for drone to surface this avatar_url field rather than (or in addition to) the now-empty gravatar one?"
443,harness,https://github.com/harness/harness/issues/443,0.3 github login fails,"- open /login - click Github login - error shown in browser: received empty access token from authorization server The log is showing:  Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 http: panic serving 212.238.236.125:56129: runtime error: invalid memory address or nil pointer dereference Sep 05 15:12:36 support-2 bash[32386]: goroutine 19 [running]: Sep 05 15:12:36 support-2 bash[32386]: net/http.func009() Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1093 +0xae Sep 05 15:12:36 support-2 bash[32386]: runtime.panic(0x999660, 0x12f5da8) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/runtime/panic.c:248 +0x106 Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/plugin/remote/github.(*GitHub).Authorize(0xc2100e0380, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0xa, ) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/plugin/remote/github/github.go:95 +0x86b Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.(*LoginHandler).GetLogin(0xc210034f00, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0x7f32ff9c9b80, ) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/login.go:39 +0x19c Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.*LoginHandler.GetLoginfm(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0x0, 0x0) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/login.go:158 +0x56 Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.func002(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/error.go:32 +0x53 Sep 05 15:12:36 support-2 bash[32386]: net/http.HandlerFunc.ServeHTTP(0xc21010e340, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1220 +0x40 Sep 05 15:12:36 support-2 bash[32386]: github.com/gorilla/pat.(*Router).ServeHTTP(0xc210096370, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/gorilla/pat/pat.go:75 +0x1b8 Sep 05 15:12:36 support-2 bash[32386]: main.func001(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/main.go:150 +0x4f7 Sep 05 15:12:36 support-2 bash[32386]: net/http.HandlerFunc.ServeHTTP(0xc2101407e0, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1220 +0x40 Sep 05 15:12:36 support-2 bash[32386]: net/http.(*ServeMux).ServeHTTP(0xc2100338d0, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1496 +0x163 Sep 05 15:12:36 support-2 bash[32386]: net/http.serverHandler.ServeHTTP(0xc21014a050, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1597 +0x16e Sep 05 15:12:36 support-2 bash[32386]: net/http.(*conn).serve(0xc21011d700) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1167 +0x7b7 Sep 05 15:12:36 support-2 bash[32386]: created by net/http.(*Server).Serve Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1644 +0x28b Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 GET /login/github.com Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 received empty access token from authorization server ",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,github login fails open login click github login shown browser received empty access token authorization server log showing sep bash http panic serving runtime invalid memory address nil pointer dereference sep bash goroutine running sep bash http func sep bash local pkg http server xae sep bash runtime panic sep bash local pkg runtime panic sep bash github drone drone plugin remote github github authorize ffb sep bash var cache drone github drone drone plugin remote github github sep bash github drone drone server handler loginhandler getlogin ffb sep bash var cache drone github drone drone server handler login sep bash github drone drone server handler loginhandler getloginfm ffb sep bash var cache drone github drone drone server handler login sep bash github drone drone server handler func ffb sep bash var cache drone github drone drone server handler sep bash http handlerfunc servehttp ffb sep bash local pkg http server sep bash github gorilla pat router servehttp ffb sep bash var cache drone github gorilla pat pat sep bash func ffb sep bash var cache drone github drone drone server sep bash http handlerfunc servehttp ffb sep bash local pkg http server sep bash http servemux servehttp ffb sep bash local pkg http server sep bash http serverhandler servehttp ffb sep bash local pkg http server sep bash http conn serve sep bash local pkg http server sep bash created http server serve sep bash local pkg http server sep bash get login github sep bash received empty access token authorization server,bug,0.9,"0.3 github login fails - open /login - click Github login - error shown in browser: received empty access token from authorization server The log is showing:  Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 http: panic serving 212.238.236.125:56129: runtime error: invalid memory address or nil pointer dereference Sep 05 15:12:36 support-2 bash[32386]: goroutine 19 [running]: Sep 05 15:12:36 support-2 bash[32386]: net/http.func009() Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1093 +0xae Sep 05 15:12:36 support-2 bash[32386]: runtime.panic(0x999660, 0x12f5da8) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/runtime/panic.c:248 +0x106 Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/plugin/remote/github.(*GitHub).Authorize(0xc2100e0380, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0xa, ) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/plugin/remote/github/github.go:95 +0x86b Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.(*LoginHandler).GetLogin(0xc210034f00, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0x7f32ff9c9b80, ) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/login.go:39 +0x19c Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.*LoginHandler.GetLoginfm(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410, 0x0, 0x0) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/login.go:158 +0x56 Sep 05 15:12:36 support-2 bash[32386]: github.com/drone/drone/server/handler.func002(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/handler/error.go:32 +0x53 Sep 05 15:12:36 support-2 bash[32386]: net/http.HandlerFunc.ServeHTTP(0xc21010e340, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1220 +0x40 Sep 05 15:12:36 support-2 bash[32386]: github.com/gorilla/pat.(*Router).ServeHTTP(0xc210096370, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/gorilla/pat/pat.go:75 +0x1b8 Sep 05 15:12:36 support-2 bash[32386]: main.func001(0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /var/cache/drone/src/github.com/drone/drone/server/main.go:150 +0x4f7 Sep 05 15:12:36 support-2 bash[32386]: net/http.HandlerFunc.ServeHTTP(0xc2101407e0, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1220 +0x40 Sep 05 15:12:36 support-2 bash[32386]: net/http.(*ServeMux).ServeHTTP(0xc2100338d0, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1496 +0x163 Sep 05 15:12:36 support-2 bash[32386]: net/http.serverHandler.ServeHTTP(0xc21014a050, 0x7f32ffb55d20, 0xc2101440a0, 0xc2100c8410) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1597 +0x16e Sep 05 15:12:36 support-2 bash[32386]: net/http.(*conn).serve(0xc21011d700) Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1167 +0x7b7 Sep 05 15:12:36 support-2 bash[32386]: created by net/http.(*Server).Serve Sep 05 15:12:36 support-2 bash[32386]: /usr/local/go/src/pkg/net/http/server.go:1644 +0x28b Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 GET /login/github.com Sep 05 15:12:36 support-2 bash[32386]: 2014/09/05 15:12:36 received empty access token from authorization server "
512,harness,https://github.com/harness/harness/issues/512,[0.3] activate adding wrong hook url,When I active a gitlab repo it sets up the deploy key and the webhook but it seems like the webhook is incorrect: `http://10.1.7.87/v1/hook/gitlab.com?owner=:owner&name=:name` when it seems like it should be `http://10.1.7.87/api/hook/gitlab.com?owner=:owner&name=:repo`,other-file,activate adding wrong hook url active gitlab repo sets deploy key webhook seems like webhook incorrect http hook gitlab owner owner name name seems like http api hook gitlab owner owner name repo,bug,0.8,[0.3] activate adding wrong hook url When I active a gitlab repo it sets up the deploy key and the webhook but it seems like the webhook is incorrect: `http://10.1.7.87/v1/hook/gitlab.com?owner=:owner&name=:name` when it seems like it should be `http://10.1.7.87/api/hook/gitlab.com?owner=:owner&name=:repo`
3010,harness,https://github.com/harness/harness/issues/3010,can not Sync Gitlab project in subgroups,"today i upgrade drone to last version but aslo cant sync project in subgroups  before upgrade ,the web page of "" repo list "" can show the project but after upgrade,it not display in the list",source-file | source-file | config-file,sync gitlab project subgroups today upgrade drone last aslo cant sync project subgroups upgrade web page repo list show project upgrade display list,bug,0.8,"can not Sync Gitlab project in subgroups today i upgrade drone to last version but aslo cant sync project in subgroups  before upgrade ,the web page of "" repo list "" can show the project but after upgrade,it not display in the list"
2766,harness,https://github.com/harness/harness/issues/2766,Github usernames case sensitivity,"Not sure how github handles usernames, but I seem to get logged in als ""Niondir"" in drone but in an earlier version it was ""niondir"". Now my admin permissions were missing, I just found out by looking into the database. If usernames on github are not case-sensitive, you should sanitize them in the database.",source-file | source-file | source-file | source-file | source-file | source-file,github usernames case sensitivity sure github handles usernames seem get logged als niondir drone earlier niondir admin permissions missing found looking database usernames github case sensitive sanitize database,bug,0.85,"Github usernames case sensitivity Not sure how github handles usernames, but I seem to get logged in als ""Niondir"" in drone but in an earlier version it was ""niondir"". Now my admin permissions were missing, I just found out by looking into the database. If usernames on github are not case-sensitive, you should sanitize them in the database."
993,harness,https://github.com/harness/harness/issues/993,How to debug wsod on github/bitbucket authentication,"Have following the installation and configuration instructions carefully, but obviously something is not correct. Trying to login, but some github/bitbucket users just get stuck on wsod on the following urls: http://<myhost>/api/auth/github.com?code=12e561562e5126e5&state=LAKSDJHLDGWSDFG672683F287G378HRU8HWFEHIUSFEHU9SEF%3D%3D%3D%3D http://<myhost>/api/auth/bitbucket.org?oauth_verifier=13123123123&oauth_token=83f7g2873rfgh2f837 Just a white screen. 403 status code. No logging to syslog. Also found a comment on about drone from back in january stating https://www.digitalocean.com/community/tutorials/how-to-perform-continuous-integration-testing-with-drone-io-on-coreos-and-docker ""This thing is useless. The github authentication is not working and there is no way to debug why is not working."" Logging out from bitbucket/github and using some other users has worked, but for instance my personal github account has never worked. Please make it possible to know why it won't work.",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | test-file | source-file | source-file | source-file,wsod github bitbucket authentication following installation configuration instructions carefully obviously something correct trying login github bitbucket users get stuck wsod following urls http myhost api auth github state laksdjhldgwsdfg hru hwfehiusfehu sef http myhost api auth bitbucket oauth verifier oauth token rfgh white screen status logging syslog also found comment drone back january stating https www digitalocean community tutorials perform continuous integration testing drone coreos docker thing useless github authentication working way working logging bitbucket github users worked instance personal github account never worked please make possible know work,bug,0.85,"How to debug wsod on github/bitbucket authentication Have following the installation and configuration instructions carefully, but obviously something is not correct. Trying to login, but some github/bitbucket users just get stuck on wsod on the following urls: http://<myhost>/api/auth/github.com?code=12e561562e5126e5&state=LAKSDJHLDGWSDFG672683F287G378HRU8HWFEHIUSFEHU9SEF%3D%3D%3D%3D http://<myhost>/api/auth/bitbucket.org?oauth_verifier=13123123123&oauth_token=83f7g2873rfgh2f837 Just a white screen. 403 status code. No logging to syslog. Also found a comment on about drone from back in january stating https://www.digitalocean.com/community/tutorials/how-to-perform-continuous-integration-testing-with-drone-io-on-coreos-and-docker ""This thing is useless. The github authentication is not working and there is no way to debug why is not working."" Logging out from bitbucket/github and using some other users has worked, but for instance my personal github account has never worked. Please make it possible to know why it won't work."
1198,harness,https://github.com/harness/harness/issues/1198,Bug: Cannot delete repo through the API,"I can GET the repo using the API request and it seems to work fine. However, using the DELETE method it outputs the following stack trace:  2015/09/13 16:26:22 http: panic serving 80.200.141.199:53109: runtime error: invalid memory address or nil pointer dereference goroutine 653 [running]: net/http.func011() /usr/local/go/src/net/http/server.go:1130 +0xbb github.com/drone/drone/plugin/remote/github.DeleteKey(0xc208630a50, 0xc208357898, 0x7, 0xc2083578e0, 0xa, 0xc208309a60, 0x16, 0xc208126900, 0x17d, 0x0, ) /gopath/src/github.com/drone/drone/plugin/remote/github/helper.go:250 +0xfa github.com/drone/drone/plugin/remote/github.(*GitHub).Deactivate(0xc2080101c0, 0xc208630840, 0xc208196500, 0xc2085c0960, 0x55, 0x0, 0x0) /gopath/src/github.com/drone/drone/plugin/remote/github/github.go:207 +0x15f github.com/drone/drone/server/handler.DelRepo(0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/handler/repo.go:78 +0x8a5 github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd81c90, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/handler.go:25 +0x55 github.com/zenazn/goji/web.(*router).route(0xc208010ab8, 0xc2086c7110, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/router.go:119 +0x144 github.com/zenazn/goji/web.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:88 +0x60 net/http.HandlerFunc.ServeHTTP(0xc208309600, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func005(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:104 +0x441 net/http.HandlerFunc.ServeHTTP(0xc208309620, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func004(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:62 +0x21c net/http.HandlerFunc.ServeHTTP(0xc208309660, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func003(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:36 +0x5ec net/http.HandlerFunc.ServeHTTP(0xc208309680, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/zenazn/goji/web.(*cStack).ServeHTTPC(0xc2086c7110, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:50 +0x91 github.com/zenazn/goji/web.(*Mux).ServeHTTPC(0xc208010a80, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/mux.go:53 +0x74 github.com/zenazn/goji/web.(*router).route(0xc2080103b8, 0xc2086c6ed0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/router.go:119 +0x144 github.com/zenazn/goji/web.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:88 +0x60 net/http.HandlerFunc.ServeHTTP(0xc2083090a0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func006(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/user.go:21 +0x1b1 net/http.HandlerFunc.ServeHTTP(0xc2083090e0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func001(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/header.go:28 +0x4cc net/http.HandlerFunc.ServeHTTP(0xc208356800, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 main.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/main.go:176 +0x885 net/http.HandlerFunc.ServeHTTP(0xc208309120, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/options.go:22 +0x256 net/http.HandlerFunc.ServeHTTP(0xc208356830, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/zenazn/goji/web.(*cStack).ServeHTTP(0xc2086c6ed0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:46 +0x72 github.com/zenazn/goji/web.(*Mux).ServeHTTP(0xc208010380, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/mux.go:45 +0x60 net/http.(*ServeMux).ServeHTTP(0xc20803a960, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1541 +0x17d net/http.serverHandler.ServeHTTP(0xc20802f5c0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1703 +0x19a net/http.(*conn).serve(0xc208058e60) /usr/local/go/src/net/http/server.go:1204 +0xb57 created by net/http.(*Server).Serve /usr/local/go/src/net/http/server.go:1751 +0x35e ",documentation-file | other-file | other-file,bug cannot delete repo api get repo api seems work fine however delete method outputs following stack trace http panic serving runtime invalid memory address nil pointer dereference goroutine running http func local http server xbb github drone drone plugin remote github deletekey gopath github drone drone plugin remote github helper xfa github drone drone plugin remote github github deactivate gopath github drone drone plugin remote github github github drone drone server handler delrepo fdffec afe eea gopath github drone drone server handler repo github zenazn goji web handlerfuncwrap servehttpc fdffec afe eea gopath github zenazn goji web handler github zenazn goji web router route fdffec afe eea gopath github zenazn goji web router github zenazn goji web func fdffec afe eea gopath github zenazn goji web middleware http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware repo http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware repo http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware repo http handlerfunc servehttp fdffec afe eea local http server github zenazn goji web cstack servehttpc fdffec afe eea gopath github zenazn goji web middleware github zenazn goji web mux servehttpc fdffec afe eea gopath github zenazn goji web mux github zenazn goji web router route fdffec afe eea gopath github zenazn goji web router github zenazn goji web func fdffec afe eea gopath github zenazn goji web middleware http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware user http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware header http handlerfunc servehttp fdffec afe eea local http server func fdffec afe eea gopath github drone drone server http handlerfunc servehttp fdffec afe eea local http server github drone drone server middleware func fdffec afe eea gopath github drone drone server middleware options http handlerfunc servehttp fdffec afe eea local http server github zenazn goji web cstack servehttp fdffec afe eea gopath github zenazn goji web middleware github zenazn goji web mux servehttp fdffec afe eea gopath github zenazn goji web mux http servemux servehttp fdffec afe eea local http server http serverhandler servehttp fdffec afe eea local http server http conn serve local http server created http server serve local http server,bug,0.95,"Bug: Cannot delete repo through the API I can GET the repo using the API request and it seems to work fine. However, using the DELETE method it outputs the following stack trace:  2015/09/13 16:26:22 http: panic serving 80.200.141.199:53109: runtime error: invalid memory address or nil pointer dereference goroutine 653 [running]: net/http.func011() /usr/local/go/src/net/http/server.go:1130 +0xbb github.com/drone/drone/plugin/remote/github.DeleteKey(0xc208630a50, 0xc208357898, 0x7, 0xc2083578e0, 0xa, 0xc208309a60, 0x16, 0xc208126900, 0x17d, 0x0, ) /gopath/src/github.com/drone/drone/plugin/remote/github/helper.go:250 +0xfa github.com/drone/drone/plugin/remote/github.(*GitHub).Deactivate(0xc2080101c0, 0xc208630840, 0xc208196500, 0xc2085c0960, 0x55, 0x0, 0x0) /gopath/src/github.com/drone/drone/plugin/remote/github/github.go:207 +0x15f github.com/drone/drone/server/handler.DelRepo(0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/handler/repo.go:78 +0x8a5 github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd81c90, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/handler.go:25 +0x55 github.com/zenazn/goji/web.(*router).route(0xc208010ab8, 0xc2086c7110, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/router.go:119 +0x144 github.com/zenazn/goji/web.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:88 +0x60 net/http.HandlerFunc.ServeHTTP(0xc208309600, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func005(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:104 +0x441 net/http.HandlerFunc.ServeHTTP(0xc208309620, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func004(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:62 +0x21c net/http.HandlerFunc.ServeHTTP(0xc208309660, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func003(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/repo.go:36 +0x5ec net/http.HandlerFunc.ServeHTTP(0xc208309680, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/zenazn/goji/web.(*cStack).ServeHTTPC(0xc2086c7110, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:50 +0x91 github.com/zenazn/goji/web.(*Mux).ServeHTTPC(0xc208010a80, 0xc2086c70e0, 0xc2086c6f00, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/mux.go:53 +0x74 github.com/zenazn/goji/web.(*router).route(0xc2080103b8, 0xc2086c6ed0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/router.go:119 +0x144 github.com/zenazn/goji/web.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:88 +0x60 net/http.HandlerFunc.ServeHTTP(0xc2083090a0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func006(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/user.go:21 +0x1b1 net/http.HandlerFunc.ServeHTTP(0xc2083090e0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func001(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/header.go:28 +0x4cc net/http.HandlerFunc.ServeHTTP(0xc208356800, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 main.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/main.go:176 +0x885 net/http.HandlerFunc.ServeHTTP(0xc208309120, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/drone/drone/server/middleware.func002(0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/drone/drone/server/middleware/options.go:22 +0x256 net/http.HandlerFunc.ServeHTTP(0xc208356830, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1265 +0x41 github.com/zenazn/goji/web.(*cStack).ServeHTTP(0xc2086c6ed0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/middleware.go:46 +0x72 github.com/zenazn/goji/web.(*Mux).ServeHTTP(0xc208010380, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /gopath/src/github.com/zenazn/goji/web/mux.go:45 +0x60 net/http.(*ServeMux).ServeHTTP(0xc20803a960, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1541 +0x17d net/http.serverHandler.ServeHTTP(0xc20802f5c0, 0x7fdffec4afe8, 0xc208376960, 0xc20861eea0) /usr/local/go/src/net/http/server.go:1703 +0x19a net/http.(*conn).serve(0xc208058e60) /usr/local/go/src/net/http/server.go:1204 +0xb57 created by net/http.(*Server).Serve /usr/local/go/src/net/http/server.go:1751 +0x35e "
779,harness,https://github.com/harness/harness/issues/779,Wierd URL stuff,"If I go to http://drone.io/shadowfacts/EnFusion, everything works perfectly fine. But if I go to http://drone.io/shadowfacts/EnFusion/ I get a 404 page not found error. The second URL should work as well.",source-file,wierd url stuff http drone shadowfacts enfusion everything works perfectly fine http drone shadowfacts enfusion get page found second url work well,bug,0.9,"Wierd URL stuff If I go to http://drone.io/shadowfacts/EnFusion, everything works perfectly fine. But if I go to http://drone.io/shadowfacts/EnFusion/ I get a 404 page not found error. The second URL should work as well."
914,harness,https://github.com/harness/harness/issues/914,Long commit message causes postgres insert error,"The postgres schema for commits uses VARCHAR(255) for the message. If the commit message exceeds this length, then an error occurs trying to commit the commit to the DB. By the way, the error handling in the hook handler leaves a lot to be desired. A lot of these 400s really should be 500s, and all of them discard the error string instead of logging or returning it, leaving us guessing as to the cause.",source-file | test-file | source-file,long message causes postgres insert postgres schema commits uses varchar message message exceeds length occurs trying way handling hook handler leaves lot desired lot really discard string instead logging returning leaving guessing cause,bug,0.85,"Long commit message causes postgres insert error The postgres schema for commits uses VARCHAR(255) for the message. If the commit message exceeds this length, then an error occurs trying to commit the commit to the DB. By the way, the error handling in the hook handler leaves a lot to be desired. A lot of these 400s really should be 500s, and all of them discard the error string instead of logging or returning it, leaving us guessing as to the cause."
982,harness,https://github.com/harness/harness/issues/982,nil pointer dereference on Rebuild,"Im running [Drone in a container](https://www.digitalocean.com/community/tutorials/how-to-perform-continuous-integration-testing-with-drone-io-on-coreos-and-docker) and I was having network issues so I was adding and removing the drone server. Got this after I clicked ""Rebuild"".  2015/04/18 09:37:27 http: panic serving 172.17.8.1:53133: runtime error: invalid memory address or nil pointer dereference goroutine 31 [running]: net/http.func011() /usr/local/go/src/pkg/net/http/server.go:1100 +0xb7 runtime.panic(0xb3afc0, 0x11ad913) /usr/local/go/src/pkg/runtime/panic.c:248 +0x18d github.com/drone/drone/server/handler.PostCommit(0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/handler/commit.go:104 +0x5e3 github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd52dd0, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/handler.go:25 +0x54 github.com/zenazn/goji/web.(*router).route(0xc208028b28, 0xc2081dc630, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2081c7900, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func005(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:104 +0x45b net/http.HandlerFunc.ServeHTTP(0xc2081c7920, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func004(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:62 +0x21d net/http.HandlerFunc.ServeHTTP(0xc2081c7940, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func003(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:36 +0x5dc net/http.HandlerFunc.ServeHTTP(0xc2081c7960, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(*cStack).ServeHTTPC(0xc2081dc630, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:50 +0x69 github.com/zenazn/goji/web.(*Mux).ServeHTTPC(0xc208028af0, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:53 +0x73 github.com/zenazn/goji/web.(*router).route(0xc208028348, 0xc2081b76e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2081c7c40, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func006(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/user.go:21 +0x1a6 net/http.HandlerFunc.ServeHTTP(0xc2081c7c60, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func001(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/header.go:28 +0x4e9 net/http.HandlerFunc.ServeHTTP(0xc208176860, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 main.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/main.go:176 +0x721 net/http.HandlerFunc.ServeHTTP(0xc2081c7c80, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/options.go:22 +0x261 net/http.HandlerFunc.ServeHTTP(0xc208176890, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(*cStack).ServeHTTP(0xc2081b76e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:46 +0x7f github.com/zenazn/goji/web.(*Mux).ServeHTTP(0xc208028310, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:45 +0x5f net/http.(*ServeMux).ServeHTTP(0xc208022930, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1511 +0x1a3 net/http.serverHandler.ServeHTTP(0xc2080059e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1673 +0x19f net/http.(*conn).serve(0xc208051100) /usr/local/go/src/pkg/net/http/server.go:1174 +0xa7e created by net/http.(*Server).Serve /usr/local/go/src/pkg/net/http/server.go:1721 +0x313 ",source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,nil pointer dereference rebuild running drone container https www digitalocean community tutorials perform continuous integration testing drone coreos docker network issues adding removing drone server got clicked rebuild http panic serving runtime invalid memory address nil pointer dereference goroutine running http func local pkg http server runtime panic afc local pkg runtime panic github drone drone server handler postcommit fabe var cache drone github drone drone server handler github zenazn goji web handlerfuncwrap servehttpc fabe var cache drone github zenazn goji web handler github zenazn goji web router route fabe var cache drone github zenazn goji web router github zenazn goji web func fabe var cache drone github zenazn goji web middleware http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware repo http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware repo http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware repo http handlerfunc servehttp fabe local pkg http server github zenazn goji web cstack servehttpc fabe var cache drone github zenazn goji web middleware github zenazn goji web mux servehttpc fabe var cache drone github zenazn goji web mux github zenazn goji web router route fabe var cache drone github zenazn goji web router github zenazn goji web func fabe var cache drone github zenazn goji web middleware http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware user http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware header http handlerfunc servehttp fabe local pkg http server func fabe var cache drone github drone drone server http handlerfunc servehttp fabe local pkg http server github drone drone server middleware func fabe var cache drone github drone drone server middleware options http handlerfunc servehttp fabe local pkg http server github zenazn goji web cstack servehttp fabe var cache drone github zenazn goji web middleware github zenazn goji web mux servehttp fabe var cache drone github zenazn goji web mux http servemux servehttp fabe local pkg http server http serverhandler servehttp fabe local pkg http server http conn serve local pkg http server created http server serve local pkg http server,bug,0.9,"nil pointer dereference on Rebuild Im running [Drone in a container](https://www.digitalocean.com/community/tutorials/how-to-perform-continuous-integration-testing-with-drone-io-on-coreos-and-docker) and I was having network issues so I was adding and removing the drone server. Got this after I clicked ""Rebuild"".  2015/04/18 09:37:27 http: panic serving 172.17.8.1:53133: runtime error: invalid memory address or nil pointer dereference goroutine 31 [running]: net/http.func011() /usr/local/go/src/pkg/net/http/server.go:1100 +0xb7 runtime.panic(0xb3afc0, 0x11ad913) /usr/local/go/src/pkg/runtime/panic.c:248 +0x18d github.com/drone/drone/server/handler.PostCommit(0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/handler/commit.go:104 +0x5e3 github.com/zenazn/goji/web.handlerFuncWrap.ServeHTTPC(0xd52dd0, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/handler.go:25 +0x54 github.com/zenazn/goji/web.(*router).route(0xc208028b28, 0xc2081dc630, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2081c7900, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func005(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:104 +0x45b net/http.HandlerFunc.ServeHTTP(0xc2081c7920, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func004(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:62 +0x21d net/http.HandlerFunc.ServeHTTP(0xc2081c7940, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func003(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/repo.go:36 +0x5dc net/http.HandlerFunc.ServeHTTP(0xc2081c7960, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(*cStack).ServeHTTPC(0xc2081dc630, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:50 +0x69 github.com/zenazn/goji/web.(*Mux).ServeHTTPC(0xc208028af0, 0xc2081815f0, 0xc2081812f0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:53 +0x73 github.com/zenazn/goji/web.(*router).route(0xc208028348, 0xc2081b76e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/router.go:119 +0x143 github.com/zenazn/goji/web.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:88 +0x5f net/http.HandlerFunc.ServeHTTP(0xc2081c7c40, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func006(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/user.go:21 +0x1a6 net/http.HandlerFunc.ServeHTTP(0xc2081c7c60, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func001(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/header.go:28 +0x4e9 net/http.HandlerFunc.ServeHTTP(0xc208176860, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 main.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/main.go:176 +0x721 net/http.HandlerFunc.ServeHTTP(0xc2081c7c80, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/drone/drone/server/middleware.func002(0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/drone/drone/server/middleware/options.go:22 +0x261 net/http.HandlerFunc.ServeHTTP(0xc208176890, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1235 +0x40 github.com/zenazn/goji/web.(*cStack).ServeHTTP(0xc2081b76e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/middleware.go:46 +0x7f github.com/zenazn/goji/web.(*Mux).ServeHTTP(0xc208028310, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /var/cache/drone/src/github.com/zenazn/goji/web/mux.go:45 +0x5f net/http.(*ServeMux).ServeHTTP(0xc208022930, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1511 +0x1a3 net/http.serverHandler.ServeHTTP(0xc2080059e0, 0x7fabe81609f0, 0xc2081b9400, 0xc2081f4c30) /usr/local/go/src/pkg/net/http/server.go:1673 +0x19f net/http.(*conn).serve(0xc208051100) /usr/local/go/src/pkg/net/http/server.go:1174 +0xa7e created by net/http.(*Server).Serve /usr/local/go/src/pkg/net/http/server.go:1721 +0x313 "
2566,harness,https://github.com/harness/harness/issues/2566,Unable to fetch stage details when using string interpolation in pipeline,"I added the following in my `.drone.yml`: yaml environment: build_number: ${BUILD_NUMBER}  and this shows up in my logs: yaml {""commit"":""bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0"",""event"":""push"",""level"":""debug"",""msg"":""webhook parsed"",""name"":""bazare-public"",""namespace"":""tjimsk"",""time"":""2019-01-04T21:15:04Z""} {""commit"":""bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0"",""event"":""push"",""level"":""debug"",""msg"":""trigger: received"",""ref"":""refs/heads/master"",""repo"":""<repository-name>"",""time"":""2019-01-04T21:15:04Z""} {""fields.time"":""2019-01-04T21:15:06Z"",""latency"":1589002566,""level"":""debug"",""method"":""POST"",""msg"":"""",""remote"":""10.28.3.5:51760"",""request"":""/hook"",""request-id"":""596a9389-0fe3-4f72-b3c8-a815e94c1e15"",""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""manager: accept stage"",""stage-id"":2,""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""manager: stage accepted"",""stage-id"":2,""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""msg"":""manager: fetching stage details"",""step-id"":2,""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""build"":2,""error"":""runtime error: invalid memory address or nil pointer dereference"",""level"":""error"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""runner: unexpected panic"",""os"":""linux"",""pipeline"":""public"",""repo"":""<repository-name>"",""stage"":1,""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""runner: polling queue"",""os"":""linux"",""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""kernel"":"""",""level"":""debug"",""msg"":""manager: request queue item"",""os"":""linux"",""time"":""2019-01-04T21:15:06Z"",""variant"":""""} {""level"":""debug"",""msg"":""events: stream eror"",""request-id"":""729b25b5-260a-457c-be9e-f1b51bb7b4dc"",""time"":""2019-01-04T21:16:12Z"",""user.admin"":true,""user.login"":""tjimsk""} {""level"":""debug"",""msg"":""events: stream closed"",""request-id"":""729b25b5-260a-457c-be9e-f1b51bb7b4dc"",""time"":""2019-01-04T21:16:12Z"",""user.admin"":true,""user.login"":""tjimsk""}  The pipeline gets stuck instead of reporting it can't find the variable. That should be handled better as even the logs don't really say that much.",source-file,unable fetch stage details string interpolation pipeline added following drone yml yaml environment number number shows logs yaml cdf efc ebe dec event push level msg webhook parsed name bazare public namespace tjimsk time cdf efc ebe dec event push level msg trigger received ref refs heads repo repository name time fields time latency level method post msg remote hook time level machine drone lqt msg manager accept stage stage time level machine drone lqt msg manager stage accepted stage time level msg manager fetching stage details step time arch amd runtime invalid memory address nil pointer dereference level machine drone lqt msg runner unexpected panic linux pipeline public repo repository name stage time arch amd level machine drone lqt msg runner polling queue linux time arch amd kernel level msg manager queue item linux time variant level msg events stream eror time user admin true user login tjimsk level msg events stream closed time user admin true user login tjimsk pipeline gets stuck instead reporting find variable handled better even logs really say much,bug,0.85,"Unable to fetch stage details when using string interpolation in pipeline I added the following in my `.drone.yml`: yaml environment: build_number: ${BUILD_NUMBER}  and this shows up in my logs: yaml {""commit"":""bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0"",""event"":""push"",""level"":""debug"",""msg"":""webhook parsed"",""name"":""bazare-public"",""namespace"":""tjimsk"",""time"":""2019-01-04T21:15:04Z""} {""commit"":""bd36d59f700cdf217d8efc030ebe3d4dec7b4fc0"",""event"":""push"",""level"":""debug"",""msg"":""trigger: received"",""ref"":""refs/heads/master"",""repo"":""<repository-name>"",""time"":""2019-01-04T21:15:04Z""} {""fields.time"":""2019-01-04T21:15:06Z"",""latency"":1589002566,""level"":""debug"",""method"":""POST"",""msg"":"""",""remote"":""10.28.3.5:51760"",""request"":""/hook"",""request-id"":""596a9389-0fe3-4f72-b3c8-a815e94c1e15"",""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""manager: accept stage"",""stage-id"":2,""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""manager: stage accepted"",""stage-id"":2,""time"":""2019-01-04T21:15:06Z""} {""level"":""debug"",""msg"":""manager: fetching stage details"",""step-id"":2,""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""build"":2,""error"":""runtime error: invalid memory address or nil pointer dereference"",""level"":""error"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""runner: unexpected panic"",""os"":""linux"",""pipeline"":""public"",""repo"":""<repository-name>"",""stage"":1,""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""level"":""debug"",""machine"":""drone-74666b56c4-lqt8k"",""msg"":""runner: polling queue"",""os"":""linux"",""time"":""2019-01-04T21:15:06Z""} {""arch"":""amd64"",""kernel"":"""",""level"":""debug"",""msg"":""manager: request queue item"",""os"":""linux"",""time"":""2019-01-04T21:15:06Z"",""variant"":""""} {""level"":""debug"",""msg"":""events: stream eror"",""request-id"":""729b25b5-260a-457c-be9e-f1b51bb7b4dc"",""time"":""2019-01-04T21:16:12Z"",""user.admin"":true,""user.login"":""tjimsk""} {""level"":""debug"",""msg"":""events: stream closed"",""request-id"":""729b25b5-260a-457c-be9e-f1b51bb7b4dc"",""time"":""2019-01-04T21:16:12Z"",""user.admin"":true,""user.login"":""tjimsk""}  The pipeline gets stuck instead of reporting it can't find the variable. That should be handled better as even the logs don't really say that much."
2538,harness,https://github.com/harness/harness/issues/2538,Missing usefull error message on login fail,"Logging in with a unverified email address fails with generic error message. The server log states:  time=""2018-11-30T07:55:31Z"" level=error msg=""cannot authenticate user. No verified Email address for GitHub account""  It would be very helpful to display this message to the user.",source-file,missing usefull message login fail logging unverified email address fails generic message server log states time level msg cannot authenticate user verified email address github account would helpful display message user,bug,0.9,"Missing usefull error message on login fail Logging in with a unverified email address fails with generic error message. The server log states:  time=""2018-11-30T07:55:31Z"" level=error msg=""cannot authenticate user. No verified Email address for GitHub account""  It would be very helpful to display this message to the user."
