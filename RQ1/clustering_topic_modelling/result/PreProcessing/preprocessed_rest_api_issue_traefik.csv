issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence,combined_text
11313,traefik,https://github.com/traefik/traefik/issues/11313,Middleware of ForwardAuth returns incorrect location header,"Welcome! - [x] Yes, I've searched similar issues on [GitHub](https://github.com/traefik/traefik/issues) and didn't find any. - [x] Yes, I've searched similar issues on the [Traefik community forum](https://community.traefik.io) and didn't find any.  What did you do? I made an auth server that returns a relative url as the Location header in the response. I'm expecting the relative url will be passed to the downstream and then be resolved by the browser or other clients.  What did you see instead? ForwardAuth middleware resolves the location header and return the resolved url as the location header in the response. While the correct behavior should just return the original location header. https://github.com/traefik/traefik/blob/33c1d700c02ad09ab793673a14674b39d78fe352/pkg/middlewares/auth/forward.go#L193 For example, - Auth server endpoint address: http://forward-auth.server.local:8080/auth - Auth server response Location header: /index.html - Downstream received response Location header: http://forward-auth.server.local:8080/index.html - Expected Location header: /index.html Note, that the location should be resolved at the customer side, like the browser, which should be relative to the original forwarded domain, not the auth server.  What version of Traefik are you using? v3.1.6 I checked the latest code. It seems it's still the same behavior.  What is your environment & configuration? Not related. But can provide if being asked.  If applicable, please paste the log output in DEBUG level _No response_",source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file | source-file | test-file,middleware forwardauth returns incorrect location header welcome yes searched similar issues github https github issues find yes searched similar issues community forum https community find made auth server returns relative url location header response expecting relative url passed downstream resolved browser clients see instead forwardauth middleware resolves location header return resolved url location header response correct behavior return original location header https github blob pkg middlewares auth forward example auth server endpoint address http forward auth server local auth auth server response location header index html downstream received response location header http forward auth server local index html expected location header index html note location resolved customer side like browser relative original forwarded domain auth server checked latest seems still behavior environment configuration related provide asked applicable please paste log output level response,bug,0.9,"Middleware of ForwardAuth returns incorrect location header Welcome! - [x] Yes, I've searched similar issues on [GitHub](https://github.com/traefik/traefik/issues) and didn't find any. - [x] Yes, I've searched similar issues on the [Traefik community forum](https://community.traefik.io) and didn't find any.  What did you do? I made an auth server that returns a relative url as the Location header in the response. I'm expecting the relative url will be passed to the downstream and then be resolved by the browser or other clients.  What did you see instead? ForwardAuth middleware resolves the location header and return the resolved url as the location header in the response. While the correct behavior should just return the original location header. https://github.com/traefik/traefik/blob/33c1d700c02ad09ab793673a14674b39d78fe352/pkg/middlewares/auth/forward.go#L193 For example, - Auth server endpoint address: http://forward-auth.server.local:8080/auth - Auth server response Location header: /index.html - Downstream received response Location header: http://forward-auth.server.local:8080/index.html - Expected Location header: /index.html Note, that the location should be resolved at the customer side, like the browser, which should be relative to the original forwarded domain, not the auth server.  What version of Traefik are you using? v3.1.6 I checked the latest code. It seems it's still the same behavior.  What is your environment & configuration? Not related. But can provide if being asked.  If applicable, please paste the log output in DEBUG level _No response_"
