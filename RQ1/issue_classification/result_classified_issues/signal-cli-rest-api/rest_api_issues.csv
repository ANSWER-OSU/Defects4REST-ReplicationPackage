issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence
410,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/410,setting group_link not having an effect when creating group,"The problem When creating a group with `""http://127.0.0.1:8080/v1/groups/PHONE_NUMBER""` and `json={'description': 'string', 'group_link': 'enabled', 'members': ['PHONE_NUMBER'], 'name': 'Test', 'permissions': {'add_members': 'only-admins', 'edit_group': 'only-admins'}}` with group_link = enabled the group is created, however 'Group link' remains disabled in the new group.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file,"setting group_link not having an effect when creating group The problem When creating a group with `""http://127.0.0.1:8080/v1/groups/PHONE_NUMBER""` and `json={'description': 'string', 'group_link': 'enabled', 'members': ['PHONE_NUMBER'], 'name': 'Test', 'permissions': {'add_members': 'only-admins', 'edit_group': 'only-admins'}}` with group_link = enabled the group is created, however 'Group link' remains disabled in the new group.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file",bug,0.9
403,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/403,Actionable information on $stderr goes to nirvana,"The problem On this line here: https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/client/cli.go#L109 only `cmd.Stderr` but not `cmd.Stdout` is part of the error message. This is unfortunate. Why? When our HTTP client sends a request to `signal-cli-rest-api` all we see is the following response:  {""error"":""Failed to send message\n""}  That's it. But if we try to send the same message to the same number again with `signal-cli`, we also see:  Failed to send (some) messages: +49176xxxxxxxx: CAPTCHA proof required for sending to \""+49176xxxxxxxx\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""6002d6d0-0c16-xxxx-xxxx-xxxxxxxxxxxx\"", or wait \""86400\"" seconds. To get the captcha token, go to https://signalcaptchas.org/challenge/generate.html Check the developer tools (F12) console for a failed redirect to signalcaptcha:// Everything after signalcaptcha:// is the captcha token. Use the following command to submit the captcha token: signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  This message contains the challenge token(!) This is important for the HTTP client because it could throw a specific error and send this information along with it, e.g. via Sentry, to a human to solve the problem. Based on our experience, this error occurs every now and then. Unfortunately it is phone number specific, so sending messages *to another phone number* works **just fine** making it difficult to become aware of this issue. Waiting the specified 86400 seconds does nothing. So we can no longer message that person (bad) and we unaware of it (even worse).  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [ ] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Actionable information on $stderr goes to nirvana The problem On this line here: https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/client/cli.go#L109 only `cmd.Stderr` but not `cmd.Stdout` is part of the error message. This is unfortunate. Why? When our HTTP client sends a request to `signal-cli-rest-api` all we see is the following response:  {""error"":""Failed to send message\n""}  That's it. But if we try to send the same message to the same number again with `signal-cli`, we also see:  Failed to send (some) messages: +49176xxxxxxxx: CAPTCHA proof required for sending to \""+49176xxxxxxxx\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""6002d6d0-0c16-xxxx-xxxx-xxxxxxxxxxxx\"", or wait \""86400\"" seconds. To get the captcha token, go to https://signalcaptchas.org/challenge/generate.html Check the developer tools (F12) console for a failed redirect to signalcaptcha:// Everything after signalcaptcha:// is the captcha token. Use the following command to submit the captcha token: signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  This message contains the challenge token(!) This is important for the HTTP client because it could throw a specific error and send this information along with it, e.g. via Sentry, to a human to solve the problem. Based on our experience, this error occurs every now and then. Unfortunately it is phone number specific, so sending messages *to another phone number* works **just fine** making it difficult to become aware of this issue. Waiting the specified 86400 seconds does nothing. So we can no longer message that person (bad) and we unaware of it (even worse).  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [ ] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
224,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/224,json-rpc mode doesn't work with existing linked devices,"The problem I created a linked device using native mode, but when I swapped to json-rpc mode and tried to send a message, I received the following error: `{""error"":""Number not registered with JSON-RPC""}%` The docker logs show the following when starting up in json-rpc mode:  today at 20:29:26+ set -e today at 20:29:26+ [ -z /home/.local/share/signal-cli ] today at 20:29:26+ usermod -u 1000 signal-api today at 20:29:26usermod: no changes today at 20:29:26+ groupmod -g 998 signal-api today at 20:29:26+ chown 1000:998 -R /home/.local/share/signal-cli today at 20:29:26+ cat today at 20:29:26+ cap_prefix=-cap_ today at 20:29:26+ cat /proc/sys/kernel/cap_last_cap today at 20:29:26+ seq -s ,-cap_ 0 40 today at 20:29:26+ caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 today at 20:29:26+ [ json-rpc = json-rpc ] today at 20:29:26+ /usr/bin/jsonrpc2-helper today at 20:29:26+ service supervisor start today at 20:29:27Starting supervisor: supervisord. today at 20:29:27+ supervisorctl start all today at 20:29:28+ exec setpriv --reuid=1000 --regid=998 --init-groups --inh-caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 signal-cli-rest-api -signal-cli-config=/home/.local/share/signal-cli today at 20:29:28time=""2022-03-03T20:29:28Z"" level=info msg=""Started Signal Messenger REST API"" today at 20:29:59[GIN] 2022/03/03 - 20:29:59 | 204 | 300.586s | 192.168.199.105 | POST ""/v1/configuration"" today at 20:30:09[GIN] 2022/03/03 - 20:30:09 | 400 | 172.809s | 192.168.199.105 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"json-rpc mode doesn't work with existing linked devices The problem I created a linked device using native mode, but when I swapped to json-rpc mode and tried to send a message, I received the following error: `{""error"":""Number not registered with JSON-RPC""}%` The docker logs show the following when starting up in json-rpc mode:  today at 20:29:26+ set -e today at 20:29:26+ [ -z /home/.local/share/signal-cli ] today at 20:29:26+ usermod -u 1000 signal-api today at 20:29:26usermod: no changes today at 20:29:26+ groupmod -g 998 signal-api today at 20:29:26+ chown 1000:998 -R /home/.local/share/signal-cli today at 20:29:26+ cat today at 20:29:26+ cap_prefix=-cap_ today at 20:29:26+ cat /proc/sys/kernel/cap_last_cap today at 20:29:26+ seq -s ,-cap_ 0 40 today at 20:29:26+ caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 today at 20:29:26+ [ json-rpc = json-rpc ] today at 20:29:26+ /usr/bin/jsonrpc2-helper today at 20:29:26+ service supervisor start today at 20:29:27Starting supervisor: supervisord. today at 20:29:27+ supervisorctl start all today at 20:29:28+ exec setpriv --reuid=1000 --regid=998 --init-groups --inh-caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 signal-cli-rest-api -signal-cli-config=/home/.local/share/signal-cli today at 20:29:28time=""2022-03-03T20:29:28Z"" level=info msg=""Started Signal Messenger REST API"" today at 20:29:59[GIN] 2022/03/03 - 20:29:59 | 204 | 300.586s | 192.168.199.105 | POST ""/v1/configuration"" today at 20:30:09[GIN] 2022/03/03 - 20:30:09 | 400 | 172.809s | 192.168.199.105 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.9
242,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/242,"Unable to deregister flawed phone number, high CPU likely result","The problem I noticed a constant 26%CPU of the Signal Messenger Addon in Homey using json-rpc, and traced the most likely cause to a failed attempt to register a phone number that was missing the area code. The log is riddled with messages: ""Couldn't read data for number +\<badphonenumber\>: EOF. Is the number properly registered?"" To fix it I tried to deregister the bad phone number by calling the rest api. But I cannot, because that results in an error: user +\<badphonenumber\> is not registered. If I switch to normal or native mode the high load isn't there, but I want to use the faster json-rpc. That also produces errors: ""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +<badphonenumber>: {User +\<badphonenumber\> is not registered.\n}"" How can I remove the bad number (leaving the working registration intact), and hopefully return to a low, acceptable CPU usage? Platform is an RPI4, running version 0.59.0 of the addon, using json-rpc mode and running on HA version 2022.5.3  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_",source-file | source-file | source-file | source-file,"Unable to deregister flawed phone number, high CPU likely result The problem I noticed a constant 26%CPU of the Signal Messenger Addon in Homey using json-rpc, and traced the most likely cause to a failed attempt to register a phone number that was missing the area code. The log is riddled with messages: ""Couldn't read data for number +\<badphonenumber\>: EOF. Is the number properly registered?"" To fix it I tried to deregister the bad phone number by calling the rest api. But I cannot, because that results in an error: user +\<badphonenumber\> is not registered. If I switch to normal or native mode the high load isn't there, but I want to use the faster json-rpc. That also produces errors: ""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +<badphonenumber>: {User +\<badphonenumber\> is not registered.\n}"" How can I remove the bad number (leaving the working registration intact), and hopefully return to a low, acceptable CPU usage? Platform is an RPI4, running version 0.59.0 of the addon, using json-rpc mode and running on HA version 2022.5.3  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_ source-file source-file source-file source-file",bug,0.9
91,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/91,Unable to send message to group I am a member of,"Hi, My account became deregistered and I went ahead and reregistered it without issue. However now I am unable to send to the group I was a member of. I can list the group fine with `curl -X GET -H ""Content-Type: application/json"" 'http://127.0.0.1:8080/v1/groups/+10000000000'` returns `[{""name"":""group1 Notifications"",""id"":""group.77777777777777777777777777777777"",""internal_id"":""11111111111111=="",""members"":[""+10000000000"",""+11111111111"",""+12222222222"",""+13333333333""],""blocked"":false,""pending_invites"":[],""pending_requests"":[],""invite_link"":""""}]` When I use the group id above, the call always returns ""null""  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Ignore test"", ""number"": ""+10000000000"", ""recipients"": [""group.77777777777777777777777777777777""]}' 'http://127.0.0.1:8080/v2/send'  `null` In the logs it looks like both the GET and POST calls are getting 20x response  [GIN] 2021/02/12 - 03:03:48 | 200 | 160.107s | 10.42.1.1 | GET ""/v1/about"" [GIN] 2021/02/12 - 03:03:56 | 201 | 7.721459399s | 10.42.1.1 | POST ""/v2/send""",source-file | source-file,"Unable to send message to group I am a member of Hi, My account became deregistered and I went ahead and reregistered it without issue. However now I am unable to send to the group I was a member of. I can list the group fine with `curl -X GET -H ""Content-Type: application/json"" 'http://127.0.0.1:8080/v1/groups/+10000000000'` returns `[{""name"":""group1 Notifications"",""id"":""group.77777777777777777777777777777777"",""internal_id"":""11111111111111=="",""members"":[""+10000000000"",""+11111111111"",""+12222222222"",""+13333333333""],""blocked"":false,""pending_invites"":[],""pending_requests"":[],""invite_link"":""""}]` When I use the group id above, the call always returns ""null""  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Ignore test"", ""number"": ""+10000000000"", ""recipients"": [""group.77777777777777777777777777777777""]}' 'http://127.0.0.1:8080/v2/send'  `null` In the logs it looks like both the GET and POST calls are getting 20x response  [GIN] 2021/02/12 - 03:03:48 | 200 | 160.107s | 10.42.1.1 | GET ""/v1/about"" [GIN] 2021/02/12 - 03:03:56 | 201 | 7.721459399s | 10.42.1.1 | POST ""/v2/send"" source-file source-file",bug,0.95
425,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/425,Native mode - arch issue,"The problem When using signal-cli-rest-api (via Home Assistant add-on) v0.69.0, messages can't be sent or received. Any API called result in a 400 error and the following message:  The current machine does not support all of the following CPU features that are required by the image: [CX8, CMOV, FXSR, MMX, SSE, SSE2, SSE3, SSSE3, SSE4_1, SSE4_2, POPCNT, LZCNT, AVX, AVX2, BMI1, BMI2, FMA]. Please rebuild the executable with an appropriate setting of the -march option.  Appears to be related to the updated native build in the 0.69.0 release. Switching to 'normal' resolves this issue. Issue orignally opened here: https://github.com/haberda/hassio_addons/issues/79  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",container-file,"Native mode - arch issue The problem When using signal-cli-rest-api (via Home Assistant add-on) v0.69.0, messages can't be sent or received. Any API called result in a 400 error and the following message:  The current machine does not support all of the following CPU features that are required by the image: [CX8, CMOV, FXSR, MMX, SSE, SSE2, SSE3, SSSE3, SSE4_1, SSE4_2, POPCNT, LZCNT, AVX, AVX2, BMI1, BMI2, FMA]. Please rebuild the executable with an appropriate setting of the -march option.  Appears to be related to the updated native build in the 0.69.0 release. Switching to 'normal' resolves this issue. Issue orignally opened here: https://github.com/haberda/hassio_addons/issues/79  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ container-file",bug,0.9
630,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/630,Nested styled text not working,"The problem Currently it appears that it is not possible to send messages using nested styled text. For example text that is both spoiler and monospaced. For example:  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||spoiler only||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns spoiler correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""`monospace only`"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns monospace correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||`spoiler and monospace`||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  However when combining both options only spoiler is visible. Combining styles is possible in Signal app. Would it be possible to allow these nested styles? Or is it possible now but requires some special escaping?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",container-file | source-file | source-file | test-file,"Nested styled text not working The problem Currently it appears that it is not possible to send messages using nested styled text. For example text that is both spoiler and monospaced. For example:  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||spoiler only||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns spoiler correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""`monospace only`"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns monospace correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||`spoiler and monospace`||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  However when combining both options only spoiler is visible. Combining styles is possible in Signal app. Would it be possible to allow these nested styles? Or is it possible now but requires some special escaping?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ container-file source-file source-file test-file",bug,0.85
190,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/190,Link device API fails to link the device,"When I tried to link my existing number to the signal cli running in a docker container using link device API, every-time after the QR scan, signal android app gave ""No device found"" or ""Network error"" toast and was failing to link the number. After searching through the internet I found similar issue reported here within another issue mentioned in below link: https://github.com/bbernhard/signal-cli-rest-api/issues/95#issuecomment-780006579 Since only workaround was given there which takes a while to search and apply, I'm raising this issue here again so it gets fixed and gets the link device API working.",source-file | source-file,"Link device API fails to link the device When I tried to link my existing number to the signal cli running in a docker container using link device API, every-time after the QR scan, signal android app gave ""No device found"" or ""Network error"" toast and was failing to link the number. After searching through the internet I found similar issue reported here within another issue mentioned in below link: https://github.com/bbernhard/signal-cli-rest-api/issues/95#issuecomment-780006579 Since only workaround was given there which takes a while to search and apply, I'm raising this issue here again so it gets fixed and gets the link device API working. source-file source-file",bug,0.9
95,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/95,QRCode link: please provide a name for a device,"So I installed signal-cli-rest-api ad addon on my Home Assistant and when I go to `http://192.168.200.245:8080/v1/about` I get nice message:  { ""versions"": [ ""v1"", ""v2"" ], ""build"": 2 }  Now I want to register additional device to my existing signal number So I say: `http://192.168.200.245:8080/v1/qrcodelink`. Documentation says ""No parameters"". Unfortunately I get this:  { ""error"": ""Please provide a name for the device"" }  Any help on this?",source-file | source-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file,"QRCode link: please provide a name for a device So I installed signal-cli-rest-api ad addon on my Home Assistant and when I go to `http://192.168.200.245:8080/v1/about` I get nice message:  { ""versions"": [ ""v1"", ""v2"" ], ""build"": 2 }  Now I want to register additional device to my existing signal number So I say: `http://192.168.200.245:8080/v1/qrcodelink`. Documentation says ""No parameters"". Unfortunately I get this:  { ""error"": ""Please provide a name for the device"" }  Any help on this? source-file source-file documentation-file documentation-file source-file source-file documentation-file documentation-file",bug,0.9
236,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/236,"Setting name, avatar doesn't update name","The problem I'm in rpc-json mode and want to change the username my contacts are seeing. When i send a put request to the endpoint, i get 204 back and after about 1 minute, the avatar is update, but i still only see the phone number as the ""username"" in signal messenger on my phone. Is this an issue with this client or is there something i'm doing wrong?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"Setting name, avatar doesn't update name The problem I'm in rpc-json mode and want to change the username my contacts are seeing. When i send a put request to the endpoint, i get 204 back and after about 1 minute, the avatar is update, but i still only see the phone number as the ""username"" in signal messenger on my phone. Is this an issue with this client or is there something i'm doing wrong?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.8
177,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/177,/v1/groups/{number}/{groupid}/block endpoint does not do anything (JSON-RPC),"The problem This is the debug log:  time=""2021-11-01T19:24:49+01:00"" level=debug msg=""full command: {\""jsonrpc\"":\""2.0\"",\""method\"":\""updateGroup\"",\""id\"":\""983f3b8b-13f0-48f7-a771-8db6329922f6\"",\""params\"":{\""groupId\"":\""<id>\""}}"" [GIN] 2021/11/01 - 19:24:49 | 204 | 4.440421ms | 192.168.X.Y | POST ""/v1/groups/+49<number>/group.<id>/block""  This looks like an updateGroup call without any meaningful parameters, and indeed the group is not blocked afterwards:  { ""name"": ""Testgruppe X"", ""id"": ""group.<id>"", ""internal_id"": ""<id>"", ""members"": [ ""+49<number 1>"", ""+49<number 2>"" ], ""blocked"": false, ""pending_invites"": [], ""pending_requests"": [], ""invite_link"": """" },  To my understanding, [this](https://github.com/AsamK/signal-cli/blob/master/run_tests.sh#L106) is what the command should look like. I tried to test this, but signal-cli told me ""This command doesn't work on linked devices."" so it looks like I can't verify on my host. Writing this out made me notice that the command was never gonna work via the API in the first place (as it is a linked device). However, the debug log still looks wrong.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_",source-file | source-file,"/v1/groups/{number}/{groupid}/block endpoint does not do anything (JSON-RPC) The problem This is the debug log:  time=""2021-11-01T19:24:49+01:00"" level=debug msg=""full command: {\""jsonrpc\"":\""2.0\"",\""method\"":\""updateGroup\"",\""id\"":\""983f3b8b-13f0-48f7-a771-8db6329922f6\"",\""params\"":{\""groupId\"":\""<id>\""}}"" [GIN] 2021/11/01 - 19:24:49 | 204 | 4.440421ms | 192.168.X.Y | POST ""/v1/groups/+49<number>/group.<id>/block""  This looks like an updateGroup call without any meaningful parameters, and indeed the group is not blocked afterwards:  { ""name"": ""Testgruppe X"", ""id"": ""group.<id>"", ""internal_id"": ""<id>"", ""members"": [ ""+49<number 1>"", ""+49<number 2>"" ], ""blocked"": false, ""pending_invites"": [], ""pending_requests"": [], ""invite_link"": """" },  To my understanding, [this](https://github.com/AsamK/signal-cli/blob/master/run_tests.sh#L106) is what the command should look like. I tried to test this, but signal-cli told me ""This command doesn't work on linked devices."" so it looks like I can't verify on my host. Writing this out made me notice that the command was never gonna work via the API in the first place (as it is a linked device). However, the debug log still looks wrong.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_ source-file source-file",bug,0.9
413,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/413,broken formatting when using styling with multicharacter emojis,"The problem When sending multicharacter emojis (for example emojis that use a skin color modifier) and styling (bold, italic, etc.), something about the formatting breaks. Depending on the actual message, the emoji will break or the formatting is shifted.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? json-rpc  What's the architecture of your host system? x86-64  Additional information Multicharacter emoji without styling works. json { ""message"": ""abcdefg"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/d1dc669e-6fc3-4954-8d29-a8b8997c7b5e)  When using a multicharacter emoji and then some styled text, the styling is shifted to the left by two characters. The `bc` is now styled bold and `fg` is no longer styled bold. json { ""message"": ""abc**defg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/bf334463-a88f-4d47-a7c6-0290b0b8473f)  When the styling is less then two characters away, the emoji breaks. *two characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/c6efbf80-a323-416c-a82a-806a3213e3af) *one characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/dc0cc8da-c970-4b6c-9e72-3f2d2bc75031) *directly after* json { ""message"": ""**abcdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/ff4ec511-b32f-489e-967e-3d7f575b1d14)  Weirdly enough this behaves differently on the Signal Windows Client than on the Android App. The previous screenshots are from the Windows Client, the following from the Android App. In the notification, the issue is not present at all, I guess because the message is stripped of the formatting anyways. ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/557301a0-ea9b-41ec-9ec6-d8bce3c0e168) Here's how the Android App behaves in the chat: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/4af4d379-ef07-4f9c-8586-a965405b3187)",source-file | test-file,"broken formatting when using styling with multicharacter emojis The problem When sending multicharacter emojis (for example emojis that use a skin color modifier) and styling (bold, italic, etc.), something about the formatting breaks. Depending on the actual message, the emoji will break or the formatting is shifted.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? json-rpc  What's the architecture of your host system? x86-64  Additional information Multicharacter emoji without styling works. json { ""message"": ""abcdefg"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/d1dc669e-6fc3-4954-8d29-a8b8997c7b5e)  When using a multicharacter emoji and then some styled text, the styling is shifted to the left by two characters. The `bc` is now styled bold and `fg` is no longer styled bold. json { ""message"": ""abc**defg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/bf334463-a88f-4d47-a7c6-0290b0b8473f)  When the styling is less then two characters away, the emoji breaks. *two characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/c6efbf80-a323-416c-a82a-806a3213e3af) *one characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/dc0cc8da-c970-4b6c-9e72-3f2d2bc75031) *directly after* json { ""message"": ""**abcdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/ff4ec511-b32f-489e-967e-3d7f575b1d14)  Weirdly enough this behaves differently on the Signal Windows Client than on the Android App. The previous screenshots are from the Windows Client, the following from the Android App. In the notification, the issue is not present at all, I guess because the message is stripped of the formatting anyways. ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/557301a0-ea9b-41ec-9ec6-d8bce3c0e168) Here's how the Android App behaves in the chat: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/4af4d379-ef07-4f9c-8586-a965405b3187) source-file test-file",bug,0.85
175,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/175,Swagger documentation of HTTP success status codes is incorrect?,"The problem I barely understand the Go language, but looking at [api.go](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go), I can see multiple endpoints that result in c.Status(http.StatusNoContent), which should be status code 204, when not erroring out, but their Swagger documentation lists them with code 200. A quick test confirmed that successful requests indeed give status 204 on my end. These endpoints are: - [/v1/configuration](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L749) (POST) - [/v1/groups/{number}/{groupid}/block](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L805) - [/v1/groups/{number}/{groupid}/join](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L838) - [/v1/groups/{number}/{groupid}/quit](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L871) The newly introduced /v1/typing-indicator/{number} endpoints also result in c.Status(http.StatusNoContent), but the documentation has them listed with status code 201. However, I haven't been able to test this yet. I apologize if there's just something that I'm missing because I don't know a lot about the Go language. But in case this is just an oversight in the documentation, I wanted to point this out. :)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_",source-file | source-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file,"Swagger documentation of HTTP success status codes is incorrect? The problem I barely understand the Go language, but looking at [api.go](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go), I can see multiple endpoints that result in c.Status(http.StatusNoContent), which should be status code 204, when not erroring out, but their Swagger documentation lists them with code 200. A quick test confirmed that successful requests indeed give status 204 on my end. These endpoints are: - [/v1/configuration](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L749) (POST) - [/v1/groups/{number}/{groupid}/block](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L805) - [/v1/groups/{number}/{groupid}/join](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L838) - [/v1/groups/{number}/{groupid}/quit](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L871) The newly introduced /v1/typing-indicator/{number} endpoints also result in c.Status(http.StatusNoContent), but the documentation has them listed with status code 201. However, I haven't been able to test this yet. I apologize if there's just something that I'm missing because I don't know a lot about the Go language. But in case this is just an oversight in the documentation, I wanted to point this out. :)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_ source-file source-file documentation-file documentation-file source-file source-file documentation-file documentation-file",bug,0.9
654,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/654,Parameter notify_self only works for group chats,"The problem When sending a message the `notify_self` parameter set to false is only take effect when the recipient of the message is a group. I guess the reason is that the parameter is not being passed to the function [SignalCliSendRequest](https://github.com/bbernhard/signal-cli-rest-api/blob/42f10c3dd73826cb0c3019eae154abd272469e20/src/client/client.go#L793). I think it doesn't work either if a username is used, but I haven't tested it.  Release version shell  curl -X GET 'http://127.0.0.1:8999/v1/about' {""versions"":[""v1"",""v2""],""build"":2,""mode"":""native"",""version"":""0.91"",""capabilities"":{""v2/send"":[""quotes"",""mentions""]}}   Test curl to a group shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""group.SDh0aW9PbVUze[]TL0VqND0=""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:01:53Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin -g H8tio[]z0atS/Ej4=""   Test curl to a phone number shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""+XXX""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:05:35Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin +XXX --notify-self""   Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Parameter notify_self only works for group chats The problem When sending a message the `notify_self` parameter set to false is only take effect when the recipient of the message is a group. I guess the reason is that the parameter is not being passed to the function [SignalCliSendRequest](https://github.com/bbernhard/signal-cli-rest-api/blob/42f10c3dd73826cb0c3019eae154abd272469e20/src/client/client.go#L793). I think it doesn't work either if a username is used, but I haven't tested it.  Release version shell  curl -X GET 'http://127.0.0.1:8999/v1/about' {""versions"":[""v1"",""v2""],""build"":2,""mode"":""native"",""version"":""0.91"",""capabilities"":{""v2/send"":[""quotes"",""mentions""]}}   Test curl to a group shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""group.SDh0aW9PbVUze[]TL0VqND0=""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:01:53Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin -g H8tio[]z0atS/Ej4=""   Test curl to a phone number shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""+XXX""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:05:35Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin +XXX --notify-self""   Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.95
466,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/466,/v1/contacts and /v1/contacts{number}/sync don't seem to work,The problem I am running the latest 0.80 version and cannot seem to get the api endpoints for /v1/contacts and /v1/contacts{number}/sync to work. I just get an error 404 returned everytime. Would you be able to provide some sample curl commands and confirm if these endpoints do in fact work in the latest version?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_,source-file | source-file | documentation-file | documentation-file,/v1/contacts and /v1/contacts{number}/sync don't seem to work The problem I am running the latest 0.80 version and cannot seem to get the api endpoints for /v1/contacts and /v1/contacts{number}/sync to work. I just get an error 404 returned everytime. Would you be able to provide some sample curl commands and confirm if these endpoints do in fact work in the latest version?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file documentation-file documentation-file,bug,0.9
187,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/187,v1/groups/{phone#] API endpoint returning Go struct error,"The problem Steps to reproduce:  curl -X GET -H ""Content-Type: application/json"" 'http://192.168.86.44:8080/v1/groups/+15853710007' > out.json && python -m json.tool out.json | less  And getting this response:  { ""error"": ""json: cannot unmarshal object into Go struct field SignalCliGroupEntry.pendingMembers of type string"" }  I would expect to get the regular JSON output with the content of the groups.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"v1/groups/{phone#] API endpoint returning Go struct error The problem Steps to reproduce:  curl -X GET -H ""Content-Type: application/json"" 'http://192.168.86.44:8080/v1/groups/+15853710007' > out.json && python -m json.tool out.json | less  And getting this response:  { ""error"": ""json: cannot unmarshal object into Go struct field SignalCliGroupEntry.pendingMembers of type string"" }  I would expect to get the regular JSON output with the content of the groups.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.95
657,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/657,Group description missing from groups.,"The problem I am trying to get a group description, but both list_group and list_groups don't seem to return it. In the signal-cli documentation, they have this example listed which shows a group description being returned. REQUEST: `{""jsonrpc"":""2.0"",""method"":""listGroups"",""id"":""my special mark""}` RESPONSE: `{""jsonrpc"":""2.0"",""result"":[{""id"":""Pmpi+EfPWmsxiomLe9Nx2XF9HOE483p6iKiFj65iMwI="",""name"":""My Group"",""description"":""Its special because it is mine."",""isMember"":true,""isBlocked"":false,""members"":[""+33123456789"",""+440123456789""],""pendingMembers"":[],""requestingMembers"":[],""admins"":[""+33123456789"",""+440123456789""],""groupInviteLink"":""https://signal.group/#CjQKIAtcbUw482i7bqvmJCwdgvg0FMif52N5v9lGg_bE4U3zEhCjHKSaPzWImMpnCbU8A1r0""}],""id"":""my special mark""}` Do you know if this is a limitation with the API, or is the Signal-CLI documentation out of date? Thanks either way!  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also tried JSON-RPC mode, no change.",source-file,"Group description missing from groups. The problem I am trying to get a group description, but both list_group and list_groups don't seem to return it. In the signal-cli documentation, they have this example listed which shows a group description being returned. REQUEST: `{""jsonrpc"":""2.0"",""method"":""listGroups"",""id"":""my special mark""}` RESPONSE: `{""jsonrpc"":""2.0"",""result"":[{""id"":""Pmpi+EfPWmsxiomLe9Nx2XF9HOE483p6iKiFj65iMwI="",""name"":""My Group"",""description"":""Its special because it is mine."",""isMember"":true,""isBlocked"":false,""members"":[""+33123456789"",""+440123456789""],""pendingMembers"":[],""requestingMembers"":[],""admins"":[""+33123456789"",""+440123456789""],""groupInviteLink"":""https://signal.group/#CjQKIAtcbUw482i7bqvmJCwdgvg0FMif52N5v9lGg_bE4U3zEhCjHKSaPzWImMpnCbU8A1r0""}],""id"":""my special mark""}` Do you know if this is a limitation with the API, or is the Signal-CLI documentation out of date? Thanks either way!  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also tried JSON-RPC mode, no change. source-file",bug,0.9
103,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/103,No serializer found for class org.asamk.signal.json.JsonSyncMessage and no properties discovered to create BeanSerializer,"On /receive { error: ""WARN ReceiveCommand - ""--json"" option has been deprecated, please use the global ""--output=json"" instead. Failed to send/receive message (Assertion): com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) java.lang.AssertionError: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at org.asamk.signal.JsonWriter.write(JsonWriter.java:32) at org.asamk.signal.JsonReceiveMessageHandler.handleMessage(JsonReceiveMessageHandler.java:37) at org.asamk.signal.manager.Manager.receiveMessages(Manager.java:1782) at org.asamk.signal.commands.ReceiveCommand.handleCommand(ReceiveCommand.java:168) at org.asamk.signal.App.handleLocalCommand(App.java:211) at org.asamk.signal.App.init(App.java:169) at org.asamk.signal.Main.main(Main.java:43) Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:313) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:722) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:643) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:33) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3906) at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3202) at org.asamk.signal.JsonWriter.write(JsonWriter.java:29)  6 more If you use an Oracle JRE please check if you have unlimited strength crypto enabled, see README "" }",source-file | source-file,"No serializer found for class org.asamk.signal.json.JsonSyncMessage and no properties discovered to create BeanSerializer On /receive { error: ""WARN ReceiveCommand - ""--json"" option has been deprecated, please use the global ""--output=json"" instead. Failed to send/receive message (Assertion): com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) java.lang.AssertionError: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at org.asamk.signal.JsonWriter.write(JsonWriter.java:32) at org.asamk.signal.JsonReceiveMessageHandler.handleMessage(JsonReceiveMessageHandler.java:37) at org.asamk.signal.manager.Manager.receiveMessages(Manager.java:1782) at org.asamk.signal.commands.ReceiveCommand.handleCommand(ReceiveCommand.java:168) at org.asamk.signal.App.handleLocalCommand(App.java:211) at org.asamk.signal.App.init(App.java:169) at org.asamk.signal.Main.main(Main.java:43) Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:313) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:722) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:643) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:33) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3906) at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3202) at org.asamk.signal.JsonWriter.write(JsonWriter.java:29)  6 more If you use an Oracle JRE please check if you have unlimited strength crypto enabled, see README "" } source-file source-file",bug,0.95
402,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/402,Cannot encode QR code: content too large for fixed size QR Code version 10,"The problem I am trying to generate QR code for a new device but getting `{""error"":""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1172 bits, maximum length is 976 bits)""}` in response. images: latest-dev / latest ![qrcodelink_device_name=signal-api](https://github.com/bbernhard/signal-cli-rest-api/assets/70468066/1bc14fa5-f214-4f9c-b0ec-b98ee17d06a6)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file | documentation-file | documentation-file,"Cannot encode QR code: content too large for fixed size QR Code version 10 The problem I am trying to generate QR code for a new device but getting `{""error"":""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1172 bits, maximum length is 976 bits)""}` in response. images: latest-dev / latest ![qrcodelink_device_name=signal-api](https://github.com/bbernhard/signal-cli-rest-api/assets/70468066/1bc14fa5-f214-4f9c-b0ec-b98ee17d06a6)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file documentation-file documentation-file",bug,0.9
493,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/493,Fatal error: concurrent map writes,"The problem In json-rpc mode, when several clients are connected to `/v1/receive/+000000000000`, the container crashes with an error:  fatal error: concurrent map writes goroutine 58 [running]: github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000502ea0, {0xcfdba0?, 0xc000db01c0}, 0xc000da8300) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x1dd net/http.serverHandler.ServeHTTP({0xc0004d0c90?}, {0xcfdba0?, 0xc000db01c0?}, 0x6?) /usr/local/go/src/net/http/server.go:2938 +0x8e net/http.(*conn).serve(0xc0004cfd40, {0xcff6c0, 0xc0004581e0}) /usr/local/go/src/net/http/server.go:2009 +0x5f4 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3086 +0x5cb goroutine 107 [runnable]: internal/syscall/unix.GetRandom({0xc0002d64d0?, 0x10?, 0x10?}, 0x0?) /usr/local/go/src/internal/syscall/unix/getrandom.go:21 +0xbe crypto/rand.getRandom({0xc0002d64d0?, 0x10, 0x0?}) /usr/local/go/src/crypto/rand/rand_getrandom.go:40 +0x1f crypto/rand.init.0.batched.func1({0xc0002d64d0?, 0x0?, 0x0?}) /usr/local/go/src/crypto/rand/rand.go:38 +0x90 crypto/rand.(*reader).Read(0xc000037780, {0xc0002d64d0, 0x10, 0x10}) /usr/local/go/src/crypto/rand/rand_unix.go:56 +0x108 io.ReadAtLeast({0xcfaa60, 0xc000037780}, {0xc0002d64d0, 0x10, 0x10}, 0x10) /usr/local/go/src/io/io.go:335 +0x90 io.ReadFull() /usr/local/go/src/io/io.go:354 github.com/gofrs/uuid.(*Gen).NewV4(0xc000616b90) /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:262 +0x51 github.com/gofrs/uuid.NewV4() /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:62 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).GetReceiveChannel(0xc0006163c0) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:173 +0x42 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).GetReceiveChannel(0x0?) /tmp/signal-cli-rest-api-src/client/client.go:738 +0x85 github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000dac420, {0xc00049e0a0, 0xd}, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:393 +0x50 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 49 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000392580, {0xc000388130, 0xd}, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:400 +0x172 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 114 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000392580, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 59 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc00034a580, 0xc0003502a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 104 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 108 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000dac420, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Fatal error: concurrent map writes The problem In json-rpc mode, when several clients are connected to `/v1/receive/+000000000000`, the container crashes with an error:  fatal error: concurrent map writes goroutine 58 [running]: github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000502ea0, {0xcfdba0?, 0xc000db01c0}, 0xc000da8300) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x1dd net/http.serverHandler.ServeHTTP({0xc0004d0c90?}, {0xcfdba0?, 0xc000db01c0?}, 0x6?) /usr/local/go/src/net/http/server.go:2938 +0x8e net/http.(*conn).serve(0xc0004cfd40, {0xcff6c0, 0xc0004581e0}) /usr/local/go/src/net/http/server.go:2009 +0x5f4 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3086 +0x5cb goroutine 107 [runnable]: internal/syscall/unix.GetRandom({0xc0002d64d0?, 0x10?, 0x10?}, 0x0?) /usr/local/go/src/internal/syscall/unix/getrandom.go:21 +0xbe crypto/rand.getRandom({0xc0002d64d0?, 0x10, 0x0?}) /usr/local/go/src/crypto/rand/rand_getrandom.go:40 +0x1f crypto/rand.init.0.batched.func1({0xc0002d64d0?, 0x0?, 0x0?}) /usr/local/go/src/crypto/rand/rand.go:38 +0x90 crypto/rand.(*reader).Read(0xc000037780, {0xc0002d64d0, 0x10, 0x10}) /usr/local/go/src/crypto/rand/rand_unix.go:56 +0x108 io.ReadAtLeast({0xcfaa60, 0xc000037780}, {0xc0002d64d0, 0x10, 0x10}, 0x10) /usr/local/go/src/io/io.go:335 +0x90 io.ReadFull() /usr/local/go/src/io/io.go:354 github.com/gofrs/uuid.(*Gen).NewV4(0xc000616b90) /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:262 +0x51 github.com/gofrs/uuid.NewV4() /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:62 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).GetReceiveChannel(0xc0006163c0) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:173 +0x42 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).GetReceiveChannel(0x0?) /tmp/signal-cli-rest-api-src/client/client.go:738 +0x85 github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000dac420, {0xc00049e0a0, 0xd}, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:393 +0x50 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 49 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000392580, {0xc000388130, 0xd}, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:400 +0x172 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 114 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000392580, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 59 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc00034a580, 0xc0003502a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 104 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 108 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000dac420, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
412,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/412,Cannot send anything,"The problem After registering a number on a fresh container with no prior configuration I am not able to send any messages. Command that was run:  curl -X POST -H ""Content-Type: application/json"" 'http://localhost:8080/v2/send' -d '{""message"": ""Test via Signal API!"", ""number"": ""<sender>"", ""recipients"": [ ""<recipient>"" ]}'  And the response is:  { ""error"": ""WARN SendHelper - Failed to send message due to IO exception: Unable to parse entity\nFailed to send message\n"" }  In the container logs I am seeing:  [GIN] <timestamp> | 400 | 6.6703771s | 10.0.2.100 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information I encountered this issue in all modes, i.e. normal, native and json-rpc. Further, I have a version where a number was registered under version 0.64 and strangely when mounting this configuration directory, I can do everything without any problems..",container-file | other-file | source-file | source-file,"Cannot send anything The problem After registering a number on a fresh container with no prior configuration I am not able to send any messages. Command that was run:  curl -X POST -H ""Content-Type: application/json"" 'http://localhost:8080/v2/send' -d '{""message"": ""Test via Signal API!"", ""number"": ""<sender>"", ""recipients"": [ ""<recipient>"" ]}'  And the response is:  { ""error"": ""WARN SendHelper - Failed to send message due to IO exception: Unable to parse entity\nFailed to send message\n"" }  In the container logs I am seeing:  [GIN] <timestamp> | 400 | 6.6703771s | 10.0.2.100 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information I encountered this issue in all modes, i.e. normal, native and json-rpc. Further, I have a version where a number was registered under version 0.64 and strangely when mounting this configuration directory, I can do everything without any problems.. container-file other-file source-file source-file",bug,0.9
369,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/369,Search endpoint broken with multiple accounts,"The problem I have 2 Signal accounts registered on the server (version 0.66). When trying to use `/v1/search`, the following error is returned: `Multiple users found, you need to specify an account (phone number) with -a\n` Directly using signal-cli-native from within the container works when supplying one of the registered accounts with the -a parameter like suggested in the error message. Maybe the search endpoint could be changed to to `/v1/search/{number}`?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information This issue was previously mentioned in a feature request: [Search for registered numbers with specific account for multiple users #253](253)",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Search endpoint broken with multiple accounts The problem I have 2 Signal accounts registered on the server (version 0.66). When trying to use `/v1/search`, the following error is returned: `Multiple users found, you need to specify an account (phone number) with -a\n` Directly using signal-cli-native from within the container works when supplying one of the registered accounts with the -a parameter like suggested in the error message. Maybe the search endpoint could be changed to to `/v1/search/{number}`?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information This issue was previously mentioned in a feature request: [Search for registered numbers with specific account for multiple users #253](253) source-file source-file source-file documentation-file documentation-file source-file",bug,0.9
1,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/1,cyrillic symbols dosn't support?,Thanks for your solution integration signal to HA. Everything works fine (but slow) except for the Cyrillic alphabet. ![photo_2020-01-16_12-02-27](https://user-images.githubusercontent.com/50143425/72509283-53a7ba00-3858-11ea-9b3b-9019fe87f5c7.jpg),container-file | container-file,cyrillic symbols dosn't support? Thanks for your solution integration signal to HA. Everything works fine (but slow) except for the Cyrillic alphabet. ![photo_2020-01-16_12-02-27](https://user-images.githubusercontent.com/50143425/72509283-53a7ba00-3858-11ea-9b3b-9019fe87f5c7.jpg) container-file container-file,bug,0.8
550,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/550,Using UUID with Signal CLI REST API,"The problem Hi everyone, I'm having an issue with the Signal CLI REST API and could use some help. **Problem:** When I receive a message using the Signal CLI REST API, I only get a UUID as the sender information. Here is an example of a received message: json [ { ""envelope"": { ""source"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceNumber"": null, ""sourceUuid"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceName"": ""xxxx"", ""sourceDevice"": 4, ""timestamp"": 1718816184062, ""dataMessage"": { ""timestamp"": 1718816184062, ""message"": ""Test"", ""expiresInSeconds"": 0, ""viewOnce"": false } }, ""account"": ""+49xxxxxxxxxxxxx"" } ]  As you can see, I only get the UUID (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`) as the sender information. **Question:** How can I reply to this message when I only have the UUID? I tried sending a message using the following curl command, but it doesn't work: sh curl -X POST -H ""Content-Type: application/json"" \ -d '{ ""message"": ""Hello!"", ""number"": ""+49xxxxxxxxxxxxx"", ""recipients"": [""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx""] }' \ https://example.com/signal/v2/send  I receive the following error: json {""error"":""java.lang.RuntimeException: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:105)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipient(RecipientHelper.java:93)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:622)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:598)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:726)\n\tat org.asamk.signal.commands.SendCommand.handleCommand(SendCommand.java:245)\n\tat org.asamk.signal.commands.CommandHandler.handleLocalCommand(CommandHandler.java:35)\n\tat org.asamk.signal.App.handleLocalCommand(App.java:278)\n\tat org.asamk.signal.App.handleCommand(App.java:179)\n\tat org.asamk.signal.App.init(App.java:144)\n\tat org.asamk.signal.Main.main(Main.java:56)\nCaused by: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.signal.libsignal.internal.Native.Username_Hash(Native Method)\n\tat org.signal.libsignal.usernames.Username.lambda$hash$6(Username.java:148)\n\tat org.signal.libsignal.internal.FilterExceptions.filterExceptions(FilterExceptions.java:143)\n\tat org.signal.libsignal.usernames.Username.hash(Username.java:148)\n\tat org.signal.libsignal.usernames.Username.\u003cinit\u003e(Username.java:57)\n\tat org.asamk.signal.manager.helper.RecipientHelper.getUsernameFromUsernameOrLink(RecipientHelper.java:137)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:103)\n\t 10 more\n""}  It seems like the UUID is being interpreted as a username, which must contain a `.` (there is a similar question open but it does not mention the uuid problem). Is there a way to send a message directly to a UUID, or do I need to identify the sender differently? Am I perhaps using the API request incorrectly? Any help or example request would be greatly appreciated! Thank you in advance!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Using UUID with Signal CLI REST API The problem Hi everyone, I'm having an issue with the Signal CLI REST API and could use some help. **Problem:** When I receive a message using the Signal CLI REST API, I only get a UUID as the sender information. Here is an example of a received message: json [ { ""envelope"": { ""source"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceNumber"": null, ""sourceUuid"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceName"": ""xxxx"", ""sourceDevice"": 4, ""timestamp"": 1718816184062, ""dataMessage"": { ""timestamp"": 1718816184062, ""message"": ""Test"", ""expiresInSeconds"": 0, ""viewOnce"": false } }, ""account"": ""+49xxxxxxxxxxxxx"" } ]  As you can see, I only get the UUID (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`) as the sender information. **Question:** How can I reply to this message when I only have the UUID? I tried sending a message using the following curl command, but it doesn't work: sh curl -X POST -H ""Content-Type: application/json"" \ -d '{ ""message"": ""Hello!"", ""number"": ""+49xxxxxxxxxxxxx"", ""recipients"": [""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx""] }' \ https://example.com/signal/v2/send  I receive the following error: json {""error"":""java.lang.RuntimeException: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:105)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipient(RecipientHelper.java:93)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:622)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:598)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:726)\n\tat org.asamk.signal.commands.SendCommand.handleCommand(SendCommand.java:245)\n\tat org.asamk.signal.commands.CommandHandler.handleLocalCommand(CommandHandler.java:35)\n\tat org.asamk.signal.App.handleLocalCommand(App.java:278)\n\tat org.asamk.signal.App.handleCommand(App.java:179)\n\tat org.asamk.signal.App.init(App.java:144)\n\tat org.asamk.signal.Main.main(Main.java:56)\nCaused by: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.signal.libsignal.internal.Native.Username_Hash(Native Method)\n\tat org.signal.libsignal.usernames.Username.lambda$hash$6(Username.java:148)\n\tat org.signal.libsignal.internal.FilterExceptions.filterExceptions(FilterExceptions.java:143)\n\tat org.signal.libsignal.usernames.Username.hash(Username.java:148)\n\tat org.signal.libsignal.usernames.Username.\u003cinit\u003e(Username.java:57)\n\tat org.asamk.signal.manager.helper.RecipientHelper.getUsernameFromUsernameOrLink(RecipientHelper.java:137)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:103)\n\t 10 more\n""}  It seems like the UUID is being interpreted as a username, which must contain a `.` (there is a similar question open but it does not mention the uuid problem). Is there a way to send a message directly to a UUID, or do I need to identify the sender differently? Am I perhaps using the API request incorrectly? Any help or example request would be greatly appreciated! Thank you in advance!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
387,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/387,Delete group,"The problem I created a group with only one memeber and an empty name: `curl -X POST -H ""Content-Type: application/json"" -d '{""name"": """", ""members"": [""+123456789012""]}' 'http://localhost:8080/v1/groups/+123456789012'` Now I want to delete the group. This group is not displayed in the Signal, but it is displayed on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'` For delete the group I am executing the command in Docker terminal: `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012/group.dHlV0QT0='` or `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+380978483884/dHlV0QT0='` but groups are not removed, although I don't get an error, just an empty string in the response. I still see these groups on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'`  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Delete group The problem I created a group with only one memeber and an empty name: `curl -X POST -H ""Content-Type: application/json"" -d '{""name"": """", ""members"": [""+123456789012""]}' 'http://localhost:8080/v1/groups/+123456789012'` Now I want to delete the group. This group is not displayed in the Signal, but it is displayed on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'` For delete the group I am executing the command in Docker terminal: `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012/group.dHlV0QT0='` or `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+380978483884/dHlV0QT0='` but groups are not removed, although I don't get an error, just an empty string in the response. I still see these groups on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'`  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.95
489,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/489,0.142-dev: Unable to start in json-rpc mode,"The problem When switching to this latest dev image tag, the log output shows the following:  signal | + [ json-rpc = json-rpc ] signal | + /usr/bin/jsonrpc2-helper signal | time=""2024-02-23T08:23:22Z"" level=info msg=""Updated jsonrpc2.yml""  signal | time=""2024-02-23T08:23:23Z"" level=info msg=""Started Signal Messenger REST API"" signal | time=""2024-02-23T08:23:23Z"" level=error msg=""Couldn't read data for number <multi-account>: EOF. Is the number properly registered?"" signal | [GIN] 2024/02/23 - 08:23:52 | 500 | 99.92s | 172.18.0.10 | GET ""/v1/accounts""  Response to `GET /v1/accounts` is json { ""error"": ""Couldn't get list of accounts: write tcp 127.0.0.1:44624-\u003e127.0.0.1:6001: write: broken pipe"" }  The updated `jsonrpc2.yml` reads yaml config: <multi-account>: tcp_port: 6001 fifo_pathname: /tmp/sigsocket1   Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information Only one account is registered in the configuration of the instance.",source-file,"0.142-dev: Unable to start in json-rpc mode The problem When switching to this latest dev image tag, the log output shows the following:  signal | + [ json-rpc = json-rpc ] signal | + /usr/bin/jsonrpc2-helper signal | time=""2024-02-23T08:23:22Z"" level=info msg=""Updated jsonrpc2.yml""  signal | time=""2024-02-23T08:23:23Z"" level=info msg=""Started Signal Messenger REST API"" signal | time=""2024-02-23T08:23:23Z"" level=error msg=""Couldn't read data for number <multi-account>: EOF. Is the number properly registered?"" signal | [GIN] 2024/02/23 - 08:23:52 | 500 | 99.92s | 172.18.0.10 | GET ""/v1/accounts""  Response to `GET /v1/accounts` is json { ""error"": ""Couldn't get list of accounts: write tcp 127.0.0.1:44624-\u003e127.0.0.1:6001: write: broken pipe"" }  The updated `jsonrpc2.yml` reads yaml config: <multi-account>: tcp_port: 6001 fifo_pathname: /tmp/sigsocket1   Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information Only one account is registered in the configuration of the instance. source-file",bug,0.9
19,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/19,error Captcha required for verification,"Hi ! When I run the CURL post to verify phone number : `curl -X POST -H ""Content-Type: application/json"" 'http://192.168.255.1:8080/v1/register/+336xxxxxxxx'` I get : `{""error"":""Captcha required for verification (null)\n""}` any idea ?",source-file | source-file,"error Captcha required for verification Hi ! When I run the CURL post to verify phone number : `curl -X POST -H ""Content-Type: application/json"" 'http://192.168.255.1:8080/v1/register/+336xxxxxxxx'` I get : `{""error"":""Captcha required for verification (null)\n""}` any idea ? source-file source-file",bug,0.9
135,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/135,Scheduler uses hard coded port 8080,"I installed signal-cli-rest-api recently. I needed to change the port, because 8080 was already used. It worked, but I noticed crashed in the docker logs.  time=""2021-05-22T08:49:00+02:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +49XXXX: Get \""http://127.0.0.1:8080/v1/receive/+49XXXX\"": dial tcp 127.0.0.1:8080: connect: connection refused"" panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x5b1ce8] goroutine 10 [running]: main.main.func1.1(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x0, 0x0, 0xe36d8, 0x1cfa6c0) /tmp/signal-cli-rest-api-src/main.go:175 +0x134 path/filepath.walk(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:360 +0x308 path/filepath.walk(0x1c921b0, 0x22, 0x7d2330, 0x1cfa630, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.walk(0xbec4ae48, 0x1d, 0x7d2330, 0x1cfa120, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.Walk(0xbec4ae48, 0x1d, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:406 +0xe8 main.main.func1() /tmp/signal-cli-rest-api-src/main.go:167 +0x30 github.com/robfig/cron/v3.FuncJob.Run(0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:136 +0x1c github.com/robfig/cron/v3.(*Cron).startJob.func1(0x1dcc180, 0x7cb188, 0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:312 +0x58 created by github.com/robfig/cron/v3.(*Cron).startJob /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:310 +0x58  The port is still 8080 in the scheduler call. This can also be seen in the source:  log.Debug(""AUTO_RECEIVE_SCHEDULE: Calling receive for number "", filename) resp, err := http.Get(""http://127.0.0.1:8080/v1/receive/""+filename)  (https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/main.go#L171)",source-file | source-file,"Scheduler uses hard coded port 8080 I installed signal-cli-rest-api recently. I needed to change the port, because 8080 was already used. It worked, but I noticed crashed in the docker logs.  time=""2021-05-22T08:49:00+02:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +49XXXX: Get \""http://127.0.0.1:8080/v1/receive/+49XXXX\"": dial tcp 127.0.0.1:8080: connect: connection refused"" panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x5b1ce8] goroutine 10 [running]: main.main.func1.1(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x0, 0x0, 0xe36d8, 0x1cfa6c0) /tmp/signal-cli-rest-api-src/main.go:175 +0x134 path/filepath.walk(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:360 +0x308 path/filepath.walk(0x1c921b0, 0x22, 0x7d2330, 0x1cfa630, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.walk(0xbec4ae48, 0x1d, 0x7d2330, 0x1cfa120, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.Walk(0xbec4ae48, 0x1d, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:406 +0xe8 main.main.func1() /tmp/signal-cli-rest-api-src/main.go:167 +0x30 github.com/robfig/cron/v3.FuncJob.Run(0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:136 +0x1c github.com/robfig/cron/v3.(*Cron).startJob.func1(0x1dcc180, 0x7cb188, 0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:312 +0x58 created by github.com/robfig/cron/v3.(*Cron).startJob /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:310 +0x58  The port is still 8080 in the scheduler call. This can also be seen in the source:  log.Debug(""AUTO_RECEIVE_SCHEDULE: Calling receive for number "", filename) resp, err := http.Get(""http://127.0.0.1:8080/v1/receive/""+filename)  (https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/main.go#L171) source-file source-file",bug,0.9
