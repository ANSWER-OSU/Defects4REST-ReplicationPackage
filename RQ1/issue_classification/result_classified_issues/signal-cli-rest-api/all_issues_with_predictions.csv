issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence
417,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/417,Allow setting group avatar,"Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be great, if one could set the group chat avatar. Ideally upon creation of the group. signal-cli seems to allow [updating](https://github.com/AsamK/signal-cli/blob/master/client/src/cli.rs#L282) a group with an avatar at least.",source-file | source-file | source-file | documentation-file | documentation-file,"Allow setting group avatar Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be great, if one could set the group chat avatar. Ideally upon creation of the group. signal-cli seems to allow [updating](https://github.com/AsamK/signal-cli/blob/master/client/src/cli.rs#L282) a group with an avatar at least. source-file source-file source-file documentation-file documentation-file",no-bug,0.9
428,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/428,API: send - special case for single recipients for use with limited senders,"Feature Request The `v2/send` endpoint's requirement that `recipients` be a list of strings is difficult to satisfy when calling through services that offer limited expressiveness for building a JSON object. While this isn't the API's fault, it would occasionally be really helpful if `""recipients"":""number""` were treated as being equivalent to `""recipients"":[""number""]`, or if there was an alternative `""recipient"":""number""` parameter with the same effect. I've been struggling with satisfying this endpoint lately in various notifier services: [Here](https://github.com/crazy-max/diun/issues/1005) with `diun`, although I found a workaround; [Here](https://github.com/containrrr/shoutrrr/issues/399) with shoutrrr, which maps url query params into a single level dict of strings, but can't currently express more complex JSON.",source-file,"API: send - special case for single recipients for use with limited senders Feature Request The `v2/send` endpoint's requirement that `recipients` be a list of strings is difficult to satisfy when calling through services that offer limited expressiveness for building a JSON object. While this isn't the API's fault, it would occasionally be really helpful if `""recipients"":""number""` were treated as being equivalent to `""recipients"":[""number""]`, or if there was an alternative `""recipient"":""number""` parameter with the same effect. I've been struggling with satisfying this endpoint lately in various notifier services: [Here](https://github.com/crazy-max/diun/issues/1005) with `diun`, although I found a workaround; [Here](https://github.com/containrrr/shoutrrr/issues/399) with shoutrrr, which maps url query params into a single level dict of strings, but can't currently express more complex JSON. source-file",no-bug,0.9
218,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/218,Updating avatar,"Hello, I like this addon very much, but cant get one thing to work. I want to set my personal avatar with the command for updating profiles. Can anybody tell me what ist expected as ""string""? I tried a path/filename to a .gif on my RaspberryPi in the size of 50x50 and had to learn, that I have to encode it in Base64. I did this using an online-tool, but this doesnt work, too, but with no error. I found no tips how I can get it to work. This is what I mean: ""base64_avatar"": ""string"" Thank you in advance! Dirk",source-file | source-file,"Updating avatar Hello, I like this addon very much, but cant get one thing to work. I want to set my personal avatar with the command for updating profiles. Can anybody tell me what ist expected as ""string""? I tried a path/filename to a .gif on my RaspberryPi in the size of 50x50 and had to learn, that I have to encode it in Base64. I did this using an online-tool, but this doesnt work, too, but with no error. I found no tips how I can get it to work. This is what I mean: ""base64_avatar"": ""string"" Thank you in advance! Dirk source-file source-file",no-bug,0.7
410,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/410,setting group_link not having an effect when creating group,"The problem When creating a group with `""http://127.0.0.1:8080/v1/groups/PHONE_NUMBER""` and `json={'description': 'string', 'group_link': 'enabled', 'members': ['PHONE_NUMBER'], 'name': 'Test', 'permissions': {'add_members': 'only-admins', 'edit_group': 'only-admins'}}` with group_link = enabled the group is created, however 'Group link' remains disabled in the new group.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file,"setting group_link not having an effect when creating group The problem When creating a group with `""http://127.0.0.1:8080/v1/groups/PHONE_NUMBER""` and `json={'description': 'string', 'group_link': 'enabled', 'members': ['PHONE_NUMBER'], 'name': 'Test', 'permissions': {'add_members': 'only-admins', 'edit_group': 'only-admins'}}` with group_link = enabled the group is created, however 'Group link' remains disabled in the new group.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file",bug,0.9
129,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/129,"Add possibility to call ""receive"" periodically",Add an option to the `docker-compose.yml` file to periodically call the `receive` endpoint.,documentation-file | config-file | other-file | other-file | source-file | documentation-file | documentation-file | config-file | other-file | other-file | source-file | documentation-file,"Add possibility to call ""receive"" periodically Add an option to the `docker-compose.yml` file to periodically call the `receive` endpoint. documentation-file config-file other-file other-file source-file documentation-file documentation-file config-file other-file other-file source-file documentation-file",no-bug,0.9
403,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/403,Actionable information on $stderr goes to nirvana,"The problem On this line here: https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/client/cli.go#L109 only `cmd.Stderr` but not `cmd.Stdout` is part of the error message. This is unfortunate. Why? When our HTTP client sends a request to `signal-cli-rest-api` all we see is the following response:  {""error"":""Failed to send message\n""}  That's it. But if we try to send the same message to the same number again with `signal-cli`, we also see:  Failed to send (some) messages: +49176xxxxxxxx: CAPTCHA proof required for sending to \""+49176xxxxxxxx\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""6002d6d0-0c16-xxxx-xxxx-xxxxxxxxxxxx\"", or wait \""86400\"" seconds. To get the captcha token, go to https://signalcaptchas.org/challenge/generate.html Check the developer tools (F12) console for a failed redirect to signalcaptcha:// Everything after signalcaptcha:// is the captcha token. Use the following command to submit the captcha token: signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  This message contains the challenge token(!) This is important for the HTTP client because it could throw a specific error and send this information along with it, e.g. via Sentry, to a human to solve the problem. Based on our experience, this error occurs every now and then. Unfortunately it is phone number specific, so sending messages *to another phone number* works **just fine** making it difficult to become aware of this issue. Waiting the specified 86400 seconds does nothing. So we can no longer message that person (bad) and we unaware of it (even worse).  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [ ] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Actionable information on $stderr goes to nirvana The problem On this line here: https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/client/cli.go#L109 only `cmd.Stderr` but not `cmd.Stdout` is part of the error message. This is unfortunate. Why? When our HTTP client sends a request to `signal-cli-rest-api` all we see is the following response:  {""error"":""Failed to send message\n""}  That's it. But if we try to send the same message to the same number again with `signal-cli`, we also see:  Failed to send (some) messages: +49176xxxxxxxx: CAPTCHA proof required for sending to \""+49176xxxxxxxx\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""6002d6d0-0c16-xxxx-xxxx-xxxxxxxxxxxx\"", or wait \""86400\"" seconds. To get the captcha token, go to https://signalcaptchas.org/challenge/generate.html Check the developer tools (F12) console for a failed redirect to signalcaptcha:// Everything after signalcaptcha:// is the captcha token. Use the following command to submit the captcha token: signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  This message contains the challenge token(!) This is important for the HTTP client because it could throw a specific error and send this information along with it, e.g. via Sentry, to a human to solve the problem. Based on our experience, this error occurs every now and then. Unfortunately it is phone number specific, so sending messages *to another phone number* works **just fine** making it difficult to become aware of this issue. Waiting the specified 86400 seconds does nothing. So we can no longer message that person (bad) and we unaware of it (even worse).  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [ ] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
224,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/224,json-rpc mode doesn't work with existing linked devices,"The problem I created a linked device using native mode, but when I swapped to json-rpc mode and tried to send a message, I received the following error: `{""error"":""Number not registered with JSON-RPC""}%` The docker logs show the following when starting up in json-rpc mode:  today at 20:29:26+ set -e today at 20:29:26+ [ -z /home/.local/share/signal-cli ] today at 20:29:26+ usermod -u 1000 signal-api today at 20:29:26usermod: no changes today at 20:29:26+ groupmod -g 998 signal-api today at 20:29:26+ chown 1000:998 -R /home/.local/share/signal-cli today at 20:29:26+ cat today at 20:29:26+ cap_prefix=-cap_ today at 20:29:26+ cat /proc/sys/kernel/cap_last_cap today at 20:29:26+ seq -s ,-cap_ 0 40 today at 20:29:26+ caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 today at 20:29:26+ [ json-rpc = json-rpc ] today at 20:29:26+ /usr/bin/jsonrpc2-helper today at 20:29:26+ service supervisor start today at 20:29:27Starting supervisor: supervisord. today at 20:29:27+ supervisorctl start all today at 20:29:28+ exec setpriv --reuid=1000 --regid=998 --init-groups --inh-caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 signal-cli-rest-api -signal-cli-config=/home/.local/share/signal-cli today at 20:29:28time=""2022-03-03T20:29:28Z"" level=info msg=""Started Signal Messenger REST API"" today at 20:29:59[GIN] 2022/03/03 - 20:29:59 | 204 | 300.586s | 192.168.199.105 | POST ""/v1/configuration"" today at 20:30:09[GIN] 2022/03/03 - 20:30:09 | 400 | 172.809s | 192.168.199.105 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"json-rpc mode doesn't work with existing linked devices The problem I created a linked device using native mode, but when I swapped to json-rpc mode and tried to send a message, I received the following error: `{""error"":""Number not registered with JSON-RPC""}%` The docker logs show the following when starting up in json-rpc mode:  today at 20:29:26+ set -e today at 20:29:26+ [ -z /home/.local/share/signal-cli ] today at 20:29:26+ usermod -u 1000 signal-api today at 20:29:26usermod: no changes today at 20:29:26+ groupmod -g 998 signal-api today at 20:29:26+ chown 1000:998 -R /home/.local/share/signal-cli today at 20:29:26+ cat today at 20:29:26+ cap_prefix=-cap_ today at 20:29:26+ cat /proc/sys/kernel/cap_last_cap today at 20:29:26+ seq -s ,-cap_ 0 40 today at 20:29:26+ caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 today at 20:29:26+ [ json-rpc = json-rpc ] today at 20:29:26+ /usr/bin/jsonrpc2-helper today at 20:29:26+ service supervisor start today at 20:29:27Starting supervisor: supervisord. today at 20:29:27+ supervisorctl start all today at 20:29:28+ exec setpriv --reuid=1000 --regid=998 --init-groups --inh-caps=-cap_0,-cap_1,-cap_2,-cap_3,-cap_4,-cap_5,-cap_6,-cap_7,-cap_8,-cap_9,-cap_10,-cap_11,-cap_12,-cap_13,-cap_14,-cap_15,-cap_16,-cap_17,-cap_18,-cap_19,-cap_20,-cap_21,-cap_22,-cap_23,-cap_24,-cap_25,-cap_26,-cap_27,-cap_28,-cap_29,-cap_30,-cap_31,-cap_32,-cap_33,-cap_34,-cap_35,-cap_36,-cap_37,-cap_38,-cap_39,-cap_40 signal-cli-rest-api -signal-cli-config=/home/.local/share/signal-cli today at 20:29:28time=""2022-03-03T20:29:28Z"" level=info msg=""Started Signal Messenger REST API"" today at 20:29:59[GIN] 2022/03/03 - 20:29:59 | 204 | 300.586s | 192.168.199.105 | POST ""/v1/configuration"" today at 20:30:09[GIN] 2022/03/03 - 20:30:09 | 400 | 172.809s | 192.168.199.105 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.9
50,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/50,API to check if number exist on signal,Can anyone help me to check if there is any API to just check if the phone number exist on signal or not,source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file,API to check if number exist on signal Can anyone help me to check if there is any API to just check if the phone number exist on signal or not source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file,no-bug,0.9
166,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/166,"Implement ""sendTyping""","Feature Request [signal-cli](https://github.com/AsamK/signal-cli/wiki/Feature-Matrix) can send (start, stop) a typing indicator by calling ""sendTyping"". For bot development, it would be very useful to support it because some commands require some time to respond and you can indicate that the bot is doing something. Best! Ren",source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Implement ""sendTyping"" Feature Request [signal-cli](https://github.com/AsamK/signal-cli/wiki/Feature-Matrix) can send (start, stop) a typing indicator by calling ""sendTyping"". For bot development, it would be very useful to support it because some commands require some time to respond and you can indicate that the bot is doing something. Best! Ren source-file source-file source-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.95
242,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/242,"Unable to deregister flawed phone number, high CPU likely result","The problem I noticed a constant 26%CPU of the Signal Messenger Addon in Homey using json-rpc, and traced the most likely cause to a failed attempt to register a phone number that was missing the area code. The log is riddled with messages: ""Couldn't read data for number +\<badphonenumber\>: EOF. Is the number properly registered?"" To fix it I tried to deregister the bad phone number by calling the rest api. But I cannot, because that results in an error: user +\<badphonenumber\> is not registered. If I switch to normal or native mode the high load isn't there, but I want to use the faster json-rpc. That also produces errors: ""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +<badphonenumber>: {User +\<badphonenumber\> is not registered.\n}"" How can I remove the bad number (leaving the working registration intact), and hopefully return to a low, acceptable CPU usage? Platform is an RPI4, running version 0.59.0 of the addon, using json-rpc mode and running on HA version 2022.5.3  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_",source-file | source-file | source-file | source-file,"Unable to deregister flawed phone number, high CPU likely result The problem I noticed a constant 26%CPU of the Signal Messenger Addon in Homey using json-rpc, and traced the most likely cause to a failed attempt to register a phone number that was missing the area code. The log is riddled with messages: ""Couldn't read data for number +\<badphonenumber\>: EOF. Is the number properly registered?"" To fix it I tried to deregister the bad phone number by calling the rest api. But I cannot, because that results in an error: user +\<badphonenumber\> is not registered. If I switch to normal or native mode the high load isn't there, but I want to use the faster json-rpc. That also produces errors: ""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +<badphonenumber>: {User +\<badphonenumber\> is not registered.\n}"" How can I remove the bad number (leaving the working registration intact), and hopefully return to a low, acceptable CPU usage? Platform is an RPI4, running version 0.59.0 of the addon, using json-rpc mode and running on HA version 2022.5.3  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_ source-file source-file source-file source-file",bug,0.9
416,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/416,Allow sending contacts,"Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be great to be able to send signal contact objects. I believe signal-cli allows it with [`client.send_contact`](https://github.com/AsamK/signal-cli/blob/master/client/src/main.rs#L167C57-L167C57), but I don't know rust, so I'm not sure.",source-file | source-file | source-file,"Allow sending contacts Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be great to be able to send signal contact objects. I believe signal-cli allows it with [`client.send_contact`](https://github.com/AsamK/signal-cli/blob/master/client/src/main.rs#L167C57-L167C57), but I don't know rust, so I'm not sure. source-file source-file source-file",no-bug,0.9
91,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/91,Unable to send message to group I am a member of,"Hi, My account became deregistered and I went ahead and reregistered it without issue. However now I am unable to send to the group I was a member of. I can list the group fine with `curl -X GET -H ""Content-Type: application/json"" 'http://127.0.0.1:8080/v1/groups/+10000000000'` returns `[{""name"":""group1 Notifications"",""id"":""group.77777777777777777777777777777777"",""internal_id"":""11111111111111=="",""members"":[""+10000000000"",""+11111111111"",""+12222222222"",""+13333333333""],""blocked"":false,""pending_invites"":[],""pending_requests"":[],""invite_link"":""""}]` When I use the group id above, the call always returns ""null""  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Ignore test"", ""number"": ""+10000000000"", ""recipients"": [""group.77777777777777777777777777777777""]}' 'http://127.0.0.1:8080/v2/send'  `null` In the logs it looks like both the GET and POST calls are getting 20x response  [GIN] 2021/02/12 - 03:03:48 | 200 | 160.107s | 10.42.1.1 | GET ""/v1/about"" [GIN] 2021/02/12 - 03:03:56 | 201 | 7.721459399s | 10.42.1.1 | POST ""/v2/send""",source-file | source-file,"Unable to send message to group I am a member of Hi, My account became deregistered and I went ahead and reregistered it without issue. However now I am unable to send to the group I was a member of. I can list the group fine with `curl -X GET -H ""Content-Type: application/json"" 'http://127.0.0.1:8080/v1/groups/+10000000000'` returns `[{""name"":""group1 Notifications"",""id"":""group.77777777777777777777777777777777"",""internal_id"":""11111111111111=="",""members"":[""+10000000000"",""+11111111111"",""+12222222222"",""+13333333333""],""blocked"":false,""pending_invites"":[],""pending_requests"":[],""invite_link"":""""}]` When I use the group id above, the call always returns ""null""  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Ignore test"", ""number"": ""+10000000000"", ""recipients"": [""group.77777777777777777777777777777777""]}' 'http://127.0.0.1:8080/v2/send'  `null` In the logs it looks like both the GET and POST calls are getting 20x response  [GIN] 2021/02/12 - 03:03:48 | 200 | 160.107s | 10.42.1.1 | GET ""/v1/about"" [GIN] 2021/02/12 - 03:03:56 | 201 | 7.721459399s | 10.42.1.1 | POST ""/v2/send"" source-file source-file",bug,0.95
660,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/660,Expose setPin function to enable setting a registration lock pin,"Feature Request Setting a registration lock PIN is important when registering a Signal account with a ""burner"" phone number that one may not plan on maintaining access to. Requesting to expose the functionality documented [here](https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#user-content-setpin) in this project.",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Expose setPin function to enable setting a registration lock pin Feature Request Setting a registration lock PIN is important when registering a Signal account with a ""burner"" phone number that one may not plan on maintaining access to. Requesting to expose the functionality documented [here](https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#user-content-setpin) in this project. source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.95
26,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/26,"Growing container size due to missing cleanup for /tmp/*.{jpg,mp4} files","Thanks for providing this great glueing service, @bbernhard ! I [recently praised it in my stream ;-)](https://twitter.com/bentolor/status/1291370025014702081) I stumbled over a minor issue/annoyance: A `sudo docker container ls -s` reveals the following:  58f27f04c663 bbernhard/signal-cli-rest-api ""signal-cli-rest-api"" 7 days ago Up 7 days 0.0.0.0:9922->8080/tcp signal-api 118MB (virtual 2.04GB)  On inspecting with `container diff` reports the following situation:  $ sudo docker container diff signal-api C /tmp A /tmp/10096571-0b51-41ac-84cc-44bd77a6fc4e.mp4 A /tmp/193791b7-a84c-4458-823d-6120b33c6b56.jpg  A /tmp/c37bebc6-c6a8-40b6-92c4-c770a97bdfeb.jpg A /tmp/dfbea440-7709-4600-9065-7ce02fe76ba7.jpg C /tmp/hsperfdata_root D /tmp/hsperfdata_root/57 A /tmp/2c1f1207-e9ca-47c7-b1c3-3a7dc064b792.jpg   A container restart does not clean them up. After inspecting the code it seems there is also some sort of cleanup logic. Not sure where the fallthrough is lying: [func cleanupTmpFiles()](https://github.com/bbernhard/signal-cli-rest-api/blob/3b6957299209f14e2023268219e41fc32d5ec184/src/api/api.go#L84) For me it seems that nearly _no_ cleanup happened at all, because the file list more or less matches all media files I yet sent via the API?!",source-file | source-file,"Growing container size due to missing cleanup for /tmp/*.{jpg,mp4} files Thanks for providing this great glueing service, @bbernhard ! I [recently praised it in my stream ;-)](https://twitter.com/bentolor/status/1291370025014702081) I stumbled over a minor issue/annoyance: A `sudo docker container ls -s` reveals the following:  58f27f04c663 bbernhard/signal-cli-rest-api ""signal-cli-rest-api"" 7 days ago Up 7 days 0.0.0.0:9922->8080/tcp signal-api 118MB (virtual 2.04GB)  On inspecting with `container diff` reports the following situation:  $ sudo docker container diff signal-api C /tmp A /tmp/10096571-0b51-41ac-84cc-44bd77a6fc4e.mp4 A /tmp/193791b7-a84c-4458-823d-6120b33c6b56.jpg  A /tmp/c37bebc6-c6a8-40b6-92c4-c770a97bdfeb.jpg A /tmp/dfbea440-7709-4600-9065-7ce02fe76ba7.jpg C /tmp/hsperfdata_root D /tmp/hsperfdata_root/57 A /tmp/2c1f1207-e9ca-47c7-b1c3-3a7dc064b792.jpg   A container restart does not clean them up. After inspecting the code it seems there is also some sort of cleanup logic. Not sure where the fallthrough is lying: [func cleanupTmpFiles()](https://github.com/bbernhard/signal-cli-rest-api/blob/3b6957299209f14e2023268219e41fc32d5ec184/src/api/api.go#L84) For me it seems that nearly _no_ cleanup happened at all, because the file list more or less matches all media files I yet sent via the API?! source-file source-file",no-bug,0.9
16,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/16,Binary for usage without Docker?,"Do you plan to provide a binary for usage without docker? Preferably with a configurable path to the config directory? I tried to compile myself, but always end up with  # command-line-arguments ./main.go:64:10: assignment mismatch: 2 variables but 1 values  I'm a bit reluctant to set up docker and pull an 1,3 GB image only for this usecase (wrapper of a Signal API wrapper ;-), as I prefer the ""classical"" way of installing programs, especially on low-end devices. (Moreover, for me the docker container always exits with ""0"" doing nothing, and I'm not very good in debugging docker problems) Thanks for your work!",config-file | config-file,"Binary for usage without Docker? Do you plan to provide a binary for usage without docker? Preferably with a configurable path to the config directory? I tried to compile myself, but always end up with  # command-line-arguments ./main.go:64:10: assignment mismatch: 2 variables but 1 values  I'm a bit reluctant to set up docker and pull an 1,3 GB image only for this usecase (wrapper of a Signal API wrapper ;-), as I prefer the ""classical"" way of installing programs, especially on low-end devices. (Moreover, for me the docker container always exits with ""0"" doing nothing, and I'm not very good in debugging docker problems) Thanks for your work! config-file config-file",no-bug,0.95
365,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/365,Add support of extra flags for `receive` command,"Feature Request The `receive` endpoint now only supports the `timeout` argument, but the CLI also provides the following configs: text usage: signal-cli receive [-h] [-t TIMEOUT] [--max-messages MAX_MESSAGES] [--ignore-attachments] [--ignore-stories] [--send-read-receipts] named arguments: -h, --help show this help message and exit -t TIMEOUT, --timeout TIMEOUT Number of seconds to wait for new messages (negative values disable timeout) --max-messages MAX_MESSAGES Maximum number of messages to receive, before returning. --ignore-attachments Dont download attachments of received messages. --ignore-stories Dont receive story messages from the server. --send-read-receipts Send read receipts for all incoming data messages (in addition to the default delivery receipts)  It would be great to add support for the other flags as well. IMO `--ignore` flags are especially helpful with the auto receive feature.",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Add support of extra flags for `receive` command Feature Request The `receive` endpoint now only supports the `timeout` argument, but the CLI also provides the following configs: text usage: signal-cli receive [-h] [-t TIMEOUT] [--max-messages MAX_MESSAGES] [--ignore-attachments] [--ignore-stories] [--send-read-receipts] named arguments: -h, --help show this help message and exit -t TIMEOUT, --timeout TIMEOUT Number of seconds to wait for new messages (negative values disable timeout) --max-messages MAX_MESSAGES Maximum number of messages to receive, before returning. --ignore-attachments Dont download attachments of received messages. --ignore-stories Dont receive story messages from the server. --send-read-receipts Send read receipts for all incoming data messages (in addition to the default delivery receipts)  It would be great to add support for the other flags as well. IMO `--ignore` flags are especially helpful with the auto receive feature. source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.9
555,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/555,Fatal error: concurrent map read and write,"The problem v0.85 has worked like a charm so far, except for this sudden error:  fatal error: concurrent map read and map write goroutine 34 [running]: github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).ReceiveData(0x4000280ea0, {0x4000580380, 0xf}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:207 +0x43c created by github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).Init in goroutine 1 /tmp/signal-cli-rest-api-src/client/client.go:382 +0x248 goroutine 1 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3d58, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x7?, 0x2a67c?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Accept(0x400015e600) /usr/local/go/src/internal/poll/fd_unix.go:611 +0x250 net.(*netFD).accept(0x400015e600) /usr/local/go/src/net/fd_unix.go:172 +0x28 net.(*TCPListener).accept(0x400010e480) /usr/local/go/src/net/tcpsock_posix.go:159 +0x28 net.(*TCPListener).Accept(0x400010e480) /usr/local/go/src/net/tcpsock.go:327 +0x2c net/http.(*Server).Serve(0x400014e000, {0x8ca4c0, 0x400010e480}) /usr/local/go/src/net/http/server.go:3255 +0x2a8 net/http.(*Server).ListenAndServe(0x400014e000) /usr/local/go/src/net/http/server.go:3184 +0x84 net/http.ListenAndServe() /usr/local/go/src/net/http/server.go:3438 github.com/gin-gonic/gin.(*Engine).Run(0x40000be680, {0x0, 0x0, 0x0}) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:386 +0x1b0 main.main() /tmp/signal-cli-rest-api-src/main.go:374 +0x2a28 goroutine 8729 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x4000df02c0, 0x40001809c0) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 8696 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49203 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3788, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8400?, 0x4001498000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8400, {0x4001498000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8400, {0x4001498000?, 0x40013c8300?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c168, {0x4001498000?, 0x400040f398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x40016b1a40) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x40016b1a40, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x40002846e0, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x40002846e0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x40002846e0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x400040f5a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x40002846e0, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x4000018500) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40001362a0}, 0x4000156480) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40015a86c0?}, {0x8ca370?, 0x40001362a0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d8630, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49192 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x40002846e0, 0x400139c180) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49203 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49202 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3880, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8380?, 0x4000f13000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8380, {0x4000f13000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8380, {0x4000f13000?, 0x40013c82a0?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c0f8, {0x4000f13000?, 0x4000411398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x4000348240) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x4000348240, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x40015b2b00, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x40015b2b00) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x40015b2b00) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x40004115a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x40015b2b00, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x4000018400) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x400135e380}, 0x4000156240) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40015a85d0?}, {0x8ca370?, 0x400135e380?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d85a0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49184 [runnable]: github.com/sirupsen/logrus.FieldMap.resolve() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/json_formatter.go:16 github.com/sirupsen/logrus.(*TextFormatter).Format(0x400008a240, 0x40002e63f0) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/text_formatter.go:209 +0xccc github.com/sirupsen/logrus.(*Entry).write(0x40002e63f0) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:289 +0xd8 github.com/sirupsen/logrus.(*Entry).log(0x40002e6070, 0x5, {0x40001a24e0, 0x19b}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:252 +0x43c github.com/sirupsen/logrus.(*Entry).Log(0x40002e6070, 0x5, {0x40004069c0?, 0x68fb40?, 0x4000091a01?}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:304 +0x60 github.com/sirupsen/logrus.(*Logger).Log(0x1577860, 0x5, {0x40004069c0, 0x2, 0x2}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/logger.go:204 +0x60 github.com/sirupsen/logrus.(*Logger).Debug() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/logger.go:222 github.com/sirupsen/logrus.Debug() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/exported.go:99 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).getRaw(0x4000280ea0, {0x783477, 0x4}, 0x40004c8000, {0x761d60, 0x40004fa000}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:146 +0x56c github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).send(0x400015e280, {{0x40013d63b0, 0xd}, {0x40013fc9c0, 0x18d}, {0x40013aa770, 0x1, 0x1}, {0x15f21c0, 0x0, }, }) /tmp/signal-cli-rest-api-src/client/client.go:492 +0xf30 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).SendV2(0x400015e280, {0x40013d63b0, 0xd}, {0x40013fc9c0, 0x18d}, {0x40013aa740?, 0x7f336a3488?, 0x40015b22c0?}, {0x15f21c0, 0x0, }, ) /tmp/signal-cli-rest-api-src/client/client.go:774 +0x6f4 github.com/bbernhard/signal-cli-rest-api/api.(*Api).SendV2(0x400005c140, 0x4000492400) /tmp/signal-cli-rest-api-src/api/api.go:416 +0x1d4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x400135e000}, 0x4000480480) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x8c85b8?}, {0x8ca370?, 0x400135e000?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d8b40, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49206 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x40015b2b00, 0x400143e240) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49202 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49205 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x40015b2b00, {0x4000234010, 0xd}, 0x400143e240) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49202 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49191 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x40002846e0, {0x400159c010, 0xd}, 0x400139c180) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49203 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49193 [IO wait]: internal/poll.runtime_pollWait(0x7f490c33a8, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8600?, 0x40013c8a01?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8600, {0x40013c8a01, 0x1, 0x1}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8600, {0x40013c8a01?, 0x6769696943414b4b?, 0x61687320a1929ff0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c228, {0x40013c8a01?, 0x939ff00a9380e293?, 0x40004cc128?}) /usr/local/go/src/net/net.go:179 +0x34 net/http.(*connReader).backgroundRead(0x40013c89f0) /usr/local/go/src/net/http/server.go:681 +0x40 created by net/http.(*connReader).startBackgroundRead in goroutine 49184 /usr/local/go/src/net/http/server.go:677 +0xc8 goroutine 8728 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x4000df02c0, {0x4001010400, 0xd}, 0x40001809c0) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 8696 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49185 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3b68, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x400015e400?, 0x40013c8be1?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x400015e400, {0x40013c8be1, 0x1, 0x1}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x400015e400, {0x40013c8be1?, 0x40001ffd68?, 0x566180?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x4000120000, {0x40013c8be1?, 0x400118cf88?, 0x4001550278?}) /usr/local/go/src/net/net.go:179 +0x34 net/http.(*connReader).backgroundRead(0x40013c8bd0) /usr/local/go/src/net/http/server.go:681 +0x40 created by net/http.(*connReader).startBackgroundRead in goroutine 49194 /usr/local/go/src/net/http/server.go:677 +0xc8 goroutine 8696 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3978, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8180?, 0x4000154000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8180, {0x4000154000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8180, {0x4000154000?, 0x40015a80f0?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c0c0, {0x4000154000?, 0x4000201398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x40003dc2a0) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x40003dc2a0, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x4000df02c0, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x4000df02c0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x4000df02c0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x40002015a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x4000df02c0, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x40003da100) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40000e21c0}, 0x4000156360) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40002a1470?}, {0x8ca370?, 0x40000e21c0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40001ee5a0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49194 [chan receive]: github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).getRaw(0x4000280ea0, {0x7913ed, 0xc}, 0x400046a7f0, {0x7420e0, 0x4000f0e1e0}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:143 +0x4b0 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).SendReaction(0x400015e280, {0x4000234463, 0xd}, {0x400003a410, 0x42}, {0x40015a4cd0, 0x3}, {0x40015a4ce0, 0xe}, 0x19084568718, ) /tmp/signal-cli-rest-api-src/client/client.go:1682 +0x228 github.com/bbernhard/signal-cli-rest-api/api.(*Api).SendReaction(0x400005c140, 0x4000492200) /tmp/signal-cli-rest-api-src/api/api.go:1431 +0x1e4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40001360e0}, 0x40004807e0) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x8c85b8?}, {0x8ca370?, 0x40001360e0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40015e47e0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0  After that, the docker died. Similar to [this](https://github.com/bbernhard/signal-cli-rest-api/issues/493) issue, I had two tasks listening at the same time (which I hadn't before) EDIT: Also, I receive the same messages twice, if I set up two producer listeners from [signalbot](https://github.com/filipre/signalbot). That shouldn't be either, should it?  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Fatal error: concurrent map read and write The problem v0.85 has worked like a charm so far, except for this sudden error:  fatal error: concurrent map read and map write goroutine 34 [running]: github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).ReceiveData(0x4000280ea0, {0x4000580380, 0xf}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:207 +0x43c created by github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).Init in goroutine 1 /tmp/signal-cli-rest-api-src/client/client.go:382 +0x248 goroutine 1 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3d58, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x7?, 0x2a67c?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Accept(0x400015e600) /usr/local/go/src/internal/poll/fd_unix.go:611 +0x250 net.(*netFD).accept(0x400015e600) /usr/local/go/src/net/fd_unix.go:172 +0x28 net.(*TCPListener).accept(0x400010e480) /usr/local/go/src/net/tcpsock_posix.go:159 +0x28 net.(*TCPListener).Accept(0x400010e480) /usr/local/go/src/net/tcpsock.go:327 +0x2c net/http.(*Server).Serve(0x400014e000, {0x8ca4c0, 0x400010e480}) /usr/local/go/src/net/http/server.go:3255 +0x2a8 net/http.(*Server).ListenAndServe(0x400014e000) /usr/local/go/src/net/http/server.go:3184 +0x84 net/http.ListenAndServe() /usr/local/go/src/net/http/server.go:3438 github.com/gin-gonic/gin.(*Engine).Run(0x40000be680, {0x0, 0x0, 0x0}) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:386 +0x1b0 main.main() /tmp/signal-cli-rest-api-src/main.go:374 +0x2a28 goroutine 8729 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x4000df02c0, 0x40001809c0) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 8696 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49203 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3788, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8400?, 0x4001498000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8400, {0x4001498000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8400, {0x4001498000?, 0x40013c8300?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c168, {0x4001498000?, 0x400040f398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x40016b1a40) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x40016b1a40, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x40002846e0, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x40002846e0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x40002846e0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x400040f5a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x40002846e0, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x4000018500) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000018500) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40001362a0}, 0x4000156480) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40015a86c0?}, {0x8ca370?, 0x40001362a0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d8630, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49192 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x40002846e0, 0x400139c180) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49203 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49202 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3880, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8380?, 0x4000f13000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8380, {0x4000f13000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8380, {0x4000f13000?, 0x40013c82a0?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c0f8, {0x4000f13000?, 0x4000411398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x4000348240) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x4000348240, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x40015b2b00, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x40015b2b00) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x40015b2b00) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x40004115a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x40015b2b00, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x4000018400) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000018400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x400135e380}, 0x4000156240) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40015a85d0?}, {0x8ca370?, 0x400135e380?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d85a0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49184 [runnable]: github.com/sirupsen/logrus.FieldMap.resolve() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/json_formatter.go:16 github.com/sirupsen/logrus.(*TextFormatter).Format(0x400008a240, 0x40002e63f0) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/text_formatter.go:209 +0xccc github.com/sirupsen/logrus.(*Entry).write(0x40002e63f0) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:289 +0xd8 github.com/sirupsen/logrus.(*Entry).log(0x40002e6070, 0x5, {0x40001a24e0, 0x19b}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:252 +0x43c github.com/sirupsen/logrus.(*Entry).Log(0x40002e6070, 0x5, {0x40004069c0?, 0x68fb40?, 0x4000091a01?}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/entry.go:304 +0x60 github.com/sirupsen/logrus.(*Logger).Log(0x1577860, 0x5, {0x40004069c0, 0x2, 0x2}) /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/logger.go:204 +0x60 github.com/sirupsen/logrus.(*Logger).Debug() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/logger.go:222 github.com/sirupsen/logrus.Debug() /go/pkg/mod/github.com/sirupsen/logrus@v1.9.0/exported.go:99 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).getRaw(0x4000280ea0, {0x783477, 0x4}, 0x40004c8000, {0x761d60, 0x40004fa000}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:146 +0x56c github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).send(0x400015e280, {{0x40013d63b0, 0xd}, {0x40013fc9c0, 0x18d}, {0x40013aa770, 0x1, 0x1}, {0x15f21c0, 0x0, }, }) /tmp/signal-cli-rest-api-src/client/client.go:492 +0xf30 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).SendV2(0x400015e280, {0x40013d63b0, 0xd}, {0x40013fc9c0, 0x18d}, {0x40013aa740?, 0x7f336a3488?, 0x40015b22c0?}, {0x15f21c0, 0x0, }, ) /tmp/signal-cli-rest-api-src/client/client.go:774 +0x6f4 github.com/bbernhard/signal-cli-rest-api/api.(*Api).SendV2(0x400005c140, 0x4000492400) /tmp/signal-cli-rest-api-src/api/api.go:416 +0x1d4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000492400) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x400135e000}, 0x4000480480) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x8c85b8?}, {0x8ca370?, 0x400135e000?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40004d8b40, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49206 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x40015b2b00, 0x400143e240) /tmp/signal-cli-rest-api-src/api/api.go:519 +0x70 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49202 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750 goroutine 49205 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x40015b2b00, {0x4000234010, 0xd}, 0x400143e240) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49202 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49191 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x40002846e0, {0x400159c010, 0xd}, 0x400139c180) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 49203 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49193 [IO wait]: internal/poll.runtime_pollWait(0x7f490c33a8, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8600?, 0x40013c8a01?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8600, {0x40013c8a01, 0x1, 0x1}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8600, {0x40013c8a01?, 0x6769696943414b4b?, 0x61687320a1929ff0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c228, {0x40013c8a01?, 0x939ff00a9380e293?, 0x40004cc128?}) /usr/local/go/src/net/net.go:179 +0x34 net/http.(*connReader).backgroundRead(0x40013c89f0) /usr/local/go/src/net/http/server.go:681 +0x40 created by net/http.(*connReader).startBackgroundRead in goroutine 49184 /usr/local/go/src/net/http/server.go:677 +0xc8 goroutine 8728 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0x400005c140, 0x4000df02c0, {0x4001010400, 0xd}, 0x40001809c0) /tmp/signal-cli-rest-api-src/api/api.go:449 +0x114 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 8696 /tmp/signal-cli-rest-api-src/api/api.go:563 +0x700 goroutine 49185 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3b68, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x400015e400?, 0x40013c8be1?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x400015e400, {0x40013c8be1, 0x1, 0x1}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x400015e400, {0x40013c8be1?, 0x40001ffd68?, 0x566180?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x4000120000, {0x40013c8be1?, 0x400118cf88?, 0x4001550278?}) /usr/local/go/src/net/net.go:179 +0x34 net/http.(*connReader).backgroundRead(0x40013c8bd0) /usr/local/go/src/net/http/server.go:681 +0x40 created by net/http.(*connReader).startBackgroundRead in goroutine 49194 /usr/local/go/src/net/http/server.go:677 +0xc8 goroutine 8696 [IO wait]: internal/poll.runtime_pollWait(0x7f490c3978, 0x72) /usr/local/go/src/runtime/netpoll.go:345 +0xa0 internal/poll.(*pollDesc).wait(0x40003f8180?, 0x4000154000?, 0x0) /usr/local/go/src/internal/poll/fd_poll_runtime.go:84 +0x28 internal/poll.(*pollDesc).waitRead() /usr/local/go/src/internal/poll/fd_poll_runtime.go:89 internal/poll.(*FD).Read(0x40003f8180, {0x4000154000, 0x1000, 0x1000}) /usr/local/go/src/internal/poll/fd_unix.go:164 +0x200 net.(*netFD).Read(0x40003f8180, {0x4000154000?, 0x40015a80f0?, 0x0?}) /usr/local/go/src/net/fd_posix.go:55 +0x28 net.(*conn).Read(0x400005c0c0, {0x4000154000?, 0x4000201398?, 0x4e8214?}) /usr/local/go/src/net/net.go:179 +0x34 bufio.(*Reader).fill(0x40003dc2a0) /usr/local/go/src/bufio/bufio.go:110 +0xf8 bufio.(*Reader).Peek(0x40003dc2a0, 0x2) /usr/local/go/src/bufio/bufio.go:148 +0x60 github.com/gorilla/websocket.(*Conn).read(0x4000df02c0, 0xd40d0?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:371 +0x28 github.com/gorilla/websocket.(*Conn).advanceFrame(0x4000df02c0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:809 +0x60 github.com/gorilla/websocket.(*Conn).NextReader(0x4000df02c0) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1009 +0x8c github.com/gorilla/websocket.(*Conn).ReadMessage(0x40002015a8?) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:1093 +0x1c github.com/bbernhard/signal-cli-rest-api/api.wsPong(0x4000df02c0, 0x0?) /tmp/signal-cli-rest-api-src/api/api.go:509 +0x8c github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive(0x400005c140, 0x40003da100) /tmp/signal-cli-rest-api-src/api/api.go:565 +0x75c github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x40003da100) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40000e21c0}, 0x4000156360) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x40002a1470?}, {0x8ca370?, 0x40000e21c0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40001ee5a0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0 goroutine 49194 [chan receive]: github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).getRaw(0x4000280ea0, {0x7913ed, 0xc}, 0x400046a7f0, {0x7420e0, 0x4000f0e1e0}) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:143 +0x4b0 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).SendReaction(0x400015e280, {0x4000234463, 0xd}, {0x400003a410, 0x42}, {0x40015a4cd0, 0x3}, {0x40015a4ce0, 0xe}, 0x19084568718, ) /tmp/signal-cli-rest-api-src/client/client.go:1682 +0x228 github.com/bbernhard/signal-cli-rest-api/api.(*Api).SendReaction(0x400005c140, 0x4000492200) /tmp/signal-cli-rest-api-src/api/api.go:1431 +0x1e4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1(0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102 +0x84 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.LoggerWithConfig.func1(0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240 +0xb4 github.com/gin-gonic/gin.(*Context).Next() /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174 github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x40000be680, 0x4000492200) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620 +0x518 github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x40000be680, {0x8ca370, 0x40001360e0}, 0x40004807e0) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x174 net/http.serverHandler.ServeHTTP({0x8c85b8?}, {0x8ca370?, 0x40001360e0?}, 0x6?) /usr/local/go/src/net/http/server.go:3137 +0xbc net/http.(*conn).serve(0x40015e47e0, {0x8cbea0, 0x4000510630}) /usr/local/go/src/net/http/server.go:2039 +0x508 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3285 +0x3f0  After that, the docker died. Similar to [this](https://github.com/bbernhard/signal-cli-rest-api/issues/493) issue, I had two tasks listening at the same time (which I hadn't before) EDIT: Also, I receive the same messages twice, if I set up two producer listeners from [signalbot](https://github.com/filipre/signalbot). That shouldn't be either, should it?  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",no-bug,0.9
425,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/425,Native mode - arch issue,"The problem When using signal-cli-rest-api (via Home Assistant add-on) v0.69.0, messages can't be sent or received. Any API called result in a 400 error and the following message:  The current machine does not support all of the following CPU features that are required by the image: [CX8, CMOV, FXSR, MMX, SSE, SSE2, SSE3, SSSE3, SSE4_1, SSE4_2, POPCNT, LZCNT, AVX, AVX2, BMI1, BMI2, FMA]. Please rebuild the executable with an appropriate setting of the -march option.  Appears to be related to the updated native build in the 0.69.0 release. Switching to 'normal' resolves this issue. Issue orignally opened here: https://github.com/haberda/hassio_addons/issues/79  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",container-file,"Native mode - arch issue The problem When using signal-cli-rest-api (via Home Assistant add-on) v0.69.0, messages can't be sent or received. Any API called result in a 400 error and the following message:  The current machine does not support all of the following CPU features that are required by the image: [CX8, CMOV, FXSR, MMX, SSE, SSE2, SSE3, SSSE3, SSE4_1, SSE4_2, POPCNT, LZCNT, AVX, AVX2, BMI1, BMI2, FMA]. Please rebuild the executable with an appropriate setting of the -march option.  Appears to be related to the updated native build in the 0.69.0 release. Switching to 'normal' resolves this issue. Issue orignally opened here: https://github.com/haberda/hassio_addons/issues/79  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ container-file",bug,0.9
587,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/587,Disappearing / expiring group chat messages,"The problem My Signal CLI device was not respecting the message expiration timer in group chats. The secondary CLI device is sending alerts to a group channel, and while the other members of the channel have their messages disappear as expected the untouched message history is made visible when logged into Signal Android with the primary device. I found references that this was touched on a few years ago, but didn't see any matching documentation in this project's API: https://github.com/AsamK/signal-cli/issues/620 https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc > **updateGroup** > `-e EXPIRATION_SECONDS, --expiration EXPIRATION_SECONDS` > _Set expiration time of messages (seconds). To disable expiration set expiration time to 0._ Although undocumented I passed the following body to the `PUT /v1/groups/{number}/{groupid}` endpoint and I _believe_ it's having the correct impact (but needs more testing).  { ""EXPIRATION_SECONDS"": ""86400"" }  Hoping to both confirm this was correct and the setting will remain sticky and respected for the secondary CLI device and if so hopefully get it documented. Thanks!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file | documentation-file | documentation-file,"Disappearing / expiring group chat messages The problem My Signal CLI device was not respecting the message expiration timer in group chats. The secondary CLI device is sending alerts to a group channel, and while the other members of the channel have their messages disappear as expected the untouched message history is made visible when logged into Signal Android with the primary device. I found references that this was touched on a few years ago, but didn't see any matching documentation in this project's API: https://github.com/AsamK/signal-cli/issues/620 https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc > **updateGroup** > `-e EXPIRATION_SECONDS, --expiration EXPIRATION_SECONDS` > _Set expiration time of messages (seconds). To disable expiration set expiration time to 0._ Although undocumented I passed the following body to the `PUT /v1/groups/{number}/{groupid}` endpoint and I _believe_ it's having the correct impact (but needs more testing).  { ""EXPIRATION_SECONDS"": ""86400"" }  Hoping to both confirm this was correct and the setting will remain sticky and respected for the secondary CLI device and if so hopefully get it documented. Thanks!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file documentation-file documentation-file",no-bug,0.9
630,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/630,Nested styled text not working,"The problem Currently it appears that it is not possible to send messages using nested styled text. For example text that is both spoiler and monospaced. For example:  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||spoiler only||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns spoiler correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""`monospace only`"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns monospace correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||`spoiler and monospace`||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  However when combining both options only spoiler is visible. Combining styles is possible in Signal app. Would it be possible to allow these nested styles? Or is it possible now but requires some special escaping?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",container-file | source-file | source-file | test-file,"Nested styled text not working The problem Currently it appears that it is not possible to send messages using nested styled text. For example text that is both spoiler and monospaced. For example:  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||spoiler only||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns spoiler correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""`monospace only`"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  This returns monospace correctly.  curl -k -X POST -H ""Content-Type: application/json"" -d '{""message"": ""||`spoiler and monospace`||"", ""number"": ""redacted"", ""recipients"": [""redacted""], ""text_mode"": ""styled""}' 'redacted/v2/send'  However when combining both options only spoiler is visible. Combining styles is possible in Signal app. Would it be possible to allow these nested styles? Or is it possible now but requires some special escaping?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ container-file source-file source-file test-file",bug,0.85
52,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/52,Attachments download api,"We have registered a number using ""register"" api and we are able to sent message using ""send"" api. Also we could fetch messages/attachments using ""receive"" api and we are getting the response as below. For eg: [{""envelope"":{""source"":""+919xxxx"",""sourceDevice"":1,""relay"":null,""timestamp"":1610517721588,""dataMessage"":{""timestamp"":1610517721588,""message"":null,""expiresInSeconds"":0,""attachments"":[{""contentType"":""image/jpeg"",""filename"":null,""id"":""**pwtcq-xxxx**"",""size"":366267}],""groupInfo"":null},""syncMessage"":null,""callMessage"":null,""receiptMessage"":null}}] But we would like to know how to get/download the image by using attachments id ""**pwtcq-xxxx**"". Is there an api to fetch the attachments (image/video/pdf)?",source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Attachments download api We have registered a number using ""register"" api and we are able to sent message using ""send"" api. Also we could fetch messages/attachments using ""receive"" api and we are getting the response as below. For eg: [{""envelope"":{""source"":""+919xxxx"",""sourceDevice"":1,""relay"":null,""timestamp"":1610517721588,""dataMessage"":{""timestamp"":1610517721588,""message"":null,""expiresInSeconds"":0,""attachments"":[{""contentType"":""image/jpeg"",""filename"":null,""id"":""**pwtcq-xxxx**"",""size"":366267}],""groupInfo"":null},""syncMessage"":null,""callMessage"":null,""receiptMessage"":null}}] But we would like to know how to get/download the image by using attachments id ""**pwtcq-xxxx**"". Is there an api to fetch the attachments (image/video/pdf)? source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.9
8,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/8,Feature Request for Receive,"Sorry this isn't an issue, I saw at the bottom you mentioned to create a pull request for new functionality but I'm unsure how to do that, would there be any chance to implement receiving messages, I've attempted to use signal-cli inside the container to receive but i get unregistered error. Thank you",documentation-file | source-file | documentation-file | source-file,"Feature Request for Receive Sorry this isn't an issue, I saw at the bottom you mentioned to create a pull request for new functionality but I'm unsure how to do that, would there be any chance to implement receiving messages, I've attempted to use signal-cli inside the container to receive but i get unregistered error. Thank you documentation-file source-file documentation-file source-file",no-bug,0.9
247,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/247,Upgrade to signal cli 0.10.7,Feature Request Is it possible to upgrade the docker to Signal CLI release 0.10.7 to support the latest features?,container-file | container-file,Upgrade to signal cli 0.10.7 Feature Request Is it possible to upgrade the docker to Signal CLI release 0.10.7 to support the latest features? container-file container-file,no-bug,0.9
47,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/47,Is there an API call that can tell me which version is running?,I'm running the latest tag but without comparing dates it can get confusing to know which version I've pulled down and am running. I was thinking an API call could give me that info (which version of the docker container and maybe which version of the Signal CLI as well)? Maybe there's another way to get the info?,config-file | config-file | container-file | source-file | config-file | config-file | container-file | source-file,Is there an API call that can tell me which version is running? I'm running the latest tag but without comparing dates it can get confusing to know which version I've pulled down and am running. I was thinking an API call could give me that info (which version of the docker container and maybe which version of the Signal CLI as well)? Maybe there's another way to get the info? config-file config-file container-file source-file config-file config-file container-file source-file,no-bug,0.9
190,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/190,Link device API fails to link the device,"When I tried to link my existing number to the signal cli running in a docker container using link device API, every-time after the QR scan, signal android app gave ""No device found"" or ""Network error"" toast and was failing to link the number. After searching through the internet I found similar issue reported here within another issue mentioned in below link: https://github.com/bbernhard/signal-cli-rest-api/issues/95#issuecomment-780006579 Since only workaround was given there which takes a while to search and apply, I'm raising this issue here again so it gets fixed and gets the link device API working.",source-file | source-file,"Link device API fails to link the device When I tried to link my existing number to the signal cli running in a docker container using link device API, every-time after the QR scan, signal android app gave ""No device found"" or ""Network error"" toast and was failing to link the number. After searching through the internet I found similar issue reported here within another issue mentioned in below link: https://github.com/bbernhard/signal-cli-rest-api/issues/95#issuecomment-780006579 Since only workaround was given there which takes a while to search and apply, I'm raising this issue here again so it gets fixed and gets the link device API working. source-file source-file",bug,0.9
150,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/150,Introduce a reusable logical invocation layer,"Introduce a reusable logical invocation layer Hi there, I like the effort that went into wrapping the Java CLI into a well working REST service. The decent error handling an the used domain model are definitely a big chunk of work. My question is: would you guys consider separating the CLI invocation parts from the single `api.go` file into a separate reusable logical layer? So effectively decouple the transformation of REST inputs and the gin context from the actual invocation via plain domain model entities. If **configured correctly** this would provide the possibility to invoke the Signal CLI directly within other Golang components reusing the available error handling and domain objects and bypassing the HTTP / REST mapping, error handling, etc. Let me know whether this sounds like gibberish or if you would consider it a topic worth talking about. Cheers and keep up the great work!",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,"Introduce a reusable logical invocation layer Introduce a reusable logical invocation layer Hi there, I like the effort that went into wrapping the Java CLI into a well working REST service. The decent error handling an the used domain model are definitely a big chunk of work. My question is: would you guys consider separating the CLI invocation parts from the single `api.go` file into a separate reusable logical layer? So effectively decouple the transformation of REST inputs and the gin context from the actual invocation via plain domain model entities. If **configured correctly** this would provide the possibility to invoke the Signal CLI directly within other Golang components reusing the available error handling and domain objects and bypassing the HTTP / REST mapping, error handling, etc. Let me know whether this sounds like gibberish or if you would consider it a topic worth talking about. Cheers and keep up the great work! source-file source-file source-file source-file source-file source-file source-file source-file source-file",no-bug,0.9
95,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/95,QRCode link: please provide a name for a device,"So I installed signal-cli-rest-api ad addon on my Home Assistant and when I go to `http://192.168.200.245:8080/v1/about` I get nice message:  { ""versions"": [ ""v1"", ""v2"" ], ""build"": 2 }  Now I want to register additional device to my existing signal number So I say: `http://192.168.200.245:8080/v1/qrcodelink`. Documentation says ""No parameters"". Unfortunately I get this:  { ""error"": ""Please provide a name for the device"" }  Any help on this?",source-file | source-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file,"QRCode link: please provide a name for a device So I installed signal-cli-rest-api ad addon on my Home Assistant and when I go to `http://192.168.200.245:8080/v1/about` I get nice message:  { ""versions"": [ ""v1"", ""v2"" ], ""build"": 2 }  Now I want to register additional device to my existing signal number So I say: `http://192.168.200.245:8080/v1/qrcodelink`. Documentation says ""No parameters"". Unfortunately I get this:  { ""error"": ""Please provide a name for the device"" }  Any help on this? source-file source-file documentation-file documentation-file source-file source-file documentation-file documentation-file",bug,0.9
236,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/236,"Setting name, avatar doesn't update name","The problem I'm in rpc-json mode and want to change the username my contacts are seeing. When i send a put request to the endpoint, i get 204 back and after about 1 minute, the avatar is update, but i still only see the phone number as the ""username"" in signal messenger on my phone. Is this an issue with this client or is there something i'm doing wrong?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"Setting name, avatar doesn't update name The problem I'm in rpc-json mode and want to change the username my contacts are seeing. When i send a put request to the endpoint, i get 204 back and after about 1 minute, the avatar is update, but i still only see the phone number as the ""username"" in signal messenger on my phone. Is this an issue with this client or is there something i'm doing wrong?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.8
31,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/31,Use non-root user in Dockerfile,It would be nice if the Dockerfile was configured to use a [non-root user](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#user) to improve security.,container-file | container-file,Use non-root user in Dockerfile It would be nice if the Dockerfile was configured to use a [non-root user](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#user) to improve security. container-file container-file,no-bug,0.9
257,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/257,QR Code can't be encoded,"The problem When I tried to register this api on my device it gave me an error, that the encoding of the QR Code is not posible, because it's to big. json { ""error"": ""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1164 bits, maximum length is 976 bits)"" }   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information It didn't gave any errors in the console and I searched in the issues and didn't found any similar problems.",source-file | source-file,"QR Code can't be encoded The problem When I tried to register this api on my device it gave me an error, that the encoding of the QR Code is not posible, because it's to big. json { ""error"": ""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1164 bits, maximum length is 976 bits)"" }   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information It didn't gave any errors in the console and I searched in the issues and didn't found any similar problems. source-file source-file",no-bug,0.8
230,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/230,Latest entrypoint.sh changes: export HOST_IP causing issues.,"The problem https://github.com/bbernhard/signal-cli-rest-api/blob/master/entrypoint.sh#L32 is failing under certain IP configurations. `hostname -i` can return more than one IP, e.g. if IPv6 is configured too. And the man page says it should not be used anymore. See https://stackoverflow.com/questions/13322485/how-to-get-the-primary-ip-address-of-the-local-machine-on-linux-and-os-x In may case the container is not starting anymore with following error:  + export HOST_IP=fd61:a8b9:a1ec:9e8e:8222:ec95:d130:f814 172.16.248.31 /entrypoint.sh: 32: export: 172.16.248.31: bad variable name   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",config-file | config-file,"Latest entrypoint.sh changes: export HOST_IP causing issues. The problem https://github.com/bbernhard/signal-cli-rest-api/blob/master/entrypoint.sh#L32 is failing under certain IP configurations. `hostname -i` can return more than one IP, e.g. if IPv6 is configured too. And the man page says it should not be used anymore. See https://stackoverflow.com/questions/13322485/how-to-get-the-primary-ip-address-of-the-local-machine-on-linux-and-os-x In may case the container is not starting anymore with following error:  + export HOST_IP=fd61:a8b9:a1ec:9e8e:8222:ec95:d130:f814 172.16.248.31 /entrypoint.sh: 32: export: 172.16.248.31: bad variable name   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ config-file config-file",no-bug,0.9
177,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/177,/v1/groups/{number}/{groupid}/block endpoint does not do anything (JSON-RPC),"The problem This is the debug log:  time=""2021-11-01T19:24:49+01:00"" level=debug msg=""full command: {\""jsonrpc\"":\""2.0\"",\""method\"":\""updateGroup\"",\""id\"":\""983f3b8b-13f0-48f7-a771-8db6329922f6\"",\""params\"":{\""groupId\"":\""<id>\""}}"" [GIN] 2021/11/01 - 19:24:49 | 204 | 4.440421ms | 192.168.X.Y | POST ""/v1/groups/+49<number>/group.<id>/block""  This looks like an updateGroup call without any meaningful parameters, and indeed the group is not blocked afterwards:  { ""name"": ""Testgruppe X"", ""id"": ""group.<id>"", ""internal_id"": ""<id>"", ""members"": [ ""+49<number 1>"", ""+49<number 2>"" ], ""blocked"": false, ""pending_invites"": [], ""pending_requests"": [], ""invite_link"": """" },  To my understanding, [this](https://github.com/AsamK/signal-cli/blob/master/run_tests.sh#L106) is what the command should look like. I tried to test this, but signal-cli told me ""This command doesn't work on linked devices."" so it looks like I can't verify on my host. Writing this out made me notice that the command was never gonna work via the API in the first place (as it is a linked device). However, the debug log still looks wrong.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_",source-file | source-file,"/v1/groups/{number}/{groupid}/block endpoint does not do anything (JSON-RPC) The problem This is the debug log:  time=""2021-11-01T19:24:49+01:00"" level=debug msg=""full command: {\""jsonrpc\"":\""2.0\"",\""method\"":\""updateGroup\"",\""id\"":\""983f3b8b-13f0-48f7-a771-8db6329922f6\"",\""params\"":{\""groupId\"":\""<id>\""}}"" [GIN] 2021/11/01 - 19:24:49 | 204 | 4.440421ms | 192.168.X.Y | POST ""/v1/groups/+49<number>/group.<id>/block""  This looks like an updateGroup call without any meaningful parameters, and indeed the group is not blocked afterwards:  { ""name"": ""Testgruppe X"", ""id"": ""group.<id>"", ""internal_id"": ""<id>"", ""members"": [ ""+49<number 1>"", ""+49<number 2>"" ], ""blocked"": false, ""pending_invites"": [], ""pending_requests"": [], ""invite_link"": """" },  To my understanding, [this](https://github.com/AsamK/signal-cli/blob/master/run_tests.sh#L106) is what the command should look like. I tried to test this, but signal-cli told me ""This command doesn't work on linked devices."" so it looks like I can't verify on my host. Writing this out made me notice that the command was never gonna work via the API in the first place (as it is a linked device). However, the debug log still looks wrong.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_ source-file source-file",bug,0.9
237,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/237,Please provide a simple function to trust devices,"Subject says it all: I ran into the issue that signal-cli won't send any longer to some devices. Only digging in the logs gave me the hint that somehow signal-cli does no longer send to untrusted devices (why?). Now I have the hassle to enter the security number for all those devices in long curl calls. I appreciate Signal for all its security and privacy features, but I also appreciate that the security number stuff is completely optional on ""conventional"" devices. I don't really understand why signal-cli seems to enforce the validation, that's overkill IMHO. The command line client at least offers an option to trust a device without entering the security number. Can this feature made accessible via the api, too?",source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file,"Please provide a simple function to trust devices Subject says it all: I ran into the issue that signal-cli won't send any longer to some devices. Only digging in the logs gave me the hint that somehow signal-cli does no longer send to untrusted devices (why?). Now I have the hassle to enter the security number for all those devices in long curl calls. I appreciate Signal for all its security and privacy features, but I also appreciate that the security number stuff is completely optional on ""conventional"" devices. I don't really understand why signal-cli seems to enforce the validation, that's overkill IMHO. The command line client at least offers an option to trust a device without entering the security number. Can this feature made accessible via the api, too? source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file",no-bug,0.8
216,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/216,Allow custom UID and GID,"Feature Request The current implementation does not allow to select the custom UID and GID (it's hardcoded to 1000 - especially in jsonrpc2-helper). Please, allow to override those defaults with the environment variable (like `SIGNAL_CLI_UID` and `SIGNAL_CLI_GID`). A workaround entrypoint.sh script:  #!/bin/sh set -x set -e userdel signal-api groupadd -g ${SIGNAL_CLI_GID} signal-api useradd -u ${SIGNAL_CLI_UID} -g ${SIGNAL_CLI_GID} -r -s /sbin/nologin signal-api cap_prefix=""-cap_"" caps=""$cap_prefix$(seq -s "",$cap_prefix"" 0 $(cat /proc/sys/kernel/cap_last_cap))"" if [ ""$MODE"" = ""json-rpc"" ]; then /usr/bin/jsonrpc2-helper chown signal-api.signal-api /tmp/sigsocket0 service supervisor start supervisorctl start all fi # Start API as signal-api user exec setpriv --reuid=${SIGNAL_CLI_UID} --regid=${SIGNAL_CLI_GID} --init-groups --inh-caps=$caps signal-cli-rest-api -signal-cli-config=${SIGNAL_CLI_CONFIG_DIR}",container-file | config-file | source-file | documentation-file | container-file | config-file | source-file | documentation-file,"Allow custom UID and GID Feature Request The current implementation does not allow to select the custom UID and GID (it's hardcoded to 1000 - especially in jsonrpc2-helper). Please, allow to override those defaults with the environment variable (like `SIGNAL_CLI_UID` and `SIGNAL_CLI_GID`). A workaround entrypoint.sh script:  #!/bin/sh set -x set -e userdel signal-api groupadd -g ${SIGNAL_CLI_GID} signal-api useradd -u ${SIGNAL_CLI_UID} -g ${SIGNAL_CLI_GID} -r -s /sbin/nologin signal-api cap_prefix=""-cap_"" caps=""$cap_prefix$(seq -s "",$cap_prefix"" 0 $(cat /proc/sys/kernel/cap_last_cap))"" if [ ""$MODE"" = ""json-rpc"" ]; then /usr/bin/jsonrpc2-helper chown signal-api.signal-api /tmp/sigsocket0 service supervisor start supervisorctl start all fi # Start API as signal-api user exec setpriv --reuid=${SIGNAL_CLI_UID} --regid=${SIGNAL_CLI_GID} --init-groups --inh-caps=$caps signal-cli-rest-api -signal-cli-config=${SIGNAL_CLI_CONFIG_DIR} container-file config-file source-file documentation-file container-file config-file source-file documentation-file",no-bug,0.9
12,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/12,Add group support to the 'send' REST endpoint,https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#send,source-file | source-file,Add group support to the 'send' REST endpoint https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#send source-file source-file,no-bug,0.7
556,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/556,panic: concurrent write to websocket,"The problem I was trying to send many messages using 8 consumers in the [signalbot](https://github.com/filipre/signalbot) and got this error:  panic: concurrent write to websocket connection goroutine 137 [running]: github.com/gorilla/websocket.(*messageWriter).flushFrame(0x4000417f08, 0x1, {0x15f21c0?, 0x4000417f88?, 0x400035af00?}) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:617 +0x460 github.com/gorilla/websocket.(*Conn).WriteMessage(0x4000d518c0, 0x4000417f78?, {0x15f21c0, 0x0, 0x0}) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:770 +0xf4 github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x4000d518c0, 0x40001968a0) /tmp/signal-cli-rest-api-src/api/api.go:524 +0x90 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 134 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"panic: concurrent write to websocket The problem I was trying to send many messages using 8 consumers in the [signalbot](https://github.com/filipre/signalbot) and got this error:  panic: concurrent write to websocket connection goroutine 137 [running]: github.com/gorilla/websocket.(*messageWriter).flushFrame(0x4000417f08, 0x1, {0x15f21c0?, 0x4000417f88?, 0x400035af00?}) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:617 +0x460 github.com/gorilla/websocket.(*Conn).WriteMessage(0x4000d518c0, 0x4000417f78?, {0x15f21c0, 0x0, 0x0}) /go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:770 +0xf4 github.com/bbernhard/signal-cli-rest-api/api.wsPing(0x4000d518c0, 0x40001968a0) /tmp/signal-cli-rest-api-src/api/api.go:524 +0x90 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 134 /tmp/signal-cli-rest-api-src/api/api.go:564 +0x750   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",no-bug,0.9
198,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/198,First messages get lost when receiving via WebSocket,"The problem Hi everyone! As I am unsure if the following behavior is a problem specific to the signal-cli api or not, please feel free to close this issue if my question is not related to this project. I set up the signal-cli in a Docker Container and enabled json-rpc mode. Sending messages works like a charm, receiving messages does also work fine, at least to some degree. I noticed a kind of strange behavior that I can not explain to myself. Therefore I would be happy if someone could have a look at the following description of my problem: I wrote a simple Python program, that utilizes the WebSocket-client library to establish a connection to the receive endpoint and prints all incoming messages. However, the exact code of it seems to be irrelevant, as the same thing occurs when I establish a connection via wscat. When I start my receiving ws client, it misses the first x messages that are being sent to the signal-cli. All messages after the xth message get delivered without any problem. Here's how the number x of messages that get lost is determined: When I start my client, receive some messages, stop my client, and then start it up again, x is 1. Therefore I need to send 1 message to the signal-cli that gets lost, then I can continue to receive everything that is incoming as it should be. However, if I do not send a message to the signal-cli in this case and instead stop and restart my ws client again, x is equal to 2 now. The number of lost messages increases for every time a receiving client gets started and stopped, when no message gets sent to the cli while the client is running. It seems to be the case, that somehow all established connections of a WebSocket client get ""stacked"" inside the signal-cli API and for every incoming message, one of these (dead) connections gets removed from the stack, until finally the current (valid) ws client connection is on top and gets the messages delivered. Is somebody able to make any sense of this kind of behavior? I'd be very grateful if someone could explain to me what's going on here and maybe how to avoid this problem. Thank you very much!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file | source-file | source-file | source-file,"First messages get lost when receiving via WebSocket The problem Hi everyone! As I am unsure if the following behavior is a problem specific to the signal-cli api or not, please feel free to close this issue if my question is not related to this project. I set up the signal-cli in a Docker Container and enabled json-rpc mode. Sending messages works like a charm, receiving messages does also work fine, at least to some degree. I noticed a kind of strange behavior that I can not explain to myself. Therefore I would be happy if someone could have a look at the following description of my problem: I wrote a simple Python program, that utilizes the WebSocket-client library to establish a connection to the receive endpoint and prints all incoming messages. However, the exact code of it seems to be irrelevant, as the same thing occurs when I establish a connection via wscat. When I start my receiving ws client, it misses the first x messages that are being sent to the signal-cli. All messages after the xth message get delivered without any problem. Here's how the number x of messages that get lost is determined: When I start my client, receive some messages, stop my client, and then start it up again, x is 1. Therefore I need to send 1 message to the signal-cli that gets lost, then I can continue to receive everything that is incoming as it should be. However, if I do not send a message to the signal-cli in this case and instead stop and restart my ws client again, x is equal to 2 now. The number of lost messages increases for every time a receiving client gets started and stopped, when no message gets sent to the cli while the client is running. It seems to be the case, that somehow all established connections of a WebSocket client get ""stacked"" inside the signal-cli API and for every incoming message, one of these (dead) connections gets removed from the stack, until finally the current (valid) ws client connection is on top and gets the messages delivered. Is somebody able to make any sense of this kind of behavior? I'd be very grateful if someone could explain to me what's going on here and maybe how to avoid this problem. Thank you very much!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file source-file source-file source-file",no-bug,0.8
510,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/510,arm64 image complains of missing cpu feature,"The problem Been using signal-cli-rest-api for a long time on an aarch64 vps without any issues but after updating the image today I'm seeing the following: >""/v1/receive/(redacted number)?ignore_attachments=false&ignore_stories=false&timeout=10"" >time=""2024-04-03T04:00:00+03:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number >(redacted number): {The current machine does not support all of the following CPU features that are required by the >image: [FP, ASIMD, AES, PMULL, SHA1, SHA2, CRC32, LSE, DCPOP, SHA3, SHA512, SVE, PACA, SVEBITPERM, SVE2].\nPlease >rebuild the executable with an appropriate setting of the -march option.}"" The CPU in the VPS claims to be an ARM Neoverse-N1 with the following cpu flags: fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm lrcpc dcpop asimddp ssbs  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? arm64  Additional information _No response_",container-file | other-file,"arm64 image complains of missing cpu feature The problem Been using signal-cli-rest-api for a long time on an aarch64 vps without any issues but after updating the image today I'm seeing the following: >""/v1/receive/(redacted number)?ignore_attachments=false&ignore_stories=false&timeout=10"" >time=""2024-04-03T04:00:00+03:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number >(redacted number): {The current machine does not support all of the following CPU features that are required by the >image: [FP, ASIMD, AES, PMULL, SHA1, SHA2, CRC32, LSE, DCPOP, SHA3, SHA512, SVE, PACA, SVEBITPERM, SVE2].\nPlease >rebuild the executable with an appropriate setting of the -march option.}"" The CPU in the VPS claims to be an ARM Neoverse-N1 with the following cpu flags: fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm lrcpc dcpop asimddp ssbs  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? arm64  Additional information _No response_ container-file other-file",no-bug,0.9
413,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/413,broken formatting when using styling with multicharacter emojis,"The problem When sending multicharacter emojis (for example emojis that use a skin color modifier) and styling (bold, italic, etc.), something about the formatting breaks. Depending on the actual message, the emoji will break or the formatting is shifted.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? json-rpc  What's the architecture of your host system? x86-64  Additional information Multicharacter emoji without styling works. json { ""message"": ""abcdefg"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/d1dc669e-6fc3-4954-8d29-a8b8997c7b5e)  When using a multicharacter emoji and then some styled text, the styling is shifted to the left by two characters. The `bc` is now styled bold and `fg` is no longer styled bold. json { ""message"": ""abc**defg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/bf334463-a88f-4d47-a7c6-0290b0b8473f)  When the styling is less then two characters away, the emoji breaks. *two characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/c6efbf80-a323-416c-a82a-806a3213e3af) *one characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/dc0cc8da-c970-4b6c-9e72-3f2d2bc75031) *directly after* json { ""message"": ""**abcdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/ff4ec511-b32f-489e-967e-3d7f575b1d14)  Weirdly enough this behaves differently on the Signal Windows Client than on the Android App. The previous screenshots are from the Windows Client, the following from the Android App. In the notification, the issue is not present at all, I guess because the message is stripped of the formatting anyways. ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/557301a0-ea9b-41ec-9ec6-d8bce3c0e168) Here's how the Android App behaves in the chat: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/4af4d379-ef07-4f9c-8586-a965405b3187)",source-file | test-file,"broken formatting when using styling with multicharacter emojis The problem When sending multicharacter emojis (for example emojis that use a skin color modifier) and styling (bold, italic, etc.), something about the formatting breaks. Depending on the actual message, the emoji will break or the formatting is shifted.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? json-rpc  What's the architecture of your host system? x86-64  Additional information Multicharacter emoji without styling works. json { ""message"": ""abcdefg"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/d1dc669e-6fc3-4954-8d29-a8b8997c7b5e)  When using a multicharacter emoji and then some styled text, the styling is shifted to the left by two characters. The `bc` is now styled bold and `fg` is no longer styled bold. json { ""message"": ""abc**defg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/bf334463-a88f-4d47-a7c6-0290b0b8473f)  When the styling is less then two characters away, the emoji breaks. *two characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/c6efbf80-a323-416c-a82a-806a3213e3af) *one characters away* json { ""message"": ""ab**cdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/dc0cc8da-c970-4b6c-9e72-3f2d2bc75031) *directly after* json { ""message"": ""**abcdefg**"", ""number"": ""{{BOT_NUMBER}}"", ""recipients"": [ ""{{RECIPIENT_NUMBER}}"" ], ""text_mode"":""styled"" }  ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/ff4ec511-b32f-489e-967e-3d7f575b1d14)  Weirdly enough this behaves differently on the Signal Windows Client than on the Android App. The previous screenshots are from the Windows Client, the following from the Android App. In the notification, the issue is not present at all, I guess because the message is stripped of the formatting anyways. ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/557301a0-ea9b-41ec-9ec6-d8bce3c0e168) Here's how the Android App behaves in the chat: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/49568639/4af4d379-ef07-4f9c-8586-a965405b3187) source-file test-file",bug,0.85
175,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/175,Swagger documentation of HTTP success status codes is incorrect?,"The problem I barely understand the Go language, but looking at [api.go](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go), I can see multiple endpoints that result in c.Status(http.StatusNoContent), which should be status code 204, when not erroring out, but their Swagger documentation lists them with code 200. A quick test confirmed that successful requests indeed give status 204 on my end. These endpoints are: - [/v1/configuration](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L749) (POST) - [/v1/groups/{number}/{groupid}/block](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L805) - [/v1/groups/{number}/{groupid}/join](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L838) - [/v1/groups/{number}/{groupid}/quit](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L871) The newly introduced /v1/typing-indicator/{number} endpoints also result in c.Status(http.StatusNoContent), but the documentation has them listed with status code 201. However, I haven't been able to test this yet. I apologize if there's just something that I'm missing because I don't know a lot about the Go language. But in case this is just an oversight in the documentation, I wanted to point this out. :)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_",source-file | source-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file,"Swagger documentation of HTTP success status codes is incorrect? The problem I barely understand the Go language, but looking at [api.go](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go), I can see multiple endpoints that result in c.Status(http.StatusNoContent), which should be status code 204, when not erroring out, but their Swagger documentation lists them with code 200. A quick test confirmed that successful requests indeed give status 204 on my end. These endpoints are: - [/v1/configuration](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L749) (POST) - [/v1/groups/{number}/{groupid}/block](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L805) - [/v1/groups/{number}/{groupid}/join](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L838) - [/v1/groups/{number}/{groupid}/quit](https://github.com/bbernhard/signal-cli-rest-api/blob/2d80ff91a2463fa370c12a65b62b7bc0c81c3dbb/src/api/api.go#L871) The newly introduced /v1/typing-indicator/{number} endpoints also result in c.Status(http.StatusNoContent), but the documentation has them listed with status code 201. However, I haven't been able to test this yet. I apologize if there's just something that I'm missing because I don't know a lot about the Go language. But in case this is just an oversight in the documentation, I wanted to point this out. :)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? armv7  Additional information _No response_ source-file source-file documentation-file documentation-file source-file source-file documentation-file documentation-file",bug,0.9
482,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/482,Call Webhook when ratelimit error,"Feature Request Hi, we are using this library in a production environment for sending messages from multiple numbers to customers. We sometimes have the problem, that we get rate limited. Is there a way to implement it, so that the signal-cli-rest-api is calling a webhook to notify us that there is a rate limit challenge waiting or any other way to get notified of that?",source-file | source-file | source-file | source-file,"Call Webhook when ratelimit error Feature Request Hi, we are using this library in a production environment for sending messages from multiple numbers to customers. We sometimes have the problem, that we get rate limited. Is there a way to implement it, so that the signal-cli-rest-api is calling a webhook to notify us that there is a rate limit challenge waiting or any other way to get notified of that? source-file source-file source-file source-file",no-bug,0.9
66,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/66,New API call: trust,Could you please implement a REST API call for trusting safety numbers? https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#trust,source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file,New API call: trust Could you please implement a REST API call for trusting safety numbers? https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#trust source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file,no-bug,0.9
165,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/165,expose addDevice command,"Feature Request Hoping to add the desktop app as a secondary client via the [Linking other devices](https://github.com/AsamK/signal-cli/wiki/Linking-other-devices-(Provisioning)) page's 'Add another device' command:  signal-cli -u USERNAME addDevice --uri ""tsdevice:/""",source-file | source-file | source-file | source-file | source-file | source-file,"expose addDevice command Feature Request Hoping to add the desktop app as a secondary client via the [Linking other devices](https://github.com/AsamK/signal-cli/wiki/Linking-other-devices-(Provisioning)) page's 'Add another device' command:  signal-cli -u USERNAME addDevice --uri ""tsdevice:/"" source-file source-file source-file source-file source-file source-file",no-bug,0.9
654,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/654,Parameter notify_self only works for group chats,"The problem When sending a message the `notify_self` parameter set to false is only take effect when the recipient of the message is a group. I guess the reason is that the parameter is not being passed to the function [SignalCliSendRequest](https://github.com/bbernhard/signal-cli-rest-api/blob/42f10c3dd73826cb0c3019eae154abd272469e20/src/client/client.go#L793). I think it doesn't work either if a username is used, but I haven't tested it.  Release version shell  curl -X GET 'http://127.0.0.1:8999/v1/about' {""versions"":[""v1"",""v2""],""build"":2,""mode"":""native"",""version"":""0.91"",""capabilities"":{""v2/send"":[""quotes"",""mentions""]}}   Test curl to a group shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""group.SDh0aW9PbVUze[]TL0VqND0=""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:01:53Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin -g H8tio[]z0atS/Ej4=""   Test curl to a phone number shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""+XXX""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:05:35Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin +XXX --notify-self""   Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Parameter notify_self only works for group chats The problem When sending a message the `notify_self` parameter set to false is only take effect when the recipient of the message is a group. I guess the reason is that the parameter is not being passed to the function [SignalCliSendRequest](https://github.com/bbernhard/signal-cli-rest-api/blob/42f10c3dd73826cb0c3019eae154abd272469e20/src/client/client.go#L793). I think it doesn't work either if a username is used, but I haven't tested it.  Release version shell  curl -X GET 'http://127.0.0.1:8999/v1/about' {""versions"":[""v1"",""v2""],""build"":2,""mode"":""native"",""version"":""0.91"",""capabilities"":{""v2/send"":[""quotes"",""mentions""]}}   Test curl to a group shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""group.SDh0aW9PbVUze[]TL0VqND0=""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:01:53Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin -g H8tio[]z0atS/Ej4=""   Test curl to a phone number shell  curl -X POST -H ""Content-Type: application/json"" -d '{""message"": ""Hello World!"", ""number"": ""+XXX"", ""recipients"": [""+XXX""], ""notify_self"": false}' 'http://127.0.0.1:8999/v2/send' time=""2025-02-09T13:05:35Z"" level=debug msg=""*) echo 'Hello World!' | signal-cli-native --config /home/.local/share/signal-cli -a +XXX send --message-from-stdin +XXX --notify-self""   Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.95
511,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/511,"Notifications on ""Note to Self"" stopped working","The problem When sending a message to self (same number on ""from"" and ""to""), both Android and Desktop clients would trigger a standard notification. After upgrading to 0.82, that is no longer the case - the message is delivered fine, but silently, without notifications. Reverting to 0.81 restores the previous functionality.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Notifications on ""Note to Self"" stopped working The problem When sending a message to self (same number on ""from"" and ""to""), both Android and Desktop clients would trigger a standard notification. After upgrading to 0.82, that is no longer the case - the message is delivered fine, but silently, without notifications. Reverting to 0.81 restores the previous functionality.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",no-bug,0.9
466,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/466,/v1/contacts and /v1/contacts{number}/sync don't seem to work,The problem I am running the latest 0.80 version and cannot seem to get the api endpoints for /v1/contacts and /v1/contacts{number}/sync to work. I just get an error 404 returned everytime. Would you be able to provide some sample curl commands and confirm if these endpoints do in fact work in the latest version?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_,source-file | source-file | documentation-file | documentation-file,/v1/contacts and /v1/contacts{number}/sync don't seem to work The problem I am running the latest 0.80 version and cannot seem to get the api endpoints for /v1/contacts and /v1/contacts{number}/sync to work. I just get an error 404 returned everytime. Would you be able to provide some sample curl commands and confirm if these endpoints do in fact work in the latest version?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file documentation-file documentation-file,bug,0.9
6,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/6,Home Assistant multiple recipients,"Sorry for asking here (if you want me I can coly to HA's issues), but how do I specify multiple recipients? yaml - name: Signal Csalad platform: signal_messenger url: ""http://172.22.222.12:8080"" number: ""+XXXXXXXXXX"" recipients: - ""+AAAAAAAAA"" - ""+BBBBBBBBBB""  This only forwards messages only to +BBBBBBBBBB (the last one in the list).",container-file | container-file,"Home Assistant multiple recipients Sorry for asking here (if you want me I can coly to HA's issues), but how do I specify multiple recipients? yaml - name: Signal Csalad platform: signal_messenger url: ""http://172.22.222.12:8080"" number: ""+XXXXXXXXXX"" recipients: - ""+AAAAAAAAA"" - ""+BBBBBBBBBB""  This only forwards messages only to +BBBBBBBBBB (the last one in the list). container-file container-file",no-bug,0.7
187,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/187,v1/groups/{phone#] API endpoint returning Go struct error,"The problem Steps to reproduce:  curl -X GET -H ""Content-Type: application/json"" 'http://192.168.86.44:8080/v1/groups/+15853710007' > out.json && python -m json.tool out.json | less  And getting this response:  { ""error"": ""json: cannot unmarshal object into Go struct field SignalCliGroupEntry.pendingMembers of type string"" }  I would expect to get the regular JSON output with the content of the groups.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"v1/groups/{phone#] API endpoint returning Go struct error The problem Steps to reproduce:  curl -X GET -H ""Content-Type: application/json"" 'http://192.168.86.44:8080/v1/groups/+15853710007' > out.json && python -m json.tool out.json | less  And getting this response:  { ""error"": ""json: cannot unmarshal object into Go struct field SignalCliGroupEntry.pendingMembers of type string"" }  I would expect to get the regular JSON output with the content of the groups.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",bug,0.95
657,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/657,Group description missing from groups.,"The problem I am trying to get a group description, but both list_group and list_groups don't seem to return it. In the signal-cli documentation, they have this example listed which shows a group description being returned. REQUEST: `{""jsonrpc"":""2.0"",""method"":""listGroups"",""id"":""my special mark""}` RESPONSE: `{""jsonrpc"":""2.0"",""result"":[{""id"":""Pmpi+EfPWmsxiomLe9Nx2XF9HOE483p6iKiFj65iMwI="",""name"":""My Group"",""description"":""Its special because it is mine."",""isMember"":true,""isBlocked"":false,""members"":[""+33123456789"",""+440123456789""],""pendingMembers"":[],""requestingMembers"":[],""admins"":[""+33123456789"",""+440123456789""],""groupInviteLink"":""https://signal.group/#CjQKIAtcbUw482i7bqvmJCwdgvg0FMif52N5v9lGg_bE4U3zEhCjHKSaPzWImMpnCbU8A1r0""}],""id"":""my special mark""}` Do you know if this is a limitation with the API, or is the Signal-CLI documentation out of date? Thanks either way!  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also tried JSON-RPC mode, no change.",source-file,"Group description missing from groups. The problem I am trying to get a group description, but both list_group and list_groups don't seem to return it. In the signal-cli documentation, they have this example listed which shows a group description being returned. REQUEST: `{""jsonrpc"":""2.0"",""method"":""listGroups"",""id"":""my special mark""}` RESPONSE: `{""jsonrpc"":""2.0"",""result"":[{""id"":""Pmpi+EfPWmsxiomLe9Nx2XF9HOE483p6iKiFj65iMwI="",""name"":""My Group"",""description"":""Its special because it is mine."",""isMember"":true,""isBlocked"":false,""members"":[""+33123456789"",""+440123456789""],""pendingMembers"":[],""requestingMembers"":[],""admins"":[""+33123456789"",""+440123456789""],""groupInviteLink"":""https://signal.group/#CjQKIAtcbUw482i7bqvmJCwdgvg0FMif52N5v9lGg_bE4U3zEhCjHKSaPzWImMpnCbU8A1r0""}],""id"":""my special mark""}` Do you know if this is a limitation with the API, or is the Signal-CLI documentation out of date? Thanks either way!  Are you using the latest released version? - [x] Yes  Have you read the troubleshooting page? - [x] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also tried JSON-RPC mode, no change. source-file",bug,0.9
210,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/210,Changing / Adding group members,The problem I have created groups through the signal api with multiple members. I am able to leave and then rejoin this group myself (eg. the number associated with the API); I'm currently unable to add/remove members and or change group settings for groups created through the API. Looking at the upstream this should be feasible; any tips?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_,source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file,Changing / Adding group members The problem I have created groups through the signal api with multiple members. I am able to leave and then rejoin this group myself (eg. the number associated with the API); I'm currently unable to add/remove members and or change group settings for groups created through the API. Looking at the upstream this should be feasible; any tips?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information _No response_ source-file source-file source-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file source-file,no-bug,0.8
11,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/11,License,"Hi, your API looks quite cool and of course I think that you want to share your code, but as you state no license, technically no one is allowed to use it (without your explicit permission). **So, Im sorry to bother you with this legal stuff, but would you please add a license of your choice to your project?** (Side note: It get's far more weird for every user of go packages as everyone has to comply with *all* licenses of every used go dep as go links (mostly) statically..) Thanks!",other-file | other-file,"License Hi, your API looks quite cool and of course I think that you want to share your code, but as you state no license, technically no one is allowed to use it (without your explicit permission). **So, Im sorry to bother you with this legal stuff, but would you please add a license of your choice to your project?** (Side note: It get's far more weird for every user of go packages as everyone has to comply with *all* licenses of every used go dep as go links (mostly) statically..) Thanks! other-file other-file",no-bug,0.95
456,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/456,Subject: Issue with signal-cli-rest-api: CAPTCHA proof required error,"The problem I am encountering an issue while using the signal-cli-rest-api to send messages. The error message is as follows: text {""error"":""Failed to send (some) messages:\n+19291043005: CAPTCHA proof required for sending to \""+19291043005\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""26ccfae6-4fc1-4df0-a27c-084a8191704c\"", or wait \""86400\"" seconds.\nTo get the captcha token, go to https://signalcaptchas.org/challenge/generate.html\nAfter solving the captcha, right-click on the \""Open Signal\"" link and copy the link.\nUse the following command to submit the captcha token:\nsignal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN\n1700812896656\nFailed to send message due to rate limiting\n""}   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information Currently, the problem is resolved by executing the following command on the server: bash signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  However, I am exploring a way to achieve the same result programmatically using curl. **Request for Assistance:** I am reaching out to the community for guidance on using curl or a similar command-line tool to automate the resolution of the CAPTCHA challenge in the signal-cli-rest-api.",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Subject: Issue with signal-cli-rest-api: CAPTCHA proof required error The problem I am encountering an issue while using the signal-cli-rest-api to send messages. The error message is as follows: text {""error"":""Failed to send (some) messages:\n+19291043005: CAPTCHA proof required for sending to \""+19291043005\"", available options \""RECAPTCHA, PUSH_CHALLENGE\"" with challenge token \""26ccfae6-4fc1-4df0-a27c-084a8191704c\"", or wait \""86400\"" seconds.\nTo get the captcha token, go to https://signalcaptchas.org/challenge/generate.html\nAfter solving the captcha, right-click on the \""Open Signal\"" link and copy the link.\nUse the following command to submit the captcha token:\nsignal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN\n1700812896656\nFailed to send message due to rate limiting\n""}   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information Currently, the problem is resolved by executing the following command on the server: bash signal-cli submitRateLimitChallenge --challenge CHALLENGE_TOKEN --captcha CAPTCHA_TOKEN  However, I am exploring a way to achieve the same result programmatically using curl. **Request for Assistance:** I am reaching out to the community for guidance on using curl or a similar command-line tool to automate the resolution of the CAPTCHA challenge in the signal-cli-rest-api. source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.9
7,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/7,Add support for voice registration,"The [signal-cli](https://github.com/AsamK/signal-cli) supports voice registration for landline numbers. Can you add the `--voice` command? When i register myself in the shell `docker exec -it signal-cli-rest-api sh` `signal-cli -u +49xxxxxx register --voice` i get an authorization error during the verification using the rest service: [{""error"":""Authorization failed, was the number registered elsewhere?\nError loading state file: Authorization failed!\n""}](url)",documentation-file | source-file | documentation-file | source-file,"Add support for voice registration The [signal-cli](https://github.com/AsamK/signal-cli) supports voice registration for landline numbers. Can you add the `--voice` command? When i register myself in the shell `docker exec -it signal-cli-rest-api sh` `signal-cli -u +49xxxxxx register --voice` i get an authorization error during the verification using the rest service: [{""error"":""Authorization failed, was the number registered elsewhere?\nError loading state file: Authorization failed!\n""}](url) documentation-file source-file documentation-file source-file",no-bug,0.8
9,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/9,Feature link devices,"It would be great to support the feature of linking devices so we can use my number. The signal-cli already supports this. So I enter on the docker container instance. `docker exec -it -u 0 NameOfContainer bash` and generate the link code `signal-cli link -n ""signal-laptop""` It generate +- a String like this `tsdevice:/\?uuid=asdfghjkl\&pub_key=qwertyuiop` Then I generate a picture (QR-Code) with https://linux.die.net/man/1/qrencode `qrencode -o linkqr.png tsdevice:/\?uuid=asdfghjkl\&pub_key=qwertyuiop` Which I scan with my Android device After that, I was able to send messages via `signal-cli` from inside of the container instance. (Too good to be true.) When I call the API (`signal-cli-rest-api`) it did not work as I wanted, it gave some errors. I never tried to write in go. So I don't know if I'm going to try to do this. Also, I don't really need it. Was just playing around here. This API makes really easy to integrate other stuff. Thanks @bbernhard",source-file | source-file,"Feature link devices It would be great to support the feature of linking devices so we can use my number. The signal-cli already supports this. So I enter on the docker container instance. `docker exec -it -u 0 NameOfContainer bash` and generate the link code `signal-cli link -n ""signal-laptop""` It generate +- a String like this `tsdevice:/\?uuid=asdfghjkl\&pub_key=qwertyuiop` Then I generate a picture (QR-Code) with https://linux.die.net/man/1/qrencode `qrencode -o linkqr.png tsdevice:/\?uuid=asdfghjkl\&pub_key=qwertyuiop` Which I scan with my Android device After that, I was able to send messages via `signal-cli` from inside of the container instance. (Too good to be true.) When I call the API (`signal-cli-rest-api`) it did not work as I wanted, it gave some errors. I never tried to write in go. So I don't know if I'm going to try to do this. Also, I don't really need it. Was just playing around here. This API makes really easy to integrate other stuff. Thanks @bbernhard source-file source-file",no-bug,0.8
616,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/616,Add expiration_time parameter for update group,"Hi @bbernhard, thanks so much for the library! Just started integrating this in on a web app and one of the feature we'd like is to: set disappearing message timer for an existing group. I see you recently added this on the [create group endpoint](https://github.com/bbernhard/signal-cli-rest-api/commit/94e93cbe3531e41378f912823f1ad1bbe186c983) and was wondering if you're planning to implement the same for update group?",source-file | source-file | source-file | documentation-file | documentation-file,"Add expiration_time parameter for update group Hi @bbernhard, thanks so much for the library! Just started integrating this in on a web app and one of the feature we'd like is to: set disappearing message timer for an existing group. I see you recently added this on the [create group endpoint](https://github.com/bbernhard/signal-cli-rest-api/commit/94e93cbe3531e41378f912823f1ad1bbe186c983) and was wondering if you're planning to implement the same for update group? source-file source-file source-file documentation-file documentation-file",no-bug,0.9
103,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/103,No serializer found for class org.asamk.signal.json.JsonSyncMessage and no properties discovered to create BeanSerializer,"On /receive { error: ""WARN ReceiveCommand - ""--json"" option has been deprecated, please use the global ""--output=json"" instead. Failed to send/receive message (Assertion): com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) java.lang.AssertionError: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at org.asamk.signal.JsonWriter.write(JsonWriter.java:32) at org.asamk.signal.JsonReceiveMessageHandler.handleMessage(JsonReceiveMessageHandler.java:37) at org.asamk.signal.manager.Manager.receiveMessages(Manager.java:1782) at org.asamk.signal.commands.ReceiveCommand.handleCommand(ReceiveCommand.java:168) at org.asamk.signal.App.handleLocalCommand(App.java:211) at org.asamk.signal.App.init(App.java:169) at org.asamk.signal.Main.main(Main.java:43) Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:313) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:722) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:643) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:33) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3906) at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3202) at org.asamk.signal.JsonWriter.write(JsonWriter.java:29)  6 more If you use an Oracle JRE please check if you have unlimited strength crypto enabled, see README "" }",source-file | source-file,"No serializer found for class org.asamk.signal.json.JsonSyncMessage and no properties discovered to create BeanSerializer On /receive { error: ""WARN ReceiveCommand - ""--json"" option has been deprecated, please use the global ""--output=json"" instead. Failed to send/receive message (Assertion): com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) java.lang.AssertionError: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at org.asamk.signal.JsonWriter.write(JsonWriter.java:32) at org.asamk.signal.JsonReceiveMessageHandler.handleMessage(JsonReceiveMessageHandler.java:37) at org.asamk.signal.manager.Manager.receiveMessages(Manager.java:1782) at org.asamk.signal.commands.ReceiveCommand.handleCommand(ReceiveCommand.java:168) at org.asamk.signal.App.handleLocalCommand(App.java:211) at org.asamk.signal.App.init(App.java:169) at org.asamk.signal.Main.main(Main.java:43) Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.asamk.signal.json.JsonGroupInfo and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: java.util.HashMap[""envelope""]->org.asamk.signal.json.JsonMessageEnvelope[""dataMessage""]->org.asamk.signal.json.JsonDataMessage[""groupInfo""]) at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:313) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:722) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:643) at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:33) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3906) at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3202) at org.asamk.signal.JsonWriter.write(JsonWriter.java:29)  6 more If you use an Oracle JRE please check if you have unlimited strength crypto enabled, see README "" } source-file source-file",bug,0.95
225,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/225,Base URL in Swagger defaults to 127.0.0.1,"The problem I would like to test API calls using the built-in Swagger interface (http://192.168.199.34:8080/swagger/index.html), but the Base URL defaults to `[ Base URL: 127.0.0.1:8080/ ]` as seen below. When I try to test API calls, it uses 127.0.0.1 instead of my docker host IP. Is it possible to change this please? <img width=""653"" alt=""image"" src=""https://user-images.githubusercontent.com/3072303/156653050-59430514-acc3-4fd6-8e06-e5a17d823625.png"">  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_",documentation-file | config-file | source-file | source-file | documentation-file | documentation-file | source-file | documentation-file | config-file | source-file | source-file | documentation-file | documentation-file | source-file,"Base URL in Swagger defaults to 127.0.0.1 The problem I would like to test API calls using the built-in Swagger interface (http://192.168.199.34:8080/swagger/index.html), but the Base URL defaults to `[ Base URL: 127.0.0.1:8080/ ]` as seen below. When I try to test API calls, it uses 127.0.0.1 instead of my docker host IP. Is it possible to change this please? <img width=""653"" alt=""image"" src=""https://user-images.githubusercontent.com/3072303/156653050-59430514-acc3-4fd6-8e06-e5a17d823625.png"">  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information _No response_ documentation-file config-file source-file source-file documentation-file documentation-file source-file documentation-file config-file source-file source-file documentation-file documentation-file source-file",no-bug,0.9
382,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/382,support of new text-style option,Feature Request Signal-cli v0.11.11 introduced [text styles](https://github.com/exquo/signal-cli/blob/master/man/signal-cli.1.adoc) and I would love to use that via signal-cli-rest-api as well. Are there plans to implement this already? I know that it currently is not fully implemented in signal-cli ([missing in DBUS](https://github.com/AsamK/signal-cli/issues/1271)). That might be a blocker for now but I'm just curious if styling text messages will be implemented through the REST API as well. Would greatly help me in formatting notifications.,source-file | test-file | source-file | test-file,support of new text-style option Feature Request Signal-cli v0.11.11 introduced [text styles](https://github.com/exquo/signal-cli/blob/master/man/signal-cli.1.adoc) and I would love to use that via signal-cli-rest-api as well. Are there plans to implement this already? I know that it currently is not fully implemented in signal-cli ([missing in DBUS](https://github.com/AsamK/signal-cli/issues/1271)). That might be a blocker for now but I'm just curious if styling text messages will be implemented through the REST API as well. Would greatly help me in formatting notifications. source-file test-file source-file test-file,no-bug,0.95
602,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/602,Better documentation for endpoint /v2/send,"The problem Going on the [swagger page](https://bbernhard.github.io/signal-cli-rest-api/#/Messages/post_v2_send) of the api, the /v2/send endpoint seems not documented with all. It would help to explain somewhere how to pass all parameters. If I'm not mistaken, they are [a lot](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go). For example, I'm really not sure how to send a message to a group, mentionning someone in the message. Or what other option thant `text_mode` are available. I read the example page too and didn't find information about them.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? arm64  Additional information _No response_",source-file | documentation-file | documentation-file,"Better documentation for endpoint /v2/send The problem Going on the [swagger page](https://bbernhard.github.io/signal-cli-rest-api/#/Messages/post_v2_send) of the api, the /v2/send endpoint seems not documented with all. It would help to explain somewhere how to pass all parameters. If I'm not mistaken, they are [a lot](https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/api/api.go). For example, I'm really not sure how to send a message to a group, mentionning someone in the message. Or what other option thant `text_mode` are available. I read the example page too and didn't find information about them.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? arm64  Additional information _No response_ source-file documentation-file documentation-file",no-bug,0.9
639,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/639,make https url configurable for swagger_url,"Feature Request Add a Environment variable that Swagger uses https instead of http. I'm using signal-cli-rest-api to replace the old signal-cli api from Asamk, because of the better attachment handling (not needing the file inside the container, when attaching something) Not that i rely hard on Swagger, but it would be nice if there was an option to tell swagger that it would be reached via https instead of http. It is possible to change the url at the top to get it to work, though.",documentation-file | source-file,"make https url configurable for swagger_url Feature Request Add a Environment variable that Swagger uses https instead of http. I'm using signal-cli-rest-api to replace the old signal-cli api from Asamk, because of the better attachment handling (not needing the file inside the container, when attaching something) Not that i rely hard on Swagger, but it would be nice if there was an option to tell swagger that it would be reached via https instead of http. It is possible to change the url at the top to get it to work, though. documentation-file source-file",no-bug,0.9
136,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/136,Set file names of attachments,"Feature Request <!-- Fill in the relevant information below to help triage your issue. --> `TMPFILE=""$(base64 cat.jpg)"" && echo '{""message"": ""Hello CAT!"", ""base64_attachments"": [""'""$TMPFILE""'""], ""number"": ""+0000000000"", ""recipients"": [""+0000000000""]}' | curl -X POST -H ""Content-Type: application/json"" -d @- 'http://127.0.0.1:8080/v2/send'` Sending attachments works fine as long as ""github.com/h2non/filetype"" detects the file type. Unfortunately, some PDFs are not recognized. It would be an improvement if we could set the file name ourselves. e.g. `TMPFILE=""$(base64 cute_cat.pdf)"" && echo '{""message"": ""Hello CAT!"", ""base64_attachments"": [[""'""$TMPFILE""'"", ""cute_cat.pdf""]], ""number"": ""+0000000000"", ""recipients"": [""+0000000000""]}' | curl -X POST -H ""Content-Type: application/json"" -d @- 'http://127.0.0.1:8080/v2/send'`",source-file | source-file | source-file | source-file,"Set file names of attachments Feature Request <!-- Fill in the relevant information below to help triage your issue. --> `TMPFILE=""$(base64 cat.jpg)"" && echo '{""message"": ""Hello CAT!"", ""base64_attachments"": [""'""$TMPFILE""'""], ""number"": ""+0000000000"", ""recipients"": [""+0000000000""]}' | curl -X POST -H ""Content-Type: application/json"" -d @- 'http://127.0.0.1:8080/v2/send'` Sending attachments works fine as long as ""github.com/h2non/filetype"" detects the file type. Unfortunately, some PDFs are not recognized. It would be an improvement if we could set the file name ourselves. e.g. `TMPFILE=""$(base64 cute_cat.pdf)"" && echo '{""message"": ""Hello CAT!"", ""base64_attachments"": [[""'""$TMPFILE""'"", ""cute_cat.pdf""]], ""number"": ""+0000000000"", ""recipients"": [""+0000000000""]}' | curl -X POST -H ""Content-Type: application/json"" -d @- 'http://127.0.0.1:8080/v2/send'` source-file source-file source-file source-file",no-bug,0.9
363,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/363,`AUTO_RECEIVE_SCHEDULE` seems to be broken,"The problem So I'm trying to make the `AUTO_RECEIVE_SCHEDULE` work, but it feels like either smth has changed in the CLI config structure or the code for the CRON is outdated, or smth else :-( I've tried using 2 schedules that should just be calling the `receive` very frequently. The `* * * * *` - just to call it every minute and the `*/2 * * * *` - to call it once every 2 minutes. Both seem to do nothing. The container I'm running is the [v64](https://github.com/bbernhard/signal-cli-rest-api/releases/tag/0.64) and runs in `native` mode. I've tried enabling debug mode and see no debug logs from the CRON. I also don't see any logs with any errors. Just no CRON task logs whatsoever.  Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also, I see the health checks and `send` works fine and getting groups, etc. ![image](https://user-images.githubusercontent.com/5675689/236333830-4235e095-94ed-4af9-a8ba-763c341b7c1a.png) I'm not sure I fully understand the CRON file scanning logic, but it seems like there must be a file with a phone number format name in it (starts with `+`) in the signal CLI config (https://github.com/bbernhard/signal-cli-rest-api/blob/11da8f867d9b9931fbd4da6dded9c041c4d80236/src/main.go#L272) and I don't think there's anything like that in the config folder. I'm using the default config folder and it's content looks like this: ![image](https://user-images.githubusercontent.com/5675689/236334406-e73fb30b-c025-47f2-b7cf-c6be6894ee6a.png) (the JSON RPC is from the previous runs, I'm positive that I'm running in Native mode now). Also the `data` looks like this: ![image](https://user-images.githubusercontent.com/5675689/236334517-f54247f7-ef59-4199-a61d-b87d0372cdb7.png)",source-file | source-file,"`AUTO_RECEIVE_SCHEDULE` seems to be broken The problem So I'm trying to make the `AUTO_RECEIVE_SCHEDULE` work, but it feels like either smth has changed in the CLI config structure or the code for the CRON is outdated, or smth else :-( I've tried using 2 schedules that should just be calling the `receive` very frequently. The `* * * * *` - just to call it every minute and the `*/2 * * * *` - to call it once every 2 minutes. Both seem to do nothing. The container I'm running is the [v64](https://github.com/bbernhard/signal-cli-rest-api/releases/tag/0.64) and runs in `native` mode. I've tried enabling debug mode and see no debug logs from the CRON. I also don't see any logs with any errors. Just no CRON task logs whatsoever.  Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information Also, I see the health checks and `send` works fine and getting groups, etc. ![image](https://user-images.githubusercontent.com/5675689/236333830-4235e095-94ed-4af9-a8ba-763c341b7c1a.png) I'm not sure I fully understand the CRON file scanning logic, but it seems like there must be a file with a phone number format name in it (starts with `+`) in the signal CLI config (https://github.com/bbernhard/signal-cli-rest-api/blob/11da8f867d9b9931fbd4da6dded9c041c4d80236/src/main.go#L272) and I don't think there's anything like that in the config folder. I'm using the default config folder and it's content looks like this: ![image](https://user-images.githubusercontent.com/5675689/236334406-e73fb30b-c025-47f2-b7cf-c6be6894ee6a.png) (the JSON RPC is from the previous runs, I'm positive that I'm running in Native mode now). Also the `data` looks like this: ![image](https://user-images.githubusercontent.com/5675689/236334517-f54247f7-ef59-4199-a61d-b87d0372cdb7.png) source-file source-file",no-bug,0.8
402,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/402,Cannot encode QR code: content too large for fixed size QR Code version 10,"The problem I am trying to generate QR code for a new device but getting `{""error"":""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1172 bits, maximum length is 976 bits)""}` in response. images: latest-dev / latest ![qrcodelink_device_name=signal-api](https://github.com/bbernhard/signal-cli-rest-api/assets/70468066/1bc14fa5-f214-4f9c-b0ec-b98ee17d06a6)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file | documentation-file | documentation-file,"Cannot encode QR code: content too large for fixed size QR Code version 10 The problem I am trying to generate QR code for a new device but getting `{""error"":""Couldn't create QR code: Cannot encode QR code: content too large for fixed size QR Code version 10 (encoded length is 1172 bits, maximum length is 976 bits)""}` in response. images: latest-dev / latest ![qrcodelink_device_name=signal-api](https://github.com/bbernhard/signal-cli-rest-api/assets/70468066/1bc14fa5-f214-4f9c-b0ec-b98ee17d06a6)  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file documentation-file documentation-file",bug,0.9
71,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/71,Unregister api,I could able to register a number using https://127.0.0.1:8080/v1/unregister/+xxxxxxxxxx. Is it possible to unregister the registered number?,source-file | source-file | source-file | source-file | source-file | source-file,Unregister api I could able to register a number using https://127.0.0.1:8080/v1/unregister/+xxxxxxxxxx. Is it possible to unregister the registered number? source-file source-file source-file source-file source-file source-file,no-bug,0.7
485,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/485,Handle message edit,"Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be awesome to have support for message editing, seems that [signal-cli](https://github.com/AsamK/signal-cli/) have this since [[0.11.10] 2023-05-11](https://github.com/AsamK/signal-cli/blob/e78146eb67da3e011028c9df6a23df114306ec1b/CHANGELOG.md?plain=1#L153) with `--edit-timestamp`. I already have use case for it (that's why i was searching trough API how to do that, sadly no joy): My automation has a need for asynchronous message handling, i want to send first message with audio as soon as possible, and then update it adding text with more info after a while.",source-file | source-file | source-file | documentation-file | documentation-file,"Handle message edit Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be awesome to have support for message editing, seems that [signal-cli](https://github.com/AsamK/signal-cli/) have this since [[0.11.10] 2023-05-11](https://github.com/AsamK/signal-cli/blob/e78146eb67da3e011028c9df6a23df114306ec1b/CHANGELOG.md?plain=1#L153) with `--edit-timestamp`. I already have use case for it (that's why i was searching trough API how to do that, sadly no joy): My automation has a need for asynchronous message handling, i want to send first message with audio as soon as possible, and then update it adding text with more info after a while. source-file source-file source-file documentation-file documentation-file",no-bug,0.95
493,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/493,Fatal error: concurrent map writes,"The problem In json-rpc mode, when several clients are connected to `/v1/receive/+000000000000`, the container crashes with an error:  fatal error: concurrent map writes goroutine 58 [running]: github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000502ea0, {0xcfdba0?, 0xc000db01c0}, 0xc000da8300) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x1dd net/http.serverHandler.ServeHTTP({0xc0004d0c90?}, {0xcfdba0?, 0xc000db01c0?}, 0x6?) /usr/local/go/src/net/http/server.go:2938 +0x8e net/http.(*conn).serve(0xc0004cfd40, {0xcff6c0, 0xc0004581e0}) /usr/local/go/src/net/http/server.go:2009 +0x5f4 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3086 +0x5cb goroutine 107 [runnable]: internal/syscall/unix.GetRandom({0xc0002d64d0?, 0x10?, 0x10?}, 0x0?) /usr/local/go/src/internal/syscall/unix/getrandom.go:21 +0xbe crypto/rand.getRandom({0xc0002d64d0?, 0x10, 0x0?}) /usr/local/go/src/crypto/rand/rand_getrandom.go:40 +0x1f crypto/rand.init.0.batched.func1({0xc0002d64d0?, 0x0?, 0x0?}) /usr/local/go/src/crypto/rand/rand.go:38 +0x90 crypto/rand.(*reader).Read(0xc000037780, {0xc0002d64d0, 0x10, 0x10}) /usr/local/go/src/crypto/rand/rand_unix.go:56 +0x108 io.ReadAtLeast({0xcfaa60, 0xc000037780}, {0xc0002d64d0, 0x10, 0x10}, 0x10) /usr/local/go/src/io/io.go:335 +0x90 io.ReadFull() /usr/local/go/src/io/io.go:354 github.com/gofrs/uuid.(*Gen).NewV4(0xc000616b90) /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:262 +0x51 github.com/gofrs/uuid.NewV4() /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:62 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).GetReceiveChannel(0xc0006163c0) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:173 +0x42 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).GetReceiveChannel(0x0?) /tmp/signal-cli-rest-api-src/client/client.go:738 +0x85 github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000dac420, {0xc00049e0a0, 0xd}, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:393 +0x50 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 49 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000392580, {0xc000388130, 0xd}, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:400 +0x172 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 114 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000392580, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 59 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc00034a580, 0xc0003502a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 104 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 108 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000dac420, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Fatal error: concurrent map writes The problem In json-rpc mode, when several clients are connected to `/v1/receive/+000000000000`, the container crashes with an error:  fatal error: concurrent map writes goroutine 58 [running]: github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000502ea0, {0xcfdba0?, 0xc000db01c0}, 0xc000da8300) /go/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576 +0x1dd net/http.serverHandler.ServeHTTP({0xc0004d0c90?}, {0xcfdba0?, 0xc000db01c0?}, 0x6?) /usr/local/go/src/net/http/server.go:2938 +0x8e net/http.(*conn).serve(0xc0004cfd40, {0xcff6c0, 0xc0004581e0}) /usr/local/go/src/net/http/server.go:2009 +0x5f4 created by net/http.(*Server).Serve in goroutine 1 /usr/local/go/src/net/http/server.go:3086 +0x5cb goroutine 107 [runnable]: internal/syscall/unix.GetRandom({0xc0002d64d0?, 0x10?, 0x10?}, 0x0?) /usr/local/go/src/internal/syscall/unix/getrandom.go:21 +0xbe crypto/rand.getRandom({0xc0002d64d0?, 0x10, 0x0?}) /usr/local/go/src/crypto/rand/rand_getrandom.go:40 +0x1f crypto/rand.init.0.batched.func1({0xc0002d64d0?, 0x0?, 0x0?}) /usr/local/go/src/crypto/rand/rand.go:38 +0x90 crypto/rand.(*reader).Read(0xc000037780, {0xc0002d64d0, 0x10, 0x10}) /usr/local/go/src/crypto/rand/rand_unix.go:56 +0x108 io.ReadAtLeast({0xcfaa60, 0xc000037780}, {0xc0002d64d0, 0x10, 0x10}, 0x10) /usr/local/go/src/io/io.go:335 +0x90 io.ReadFull() /usr/local/go/src/io/io.go:354 github.com/gofrs/uuid.(*Gen).NewV4(0xc000616b90) /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:262 +0x51 github.com/gofrs/uuid.NewV4() /go/pkg/mod/github.com/gofrs/uuid@v4.4.0+incompatible/generator.go:62 github.com/bbernhard/signal-cli-rest-api/client.(*JsonRpc2Client).GetReceiveChannel(0xc0006163c0) /tmp/signal-cli-rest-api-src/client/jsonrpc2.go:173 +0x42 github.com/bbernhard/signal-cli-rest-api/client.(*SignalClient).GetReceiveChannel(0x0?) /tmp/signal-cli-rest-api-src/client/client.go:738 +0x85 github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000dac420, {0xc00049e0a0, 0xd}, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:393 +0x50 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 49 [select]: github.com/bbernhard/signal-cli-rest-api/api.(*Api).handleSignalReceive(0xc0000a68f8, 0xc000392580, {0xc000388130, 0xd}, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:400 +0x172 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:513 +0x234 goroutine 114 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000392580, 0xc0003942a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 102 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 59 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc00034a580, 0xc0003502a0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 104 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d goroutine 108 [select]: github.com/bbernhard/signal-cli-rest-api/api.wsPing(0xc000dac420, 0xc0004981e0) /tmp/signal-cli-rest-api-src/api/api.go:470 +0x73 created by github.com/bbernhard/signal-cli-rest-api/api.(*Api).Receive in goroutine 105 /tmp/signal-cli-rest-api-src/api/api.go:514 +0x28d   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
412,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/412,Cannot send anything,"The problem After registering a number on a fresh container with no prior configuration I am not able to send any messages. Command that was run:  curl -X POST -H ""Content-Type: application/json"" 'http://localhost:8080/v2/send' -d '{""message"": ""Test via Signal API!"", ""number"": ""<sender>"", ""recipients"": [ ""<recipient>"" ]}'  And the response is:  { ""error"": ""WARN SendHelper - Failed to send message due to IO exception: Unable to parse entity\nFailed to send message\n"" }  In the container logs I am seeing:  [GIN] <timestamp> | 400 | 6.6703771s | 10.0.2.100 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information I encountered this issue in all modes, i.e. normal, native and json-rpc. Further, I have a version where a number was registered under version 0.64 and strangely when mounting this configuration directory, I can do everything without any problems..",container-file | other-file | source-file | source-file,"Cannot send anything The problem After registering a number on a fresh container with no prior configuration I am not able to send any messages. Command that was run:  curl -X POST -H ""Content-Type: application/json"" 'http://localhost:8080/v2/send' -d '{""message"": ""Test via Signal API!"", ""number"": ""<sender>"", ""recipients"": [ ""<recipient>"" ]}'  And the response is:  { ""error"": ""WARN SendHelper - Failed to send message due to IO exception: Unable to parse entity\nFailed to send message\n"" }  In the container logs I am seeing:  [GIN] <timestamp> | 400 | 6.6703771s | 10.0.2.100 | POST ""/v2/send""   Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information I encountered this issue in all modes, i.e. normal, native and json-rpc. Further, I have a version where a number was registered under version 0.64 and strangely when mounting this configuration directory, I can do everything without any problems.. container-file other-file source-file source-file",bug,0.9
125,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/125,New sample docker-compose.yml does not work,"Hello Bernhard, I set up a complete new system since switching from a Pi to a machine with more power. Now I wanted to install your docker image again but it does not work anymore with the new docker-compose.yml file you provide. The old one is still working. Actually I don't get the point what is wrong. But I must say I don't work that often with docker. Your older example just worked out of the box. Do you have an idea whats wrong? old_code:  version: ""3"" services: signal-cli-rest-api: image: bbernhard/signal-cli-rest-api:latest ports: - ""8080:8080"" #map docker port 8080 to host port 8080. volumes: - ""./signal-cli-config:/home/.local/share/signal-cli"" #map ""signal-cli-config"" folder on host syste  new_code:  version: ""3"" services: signal-cli-rest-api: build: ""."" environment: - USE_NATIVE=0 - PORT=8080 ports: - ""8080:8080"" #map docker port 8080 to host port 8080. volumes: - ""./signal-cli-config:/home/.local/share/signal-cli"" #map ""signal-cli-config"" folder on host system into docker container. the folder contains the password and cryptographic keys when a new number is registered  logs:  docker-compose -f /srv/docker/docker-compose.yml up Building signal-cli-rest-api unable to prepare context: unable to evaluate symlinks in Dockerfile path: lstat /srv/docker/Dockerfile: no such file or directory ERROR: Service 'signal-cli-rest-api' failed to build : Build failed  Edit: I tried now something. I just added ""image: bbernhard/signal-cli-rest-api:latest"" to your code and now it works. Cheers fastboot",config-file | config-file,"New sample docker-compose.yml does not work Hello Bernhard, I set up a complete new system since switching from a Pi to a machine with more power. Now I wanted to install your docker image again but it does not work anymore with the new docker-compose.yml file you provide. The old one is still working. Actually I don't get the point what is wrong. But I must say I don't work that often with docker. Your older example just worked out of the box. Do you have an idea whats wrong? old_code:  version: ""3"" services: signal-cli-rest-api: image: bbernhard/signal-cli-rest-api:latest ports: - ""8080:8080"" #map docker port 8080 to host port 8080. volumes: - ""./signal-cli-config:/home/.local/share/signal-cli"" #map ""signal-cli-config"" folder on host syste  new_code:  version: ""3"" services: signal-cli-rest-api: build: ""."" environment: - USE_NATIVE=0 - PORT=8080 ports: - ""8080:8080"" #map docker port 8080 to host port 8080. volumes: - ""./signal-cli-config:/home/.local/share/signal-cli"" #map ""signal-cli-config"" folder on host system into docker container. the folder contains the password and cryptographic keys when a new number is registered  logs:  docker-compose -f /srv/docker/docker-compose.yml up Building signal-cli-rest-api unable to prepare context: unable to evaluate symlinks in Dockerfile path: lstat /srv/docker/Dockerfile: no such file or directory ERROR: Service 'signal-cli-rest-api' failed to build : Build failed  Edit: I tried now something. I just added ""image: bbernhard/signal-cli-rest-api:latest"" to your code and now it works. Cheers fastboot config-file config-file",no-bug,0.9
186,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/186,error log spamming log-file,"The problem Hi I've been using the docker container for about 6 weeks with success. after a power outage in my house, signal suddenly stopped working with the error message ` time=""2021-12-04T14:51:13Z"" level=error msg=""Couldn't read data for number +4xxxxxxxxxxxx: EOF. Is the number properly registered?` while i have not yet checked what the issue behind the error message is, i noticed that the container is spamming the log with the error message. by spamming i mean that the error is logged hundreds of times per second leading to a huge log file. in my case, the log file got to a whopping 360 gigabyte over a course of about 12 hours when disk space finally ran out and paralyzed the entire system. question: is this normal behavior or is there anything I can do to reduce the amount logging if this issue every reoccures in the future? (apart from limiting log size in docker itself) thank you!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file,"error log spamming log-file The problem Hi I've been using the docker container for about 6 weeks with success. after a power outage in my house, signal suddenly stopped working with the error message ` time=""2021-12-04T14:51:13Z"" level=error msg=""Couldn't read data for number +4xxxxxxxxxxxx: EOF. Is the number properly registered?` while i have not yet checked what the issue behind the error message is, i noticed that the container is spamming the log with the error message. by spamming i mean that the error is logged hundreds of times per second leading to a huge log file. in my case, the log file got to a whopping 360 gigabyte over a course of about 12 hours when disk space finally ran out and paralyzed the entire system. question: is this normal behavior or is there anything I can do to reduce the amount logging if this issue every reoccures in the future? (apart from limiting log size in docker itself) thank you!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file",no-bug,0.9
148,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/148,Pass more parameters in create group API,"Feature Request Hello and thanks for your work maintaining this repo. Currently the create group API (POST /v1/groups/{number}) accepts the parameters `name` and `members`, then passes them to the [updateGroup](https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#updategroup) CLI command. It would be very useful to me to pass the additional parameters: -d DESCRIPTION, --link LINK_STATE, --set-permission-edit-details PERMISSION. Would it be possible to add those as optional parameters to the REST endpoint and then pass them to the CLI command?",source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file,"Pass more parameters in create group API Feature Request Hello and thanks for your work maintaining this repo. Currently the create group API (POST /v1/groups/{number}) accepts the parameters `name` and `members`, then passes them to the [updateGroup](https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#updategroup) CLI command. It would be very useful to me to pass the additional parameters: -d DESCRIPTION, --link LINK_STATE, --set-permission-edit-details PERMISSION. Would it be possible to add those as optional parameters to the REST endpoint and then pass them to the CLI command? source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file",no-bug,0.95
63,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/63,Provide /health endpoint for HEALTHCHECK,"As follow-up of https://github.com/bbernhard/signal-cli-rest-api/pull/57#issuecomment-761610602 provide a `/health` endpoint which gets excluded for the logging. As an idea on how it's done for .NET Core, see [here](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-3.1). ## Tasks - [ ] Provide endpoint `/health` - [ ] Update HEALTHCHECK to new `/health` endpoint",container-file | source-file | source-file | documentation-file | documentation-file | source-file | container-file | source-file | source-file | documentation-file | documentation-file | source-file,"Provide /health endpoint for HEALTHCHECK As follow-up of https://github.com/bbernhard/signal-cli-rest-api/pull/57#issuecomment-761610602 provide a `/health` endpoint which gets excluded for the logging. As an idea on how it's done for .NET Core, see [here](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/health-checks?view=aspnetcore-3.1). ## Tasks - [ ] Provide endpoint `/health` - [ ] Update HEALTHCHECK to new `/health` endpoint container-file source-file source-file documentation-file documentation-file source-file container-file source-file source-file documentation-file documentation-file source-file",no-bug,0.9
369,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/369,Search endpoint broken with multiple accounts,"The problem I have 2 Signal accounts registered on the server (version 0.66). When trying to use `/v1/search`, the following error is returned: `Multiple users found, you need to specify an account (phone number) with -a\n` Directly using signal-cli-native from within the container works when supplying one of the registered accounts with the -a parameter like suggested in the error message. Maybe the search endpoint could be changed to to `/v1/search/{number}`?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information This issue was previously mentioned in a feature request: [Search for registered numbers with specific account for multiple users #253](253)",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Search endpoint broken with multiple accounts The problem I have 2 Signal accounts registered on the server (version 0.66). When trying to use `/v1/search`, the following error is returned: `Multiple users found, you need to specify an account (phone number) with -a\n` Directly using signal-cli-native from within the container works when supplying one of the registered accounts with the -a parameter like suggested in the error message. Maybe the search endpoint could be changed to to `/v1/search/{number}`?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Native Mode  What's the architecture of your host system? x86-64  Additional information This issue was previously mentioned in a feature request: [Search for registered numbers with specific account for multiple users #253](253) source-file source-file source-file documentation-file documentation-file source-file",bug,0.9
232,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/232,Manage group administrators,"## Feature Request Thanks to the great work around #210 _signal-cli-rest-api_ will be able to manage group members with the next release The next step would be to show, add and remove group administrators.  API proposal  `GET /v1/groups/{number}` For each group include an array of admins: json { ""admins"": [ ""string"" ], ""blocked"": true, ""id"": ""string"", ""internal_id"": ""string"", ""invite_link"": ""string"", ""members"": [ ""string"" ], ""name"": ""string"", ""pending_invites"": [ ""string"" ], ""pending_requests"": [ ""string"" ] }   `GET /v1/groups/{number}/{groupid}` Include an array of admins similar like shown above.  `POST /v1/groups/{number}/{groupid}/admins` Similar endpoint like for adding group members. json { ""admins"": [ ""string"" ] }   `DELETE /v1/groups/{number}/{groupid}/admins` Similar endpoint like for removing group members. json { ""admins"": [ ""string"" ] }  As of my applications, adding a new field to a JSON object would be a non-breaking change.",source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file,"Manage group administrators ## Feature Request Thanks to the great work around #210 _signal-cli-rest-api_ will be able to manage group members with the next release The next step would be to show, add and remove group administrators.  API proposal  `GET /v1/groups/{number}` For each group include an array of admins: json { ""admins"": [ ""string"" ], ""blocked"": true, ""id"": ""string"", ""internal_id"": ""string"", ""invite_link"": ""string"", ""members"": [ ""string"" ], ""name"": ""string"", ""pending_invites"": [ ""string"" ], ""pending_requests"": [ ""string"" ] }   `GET /v1/groups/{number}/{groupid}` Include an array of admins similar like shown above.  `POST /v1/groups/{number}/{groupid}/admins` Similar endpoint like for adding group members. json { ""admins"": [ ""string"" ] }   `DELETE /v1/groups/{number}/{groupid}/admins` Similar endpoint like for removing group members. json { ""admins"": [ ""string"" ] }  As of my applications, adding a new field to a JSON object would be a non-breaking change. source-file source-file source-file documentation-file documentation-file source-file source-file source-file source-file source-file documentation-file documentation-file source-file source-file",no-bug,0.95
1,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/1,cyrillic symbols dosn't support?,Thanks for your solution integration signal to HA. Everything works fine (but slow) except for the Cyrillic alphabet. ![photo_2020-01-16_12-02-27](https://user-images.githubusercontent.com/50143425/72509283-53a7ba00-3858-11ea-9b3b-9019fe87f5c7.jpg),container-file | container-file,cyrillic symbols dosn't support? Thanks for your solution integration signal to HA. Everything works fine (but slow) except for the Cyrillic alphabet. ![photo_2020-01-16_12-02-27](https://user-images.githubusercontent.com/50143425/72509283-53a7ba00-3858-11ea-9b3b-9019fe87f5c7.jpg) container-file container-file,bug,0.8
451,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/451,[v.0.131-dev] WebSocket connection seems to misbehave,"The problem As discussed in https://github.com/bbernhard/signal-cli-rest-api/issues/444#issuecomment-1815686274 In my deployment i use 2 linked numbers and 3 directly registered ones. I use [signalbot](https://pypi.org/project/signalbot/) and spawn for each number a separate thread (multiprocessing.Process). The behavior should be the same like if i run the signalbot two times for different numbers. This used to work with the stable _old_ version v0.70 and prior. (in jsonRPC mode) Not sure how familiar you are with this python module but it establishes an websocket to fetch new messages. So there are 4 open connections (one number unused). I send a message to each number quickly one after another and only one responses; other time another does respond. > Do you know if it is related to the speed you are sending those messages? It is not related to speed, some messages simply wont get through. Test: I send from the same number to all three dedicated numbers in exactly that order: - number 1 receives ""a normal _tip-speed_ spam of ones to trigger 'start typing event'"" -> message: 1111111111111111111111111111111111 - number 2 receives ""a _tip-speed_ spam of twos to trigger 'start typing event'"" - number 3 receives ""a _tip-speed_ spam of threes to trigger 'start typing event'"" i did not count how often i pressed the number. but always at least 20 times. maybe i was typing two to tree numbers a second. furthermore i did not hurry to switch to the other chat.  2023-11-17 05:27:15,040 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195236085,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195236085}},""account"":""+4922222222222""} 2023-11-17 05:27:31,418 - root - INFO - [Raw Message] {""envelope"":{""source"":""+4933333333333"",""sourceNumber"":""+4933333333333"",""sourceUuid"":""TheSourceUuid"",""sourceName"":""+4933333333333"",""sourceDevice"":1,""timestamp"":1700195251155,""receiptMessage"":{""when"":1700195251155,""isDelivery"":true,""isRead"":false,""isViewed"":false,""timestamps"":[1700195252435]}},""account"":""+49123456789""} 2023-11-17 05:27:40,746 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195262058,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195262058}},""account"":""+4911111111111""} 2023-11-17 05:27:44,474 - root - INFO - [Raw Message] {""envelope"":{""source"":""+4911111111111"",""sourceNumber"":""+4911111111111"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""+4911111111111"",""sourceDevice"":1,""timestamp"":1700195264206,""receiptMessage"":{""when"":1700195264206,""isDelivery"":true,""isRead"":false,""isViewed"":false,""timestamps"":[1700195265500]}},""account"":""+49123456789""} 2023-11-17 05:27:56,567 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195277843,""dataMessage"":{""timestamp"":1700195277843,""message"":""222222222222222222222222222"",""expiresInSeconds"":604800,""viewOnce"":false}},""account"":""+4922222222222""}  the module only registered two ""start typing events"" and received only one message. and in a wrong order (not an issue at all but interesting) for consistency i wrote the comment to this point and repeated the whole procedure whiteout changing the setup.  2023-11-17 05:37:20,260 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195841568,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195841568}},""account"":""+4911111111111""} 2023-11-17 05:37:25,319 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195845482,""syncMessage"":{""sentMessage"":{""destination"":""+4911111111111"",""destinationNumber"":""+4911111111111"",""destinationUuid"":""TheDestinationUuid"",""timestamp"":1700195845482,""message"":""111111111111111111111"",""expiresInSeconds"":604800,""viewOnce"":false,""account"":""+49123456789""} 2023-11-17 05:37:33,305 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195854576,""dataMessage"":{""timestamp"":1700195854576,""message"":""2222222222222222222222222222222"",""expiresInSeconds"":604800,""viewOnce"":false}},""account"":""+4922222222222""}  here i got again not all ""typing started"" events and one message.  Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ EDIT: ""syncMessage"" and ""receiptMessage"" do make sense because the sending number is also an used linked device",source-file | source-file | source-file,"[v.0.131-dev] WebSocket connection seems to misbehave The problem As discussed in https://github.com/bbernhard/signal-cli-rest-api/issues/444#issuecomment-1815686274 In my deployment i use 2 linked numbers and 3 directly registered ones. I use [signalbot](https://pypi.org/project/signalbot/) and spawn for each number a separate thread (multiprocessing.Process). The behavior should be the same like if i run the signalbot two times for different numbers. This used to work with the stable _old_ version v0.70 and prior. (in jsonRPC mode) Not sure how familiar you are with this python module but it establishes an websocket to fetch new messages. So there are 4 open connections (one number unused). I send a message to each number quickly one after another and only one responses; other time another does respond. > Do you know if it is related to the speed you are sending those messages? It is not related to speed, some messages simply wont get through. Test: I send from the same number to all three dedicated numbers in exactly that order: - number 1 receives ""a normal _tip-speed_ spam of ones to trigger 'start typing event'"" -> message: 1111111111111111111111111111111111 - number 2 receives ""a _tip-speed_ spam of twos to trigger 'start typing event'"" - number 3 receives ""a _tip-speed_ spam of threes to trigger 'start typing event'"" i did not count how often i pressed the number. but always at least 20 times. maybe i was typing two to tree numbers a second. furthermore i did not hurry to switch to the other chat.  2023-11-17 05:27:15,040 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195236085,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195236085}},""account"":""+4922222222222""} 2023-11-17 05:27:31,418 - root - INFO - [Raw Message] {""envelope"":{""source"":""+4933333333333"",""sourceNumber"":""+4933333333333"",""sourceUuid"":""TheSourceUuid"",""sourceName"":""+4933333333333"",""sourceDevice"":1,""timestamp"":1700195251155,""receiptMessage"":{""when"":1700195251155,""isDelivery"":true,""isRead"":false,""isViewed"":false,""timestamps"":[1700195252435]}},""account"":""+49123456789""} 2023-11-17 05:27:40,746 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195262058,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195262058}},""account"":""+4911111111111""} 2023-11-17 05:27:44,474 - root - INFO - [Raw Message] {""envelope"":{""source"":""+4911111111111"",""sourceNumber"":""+4911111111111"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""+4911111111111"",""sourceDevice"":1,""timestamp"":1700195264206,""receiptMessage"":{""when"":1700195264206,""isDelivery"":true,""isRead"":false,""isViewed"":false,""timestamps"":[1700195265500]}},""account"":""+49123456789""} 2023-11-17 05:27:56,567 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195277843,""dataMessage"":{""timestamp"":1700195277843,""message"":""222222222222222222222222222"",""expiresInSeconds"":604800,""viewOnce"":false}},""account"":""+4922222222222""}  the module only registered two ""start typing events"" and received only one message. and in a wrong order (not an issue at all but interesting) for consistency i wrote the comment to this point and repeated the whole procedure whiteout changing the setup.  2023-11-17 05:37:20,260 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195841568,""typingMessage"":{""action"":""STARTED"",""timestamp"":1700195841568}},""account"":""+4911111111111""} 2023-11-17 05:37:25,319 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195845482,""syncMessage"":{""sentMessage"":{""destination"":""+4911111111111"",""destinationNumber"":""+4911111111111"",""destinationUuid"":""TheDestinationUuid"",""timestamp"":1700195845482,""message"":""111111111111111111111"",""expiresInSeconds"":604800,""viewOnce"":false,""account"":""+49123456789""} 2023-11-17 05:37:33,305 - root - INFO - [Raw Message] {""envelope"":{""source"":""+49123456789"",""sourceNumber"":""+49123456789"",""sourceUuid"":""TheSourceNumber"",""sourceName"":""TheSourceName"",""sourceDevice"":2,""timestamp"":1700195854576,""dataMessage"":{""timestamp"":1700195854576,""message"":""2222222222222222222222222222222"",""expiresInSeconds"":604800,""viewOnce"":false}},""account"":""+4922222222222""}  here i got again not all ""typing started"" events and one message.  Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ EDIT: ""syncMessage"" and ""receiptMessage"" do make sense because the sending number is also an used linked device source-file source-file source-file",no-bug,0.8
145,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/145,pysignalclirestapi.api.SignalCliRestApiError: process killed as timeout reached,"The problem Hi, I suddenly have a problem with not receiving messages from signal, I guess the messages are not getting send out.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? armv7 Using: Rest-API to Signal-CLI Home Assistant add-on Signal Messenger version: 0.41 Home Assistant: * core-2021.6.6 * supervisor-2021.06.6 * Home Assistant OS 6.1 Error message: Traceback (most recent call last): File ""/usr/src/homeassistant/homeassistant/core.py"", line 1507, in catch_exceptions await coro_or_task File ""/usr/src/homeassistant/homeassistant/core.py"", line 1526, in _execute_service await handler.job.target(service_call) File ""/usr/src/homeassistant/homeassistant/components/notify/init.py"", line 159, in _async_notify_message_service await self.async_send_message(**kwargs) File ""/usr/src/homeassistant/homeassistant/components/notify/init.py"", line 136, in async_send_message await self.hass.async_add_executor_job( File ""/usr/local/lib/python3.8/concurrent/futures/thread.py"", line 57, in run result = self.fn(*self.args, **self.kwargs) File ""/usr/src/homeassistant/homeassistant/components/signal_messenger/notify.py"", line 79, in send_message raise ex File ""/usr/src/homeassistant/homeassistant/components/signal_messenger/notify.py"", line 76, in send_message self._signal_cli_rest_api.send_message(message, self._recp_nrs, filenames) File ""/usr/local/lib/python3.8/site-packages/pysignalclirestapi/api.py"", line 83, in send_message raise exc File ""/usr/local/lib/python3.8/site-packages/pysignalclirestapi/api.py"", line 79, in send_message raise SignalCliRestApiError(json_resp[""error""]) pysignalclirestapi.api.SignalCliRestApiError: process killed as timeout reached If I enter die docker-container and use signal-cli directly, messages do get send out (but with unusual high latency) and I receive them on my phone. Any ideas? Thanks in advance!",source-file | source-file,"pysignalclirestapi.api.SignalCliRestApiError: process killed as timeout reached The problem Hi, I suddenly have a problem with not receiving messages from signal, I guess the messages are not getting send out.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? armv7 Using: Rest-API to Signal-CLI Home Assistant add-on Signal Messenger version: 0.41 Home Assistant: * core-2021.6.6 * supervisor-2021.06.6 * Home Assistant OS 6.1 Error message: Traceback (most recent call last): File ""/usr/src/homeassistant/homeassistant/core.py"", line 1507, in catch_exceptions await coro_or_task File ""/usr/src/homeassistant/homeassistant/core.py"", line 1526, in _execute_service await handler.job.target(service_call) File ""/usr/src/homeassistant/homeassistant/components/notify/init.py"", line 159, in _async_notify_message_service await self.async_send_message(**kwargs) File ""/usr/src/homeassistant/homeassistant/components/notify/init.py"", line 136, in async_send_message await self.hass.async_add_executor_job( File ""/usr/local/lib/python3.8/concurrent/futures/thread.py"", line 57, in run result = self.fn(*self.args, **self.kwargs) File ""/usr/src/homeassistant/homeassistant/components/signal_messenger/notify.py"", line 79, in send_message raise ex File ""/usr/src/homeassistant/homeassistant/components/signal_messenger/notify.py"", line 76, in send_message self._signal_cli_rest_api.send_message(message, self._recp_nrs, filenames) File ""/usr/local/lib/python3.8/site-packages/pysignalclirestapi/api.py"", line 83, in send_message raise exc File ""/usr/local/lib/python3.8/site-packages/pysignalclirestapi/api.py"", line 79, in send_message raise SignalCliRestApiError(json_resp[""error""]) pysignalclirestapi.api.SignalCliRestApiError: process killed as timeout reached If I enter die docker-container and use signal-cli directly, messages do get send out (but with unusual high latency) and I receive them on my phone. Any ideas? Thanks in advance! source-file source-file",no-bug,0.8
550,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/550,Using UUID with Signal CLI REST API,"The problem Hi everyone, I'm having an issue with the Signal CLI REST API and could use some help. **Problem:** When I receive a message using the Signal CLI REST API, I only get a UUID as the sender information. Here is an example of a received message: json [ { ""envelope"": { ""source"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceNumber"": null, ""sourceUuid"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceName"": ""xxxx"", ""sourceDevice"": 4, ""timestamp"": 1718816184062, ""dataMessage"": { ""timestamp"": 1718816184062, ""message"": ""Test"", ""expiresInSeconds"": 0, ""viewOnce"": false } }, ""account"": ""+49xxxxxxxxxxxxx"" } ]  As you can see, I only get the UUID (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`) as the sender information. **Question:** How can I reply to this message when I only have the UUID? I tried sending a message using the following curl command, but it doesn't work: sh curl -X POST -H ""Content-Type: application/json"" \ -d '{ ""message"": ""Hello!"", ""number"": ""+49xxxxxxxxxxxxx"", ""recipients"": [""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx""] }' \ https://example.com/signal/v2/send  I receive the following error: json {""error"":""java.lang.RuntimeException: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:105)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipient(RecipientHelper.java:93)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:622)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:598)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:726)\n\tat org.asamk.signal.commands.SendCommand.handleCommand(SendCommand.java:245)\n\tat org.asamk.signal.commands.CommandHandler.handleLocalCommand(CommandHandler.java:35)\n\tat org.asamk.signal.App.handleLocalCommand(App.java:278)\n\tat org.asamk.signal.App.handleCommand(App.java:179)\n\tat org.asamk.signal.App.init(App.java:144)\n\tat org.asamk.signal.Main.main(Main.java:56)\nCaused by: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.signal.libsignal.internal.Native.Username_Hash(Native Method)\n\tat org.signal.libsignal.usernames.Username.lambda$hash$6(Username.java:148)\n\tat org.signal.libsignal.internal.FilterExceptions.filterExceptions(FilterExceptions.java:143)\n\tat org.signal.libsignal.usernames.Username.hash(Username.java:148)\n\tat org.signal.libsignal.usernames.Username.\u003cinit\u003e(Username.java:57)\n\tat org.asamk.signal.manager.helper.RecipientHelper.getUsernameFromUsernameOrLink(RecipientHelper.java:137)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:103)\n\t 10 more\n""}  It seems like the UUID is being interpreted as a username, which must contain a `.` (there is a similar question open but it does not mention the uuid problem). Is there a way to send a message directly to a UUID, or do I need to identify the sender differently? Am I perhaps using the API request incorrectly? Any help or example request would be greatly appreciated! Thank you in advance!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Using UUID with Signal CLI REST API The problem Hi everyone, I'm having an issue with the Signal CLI REST API and could use some help. **Problem:** When I receive a message using the Signal CLI REST API, I only get a UUID as the sender information. Here is an example of a received message: json [ { ""envelope"": { ""source"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceNumber"": null, ""sourceUuid"": ""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"", ""sourceName"": ""xxxx"", ""sourceDevice"": 4, ""timestamp"": 1718816184062, ""dataMessage"": { ""timestamp"": 1718816184062, ""message"": ""Test"", ""expiresInSeconds"": 0, ""viewOnce"": false } }, ""account"": ""+49xxxxxxxxxxxxx"" } ]  As you can see, I only get the UUID (`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`) as the sender information. **Question:** How can I reply to this message when I only have the UUID? I tried sending a message using the following curl command, but it doesn't work: sh curl -X POST -H ""Content-Type: application/json"" \ -d '{ ""message"": ""Hello!"", ""number"": ""+49xxxxxxxxxxxxx"", ""recipients"": [""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx""] }' \ https://example.com/signal/v2/send  I receive the following error: json {""error"":""java.lang.RuntimeException: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:105)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipient(RecipientHelper.java:93)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:622)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:598)\n\tat org.asamk.signal.manager.internal.ManagerImpl.sendMessage(ManagerImpl.java:726)\n\tat org.asamk.signal.commands.SendCommand.handleCommand(SendCommand.java:245)\n\tat org.asamk.signal.commands.CommandHandler.handleLocalCommand(CommandHandler.java:35)\n\tat org.asamk.signal.App.handleLocalCommand(App.java:278)\n\tat org.asamk.signal.App.handleCommand(App.java:179)\n\tat org.asamk.signal.App.init(App.java:144)\n\tat org.asamk.signal.Main.main(Main.java:56)\nCaused by: org.signal.libsignal.usernames.MissingSeparatorException: Username must contain a '.'\n\tat org.signal.libsignal.internal.Native.Username_Hash(Native Method)\n\tat org.signal.libsignal.usernames.Username.lambda$hash$6(Username.java:148)\n\tat org.signal.libsignal.internal.FilterExceptions.filterExceptions(FilterExceptions.java:143)\n\tat org.signal.libsignal.usernames.Username.hash(Username.java:148)\n\tat org.signal.libsignal.usernames.Username.\u003cinit\u003e(Username.java:57)\n\tat org.asamk.signal.manager.helper.RecipientHelper.getUsernameFromUsernameOrLink(RecipientHelper.java:137)\n\tat org.asamk.signal.manager.helper.RecipientHelper.resolveRecipientByUsernameOrLink(RecipientHelper.java:103)\n\t 10 more\n""}  It seems like the UUID is being interpreted as a username, which must contain a `.` (there is a similar question open but it does not mention the uuid problem). Is there a way to send a message directly to a UUID, or do I need to identify the sender differently? Am I perhaps using the API request incorrectly? Any help or example request would be greatly appreciated! Thank you in advance!  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.9
137,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/137,Returning Timestamp when sending message,Feature Request With signal-cli i use the timestamp being return with an send command to track delivery and read notifications. signal-cli-rest doesn't return this timestamp. Do i miss anything which would allow me to relate these notification messages to the corresponding messages? To me it seems that it would be helpful to return the timestamp when using the send command (like signal-cli does),source-file | source-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file,Returning Timestamp when sending message Feature Request With signal-cli i use the timestamp being return with an send command to track delivery and read notifications. signal-cli-rest doesn't return this timestamp. Do i miss anything which would allow me to relate these notification messages to the corresponding messages? To me it seems that it would be helpful to return the timestamp when using the send command (like signal-cli does) source-file source-file documentation-file documentation-file source-file source-file documentation-file documentation-file,no-bug,0.9
387,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/387,Delete group,"The problem I created a group with only one memeber and an empty name: `curl -X POST -H ""Content-Type: application/json"" -d '{""name"": """", ""members"": [""+123456789012""]}' 'http://localhost:8080/v1/groups/+123456789012'` Now I want to delete the group. This group is not displayed in the Signal, but it is displayed on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'` For delete the group I am executing the command in Docker terminal: `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012/group.dHlV0QT0='` or `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+380978483884/dHlV0QT0='` but groups are not removed, although I don't get an error, just an empty string in the response. I still see these groups on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'`  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file,"Delete group The problem I created a group with only one memeber and an empty name: `curl -X POST -H ""Content-Type: application/json"" -d '{""name"": """", ""members"": [""+123456789012""]}' 'http://localhost:8080/v1/groups/+123456789012'` Now I want to delete the group. This group is not displayed in the Signal, but it is displayed on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'` For delete the group I am executing the command in Docker terminal: `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012/group.dHlV0QT0='` or `curl -X DELETE -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+380978483884/dHlV0QT0='` but groups are not removed, although I don't get an error, just an empty string in the response. I still see these groups on request: `curl -X GET -H ""Content-Type: application/json"" 'http://localhost:8080/v1/groups/+123456789012'`  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file",bug,0.95
489,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/489,0.142-dev: Unable to start in json-rpc mode,"The problem When switching to this latest dev image tag, the log output shows the following:  signal | + [ json-rpc = json-rpc ] signal | + /usr/bin/jsonrpc2-helper signal | time=""2024-02-23T08:23:22Z"" level=info msg=""Updated jsonrpc2.yml""  signal | time=""2024-02-23T08:23:23Z"" level=info msg=""Started Signal Messenger REST API"" signal | time=""2024-02-23T08:23:23Z"" level=error msg=""Couldn't read data for number <multi-account>: EOF. Is the number properly registered?"" signal | [GIN] 2024/02/23 - 08:23:52 | 500 | 99.92s | 172.18.0.10 | GET ""/v1/accounts""  Response to `GET /v1/accounts` is json { ""error"": ""Couldn't get list of accounts: write tcp 127.0.0.1:44624-\u003e127.0.0.1:6001: write: broken pipe"" }  The updated `jsonrpc2.yml` reads yaml config: <multi-account>: tcp_port: 6001 fifo_pathname: /tmp/sigsocket1   Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information Only one account is registered in the configuration of the instance.",source-file,"0.142-dev: Unable to start in json-rpc mode The problem When switching to this latest dev image tag, the log output shows the following:  signal | + [ json-rpc = json-rpc ] signal | + /usr/bin/jsonrpc2-helper signal | time=""2024-02-23T08:23:22Z"" level=info msg=""Updated jsonrpc2.yml""  signal | time=""2024-02-23T08:23:23Z"" level=info msg=""Started Signal Messenger REST API"" signal | time=""2024-02-23T08:23:23Z"" level=error msg=""Couldn't read data for number <multi-account>: EOF. Is the number properly registered?"" signal | [GIN] 2024/02/23 - 08:23:52 | 500 | 99.92s | 172.18.0.10 | GET ""/v1/accounts""  Response to `GET /v1/accounts` is json { ""error"": ""Couldn't get list of accounts: write tcp 127.0.0.1:44624-\u003e127.0.0.1:6001: write: broken pipe"" }  The updated `jsonrpc2.yml` reads yaml config: <multi-account>: tcp_port: 6001 fifo_pathname: /tmp/sigsocket1   Are you using the latest released version? - [ ] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? arm64  Additional information Only one account is registered in the configuration of the instance. source-file",bug,0.9
562,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/562,Escaping Formatting Characters '*' and '~',"Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be nice to be able to escape the formatting characters '*' and '~' in text_mode ""styled"". Example: if you send a string that contains two '~', like: `'**price list**\nobject1: ~3\nobject2: ~1'` it will be formatted as: **price list** object1: ~3 object2:~ 1 (I tried ""\~"", ""~~"" and """" to escape, but it didn't work)",source-file | source-file | documentation-file | documentation-file | source-file | test-file,"Escaping Formatting Characters '*' and '~' Feature Request <!-- Fill in the relevant information below to help triage your issue. --> It would be nice to be able to escape the formatting characters '*' and '~' in text_mode ""styled"". Example: if you send a string that contains two '~', like: `'**price list**\nobject1: ~3\nobject2: ~1'` it will be formatted as: **price list** object1: ~3 object2:~ 1 (I tried ""\~"", ""~~"" and """" to escape, but it didn't work) source-file source-file documentation-file documentation-file source-file test-file",no-bug,0.9
110,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/110,Send Reaction Endpoint,"Feature Request Hi For me, it would be very useful to have an HTTP endpoint for reactions. In signal-cli, you can do this: https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#sendreaction. One use-case would be bot development where the bot confirms that a message has been received without polluting the chat. Best Ren",documentation-file | source-file | source-file | documentation-file | documentation-file | source-file,"Send Reaction Endpoint Feature Request Hi For me, it would be very useful to have an HTTP endpoint for reactions. In signal-cli, you can do this: https://github.com/AsamK/signal-cli/blob/master/man/signal-cli.1.adoc#sendreaction. One use-case would be bot development where the bot confirms that a message has been received without polluting the chat. Best Ren documentation-file source-file source-file documentation-file documentation-file source-file",no-bug,0.95
611,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/611,GetGroups should display member UUID if there is no number,"Feature Request In latest Signal versions it's possible to add group members without phone number. In this case member is added as UUID. But `/v1/groups/<NUMBER>` shows empty string for such members: json { ""name"": ""Group Name"", ""id"": ""group.SomeHashHere"", ""internal_id"": ""someHashHer"", ""members"": [ ""+XXXXX"", """", ""+YYYYYYY"", """" ], ""blocked"": false,  }  `signal-cli` responses with [member UUID](https://github.com/AsamK/signal-cli/blob/master/src/main/java/org/asamk/signal/commands/ListGroupsCommand.java#L47) in such cases. It would be useful if `signal-cli-rest-api` could return these UUIDs instead of empty strings. Thanks.",source-file,"GetGroups should display member UUID if there is no number Feature Request In latest Signal versions it's possible to add group members without phone number. In this case member is added as UUID. But `/v1/groups/<NUMBER>` shows empty string for such members: json { ""name"": ""Group Name"", ""id"": ""group.SomeHashHere"", ""internal_id"": ""someHashHer"", ""members"": [ ""+XXXXX"", """", ""+YYYYYYY"", """" ], ""blocked"": false,  }  `signal-cli` responses with [member UUID](https://github.com/AsamK/signal-cli/blob/master/src/main/java/org/asamk/signal/commands/ListGroupsCommand.java#L47) in such cases. It would be useful if `signal-cli-rest-api` could return these UUIDs instead of empty strings. Thanks. source-file",no-bug,0.9
544,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/544,Multicharacter emojis shift formatting,"The problem When using text_mode=""styled"", the formatting gets shifted if multicharacter emojis are in the text. Example: - ""Test via \*\*signal\*\* API!"" works fine - ""Test via \*\*signal\*\* API!"" results in ""signal"" and the ""A"" being bold On iPhone and Linux Signal App: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/33182214/b2692f12-8a6a-4004-8eaa-86559192756c) Version: v0.84, 0.83 & dev0.160  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | test-file,"Multicharacter emojis shift formatting The problem When using text_mode=""styled"", the formatting gets shifted if multicharacter emojis are in the text. Example: - ""Test via \*\*signal\*\* API!"" works fine - ""Test via \*\*signal\*\* API!"" results in ""signal"" and the ""A"" being bold On iPhone and Linux Signal App: ![image](https://github.com/bbernhard/signal-cli-rest-api/assets/33182214/b2692f12-8a6a-4004-8eaa-86559192756c) Version: v0.84, 0.83 & dev0.160  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file test-file",no-bug,0.9
566,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/566,Add account number to challenge token log output,Feature Request I have a multi-number signal setup. When i get a rate-limit-challenge the logging works and i get the token id and the phonenumber of the recipient. To lift the rate-limit i need to call http://localhost:8888/v1/accounts/{number}/rate-limit-challenge with the number of the registered account in signal-cli. This number is not in the log output. Can you please add it?,source-file,Add account number to challenge token log output Feature Request I have a multi-number signal setup. When i get a rate-limit-challenge the logging works and i get the token id and the phonenumber of the recipient. To lift the rate-limit i need to call http://localhost:8888/v1/accounts/{number}/rate-limit-challenge with the number of the registered account in signal-cli. This number is not in the log output. Can you please add it? source-file,no-bug,0.9
572,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/572,Not receiving messages in json-rpc mode with 0.86,"The problem I'm using json-rpc mode and receiving messages in Node-RED using websocket, with the following address: [ws://1315902c-signal-messenger:8080/v1/receive/XXXXXXXXXX](url) Also sending messages from Node-RED at [http://1315902c-signal-messenger:8080/v2/send](url) Everything works very well in 0.85. After updating to 0.86, messages are still being sent successfully, but Node-RED stops receiving messages, either after a few seconds or after the first message. I realize this isn't much information to go on, but I'm not sure what to look at to help diagnose the issue. Let me know. In the meantime, I've just rolled back to 0.85.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_",source-file | source-file | source-file,"Not receiving messages in json-rpc mode with 0.86 The problem I'm using json-rpc mode and receiving messages in Node-RED using websocket, with the following address: [ws://1315902c-signal-messenger:8080/v1/receive/XXXXXXXXXX](url) Also sending messages from Node-RED at [http://1315902c-signal-messenger:8080/v2/send](url) Everything works very well in 0.85. After updating to 0.86, messages are still being sent successfully, but Node-RED stops receiving messages, either after a few seconds or after the first message. I realize this isn't much information to go on, but I'm not sure what to look at to help diagnose the issue. Let me know. In the meantime, I've just rolled back to 0.85.  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? Home Assistant Signal Addon  In which mode are you using the docker container? JSON-RPC Mode  What's the architecture of your host system? x86-64  Additional information _No response_ source-file source-file source-file",no-bug,0.7
19,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/19,error Captcha required for verification,"Hi ! When I run the CURL post to verify phone number : `curl -X POST -H ""Content-Type: application/json"" 'http://192.168.255.1:8080/v1/register/+336xxxxxxxx'` I get : `{""error"":""Captcha required for verification (null)\n""}` any idea ?",source-file | source-file,"error Captcha required for verification Hi ! When I run the CURL post to verify phone number : `curl -X POST -H ""Content-Type: application/json"" 'http://192.168.255.1:8080/v1/register/+336xxxxxxxx'` I get : `{""error"":""Captcha required for verification (null)\n""}` any idea ? source-file source-file",bug,0.9
620,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/620,Groupmod: GID 101 already exists,"The problem The API was running fine since the last update. I didn't change any users, groups, or anything. Suddenly I cannot start the container because of the following message: `<html><body> <!--StartFragment--> date | stream | content -- | -- | -- 2024/11/23 13:29:19 | stdout | groupmod: GID '101' already exists 2024/11/23 13:29:19 | stdout | + groupmod -g 101 signal-api 2024/11/23 13:29:19 | stdout | usermod: no changes 2024/11/23 13:29:19 | stdout | + usermod -u 1026 signal-api 2024/11/23 13:29:19 | stdout | + [ -z /home/.local/share/signal-cli ] 2024/11/23 13:29:19 | stdout | + set -e 2024/11/23 13:23:43 | stdout | groupmod: GID '101' already exists 2024/11/23 13:23:43 | stdout | + groupmod -g 101 signal-api 2024/11/23 13:23:43 | stdout | + usermod -u 1026 signal-api 2024/11/23 13:23:43 | stdout | + [ -z /home/.local/share/signal-cli ] 2024/11/23 13:23:43 | stdout | + set -e <!--EndFragment--> </body> </html>` Is it now necessary to have an own user for the container?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information - Running on Synology Container Manager",config-file,"Groupmod: GID 101 already exists The problem The API was running fine since the last update. I didn't change any users, groups, or anything. Suddenly I cannot start the container because of the following message: `<html><body> <!--StartFragment--> date | stream | content -- | -- | -- 2024/11/23 13:29:19 | stdout | groupmod: GID '101' already exists 2024/11/23 13:29:19 | stdout | + groupmod -g 101 signal-api 2024/11/23 13:29:19 | stdout | usermod: no changes 2024/11/23 13:29:19 | stdout | + usermod -u 1026 signal-api 2024/11/23 13:29:19 | stdout | + [ -z /home/.local/share/signal-cli ] 2024/11/23 13:29:19 | stdout | + set -e 2024/11/23 13:23:43 | stdout | groupmod: GID '101' already exists 2024/11/23 13:23:43 | stdout | + groupmod -g 101 signal-api 2024/11/23 13:23:43 | stdout | + usermod -u 1026 signal-api 2024/11/23 13:23:43 | stdout | + [ -z /home/.local/share/signal-cli ] 2024/11/23 13:23:43 | stdout | + set -e <!--EndFragment--> </body> </html>` Is it now necessary to have an own user for the container?  Are you using the latest released version? - [X] Yes  Have you read the troubleshooting page? - [X] Yes  What type of installation are you running? signal-cli-rest-api Docker Container  In which mode are you using the docker container? Normal Mode  What's the architecture of your host system? x86-64  Additional information - Running on Synology Container Manager config-file",no-bug,0.9
135,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/135,Scheduler uses hard coded port 8080,"I installed signal-cli-rest-api recently. I needed to change the port, because 8080 was already used. It worked, but I noticed crashed in the docker logs.  time=""2021-05-22T08:49:00+02:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +49XXXX: Get \""http://127.0.0.1:8080/v1/receive/+49XXXX\"": dial tcp 127.0.0.1:8080: connect: connection refused"" panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x5b1ce8] goroutine 10 [running]: main.main.func1.1(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x0, 0x0, 0xe36d8, 0x1cfa6c0) /tmp/signal-cli-rest-api-src/main.go:175 +0x134 path/filepath.walk(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:360 +0x308 path/filepath.walk(0x1c921b0, 0x22, 0x7d2330, 0x1cfa630, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.walk(0xbec4ae48, 0x1d, 0x7d2330, 0x1cfa120, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.Walk(0xbec4ae48, 0x1d, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:406 +0xe8 main.main.func1() /tmp/signal-cli-rest-api-src/main.go:167 +0x30 github.com/robfig/cron/v3.FuncJob.Run(0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:136 +0x1c github.com/robfig/cron/v3.(*Cron).startJob.func1(0x1dcc180, 0x7cb188, 0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:312 +0x58 created by github.com/robfig/cron/v3.(*Cron).startJob /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:310 +0x58  The port is still 8080 in the scheduler call. This can also be seen in the source:  log.Debug(""AUTO_RECEIVE_SCHEDULE: Calling receive for number "", filename) resp, err := http.Get(""http://127.0.0.1:8080/v1/receive/""+filename)  (https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/main.go#L171)",source-file | source-file,"Scheduler uses hard coded port 8080 I installed signal-cli-rest-api recently. I needed to change the port, because 8080 was already used. It worked, but I noticed crashed in the docker logs.  time=""2021-05-22T08:49:00+02:00"" level=error msg=""AUTO_RECEIVE_SCHEDULE: Couldn't call receive for number +49XXXX: Get \""http://127.0.0.1:8080/v1/receive/+49XXXX\"": dial tcp 127.0.0.1:8080: connect: connection refused"" panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x5b1ce8] goroutine 10 [running]: main.main.func1.1(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x0, 0x0, 0xe36d8, 0x1cfa6c0) /tmp/signal-cli-rest-api-src/main.go:175 +0x134 path/filepath.walk(0x1f00440, 0x31, 0x7d2330, 0x1cfa6c0, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:360 +0x308 path/filepath.walk(0x1c921b0, 0x22, 0x7d2330, 0x1cfa630, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.walk(0xbec4ae48, 0x1d, 0x7d2330, 0x1cfa120, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:384 +0x20c path/filepath.Walk(0xbec4ae48, 0x1d, 0x6ed460, 0x0, 0x0) /usr/local/go/src/path/filepath/path.go:406 +0xe8 main.main.func1() /tmp/signal-cli-rest-api-src/main.go:167 +0x30 github.com/robfig/cron/v3.FuncJob.Run(0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:136 +0x1c github.com/robfig/cron/v3.(*Cron).startJob.func1(0x1dcc180, 0x7cb188, 0x218c570) /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:312 +0x58 created by github.com/robfig/cron/v3.(*Cron).startJob /go/pkg/mod/github.com/robfig/cron/v3@v3.0.1/cron.go:310 +0x58  The port is still 8080 in the scheduler call. This can also be seen in the source:  log.Debug(""AUTO_RECEIVE_SCHEDULE: Calling receive for number "", filename) resp, err := http.Get(""http://127.0.0.1:8080/v1/receive/""+filename)  (https://github.com/bbernhard/signal-cli-rest-api/blob/master/src/main.go#L171) source-file source-file",bug,0.9
398,signal-cli-rest-api,https://github.com/bbernhard/signal-cli-rest-api/issues/398,Please add stickers features,"Feature Request Hey there, first off, thank you for this rest API! Its amazing <3  Now what Im missing is being able to list the installed stickers and to install new stickers. It is possible via the CLI so Im asking to add it to the API. See: https://github.com/AsamK/signal-cli/discussions/1306 I could give it a try if you have no time but am also short on time Thank you!",source-file | source-file | source-file | documentation-file | documentation-file | source-file,"Please add stickers features Feature Request Hey there, first off, thank you for this rest API! Its amazing <3  Now what Im missing is being able to list the installed stickers and to install new stickers. It is possible via the CLI so Im asking to add it to the API. See: https://github.com/AsamK/signal-cli/discussions/1306 I could give it a try if you have no time but am also short on time Thank you! source-file source-file source-file documentation-file documentation-file source-file",no-bug,0.95
