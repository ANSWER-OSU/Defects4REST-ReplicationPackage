issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence
1227,WP-API,https://github.com/WP-API/WP-API/issues/1227,HTML entities are not decoded,"I'll suggest to evaluate a decoding of html entities. E.g. I have a category in Wordpress whose name is ""> something"". The '>' char is stored on the db by Wordpress as '&gt;' and when I query the plugin, I still get '&gt;'. However JSON is not HTML, and probably the use of HTML entities is not good. I suggest to use html_entity_decode() on category names, slugs and so on.",other-file | other-file | other-file,"HTML entities are not decoded I'll suggest to evaluate a decoding of html entities. E.g. I have a category in Wordpress whose name is ""> something"". The '>' char is stored on the db by Wordpress as '&gt;' and when I query the plugin, I still get '&gt;'. However JSON is not HTML, and probably the use of HTML entities is not good. I suggest to use html_entity_decode() on category names, slugs and so on. other-file other-file other-file",bug,0.85
2730,WP-API,https://github.com/WP-API/WP-API/issues/2730,WP_REST_Attachment_Controller::update_item() is missing additional fields updates,The update callback for the attachments endpoint is missing the additional fields updates.,other-file,WP_REST_Attachment_Controller::update_item() is missing additional fields updates The update callback for the attachments endpoint is missing the additional fields updates. other-file,bug,0.85
330,WP-API,https://github.com/WP-API/WP-API/issues/330,/posts endpoint ignores context=edit parameter,"Assuming: - a custom post type of `my_custom_type` - several custom fields like `a_custom_field` and `b_custom_field` The following endpoint doesn't include the custom fields in the meta data:  /posts?type=my_custom_type&context=edit  Unless I'm misunderstanding the docs, the `/posts` endpoint should include custom meta data. The custom fields meta data **is** included when I try the following:  /posts/19?context=edit ",other-file,"/posts endpoint ignores context=edit parameter Assuming: - a custom post type of `my_custom_type` - several custom fields like `a_custom_field` and `b_custom_field` The following endpoint doesn't include the custom fields in the meta data:  /posts?type=my_custom_type&context=edit  Unless I'm misunderstanding the docs, the `/posts` endpoint should include custom meta data. The custom fields meta data **is** included when I try the following:  /posts/19?context=edit  other-file",bug,0.9
229,WP-API,https://github.com/WP-API/WP-API/issues/229,Draft posts should return null for dates,"At the moment, they return `0000-00-00 00:00:00` as per core, or a weirder date (such as `date('c', 0)`)",other-file | test-file | test-file | other-file | test-file | test-file,"Draft posts should return null for dates At the moment, they return `0000-00-00 00:00:00` as per core, or a weirder date (such as `date('c', 0)`) other-file test-file test-file other-file test-file test-file",bug,0.85
1621,WP-API,https://github.com/WP-API/WP-API/issues/1621,WP_REST_Request:get_params()/get_param() returns route,"Not sure if this was intended, but it's annoying me. In my callback, where `$request` is `WP_REST_Request` object and I do this:  $params = $request->get_params(); $zero = $request->get_param( 0 );  I get a 0 index in `$params` and `$zero` has the route URL. I don't see why it <em>should</em> be a param, it's not registered on the endpoint, and its redundant to what I can get with the `get_url_params()` method.",other-file | other-file,"WP_REST_Request:get_params()/get_param() returns route Not sure if this was intended, but it's annoying me. In my callback, where `$request` is `WP_REST_Request` object and I do this:  $params = $request->get_params(); $zero = $request->get_param( 0 );  I get a 0 index in `$params` and `$zero` has the route URL. I don't see why it <em>should</em> be a param, it's not registered on the endpoint, and its redundant to what I can get with the `get_url_params()` method. other-file other-file",bug,0.85
1959,WP-API,https://github.com/WP-API/WP-API/issues/1959,GET request for media files results in an empty array,"Hi I have been trying to fetch all the media files from the REST API using restangular, but no matter how I try it fails, so I decided to test the media endpoint via PostMan app and realized that although I can see the media files json object in my browsers when I browse to /wp-json/wp/v2/media but using PostMan or using restangular it always results in an empty array. The funny part is that during the time I was pulling my hair for getting the media files, the files showed up only once, and after one refresh they were gone forever, this could be a bug in the wp rest plugin.",test-file,"GET request for media files results in an empty array Hi I have been trying to fetch all the media files from the REST API using restangular, but no matter how I try it fails, so I decided to test the media endpoint via PostMan app and realized that although I can see the media files json object in my browsers when I browse to /wp-json/wp/v2/media but using PostMan or using restangular it always results in an empty array. The funny part is that during the time I was pulling my hair for getting the media files, the files showed up only once, and after one refresh they were gone forever, this could be a bug in the wp rest plugin. test-file",bug,0.9
1395,WP-API,https://github.com/WP-API/WP-API/issues/1395,Taxonomy term IDs not the same as what Wordpress actually wants?,"I'm seeing some very strange behavior when creating and then associating terms via the REST API: - The API will create the new term as requested and return a well-formed response including the new term ID. - Attempting to associate the new term using the returned ID to an existing post will succeed as well (HTTP 201). - However, when viewing the post in WP-Admin, some of the term associations are either missing or entirely wrong. What's really strange is that I can import a term via the API and then go search for it in WP-Admin as well. The ID that I got back in my REST response is NOT the term ID that Wordpress is using to render the Edit form for the term. That seems a red flag to me, but I'm not sure how or why it's happening. Attached are screenshots of importing the term, associating the term, searching for the term against the REST API -- these are all in agreement with each other. ![screen shot 2015-07-11 at 1 50 26 pm](https://cloud.githubusercontent.com/assets/643118/8634836/5c4406b4-27d7-11e5-8569-b9565d331183.png) ![screen shot 2015-07-11 at 2 05 33 pm](https://cloud.githubusercontent.com/assets/643118/8634838/697a5b80-27d7-11e5-9775-fd90a95aa364.png) ![screen shot 2015-07-11 at 2 19 15 pm](https://cloud.githubusercontent.com/assets/643118/8634851/fc4c0ff8-27d7-11e5-88a8-08f046b292e3.png) ![screen shot 2015-07-11 at 1 53 00 pm](https://cloud.githubusercontent.com/assets/643118/8634840/784d96f4-27d7-11e5-9c90-78514d77fd95.png) The last two screenshots are from the WP-Admin, and they clearly show that ""Women's Tennis"" is not associated to the Post, and the term ID is also different (27564 != 27580). ![screen shot 2015-07-11 at 1 56 15 pm](https://cloud.githubusercontent.com/assets/643118/8634841/7cb7723c-27d7-11e5-8371-cb4e8fb09216.png) ![screen shot 2015-07-11 at 1 56 52 pm](https://cloud.githubusercontent.com/assets/643118/8634842/7fa41388-27d7-11e5-8bad-7dfa14c07241.png) Any idea what's going wrong here?",other-file | other-file,"Taxonomy term IDs not the same as what Wordpress actually wants? I'm seeing some very strange behavior when creating and then associating terms via the REST API: - The API will create the new term as requested and return a well-formed response including the new term ID. - Attempting to associate the new term using the returned ID to an existing post will succeed as well (HTTP 201). - However, when viewing the post in WP-Admin, some of the term associations are either missing or entirely wrong. What's really strange is that I can import a term via the API and then go search for it in WP-Admin as well. The ID that I got back in my REST response is NOT the term ID that Wordpress is using to render the Edit form for the term. That seems a red flag to me, but I'm not sure how or why it's happening. Attached are screenshots of importing the term, associating the term, searching for the term against the REST API -- these are all in agreement with each other. ![screen shot 2015-07-11 at 1 50 26 pm](https://cloud.githubusercontent.com/assets/643118/8634836/5c4406b4-27d7-11e5-8569-b9565d331183.png) ![screen shot 2015-07-11 at 2 05 33 pm](https://cloud.githubusercontent.com/assets/643118/8634838/697a5b80-27d7-11e5-9775-fd90a95aa364.png) ![screen shot 2015-07-11 at 2 19 15 pm](https://cloud.githubusercontent.com/assets/643118/8634851/fc4c0ff8-27d7-11e5-88a8-08f046b292e3.png) ![screen shot 2015-07-11 at 1 53 00 pm](https://cloud.githubusercontent.com/assets/643118/8634840/784d96f4-27d7-11e5-9c90-78514d77fd95.png) The last two screenshots are from the WP-Admin, and they clearly show that ""Women's Tennis"" is not associated to the Post, and the term ID is also different (27564 != 27580). ![screen shot 2015-07-11 at 1 56 15 pm](https://cloud.githubusercontent.com/assets/643118/8634841/7cb7723c-27d7-11e5-8371-cb4e8fb09216.png) ![screen shot 2015-07-11 at 1 56 52 pm](https://cloud.githubusercontent.com/assets/643118/8634842/7fa41388-27d7-11e5-8bad-7dfa14c07241.png) Any idea what's going wrong here? other-file other-file",bug,0.9
1143,WP-API,https://github.com/WP-API/WP-API/issues/1143,Multiple errors via param validation should be programmatically readable,"Currently if a request contains multiple invalid request args, we compile an error string showing all the issues. However, we don't pass all the different fields that errored. From @rmccue in slack: > `new WP_Error( 'json_missing_field', 'Missing $field', array( 'key' => $field ) )` > Would output as `[ { ""code"": ""json_missing_field"", ""message"": ""Missing abc"", ""data"": { ""key"": ""abc"" } }]`",other-file | test-file,"Multiple errors via param validation should be programmatically readable Currently if a request contains multiple invalid request args, we compile an error string showing all the issues. However, we don't pass all the different fields that errored. From @rmccue in slack: > `new WP_Error( 'json_missing_field', 'Missing $field', array( 'key' => $field ) )` > Would output as `[ { ""code"": ""json_missing_field"", ""message"": ""Missing abc"", ""data"": { ""key"": ""abc"" } }]` other-file test-file",bug,0.9
492,WP-API,https://github.com/WP-API/WP-API/issues/492,API incompatible with setup_postdata,"Hello, Using this API and setting up the results with `setup_postdata()` again in another WordPress site creates incompatibility issues on the following properties: `post_author` versus `author` `post_date` versus `date` `post_content` versus `content` `post_title` versus `title` This means that `the_title()`, `the_content()`, etc will not work anymore. I can understand the desire to change these ancient property names to something that makes sense but it breaks compatibility with very standard WordPress functions which most people expect to work. We fixed our problem by filtering `json_prepare_post` and assigning the properties. Related closed issue. https://github.com/WP-API/WP-API/issues/41",other-file | other-file,"API incompatible with setup_postdata Hello, Using this API and setting up the results with `setup_postdata()` again in another WordPress site creates incompatibility issues on the following properties: `post_author` versus `author` `post_date` versus `date` `post_content` versus `content` `post_title` versus `title` This means that `the_title()`, `the_content()`, etc will not work anymore. I can understand the desire to change these ancient property names to something that makes sense but it breaks compatibility with very standard WordPress functions which most people expect to work. We fixed our problem by filtering `json_prepare_post` and assigning the properties. Related closed issue. https://github.com/WP-API/WP-API/issues/41 other-file other-file",bug,0.85
414,WP-API,https://github.com/WP-API/WP-API/issues/414,Getting Parent Post / Comment but not doing anything with it,"It seems like there was an intention to populate the `parent` field of a comment with the actual parent object (post for top-level comments and comment for child comments), however the `$fields['parent']` value gets overwritten at the end with the `$comment->comment_parent` which I think is the logical thing to put in the `parent` field anyways. Can we have all the parent object info go into a `parent_object` field or some other name that's not `parent` or do we rip this code out altogether? [lib/class-wp-json-response.php:1570-1589](/WP-API/WP-API/blob/master/lib/class-wp-json-posts.php#L1570-1589)  php // Post if ( 'single'  $context ) { $parent = get_post( $post['post_parent'], ARRAY_A ); $fields['parent'] = $this->prepare_post( $parent, 'single-parent' ); } // Parent if ( ( 'single'  $context || 'single-parent'  $context ) && (int) $comment->comment_parent ) { $parent_fields = array( 'meta' ); if ( $context  'single' ) { $parent_fields[] = 'comment'; } $parent = get_comment( $post['post_parent'] ); $fields['parent'] = $this->prepare_comment( $parent, $parent_fields, 'single-parent' ); } // Parent $fields['parent'] = (int) $comment->comment_parent; ",other-file,"Getting Parent Post / Comment but not doing anything with it It seems like there was an intention to populate the `parent` field of a comment with the actual parent object (post for top-level comments and comment for child comments), however the `$fields['parent']` value gets overwritten at the end with the `$comment->comment_parent` which I think is the logical thing to put in the `parent` field anyways. Can we have all the parent object info go into a `parent_object` field or some other name that's not `parent` or do we rip this code out altogether? [lib/class-wp-json-response.php:1570-1589](/WP-API/WP-API/blob/master/lib/class-wp-json-posts.php#L1570-1589)  php // Post if ( 'single'  $context ) { $parent = get_post( $post['post_parent'], ARRAY_A ); $fields['parent'] = $this->prepare_post( $parent, 'single-parent' ); } // Parent if ( ( 'single'  $context || 'single-parent'  $context ) && (int) $comment->comment_parent ) { $parent_fields = array( 'meta' ); if ( $context  'single' ) { $parent_fields[] = 'comment'; } $parent = get_comment( $post['post_parent'] ); $fields['parent'] = $this->prepare_comment( $parent, $parent_fields, 'single-parent' ); } // Parent $fields['parent'] = (int) $comment->comment_parent;  other-file",bug,0.85
2803,WP-API,https://github.com/WP-API/WP-API/issues/2803,/wp/v2/taxonomies object returns JSON array (not object) on invalid query,"`/wp/v2/taxonomies?type=wingding` will yield `[]`, when the default response for the endpoint is a keyed object. I presume that the object returned from the API should be consistently formed, so I raise whether we should return `{}` instead if an invalid type property is provided (or whether a descriptive error should be returned instead).",other-file | test-file | other-file | test-file,"/wp/v2/taxonomies object returns JSON array (not object) on invalid query `/wp/v2/taxonomies?type=wingding` will yield `[]`, when the default response for the endpoint is a keyed object. I presume that the object returned from the API should be consistently formed, so I raise whether we should return `{}` instead if an invalid type property is provided (or whether a descriptive error should be returned instead). other-file test-file other-file test-file",bug,0.9
862,WP-API,https://github.com/WP-API/WP-API/issues/862,Post query returns json_invalid_query for valid query,"If you do a query that happens to have no results (e.g. `cat=2` where the category has no posts), you get back a 404 and a `json_invalid_query` error. This should just be an empty JSON list, and not an error.",test-file,"Post query returns json_invalid_query for valid query If you do a query that happens to have no results (e.g. `cat=2` where the category has no posts), you get back a 404 and a `json_invalid_query` error. This should just be an empty JSON list, and not an error. test-file",bug,0.95
166,WP-API,https://github.com/WP-API/WP-API/issues/166,Comment endpoint throws fatal error for invalid comments,Trying to grab a non-existent comment from a post like so: http://local.trunk.dev/wp-json/posts/3184/comments/2 This error is thrown:  <br /> <b>Fatal error</b>: Call to a member function format() on a non-object in <b>/srv/www/trunk/wp-content/plugins/wp-api/lib/class-wp-json-posts.php</b> on line <b>1018</b><br /> ,other-file | other-file | other-file | other-file,Comment endpoint throws fatal error for invalid comments Trying to grab a non-existent comment from a post like so: http://local.trunk.dev/wp-json/posts/3184/comments/2 This error is thrown:  <br /> <b>Fatal error</b>: Call to a member function format() on a non-object in <b>/srv/www/trunk/wp-content/plugins/wp-api/lib/class-wp-json-posts.php</b> on line <b>1018</b><br />  other-file other-file other-file other-file,bug,0.9
72,WP-API,https://github.com/WP-API/WP-API/issues/72,PHP Notice thrown if no created / published posts and requesting Custom Post Type,"In this scenario, php returns a notice in which the `$post` object in `wp-includes/post-template.php` is null.  Notice: Trying to get property of non-object in wp-includes/post-template.php on line 209  Again, the notice throws only when no posts are created / published and you are attempting to request a custom post type (ie wp-json.php/posts?type=custom_post_type) Tested with: WP 3.8.1 WP-API 0.8",other-file,"PHP Notice thrown if no created / published posts and requesting Custom Post Type In this scenario, php returns a notice in which the `$post` object in `wp-includes/post-template.php` is null.  Notice: Trying to get property of non-object in wp-includes/post-template.php on line 209  Again, the notice throws only when no posts are created / published and you are attempting to request a custom post type (ie wp-json.php/posts?type=custom_post_type) Tested with: WP 3.8.1 WP-API 0.8 other-file",bug,0.85
1023,WP-API,https://github.com/WP-API/WP-API/issues/1023,Fix comment schema; return error when response data doesn't match schema,"In #955, @rmccue was able to change the response format for a comment without updating the schema. The API shouldn't ever return a response that doesn't match the declared schema. In this issue, we should: 1. Fix the schema, somewhat contingent on #1022 2. Return a 500 error when the produced response doesn't match the schema, instead of a malformed object. Note for the second, I'm just referring to fields in the response that are missing or of a different format than in the declared schema. Additional fields can be ignored.",other-file,"Fix comment schema; return error when response data doesn't match schema In #955, @rmccue was able to change the response format for a comment without updating the schema. The API shouldn't ever return a response that doesn't match the declared schema. In this issue, we should: 1. Fix the schema, somewhat contingent on #1022 2. Return a 500 error when the produced response doesn't match the schema, instead of a malformed object. Note for the second, I'm just referring to fields in the response that are missing or of a different format than in the declared schema. Additional fields can be ignored. other-file",bug,0.95
224,WP-API,https://github.com/WP-API/WP-API/issues/224,/media doesn't return the alternative text,The media endpoint should return the alternative text for attachments,other-file,/media doesn't return the alternative text The media endpoint should return the alternative text for attachments other-file,bug,0.85
228,WP-API,https://github.com/WP-API/WP-API/issues/228,Post parent read from incorrect key,"When setting a post parent, the value is currently pulled from the `post_parent` key, not the `parent` key.",other-file | test-file | other-file | test-file,"Post parent read from incorrect key When setting a post parent, the value is currently pulled from the `post_parent` key, not the `parent` key. other-file test-file other-file test-file",bug,0.85
2582,WP-API,https://github.com/WP-API/WP-API/issues/2582,Using term filters can cause the API to return objects instead of arrays,"Hi, WordPress allows you to filter processes like get_terms. Through this you can unset terms from the array that's then returned for further processing. A side effect of doing this that affects the JSON encoder but not normally further PHP processing is that the JSON encoder must now output arrays filtered in this way as JSON objects instead of arrays, because the internal structure of the array is now key/value due to deleted numeric keys (wrong terminology, but it sort of works). An example of the problem is here: http://stackoverflow.com/questions/5943149/rebase-array-keys-after-unsetting-elements Should the API: a) defensively call array_values on things it expects to be trying to output as an array? (So that the API contract can't be broken), or: b) should this be documented behaviour and it's the responsibility of the filter developer to call array_values? I might suggest (a), if only because there may be plugins out in the world that do not call array_values because it's never affected PHP, but being used on sites that then would have potentially random WP-API behaviour switching between Object and Array for filtered and non-filtered term arrays. This probably isn't restricted to term filters, but it's where I noted the behaviour.",other-file | other-file,"Using term filters can cause the API to return objects instead of arrays Hi, WordPress allows you to filter processes like get_terms. Through this you can unset terms from the array that's then returned for further processing. A side effect of doing this that affects the JSON encoder but not normally further PHP processing is that the JSON encoder must now output arrays filtered in this way as JSON objects instead of arrays, because the internal structure of the array is now key/value due to deleted numeric keys (wrong terminology, but it sort of works). An example of the problem is here: http://stackoverflow.com/questions/5943149/rebase-array-keys-after-unsetting-elements Should the API: a) defensively call array_values on things it expects to be trying to output as an array? (So that the API contract can't be broken), or: b) should this be documented behaviour and it's the responsibility of the filter developer to call array_values? I might suggest (a), if only because there may be plugins out in the world that do not call array_values because it's never affected PHP, but being used on sites that then would have potentially random WP-API behaviour switching between Object and Array for filtered and non-filtered term arrays. This probably isn't restricted to term filters, but it's where I noted the behaviour. other-file other-file",bug,0.9
444,WP-API,https://github.com/WP-API/WP-API/issues/444,Error on Post Update of featured_image,Fatal error: Cannot use object of type WP_JSON_Response as array in /var/www/wordpress/wp-content/plugins/WP-API/lib/class-wp-json-media.php on line 437,other-file,Error on Post Update of featured_image Fatal error: Cannot use object of type WP_JSON_Response as array in /var/www/wordpress/wp-content/plugins/WP-API/lib/class-wp-json-media.php on line 437 other-file,bug,0.85
1310,WP-API,https://github.com/WP-API/WP-API/issues/1310,Client JS is broken because it's referencing the wrong API URL,"Not sure if this should be fixed in `WP_API_Settings` or if the client script should append `/wp/v2`  but either way, the client helpers don't work in the current version. If someone would let me know which one needs to change, I'd be happy to spin up a PR.",source-file,"Client JS is broken because it's referencing the wrong API URL Not sure if this should be fixed in `WP_API_Settings` or if the client script should append `/wp/v2`  but either way, the client helpers don't work in the current version. If someone would let me know which one needs to change, I'd be happy to spin up a PR. source-file",bug,0.8
409,WP-API,https://github.com/WP-API/WP-API/issues/409,Taxonomies don't support dashes in slugs,"When performing a GET request on /wp-json/taxonomies/the-name/terms, the taxonomy 'the-name' cannot be found and returns a 'json_no_route' error. I believe this is due to the taxonomy having a dash in the name.",other-file,"Taxonomies don't support dashes in slugs When performing a GET request on /wp-json/taxonomies/the-name/terms, the taxonomy 'the-name' cannot be found and returns a 'json_no_route' error. I believe this is due to the taxonomy having a dash in the name. other-file",bug,0.9
290,WP-API,https://github.com/WP-API/WP-API/issues/290,User email addresses are exposed in read context,"Critical privacy issue: email is exposed to all users, not just in the edit context. We need to fix this.",test-file,"User email addresses are exposed in read context Critical privacy issue: email is exposed to all users, not just in the edit context. We need to fix this. test-file",bug,0.9
2309,WP-API,https://github.com/WP-API/WP-API/issues/2309,Wrong paging when retrieving categories list,The following requests return the same result (for per_page >10): http://blog.lo/wp-json/wp/v2/categories?page=1&per_page=100 http://blog.lo/wp-json/wp/v2/categories?page=2&per_page=100  http://blog.lo/wp-json/wp/v2/categories?page=1232&per_page=100 But the following requests work correctly: http://blog.lo/wp-json/wp/v2/categories?page=1&per_page=10 http://blog.lo/wp-json/wp/v2/categories?page=2&per_page=10  http://blog.lo/wp-json/wp/v2/categories?page=1232&per_page=10,test-file,Wrong paging when retrieving categories list The following requests return the same result (for per_page >10): http://blog.lo/wp-json/wp/v2/categories?page=1&per_page=100 http://blog.lo/wp-json/wp/v2/categories?page=2&per_page=100  http://blog.lo/wp-json/wp/v2/categories?page=1232&per_page=100 But the following requests work correctly: http://blog.lo/wp-json/wp/v2/categories?page=1&per_page=10 http://blog.lo/wp-json/wp/v2/categories?page=2&per_page=10  http://blog.lo/wp-json/wp/v2/categories?page=1232&per_page=10 test-file,bug,0.9
299,WP-API,https://github.com/WP-API/WP-API/issues/299,Media meta sizes has inconsistent data type,"If a media object does not have any size metadata available, the response value is an empty array (`[]`). If it does have values, then the response value is a dictionary (`{ thumbnail: {  },  }`). For the empty case it should probably instead return an empty dictionary to simplify the deserialization logic for clients.",other-file | other-file,"Media meta sizes has inconsistent data type If a media object does not have any size metadata available, the response value is an empty array (`[]`). If it does have values, then the response value is a dictionary (`{ thumbnail: {  },  }`). For the empty case it should probably instead return an empty dictionary to simplify the deserialization logic for clients. other-file other-file",bug,0.9
221,WP-API,https://github.com/WP-API/WP-API/issues/221,Required parameter check for user update is in wrong place,"We currently check for the required parameters (`username`, `password`, `email`) on update, not creation. This should be flipped.",other-file | test-file | other-file | test-file,"Required parameter check for user update is in wrong place We currently check for the required parameters (`username`, `password`, `email`) on update, not creation. This should be flipped. other-file test-file other-file test-file",bug,0.9
2416,WP-API,https://github.com/WP-API/WP-API/issues/2416,Only include Post data on the response object when declared in schema,"This is what our code path looks like currently:  setup_postdata( $post ); // Base fields for every post. $data = array( 'id' => $post->ID, 'date' => $this->prepare_date_response( $post->post_date_gmt, $post->post_date ), 'date_gmt' => $this->prepare_date_response( $post->post_date_gmt ), 'guid' => array( /** This filter is documented in wp-includes/post-template.php */ 'rendered' => apply_filters( 'get_the_guid', $post->guid ), 'raw' => $post->guid, ), 'modified' => $this->prepare_date_response( $post->post_modified_gmt, $post->post_modified ), 'modified_gmt' => $this->prepare_date_response( $post->post_modified_gmt ), 'password' => $post->post_password, 'slug' => $post->post_name, 'status' => $post->post_status, 'type' => $post->post_type, 'link' => get_permalink( $post->ID ), ); $schema = $this->get_item_schema(); if ( ! empty( $schema['properties']['title'] ) ) { $data['title'] = array( 'raw' => $post->post_title, 'rendered' => get_the_title( $post->ID ), ); }  If I remove `title` as a property from the schema, it's not included in the response. However, if I remove `password` from schema properties, it's still included on the response object. I'd expect the response object would only have fields declared in the schema, or at least that WP REST API wouldn't blindly add database data to the response if was purposefully removed from the schema.",other-file,"Only include Post data on the response object when declared in schema This is what our code path looks like currently:  setup_postdata( $post ); // Base fields for every post. $data = array( 'id' => $post->ID, 'date' => $this->prepare_date_response( $post->post_date_gmt, $post->post_date ), 'date_gmt' => $this->prepare_date_response( $post->post_date_gmt ), 'guid' => array( /** This filter is documented in wp-includes/post-template.php */ 'rendered' => apply_filters( 'get_the_guid', $post->guid ), 'raw' => $post->guid, ), 'modified' => $this->prepare_date_response( $post->post_modified_gmt, $post->post_modified ), 'modified_gmt' => $this->prepare_date_response( $post->post_modified_gmt ), 'password' => $post->post_password, 'slug' => $post->post_name, 'status' => $post->post_status, 'type' => $post->post_type, 'link' => get_permalink( $post->ID ), ); $schema = $this->get_item_schema(); if ( ! empty( $schema['properties']['title'] ) ) { $data['title'] = array( 'raw' => $post->post_title, 'rendered' => get_the_title( $post->ID ), ); }  If I remove `title` as a property from the schema, it's not included in the response. However, if I remove `password` from schema properties, it's still included on the response object. I'd expect the response object would only have fields declared in the schema, or at least that WP REST API wouldn't blindly add database data to the response if was purposefully removed from the schema. other-file",bug,0.9
661,WP-API,https://github.com/WP-API/WP-API/issues/661,The response from creating or updating a User should pass context = edit,"When returning the User response from `WP_JSON_Users_Controller->create_item()` or `WP_JSON_Users_Controller->update_item()` the edit context should be passed. This:  $response = $this->get_item( array( 'id' => $user_id ) );  Becomes:  $response = $this->get_item( array( 'id' => $user_id, 'context' => 'edit', ) ); ",other-file | other-file,"The response from creating or updating a User should pass context = edit When returning the User response from `WP_JSON_Users_Controller->create_item()` or `WP_JSON_Users_Controller->update_item()` the edit context should be passed. This:  $response = $this->get_item( array( 'id' => $user_id ) );  Becomes:  $response = $this->get_item( array( 'id' => $user_id, 'context' => 'edit', ) );  other-file other-file",bug,0.85
91,WP-API,https://github.com/WP-API/WP-API/issues/91,Raw data goes unused when sent to an endpoint.,"In class-wp-json-server.php, when dispatching callbacks if an endpoint expects raw data that data will end up going unused breaking the endpoint:  php elseif ( $supported & self::ACCEPT_RAW ) { $data = $this->get_raw_data(); } ",other-file | other-file,"Raw data goes unused when sent to an endpoint. In class-wp-json-server.php, when dispatching callbacks if an endpoint expects raw data that data will end up going unused breaking the endpoint:  php elseif ( $supported & self::ACCEPT_RAW ) { $data = $this->get_raw_data(); }  other-file other-file",bug,0.85
90,WP-API,https://github.com/WP-API/WP-API/issues/90,WP_JSON_CustomPostType does not accept JSON for editing/creating posts,Title says it all.,other-file | other-file | other-file,WP_JSON_CustomPostType does not accept JSON for editing/creating posts Title says it all. other-file other-file other-file,bug,0.8
2587,WP-API,https://github.com/WP-API/WP-API/issues/2587,"""registered_date"" type is ""date-time""","the schema on wp/v2/users returns: ""registered_date"": { ""description"": ""Registration date for the resource."", ""type"": ""date-time"", ""context"": [ ""edit"" ], ""readonly"": true }, according to json-schema v4 ""type"": ""date-time"" is NOT a valid type and it brakes parsers. it should be ""string"" with ""format"":""date-time"" ref: http://json-schema.org/latest/json-schema-core.html#anchor8 http://json-schema.org/latest/json-schema-validation.html#anchor107 example: ""registered_date"": { ""description"": ""Registration date for the resource."", ""type"": ""string"", ""format"": ""date-time"", ""context"": [ ""edit"" ], ""readonly"": true },",other-file | other-file,"""registered_date"" type is ""date-time"" the schema on wp/v2/users returns: ""registered_date"": { ""description"": ""Registration date for the resource."", ""type"": ""date-time"", ""context"": [ ""edit"" ], ""readonly"": true }, according to json-schema v4 ""type"": ""date-time"" is NOT a valid type and it brakes parsers. it should be ""string"" with ""format"":""date-time"" ref: http://json-schema.org/latest/json-schema-core.html#anchor8 http://json-schema.org/latest/json-schema-validation.html#anchor107 example: ""registered_date"": { ""description"": ""Registration date for the resource."", ""type"": ""string"", ""format"": ""date-time"", ""context"": [ ""edit"" ], ""readonly"": true }, other-file other-file",bug,0.9
2616,WP-API,https://github.com/WP-API/WP-API/issues/2616,Boolean request args fail validation,"In rest_validate_request_arg() we cannot use the `! is_bool()` conditional to validate if a request argument is either `true` or `false`. The query string in the url (example: https://demo.wp-api.org/wp-json/wp/v2/categories?hide_empty=true) will be parsed as a string. Which means you will always get the error: { code: ""rest_invalid_param"", message: ""Invalid parameter(s): hide_empty"", data: { status: 400, params: { hide_empty: ""hide_empty is not of type boolean"" } } }",other-file | test-file,"Boolean request args fail validation In rest_validate_request_arg() we cannot use the `! is_bool()` conditional to validate if a request argument is either `true` or `false`. The query string in the url (example: https://demo.wp-api.org/wp-json/wp/v2/categories?hide_empty=true) will be parsed as a string. Which means you will always get the error: { code: ""rest_invalid_param"", message: ""Invalid parameter(s): hide_empty"", data: { status: 400, params: { hide_empty: ""hide_empty is not of type boolean"" } } } other-file test-file",bug,0.95
164,WP-API,https://github.com/WP-API/WP-API/issues/164,Revisions endpoint not working,"I have a post with 3 revisions. This GET request returns the information about the post: http://local.trunk.dev/wp-json/posts/3184 This GET request outputs simply ""null"": http://local.trunk.dev/wp-json/posts/3184/revisions",other-file | other-file | other-file | other-file,"Revisions endpoint not working I have a post with 3 revisions. This GET request returns the information about the post: http://local.trunk.dev/wp-json/posts/3184 This GET request outputs simply ""null"": http://local.trunk.dev/wp-json/posts/3184/revisions other-file other-file other-file other-file",bug,0.9
2426,WP-API,https://github.com/WP-API/WP-API/issues/2426,Inconsistent type returned for user capabilities.,"When a WP user has capabilities and a call is made to `/users/:id?context=edit`, a JSON object/map is returned (`""capabilities"": {""a"":""foo"", ""b"":""bar""}`). However, when a user has no capabilities (`- No role for this site -` selected in wp-admin), an empty array is returned (`""capabilities"": []`).",other-file | test-file | other-file | other-file | other-file | other-file | other-file | test-file | test-file | documentation-file | other-file | test-file,"Inconsistent type returned for user capabilities. When a WP user has capabilities and a call is made to `/users/:id?context=edit`, a JSON object/map is returned (`""capabilities"": {""a"":""foo"", ""b"":""bar""}`). However, when a user has no capabilities (`- No role for this site -` selected in wp-admin), an empty array is returned (`""capabilities"": []`). other-file test-file other-file other-file other-file other-file other-file test-file test-file documentation-file other-file test-file",bug,0.9
2758,WP-API,https://github.com/WP-API/WP-API/issues/2758,Standardize the expected POST/PUT properties expected for schema nested objects,"In the [Posts Controller we accept POST/PUT values for `title` and `content` to be sent as `title.raw` or `content.raw`](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-posts-controller.php#L782). In this controller, we do NOT have a `santization_callback` set on the top-level `title` or `content` properties in the schema. The way the Comments Controller is setup prevents being able to pass `content.raw` to set the comment_content [because we DO have a sanitization_callback set on the top level `content` property](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-comments-controller.php#L867) in the schema. This means attempting to create or update a comment with `content.raw` set results in the following error: > stripslashes() expects parameter 1 to be string, array given Some questions that need answering: 1. Do we want to limit the acceptable parameters for the nested objects? Examples: - only accept `content` and ignore `content.raw` values - only accept `content.raw` and ignore `content` values 2. Do we want to accept both top-level and `.raw` property values for the nested objects? 3. How can we modify the schema (if needed) to apply callbacks or required parameters to nested objects?",other-file,"Standardize the expected POST/PUT properties expected for schema nested objects In the [Posts Controller we accept POST/PUT values for `title` and `content` to be sent as `title.raw` or `content.raw`](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-posts-controller.php#L782). In this controller, we do NOT have a `santization_callback` set on the top-level `title` or `content` properties in the schema. The way the Comments Controller is setup prevents being able to pass `content.raw` to set the comment_content [because we DO have a sanitization_callback set on the top level `content` property](https://github.com/WP-API/WP-API/blob/develop/lib/endpoints/class-wp-rest-comments-controller.php#L867) in the schema. This means attempting to create or update a comment with `content.raw` set results in the following error: > stripslashes() expects parameter 1 to be string, array given Some questions that need answering: 1. Do we want to limit the acceptable parameters for the nested objects? Examples: - only accept `content` and ignore `content.raw` values - only accept `content.raw` and ignore `content` values 2. Do we want to accept both top-level and `.raw` property values for the nested objects? 3. How can we modify the schema (if needed) to apply callbacks or required parameters to nested objects? other-file",bug,0.9
1763,WP-API,https://github.com/WP-API/WP-API/issues/1763,Don't permit requesting terms cross routes,I have a category with `term_taxonomy_id=1`:  GET http://wordpress-develop.dev/wp-json/wp/v2/terms/category/1  I shouldn't be able to request it from the `tag` endpoint:  http://wordpress-develop.dev/wp-json/wp/v2/terms/tag/1  Reported in https://wordpress.org/support/topic/incorrect-route-wordpress-44-beta-4?replies=5,test-file,Don't permit requesting terms cross routes I have a category with `term_taxonomy_id=1`:  GET http://wordpress-develop.dev/wp-json/wp/v2/terms/category/1  I shouldn't be able to request it from the `tag` endpoint:  http://wordpress-develop.dev/wp-json/wp/v2/terms/tag/1  Reported in https://wordpress.org/support/topic/incorrect-route-wordpress-44-beta-4?replies=5 test-file,bug,0.9
1548,WP-API,https://github.com/WP-API/WP-API/issues/1548,Approving a comment deletes content and author,"_Bug:_ Changing comment status from hold to approved using a PUT request deletes the comment author and comment content. I am using the basic auth plugin and an $http request in AngularJS. _How to replicate:_ Add an unapproved comment to your site with the WP API v2 and basic auth plugins installed. Using Postman, send a PUT request with a basic auth header to a comment endpoint, such as mysite.com/wp-json/wp/v2/comments/54 In the form data, send along status=approved. The comment will be approved, but the comment author and comment content are deleted.",test-file,"Approving a comment deletes content and author _Bug:_ Changing comment status from hold to approved using a PUT request deletes the comment author and comment content. I am using the basic auth plugin and an $http request in AngularJS. _How to replicate:_ Add an unapproved comment to your site with the WP API v2 and basic auth plugins installed. Using Postman, send a PUT request with a basic auth header to a comment endpoint, such as mysite.com/wp-json/wp/v2/comments/54 In the form data, send along status=approved. The comment will be approved, but the comment author and comment content are deleted. test-file",bug,0.95
411,WP-API,https://github.com/WP-API/WP-API/issues/411,Fatal Error when retrieving child comment,"An error occurs when you call posts/{postid}/comments/{commentid} where the selected comment has a parent (a reply). Fatal error: Call to a member function format() on a non-object in \class-wp-json-posts.php on line 1607 If I manually change ""comment_parent"" in the DB to 0 I do not get the error.",other-file,"Fatal Error when retrieving child comment An error occurs when you call posts/{postid}/comments/{commentid} where the selected comment has a parent (a reply). Fatal error: Call to a member function format() on a non-object in \class-wp-json-posts.php on line 1607 If I manually change ""comment_parent"" in the DB to 0 I do not get the error. other-file",bug,0.9
