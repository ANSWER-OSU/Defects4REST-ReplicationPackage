issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence
18903,Ghost,https://github.com/TryGhost/Ghost/issues/18903,Deletion of the final character of a link within a Toggle card can delete the entire link," Issue Summary Deleting the final character of a link in a Toggle card can delete the entire link. Sometimes, but not always. Because as seen in the video below, when I successfully deleted (and then un-did) the deletion of characters within a link I was able to move the cursor to the final character and successfully delete it (and nothing else). But when I moved the cursor away from the link and then returned to the position enabling me to delete the final character of the link, doing so once again deletes the entire link. https://github.com/TryGhost/Ghost/assets/27488257/1669cf81-b385-488d-8b8b-92372e8c1637 @9larsons This is a repeat of [this issue that you fixed](https://github.com/TryGhost/Ghost/issues/18674) within the general space of the editor. Not sure if it occurs anywhere else besides this.  Steps to Reproduce 1. Place the cursor a few characters after the final character after a link within a toggle card, then move it to just after the final character of a link 2. Press the delete button 3. See the entire link disappear  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file,"Deletion of the final character of a link within a Toggle card can delete the entire link  Issue Summary Deleting the final character of a link in a Toggle card can delete the entire link. Sometimes, but not always. Because as seen in the video below, when I successfully deleted (and then un-did) the deletion of characters within a link I was able to move the cursor to the final character and successfully delete it (and nothing else). But when I moved the cursor away from the link and then returned to the position enabling me to delete the final character of the link, doing so once again deletes the entire link. https://github.com/TryGhost/Ghost/assets/27488257/1669cf81-b385-488d-8b8b-92372e8c1637 @9larsons This is a repeat of [this issue that you fixed](https://github.com/TryGhost/Ghost/issues/18674) within the general space of the editor. Not sure if it occurs anywhere else besides this.  Steps to Reproduce 1. Place the cursor a few characters after the final character after a link within a toggle card, then move it to just after the final character of a link 2. Press the delete button 3. See the entire link disappear  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file",no-bug,0.9
18752,Ghost,https://github.com/TryGhost/Ghost/issues/18752,Pressing Enter on a card after closing the Post settings side-panel re-opens the side-panel," Issue Summary I went to add an empty line below an HTML card after having closed the Post settings side-panel, which re-opened the side-panel  Steps to Reproduce 1. Close the Post settings side-panel 2. Click on any kind of card 3. Press enter/return 4. See the Post settings side-panel re-open and the empty line beneath the card not getting created  Ghost Version 5.70.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file,"Pressing Enter on a card after closing the Post settings side-panel re-opens the side-panel  Issue Summary I went to add an empty line below an HTML card after having closed the Post settings side-panel, which re-opened the side-panel  Steps to Reproduce 1. Close the Post settings side-panel 2. Click on any kind of card 3. Press enter/return 4. See the Post settings side-panel re-open and the empty line beneath the card not getting created  Ghost Version 5.70.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file documentation-file other-file documentation-file documentation-file other-file",no-bug,0.9
19545,Ghost,https://github.com/TryGhost/Ghost/issues/19545,Feature image caption displays only one line," Issue Summary As the title says, the feature image caption in the editor displays only one line. Recently I saw it displaying something like a max of three lines (with the rest overlapping the title below it), but I hadn't gotten around to reporting the bug. Now it's worse though, as only one line gets displayed without even displaying the rest in an incorrect manner. In the image below you can see the spell-check red markers, as well as a few descenders, from the line above. ![Xnapper-2024-01-23-14 43 15](https://github.com/TryGhost/Ghost/assets/27488257/e669975e-7c86-4db2-9f56-7c0425052a8c)  Steps to Reproduce 1. Create a feature image caption that is long enough that it extends to more than a single line 2. See that only a single line gets displayed  Ghost Version 5.76.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 121.0.1 and Safari 17.3 on macOS 14.3  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Feature image caption displays only one line  Issue Summary As the title says, the feature image caption in the editor displays only one line. Recently I saw it displaying something like a max of three lines (with the rest overlapping the title below it), but I hadn't gotten around to reporting the bug. Now it's worse though, as only one line gets displayed without even displaying the rest in an incorrect manner. In the image below you can see the spell-check red markers, as well as a few descenders, from the line above. ![Xnapper-2024-01-23-14 43 15](https://github.com/TryGhost/Ghost/assets/27488257/e669975e-7c86-4db2-9f56-7c0425052a8c)  Steps to Reproduce 1. Create a feature image caption that is long enough that it extends to more than a single line 2. See that only a single line gets displayed  Ghost Version 5.76.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 121.0.1 and Safari 17.3 on macOS 14.3  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.95
18866,Ghost,https://github.com/TryGhost/Ghost/issues/18866,Pasting a link over selected caption text doesn't apply the link to the selected text but overwrites the text," Issue Summary Unlike pasting a link over selected regular text in to apply the link to the text, doing so to text in a caption overwrites the selected text with the link itself. **EDIT:** This also occurs within Callout cards, and presumably in other places as well.  Steps to Reproduce 1. Copy a link 2. Select some text in a caption 3. Try and paste the link 4. See the entire link replace the selected text  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file,"Pasting a link over selected caption text doesn't apply the link to the selected text but overwrites the text  Issue Summary Unlike pasting a link over selected regular text in to apply the link to the text, doing so to text in a caption overwrites the selected text with the link itself. **EDIT:** This also occurs within Callout cards, and presumably in other places as well.  Steps to Reproduce 1. Copy a link 2. Select some text in a caption 3. Try and paste the link 4. See the entire link replace the selected text  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file documentation-file other-file documentation-file documentation-file other-file",no-bug,0.9
18844,Ghost,https://github.com/TryGhost/Ghost/issues/18844,Blockquotes are lost when creating posts with admin API and HTML format," Issue Summary In previous versions of Ghost (e.g. 5.68.0) it was possible to upload HTML posts containing blockquote tags with nested paragraphs. These tags were converted into a blockquote in the uploaded post. This seems no longer to be possible. Instead, the blockquote is just imported as a regular paragraph. It still seems to work, if no nested paragraphs are used.  Steps to Reproduce Upload a post to the endpoint `POST posts/?source=html` with the following body:  { posts = ( { featured = 0; html = ""<p>Normal Text</p>\n\n<blockquote><p>\nThis is a quote\n</p></blockquote>\n\n<p>Normal text</p>""; ""published_at"" = ""<null>""; status = draft; tags = ( ); title = """"; } ); }  Results in a post consisting of three paragraphs. Instead the Paragraph ""This is a quote"" should be a block quote.  Ghost Version 5.71.2  Node.js Version 18.18.2  How did you install Ghost? Ubuntu Linux 20.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file,"Blockquotes are lost when creating posts with admin API and HTML format  Issue Summary In previous versions of Ghost (e.g. 5.68.0) it was possible to upload HTML posts containing blockquote tags with nested paragraphs. These tags were converted into a blockquote in the uploaded post. This seems no longer to be possible. Instead, the blockquote is just imported as a regular paragraph. It still seems to work, if no nested paragraphs are used.  Steps to Reproduce Upload a post to the endpoint `POST posts/?source=html` with the following body:  { posts = ( { featured = 0; html = ""<p>Normal Text</p>\n\n<blockquote><p>\nThis is a quote\n</p></blockquote>\n\n<p>Normal text</p>""; ""published_at"" = ""<null>""; status = draft; tags = ( ); title = """"; } ); }  Results in a post consisting of three paragraphs. Instead the Paragraph ""This is a quote"" should be a block quote.  Ghost Version 5.71.2  Node.js Version 18.18.2  How did you install Ghost? Ubuntu Linux 20.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file documentation-file other-file",no-bug,0.9
18949,Ghost,https://github.com/TryGhost/Ghost/issues/18949,Unintended behavior when entering post title using Japanese IME," Issue Summary In the Japanese (and possibly other languages) IME, enter key is pressed when converting a string, but the string is then duplicated and entered into the body of the article as well. It may be happening with IMEs in other languages. https://github.com/TryGhost/Ghost/assets/10049972/18bad31a-e71d-4e37-bb4e-7f9d7c3a6799  Steps to Reproduce 1. Enter a post title using Japanese IME 2. Press enter key to convert a string It is expected that the conversion will be done correctly and the cursor will be behind the converted string.  Ghost Version 5.72.2  Node.js Version 18.12.1  How did you install Ghost? \-  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file,"Unintended behavior when entering post title using Japanese IME  Issue Summary In the Japanese (and possibly other languages) IME, enter key is pressed when converting a string, but the string is then duplicated and entered into the body of the article as well. It may be happening with IMEs in other languages. https://github.com/TryGhost/Ghost/assets/10049972/18bad31a-e71d-4e37-bb4e-7f9d7c3a6799  Steps to Reproduce 1. Enter a post title using Japanese IME 2. Press enter key to convert a string It is expected that the conversion will be done correctly and the cursor will be behind the converted string.  Ghost Version 5.72.2  Node.js Version 18.12.1  How did you install Ghost? \-  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file",no-bug,0.9
15740,Ghost,https://github.com/TryGhost/Ghost/issues/15740,Cannot update membership tier descriptions, Issue Summary I can't seem to add/update the description for any membership tiers. Entering a description and then saving clears out whatever value was entered. The database also does not get the updated value either. https://user-images.githubusercontent.com/13506/199175848-c10bb422-68ff-4622-86c2-1b9ece1ae716.mov I've tested this with fresh installs of Ghost both locally and on a DO droplet where I host several other Ghost instances. This functionality appears to be working fine on another instance of Ghost running v5.11 but not on the latest version at the time of this report v5.22.1.  Steps to Reproduce 1. Install a new Ghost instance (v5.22.1) 2. Connect Ghost to Stripe account 3. Add a description to any membership tier 4. Description does not save and no error message is displayed  Ghost Version 5.22.1  Node.js Version 14.17.0  How did you install Ghost? Locally / Ubuntu 18.04  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output shell No output in error logs   Code of Conduct - [X] I agree to be friendly and polite to people in this repository,source-file | test-file | test-file | source-file | test-file | test-file | source-file | test-file,Cannot update membership tier descriptions  Issue Summary I can't seem to add/update the description for any membership tiers. Entering a description and then saving clears out whatever value was entered. The database also does not get the updated value either. https://user-images.githubusercontent.com/13506/199175848-c10bb422-68ff-4622-86c2-1b9ece1ae716.mov I've tested this with fresh installs of Ghost both locally and on a DO droplet where I host several other Ghost instances. This functionality appears to be working fine on another instance of Ghost running v5.11 but not on the latest version at the time of this report v5.22.1.  Steps to Reproduce 1. Install a new Ghost instance (v5.22.1) 2. Connect Ghost to Stripe account 3. Add a description to any membership tier 4. Description does not save and no error message is displayed  Ghost Version 5.22.1  Node.js Version 14.17.0  How did you install Ghost? Locally / Ubuntu 18.04  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output shell No output in error logs   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file test-file source-file test-file test-file source-file test-file,no-bug,0.8
20634,Ghost,https://github.com/TryGhost/Ghost/issues/20634,The RSS feed endpoint returns a wrong content type," Issue Summary When requesting an RSS feed from a ghost blog (e.g. https://activitypub.ghost.org/rss/), the returned content-type is `content-type: text/xml; charset=utf-8` (as you can see in [this file](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/rss/renderer.js)). This can result in the feed not being correctly displayed: |How it is displayed|How it should be displayed (with an Add-on for RSS feeds)| ||| |![grafik](https://github.com/user-attachments/assets/6bd50845-9533-4176-a428-64361f79c99d)|![grafik](https://github.com/user-attachments/assets/609aa980-bf8c-4dcd-9025-26789039980d)| As far as I can see, it should be `application/rss+xml`. (Sources: [[1]](https://datatracker.ietf.org/doc/id/draft-nottingham-rss-media-type-00), [[2]](https://stackoverflow.com/questions/595616/what-is-the-correct-mime-type-to-use-for-an-rss-feed)).  Steps to Reproduce 1. Open the RSS feed URL from any ghost blog (e.g. https://activitypub.ghost.org/rss/) 2. Open the developer tools from the browser, look into the network tab. 3. (Sometimes required:) Refresh the site 4. Click on the request of the main request. 5. See in the Response Headers: `content-type: text/xml; charset=utf-8`  Ghost Version 5.87.3  Node.js Version (I don't see that with docker?)  How did you install Ghost? Using a docker container on a debian 12 server.  Database type MySQL 8  Browser & OS version Firefox 128.0 (64-Bit) on Windows 11 Pro  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | test-file | test-file | source-file | test-file | test-file | test-file,"The RSS feed endpoint returns a wrong content type  Issue Summary When requesting an RSS feed from a ghost blog (e.g. https://activitypub.ghost.org/rss/), the returned content-type is `content-type: text/xml; charset=utf-8` (as you can see in [this file](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/rss/renderer.js)). This can result in the feed not being correctly displayed: |How it is displayed|How it should be displayed (with an Add-on for RSS feeds)|  |![grafik](https://github.com/user-attachments/assets/6bd50845-9533-4176-a428-64361f79c99d)|![grafik](https://github.com/user-attachments/assets/609aa980-bf8c-4dcd-9025-26789039980d)| As far as I can see, it should be `application/rss+xml`. (Sources: [[1]](https://datatracker.ietf.org/doc/id/draft-nottingham-rss-media-type-00), [[2]](https://stackoverflow.com/questions/595616/what-is-the-correct-mime-type-to-use-for-an-rss-feed)).  Steps to Reproduce 1. Open the RSS feed URL from any ghost blog (e.g. https://activitypub.ghost.org/rss/) 2. Open the developer tools from the browser, look into the network tab. 3. (Sometimes required:) Refresh the site 4. Click on the request of the main request. 5. See in the Response Headers: `content-type: text/xml; charset=utf-8`  Ghost Version 5.87.3  Node.js Version (I don't see that with docker?)  How did you install Ghost? Using a docker container on a debian 12 server.  Database type MySQL 8  Browser & OS version Firefox 128.0 (64-Bit) on Windows 11 Pro  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file test-file test-file source-file test-file test-file test-file",bug,0.9
15608,Ghost,https://github.com/TryGhost/Ghost/issues/15608,"new tag with new post, link to the new tag = 404"," Issue Summary 1. create a new post with content ; 2. add a new tag alongside the new post ; 3. the new tag will appear in the site, but the link to that tag is 404 ; 4. can only be fixed by restarting ghost.  Steps to Reproduce 1. create a new post with content ; 2. add a new tag alongside the new post ;  Ghost Version 5.18.0  Node.js Version v18.10.0  How did you install Ghost? self-hosted on ubuntu 22  Database type MySQL 8  Browser & OS version ubuntu 22.04  Relevant log / error output shell tested on both node v16.15.0 and v18.10.0 can only be fixed by restarting ghost.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file | config-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | documentation-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | test-file | test-file | documentation-file | documentation-file | source-file | documentation-file | test-file | test-file | documentation-file | documentation-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file | source-file | documentation-file | test-file | source-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file,"new tag with new post, link to the new tag = 404  Issue Summary 1. create a new post with content ; 2. add a new tag alongside the new post ; 3. the new tag will appear in the site, but the link to that tag is 404 ; 4. can only be fixed by restarting ghost.  Steps to Reproduce 1. create a new post with content ; 2. add a new tag alongside the new post ;  Ghost Version 5.18.0  Node.js Version v18.10.0  How did you install Ghost? self-hosted on ubuntu 22  Database type MySQL 8  Browser & OS version ubuntu 22.04  Relevant log / error output shell tested on both node v16.15.0 and v18.10.0 can only be fixed by restarting ghost.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file config-file documentation-file source-file other-file source-file source-file source-file other-file source-file source-file other-file source-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file other-file source-file source-file source-file source-file source-file source-file source-file other-file other-file other-file other-file other-file other-file other-file other-file source-file documentation-file other-file other-file other-file other-file other-file other-file other-file other-file other-file test-file test-file test-file documentation-file documentation-file source-file documentation-file test-file test-file documentation-file documentation-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file documentation-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file documentation-file source-file documentation-file test-file source-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file test-file source-file source-file documentation-file test-file test-file test-file test-file test-file test-file documentation-file source-file documentation-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file other-file",bug,0.85
17514,Ghost,https://github.com/TryGhost/Ghost/issues/17514,Make this site private - not working in Chrome and Opera," Issue Summary Change or delete the row 58: versions/5.54.4/core/frontend/apps/private-blogging/lib/middleware.js  return session({ name: 'ghost-private', maxAge: constants.ONE_MONTH_MS, signed: false, sameSite: 'lax' < row 58: instead of 'none' or delete row })(req, res, next);  Or you can delete the row 58 because **sameSite: 'Lax' is the default value.** You can't code 'secure' within an object - **secure: true** will not work. Works now in Chrome and Opera. See [https://web.dev/i18n/en/samesite-cookies-explained](https://web.dev/i18n/en/samesite-cookies-explained/#samesite=lax-by-default) ![x (1) Mark cross-site cookies as Secure to allow setting them in cross-site contexts](https://github.com/TryGhost/Ghost/assets/93246850/c3a11e60-8d16-45f2-8261-b889e074da71)  Steps to Reproduce See [https://forum.ghost.org/t/make-this-site-private-not-working/39938/1](https://forum.ghost.org/t/make-this-site-private-not-working/39938/1)  Ghost Version 5.54.4  Node.js Version v18.15.0  How did you install Ghost? local, macos  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Make this site private - not working in Chrome and Opera  Issue Summary Change or delete the row 58: versions/5.54.4/core/frontend/apps/private-blogging/lib/middleware.js  return session({ name: 'ghost-private', maxAge: constants.ONE_MONTH_MS, signed: false, sameSite: 'lax' < row 58: instead of 'none' or delete row })(req, res, next);  Or you can delete the row 58 because **sameSite: 'Lax' is the default value.** You can't code 'secure' within an object - **secure: true** will not work. Works now in Chrome and Opera. See [https://web.dev/i18n/en/samesite-cookies-explained](https://web.dev/i18n/en/samesite-cookies-explained/#samesite=lax-by-default) ![x (1) Mark cross-site cookies as Secure to allow setting them in cross-site contexts](https://github.com/TryGhost/Ghost/assets/93246850/c3a11e60-8d16-45f2-8261-b889e074da71)  Steps to Reproduce See [https://forum.ghost.org/t/make-this-site-private-not-working/39938/1](https://forum.ghost.org/t/make-this-site-private-not-working/39938/1)  Ghost Version 5.54.4  Node.js Version v18.15.0  How did you install Ghost? local, macos  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
14886,Ghost,https://github.com/TryGhost/Ghost/issues/14886,"The {{#is ""post""}} helper produces a result on the 'post' and 'page'"," Issue Summary The {{#is ""post""}} helper produces a result on the 'post' and 'page'. The result should be limited to the 'post' only.  Steps to Reproduce Paste this code to page.hbs:  {{#is ""post""}} This is post not page {{/is}}  Check the results on the 'page'.  Ghost Version 5.0.0  Node.js Version Ghost(Pro)  How did you install Ghost? Ghost(Pro)  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"The {{#is ""post""}} helper produces a result on the 'post' and 'page'  Issue Summary The {{#is ""post""}} helper produces a result on the 'post' and 'page'. The result should be limited to the 'post' only.  Steps to Reproduce Paste this code to page.hbs:  {{#is ""post""}} This is post not page {{/is}}  Check the results on the 'page'.  Ghost Version 5.0.0  Node.js Version Ghost(Pro)  How did you install Ghost? Ghost(Pro)  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
15507,Ghost,https://github.com/TryGhost/Ghost/issues/15507,Unsaved changes modal not shown in member newsletter subscriptions," Issue Summary When leaving the member details screen, the unsaved changes confirmation modal is not shown when there are unsaved changes to newsletter subscriptions.  Steps to Reproduce 1. Set up some newsletters 2. Open the details screen for a member 3. Toggle on/off a newsletter subscription 4. Navigate away from the member details screen 5. No unsaved changes modal is shown  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | config-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | documentation-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | test-file | test-file | documentation-file | documentation-file | source-file | documentation-file | test-file | test-file | documentation-file | documentation-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file | source-file | documentation-file | test-file | source-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Unsaved changes modal not shown in member newsletter subscriptions  Issue Summary When leaving the member details screen, the unsaved changes confirmation modal is not shown when there are unsaved changes to newsletter subscriptions.  Steps to Reproduce 1. Set up some newsletters 2. Open the details screen for a member 3. Toggle on/off a newsletter subscription 4. Navigate away from the member details screen 5. No unsaved changes modal is shown  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file config-file documentation-file source-file other-file source-file source-file source-file other-file source-file source-file other-file source-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file other-file source-file source-file source-file source-file source-file source-file source-file other-file other-file other-file other-file other-file other-file other-file other-file source-file documentation-file other-file other-file other-file other-file other-file other-file other-file other-file other-file test-file test-file test-file documentation-file documentation-file source-file documentation-file test-file test-file documentation-file documentation-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file documentation-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file documentation-file source-file documentation-file test-file source-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file test-file source-file source-file documentation-file test-file test-file test-file test-file test-file test-file documentation-file source-file documentation-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file other-file",no-bug,0.9
15267,Ghost,https://github.com/TryGhost/Ghost/issues/15267,Links with cyrillic characters are not being redirected," Issue Summary I added some redirects through `Ghost admin panel  Settings  Labs  Redirects`. But the redirects with Cyrillic characters are not working - it just shows the 404 page. Here's the content of a YAML file I uploaded:  301: /joloonii-surgaltuud/b-angilal/: /joloonii-angilal/#- /joloonii-surgaltuud/c-angilal/: /joloonii-angilal/#- /joloonii-surgaltuud/-/: /joloonii-angilal/#- /joloonii-surgaltuud/-: /joloonii-angilal/#-  The first two works fine, but not the last two (I assume it's because they contain Cyrillic characters like `, , `, etc)  Steps to Reproduce 1. Upload a `.yaml` file containing redirects with Cyrillic characters on `Ghost admin panel  Settings  Labs  Redirects` 2. Check if the redirect works  Ghost Version 5.9.4  Node.js Version v16.14.2  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | source-file | test-file,"Links with cyrillic characters are not being redirected  Issue Summary I added some redirects through `Ghost admin panel  Settings  Labs  Redirects`. But the redirects with Cyrillic characters are not working - it just shows the 404 page. Here's the content of a YAML file I uploaded:  301: /joloonii-surgaltuud/b-angilal/: /joloonii-angilal/#- /joloonii-surgaltuud/c-angilal/: /joloonii-angilal/#- /joloonii-surgaltuud/-/: /joloonii-angilal/#- /joloonii-surgaltuud/-: /joloonii-angilal/#-  The first two works fine, but not the last two (I assume it's because they contain Cyrillic characters like `, , `, etc)  Steps to Reproduce 1. Upload a `.yaml` file containing redirects with Cyrillic characters on `Ghost admin panel  Settings  Labs  Redirects` 2. Check if the redirect works  Ghost Version 5.9.4  Node.js Version v16.14.2  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file source-file test-file",no-bug,0.8
22312,Ghost,https://github.com/TryGhost/Ghost/issues/22312,SLOW_GET_HELPER renders bad time in the logs,"The get helper has the following code: js if (totalMs > threshold) { logging[logLevel](new errors.HelperWarning({ message: `{{#get}} helper took ${totalMs}ms to complete`, code: 'SLOW_GET_HELPER', errorDetails: { api: `${controllerName}.${action}`, apiOptions, returnedRows: returnedRowsCount } }), { time: totalMs }); }  This makes the time field to be the time used to query the database. When using this data in the logger, it's used as the logging time. For example:  2025-03-03T06:50:58.612491147Z [1970-01-01 00:00:00] WARN {{#get}} helper took 231ms to complete  Because the query took 213ms, the field time is parsed as a few milliseconds after the epoc time. _Originally posted by @gilmrjc in https://github.com/TryGhost/Ghost/issues/20427#issuecomment-2693444276_",source-file | source-file,"SLOW_GET_HELPER renders bad time in the logs The get helper has the following code: js if (totalMs > threshold) { logging[logLevel](new errors.HelperWarning({ message: `{{#get}} helper took ${totalMs}ms to complete`, code: 'SLOW_GET_HELPER', errorDetails: { api: `${controllerName}.${action}`, apiOptions, returnedRows: returnedRowsCount } }), { time: totalMs }); }  This makes the time field to be the time used to query the database. When using this data in the logger, it's used as the logging time. For example:  2025-03-03T06:50:58.612491147Z [1970-01-01 00:00:00] WARN {{#get}} helper took 231ms to complete  Because the query took 213ms, the field time is parsed as a few milliseconds after the epoc time. _Originally posted by @gilmrjc in https://github.com/TryGhost/Ghost/issues/20427#issuecomment-2693444276_ source-file source-file",no-bug,0.9
15725,Ghost,https://github.com/TryGhost/Ghost/issues/15725,Mailgun BATCH_SIZE with a fix value of 1000 is incompatible with new users," Issue Summary Hi, When you want to use Mailgun with the flex offer, they block your account to a maximum BATCH_SIZE to 10. This value is currently to defined to 1000 and cannot be overide with settings by the end user. in bulk-email-processor.js : ` module.exports = { BATCH_SIZE: MailgunClient.BATCH_SIZE, ` Could be : ` module.exports = { BATCH_SIZE: bulkEmailConfig?.mailgun?.batch_size, ` A new setting to allow the users to set a BATCH_SIZE to 10 could be great to allow Mailgun to evaluate the mail quality before to increase to 1000 the batch size. Thank-you !  Steps to Reproduce 1. Create a ghost instance. 2. Create a Mailgun account. 3. Add 11 members to the newsletter 4. Send a newsletter 5. Mailgun will not accept more that 10 members in the recipient.  Ghost Version v5.19.0  Node.js Version v16.17.0  How did you install Ghost? Ghost CLI + Ghost Update  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Mailgun BATCH_SIZE with a fix value of 1000 is incompatible with new users  Issue Summary Hi, When you want to use Mailgun with the flex offer, they block your account to a maximum BATCH_SIZE to 10. This value is currently to defined to 1000 and cannot be overide with settings by the end user. in bulk-email-processor.js : ` module.exports = { BATCH_SIZE: MailgunClient.BATCH_SIZE, ` Could be : ` module.exports = { BATCH_SIZE: bulkEmailConfig?.mailgun?.batch_size, ` A new setting to allow the users to set a BATCH_SIZE to 10 could be great to allow Mailgun to evaluate the mail quality before to increase to 1000 the batch size. Thank-you !  Steps to Reproduce 1. Create a ghost instance. 2. Create a Mailgun account. 3. Add 11 members to the newsletter 4. Send a newsletter 5. Mailgun will not accept more that 10 members in the recipient.  Ghost Version v5.19.0  Node.js Version v16.17.0  How did you install Ghost? Ghost CLI + Ghost Update  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
17777,Ghost,https://github.com/TryGhost/Ghost/issues/17777,"""@page.show_title_and_feature_image is not used"" is displayed as an error"," Issue Summary Hello!, hope you are doing well. On a large amount of themes we are receiving this kind of error (probably 70 - 80% of themes in the Ghost marketplace, will get this as well): ![image](https://github.com/TryGhost/Ghost/assets/5891905/58aacda6-4b77-41ca-933a-bd25aecc864a) Multiple customers are assuming the theme/platform do not work as expected, so we need to explain to every customer that is a beta feature and they can safely ignore it for the moment. After checking the info about this error: https://ghost.org/docs/themes/helpers/page/ this setting is only available when **""beta editor setting"" is ""ON""** from the Labs section, so this error shouldn't appear or at least should be displayed as a an ""information tooltip"" but not as an error. I think a quick solution would be to remove it as a ""critical error"", but a good alternative would be to insert a new option into **""package.json""** to mark the theme as compatible or not **(similar to config -> ""card_assets"": true)**, and finally evaluate if the syntax is correct on the page.hbs file. Other Ghost Authors as @fueko are getting similar issues on https://github.com/TryGhost/Ghost/issues/17745 that could be related. Thank you very much!  Steps to Reproduce Upload any theme that do not include: `{{#match @page.show_title_and_feature_image}} content {{/match}}`  Ghost Version 5.59.1  Node.js Version v18.16.1  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | documentation-file | test-file | other-file | documentation-file | other-file,"""@page.show_title_and_feature_image is not used"" is displayed as an error  Issue Summary Hello!, hope you are doing well. On a large amount of themes we are receiving this kind of error (probably 70 - 80% of themes in the Ghost marketplace, will get this as well): ![image](https://github.com/TryGhost/Ghost/assets/5891905/58aacda6-4b77-41ca-933a-bd25aecc864a) Multiple customers are assuming the theme/platform do not work as expected, so we need to explain to every customer that is a beta feature and they can safely ignore it for the moment. After checking the info about this error: https://ghost.org/docs/themes/helpers/page/ this setting is only available when **""beta editor setting"" is ""ON""** from the Labs section, so this error shouldn't appear or at least should be displayed as a an ""information tooltip"" but not as an error. I think a quick solution would be to remove it as a ""critical error"", but a good alternative would be to insert a new option into **""package.json""** to mark the theme as compatible or not **(similar to config -> ""card_assets"": true)**, and finally evaluate if the syntax is correct on the page.hbs file. Other Ghost Authors as @fueko are getting similar issues on https://github.com/TryGhost/Ghost/issues/17745 that could be related. Thank you very much!  Steps to Reproduce Upload any theme that do not include: `{{#match @page.show_title_and_feature_image}} content {{/match}}`  Ghost Version 5.59.1  Node.js Version v18.16.1  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file documentation-file test-file other-file documentation-file other-file",no-bug,0.9
18715,Ghost,https://github.com/TryGhost/Ghost/issues/18715,Release announcement-bar 1.1.7 version, Issue Summary Getting accessibility issue for announcement bar close button. The issue is already fixed in branch but the version still not released.  Steps to Reproduce Can be reproduced by lighthouse or pagespeed insights accessibility testing.  Ghost Version 5.69.0  Node.js Version v17  How did you install Ghost? Self Hosted on Ubuntu 18.04  Database type MySQL 5.7  Browser & OS version Chrome 117 on Windows  Relevant log / error output shell Buttons do not have an accessible name   Code of Conduct - [X] I agree to be friendly and polite to people in this repository,documentation-file | documentation-file,Release announcement-bar 1.1.7 version  Issue Summary Getting accessibility issue for announcement bar close button. The issue is already fixed in branch but the version still not released.  Steps to Reproduce Can be reproduced by lighthouse or pagespeed insights accessibility testing.  Ghost Version 5.69.0  Node.js Version v17  How did you install Ghost? Self Hosted on Ubuntu 18.04  Database type MySQL 5.7  Browser & OS version Chrome 117 on Windows  Relevant log / error output shell Buttons do not have an accessible name   Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file,no-bug,0.9
21439,Ghost,https://github.com/TryGhost/Ghost/issues/21439,Drop target for uploads (content and theme) is broken.," Issue Summary (Not a new issue - has been bugging me for months!) The 'drop target' for drag and dropping a theme or upload file doesn't work right on Windows 10, Chrome browser. Occurs on local installs AND on Ghost Pro. Image: Shows hovering over the 'drop area', but the cursor still shows 'copy', and if I drop it here, it'll download it (NOT upload it to Ghost). ![image](https://github.com/user-attachments/assets/e4837bf4-580d-4cf7-9366-fbd6f262f128) Image: The very edge of the drop area (marked in yellow) is actually droppable. /IF/ I can get my cursor over this sliver between the dotted and solid borders, dropping works. The big red x area is not. ![image](https://github.com/user-attachments/assets/2cf3ea75-b33a-40a8-ba43-f781f3a7362f) Chrome is up to date: Version 130.0.6723.70 (Official Build) (64-bit) **UPDATE:** See https://github.com/TryGhost/Ghost/pull/21687 for more discussion . I think this is not actually a problem with the drop area, but with re-rendering. (Holding the mouse still for a long period seems to stop the rerenders, and targeting the edge was probably causing me to do that? I think?)  Steps to Reproduce Use Chrome. (Possibly use Chrome on Windows - not sure.) Attempt to drag and drop a file into the drop area for theme upload or import upload. I expect the entire box to be a valid drop target.  Ghost Version 5.98 (and multiple versions before)  Node.js Version 18  How did you install Ghost? various, including on Ghost Pro  Database type MySQL 8  Browser & OS version Chrome Version 130.0.6723.70 (Official Build) (64-bit)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Drop target for uploads (content and theme) is broken.  Issue Summary (Not a new issue - has been bugging me for months!) The 'drop target' for drag and dropping a theme or upload file doesn't work right on Windows 10, Chrome browser. Occurs on local installs AND on Ghost Pro. Image: Shows hovering over the 'drop area', but the cursor still shows 'copy', and if I drop it here, it'll download it (NOT upload it to Ghost). ![image](https://github.com/user-attachments/assets/e4837bf4-580d-4cf7-9366-fbd6f262f128) Image: The very edge of the drop area (marked in yellow) is actually droppable. /IF/ I can get my cursor over this sliver between the dotted and solid borders, dropping works. The big red x area is not. ![image](https://github.com/user-attachments/assets/2cf3ea75-b33a-40a8-ba43-f781f3a7362f) Chrome is up to date: Version 130.0.6723.70 (Official Build) (64-bit) **UPDATE:** See https://github.com/TryGhost/Ghost/pull/21687 for more discussion . I think this is not actually a problem with the drop area, but with re-rendering. (Holding the mouse still for a long period seems to stop the rerenders, and targeting the edge was probably causing me to do that? I think?)  Steps to Reproduce Use Chrome. (Possibly use Chrome on Windows - not sure.) Attempt to drag and drop a file into the drop area for theme upload or import upload. I expect the entire box to be a valid drop target.  Ghost Version 5.98 (and multiple versions before)  Node.js Version 18  How did you install Ghost? various, including on Ghost Pro  Database type MySQL 8  Browser & OS version Chrome Version 130.0.6723.70 (Official Build) (64-bit)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.9
14888,Ghost,https://github.com/TryGhost/Ghost/issues/14888,redirects.yaml documentation link points to 404," Issue Summary The page that's linked from ghost/#/settings/labs for redirects (anchor text ""the docs"") is nonexistent (anymore probably). The url is https://ghost.org/tutorials/redirects-in-ghost/ and I also found that when searching on Google, so you better do a redirect to somewhere valid (probably https://ghost.org/tutorials/implementing-redirects) before Google starts de-ranking your 404 result :) Thanks for the awesome platform by the way  Steps to Reproduce 1. visit https://ghost.org/tutorials/implementing-redirects 2. see 404  Ghost Version 4.32  Node.js Version not sure but shouldn't matter  How did you install Ghost? dockerized  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"redirects.yaml documentation link points to 404  Issue Summary The page that's linked from ghost/#/settings/labs for redirects (anchor text ""the docs"") is nonexistent (anymore probably). The url is https://ghost.org/tutorials/redirects-in-ghost/ and I also found that when searching on Google, so you better do a redirect to somewhere valid (probably https://ghost.org/tutorials/implementing-redirects) before Google starts de-ranking your 404 result :) Thanks for the awesome platform by the way  Steps to Reproduce 1. visit https://ghost.org/tutorials/implementing-redirects 2. see 404  Ghost Version 4.32  Node.js Version not sure but shouldn't matter  How did you install Ghost? dockerized  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.95
15391,Ghost,https://github.com/TryGhost/Ghost/issues/15391,Editor Tags searching performance, Issue Summary The Tag system is just straight out laggy non-responsive. Afterwards it is impossible to update or save the post. Refer to the video for more info https://user-images.githubusercontent.com/10562127/189423443-491068e1-a1c6-4887-90fe-ccf6db8d82c7.mp4  Steps to Reproduce 1. Try to save a tag The tag searching function should be responsive and update the query accordingly  Ghost Version 5.14.0  Node.js Version 16.16.0  How did you install Ghost? Followed basic installation in https://ghost.org/docs/install/ubuntu/ with Ubuntu 22.04.1  Database type MySQL 8  Browser & OS version Windows 10 /w Google Chrome 105.0.5195.102 (Official Build) (64-bit)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,documentation-file | test-file | other-file,Editor Tags searching performance  Issue Summary The Tag system is just straight out laggy non-responsive. Afterwards it is impossible to update or save the post. Refer to the video for more info https://user-images.githubusercontent.com/10562127/189423443-491068e1-a1c6-4887-90fe-ccf6db8d82c7.mp4  Steps to Reproduce 1. Try to save a tag The tag searching function should be responsive and update the query accordingly  Ghost Version 5.14.0  Node.js Version 16.16.0  How did you install Ghost? Followed basic installation in https://ghost.org/docs/install/ubuntu/ with Ubuntu 22.04.1  Database type MySQL 8  Browser & OS version Windows 10 /w Google Chrome 105.0.5195.102 (Official Build) (64-bit)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file test-file other-file,no-bug,0.9
20771,Ghost,https://github.com/TryGhost/Ghost/issues/20771,Opening the recommendation popup only works with enabled subscription," Issue Summary Trying to open the recommendation pop up (https://example.org/#/portal/recommendations) - e.g. through the URL, or through the ""View all"" button on the homepage - doesn't do anything when `Subscription access` is disabled / set to ""nobody"".  Steps to Reproduce 1. Set the Subscription access to `Nobody` (https://example.org/ghost/#/settings/members) 2. Enable the `publication info sidebar` at https://example.org/ghost/#/settings/design/edit - in the Tab Homepage. 3. Recommend a site (https://example.org/ghost/#/settings/recommendations) 4. See the recommendation panel. (https://example.org) 5. Try to click on ""View all"".  Ghost Version 5.89.1  Node.js Version v18.20.4  How did you install Ghost? Via Docker Compose  Database type MySQL 8  Browser & OS version Firefox 129.0.1 (64-Bit) on Windows 11 Pro  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | test-file | source-file | source-file | source-file | test-file | test-file,"Opening the recommendation popup only works with enabled subscription  Issue Summary Trying to open the recommendation pop up (https://example.org/#/portal/recommendations) - e.g. through the URL, or through the ""View all"" button on the homepage - doesn't do anything when `Subscription access` is disabled / set to ""nobody"".  Steps to Reproduce 1. Set the Subscription access to `Nobody` (https://example.org/ghost/#/settings/members) 2. Enable the `publication info sidebar` at https://example.org/ghost/#/settings/design/edit - in the Tab Homepage. 3. Recommend a site (https://example.org/ghost/#/settings/recommendations) 4. See the recommendation panel. (https://example.org) 5. Try to click on ""View all"".  Ghost Version 5.89.1  Node.js Version v18.20.4  How did you install Ghost? Via Docker Compose  Database type MySQL 8  Browser & OS version Firefox 129.0.1 (64-Bit) on Windows 11 Pro  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file test-file source-file source-file source-file test-file test-file",no-bug,0.8
15537,Ghost,https://github.com/TryGhost/Ghost/issues/15537,Webhook test coverage,"Webhooks have been a part of Ghost since very first versions. This area has been constantly lagging behind with solid test coverage. Having tests would add confidence to webhooks stability. Snapshot tests would be a great source of example data webhooks deliver to external integrations. To improve this situation, Ghost has introduced a special purpose Webhooks snapshot tests. These are snapshot-based tests (similar to the[ end-to-end API tests](https://github.com/TryGhost/Ghost/tree/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-api/admin)) with one big difference - they test the outgoing request payload instead of API responses. To understand how end-to-end testing works at Ghost have a read through [this guide](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007). The concepts applied in end-to-end API tests are very similar to ones used in webhook tests. Here is an [example of a webhook test suite](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js) for for `post.published` and `post.added` events. The above suite covers two event's which Webhook events listen to. There are 29 total events Webhooks can respond to, 27 left to cover. We need help writing tests for them! Below are some pointers around what you could help us with. For the most part it's covering all of the webhook events with at least one ""happy path"" test. ## Steps to cover a webhook event listener with a test  1. Write a test First, find one webhook event listener to cover - search for an event that has no test coverage in the list of [all webhook event listeners](https://github.com/TryGhost/Ghost/blob/66f11d5e4548db3b3c4d9242e5e217863aac088b/ghost/core/core/server/services/webhooks/listen.js#L12-L45). <details> <summary>Copy of all events below for quick reference and  for the ones with at least one test:</summary> - [x] 'site.changed' (https://github.com/TryGhost/Ghost/pull/15595) - [x] 'post.added' (https://github.com/TryGhost/Ghost/commit/b536cf5d9c93dd3dde6dca05c82d6761384c2fb3) - [x] 'post.deleted' (https://github.com/TryGhost/Ghost/pull/15572) - [x] 'post.edited' (https://github.com/TryGhost/Ghost/pull/15625) - [x] 'post.published' (https://github.com/TryGhost/Ghost/commit/0f4aeaaa802738f06aed066ece39f9666f2ec1ce) - [x] 'post.published.edited' (https://github.com/TryGhost/Ghost/pull/15642) - [x] 'post.unpublished' (https://github.com/TryGhost/Ghost/pull/15628) - [x] 'post.scheduled' (https://github.com/TryGhost/Ghost/pull/15561) - [x] 'post.unscheduled' (https://github.com/TryGhost/Ghost/pull/15675) - [x] 'post.rescheduled' (https://github.com/TryGhost/Ghost/pull/15735) - [x] 'page.added' (https://github.com/TryGhost/Ghost/pull/15548) - [x] 'page.deleted' (https://github.com/TryGhost/Ghost/pull/15723) - [x] 'page.edited' (https://github.com/TryGhost/Ghost/pull/15627) - [x] 'page.published' (https://github.com/TryGhost/Ghost/pull/15724) - [x] 'page.published.edited' (https://github.com/TryGhost/Ghost/pull/15724) - [x] 'page.unpublished' (https://github.com/TryGhost/Ghost/pull/15613) - [x] 'page.scheduled' (https://github.com/TryGhost/Ghost/pull/15609) - [ ] 'page.unscheduled' (https://github.com/TryGhost/Ghost/pull/15722) - [x] 'page.rescheduled' (https://github.com/TryGhost/Ghost/pull/15736) - [x] 'tag.added' (https://github.com/TryGhost/Ghost/pull/15540) - [x] 'tag.edited' (https://github.com/TryGhost/Ghost/pull/15555) - [x] 'tag.deleted' (https://github.com/TryGhost/Ghost/pull/15553) - [x] 'member.added' (https://github.com/TryGhost/Ghost/pull/15554) - [x] 'member.deleted' (https://github.com/TryGhost/Ghost/pull/15570) - [x] 'member.edited' (https://github.com/TryGhost/Ghost/pull/15620) - [x] 'post.tag.attached' (https://github.com/TryGhost/Ghost/pull/15576) - [x] 'post.tag.detached' (https://github.com/TryGhost/Ghost/pull/15651) - [x] 'page.tag.attached' (https://github.com/TryGhost/Ghost/pull/15648) - [x] 'page.tag.detached' (https://github.com/TryGhost/Ghost/pull/15651) Before digging deep into work please double check if the list is up to date - check if there are any open or closed [Pull Requests open](https://github.com/TryGhost/Ghost/pulls) with the name of the event you are about to pick up. </details> Let's pick `site.changed` event to cover with _example_ a test. Webhook tests are located in `ghost/core/test/e2e-webhooks/{model_name}.test.js` (e.g.: [test/e2e-webhooks/posts.test.js](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js)). As there is no `site.test.js` suite in the [e2e-webhooks folder](https://github.com/TryGhost/Ghost/tree/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-webhooks) - create a `site.test.js` file. Note, for `post.rescheduled` event, there is a `posts.test.js` test suite already. In this case, we would add test cases to existing `posts.test.js` test suite. The convention is to group test suites by common model name - `{model_name}.test.js`. Write the test in the newly created file following concepts in [end-to-end testing guide](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007). For an easy start it's usually a good idea to copy a similar working test suite into your new file and tweak it. <details> <summary> Notes on Webhook test case structure </summary> Webhook tests follow a setup->action->assert structure used commonly when writing other types of tests, like unit tests: 1. **Setup** - [Create a webhook](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L69-L74) database entry 2. **Action** - Find under which conditions the event under test is triggered (usually a [result of API call(s)](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L76-L95)). This might take a little bit of research and experimentation. If you are completely lost and did not find the pathway after searching feel free to leave a comment here for more guidance. 3. **Assertion** - [Wait for](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L97) webhook events propagation and [write an assertion](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L99-L115) about the expected format of the snapshot. </details>  2. Run the test and record a snapshot Use the `yarn test:single` command inside `ghost/core` to run the test suite you've been working on:  yarn test:single test/e2e-webhooks/site.test.js  After the test run, there will be a snapshot file created with recorder webhook payload ([example](https://github.com/TryGhost/Ghost/blob/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-webhooks/__snapshots__/posts.test.js.snap#L137-L324)). Check the **[Snapshot Testing](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007)** section of the end-to-end testing guide for more information about the inner workings of snapshot-based tests.  3. Open a PR To make sure you've not broken anything & followed our code standard, run `yarn test:all`. You can also use `yarn lint` to check formatting issues. Commit and push the test suite code and the snapshot to your working branch. Open up a separate PR for each webhook even you cover. All done! we will try to review your contribution ASAP.  Please follow our contribution guidelines as closely as you can, particularly being sure to reference this issue in your commit. Test coverage commits should not use emojis as they are not user-facing changes. This issue is going to improve the ease of bug reproductions and will let all Ghost developers sleep better after modifying webhook-related code. This means a lot for the team and contributors! Thank you",test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file,"Webhook test coverage Webhooks have been a part of Ghost since very first versions. This area has been constantly lagging behind with solid test coverage. Having tests would add confidence to webhooks stability. Snapshot tests would be a great source of example data webhooks deliver to external integrations. To improve this situation, Ghost has introduced a special purpose Webhooks snapshot tests. These are snapshot-based tests (similar to the[ end-to-end API tests](https://github.com/TryGhost/Ghost/tree/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-api/admin)) with one big difference - they test the outgoing request payload instead of API responses. To understand how end-to-end testing works at Ghost have a read through [this guide](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007). The concepts applied in end-to-end API tests are very similar to ones used in webhook tests. Here is an [example of a webhook test suite](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js) for for `post.published` and `post.added` events. The above suite covers two event's which Webhook events listen to. There are 29 total events Webhooks can respond to, 27 left to cover. We need help writing tests for them! Below are some pointers around what you could help us with. For the most part it's covering all of the webhook events with at least one ""happy path"" test. ## Steps to cover a webhook event listener with a test  1. Write a test First, find one webhook event listener to cover - search for an event that has no test coverage in the list of [all webhook event listeners](https://github.com/TryGhost/Ghost/blob/66f11d5e4548db3b3c4d9242e5e217863aac088b/ghost/core/core/server/services/webhooks/listen.js#L12-L45). <details> <summary>Copy of all events below for quick reference and  for the ones with at least one test:</summary> - [x] 'site.changed' (https://github.com/TryGhost/Ghost/pull/15595) - [x] 'post.added' (https://github.com/TryGhost/Ghost/commit/b536cf5d9c93dd3dde6dca05c82d6761384c2fb3) - [x] 'post.deleted' (https://github.com/TryGhost/Ghost/pull/15572) - [x] 'post.edited' (https://github.com/TryGhost/Ghost/pull/15625) - [x] 'post.published' (https://github.com/TryGhost/Ghost/commit/0f4aeaaa802738f06aed066ece39f9666f2ec1ce) - [x] 'post.published.edited' (https://github.com/TryGhost/Ghost/pull/15642) - [x] 'post.unpublished' (https://github.com/TryGhost/Ghost/pull/15628) - [x] 'post.scheduled' (https://github.com/TryGhost/Ghost/pull/15561) - [x] 'post.unscheduled' (https://github.com/TryGhost/Ghost/pull/15675) - [x] 'post.rescheduled' (https://github.com/TryGhost/Ghost/pull/15735) - [x] 'page.added' (https://github.com/TryGhost/Ghost/pull/15548) - [x] 'page.deleted' (https://github.com/TryGhost/Ghost/pull/15723) - [x] 'page.edited' (https://github.com/TryGhost/Ghost/pull/15627) - [x] 'page.published' (https://github.com/TryGhost/Ghost/pull/15724) - [x] 'page.published.edited' (https://github.com/TryGhost/Ghost/pull/15724) - [x] 'page.unpublished' (https://github.com/TryGhost/Ghost/pull/15613) - [x] 'page.scheduled' (https://github.com/TryGhost/Ghost/pull/15609) - [ ] 'page.unscheduled' (https://github.com/TryGhost/Ghost/pull/15722) - [x] 'page.rescheduled' (https://github.com/TryGhost/Ghost/pull/15736) - [x] 'tag.added' (https://github.com/TryGhost/Ghost/pull/15540) - [x] 'tag.edited' (https://github.com/TryGhost/Ghost/pull/15555) - [x] 'tag.deleted' (https://github.com/TryGhost/Ghost/pull/15553) - [x] 'member.added' (https://github.com/TryGhost/Ghost/pull/15554) - [x] 'member.deleted' (https://github.com/TryGhost/Ghost/pull/15570) - [x] 'member.edited' (https://github.com/TryGhost/Ghost/pull/15620) - [x] 'post.tag.attached' (https://github.com/TryGhost/Ghost/pull/15576) - [x] 'post.tag.detached' (https://github.com/TryGhost/Ghost/pull/15651) - [x] 'page.tag.attached' (https://github.com/TryGhost/Ghost/pull/15648) - [x] 'page.tag.detached' (https://github.com/TryGhost/Ghost/pull/15651) Before digging deep into work please double check if the list is up to date - check if there are any open or closed [Pull Requests open](https://github.com/TryGhost/Ghost/pulls) with the name of the event you are about to pick up. </details> Let's pick `site.changed` event to cover with _example_ a test. Webhook tests are located in `ghost/core/test/e2e-webhooks/{model_name}.test.js` (e.g.: [test/e2e-webhooks/posts.test.js](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js)). As there is no `site.test.js` suite in the [e2e-webhooks folder](https://github.com/TryGhost/Ghost/tree/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-webhooks) - create a `site.test.js` file. Note, for `post.rescheduled` event, there is a `posts.test.js` test suite already. In this case, we would add test cases to existing `posts.test.js` test suite. The convention is to group test suites by common model name - `{model_name}.test.js`. Write the test in the newly created file following concepts in [end-to-end testing guide](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007). For an easy start it's usually a good idea to copy a similar working test suite into your new file and tweak it. <details> <summary> Notes on Webhook test case structure </summary> Webhook tests follow a setup->action->assert structure used commonly when writing other types of tests, like unit tests: 1. **Setup** - [Create a webhook](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L69-L74) database entry 2. **Action** - Find under which conditions the event under test is triggered (usually a [result of API call(s)](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L76-L95)). This might take a little bit of research and experimentation. If you are completely lost and did not find the pathway after searching feel free to leave a comment here for more guidance. 3. **Assertion** - [Wait for](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L97) webhook events propagation and [write an assertion](https://github.com/TryGhost/Ghost/blob/78c97d10a6f6a86c7b132534bcc71a6623688799/ghost/core/test/e2e-webhooks/posts.test.js#L99-L115) about the expected format of the snapshot. </details>  2. Run the test and record a snapshot Use the `yarn test:single` command inside `ghost/core` to run the test suite you've been working on:  yarn test:single test/e2e-webhooks/site.test.js  After the test run, there will be a snapshot file created with recorder webhook payload ([example](https://github.com/TryGhost/Ghost/blob/a6c76dadc3c369d61e9e7fb3e65c42570efb9273/ghost/core/test/e2e-webhooks/__snapshots__/posts.test.js.snap#L137-L324)). Check the **[Snapshot Testing](https://ghost.notion.site/End-to-end-Testing-6a2ef073b1754b18aff42e24a632a007)** section of the end-to-end testing guide for more information about the inner workings of snapshot-based tests.  3. Open a PR To make sure you've not broken anything & followed our code standard, run `yarn test:all`. You can also use `yarn lint` to check formatting issues. Commit and push the test suite code and the snapshot to your working branch. Open up a separate PR for each webhook even you cover. All done! we will try to review your contribution ASAP.  Please follow our contribution guidelines as closely as you can, particularly being sure to reference this issue in your commit. Test coverage commits should not use emojis as they are not user-facing changes. This issue is going to improve the ease of bug reproductions and will let all Ghost developers sleep better after modifying webhook-related code. This means a lot for the team and contributors! Thank you test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file",no-bug,0.95
20632,Ghost,https://github.com/TryGhost/Ghost/issues/20632,Dashboard shows posts instead of pages," Issue Summary When I enter the Dashboard and navigate to Pages, it shows no pages but posts instead. Also when I add new post it also shows up in pages. However if I create and publish a new page it becomes accessible with URL but still not in the list. I got mysql logs, and they show the request comes for posts when I navigate to pages:  select `posts`.*, (select count(distinct `members_click_events`.`member_id`) from `members_click_events` inner join `redirects` on `members_click_events`.`redirect_id` = `redirects`.`id` where posts.id = redirects.post_id) as `count__clicks` from `posts` where (`posts`.`status` = 'published' and `posts`.`type` = 'post');  (note the closing `and ``posts``.``type`` = 'post'`, I believe it should be `'page'`).  Steps to Reproduce 1. Open Dashboard 2. Go to Pages 3. Create and publish new page 4. Go back to Dashboard > Pages No pages are in the list  Ghost Version 5.88.0  Node.js Version 18.17.1  How did you install Ghost? Digital Ocean, Ubuntu 22.04.3 LTS  Database type MySQL 8  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | other-file | source-file | source-file | other-file | source-file | source-file | test-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | source-file | test-file,"Dashboard shows posts instead of pages  Issue Summary When I enter the Dashboard and navigate to Pages, it shows no pages but posts instead. Also when I add new post it also shows up in pages. However if I create and publish a new page it becomes accessible with URL but still not in the list. I got mysql logs, and they show the request comes for posts when I navigate to pages:  select `posts`.*, (select count(distinct `members_click_events`.`member_id`) from `members_click_events` inner join `redirects` on `members_click_events`.`redirect_id` = `redirects`.`id` where posts.id = redirects.post_id) as `count__clicks` from `posts` where (`posts`.`status` = 'published' and `posts`.`type` = 'post');  (note the closing `and ``posts``.``type`` = 'post'`, I believe it should be `'page'`).  Steps to Reproduce 1. Open Dashboard 2. Go to Pages 3. Create and publish new page 4. Go back to Dashboard > Pages No pages are in the list  Ghost Version 5.88.0  Node.js Version 18.17.1  How did you install Ghost? Digital Ocean, Ubuntu 22.04.3 LTS  Database type MySQL 8  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file other-file source-file source-file other-file source-file source-file test-file source-file source-file other-file source-file source-file other-file source-file source-file test-file",no-bug,0.8
16918,Ghost,https://github.com/TryGhost/Ghost/issues/16918,Type error within hash function during setting up," Issue Summary I was trying to setup the docker container with mysql both are latest, version 5.49 of Ghost. It threw an error that there was an invalid type argument for hashing function SHA1 within mysql2 package. I have defined the password as string but somehow it assumes it's a number therefore some type issue. I'm attaching the pic of the error ![image](https://github.com/TryGhost/Ghost/assets/35785259/983e7df5-3d97-4e5b-8579-222b1d18c8e2)  Steps to Reproduce 1. Get the latest mysql and ghost(5.49) 2. Try to run the compose file with:- version: '3.3' services: blog: image: ghost:latest restart: always volumes: - ~/data/content:/var/lib/ghost/content environment: # see https://ghost.org/docs/config/#configuration-options database__client: mysql database__connection__host: database database__connection__user: root database__connection__password: '1877' database__connection__database: ghost url: https://ghost.justarandomdev.com NODE_ENV: production database: image: mysql:latest restart: always environment: MYSQL_ROOT_PASSWORD: '1877' MYSQL_DATABASE: ghost MYSQL_USER: user MYSQL_PASSWORD: '1877'  Ghost Version 5.49.2  Node.js Version 16.20.0  How did you install Ghost? Using portainer with docker on linux  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell [2023-06-02 01:52:43] INFO Ghost is running in production blog_1 | [2023-06-02 01:52:43] INFO Your site is now available on https://ghost.justarandomdev.com/ blog_1 | [2023-06-02 01:52:43] INFO Ctrl+C to shut down blog_1 | [2023-06-02 01:52:43] INFO Ghost server started in 1.219s blog_1 | node:internal/crypto/hash:109 blog_1 | throw new ERR_INVALID_ARG_TYPE( blog_1 | ^ blog_1 | blog_1 | TypeError [ERR_INVALID_ARG_TYPE]: The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received type number (1877) blog_1 | at new NodeError (node:internal/errors:387:5) blog_1 | at Hash.update (node:internal/crypto/hash:109:11) blog_1 | at sha1 (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/auth_41.js:31:8) blog_1 | at Object.token [as calculateToken] (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/auth_41.js:57:18) blog_1 | at new HandshakeResponse (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/packets/handshake_response.js:28:26) blog_1 | at ClientHandshake.sendCredentials (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/client_handshake.js:71:31) blog_1 | at ClientHandshake.handshakeInit (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/client_handshake.js:162:12) blog_1 | at ClientHandshake.execute (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/command.js:45:22) blog_1 | at Connection.handlePacket (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:489:32) blog_1 | at PacketParser.onPacket (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:94:12) blog_1 | at PacketParser.executeStart (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/packet_parser.js:75:16) blog_1 | at Socket.<anonymous> (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:101:25) blog_1 | at Socket.emit (node:events:513:28) blog_1 | at addChunk (node:internal/streams/readable:315:12) blog_1 | at readableAddChunk (node:internal/streams/readable:289:9) blog_1 | at Socket.Readable.push (node:internal/streams/readable:228:10) { blog_1 | code: 'ERR_INVALID_ARG_TYPE' blog_1 | }   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Type error within hash function during setting up  Issue Summary I was trying to setup the docker container with mysql both are latest, version 5.49 of Ghost. It threw an error that there was an invalid type argument for hashing function SHA1 within mysql2 package. I have defined the password as string but somehow it assumes it's a number therefore some type issue. I'm attaching the pic of the error ![image](https://github.com/TryGhost/Ghost/assets/35785259/983e7df5-3d97-4e5b-8579-222b1d18c8e2)  Steps to Reproduce 1. Get the latest mysql and ghost(5.49) 2. Try to run the compose file with:- version: '3.3' services: blog: image: ghost:latest restart: always volumes: - ~/data/content:/var/lib/ghost/content environment: # see https://ghost.org/docs/config/#configuration-options database__client: mysql database__connection__host: database database__connection__user: root database__connection__password: '1877' database__connection__database: ghost url: https://ghost.justarandomdev.com NODE_ENV: production database: image: mysql:latest restart: always environment: MYSQL_ROOT_PASSWORD: '1877' MYSQL_DATABASE: ghost MYSQL_USER: user MYSQL_PASSWORD: '1877'  Ghost Version 5.49.2  Node.js Version 16.20.0  How did you install Ghost? Using portainer with docker on linux  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell [2023-06-02 01:52:43] INFO Ghost is running in production blog_1 | [2023-06-02 01:52:43] INFO Your site is now available on https://ghost.justarandomdev.com/ blog_1 | [2023-06-02 01:52:43] INFO Ctrl+C to shut down blog_1 | [2023-06-02 01:52:43] INFO Ghost server started in 1.219s blog_1 | node:internal/crypto/hash:109 blog_1 | throw new ERR_INVALID_ARG_TYPE( blog_1 | ^ blog_1 | blog_1 | TypeError [ERR_INVALID_ARG_TYPE]: The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received type number (1877) blog_1 | at new NodeError (node:internal/errors:387:5) blog_1 | at Hash.update (node:internal/crypto/hash:109:11) blog_1 | at sha1 (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/auth_41.js:31:8) blog_1 | at Object.token [as calculateToken] (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/auth_41.js:57:18) blog_1 | at new HandshakeResponse (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/packets/handshake_response.js:28:26) blog_1 | at ClientHandshake.sendCredentials (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/client_handshake.js:71:31) blog_1 | at ClientHandshake.handshakeInit (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/client_handshake.js:162:12) blog_1 | at ClientHandshake.execute (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/commands/command.js:45:22) blog_1 | at Connection.handlePacket (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:489:32) blog_1 | at PacketParser.onPacket (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:94:12) blog_1 | at PacketParser.executeStart (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/packet_parser.js:75:16) blog_1 | at Socket.<anonymous> (/var/lib/ghost/versions/5.49.2/node_modules/mysql2/lib/connection.js:101:25) blog_1 | at Socket.emit (node:events:513:28) blog_1 | at addChunk (node:internal/streams/readable:315:12) blog_1 | at readableAddChunk (node:internal/streams/readable:289:9) blog_1 | at Socket.Readable.push (node:internal/streams/readable:228:10) { blog_1 | code: 'ERR_INVALID_ARG_TYPE' blog_1 | }   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.9
18661,Ghost,https://github.com/TryGhost/Ghost/issues/18661,"The settings item for ""Code injection"" cannot be found using the search box"," Issue Summary In admin settings page, I tried to search for ""code"" or ""inject"" in the search box, but no result was found: ![Peek 2023-10-17 12-24](https://github.com/TryGhost/Ghost/assets/56583786/2a65c6c6-288d-4991-9c32-8701c96a1e33)  Steps to Reproduce 1. Go to `/ghost/#/settings` 2. Enter ""code"", ""inject"" or any other partial or full match of the ""Code injection"" item in the search box. 3. See that the search does not produce any result - even though the ""Code injection"" setting exists.  Ghost Version 5.69.2  Node.js Version v18.18.2  How did you install Ghost? From source (Ubuntu)  Database type MySQL 5.7  Browser & OS version Google Chrome 118.0.5993.70, Ubuntu  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file | other-file,"The settings item for ""Code injection"" cannot be found using the search box  Issue Summary In admin settings page, I tried to search for ""code"" or ""inject"" in the search box, but no result was found: ![Peek 2023-10-17 12-24](https://github.com/TryGhost/Ghost/assets/56583786/2a65c6c6-288d-4991-9c32-8701c96a1e33)  Steps to Reproduce 1. Go to `/ghost/#/settings` 2. Enter ""code"", ""inject"" or any other partial or full match of the ""Code injection"" item in the search box. 3. See that the search does not produce any result - even though the ""Code injection"" setting exists.  Ghost Version 5.69.2  Node.js Version v18.18.2  How did you install Ghost? From source (Ubuntu)  Database type MySQL 5.7  Browser & OS version Google Chrome 118.0.5993.70, Ubuntu  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file other-file",no-bug,0.9
15505,Ghost,https://github.com/TryGhost/Ghost/issues/15505,Starting Ghost with missing active theme breaks Design Settings screen," Issue Summary If the selected active theme does not exist in the filesystem the Design Settings screen errors and is unusable. The problem occurs because Ghost's API is returning an unexpected state - when requesting a list of themes none of them has the active: true flag. The preferred solution is to cater for this state in Admin somehow e.g. have a blank-slate state for the design settings screen indicating that no theme is active and point user to the change-theme screen  Steps to Reproduce 1. Activate a custom theme 2. Stop Ghost and delete or rename the custom theme directory 3. Start Ghost 4. Try to access the design settings screen ![image](https://user-images.githubusercontent.com/101513/193050450-fdd1b30c-f923-49a8-99a6-eedb5c5a96e6.png)  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell <img width=""630"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193117369-f2947482-993a-440e-91c8-6f5cc11a5c37.png"">   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file,"Starting Ghost with missing active theme breaks Design Settings screen  Issue Summary If the selected active theme does not exist in the filesystem the Design Settings screen errors and is unusable. The problem occurs because Ghost's API is returning an unexpected state - when requesting a list of themes none of them has the active: true flag. The preferred solution is to cater for this state in Admin somehow e.g. have a blank-slate state for the design settings screen indicating that no theme is active and point user to the change-theme screen  Steps to Reproduce 1. Activate a custom theme 2. Stop Ghost and delete or rename the custom theme directory 3. Start Ghost 4. Try to access the design settings screen ![image](https://user-images.githubusercontent.com/101513/193050450-fdd1b30c-f923-49a8-99a6-eedb5c5a96e6.png)  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell <img width=""630"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193117369-f2947482-993a-440e-91c8-6f5cc11a5c37.png"">   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file",bug,0.9
17937,Ghost,https://github.com/TryGhost/Ghost/issues/17937,StaffServiceEmails.js (eventually) sends new member notifications with wrong styles," Issue Summary Sometimes Ghost sends new member email notifications with incorrect styles, resulting in ugly blue backgrounds like this: ![Screenshot 2023-09-01 at 4 37 19 PM@0 5x](https://github.com/TryGhost/Ghost/assets/710176/6d714f87-d2b8-47ff-a839-feec46c6fc7f) The `StaffServiceEmails` class sends new member email notifications that initially show no problem. However, at some point, it appears the `styles` Handlebars partial (from ghost/**staff**-service/lib/email-templates/partials/styles.hbs) gets overwritten with the styles from ghost/**email**-service/lib/email-templates/partials/styles.hbs. My guess is that they both use the same Handlebars instance, but the partials for `StaffServiceEmails` are only registered once in its constructor.  Steps to Reproduce 1. Enable new member email notifications. 2. Wait for new sign-ups. 3. Initially the notification messages appear with correct styles. 4. Eventually the notification messages will show incorrect styles.  Ghost Version 5.59.4  Node.js Version 16.20.2  How did you install Ghost? Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | source-file | source-file,"StaffServiceEmails.js (eventually) sends new member notifications with wrong styles  Issue Summary Sometimes Ghost sends new member email notifications with incorrect styles, resulting in ugly blue backgrounds like this: ![Screenshot 2023-09-01 at 4 37 19 PM@0 5x](https://github.com/TryGhost/Ghost/assets/710176/6d714f87-d2b8-47ff-a839-feec46c6fc7f) The `StaffServiceEmails` class sends new member email notifications that initially show no problem. However, at some point, it appears the `styles` Handlebars partial (from ghost/**staff**-service/lib/email-templates/partials/styles.hbs) gets overwritten with the styles from ghost/**email**-service/lib/email-templates/partials/styles.hbs. My guess is that they both use the same Handlebars instance, but the partials for `StaffServiceEmails` are only registered once in its constructor.  Steps to Reproduce 1. Enable new member email notifications. 2. Wait for new sign-ups. 3. Initially the notification messages appear with correct styles. 4. Eventually the notification messages will show incorrect styles.  Ghost Version 5.59.4  Node.js Version 16.20.2  How did you install Ghost? Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file source-file",no-bug,0.9
14440,Ghost,https://github.com/TryGhost/Ghost/issues/14440,AMP pages have no alt text on images, Issue Summary This issue was reported by SEMRush. None of the /amp/ versions of the pages on our Ghost blog have alt text on the images. It looks like <amp-img> supports the alt tag. Is there a reason it doesn't get set in the amp pages? Thanks.  Steps to Reproduce 1. Create a post with image 2. look at /amp page for that post  Ghost Version 4  Node.js Version unknown  How did you install Ghost? Hosted by mymidnight  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,other-file | other-file,AMP pages have no alt text on images  Issue Summary This issue was reported by SEMRush. None of the /amp/ versions of the pages on our Ghost blog have alt text on the images. It looks like <amp-img> supports the alt tag. Is there a reason it doesn't get set in the amp pages? Thanks.  Steps to Reproduce 1. Create a post with image 2. look at /amp page for that post  Ghost Version 4  Node.js Version unknown  How did you install Ghost? Hosted by mymidnight  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file,no-bug,0.9
16131,Ghost,https://github.com/TryGhost/Ghost/issues/16131,"Ghost Newsletter email includes ALL text when a paid-members newsletter is sent to free members, in plaintext only"," Issue Summary When an email is sent to all members with the access set to 'paid members only', the expected behavior is that free members would see only the preview text, followed by a CTA to subscribe. That's exactly what happens for HTML email. However, plain text email reveals the FULL text. See images here: https://cathy.sarisky.link/newsletters-public-previews-and-more/ (post is not finished, but I think the images are revealing!)  Steps to Reproduce 1- Create a post, add a public preview, put text above and below it. Set it to paid members only. 2. Email the newsletter to both free and paid members. Check the PLAIN TEXT of what free users receive. (In Gmail, 'show original'.)  Ghost Version 5.30.0  Node.js Version Ghost Pro.  How did you install Ghost? Ghost Pro.  Database type MySQL 8  Browser & OS version Ghost Pro / tested with a Gmail and Outlook addresses  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Ghost Newsletter email includes ALL text when a paid-members newsletter is sent to free members, in plaintext only  Issue Summary When an email is sent to all members with the access set to 'paid members only', the expected behavior is that free members would see only the preview text, followed by a CTA to subscribe. That's exactly what happens for HTML email. However, plain text email reveals the FULL text. See images here: https://cathy.sarisky.link/newsletters-public-previews-and-more/ (post is not finished, but I think the images are revealing!)  Steps to Reproduce 1- Create a post, add a public preview, put text above and below it. Set it to paid members only. 2. Email the newsletter to both free and paid members. Check the PLAIN TEXT of what free users receive. (In Gmail, 'show original'.)  Ghost Version 5.30.0  Node.js Version Ghost Pro.  How did you install Ghost? Ghost Pro.  Database type MySQL 8  Browser & OS version Ghost Pro / tested with a Gmail and Outlook addresses  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.9
18690,Ghost,https://github.com/TryGhost/Ghost/issues/18690,"Published post actions wrap over ""add feature image"""," Issue Summary I experienced this issue on an old Android phone - so kind of an edge case - and I was able to reproduce it easily in the device view of the Chrome dev tools. The problem is: when editing a published post on mobile, if there is not enough space in the header, the 2 Update/Unpublish action buttons at the top wrap to a second line, due to the `flex-wrap` attribute of their parent, and cover the ""Add feature image"" button, making it unusable: ![Peek 2023-10-18 15-31](https://github.com/TryGhost/Ghost/assets/56583786/64eac872-7ee8-43a4-b99d-8d11fa235c30) I guess this might also be the reason why, for a draft post, `display: none` is applied to the ""Preview"" button when screen width is less than or equal to 500px. I don't know if a similar solution would be good in this case, though, as they might both be important, so we might not want to hide either of them. However, being able to add the feature image to a published post is important too, so hopefully a reasonable solution can be found - or maybe none at all, if it's indeed too much of an edge case.  Steps to Reproduce 1. Open Chrome dev tools, toggle device mode. 2. Select ""Dimensions: Responsive"" to dynamically resize the device width. 3. Lower the width until you see the problem: the 2 action buttons wrap to a second line and cover the upper part of the editor, where the ""Add feature image"" button is placed.  Ghost Version 5.69.3  Node.js Version v18.18.2  How did you install Ghost? From source (Ubuntu)  Database type MySQL 5.7  Browser & OS version Google Chrome 118.0.5993.70, Ubuntu  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | test-file,"Published post actions wrap over ""add feature image""  Issue Summary I experienced this issue on an old Android phone - so kind of an edge case - and I was able to reproduce it easily in the device view of the Chrome dev tools. The problem is: when editing a published post on mobile, if there is not enough space in the header, the 2 Update/Unpublish action buttons at the top wrap to a second line, due to the `flex-wrap` attribute of their parent, and cover the ""Add feature image"" button, making it unusable: ![Peek 2023-10-18 15-31](https://github.com/TryGhost/Ghost/assets/56583786/64eac872-7ee8-43a4-b99d-8d11fa235c30) I guess this might also be the reason why, for a draft post, `display: none` is applied to the ""Preview"" button when screen width is less than or equal to 500px. I don't know if a similar solution would be good in this case, though, as they might both be important, so we might not want to hide either of them. However, being able to add the feature image to a published post is important too, so hopefully a reasonable solution can be found - or maybe none at all, if it's indeed too much of an edge case.  Steps to Reproduce 1. Open Chrome dev tools, toggle device mode. 2. Select ""Dimensions: Responsive"" to dynamically resize the device width. 3. Lower the width until you see the problem: the 2 action buttons wrap to a second line and cover the upper part of the editor, where the ""Add feature image"" button is placed.  Ghost Version 5.69.3  Node.js Version v18.18.2  How did you install Ghost? From source (Ubuntu)  Database type MySQL 5.7  Browser & OS version Google Chrome 118.0.5993.70, Ubuntu  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file other-file other-file other-file other-file other-file other-file other-file test-file test-file",no-bug,0.95
16825,Ghost,https://github.com/TryGhost/Ghost/issues/16825,Mobile keyboard doesn't appear in the same time with the search modal," Issue Summary When you use the default search on the mobile device, the keyboard doesn't appear in the same time when appears search input. Only after click on the search input the keyboard appears. <img src=""https://github.com/TryGhost/Ghost/assets/42737958/4a4a1acf-57cb-4d00-8d56-2a3ea895344d.png"" width=40% height=40%> <img src=""https://github.com/TryGhost/Ghost/assets/42737958/4d6588b9-55ba-4386-9d23-afa17f486b7d.png"" width=40% height=40%>  Steps to Reproduce 1. Click on the search button with data-ghost-search 2. The search modal with the input appears 3. Click on the input 4. The keyboard appears  Ghost Version 5.40.1  Node.js Version 18.16.0  How did you install Ghost? Ubuntu  Database type MySQL 8  Browser & OS version Chrome 113.0.5672.76 & Android 12  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Mobile keyboard doesn't appear in the same time with the search modal  Issue Summary When you use the default search on the mobile device, the keyboard doesn't appear in the same time when appears search input. Only after click on the search input the keyboard appears. <img src=""https://github.com/TryGhost/Ghost/assets/42737958/4a4a1acf-57cb-4d00-8d56-2a3ea895344d.png"" width=40% height=40%> <img src=""https://github.com/TryGhost/Ghost/assets/42737958/4d6588b9-55ba-4386-9d23-afa17f486b7d.png"" width=40% height=40%>  Steps to Reproduce 1. Click on the search button with data-ghost-search 2. The search modal with the input appears 3. Click on the input 4. The keyboard appears  Ghost Version 5.40.1  Node.js Version 18.16.0  How did you install Ghost? Ubuntu  Database type MySQL 8  Browser & OS version Chrome 113.0.5672.76 & Android 12  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.95
17076,Ghost,https://github.com/TryGhost/Ghost/issues/17076,Post reverts to draft after some time if left on the publish page," Issue Summary Publishing a post and then leaving it for some time (30 minutes to an hour), it will revert to a draft even after it has been published. This does not happen if you navigate back to the main posts page.  Steps to Reproduce 1. Create a post using the new ghost editor 2. Publish the post by clicking ""Publish"" 3. Confirm that you want to publish the post 4. Stay on the page that tells you that it is published. 5. Go do something else for 30 or so minutes - you must keep the tab open - you can visit other sites or whatnot 6. Now go back to the main post's page and you will see that it has reverted to a ""draft""  Ghost Version Latest  Node.js Version v16.20.0  How did you install Ghost? Standard production install - Debian 11, Mariadb, Nginx  Database type Other  Browser & OS version Firefox (Fedora) v114.0  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Post reverts to draft after some time if left on the publish page  Issue Summary Publishing a post and then leaving it for some time (30 minutes to an hour), it will revert to a draft even after it has been published. This does not happen if you navigate back to the main posts page.  Steps to Reproduce 1. Create a post using the new ghost editor 2. Publish the post by clicking ""Publish"" 3. Confirm that you want to publish the post 4. Stay on the page that tells you that it is published. 5. Go do something else for 30 or so minutes - you must keep the tab open - you can visit other sites or whatnot 6. Now go back to the main post's page and you will see that it has reverted to a ""draft""  Ghost Version Latest  Node.js Version v16.20.0  How did you install Ghost? Standard production install - Debian 11, Mariadb, Nginx  Database type Other  Browser & OS version Firefox (Fedora) v114.0  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
19797,Ghost,https://github.com/TryGhost/Ghost/issues/19797,"Integrations - FirstPromoter always showing as ""active"""," Issue Summary Hello, I found a bug in the integrations component that seems to lead to a particular integration called ""FirstPromoter"" to always be displayed as `active`, even when it is not.  Steps to Reproduce - Go to the settings page: `yourblog.com/ghost/#/settings` - Scroll down to the Integrations panel - Note that the FirstPromoter is shown as active <img width=""698"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/4874089/d85b7715-993c-4d04-8ee7-9283b2dbd06f""> <img width=""854"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/4874089/09415950-86e6-428b-9161-76da90190c3b"">  Ghost Version 5.79.4  Node.js Version 18.19.1  How did you install Ghost? Docker image ghost:5.79.4  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | test-file | other-file | test-file,"Integrations - FirstPromoter always showing as ""active""  Issue Summary Hello, I found a bug in the integrations component that seems to lead to a particular integration called ""FirstPromoter"" to always be displayed as `active`, even when it is not.  Steps to Reproduce - Go to the settings page: `yourblog.com/ghost/#/settings` - Scroll down to the Integrations panel - Note that the FirstPromoter is shown as active <img width=""698"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/4874089/d85b7715-993c-4d04-8ee7-9283b2dbd06f""> <img width=""854"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/4874089/09415950-86e6-428b-9161-76da90190c3b"">  Ghost Version 5.79.4  Node.js Version 18.19.1  How did you install Ghost? Docker image ghost:5.79.4  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file test-file other-file test-file",no-bug,0.9
15007,Ghost,https://github.com/TryGhost/Ghost/issues/15007,Cannot get reading time from API via ?fields param," Issue Summary When making a request to the Content API for posts and including `reading_time` as a field, it is not returned.  Steps to Reproduce Request the demo site with `reading_time`: https://demo.ghost.io/ghost/api/canary/content/posts/?key=22444f78447824223cefc48062&fields=title,url,reading_time Note that it does work if you include the `html` field, which reading time is calculated based on. https://demo.ghost.io/ghost/api/canary/content/posts/?key=22444f78447824223cefc48062&fields=title,url,reading_time,html  Ghost Version 5.2  Node.js Version 14  How did you install Ghost? ghost cli  Database type MySQL 8  Browser & OS version N/a  Relevant log / error output shell n/a   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | test-file | source-file | source-file | test-file | test-file,"Cannot get reading time from API via ?fields param  Issue Summary When making a request to the Content API for posts and including `reading_time` as a field, it is not returned.  Steps to Reproduce Request the demo site with `reading_time`: https://demo.ghost.io/ghost/api/canary/content/posts/?key=22444f78447824223cefc48062&fields=title,url,reading_time Note that it does work if you include the `html` field, which reading time is calculated based on. https://demo.ghost.io/ghost/api/canary/content/posts/?key=22444f78447824223cefc48062&fields=title,url,reading_time,html  Ghost Version 5.2  Node.js Version 14  How did you install Ghost? ghost cli  Database type MySQL 8  Browser & OS version N/a  Relevant log / error output shell n/a   Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file test-file source-file source-file test-file test-file",bug,0.95
15814,Ghost,https://github.com/TryGhost/Ghost/issues/15814,No tier when importing on csv files, Issue Summary There is no selector for tiers when importing csv previously exported by Ghost. https://forum.ghost.org/t/select-complementary-tier-when-importing-members/26659  Steps to Reproduce 1. Export some user with tier. 2. Import the same file previously exported.  Ghost Version 5.22.4  Node.js Version 16.18.0  How did you install Ghost? Debian Buster  Database type MySQL 8  Browser & OS version Firefox on Debian  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file,No tier when importing on csv files  Issue Summary There is no selector for tiers when importing csv previously exported by Ghost. https://forum.ghost.org/t/select-complementary-tier-when-importing-members/26659  Steps to Reproduce 1. Export some user with tier. 2. Import the same file previously exported.  Ghost Version 5.22.4  Node.js Version 16.18.0  How did you install Ghost? Debian Buster  Database type MySQL 8  Browser & OS version Firefox on Debian  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file source-file other-file source-file other-file source-file other-file source-file,no-bug,0.8
18630,Ghost,https://github.com/TryGhost/Ghost/issues/18630,Link to get Mailgun API key within Ghost setting is wrong, Issue Summary The link within Ghost settings to the Mailgun API page as shown here is currently wrong and needs updating ![Screenshot from 2023-10-15 01-38-23](https://github.com/TryGhost/Ghost/assets/2113743/fa777072-ce9f-466c-b19d-c43a249e9036) It currently links to `https://app.mailgun.com/app/account/security/api_keys` but the correct link is `https://app.mailgun.com/settings/api_security`  Steps to Reproduce 1. Go to `/ghost/#/settings/mailgun` 2. Click edit 3. Click the `here` link shown here ![Screenshot from 2023-10-15 01-38-23](https://github.com/TryGhost/Ghost/assets/2113743/fa777072-ce9f-466c-b19d-c43a249e9036) 4. Get a 404  Ghost Version 5.69.1  Node.js Version 18.16.0  How did you install Ghost? I use Cloudron. It's on Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,other-file | other-file,Link to get Mailgun API key within Ghost setting is wrong  Issue Summary The link within Ghost settings to the Mailgun API page as shown here is currently wrong and needs updating ![Screenshot from 2023-10-15 01-38-23](https://github.com/TryGhost/Ghost/assets/2113743/fa777072-ce9f-466c-b19d-c43a249e9036) It currently links to `https://app.mailgun.com/app/account/security/api_keys` but the correct link is `https://app.mailgun.com/settings/api_security`  Steps to Reproduce 1. Go to `/ghost/#/settings/mailgun` 2. Click edit 3. Click the `here` link shown here ![Screenshot from 2023-10-15 01-38-23](https://github.com/TryGhost/Ghost/assets/2113743/fa777072-ce9f-466c-b19d-c43a249e9036) 4. Get a 404  Ghost Version 5.69.1  Node.js Version 18.16.0  How did you install Ghost? I use Cloudron. It's on Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file,no-bug,0.9
14415,Ghost,https://github.com/TryGhost/Ghost/issues/14415,Unable to Install Theme," Issue Summary When I go to Change Theme and preview a free theme, the page looks distorted (like the top of the page is cut off) and the button to install the theme is missing. Screenshot attached. ![ghost](https://user-images.githubusercontent.com/3589642/161410397-9ae55da1-679c-443c-910c-80fd10aefd6d.png)  Steps to Reproduce 1. Go to settings 2. Click on Design 3. Click on Change Theme 4. Select any free theme, such as Journal 5. You see distorted preview page that's missing the button to install the theme.  Ghost Version 4.42.0  Node.js Version 16.14.2  How did you install Ghost? Ubuntu 20.04LTS  Database type MySQL 8  Browser & OS version Chrome 99.0.4844.84 on Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file,"Unable to Install Theme  Issue Summary When I go to Change Theme and preview a free theme, the page looks distorted (like the top of the page is cut off) and the button to install the theme is missing. Screenshot attached. ![ghost](https://user-images.githubusercontent.com/3589642/161410397-9ae55da1-679c-443c-910c-80fd10aefd6d.png)  Steps to Reproduce 1. Go to settings 2. Click on Design 3. Click on Change Theme 4. Select any free theme, such as Journal 5. You see distorted preview page that's missing the button to install the theme.  Ghost Version 4.42.0  Node.js Version 16.14.2  How did you install Ghost? Ubuntu 20.04LTS  Database type MySQL 8  Browser & OS version Chrome 99.0.4844.84 on Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file",no-bug,0.9
15104,Ghost,https://github.com/TryGhost/Ghost/issues/15104,Confusing redirection to /signin/ and /signup/ after clicking on the magic link," Issue Summary The idea of the change introduced in version 5.4.0 => https://github.com/TryGhost/Ghost/commit/e60806de45ddaff66c13e5806afd21ea6425c503 is very useful for Portal, but in certain situations it creates confusion among users. If someone signs in or registers from a custom /signup/ or /signin/ page, after clicking on the magic link, they end up on the /signup/ and /signin/ page again, which is very confusing for many people - they often re-login. Can the new redirects be restricted to the Portal only? The best solution would be for custom forms to be excluded from the new auto redirect option. Usually they are only available on /signin/ and /signup/. Many sites also use the option to collect email addresses to subscribe to a newsletter in which case it is also confusing to return to the previous page.  Steps to Reproduce Log in through the custom form, when you click on the magic link you will return to the login page.  Ghost Version 5.5.0  Node.js Version v16.13.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"Confusing redirection to /signin/ and /signup/ after clicking on the magic link  Issue Summary The idea of the change introduced in version 5.4.0 => https://github.com/TryGhost/Ghost/commit/e60806de45ddaff66c13e5806afd21ea6425c503 is very useful for Portal, but in certain situations it creates confusion among users. If someone signs in or registers from a custom /signup/ or /signin/ page, after clicking on the magic link, they end up on the /signup/ and /signin/ page again, which is very confusing for many people - they often re-login. Can the new redirects be restricted to the Portal only? The best solution would be for custom forms to be excluded from the new auto redirect option. Usually they are only available on /signin/ and /signup/. Many sites also use the option to collect email addresses to subscribe to a newsletter in which case it is also confusing to return to the previous page.  Steps to Reproduce Log in through the custom form, when you click on the magic link you will return to the login page.  Ghost Version 5.5.0  Node.js Version v16.13.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.9
16625,Ghost,https://github.com/TryGhost/Ghost/issues/16625,Portal signup terms dont show when redeeming an offer," Issue Summary The new Portal signup terms option is fantastic, however the terms do not show up when the user is redeeming an offer.  Steps to Reproduce 1. Add a notice to the Portal settings, and require agreement. 2. Create an offer and copy the shareable link. 3. Open the link in a fresh browser session. The signup modal appears showing the offer, but the notice requiring agreement does not appear as I would have expected. The notice does appear as expected when signing up normally, without redeeming the offer.  Ghost Version 5.43.0  Node.js Version 16.19.1  How did you install Ghost? Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file,"Portal signup terms dont show when redeeming an offer  Issue Summary The new Portal signup terms option is fantastic, however the terms do not show up when the user is redeeming an offer.  Steps to Reproduce 1. Add a notice to the Portal settings, and require agreement. 2. Create an offer and copy the shareable link. 3. Open the link in a fresh browser session. The signup modal appears showing the offer, but the notice requiring agreement does not appear as I would have expected. The notice does appear as expected when signing up normally, without redeeming the offer.  Ghost Version 5.43.0  Node.js Version 16.19.1  How did you install Ghost? Ubuntu 22.04  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file",no-bug,0.9
22023,Ghost,https://github.com/TryGhost/Ghost/issues/22023,API has different max length for feature_image_alt than editor. API 190 / Editor 125," Issue Summary Updating feature_image_alt over admin API allows 190 characters. The Editor will only allow 125 A feature_image_alt up to 190 characters is accepted when updating a post at `/admin/posts/{{id}}` When editing the same posts and saving, the error ""Update failed: Feature image alt text cannot be longer than 125 characters."" is displayed. See screenshot. <img width=""814"" alt=""Image"" src=""https://github.com/user-attachments/assets/1e0b6091-403b-4c80-bf82-e0335b370b0e"" />  Steps to Reproduce 1. Update a post over API `/admin/posts/{{id}}` with string longer than 125 characters, ex { ""feature_image_alt"" : ""The image shows a wet, pink-lit city street with a car in the background and a person in a coat standing in the foreground."" } 2. Open the posts in Editor, attempt to save. Expecting Editor & admin API to have the same max length, 190 characters  Ghost Version 5.106.1-0-ga963b514+moya  Node.js Version N/A  How did you install Ghost? GhostPro  Database type MySQL 5.7  Browser & OS version N/A  Relevant log / error output shell Update failed: Feature image alt text cannot be longer than 125 characters.   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",source-file | source-file,"API has different max length for feature_image_alt than editor. API 190 / Editor 125  Issue Summary Updating feature_image_alt over admin API allows 190 characters. The Editor will only allow 125 A feature_image_alt up to 190 characters is accepted when updating a post at `/admin/posts/{{id}}` When editing the same posts and saving, the error ""Update failed: Feature image alt text cannot be longer than 125 characters."" is displayed. See screenshot. <img width=""814"" alt=""Image"" src=""https://github.com/user-attachments/assets/1e0b6091-403b-4c80-bf82-e0335b370b0e"" />  Steps to Reproduce 1. Update a post over API `/admin/posts/{{id}}` with string longer than 125 characters, ex { ""feature_image_alt"" : ""The image shows a wet, pink-lit city street with a car in the background and a person in a coat standing in the foreground."" } 2. Open the posts in Editor, attempt to save. Expecting Editor & admin API to have the same max length, 190 characters  Ghost Version 5.106.1-0-ga963b514+moya  Node.js Version N/A  How did you install Ghost? GhostPro  Database type MySQL 5.7  Browser & OS version N/A  Relevant log / error output shell Update failed: Feature image alt text cannot be longer than 125 characters.   Code of Conduct - [x] I agree to be friendly and polite to people in this repository source-file source-file",bug,0.95
16988,Ghost,https://github.com/TryGhost/Ghost/issues/16988,Admin panel filters for posts don't display posts for tiers.," Issue Summary An issue in two parts: 1) A bug. If a post is set for specific tiers access, the admin panel does not show it when any of the available dropdown options that should apply (members only, paid members only) are selected. The post only shows up when 'all access' is selected. 2) Perhaps a feature request. The Ghost admin panel doesn't have a dropdown to allow me to see posts by specific tiers. That'd be a logical thing to include. ![image](https://github.com/TryGhost/Ghost/assets/42299862/35cd8f26-40dd-42b5-a2a4-94e27851f3f1)  Steps to Reproduce Create a paid tier Assign some posts to it. (Restrict access to 'specific tier') Navigate to the posts page of the admin portal. Select paid members only or members only. The tier-restricted posts do not appear. I would expect tier-restricted posts to appear with these filters applied. I think the expected UI here would also include specific tiers as an option in that dropdown.  Ghost Version 5.50  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version Chrome, Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Admin panel filters for posts don't display posts for tiers.  Issue Summary An issue in two parts: 1) A bug. If a post is set for specific tiers access, the admin panel does not show it when any of the available dropdown options that should apply (members only, paid members only) are selected. The post only shows up when 'all access' is selected. 2) Perhaps a feature request. The Ghost admin panel doesn't have a dropdown to allow me to see posts by specific tiers. That'd be a logical thing to include. ![image](https://github.com/TryGhost/Ghost/assets/42299862/35cd8f26-40dd-42b5-a2a4-94e27851f3f1)  Steps to Reproduce Create a paid tier Assign some posts to it. (Restrict access to 'specific tier') Navigate to the posts page of the admin portal. Select paid members only or members only. The tier-restricted posts do not appear. I would expect tier-restricted posts to appear with these filters applied. I think the expected UI here would also include specific tiers as an option in that dropdown.  Ghost Version 5.50  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version Chrome, Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.8
20065,Ghost,https://github.com/TryGhost/Ghost/issues/20065,Outdated version of string-width is causing the Docker image entrypoint loading to fail.," Issue Summary The update to fix arm32 architecture (https://github.com/TryGhost/Ghost/commit/c2485af853f7b3b86f7f141b8496439cdc4881b4) introduce a regression in the way the Ghost package is launched. When running `node index.js` there is a module resolution error similar to this issue https://github.com/nrwl/nx/issues/19249. I managed to solve the issue locally by adding `""string-width"": ""4.2.3""` to the `resolutions` section. Here is the Docker test showing the error: https://github.com/docker-library/ghost/actions/runs/8756974313/job/24034646549 I would like to contribute this fix but I am not sure which `package.json` to use because the packaged one seems to be generated from the source ones.  Steps to Reproduce There is probably an more streamlined reproducible but building the Docker image here then running it (https://github.com/docker-library/ghost/tree/master/5/debian)  docker build -t ghost . docker run --rm ghost   Ghost Version 5.82.3  Node.js Version 18.*, 20.*  How did you install Ghost? In Docker using the Ghost CLI  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file,"Outdated version of string-width is causing the Docker image entrypoint loading to fail.  Issue Summary The update to fix arm32 architecture (https://github.com/TryGhost/Ghost/commit/c2485af853f7b3b86f7f141b8496439cdc4881b4) introduce a regression in the way the Ghost package is launched. When running `node index.js` there is a module resolution error similar to this issue https://github.com/nrwl/nx/issues/19249. I managed to solve the issue locally by adding `""string-width"": ""4.2.3""` to the `resolutions` section. Here is the Docker test showing the error: https://github.com/docker-library/ghost/actions/runs/8756974313/job/24034646549 I would like to contribute this fix but I am not sure which `package.json` to use because the packaged one seems to be generated from the source ones.  Steps to Reproduce There is probably an more streamlined reproducible but building the Docker image here then running it (https://github.com/docker-library/ghost/tree/master/5/debian)  docker build -t ghost . docker run --rm ghost   Ghost Version 5.82.3  Node.js Version 18.*, 20.*  How did you install Ghost? In Docker using the Ghost CLI  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file",no-bug,0.95
19796,Ghost,https://github.com/TryGhost/Ghost/issues/19796,"{{tiers}} helper has regression in 5.80 - ""free"" tier shown in list."," Issue Summary The {{tiers}} helper is including the Free tier in the list of tiers with access, even for posts set only to a paid tier. These are posts set to a specific tier access only. Heres 5.80 (running Source latest) ![image](https://github.com/TryGhost/Ghost/assets/42299862/70d52ab8-7744-479e-832e-d1ebad81814f) And heres 5.79, also Source latest: ![image](https://github.com/TryGhost/Ghost/assets/42299862/84f8d663-c33d-4df9-867f-3b56ad9c8073) Both are on Ghost Pro - its just a difference between whether theyre in the early or late roll-out group, looks like!  Steps to Reproduce Install 5.80, hook up to Stripe, create a tier. Create a post restricted to that tier. Browse to the post while not logged in as a user with access.  Ghost Version Ghost Pro  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | source-file,"{{tiers}} helper has regression in 5.80 - ""free"" tier shown in list.  Issue Summary The {{tiers}} helper is including the Free tier in the list of tiers with access, even for posts set only to a paid tier. These are posts set to a specific tier access only. Heres 5.80 (running Source latest) ![image](https://github.com/TryGhost/Ghost/assets/42299862/70d52ab8-7744-479e-832e-d1ebad81814f) And heres 5.79, also Source latest: ![image](https://github.com/TryGhost/Ghost/assets/42299862/84f8d663-c33d-4df9-867f-3b56ad9c8073) Both are on Ghost Pro - its just a difference between whether theyre in the early or late roll-out group, looks like!  Steps to Reproduce Install 5.80, hook up to Stripe, create a tier. Create a post restricted to that tier. Browse to the post while not logged in as a user with access.  Ghost Version Ghost Pro  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file test-file test-file test-file test-file source-file source-file test-file test-file test-file test-file source-file source-file source-file source-file source-file test-file test-file test-file test-file source-file",no-bug,0.8
15542,Ghost,https://github.com/TryGhost/Ghost/issues/15542,Custom theme settings (Site Design settings) not restored from import," Issue Summary (Probably not too relevant, but worth mentioning just in case) I upgraded an ancient < v1 by exporting its data into a fresh v1.26.2 (I think), I then exported the data from the v1.26.2 instance and imported it into the latest version v5.17.2. All was well. Its using the default theme casper (v5.3.1), I fiddled with the admin ui a little including changing some of the things under Site Design such as enabling Show logo in navigation, disabling Show publication cover and changing a few other things. I added a twitter url, added some primary and secondary navigation links. That was about it. I realised that I would need to make some changes to the theme, so I installed ghost locally with ghost install local. I took an export from the other system and imported it into the local one. Everything seems to have imported with the exception of the changes made under Site Design. The navigation menus are there, the twitter url is there, the posts are there. I took a look in the export file I can see things like: ""custom_theme_settings"": [, {""id"":""633dae33554f811bb2335f53"",""theme"":""casper"",""key"":""show_logo_in_navigation"",""type"":""boolean"",""value"":""true""}, ] I checked a few of the other settings that are missing too and they look correct in the export. There were a few warnings during import for things that were ignored. My User, Newsletter, a couple of Product and 'Settings: Theme not imported, please upload in Settings - Design'. The last one is a little suspicious, but I think it's just the theme itself not being imported due to it already existing rather than the Site Design settings themselves? On the off chance doing this from an export was wrong, I use ghost backup to create a backup and imported the data file within it to a clean local instance of ghost instead of the exported one. It has the exact same issue. To rule out the rest of my content as a problem I setup a fresh local instance, changed the settings under Site Design. Exported the data. Setup another fresh local instance. Imported the data. Looked at the settings under Site Design. They are not set to the ones in the export which I would expect them to be. Am I doing something wrong? Should I expect these settings to import ok? Thanks  Steps to Reproduce 1. Install ghost with ghost cli: ghost install local 2. Open resultant ghost in browser and setup 3. Go to settings -> Design 4. Under Homepage, disable Show publication cover 5. Save changes 6. Go to Settings -> Labs, Export 7. Install another ghost instance (I did ghost stop, removed the entire first instance) using ghost cli: ghost install local 8. Open resultant ghost in browser and setup 9. Go to Settings -> Labs, Import Select the file exported a moment go 10. Go to Settings -> Design. 11. Under Homepage, note Show publication cover is enabled whereas it should be disabled  Ghost Version v5.17.2  Node.js Version v16.13.1  How did you install Ghost? ghost cli: ghost install local  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [x] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file,"Custom theme settings (Site Design settings) not restored from import  Issue Summary (Probably not too relevant, but worth mentioning just in case) I upgraded an ancient < v1 by exporting its data into a fresh v1.26.2 (I think), I then exported the data from the v1.26.2 instance and imported it into the latest version v5.17.2. All was well. Its using the default theme casper (v5.3.1), I fiddled with the admin ui a little including changing some of the things under Site Design such as enabling Show logo in navigation, disabling Show publication cover and changing a few other things. I added a twitter url, added some primary and secondary navigation links. That was about it. I realised that I would need to make some changes to the theme, so I installed ghost locally with ghost install local. I took an export from the other system and imported it into the local one. Everything seems to have imported with the exception of the changes made under Site Design. The navigation menus are there, the twitter url is there, the posts are there. I took a look in the export file I can see things like: ""custom_theme_settings"": [, {""id"":""633dae33554f811bb2335f53"",""theme"":""casper"",""key"":""show_logo_in_navigation"",""type"":""boolean"",""value"":""true""}, ] I checked a few of the other settings that are missing too and they look correct in the export. There were a few warnings during import for things that were ignored. My User, Newsletter, a couple of Product and 'Settings: Theme not imported, please upload in Settings - Design'. The last one is a little suspicious, but I think it's just the theme itself not being imported due to it already existing rather than the Site Design settings themselves? On the off chance doing this from an export was wrong, I use ghost backup to create a backup and imported the data file within it to a clean local instance of ghost instead of the exported one. It has the exact same issue. To rule out the rest of my content as a problem I setup a fresh local instance, changed the settings under Site Design. Exported the data. Setup another fresh local instance. Imported the data. Looked at the settings under Site Design. They are not set to the ones in the export which I would expect them to be. Am I doing something wrong? Should I expect these settings to import ok? Thanks  Steps to Reproduce 1. Install ghost with ghost cli: ghost install local 2. Open resultant ghost in browser and setup 3. Go to settings -> Design 4. Under Homepage, disable Show publication cover 5. Save changes 6. Go to Settings -> Labs, Export 7. Install another ghost instance (I did ghost stop, removed the entire first instance) using ghost cli: ghost install local 8. Open resultant ghost in browser and setup 9. Go to Settings -> Labs, Import Select the file exported a moment go 10. Go to Settings -> Design. 11. Under Homepage, note Show publication cover is enabled whereas it should be disabled  Ghost Version v5.17.2  Node.js Version v16.13.1  How did you install Ghost? ghost cli: ghost install local  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [x] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file",no-bug,0.85
21418,Ghost,https://github.com/TryGhost/Ghost/issues/21418,Ghost Admin Slide-Out Panel > Broken Layout on Mobile (z-index)," Issue Summary ![mobile-edits](https://github.com/user-attachments/assets/3f5448df-9676-4432-9db7-6a49ec8bbf01)  Steps to Reproduce 1. Use a mobile phone or emulate a screen size small enough to trigger the 4-button navigation panel at the bottom of the Ghost Dashboard [Dashboard, Posts, Members, More] 2. Log into the Ghost Dashboard 3. Click the [Members] button, *then* click [More] to open the slide-out panel (the issue doesn't occur when opening the slide-out panel over the [Dashboard] or [Posts] sections)  Ghost Version 5.96.1  Node.js Version v18.20.4  How did you install Ghost? Docker ghost:5-alpine  Database type MySQL 8  Browser & OS version Chrome 130 Android; Firefox 131 Windows with device emulation  Relevant log / error output ![firefox-screenshot](https://github.com/user-attachments/assets/cee629e1-ffa2-4183-adea-cef9a8feefd3)  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file,"Ghost Admin Slide-Out Panel > Broken Layout on Mobile (z-index)  Issue Summary ![mobile-edits](https://github.com/user-attachments/assets/3f5448df-9676-4432-9db7-6a49ec8bbf01)  Steps to Reproduce 1. Use a mobile phone or emulate a screen size small enough to trigger the 4-button navigation panel at the bottom of the Ghost Dashboard [Dashboard, Posts, Members, More] 2. Log into the Ghost Dashboard 3. Click the [Members] button, *then* click [More] to open the slide-out panel (the issue doesn't occur when opening the slide-out panel over the [Dashboard] or [Posts] sections)  Ghost Version 5.96.1  Node.js Version v18.20.4  How did you install Ghost? Docker ghost:5-alpine  Database type MySQL 8  Browser & OS version Chrome 130 Android; Firefox 131 Windows with device emulation  Relevant log / error output ![firefox-screenshot](https://github.com/user-attachments/assets/cee629e1-ffa2-4183-adea-cef9a8feefd3)  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file",no-bug,0.95
20214,Ghost,https://github.com/TryGhost/Ghost/issues/20214,"Ghost language not changing to ""fa"""," Issue Summary Hello, While I have added Persian translation in #19932 , but when I change publication language in the latest version of Ghost installed on my server it doesn't change.  Steps to Reproduce 1. Install latest Ghost 2. Change publication language to fa 3. Refresh admin or go to the blog 4. Language is still English  Ghost Version 5.82.8  Node.js Version 18.20.2  How did you install Ghost? Bitnami Docker Image  Database type Other  Browser & OS version Safari/Firefox - macOS  Relevant log / error output shell No error log.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"Ghost language not changing to ""fa""  Issue Summary Hello, While I have added Persian translation in #19932 , but when I change publication language in the latest version of Ghost installed on my server it doesn't change.  Steps to Reproduce 1. Install latest Ghost 2. Change publication language to fa 3. Refresh admin or go to the blog 4. Language is still English  Ghost Version 5.82.8  Node.js Version 18.20.2  How did you install Ghost? Bitnami Docker Image  Database type Other  Browser & OS version Safari/Firefox - macOS  Relevant log / error output shell No error log.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.8
22764,Ghost,https://github.com/TryGhost/Ghost/issues/22764,Search should match results with accents if term does not include them," Issue Summary If a post title of page include accents, the search results should include those in the results, whether there are accents or not  Steps to Reproduce 1. Create a post with the title Rene Zellweger (note the accented ) 2. Search for this using renee as the term 3. Observe no results  Ghost Version 1.108.1  Node.js Version 18  How did you install Ghost? Ghost(Pro)  Database type MySQL 8  Browser & OS version All  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",documentation-file | source-file | test-file | other-file,"Search should match results with accents if term does not include them  Issue Summary If a post title of page include accents, the search results should include those in the results, whether there are accents or not  Steps to Reproduce 1. Create a post with the title Rene Zellweger (note the accented ) 2. Search for this using renee as the term 3. Observe no results  Ghost Version 1.108.1  Node.js Version 18  How did you install Ghost? Ghost(Pro)  Database type MySQL 8  Browser & OS version All  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository documentation-file source-file test-file other-file",bug,0.85
21527,Ghost,https://github.com/TryGhost/Ghost/issues/21527,Breaking Change to Embeddable Signup Form - Integrity Token," Issue Summary Hey Ghost team, Just wanted to flag an issue with the recent change that introduced an integrity token requirement for the embeddable signup form (#20836, in 5.91.0). This update broke our one-click subscribe setup on external sites, as it seems to have impacted the externally hosted JavaScript (included in the generated Embed signup form) without a major version bump. The change hit unexpectedlyour signup form just stopped working even though we were on a fairly recent version, which caused a bit of a fire drill. Going forward, itd be great if changes impacting critical pieces like this (especially anything hosted externally) could align with a major version release, so theres a heads-up to make any necessary adjustments. As it is, I believe embeddable signup forms are currently broken for anyone running less than 5.91.0. Thanks for considering this!  Steps to Reproduce - run a 5.x version < 5.91.0, with an embeddable signup form, since this change was made - specifically, we were running 5.87.2 - have an embeddable signup form - try to submit an embeddable signup form - see the error message ""Something went wrong, please try again."" - in your browser's developer console, see that the integrity token request has an error (because you're not running at least 5.91.0 and it just doesn't exist)  Ghost Version 5.x < 5.91.0  Node.js Version any  How did you install Ghost? containerized  Database type N/A  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | test-file | documentation-file | documentation-file,"Breaking Change to Embeddable Signup Form - Integrity Token  Issue Summary Hey Ghost team, Just wanted to flag an issue with the recent change that introduced an integrity token requirement for the embeddable signup form (#20836, in 5.91.0). This update broke our one-click subscribe setup on external sites, as it seems to have impacted the externally hosted JavaScript (included in the generated Embed signup form) without a major version bump. The change hit unexpectedlyour signup form just stopped working even though we were on a fairly recent version, which caused a bit of a fire drill. Going forward, itd be great if changes impacting critical pieces like this (especially anything hosted externally) could align with a major version release, so theres a heads-up to make any necessary adjustments. As it is, I believe embeddable signup forms are currently broken for anyone running less than 5.91.0. Thanks for considering this!  Steps to Reproduce - run a 5.x version < 5.91.0, with an embeddable signup form, since this change was made - specifically, we were running 5.87.2 - have an embeddable signup form - try to submit an embeddable signup form - see the error message ""Something went wrong, please try again."" - in your browser's developer console, see that the integrity token request has an error (because you're not running at least 5.91.0 and it just doesn't exist)  Ghost Version 5.x < 5.91.0  Node.js Version any  How did you install Ghost? containerized  Database type N/A  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file test-file documentation-file documentation-file",no-bug,0.8
21350,Ghost,https://github.com/TryGhost/Ghost/issues/21350,Ghost Admin Profile Panel requesting 'null' URL for cover image," Issue Summary The Ghost Admin dashboard is throwing a series of 301 redirects (in lieu of not finding the specified URL) when opening the [Profile] panel. Upon further inspection, the DOM shows the string ""null"" being escaped and printed inside `background-image: url()`.  Steps to Reproduce 1. Start with fresh install 2. Open the Ghost admin 3. Click on the user-panel in the bottom-left corner of the screen 4. Click ""Your Profile""  Ghost Version 5.96.1  Node.js Version 18.20.4  How did you install Ghost? Docker ghost:5-alpine  Database type MySQL 8  Browser & OS version Firefox 131.0.2  Relevant log / error output **DOM** `<div class=""flex min-h-[40vmin] flex-wrap items-end justify-between bg-cover bg-center"" style=""background-image: url(&quot;null&quot;);"">  </div>` **WEB DEVELOPER TOOLS > NETWORK TAB** GET request to `https://[mydomain.foo]/ghost/null`, 301 redirect to `/ghost/null/`, 301 redirect to `/ghost/#/null/`  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Ghost Admin Profile Panel requesting 'null' URL for cover image  Issue Summary The Ghost Admin dashboard is throwing a series of 301 redirects (in lieu of not finding the specified URL) when opening the [Profile] panel. Upon further inspection, the DOM shows the string ""null"" being escaped and printed inside `background-image: url()`.  Steps to Reproduce 1. Start with fresh install 2. Open the Ghost admin 3. Click on the user-panel in the bottom-left corner of the screen 4. Click ""Your Profile""  Ghost Version 5.96.1  Node.js Version 18.20.4  How did you install Ghost? Docker ghost:5-alpine  Database type MySQL 8  Browser & OS version Firefox 131.0.2  Relevant log / error output **DOM** `<div class=""flex min-h-[40vmin] flex-wrap items-end justify-between bg-cover bg-center"" style=""background-image: url(&quot;null&quot;);"">  </div>` **WEB DEVELOPER TOOLS > NETWORK TAB** GET request to `https://[mydomain.foo]/ghost/null`, 301 redirect to `/ghost/null/`, 301 redirect to `/ghost/#/null/`  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.9
18320,Ghost,https://github.com/TryGhost/Ghost/issues/18320,Regular text in dark mode modals have the wrong shade," Issue Summary While in dark mode, upload a theme that has errors and you'll see that the regular text is dark on dark rather than light on dark. ![Xnapper-2023-09-25-13 46 00](https://github.com/TryGhost/Ghost/assets/27488257/42a2c6dd-7010-4a59-a1cb-9ecbc22c1e19) Likewise, check the instance's version and ""Version"" is dark on dark. ![Xnapper-2023-09-25-13 49 42](https://github.com/TryGhost/Ghost/assets/27488257/49f99c23-25a0-4f08-83f6-a15fe17098cf)  Steps to Reproduce 1. While in dark mode upload a theme with errors and/or check the instance's version number. 2. See the dark on dark text  Ghost Version 5.63.0+ moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file,"Regular text in dark mode modals have the wrong shade  Issue Summary While in dark mode, upload a theme that has errors and you'll see that the regular text is dark on dark rather than light on dark. ![Xnapper-2023-09-25-13 46 00](https://github.com/TryGhost/Ghost/assets/27488257/42a2c6dd-7010-4a59-a1cb-9ecbc22c1e19) Likewise, check the instance's version and ""Version"" is dark on dark. ![Xnapper-2023-09-25-13 49 42](https://github.com/TryGhost/Ghost/assets/27488257/49f99c23-25a0-4f08-83f6-a15fe17098cf)  Steps to Reproduce 1. While in dark mode upload a theme with errors and/or check the instance's version number. 2. See the dark on dark text  Ghost Version 5.63.0+ moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file other-file other-file other-file other-file",no-bug,0.95
14882,Ghost,https://github.com/TryGhost/Ghost/issues/14882,Remove the bluebird dependency from everywhere,"Now that there are native promises in Node.js _and_ with async/await, bluebird really is a blast from the past. However, it's embedded pretty hard across our dependencies and some of our code uses catch predicates, which means we have to be careful about the order in which we rip bluebird out, otherwise we could break our error handling in weird and unexpected ways. Here's some notes on what we need to do, most importantly starting with finding everywhere we depend on catch predicates: **Native:** - Promise.all - Promise.then - Promise.reject - Promise.resolve **Bluebird** - catch predicates -> replace with normal if statements - Promise.promisify -> require('util').promisify - Promise.props -> Promise.all [example](https://github.com/serverless/serverless/pull/8414/files) - Promise.join -> Promise.all - Promise.each -> Promise.all + array.map - Promise.map -> Promise.all + array.map - Promise.filter -> for and async/await - Promise.mapSeries -> use our sequence util (which needs an implementation of reduce, but is our only usage of it) - Promise.delay -> promisify getTimeout? Or get rid?  ## Refactor Approach This refactor needs to be done in two phases: 1.  Remove all the catch predicates The best way to find catch predicates is with this regex: `/\.catch\([^)]+,/`. 2. Remove bluebird from everywhere else: - Ghost monorepo - bluebird is required 117 times - [framework](https://github.com/TryGhost/framework) - bluebird required 5 times, but these are some of the most critical usages - [SDK](https://github.com/TryGhost/SDK) - just one usage, easy win! - [gscan](https://github.com/TryGhost/gscan) - 3 usages - [knex-migrator](https://github.com/TryGhost/knex-migrator) - 3 usages **Why did we have to do catch predicates first?** Catch predicates result in error handling that assume the Promise they are handling is a Bluebird promise. If that isn't the case, Ghost will error, and quite possibly crash. Our code coverage isn't quite good enough to be certain that all the unhappy paths are tested and we'll find these, and it's too much cognitive load for anyone to figure out if removing Bluebird is safe whilst there are still catch predicates in the codebase.  ## How to work on this issue The slow and steady approach to refactoring is the only thing that really works. Branches should be very short lived (<1 day if possible). Therefore, please do not attempt to do this entire refactor in a single PR. It is not possible for us to review! Instead, please find a single file with many references, or a small subfolder of the codebase with a handful of usages, make the changes, and submit a PR. Then repeat. Please follow our contribution guidelines as closely as you can, particularly being sure to reference this issue in your commit. Refactor commits should not use emojis as they are not user-facing changes. Note: This refactor has almost no user facing impact and (hopefully) no tests should break or change. A reference refactor commit can be found here: https://github.com/TryGhost/Ghost/commit/10aad8db7e12b6d08089cd7beee3ea9df64b3adb Thank you ",source-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file,"Remove the bluebird dependency from everywhere Now that there are native promises in Node.js _and_ with async/await, bluebird really is a blast from the past. However, it's embedded pretty hard across our dependencies and some of our code uses catch predicates, which means we have to be careful about the order in which we rip bluebird out, otherwise we could break our error handling in weird and unexpected ways. Here's some notes on what we need to do, most importantly starting with finding everywhere we depend on catch predicates: **Native:** - Promise.all - Promise.then - Promise.reject - Promise.resolve **Bluebird** - catch predicates -> replace with normal if statements - Promise.promisify -> require('util').promisify - Promise.props -> Promise.all [example](https://github.com/serverless/serverless/pull/8414/files) - Promise.join -> Promise.all - Promise.each -> Promise.all + array.map - Promise.map -> Promise.all + array.map - Promise.filter -> for and async/await - Promise.mapSeries -> use our sequence util (which needs an implementation of reduce, but is our only usage of it) - Promise.delay -> promisify getTimeout? Or get rid?  ## Refactor Approach This refactor needs to be done in two phases: 1.  Remove all the catch predicates The best way to find catch predicates is with this regex: `/\.catch\([^)]+,/`. 2. Remove bluebird from everywhere else: - Ghost monorepo - bluebird is required 117 times - [framework](https://github.com/TryGhost/framework) - bluebird required 5 times, but these are some of the most critical usages - [SDK](https://github.com/TryGhost/SDK) - just one usage, easy win! - [gscan](https://github.com/TryGhost/gscan) - 3 usages - [knex-migrator](https://github.com/TryGhost/knex-migrator) - 3 usages **Why did we have to do catch predicates first?** Catch predicates result in error handling that assume the Promise they are handling is a Bluebird promise. If that isn't the case, Ghost will error, and quite possibly crash. Our code coverage isn't quite good enough to be certain that all the unhappy paths are tested and we'll find these, and it's too much cognitive load for anyone to figure out if removing Bluebird is safe whilst there are still catch predicates in the codebase.  ## How to work on this issue The slow and steady approach to refactoring is the only thing that really works. Branches should be very short lived (<1 day if possible). Therefore, please do not attempt to do this entire refactor in a single PR. It is not possible for us to review! Instead, please find a single file with many references, or a small subfolder of the codebase with a handful of usages, make the changes, and submit a PR. Then repeat. Please follow our contribution guidelines as closely as you can, particularly being sure to reference this issue in your commit. Refactor commits should not use emojis as they are not user-facing changes. Note: This refactor has almost no user facing impact and (hopefully) no tests should break or change. A reference refactor commit can be found here: https://github.com/TryGhost/Ghost/commit/10aad8db7e12b6d08089cd7beee3ea9df64b3adb Thank you  source-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file source-file source-file source-file source-file source-file source-file source-file source-file test-file",no-bug,0.95
17753,Ghost,https://github.com/TryGhost/Ghost/issues/17753,srcset missing for header images in new editor," Issue Summary Image content generated for the new split header layout does not include a srcset. Huge images load by default.  Steps to Reproduce Create a new page with a header card with the new split layout. Be lazy and drag a huge image into the image blog, assuming Ghost will resize it. Publish. Inspect the result. Here's the outcome:  <div class=""kg-header-card-content""> <picture><img class=""kg-header-card-image"" src=""https://www.spectralwebservices.com/content/images/2023/08/ghost-website-1.png"" alt=""""></picture> <div class=""kg-header-card-text ""> <h2 id=""take-your-ghost-blog-and-newsletter-to-the-next-level"" class=""kg-header-card-heading"" style=""color: #FFFFFF;"" data-text-color=""#FFFFFF""><span>Take your Ghost blog and newsletter to the next level.</span></h2> <h3 id=""let-our-team-handle-the-technology-while-you-focus-on-creating"" class=""kg-header-card-subheading"" style=""color: #FFFFFF;"" data-text-color=""#FFFFFF""><span>Let our team handle the technology while you focus on creating.</span></h3> <a href=""https://www.spectralwebservices.com/contact/"" class=""kg-header-card-button "" style=""background-color: #ffffff;color: #000000;"" data-button-color=""#ffffff"" data-button-text-color=""#000000"">Contact Us</a> </div> </div>  Because there's no srcset on image, it loads at 2000px wide. That's silly for anything less than a 4k screen, and really silly for the 1200px wide screen I prefer. My browser actually rendered it at ~500px.  Ghost Version 5.59.1  Node.js Version Ghost Pro and 16.something  How did you install Ghost? ghost-cli and ghost pro  Database type MySQL 8  Browser & OS version Chrome, recent, windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file,"srcset missing for header images in new editor  Issue Summary Image content generated for the new split header layout does not include a srcset. Huge images load by default.  Steps to Reproduce Create a new page with a header card with the new split layout. Be lazy and drag a huge image into the image blog, assuming Ghost will resize it. Publish. Inspect the result. Here's the outcome:  <div class=""kg-header-card-content""> <picture><img class=""kg-header-card-image"" src=""https://www.spectralwebservices.com/content/images/2023/08/ghost-website-1.png"" alt=""""></picture> <div class=""kg-header-card-text ""> <h2 id=""take-your-ghost-blog-and-newsletter-to-the-next-level"" class=""kg-header-card-heading"" style=""color: #FFFFFF;"" data-text-color=""#FFFFFF""><span>Take your Ghost blog and newsletter to the next level.</span></h2> <h3 id=""let-our-team-handle-the-technology-while-you-focus-on-creating"" class=""kg-header-card-subheading"" style=""color: #FFFFFF;"" data-text-color=""#FFFFFF""><span>Let our team handle the technology while you focus on creating.</span></h3> <a href=""https://www.spectralwebservices.com/contact/"" class=""kg-header-card-button "" style=""background-color: #ffffff;color: #000000;"" data-button-color=""#ffffff"" data-button-text-color=""#000000"">Contact Us</a> </div> </div>  Because there's no srcset on image, it loads at 2000px wide. That's silly for anything less than a 4k screen, and really silly for the 1200px wide screen I prefer. My browser actually rendered it at ~500px.  Ghost Version 5.59.1  Node.js Version Ghost Pro and 16.something  How did you install Ghost? ghost-cli and ghost pro  Database type MySQL 8  Browser & OS version Chrome, recent, windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file",no-bug,0.9
16262,Ghost,https://github.com/TryGhost/Ghost/issues/16262,#has helper not working with pagination," Issue Summary Hi team, [According to the documentation](https://ghost.org/docs/themes/helpers/has/), the following has statement should prevent {{pagination}} from rendering if there is none, and render it if there are multiple pages: `{{#has any=""prev, next""}}`. > The `any` comparison will return true if any one of the properties is set in the current context, with support for paths and globals I also found [an older example](https://forum.ghost.org/t/conditionals-in-handlebars/1928/10) that indicates that this should work. However, the pagination never renders at all when using `has`. References: [Pagination docs](https://ghost.org/docs/themes/helpers/pagination/) [Has helper docs](https://ghost.org/docs/themes/helpers/has/) [Initial topic](https://forum.ghost.org/t/has-helper-not-working-for-pagination/35336) [Old example](https://forum.ghost.org/t/conditionals-in-handlebars/1928/10)  Steps to Reproduce To ensure the context has access to `prev` and `next`, I logged their values. When on the first pagination page, I used `{{log prev}}` and `{{log next}}`, which returned `1` and `null` as expected.  {{log prev}} {{log next}} {{#has any=""prev, next""}} <nav class=""pt-28 max-w-3xl mx-auto px-4 sm:grid grid-cols-3"" role=""navigation""> {{#if prev}} <a class=""col-start-1 ml-auto sm:rounded-l-lg flex items-center text-yellow-400 py-4 sm:py-8 px-4 bg-zinc-800 hover:bg-yellow-300 hover:text-zinc-900"" href=""{{page_url prev}}""> <div class=""w-10 h-10 flex items-center justify-center"">{{> ""icons/arrow-left""}}</div> <h4 class=""text-base px-4"">Newer posts</h4> </a> {{/if}} <span class=""col-start-2 bg-zinc-800 text-zinc-400 flex items-center justify-center py-4 sm:py-8"">Page {{page}} of {{pages}}</span> {{#if next}} <a class=""col-start-3 sm:rounded-r-lg flex mr-auto items-center text-yellow-400 py-4 sm:py-8 px-4 bg-zinc-800 hover:bg-yellow-300 hover:text-zinc-900"" href=""{{page_url next}}""> <h4 class=""text-base px-4"">Older posts</h4> <div class=""w-10 h-10 flex items-center justify-center"">{{> ""icons/arrow-right""}}</div> </a> {{/if}} </nav> {{/has}}   Ghost Version 5.26.3  Node.js Version v16.13.0  How did you install Ghost? homebrew  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"#has helper not working with pagination  Issue Summary Hi team, [According to the documentation](https://ghost.org/docs/themes/helpers/has/), the following has statement should prevent {{pagination}} from rendering if there is none, and render it if there are multiple pages: `{{#has any=""prev, next""}}`. > The `any` comparison will return true if any one of the properties is set in the current context, with support for paths and globals I also found [an older example](https://forum.ghost.org/t/conditionals-in-handlebars/1928/10) that indicates that this should work. However, the pagination never renders at all when using `has`. References: [Pagination docs](https://ghost.org/docs/themes/helpers/pagination/) [Has helper docs](https://ghost.org/docs/themes/helpers/has/) [Initial topic](https://forum.ghost.org/t/has-helper-not-working-for-pagination/35336) [Old example](https://forum.ghost.org/t/conditionals-in-handlebars/1928/10)  Steps to Reproduce To ensure the context has access to `prev` and `next`, I logged their values. When on the first pagination page, I used `{{log prev}}` and `{{log next}}`, which returned `1` and `null` as expected.  {{log prev}} {{log next}} {{#has any=""prev, next""}} <nav class=""pt-28 max-w-3xl mx-auto px-4 sm:grid grid-cols-3"" role=""navigation""> {{#if prev}} <a class=""col-start-1 ml-auto sm:rounded-l-lg flex items-center text-yellow-400 py-4 sm:py-8 px-4 bg-zinc-800 hover:bg-yellow-300 hover:text-zinc-900"" href=""{{page_url prev}}""> <div class=""w-10 h-10 flex items-center justify-center"">{{> ""icons/arrow-left""}}</div> <h4 class=""text-base px-4"">Newer posts</h4> </a> {{/if}} <span class=""col-start-2 bg-zinc-800 text-zinc-400 flex items-center justify-center py-4 sm:py-8"">Page {{page}} of {{pages}}</span> {{#if next}} <a class=""col-start-3 sm:rounded-r-lg flex mr-auto items-center text-yellow-400 py-4 sm:py-8 px-4 bg-zinc-800 hover:bg-yellow-300 hover:text-zinc-900"" href=""{{page_url next}}""> <h4 class=""text-base px-4"">Older posts</h4> <div class=""w-10 h-10 flex items-center justify-center"">{{> ""icons/arrow-right""}}</div> </a> {{/if}} </nav> {{/has}}   Ghost Version 5.26.3  Node.js Version v16.13.0  How did you install Ghost? homebrew  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.9
22328,Ghost,https://github.com/TryGhost/Ghost/issues/22328,Comments exposes a 'hide' button even for staff roles that shouldn't see it.," Issue Summary I'm logged in as an editor on a Ghost pro site. I'm not logged in as a member When I view comments, I can see the """" with hide behind it. Clicking Hide causes the comment to grey out, but doesn't actually hide it (comment reappears on reload). Aside: I'm about to give editors permissions to hide comments anyway, so maybe I'll write a test that shows that they can (and authors can't).  Steps to Reproduce See above.  Ghost Version Ghost Pro, 5.110.2  Node.js Version na  How did you install Ghost? na  Database type MySQL 8  Browser & OS version chrome, windows 11  Relevant log / error output shell Browser shows a 500 status code because I don't have permissions to hide the comment.   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",other-file | test-file | source-file | source-file | source-file | test-file,"Comments exposes a 'hide' button even for staff roles that shouldn't see it.  Issue Summary I'm logged in as an editor on a Ghost pro site. I'm not logged in as a member When I view comments, I can see the """" with hide behind it. Clicking Hide causes the comment to grey out, but doesn't actually hide it (comment reappears on reload). Aside: I'm about to give editors permissions to hide comments anyway, so maybe I'll write a test that shows that they can (and authors can't).  Steps to Reproduce See above.  Ghost Version Ghost Pro, 5.110.2  Node.js Version na  How did you install Ghost? na  Database type MySQL 8  Browser & OS version chrome, windows 11  Relevant log / error output shell Browser shows a 500 status code because I don't have permissions to hide the comment.   Code of Conduct - [x] I agree to be friendly and polite to people in this repository other-file test-file source-file source-file source-file test-file",bug,0.9
15878,Ghost,https://github.com/TryGhost/Ghost/issues/15878,The mandatory attribute 'height' is missing in tag 'amp-youtube'.," Issue Summary After fixing this [issue](https://github.com/TryGhost/Ghost/pull/15826), an error on YouTube videos on AMP pages started to occur. The error is due to the `amp-youtube` component not having a height attribute, which is mandatory, this ends up invalidating all AMP pages that have this component. **Error:** The mandatory attribute `height` is missing in tag `amp-youtube`. [Debug](https://validator.amp.dev/#url=https://tobruxo.com.br/melhores-mangas-yuri/amp/&errno=0). [Learn more](https://amp.dev/documentation/components/amp-youtube).  Steps to Reproduce 1. Install extension: [AMP Validator](https://chrome.google.com/webstore/detail/amp-validator/nmoffdblmcmgeicmolmhobpoocbbmknc?hl=pt-BR) 2. Create a page/post 3. Add a YouTube video 4. Enter the AMP page 5. Check for error in AMP Validator extension  Ghost Version 5.23.0  Node.js Version 16.18.1  How did you install Ghost? Digital Ocean Droplet and Ghost Cloud  Database type MySQL 8  Browser & OS version Google Chrome on Ubuntu 22.04.01  Relevant log / error output shell The mandatory attribute 'height' is missing in tag 'amp-youtube'.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"The mandatory attribute 'height' is missing in tag 'amp-youtube'.  Issue Summary After fixing this [issue](https://github.com/TryGhost/Ghost/pull/15826), an error on YouTube videos on AMP pages started to occur. The error is due to the `amp-youtube` component not having a height attribute, which is mandatory, this ends up invalidating all AMP pages that have this component. **Error:** The mandatory attribute `height` is missing in tag `amp-youtube`. [Debug](https://validator.amp.dev/#url=https://tobruxo.com.br/melhores-mangas-yuri/amp/&errno=0). [Learn more](https://amp.dev/documentation/components/amp-youtube).  Steps to Reproduce 1. Install extension: [AMP Validator](https://chrome.google.com/webstore/detail/amp-validator/nmoffdblmcmgeicmolmhobpoocbbmknc?hl=pt-BR) 2. Create a page/post 3. Add a YouTube video 4. Enter the AMP page 5. Check for error in AMP Validator extension  Ghost Version 5.23.0  Node.js Version 16.18.1  How did you install Ghost? Digital Ocean Droplet and Ghost Cloud  Database type MySQL 8  Browser & OS version Google Chrome on Ubuntu 22.04.01  Relevant log / error output shell The mandatory attribute 'height' is missing in tag 'amp-youtube'.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.9
15295,Ghost,https://github.com/TryGhost/Ghost/issues/15295,Changing emoji in callout card causes page jump in Safari," Issue Summary When trying to update an emoji in a callout card using Safari, it jumps to the top of the editor (and successfully changes the icon).  Steps to Reproduce 1. Open Safari 2. Create a new post with several paragraphs of content, and insert a call out card after them 3. Try to change the emoji of the callout card, observe you're jumped up to the top of the editor  Ghost Version 5.10  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Safari 15.6 (17613.3.9.1.5) / Mac OS 12.5  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Changing emoji in callout card causes page jump in Safari  Issue Summary When trying to update an emoji in a callout card using Safari, it jumps to the top of the editor (and successfully changes the icon).  Steps to Reproduce 1. Open Safari 2. Create a new post with several paragraphs of content, and insert a call out card after them 3. Try to change the emoji of the callout card, observe you're jumped up to the top of the editor  Ghost Version 5.10  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Safari 15.6 (17613.3.9.1.5) / Mac OS 12.5  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.9
17681,Ghost,https://github.com/TryGhost/Ghost/issues/17681,@page object not available in pages created via routes and data property," Issue Summary @page object not available in pages created via routes and data property  Steps to Reproduce 1. Setting up routes for a custom page, for example `/membership/` yaml routes: /membership/: template: membership data: page.membership  2. Inside the membership.hbs template, within `{{#page}}  {{/page}}`, if I log the following: hbs {{log @page}} {{log show_title_and_feature_image}}  Result: bash undefined true  3. Inside a regular page, the same log will result in: bash { show_title_and_feature_image: true } undefined  It seems in custom routes/pages, the @page object is not available and instead, the `show_title_and_feature_image` property is directly available.  Ghost Version 5.58  Node.js Version 16.20.1  How did you install Ghost? local, macos  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file,"@page object not available in pages created via routes and data property  Issue Summary @page object not available in pages created via routes and data property  Steps to Reproduce 1. Setting up routes for a custom page, for example `/membership/` yaml routes: /membership/: template: membership data: page.membership  2. Inside the membership.hbs template, within `{{#page}}  {{/page}}`, if I log the following: hbs {{log @page}} {{log show_title_and_feature_image}}  Result: bash undefined true  3. Inside a regular page, the same log will result in: bash { show_title_and_feature_image: true } undefined  It seems in custom routes/pages, the @page object is not available and instead, the `show_title_and_feature_image` property is directly available.  Ghost Version 5.58  Node.js Version 16.20.1  How did you install Ghost? local, macos  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file test-file source-file source-file source-file source-file source-file test-file test-file",no-bug,0.9
18579,Ghost,https://github.com/TryGhost/Ghost/issues/18579,Dark mode bug with header in AdminX v5.69.0 at narrower width," Issue Summary It seems a header div is missing some details to implement dark mode at narrower width, as seen here: ![image](https://github.com/TryGhost/Ghost/assets/25829/4a2223c8-5f08-4811-9733-eae49b51baa5) Seems like the header box should have a dark background but has white instead.  Steps to Reproduce 1. Enable Dark mode for settings 2. Make browser narrower.  Ghost Version 5.69.0  Node.js Version 16.20.1  How did you install Ghost? CLI  Database type MySQL 8  Browser & OS version Vivaldi and Qutebrowser (both Chromium-based)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Dark mode bug with header in AdminX v5.69.0 at narrower width  Issue Summary It seems a header div is missing some details to implement dark mode at narrower width, as seen here: ![image](https://github.com/TryGhost/Ghost/assets/25829/4a2223c8-5f08-4811-9733-eae49b51baa5) Seems like the header box should have a dark background but has white instead.  Steps to Reproduce 1. Enable Dark mode for settings 2. Make browser narrower.  Ghost Version 5.69.0  Node.js Version 16.20.1  How did you install Ghost? CLI  Database type MySQL 8  Browser & OS version Vivaldi and Qutebrowser (both Chromium-based)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.95
18968,Ghost,https://github.com/TryGhost/Ghost/issues/18968,GHOST_DATABASE_CONNECTION_PASSWORD cannot be only Numeric," Issue Summary Docker .env File GHOST_DATABASE_CONNECTION_PASSWORD cannot be only Numeric. Mysql accept it and Login is possible, but Ghost don't.  Steps to Reproduce set the ghost database connection password to 123456  Ghost Version 5.72.2  Node.js Version 18.18.2  How did you install Ghost? Docker Image  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell [2023-11-13 16:57:30] WARN Ghost is shutting down [2023-11-13 16:57:30] WARN Ghost has shut down [2023-11-13 16:57:30] WARN Your site is now offline [2023-11-13 16:57:30] WARN Ghost was running for a few seconds [2023-11-13 16:57:34] INFO Ghost is running in production [2023-11-13 16:57:34] INFO Your site is now available on https://example.com/ [2023-11-13 16:57:34] INFO Ctrl+C to shut down [2023-11-13 16:57:34] INFO Ghost server started in 2.405s [2023-11-13 16:57:35] ERROR The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received ty pe number (123456) The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received type number (123456) ""Unknown database error"" Error ID: 500 Error Code: ERR_INVALID_ARG_TYPE  TypeError [ERR_INVALID_ARG_TYPE]: The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Recei ved type number (8066) at /var/lib/ghost/versions/5.72.2/node_modules/knex-migrator/lib/database.js:57:19 at new NodeError (node:internal/errors:405:5) at Hash.update (node:internal/crypto/hash:107:11) at sha1 (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/auth_41.js:31:8) at Object.token [as calculateToken] (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/auth_41.js:57:18) at new HandshakeResponse (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/packets/handshake_response.js:28:26) at ClientHandshake.sendCredentials (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/client_handshake.js:71:31) at ClientHandshake.handshakeInit (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/client_handshake.js:162:12) at ClientHandshake.execute (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/command.js:45:22) at Connection.handlePacket (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:478:34) at PacketParser.onPacket (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:97:12) at PacketParser.executeStart (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/packet_parser.js:75:16) at Socket.<anonymous> (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:104:25) at Socket.emit (node:events:517:28) at addChunk (node:internal/streams/readable:335:12) at readableAddChunk (node:internal/streams/readable:308:9) at Readable.push (node:internal/streams/readable:245:10)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | source-file | test-file,"GHOST_DATABASE_CONNECTION_PASSWORD cannot be only Numeric  Issue Summary Docker .env File GHOST_DATABASE_CONNECTION_PASSWORD cannot be only Numeric. Mysql accept it and Login is possible, but Ghost don't.  Steps to Reproduce set the ghost database connection password to 123456  Ghost Version 5.72.2  Node.js Version 18.18.2  How did you install Ghost? Docker Image  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell [2023-11-13 16:57:30] WARN Ghost is shutting down [2023-11-13 16:57:30] WARN Ghost has shut down [2023-11-13 16:57:30] WARN Your site is now offline [2023-11-13 16:57:30] WARN Ghost was running for a few seconds [2023-11-13 16:57:34] INFO Ghost is running in production [2023-11-13 16:57:34] INFO Your site is now available on https://example.com/ [2023-11-13 16:57:34] INFO Ctrl+C to shut down [2023-11-13 16:57:34] INFO Ghost server started in 2.405s [2023-11-13 16:57:35] ERROR The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received ty pe number (123456) The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received type number (123456) ""Unknown database error"" Error ID: 500 Error Code: ERR_INVALID_ARG_TYPE  TypeError [ERR_INVALID_ARG_TYPE]: The ""data"" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Recei ved type number (8066) at /var/lib/ghost/versions/5.72.2/node_modules/knex-migrator/lib/database.js:57:19 at new NodeError (node:internal/errors:405:5) at Hash.update (node:internal/crypto/hash:107:11) at sha1 (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/auth_41.js:31:8) at Object.token [as calculateToken] (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/auth_41.js:57:18) at new HandshakeResponse (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/packets/handshake_response.js:28:26) at ClientHandshake.sendCredentials (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/client_handshake.js:71:31) at ClientHandshake.handshakeInit (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/client_handshake.js:162:12) at ClientHandshake.execute (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/commands/command.js:45:22) at Connection.handlePacket (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:478:34) at PacketParser.onPacket (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:97:12) at PacketParser.executeStart (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/packet_parser.js:75:16) at Socket.<anonymous> (/var/lib/ghost/versions/5.72.2/node_modules/mysql2/lib/connection.js:104:25) at Socket.emit (node:events:517:28) at addChunk (node:internal/streams/readable:335:12) at readableAddChunk (node:internal/streams/readable:308:9) at Readable.push (node:internal/streams/readable:245:10)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file source-file test-file",no-bug,0.9
15292,Ghost,https://github.com/TryGhost/Ghost/issues/15292,Validation errors for duplicate members should be displayed inline,"Attempting to add a member that already exists (with duplicate email address), an error is displayed as a red banner which persists until manually dismissed. ## Steps to reproduce 1. Go to Ghost Admin > Members 2. Add a member with the email address test@test.com 3. Try to add a new member, also with the address test@test.com ![image](https://user-images.githubusercontent.com/3798302/110780660-d65db680-825c-11eb-917e-3342d29351cc.png) ## Expected behaviour This error handling should be updated to follow the same pattern as attempting to invite a new staff user that already exists: ![image](https://user-images.githubusercontent.com/3798302/110780770-f5f4df00-825c-11eb-9cbd-175f5cef57d7.png)  Ghost Version 5.10",source-file | source-file | source-file | source-file,"Validation errors for duplicate members should be displayed inline Attempting to add a member that already exists (with duplicate email address), an error is displayed as a red banner which persists until manually dismissed. ## Steps to reproduce 1. Go to Ghost Admin > Members 2. Add a member with the email address test@test.com 3. Try to add a new member, also with the address test@test.com ![image](https://user-images.githubusercontent.com/3798302/110780660-d65db680-825c-11eb-917e-3342d29351cc.png) ## Expected behaviour This error handling should be updated to follow the same pattern as attempting to invite a new staff user that already exists: ![image](https://user-images.githubusercontent.com/3798302/110780770-f5f4df00-825c-11eb-9cbd-175f5cef57d7.png)  Ghost Version 5.10 source-file source-file source-file source-file",no-bug,0.8
20133,Ghost,https://github.com/TryGhost/Ghost/issues/20133,Author slug with one letter causes failed filter," Issue Summary A staff member that signs up with a single-letter first name upon invitation will not be able to use Ghost at all. They only see an error message in the Ghost admin:  Request not understood error, cannot list posts. Error parsing filter  ![CleanShot 2024-05-05 at 19 03 18@2x](https://github.com/TryGhost/Ghost/assets/25703384/52fe6ae4-32bd-487d-99d7-4ee759370d79) Looking at the network requests, the request to `/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj` fails. As soon as the last filter is removed, the API request succeeds: `https://tireless-buzzard.pikapod.net/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D` I have then tried to change the author slug in the database from ""j"" to ""jb""  and things started to work. This has been tested in different environments, both locally with development configurations, as well as on different managed hosts. Ghost v5.82.2 and v5.82.6 have been tested, both from the CLI as well as Docker images.  Steps to Reproduce 1. Invite a new staff member as contributor 2. Accept the invitation and register  IMPORTANT: Set the name to have a single-letter first name, e.g. ""J Doe"" instead of ""John Doe"" 3. See the error  Ghost Version v5.82.6  Node.js Version 18 LTS  How did you install Ghost? Ghost CLI  Database type MySQL 8  Browser & OS version Mac OS 14.4.1, latest Chrome and latest Safari tested  Relevant log / error output shell [2024-05-05 16:55:19] ERROR ""GET /ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj"" 400 12ms Error parsing filter Error ID: 415527a0-0b00-11ef-96dc-2bc1b8db7476  Error: Query Error: unrecognized text ""j"" in filter at char 24 at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:66:23) ished,sent]+authors:j)+type:post ^ at lexer.parseError (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:760:11) at Object.next (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:625:25) at Object.lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:635:22) at lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:246:27) at Parser.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:259:26) at exports.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/lib/nql.js:18:44) at api.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:15:31) at api.querySQL (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:49:44) at Builder.<anonymous> (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:63:24) at Object.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/helpers.js:164:14) at Child.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/model.js:1387:22) at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:56:22) at Function.getFilteredCollection (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/filtered-collection.js:13:32) at Function.findPage (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/crud.js:83:41) at PostsService.browsePosts (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/posts-service/lib/PostsService.js:81:44) at Object.query (/var/lib/ghost/versions/5.82.2/core/server/api/endpoints/posts.js:73:33)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Author slug with one letter causes failed filter  Issue Summary A staff member that signs up with a single-letter first name upon invitation will not be able to use Ghost at all. They only see an error message in the Ghost admin:  Request not understood error, cannot list posts. Error parsing filter  ![CleanShot 2024-05-05 at 19 03 18@2x](https://github.com/TryGhost/Ghost/assets/25703384/52fe6ae4-32bd-487d-99d7-4ee759370d79) Looking at the network requests, the request to `/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj` fails. As soon as the last filter is removed, the API request succeeds: `https://tireless-buzzard.pikapod.net/ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D` I have then tried to change the author slug in the database from ""j"" to ""jb""  and things started to work. This has been tested in different environments, both locally with development configurations, as well as on different managed hosts. Ghost v5.82.2 and v5.82.6 have been tested, both from the CLI as well as Docker images.  Steps to Reproduce 1. Invite a new staff member as contributor 2. Accept the invitation and register  IMPORTANT: Set the name to have a single-letter first name, e.g. ""J Doe"" instead of ""John Doe"" 3. See the error  Ghost Version v5.82.6  Node.js Version 18 LTS  How did you install Ghost? Ghost CLI  Database type MySQL 8  Browser & OS version Mac OS 14.4.1, latest Chrome and latest Safari tested  Relevant log / error output shell [2024-05-05 16:55:19] ERROR ""GET /ghost/api/admin/posts/?formats=mobiledoc%2Clexical&limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%2Csent%5D%2Bauthors%3Aj"" 400 12ms Error parsing filter Error ID: 415527a0-0b00-11ef-96dc-2bc1b8db7476  Error: Query Error: unrecognized text ""j"" in filter at char 24 at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:66:23) ished,sent]+authors:j)+type:post ^ at lexer.parseError (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:760:11) at Object.next (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:625:25) at Object.lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:635:22) at lex (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:246:27) at Parser.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/dist/parser.js:259:26) at exports.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql-lang/lib/nql.js:18:44) at api.parse (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:15:31) at api.querySQL (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/nql/lib/nql.js:49:44) at Builder.<anonymous> (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:63:24) at Object.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/helpers.js:164:14) at Child.query (/var/lib/ghost/versions/5.82.2/node_modules/bookshelf/lib/model.js:1387:22) at Child.applyDefaultAndCustomFilters (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/bookshelf-filter/lib/bookshelf-filter.js:56:22) at Function.getFilteredCollection (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/filtered-collection.js:13:32) at Function.findPage (/var/lib/ghost/versions/5.82.2/core/server/models/base/plugins/crud.js:83:41) at PostsService.browsePosts (/var/lib/ghost/versions/5.82.2/node_modules/@tryghost/posts-service/lib/PostsService.js:81:44) at Object.query (/var/lib/ghost/versions/5.82.2/core/server/api/endpoints/posts.js:73:33)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file other-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file other-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file other-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file other-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file other-file",bug,0.95
19839,Ghost,https://github.com/TryGhost/Ghost/issues/19839,"Error updating to Ghost 5.80 from 5.23, blog down, please help"," Issue Summary Hello, I just updated my Ghost blog from 5.23 to 5.80. After the update, I tried to restart Ghost, but it fails with this message: Ghost instance is not running! Starting  Starting Ghost A GhostError occurred.  Message: Ghost was able to start, but errored during boot with: insert into `collections_posts` (`collection_id`, `id`, `post_id`, `sort_order`) select '65f02f0dafb7eeb96c4c90a6' as `collection_id`, '65f02f0dafb7eeb96c4c90a8' as `id`, '637a812a81cfb759fad27265' as `post_id`, 0 as `sort_order` union all select '65f02f0dafb7eeb96c4c90a6' as `collection_id`,  (many more rows)  , '65314decb0c970c6a6eca545' as `post_id`, 0 as `sort_order` - SQLITE_ERROR: too many terms in compound SELECT Context: [object Object] Help: Error occurred while executing the following migration: 2023-07-10-05-16-55-add-built-in-collection-posts.js  Debug Information: OS: Debian GNU/Linux, v11 Node Version: v18.19.1 Ghost Version: 5.80.2 Ghost-CLI Version: 1.25.3 Environment: development Command: 'ghost restart' mysql Ver 8.0.27 for Linux on x86_64 (MySQL Community Server - GPL)  Steps to Reproduce Start with an install of v5.23 or below 5.80 Apparently the number of posts can be a cause, so get more than 500 posts. Run ghost update and ghost restart  Ghost Version 5.80.2  Node.js Version v18.19.1  How did you install Ghost? Command line  Database type MySQL 5.7  Browser & OS version Chrome, MacOS  Relevant log / error output shell Ghost instance is not running! Starting  Starting Ghost A GhostError occurred. Message: Ghost was able to start, but errored during boot with: insert into `collections_posts` (`collection_id`, `id`, `post_id`, `sort_order`) select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad3f' as `id`, '637a812a81cfb759fad27265' as `post_id`, 0 as `sort_order` union all select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad40' as `id`, '637a812a81cfb759fad27266' as `post_id`, 0 as `sort_order` union all select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad41' as `id`, '637a812a81cfb759fad27267'  (rows ommited) , '65f03420dd3af6bb83e5afe3' as `id`, '65314decb0c970c6a6eca545' as `post_id`, 0 as `sort_order` - SQLITE_ERROR: too many terms in compound SELECT Context: [object Object] Help: Error occurred while executing the following migration: 2023-07-10-05-16-55-add-built-in-collection-posts.js   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file,"Error updating to Ghost 5.80 from 5.23, blog down, please help  Issue Summary Hello, I just updated my Ghost blog from 5.23 to 5.80. After the update, I tried to restart Ghost, but it fails with this message: Ghost instance is not running! Starting  Starting Ghost A GhostError occurred.  Message: Ghost was able to start, but errored during boot with: insert into `collections_posts` (`collection_id`, `id`, `post_id`, `sort_order`) select '65f02f0dafb7eeb96c4c90a6' as `collection_id`, '65f02f0dafb7eeb96c4c90a8' as `id`, '637a812a81cfb759fad27265' as `post_id`, 0 as `sort_order` union all select '65f02f0dafb7eeb96c4c90a6' as `collection_id`,  (many more rows)  , '65314decb0c970c6a6eca545' as `post_id`, 0 as `sort_order` - SQLITE_ERROR: too many terms in compound SELECT Context: [object Object] Help: Error occurred while executing the following migration: 2023-07-10-05-16-55-add-built-in-collection-posts.js  Debug Information: OS: Debian GNU/Linux, v11 Node Version: v18.19.1 Ghost Version: 5.80.2 Ghost-CLI Version: 1.25.3 Environment: development Command: 'ghost restart' mysql Ver 8.0.27 for Linux on x86_64 (MySQL Community Server - GPL)  Steps to Reproduce Start with an install of v5.23 or below 5.80 Apparently the number of posts can be a cause, so get more than 500 posts. Run ghost update and ghost restart  Ghost Version 5.80.2  Node.js Version v18.19.1  How did you install Ghost? Command line  Database type MySQL 5.7  Browser & OS version Chrome, MacOS  Relevant log / error output shell Ghost instance is not running! Starting  Starting Ghost A GhostError occurred. Message: Ghost was able to start, but errored during boot with: insert into `collections_posts` (`collection_id`, `id`, `post_id`, `sort_order`) select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad3f' as `id`, '637a812a81cfb759fad27265' as `post_id`, 0 as `sort_order` union all select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad40' as `id`, '637a812a81cfb759fad27266' as `post_id`, 0 as `sort_order` union all select '65f03420dd3af6bb83e5ad3d' as `collection_id`, '65f03420dd3af6bb83e5ad41' as `id`, '637a812a81cfb759fad27267'  (rows ommited) , '65f03420dd3af6bb83e5afe3' as `id`, '65314decb0c970c6a6eca545' as `post_id`, 0 as `sort_order` - SQLITE_ERROR: too many terms in compound SELECT Context: [object Object] Help: Error occurred while executing the following migration: 2023-07-10-05-16-55-add-built-in-collection-posts.js   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file source-file source-file source-file source-file",no-bug,0.9
15515,Ghost,https://github.com/TryGhost/Ghost/issues/15515,An error occurs when display Member activity," Issue Summary It seems that e.data.link may not always have a ""to"" property. ![image](https://user-images.githubusercontent.com/1595779/193472912-6da462e8-2675-4c0c-82b6-1b5047e49982.png) ![image](https://user-images.githubusercontent.com/1595779/193472923-f6fff7c0-d26d-4419-b5a6-3308e667e7c7.png) https://github.com/TryGhost/Ghost/blob/0b41fbf102a77893667d265478a150753ae5c004/ghost/admin/app/helpers/parse-member-event.js#L235  Steps to Reproduce 1. open ghost/#/dashboard 2. click Member acrivity  Ghost Version 5.17.0  Node.js Version v14.17.3  How did you install Ghost? https://backspace.fm/ & Ubuntu 20.04.1 LTS (GNU/Linux 5.4.0-52-generic x86_64))  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | source-file,"An error occurs when display Member activity  Issue Summary It seems that e.data.link may not always have a ""to"" property. ![image](https://user-images.githubusercontent.com/1595779/193472912-6da462e8-2675-4c0c-82b6-1b5047e49982.png) ![image](https://user-images.githubusercontent.com/1595779/193472923-f6fff7c0-d26d-4419-b5a6-3308e667e7c7.png) https://github.com/TryGhost/Ghost/blob/0b41fbf102a77893667d265478a150753ae5c004/ghost/admin/app/helpers/parse-member-event.js#L235  Steps to Reproduce 1. open ghost/#/dashboard 2. click Member acrivity  Ghost Version 5.17.0  Node.js Version v14.17.3  How did you install Ghost? https://backspace.fm/ & Ubuntu 20.04.1 LTS (GNU/Linux 5.4.0-52-generic x86_64))  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file",no-bug,0.9
15450,Ghost,https://github.com/TryGhost/Ghost/issues/15450,Keyboard shortcut to save does not save data in admin members form," Issue Summary When using the cmd+s keyboard shortcut while editing a Member _when the input field is focused_ the change not actually saved - When the page is reloaded, the data is not present. *This only seems to happen if the input field is focused*. If no field is focused (no green outline) then the save works as expected.  Steps to Reproduce 1. default install of ghost 5.15 2. create a member 3. select (focus) the ""Note"" input and add some content 4. keeping the note field focused (green outline) use the cmd+s ""save"" shortcut. The ""saved"" green button indicator is shown (top right of right admin panel) 5. reload the page - observe the data added to note field is not saved note: the shortcut works if the field is not focused.  Ghost Version 5.15  Node.js Version 16  How did you install Ghost? self hosted (EC2) on Ubuntu 22.04. followed self-host guide from ghost documentation  Database type MySQL 8  Browser & OS version Chrome (105.0.5195.125) & Mac OS (12.4)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | source-file | other-file | source-file,"Keyboard shortcut to save does not save data in admin members form  Issue Summary When using the cmd+s keyboard shortcut while editing a Member _when the input field is focused_ the change not actually saved - When the page is reloaded, the data is not present. *This only seems to happen if the input field is focused*. If no field is focused (no green outline) then the save works as expected.  Steps to Reproduce 1. default install of ghost 5.15 2. create a member 3. select (focus) the ""Note"" input and add some content 4. keeping the note field focused (green outline) use the cmd+s ""save"" shortcut. The ""saved"" green button indicator is shown (top right of right admin panel) 5. reload the page - observe the data added to note field is not saved note: the shortcut works if the field is not focused.  Ghost Version 5.15  Node.js Version 16  How did you install Ghost? self hosted (EC2) on Ubuntu 22.04. followed self-host guide from ghost documentation  Database type MySQL 8  Browser & OS version Chrome (105.0.5195.125) & Mac OS (12.4)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file source-file other-file source-file",no-bug,0.9
17058,Ghost,https://github.com/TryGhost/Ghost/issues/17058,Code blocks are not sanitized during excerpt generation. Unintended script execution possible.," Issue Summary If the user creates a code block in the Ghost editor (old or beta version) at the very start of the post, and does not set a custom_excerpt, the excerpt generated can lead to unintended injection of any scripts onto the homepage. A simple example: Post looks like this: ![image](https://github.com/TryGhost/Ghost/assets/42299862/cfe2022b-4c11-4988-bbda-46ae0426cc00) Front page (Ruby) renders that like this: ![image](https://github.com/TryGhost/Ghost/assets/42299862/e79682ca-34f2-47b8-92fc-f389713f85ae) [Not just a Ruby problem. Can repro in any theme with an excerpt on the index page]  Steps to Reproduce Create a post. Start it with a code card. Start the code card with a script tag. Using a theme that displays excerpts on the front page, navigate to the front page.  Ghost Version 5.51  Node.js Version on Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version Chrome, Windows 10, recent.  Relevant log / error output shell see above - and yes, that shows up in my console logs!   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file,"Code blocks are not sanitized during excerpt generation. Unintended script execution possible.  Issue Summary If the user creates a code block in the Ghost editor (old or beta version) at the very start of the post, and does not set a custom_excerpt, the excerpt generated can lead to unintended injection of any scripts onto the homepage. A simple example: Post looks like this: ![image](https://github.com/TryGhost/Ghost/assets/42299862/cfe2022b-4c11-4988-bbda-46ae0426cc00) Front page (Ruby) renders that like this: ![image](https://github.com/TryGhost/Ghost/assets/42299862/e79682ca-34f2-47b8-92fc-f389713f85ae) [Not just a Ruby problem. Can repro in any theme with an excerpt on the index page]  Steps to Reproduce Create a post. Start it with a code card. Start the code card with a script tag. Using a theme that displays excerpts on the front page, navigate to the front page.  Ghost Version 5.51  Node.js Version on Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 8  Browser & OS version Chrome, Windows 10, recent.  Relevant log / error output shell see above - and yes, that shows up in my console logs!   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file",no-bug,0.9
18133,Ghost,https://github.com/TryGhost/Ghost/issues/18133,"the page crased while searching ""c++"" keyword"," Issue Summary the page crased while searching ""c++"" keyword  Steps to Reproduce 1. the page crased while searching ""c++"" keyword 2. ![image](https://github.com/TryGhost/Ghost/assets/53374430/d7f7965f-488f-486e-a634-2674b68b20d4)  Ghost Version 5.62.0  Node.js Version 16.19.1  How did you install Ghost? GHOST CLI & UBUNTU  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"the page crased while searching ""c++"" keyword  Issue Summary the page crased while searching ""c++"" keyword  Steps to Reproduce 1. the page crased while searching ""c++"" keyword 2. ![image](https://github.com/TryGhost/Ghost/assets/53374430/d7f7965f-488f-486e-a634-2674b68b20d4)  Ghost Version 5.62.0  Node.js Version 16.19.1  How did you install Ghost? GHOST CLI & UBUNTU  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.8
16817,Ghost,https://github.com/TryGhost/Ghost/issues/16817,Filter menu for member activity behaves oddly," Issue Summary Since 5.47.0, when viewing **Member activity**, the **Filter events** menu behaves oddly when the toggles are clicked. Each click causes the number of items in the menu to expand. <img width=""264"" alt=""Screen Shot 2023-05-17 at 3 42 27 PM"" src=""https://github.com/TryGhost/Ghost/assets/710176/7ee792b5-1277-48ca-837c-cd8c74017c97""> <img width=""264"" alt=""Screen Shot 2023-05-17 at 3 43 09 PM"" src=""https://github.com/TryGhost/Ghost/assets/710176/2147c2de-2926-497b-9924-730fdc531693"">  Steps to Reproduce 1. Visit `/ghost/#/members-activity` in the admin area of the Ghost site. 2. Click on the **Filter events** menu button. 3. Click on any of the menu item toggles. 4. Observe the menu expand with dozens of duplicated items.  Ghost Version 5.48.0  Node.js Version 16.20.0  How did you install Ghost? Ubuntu 22.04.2  Database type MySQL 8  Browser & OS version Safari 16.4.1, macOS 12.6.5  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"Filter menu for member activity behaves oddly  Issue Summary Since 5.47.0, when viewing **Member activity**, the **Filter events** menu behaves oddly when the toggles are clicked. Each click causes the number of items in the menu to expand. <img width=""264"" alt=""Screen Shot 2023-05-17 at 3 42 27 PM"" src=""https://github.com/TryGhost/Ghost/assets/710176/7ee792b5-1277-48ca-837c-cd8c74017c97""> <img width=""264"" alt=""Screen Shot 2023-05-17 at 3 43 09 PM"" src=""https://github.com/TryGhost/Ghost/assets/710176/2147c2de-2926-497b-9924-730fdc531693"">  Steps to Reproduce 1. Visit `/ghost/#/members-activity` in the admin area of the Ghost site. 2. Click on the **Filter events** menu button. 3. Click on any of the menu item toggles. 4. Observe the menu expand with dozens of duplicated items.  Ghost Version 5.48.0  Node.js Version 16.20.0  How did you install Ghost? Ubuntu 22.04.2  Database type MySQL 8  Browser & OS version Safari 16.4.1, macOS 12.6.5  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.9
14973,Ghost,https://github.com/TryGhost/Ghost/issues/14973,Error when parsing bookmark cards," Issue Summary When I copy a URL to my post and it turns to Bookmark card automatically. But for some site(e.g. some Chinese site), it fails to parse correct content with error encoding. Some fails to fetch icon and thumbnail preview. Its not site problem, I am sure there is something wrong with Ghost cause I can get these correctly in other CMS system.  Steps to Reproduce Please try to paste these in post: http://slide.news.sina.com.cn/slide_1_86058_547338.html#p=1 https://new.qq.com/omn/20220613/20220613A0A3G200.html ![](https://aws1.discourse-cdn.com/business4/uploads/ghost2/original/3X/0/5/05c28b59479a84620b726c41e38a7224d0f048dd.jpeg)  Ghost Version 5.2.2  Node.js Version 16.15.1  How did you install Ghost? Follow official tutorial.  Database type MySQL 8  Browser & OS version Ubuntu 20.04LTS  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | test-file | source-file | documentation-file | other-file | test-file | source-file | documentation-file | other-file | test-file | source-file | documentation-file | other-file | test-file | source-file | documentation-file | other-file,"Error when parsing bookmark cards  Issue Summary When I copy a URL to my post and it turns to Bookmark card automatically. But for some site(e.g. some Chinese site), it fails to parse correct content with error encoding. Some fails to fetch icon and thumbnail preview. Its not site problem, I am sure there is something wrong with Ghost cause I can get these correctly in other CMS system.  Steps to Reproduce Please try to paste these in post: http://slide.news.sina.com.cn/slide_1_86058_547338.html#p=1 https://new.qq.com/omn/20220613/20220613A0A3G200.html ![](https://aws1.discourse-cdn.com/business4/uploads/ghost2/original/3X/0/5/05c28b59479a84620b726c41e38a7224d0f048dd.jpeg)  Ghost Version 5.2.2  Node.js Version 16.15.1  How did you install Ghost? Follow official tutorial.  Database type MySQL 8  Browser & OS version Ubuntu 20.04LTS  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file test-file source-file documentation-file other-file test-file source-file documentation-file other-file test-file source-file documentation-file other-file test-file source-file documentation-file other-file",no-bug,0.8
21343,Ghost,https://github.com/TryGhost/Ghost/issues/21343,Quirky search behavior," Issue Summary I'm seeing some not-quite-right behavior from the sodo-search package, but having trouble coming up with a simple repro case. Here's what I've got: Run a search for 'fitness' at https://goodvibeswellness.com/ Scroll down. There are posts that actually match 'fitness', but the ui seems to get stuck with a bunch of posts that just match 'F' at the top. I can reproduce it for this site's content (when exported and imported locally), using sodo-search 1.3, and also 1.1. (That probably rules out the CJK changes being to blame.) I cannot reproduce it with another site running search at 1.1, nor on another site running search @1.3. Leaving this here in case anyone else is seeing something similar. ![image](https://github.com/user-attachments/assets/193e392e-7bd8-467d-adfd-a2aad089e801)  Steps to Reproduce see above  Ghost Version search 1.1-1.3  Node.js Version varies  How did you install Ghost? local & ghost pro  Database type MySQL 8  Browser & OS version chrome, windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Quirky search behavior  Issue Summary I'm seeing some not-quite-right behavior from the sodo-search package, but having trouble coming up with a simple repro case. Here's what I've got: Run a search for 'fitness' at https://goodvibeswellness.com/ Scroll down. There are posts that actually match 'fitness', but the ui seems to get stuck with a bunch of posts that just match 'F' at the top. I can reproduce it for this site's content (when exported and imported locally), using sodo-search 1.3, and also 1.1. (That probably rules out the CJK changes being to blame.) I cannot reproduce it with another site running search at 1.1, nor on another site running search @1.3. Leaving this here in case anyone else is seeing something similar. ![image](https://github.com/user-attachments/assets/193e392e-7bd8-467d-adfd-a2aad089e801)  Steps to Reproduce see above  Ghost Version search 1.1-1.3  Node.js Version varies  How did you install Ghost? local & ghost pro  Database type MySQL 8  Browser & OS version chrome, windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
15291,Ghost,https://github.com/TryGhost/Ghost/issues/15291,Regression: Redirect to signin/re-authenticate modal not shown when logged out,"We've had a regression with how unauthenticated requests are handled by Admin. Unauthenticated requests could occur if you've logged out in another tab and didn't realise you'd gone back to editing on a tab that looked like it was still logged in. ## Steps to reproduce 1. Open Ghost admin and ensure you're logged in in two different tabs 2. In tab 1, open the editor 3. In tab 2, logout 4. In tab 1, attempt to save ## Previous behaviour - whilst editing - show a re-authentication modal to allow quick sign-in and save - whilst performing any other action - redirect to signin screen ## Current behaviour: - all actions - show a slightly cryptic alert message `Authorization failed Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.` This is likely happening because we've moved from a `401` to a `403`. The cookie is being sent so the request is not ""Unauthenticated"" but it no longer matches a valid session so its ""Unauthorized"". Admin isn't currently set up to recognise a 403 and trigger the auto-logout/re-authenticate behaviour. There are potential edge cases if we treat 403 and 401 the same when it's a genuine ""not permitted"" error but Admin shouldn't be making any such requests unless your role is changed by another user whilst you're using it. Note: There is a skipped test for the re-authentication modal here: https://github.com/TryGhost/Ghost/blob/0695f74a653bff85d5a08ee7f97fc9a4a8ddbe63/ghost/admin/tests/acceptance/authentication-test.js#L97 which may have contributed to this regression slipping in. Ideally we'd get this test running again as well to prevent this regressing in future.  Ghost Version 5.10",source-file | source-file | source-file | source-file | test-file | config-file | documentation-file | source-file | other-file | source-file | source-file | source-file | other-file | source-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | source-file | documentation-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | other-file | test-file | test-file | test-file | documentation-file | documentation-file | source-file | documentation-file | test-file | test-file | documentation-file | documentation-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file | source-file | documentation-file | test-file | source-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | documentation-file | source-file | documentation-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | source-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Regression: Redirect to signin/re-authenticate modal not shown when logged out We've had a regression with how unauthenticated requests are handled by Admin. Unauthenticated requests could occur if you've logged out in another tab and didn't realise you'd gone back to editing on a tab that looked like it was still logged in. ## Steps to reproduce 1. Open Ghost admin and ensure you're logged in in two different tabs 2. In tab 1, open the editor 3. In tab 2, logout 4. In tab 1, attempt to save ## Previous behaviour - whilst editing - show a re-authentication modal to allow quick sign-in and save - whilst performing any other action - redirect to signin screen ## Current behaviour: - all actions - show a slightly cryptic alert message `Authorization failed Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.` This is likely happening because we've moved from a `401` to a `403`. The cookie is being sent so the request is not ""Unauthenticated"" but it no longer matches a valid session so its ""Unauthorized"". Admin isn't currently set up to recognise a 403 and trigger the auto-logout/re-authenticate behaviour. There are potential edge cases if we treat 403 and 401 the same when it's a genuine ""not permitted"" error but Admin shouldn't be making any such requests unless your role is changed by another user whilst you're using it. Note: There is a skipped test for the re-authentication modal here: https://github.com/TryGhost/Ghost/blob/0695f74a653bff85d5a08ee7f97fc9a4a8ddbe63/ghost/admin/tests/acceptance/authentication-test.js#L97 which may have contributed to this regression slipping in. Ideally we'd get this test running again as well to prevent this regressing in future.  Ghost Version 5.10 source-file source-file source-file source-file test-file config-file documentation-file source-file other-file source-file source-file source-file other-file source-file source-file other-file source-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file other-file source-file source-file source-file source-file source-file source-file source-file other-file other-file other-file other-file other-file other-file other-file other-file source-file documentation-file other-file other-file other-file other-file other-file other-file other-file other-file other-file test-file test-file test-file documentation-file documentation-file source-file documentation-file test-file test-file documentation-file documentation-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file documentation-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file documentation-file source-file documentation-file test-file source-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file test-file source-file source-file documentation-file test-file test-file test-file test-file test-file test-file documentation-file source-file documentation-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file source-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file test-file test-file test-file test-file documentation-file documentation-file documentation-file documentation-file other-file",bug,0.95
18753,Ghost,https://github.com/TryGhost/Ghost/issues/18753,Deleting the last character in a blockquote beneath an HTML card deletes the HTML card," Issue Summary I tried deleting the last character in a blockquote beneath an HTML card, and while the character disappeared so did the HTML card above it (while the empty blockquote remained). https://github.com/TryGhost/Ghost/assets/27488257/12a81ba8-09e8-4ef0-b612-23998a696c71  Steps to Reproduce 1. Create an HTML card with blockquoted text below it 2. Delete the text in the blockquote 3. See the HTML card disappear when the last character in the blockquote is deleted  Ghost Version 5.70.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file,"Deleting the last character in a blockquote beneath an HTML card deletes the HTML card  Issue Summary I tried deleting the last character in a blockquote beneath an HTML card, and while the character disappeared so did the HTML card above it (while the empty blockquote remained). https://github.com/TryGhost/Ghost/assets/27488257/12a81ba8-09e8-4ef0-b612-23998a696c71  Steps to Reproduce 1. Create an HTML card with blockquoted text below it 2. Delete the text in the blockquote 3. See the HTML card disappear when the last character in the blockquote is deleted  Ghost Version 5.70.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file documentation-file other-file",no-bug,0.9
16805,Ghost,https://github.com/TryGhost/Ghost/issues/16805,Can't render pt-br Portal Translations (beta)," Issue Summary In the new beta for Portal Translations, I am trying to use pt-br (Portuguese from Brazil) translations, but I keep getting pt (Portuguese from Portugal), which is somewhat different. I tried to wrap it up on quotes, but still get the same result. I think it might be some issue with the hyphen (I also tried without it). There is a [pt-br translation in Github](https://github.com/TryGhost/Ghost/tree/main/ghost/i18n/locales/pt-br), and it looks fine to me.  Steps to Reproduce Portuguese from Portugal is `pt`, while Portuguese from Brazil is `pt-br` 1. I enabled Portal Translation (beta) in the Labs section 2. I went to the general section and wrote `pt-br` in the locales field 3. I am getting the `pt` translations, not `pt-br`  Ghost Version 5.47.1  Node.js Version v16.19.1  How did you install Ghost? Digital Ocean droplet, with Ubuntu and Ghost CLI  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file,"Can't render pt-br Portal Translations (beta)  Issue Summary In the new beta for Portal Translations, I am trying to use pt-br (Portuguese from Brazil) translations, but I keep getting pt (Portuguese from Portugal), which is somewhat different. I tried to wrap it up on quotes, but still get the same result. I think it might be some issue with the hyphen (I also tried without it). There is a [pt-br translation in Github](https://github.com/TryGhost/Ghost/tree/main/ghost/i18n/locales/pt-br), and it looks fine to me.  Steps to Reproduce Portuguese from Portugal is `pt`, while Portuguese from Brazil is `pt-br` 1. I enabled Portal Translation (beta) in the Labs section 2. I went to the general section and wrote `pt-br` in the locales field 3. I am getting the `pt` translations, not `pt-br`  Ghost Version 5.47.1  Node.js Version v16.19.1  How did you install Ghost? Digital Ocean droplet, with Ubuntu and Ghost CLI  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file documentation-file documentation-file source-file documentation-file documentation-file source-file documentation-file documentation-file source-file documentation-file documentation-file",no-bug,0.8
14980,Ghost,https://github.com/TryGhost/Ghost/issues/14980,"Tenor V1 API has been decomissioned, unable to load Gifs from editor."," Issue Summary Whenever trying to insert a gif from Tenor on the editor, the error ""Unable to connect to Tenor, please check your connection"" intermittently appears. The reason for this is that Tenor V1 API has been deprecated and migrated to a Google Api.  Steps to Reproduce 1. Start writing a Post or a new Page 2. on the editor enter the `/tenor` command to open the GIF Search card 3. Tenor will display the error `Uh oh! Trouble reaching the Tenor API, please check your connection`  Ghost Version 5.2  Node.js Version 16.15.0  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version Chrome, Mac OS Monterey 12.4  Relevant log / error output shell GET https://g1.tenor.com/v1/trending?media_filter=minimal&key=null&contentfilter=off 401 (Unauthorized)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | other-file | source-file | source-file,"Tenor V1 API has been decomissioned, unable to load Gifs from editor.  Issue Summary Whenever trying to insert a gif from Tenor on the editor, the error ""Unable to connect to Tenor, please check your connection"" intermittently appears. The reason for this is that Tenor V1 API has been deprecated and migrated to a Google Api.  Steps to Reproduce 1. Start writing a Post or a new Page 2. on the editor enter the `/tenor` command to open the GIF Search card 3. Tenor will display the error `Uh oh! Trouble reaching the Tenor API, please check your connection`  Ghost Version 5.2  Node.js Version 16.15.0  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version Chrome, Mac OS Monterey 12.4  Relevant log / error output shell GET https://g1.tenor.com/v1/trending?media_filter=minimal&key=null&contentfilter=off 401 (Unauthorized)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file other-file source-file source-file",bug,0.9
14416,Ghost,https://github.com/TryGhost/Ghost/issues/14416,Broken preview inside the admin UI," Issue Summary The preview modal is zoomed in and only a part of it visible on the screen. Which resolves by removing this line: `./versions/4.42.0/core/built/assets/vendor.min-ba66b98f7c24fa40e061c7ffc94f4e23.css:1279: transform: translate(0, -30vh) scale(1.1);` And adding `height: 100%` I tried to find this line in the source code but couldn't.  Steps to Reproduce Installed the latest version.  Ghost Version 4.42.0  Node.js Version 16  How did you install Ghost? Initially with using DO image. But then using ghost cli  Database type MySQL 8  Browser & OS version Chrome Version 100.0.4896.60, OSX 10.15.7  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file,"Broken preview inside the admin UI  Issue Summary The preview modal is zoomed in and only a part of it visible on the screen. Which resolves by removing this line: `./versions/4.42.0/core/built/assets/vendor.min-ba66b98f7c24fa40e061c7ffc94f4e23.css:1279: transform: translate(0, -30vh) scale(1.1);` And adding `height: 100%` I tried to find this line in the source code but couldn't.  Steps to Reproduce Installed the latest version.  Ghost Version 4.42.0  Node.js Version 16  How did you install Ghost? Initially with using DO image. But then using ghost cli  Database type MySQL 8  Browser & OS version Chrome Version 100.0.4896.60, OSX 10.15.7  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file",no-bug,0.9
22882,Ghost,https://github.com/TryGhost/Ghost/issues/22882,staff2fa beta lab does not have a UI in the labs section of the admin site," Issue Summary The staff2fa beta lab does not have a toggle on the Labs section of the Ghost admin site in my self-hosted instance. Checked to see if it was an alpha lab on a local development instance on Ghost, also on 5.116.1 with enableDeveloperExperiments set to true in the settings file. Still no luck. From what Ive looked at though, it is marked as a beta lab currently. Briefly raised this [on the forum](https://forum.ghost.org/t/2fa-auth-slider-is-missing/56734), with others confirming that they can reproduce the issue. [vikaspotluri123](https://forum.ghost.org/u/vikaspotluri123) replied in the post I created stating that they also see it as a beta lab (as I also saw) per #21749. The issue seems that when it was removed from the alpha features UI due to it being changed to a beta lab, it was never actually added to the beta lab UI. As they stated, I am unsure if this is intentionalit does strike me as a bit odd! On the last part, if this _is_ intentional, please feel free to close this issue as not a bug, but a brief explanation would be appreciated, if possible! Thanks everyone for working on Ghost!  Steps to Reproduce 1. Go to your Ghost admin site on `/ghost`. 2. Open the site settings page. 3. Scroll down until you find the Labs section. 4. Click ""Open"" in the top-right corner of the labs card. 5. Observe no option to toggle on/off the `staff2fa` lab due to it not being listed.  Ghost Version Reproduced on 5.116.1 and 5.116.2  Node.js Version Reproduced on 20.19.0 and 22.14.0  How did you install Ghost? Via the CLI on a VPS running Ubuntu 22.04.5 LTS (prod) and Laptop macOS 15.4 (24E248) (local) environments  Database type MySQL 5.7  Browser & OS version Safari 18.4 (20621.1.15.11.10)  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",source-file | test-file | other-file | test-file | source-file | source-file | test-file | test-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file,"staff2fa beta lab does not have a UI in the labs section of the admin site  Issue Summary The staff2fa beta lab does not have a toggle on the Labs section of the Ghost admin site in my self-hosted instance. Checked to see if it was an alpha lab on a local development instance on Ghost, also on 5.116.1 with enableDeveloperExperiments set to true in the settings file. Still no luck. From what Ive looked at though, it is marked as a beta lab currently. Briefly raised this [on the forum](https://forum.ghost.org/t/2fa-auth-slider-is-missing/56734), with others confirming that they can reproduce the issue. [vikaspotluri123](https://forum.ghost.org/u/vikaspotluri123) replied in the post I created stating that they also see it as a beta lab (as I also saw) per #21749. The issue seems that when it was removed from the alpha features UI due to it being changed to a beta lab, it was never actually added to the beta lab UI. As they stated, I am unsure if this is intentionalit does strike me as a bit odd! On the last part, if this _is_ intentional, please feel free to close this issue as not a bug, but a brief explanation would be appreciated, if possible! Thanks everyone for working on Ghost!  Steps to Reproduce 1. Go to your Ghost admin site on `/ghost`. 2. Open the site settings page. 3. Scroll down until you find the Labs section. 4. Click ""Open"" in the top-right corner of the labs card. 5. Observe no option to toggle on/off the `staff2fa` lab due to it not being listed.  Ghost Version Reproduced on 5.116.1 and 5.116.2  Node.js Version Reproduced on 20.19.0 and 22.14.0  How did you install Ghost? Via the CLI on a VPS running Ubuntu 22.04.5 LTS (prod) and Laptop macOS 15.4 (24E248) (local) environments  Database type MySQL 5.7  Browser & OS version Safari 18.4 (20621.1.15.11.10)  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository source-file test-file other-file test-file source-file source-file test-file test-file source-file test-file test-file test-file test-file test-file test-file test-file test-file test-file",no-bug,0.9
14983,Ghost,https://github.com/TryGhost/Ghost/issues/14983,[Content API] Url set to 404 for tags when using multiple fields," Issue Summary When using multiple [fields](https://ghost.org/docs/content-api/#fields) on the Content API, the tag URLs are set to `https://demo.ghost.io/404/` instead of their corresponding URL.  Steps to Reproduce  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name json { ""tags"": [ { ""name"": ""Fables"" }, { ""name"": ""Fiction"" }, { ""name"": ""Getting Started"" }, { ""name"": ""Speeches"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url json { ""tags"": [ { ""url"": ""https://demo.ghost.io/tag/fables/"" }, { ""url"": ""https://demo.ghost.io/tag/fiction/"" }, { ""url"": ""https://demo.ghost.io/tag/getting-started/"" }, { ""url"": ""https://demo.ghost.io/tag/speeches/"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name,url  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url,name  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name%2Curl  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url%2Cname json { ""tags"": [ { ""name"": ""Fables"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Fiction"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Getting Started"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Speeches"", ""url"": ""https://demo.ghost.io/404/"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   Ghost Version 5.2.3  Node.js Version 16  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"[Content API] Url set to 404 for tags when using multiple fields  Issue Summary When using multiple [fields](https://ghost.org/docs/content-api/#fields) on the Content API, the tag URLs are set to `https://demo.ghost.io/404/` instead of their corresponding URL.  Steps to Reproduce  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name json { ""tags"": [ { ""name"": ""Fables"" }, { ""name"": ""Fiction"" }, { ""name"": ""Getting Started"" }, { ""name"": ""Speeches"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url json { ""tags"": [ { ""url"": ""https://demo.ghost.io/tag/fables/"" }, { ""url"": ""https://demo.ghost.io/tag/fiction/"" }, { ""url"": ""https://demo.ghost.io/tag/getting-started/"" }, { ""url"": ""https://demo.ghost.io/tag/speeches/"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name,url  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url,name  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=name%2Curl  https://demo.ghost.io/ghost/api/content/tags/?key=22444f78447824223cefc48062&filter=visibility%3Apublic&fields=url%2Cname json { ""tags"": [ { ""name"": ""Fables"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Fiction"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Getting Started"", ""url"": ""https://demo.ghost.io/404/"" }, { ""name"": ""Speeches"", ""url"": ""https://demo.ghost.io/404/"" } ], ""meta"": { ""pagination"": { ""page"": 1, ""limit"": 15, ""pages"": 1, ""total"": 8, ""next"": null, ""prev"": null } } }   Ghost Version 5.2.3  Node.js Version 16  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",bug,0.95
16748,Ghost,https://github.com/TryGhost/Ghost/issues/16748,admin/members/:id/signin_url won't take Owner's staff access token," Issue Summary I'm trying to make a fetch request to admin/members/:id/signin_url The [commit](https://github.com/TryGhost/Ghost/commit/b0ff1e7cacf619deed1d4f07c3cb0e7731707597) (Hi @naz !) that added the functionality seems to suggest this is possible. I'm converting the owner's staff access token into a JWT successfully, based on it working elsewhere on the admin API. I've tried on Ghost Pro (but it was a site where I'd switched owners, so could be an edge case). I've also tried on a production 5.13 self-hosted site, and on a 5.47 local install (Windows). Here's what I'm getting back (fresh 5.47 install, but all cases are the same): Request to: http://localhost:2368/ghost/api/canary/admin/members/6456ef85849b402bb40c61f4/signin_urls/  errors: [ { message: 'Permission error, cannot read member_signin_url.', context: 'You do not have permission to read member_signin_urls', type: 'NoPermissionError', details: null, property: null, help: null, code: null, id: '714c58e0-ec6e-11ed-94c9-6ba7df6bb971', ghostErrorCode: null } ]  The endpoint works fine if I pass in the site owner's cookie.  Steps to Reproduce  const session = require('express-session') const express = require(""express""); const fetch = require('node-fetch') const app = express(); app.use(express.json()); app.use(express.urlencoded({ extended: false })); const jwt = require('jsonwebtoken') const GhostAdminAPI = require('@tryghost/admin-api'); const GHOST_URL = 'http://localhost:2368' let GHOST_API_KEY = '6456efec849b402bb40c61fc:07df42c75551444cb88af8601acbdcc4cc0d8ea983392ddb44dbb1cebb87a32b'; //local install, not worried about leakage. let [GHOST_ID, GHOST_SECRET] = GHOST_API_KEY.split(':') const api = new GhostAdminAPI({ url: GHOST_URL, key: GHOST_API_KEY, version: ""v5.0"", }); let GHOST_TOKEN = jwt.sign({}, Buffer.from(GHOST_SECRET, 'hex'), { // eslint-disable-line no-undef keyid: GHOST_ID, algorithm: 'HS256', expiresIn: '5m', audience: '/canary/admin' }); console.log(GHOST_TOKEN) async function getMember(email) { let result = await api.members.browse({email:email, limit: 1}) console.log('getMember result is', result[0].id) return result[0].id; } async function getAuthUrl(id) { // does not work let result = await fetch(GHOST_URL + '/ghost/api/canary/admin/members/' + id + '/signin_urls/', { method: 'GET' , headers: { 'Authorization': `Ghost ${GHOST_TOKEN}`, 'Content-type': 'application/json'} } ) let json= await result.json() console.log('result is', json) return result; } async function getMemberUrl(id) { // works fine console.log('getMemberUrl request to: ', GHOST_URL + '/ghost/api/canary/admin/members/' + id ) let result = await fetch( GHOST_URL + '/ghost/api/canary/admin/members/' + id , { method: 'GET' , headers: { 'Authorization': 'Ghost ' + GHOST_TOKEN} }) let json= await result.json() console.log('result is', json) return result; } app.get(""/"", async (req, res) => { res.send(`<center style=""font-size:160%""> <p>This is Home Page </p> ${await getMemberUrl(await getMember('catsarisky@gmail.com'))} ${await getAuthUrl(await getMember('catsarisky@gmail.com'))} `); } ); app.listen(3002);   Ghost Version 5.47  Node.js Version 16  How did you install Ghost? Ghost Pro, also local install on Windows, also 5.13 production  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file,"admin/members/:id/signin_url won't take Owner's staff access token  Issue Summary I'm trying to make a fetch request to admin/members/:id/signin_url The [commit](https://github.com/TryGhost/Ghost/commit/b0ff1e7cacf619deed1d4f07c3cb0e7731707597) (Hi @naz !) that added the functionality seems to suggest this is possible. I'm converting the owner's staff access token into a JWT successfully, based on it working elsewhere on the admin API. I've tried on Ghost Pro (but it was a site where I'd switched owners, so could be an edge case). I've also tried on a production 5.13 self-hosted site, and on a 5.47 local install (Windows). Here's what I'm getting back (fresh 5.47 install, but all cases are the same): Request to: http://localhost:2368/ghost/api/canary/admin/members/6456ef85849b402bb40c61f4/signin_urls/  errors: [ { message: 'Permission error, cannot read member_signin_url.', context: 'You do not have permission to read member_signin_urls', type: 'NoPermissionError', details: null, property: null, help: null, code: null, id: '714c58e0-ec6e-11ed-94c9-6ba7df6bb971', ghostErrorCode: null } ]  The endpoint works fine if I pass in the site owner's cookie.  Steps to Reproduce  const session = require('express-session') const express = require(""express""); const fetch = require('node-fetch') const app = express(); app.use(express.json()); app.use(express.urlencoded({ extended: false })); const jwt = require('jsonwebtoken') const GhostAdminAPI = require('@tryghost/admin-api'); const GHOST_URL = 'http://localhost:2368' let GHOST_API_KEY = '6456efec849b402bb40c61fc:07df42c75551444cb88af8601acbdcc4cc0d8ea983392ddb44dbb1cebb87a32b'; //local install, not worried about leakage. let [GHOST_ID, GHOST_SECRET] = GHOST_API_KEY.split(':') const api = new GhostAdminAPI({ url: GHOST_URL, key: GHOST_API_KEY, version: ""v5.0"", }); let GHOST_TOKEN = jwt.sign({}, Buffer.from(GHOST_SECRET, 'hex'), { // eslint-disable-line no-undef keyid: GHOST_ID, algorithm: 'HS256', expiresIn: '5m', audience: '/canary/admin' }); console.log(GHOST_TOKEN) async function getMember(email) { let result = await api.members.browse({email:email, limit: 1}) console.log('getMember result is', result[0].id) return result[0].id; } async function getAuthUrl(id) { // does not work let result = await fetch(GHOST_URL + '/ghost/api/canary/admin/members/' + id + '/signin_urls/', { method: 'GET' , headers: { 'Authorization': `Ghost ${GHOST_TOKEN}`, 'Content-type': 'application/json'} } ) let json= await result.json() console.log('result is', json) return result; } async function getMemberUrl(id) { // works fine console.log('getMemberUrl request to: ', GHOST_URL + '/ghost/api/canary/admin/members/' + id ) let result = await fetch( GHOST_URL + '/ghost/api/canary/admin/members/' + id , { method: 'GET' , headers: { 'Authorization': 'Ghost ' + GHOST_TOKEN} }) let json= await result.json() console.log('result is', json) return result; } app.get(""/"", async (req, res) => { res.send(`<center style=""font-size:160%""> <p>This is Home Page </p> ${await getMemberUrl(await getMember('catsarisky@gmail.com'))} ${await getAuthUrl(await getMember('catsarisky@gmail.com'))} `); } ); app.listen(3002);   Ghost Version 5.47  Node.js Version 16  How did you install Ghost? Ghost Pro, also local install on Windows, also 5.13 production  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file documentation-file test-file test-file test-file test-file test-file source-file documentation-file test-file test-file test-file test-file test-file source-file documentation-file test-file test-file test-file test-file test-file source-file documentation-file test-file test-file test-file test-file test-file",bug,0.9
18872,Ghost,https://github.com/TryGhost/Ghost/issues/18872,Checkmarks next to tiers benefits that have been filled in have incorrect background colour in dark mode," Issue Summary As the title says, checkmarks next to tiers benefits that have been filled in have incorrect background colour in dark mode. **EDIT:** This was with the free tier, I don't know whether or not this also occurs with paid tiers. ![Xnapper-2023-11-06-16 50 50](https://github.com/TryGhost/Ghost/assets/27488257/3f2135c9-0b96-4d63-940b-8915ba31e525)  Steps to Reproduce 1. Navigate to Tiers while in dark mode 2. Add a benefit 3. See that the background of the checkmark to the filled-in-benefit has the incorrect background colour  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file | other-file,"Checkmarks next to tiers benefits that have been filled in have incorrect background colour in dark mode  Issue Summary As the title says, checkmarks next to tiers benefits that have been filled in have incorrect background colour in dark mode. **EDIT:** This was with the free tier, I don't know whether or not this also occurs with paid tiers. ![Xnapper-2023-11-06-16 50 50](https://github.com/TryGhost/Ghost/assets/27488257/3f2135c9-0b96-4d63-940b-8915ba31e525)  Steps to Reproduce 1. Navigate to Tiers while in dark mode 2. Add a benefit 3. See that the background of the checkmark to the filled-in-benefit has the incorrect background colour  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file other-file",no-bug,0.95
17523,Ghost,https://github.com/TryGhost/Ghost/issues/17523,Unable to run VSCode debugger from launch.json," Issue Summary When running `Full Offline Dev` or `Full Dev` from VSCode debugger there is an error about `dev.js` not found <img width=""748"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/34619861/4380817b-39b6-4083-b74b-6831636b716a"">  Steps to Reproduce 1. Open VSCode debugger 2. Try running `Full Offline Dev` or `Full Dev`  Ghost Version @  Node.js Version 18.16.0  How did you install Ghost? Source  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file,"Unable to run VSCode debugger from launch.json  Issue Summary When running `Full Offline Dev` or `Full Dev` from VSCode debugger there is an error about `dev.js` not found <img width=""748"" alt=""image"" src=""https://github.com/TryGhost/Ghost/assets/34619861/4380817b-39b6-4083-b74b-6831636b716a"">  Steps to Reproduce 1. Open VSCode debugger 2. Try running `Full Offline Dev` or `Full Dev`  Ghost Version @  Node.js Version 18.16.0  How did you install Ghost? Source  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file",no-bug,0.95
16603,Ghost,https://github.com/TryGhost/Ghost/issues/16603,Change the spelling of the Kiev to Kyiv in the settings timezone picker,"The timezone picker shows a russian version of spelling ""Kiev"" and should be ""Kyiv"" to be more like Ukrainian spelling of . Screenshot of the Admin UI's `/settings/general` screen: ![Image](https://user-images.githubusercontent.com/675397/230929662-3d8fade0-9bae-4198-a9b0-acc27c8134ba.png) A [similar issue in momenjs](https://github.com/moment/moment/issues/6008). We need to investigate first, which library the Admin UI is using to fetch the timezone data into the dropdown.",source-file | documentation-file | other-file | source-file | documentation-file | other-file,"Change the spelling of the Kiev to Kyiv in the settings timezone picker The timezone picker shows a russian version of spelling ""Kiev"" and should be ""Kyiv"" to be more like Ukrainian spelling of . Screenshot of the Admin UI's `/settings/general` screen: ![Image](https://user-images.githubusercontent.com/675397/230929662-3d8fade0-9bae-4198-a9b0-acc27c8134ba.png) A [similar issue in momenjs](https://github.com/moment/moment/issues/6008). We need to investigate first, which library the Admin UI is using to fetch the timezone data into the dropdown. source-file documentation-file other-file source-file documentation-file other-file",no-bug,0.9
16125,Ghost,https://github.com/TryGhost/Ghost/issues/16125,Email recipient subsets can be chosen but it sometimes still sends to everyone when retrying," Issue Summary A grassroots group Im part of is wanting to start sending out a newsletter but we ran into the same problems helpfully documented in #15725. As an experiment, I tried creating a label so I could send to a subset of subscribers of under 100. Ive been trying this repeatedly as I continue to try to get it sent and Ive found in a specific circumstance that after I complete the penultimate step it says its going to send to all subscribers despite me having chosen the label, like this: ![ghost-subscriber-filter-broken](https://user-images.githubusercontent.com/43280/212576117-c6803b90-aa09-4745-a2b3-c9705ad81295.gif) If I understand this correctly, its a UI-only problem, since the records in `email_receipients` have already been created and will be reused, so the actual subset will still be used. Thanks for all the work on this over the years  Steps to Reproduce 1. Publish a post that includes emailing a subset of subscribers, but have the emailing fail. 2. Unpublish the post. 3. Refresh the browser. 4. Try publishing again with emailing, it will show initially that it will send only to the subset but then on the last step will show thats emailing everyone.  Ghost Version 5.30.0  Node.js Version 16.19.0  How did you install Ghost? Docker image served by Dokku on Ubuntu 16.04  Database type MySQL 8  Browser & OS version Brave 1.41.100 (Chromium 103.0.5060.134) on macOS 13.1  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | source-file | source-file,"Email recipient subsets can be chosen but it sometimes still sends to everyone when retrying  Issue Summary A grassroots group Im part of is wanting to start sending out a newsletter but we ran into the same problems helpfully documented in #15725. As an experiment, I tried creating a label so I could send to a subset of subscribers of under 100. Ive been trying this repeatedly as I continue to try to get it sent and Ive found in a specific circumstance that after I complete the penultimate step it says its going to send to all subscribers despite me having chosen the label, like this: ![ghost-subscriber-filter-broken](https://user-images.githubusercontent.com/43280/212576117-c6803b90-aa09-4745-a2b3-c9705ad81295.gif) If I understand this correctly, its a UI-only problem, since the records in `email_receipients` have already been created and will be reused, so the actual subset will still be used. Thanks for all the work on this over the years  Steps to Reproduce 1. Publish a post that includes emailing a subset of subscribers, but have the emailing fail. 2. Unpublish the post. 3. Refresh the browser. 4. Try publishing again with emailing, it will show initially that it will send only to the subset but then on the last step will show thats emailing everyone.  Ghost Version 5.30.0  Node.js Version 16.19.0  How did you install Ghost? Docker image served by Dokku on Ubuntu 16.04  Database type MySQL 8  Browser & OS version Brave 1.41.100 (Chromium 103.0.5060.134) on macOS 13.1  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file source-file",no-bug,0.9
21103,Ghost,https://github.com/TryGhost/Ghost/issues/21103,Comments don't play well with theme toggles," Issue Summary (This report references comments-ui version 0.17) The mode=""auto"" styling works great -- it's awesome that themes that are running in dark mode automagically get dark mode for comments too. HOWEVER (yeah, there's always a however), themes with a toggle to let the user choose between dark/light cause the auto mode to break, as the comments iframe does not adjust colors when the theme does. Theme creators could work around this by providing a background behind the comments that doesn't change when the slider is toggled after the page load, but that's going to be a pretty ugly hack and means that the comments are going to look weirdly wrong after the toggle button is flipped on that page. Is there a way to make comments-ui detect that the color of the container has changed?  Steps to Reproduce Quick way to fake switching modes: Add (or remove) ""class='dark-mode'"" to the html tag in casper.  Ghost Version 5.92  Node.js Version 18  How did you install Ghost? WSL2/using Ghost-cli  Database type MySQL 8  Browser & OS version chrome/ Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | other-file,"Comments don't play well with theme toggles  Issue Summary (This report references comments-ui version 0.17) The mode=""auto"" styling works great -- it's awesome that themes that are running in dark mode automagically get dark mode for comments too. HOWEVER (yeah, there's always a however), themes with a toggle to let the user choose between dark/light cause the auto mode to break, as the comments iframe does not adjust colors when the theme does. Theme creators could work around this by providing a background behind the comments that doesn't change when the slider is toggled after the page load, but that's going to be a pretty ugly hack and means that the comments are going to look weirdly wrong after the toggle button is flipped on that page. Is there a way to make comments-ui detect that the color of the container has changed?  Steps to Reproduce Quick way to fake switching modes: Add (or remove) ""class='dark-mode'"" to the html tag in casper.  Ghost Version 5.92  Node.js Version 18  How did you install Ghost? WSL2/using Ghost-cli  Database type MySQL 8  Browser & OS version chrome/ Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file other-file",no-bug,0.9
18948,Ghost,https://github.com/TryGhost/Ghost/issues/18948,Lexical kg-cards missing on website after ghost update with zip," Issue Summary I updated my custom Ghost to version 5.71.2. It runs fine in development via `yarn dev`, but upgrading the 5.70 docker with an .tgz file from `yarn archive` brings up some problems. When editing existing posts (mobiledoc) and saving them with the new editor (lexical) ALL images and other kg-cards will not show up anymore on the website of this post. There is not a single error in webconsole or `docker-compose logs -f` during/saving editing or while upgrading ghost. When running the original 5.71 docker image or `yarn dev` everything runs fine without this issue. ~Looking into the sqlite database, I'll found that the lexical code is complete with the image.~ So it seems like an update problem, that I cant narrow down without some help. Any idea how to fix this?  Steps to Reproduce 1. create the following DOCKERFILE  FROM ghost:5.71.0-alpine WORKDIR /var/lib/ghost COPY ./ghost-5.71.2.tgz /var/lib RUN apk add --no-cache git USER node RUN yarn --version RUN yarn cache clean RUN rm -rf node_modules RUN yarn RUN chmod -R 00775 /var/lib/ghost/content &&\ ghost update --force --zip /var/lib/ghost-5.71.2.tgz RUN chmod -R 00775 /var/lib/ghost/content  2. create the docker-compose.yml  version: '3.1' services: lfg-ghost: build: . container_name: lfg-ghost restart: always ports: - 2368:2368 volumes: - ./content:/var/lib/ghost/content - ./.env:/var/lib/ghost/.env environment: NODE_ENV: development database__client: sqlite3 database__connection__filename: /var/lib/ghost/content/data/ghost.db url: mail__transport: SMTP mail__from: mail__options__service: SMTP mail__options__host: mail__options__port: 587 mail__options__auth__user: mail__options__auth__pass:  3. Download the release file from [here](https://github.com/ASAMedia/Ghost-LFG/releases/tag/5.71.2-lfg.19) 4. run `sudo docker-compose build`, `sudo docker-compose up -d`  Ghost Version 5.71.2  Node.js Version 18  How did you install Ghost? docker-compose  Database type SQLite3  Browser & OS version Win 11/Ubuntu 20/Chrome/Firefox/Edge  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Lexical kg-cards missing on website after ghost update with zip  Issue Summary I updated my custom Ghost to version 5.71.2. It runs fine in development via `yarn dev`, but upgrading the 5.70 docker with an .tgz file from `yarn archive` brings up some problems. When editing existing posts (mobiledoc) and saving them with the new editor (lexical) ALL images and other kg-cards will not show up anymore on the website of this post. There is not a single error in webconsole or `docker-compose logs -f` during/saving editing or while upgrading ghost. When running the original 5.71 docker image or `yarn dev` everything runs fine without this issue. ~Looking into the sqlite database, I'll found that the lexical code is complete with the image.~ So it seems like an update problem, that I cant narrow down without some help. Any idea how to fix this?  Steps to Reproduce 1. create the following DOCKERFILE  FROM ghost:5.71.0-alpine WORKDIR /var/lib/ghost COPY ./ghost-5.71.2.tgz /var/lib RUN apk add --no-cache git USER node RUN yarn --version RUN yarn cache clean RUN rm -rf node_modules RUN yarn RUN chmod -R 00775 /var/lib/ghost/content &&\ ghost update --force --zip /var/lib/ghost-5.71.2.tgz RUN chmod -R 00775 /var/lib/ghost/content  2. create the docker-compose.yml  version: '3.1' services: lfg-ghost: build: . container_name: lfg-ghost restart: always ports: - 2368:2368 volumes: - ./content:/var/lib/ghost/content - ./.env:/var/lib/ghost/.env environment: NODE_ENV: development database__client: sqlite3 database__connection__filename: /var/lib/ghost/content/data/ghost.db url: mail__transport: SMTP mail__from: mail__options__service: SMTP mail__options__host: mail__options__port: 587 mail__options__auth__user: mail__options__auth__pass:  3. Download the release file from [here](https://github.com/ASAMedia/Ghost-LFG/releases/tag/5.71.2-lfg.19) 4. run `sudo docker-compose build`, `sudo docker-compose up -d`  Ghost Version 5.71.2  Node.js Version 18  How did you install Ghost? docker-compose  Database type SQLite3  Browser & OS version Win 11/Ubuntu 20/Chrome/Firefox/Edge  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file documentation-file documentation-file other-file",no-bug,0.9
15497,Ghost,https://github.com/TryGhost/Ghost/issues/15497,Post settings menu date picker doesn't use site timezone," Issue Summary The timezone of post settings menu date picker doesn't match the site's timezone. This prevents a user from editing the publication date of a post when the publication date is published the following day relative to the user's current timezone.  Steps to Reproduce - Set the site's timezone to one that is a day ahead of your current timezone - Start a new draft - Open the post settings menu, note that the publish date is set to the right date (one day ahead of you) - Try to edit that value: <img width=""357"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/192858508-1ac67e9e-2098-438c-a2e7-9684b7a75cb3.png""> Note that although the date in the box is correct (the 29th in the screenshot), the selected date in the date picker is the previous day (the 28th), or today in your current timezone. Today in the site timezone (29th) is not selectable.  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Tested in latest Mac Chrome  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Post settings menu date picker doesn't use site timezone  Issue Summary The timezone of post settings menu date picker doesn't match the site's timezone. This prevents a user from editing the publication date of a post when the publication date is published the following day relative to the user's current timezone.  Steps to Reproduce - Set the site's timezone to one that is a day ahead of your current timezone - Start a new draft - Open the post settings menu, note that the publish date is set to the right date (one day ahead of you) - Try to edit that value: <img width=""357"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/192858508-1ac67e9e-2098-438c-a2e7-9684b7a75cb3.png""> Note that although the date in the box is correct (the 29th in the screenshot), the selected date in the date picker is the previous day (the 28th), or today in your current timezone. Today in the site timezone (29th) is not selectable.  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Tested in latest Mac Chrome  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.8
17242,Ghost,https://github.com/TryGhost/Ghost/issues/17242,"Login popup message showing `{{name}}` atrribute, not the exact name"," Issue Summary When a user logs in, a welcome message pops up in the browser, but there is just an attribute {{name}} itself in the message, not the real username the user already set in the first place. Like below: ![image](https://github.com/TryGhost/Ghost/assets/4630628/8d937912-2ddc-4df9-95e7-f5ab2a5b5d1a)  Steps to Reproduce 1. click login on a ghost site and input your email (already a member). 2. click the link in the email to log in. 3. logged in, the popup message shows  Ghost Version 5.53.4  Node.js Version v18.16.1  How did you install Ghost? Ubuntu 22.04.2 LTS (GNU/Linux 5.15.0-76-generic x86_64)  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Login popup message showing `{{name}}` atrribute, not the exact name  Issue Summary When a user logs in, a welcome message pops up in the browser, but there is just an attribute {{name}} itself in the message, not the real username the user already set in the first place. Like below: ![image](https://github.com/TryGhost/Ghost/assets/4630628/8d937912-2ddc-4df9-95e7-f5ab2a5b5d1a)  Steps to Reproduce 1. click login on a ghost site and input your email (already a member). 2. click the link in the email to log in. 3. logged in, the popup message shows  Ghost Version 5.53.4  Node.js Version v18.16.1  How did you install Ghost? Ubuntu 22.04.2 LTS (GNU/Linux 5.15.0-76-generic x86_64)  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
15020,Ghost,https://github.com/TryGhost/Ghost/issues/15020,Additional CSS in the Head tag which breaks theme CSS, Issue Summary After upgrade to Ghost 5.3.0 I see that additional CSS has been added in the Head tag which breaks the theme style:  <style>@tailwind base; @tailwind components; @tailwind utilities; /* Custom reset */ html { font-size: 62.5%; } body { font-size: 1.5rem; } .ghost-display { display: block !important; } </style>  The demo of the theme I use: https://scriptor.justgoodthemes.com/  Steps to Reproduce 1. Update to the latest Ghost version 5.3.0. 2. Use custom theme.  Ghost Version 5.3.0  Node.js Version v14.19.0  How did you install Ghost? Digital Ocean  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,source-file,Additional CSS in the Head tag which breaks theme CSS  Issue Summary After upgrade to Ghost 5.3.0 I see that additional CSS has been added in the Head tag which breaks the theme style:  <style>@tailwind base; @tailwind components; @tailwind utilities; /* Custom reset */ html { font-size: 62.5%; } body { font-size: 1.5rem; } .ghost-display { display: block !important; } </style>  The demo of the theme I use: https://scriptor.justgoodthemes.com/  Steps to Reproduce 1. Update to the latest Ghost version 5.3.0. 2. Use custom theme.  Ghost Version 5.3.0  Node.js Version v14.19.0  How did you install Ghost? Digital Ocean  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file,no-bug,0.9
17342,Ghost,https://github.com/TryGhost/Ghost/issues/17342,"Download/delete theme buttons have white ""border"" in dark mode"," Issue Summary While in dark mode, if you try to download or delete a theme a white ""border"" exists at the top of the selection box as well as the bottom left and right corners. ![Xnapper-2023-07-13-10 34 37](https://github.com/TryGhost/Ghost/assets/27488257/df00d48b-735a-4478-8656-0b143f91e03a) ![Xnapper-2023-07-13-10 39 11](https://github.com/TryGhost/Ghost/assets/27488257/20f638d3-b413-4f67-a035-dc9ea242fb70)  Steps to Reproduce 1. Switch to dark mode 2. Try to download or delete a theme 3. See white ""borders""  Ghost Version 5.54.0  Node.js Version ?  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Download/delete theme buttons have white ""border"" in dark mode  Issue Summary While in dark mode, if you try to download or delete a theme a white ""border"" exists at the top of the selection box as well as the bottom left and right corners. ![Xnapper-2023-07-13-10 34 37](https://github.com/TryGhost/Ghost/assets/27488257/df00d48b-735a-4478-8656-0b143f91e03a) ![Xnapper-2023-07-13-10 39 11](https://github.com/TryGhost/Ghost/assets/27488257/20f638d3-b413-4f67-a035-dc9ea242fb70)  Steps to Reproduce 1. Switch to dark mode 2. Try to download or delete a theme 3. See white ""borders""  Ghost Version 5.54.0  Node.js Version ?  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.95
18888,Ghost,https://github.com/TryGhost/Ghost/issues/18888,"Descenders of ""Toggle header"" get cut off"," Issue Summary The ""Toggle header"" placeholder title for Toggle cards needs some extra line-height as its descenders get cut off. ![Xnapper-2023-11-07-10 30 06](https://github.com/TryGhost/Ghost/assets/27488257/4ee37479-1847-4bb0-ad51-d473b7106df3)  Steps to Reproduce 1. Create a Toggle card 2. See that the descenders are cut off at the bottom  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | documentation-file | other-file,"Descenders of ""Toggle header"" get cut off  Issue Summary The ""Toggle header"" placeholder title for Toggle cards needs some extra line-height as its descenders get cut off. ![Xnapper-2023-11-07-10 30 06](https://github.com/TryGhost/Ghost/assets/27488257/4ee37479-1847-4bb0-ad51-d473b7106df3)  Steps to Reproduce 1. Create a Toggle card 2. See that the descenders are cut off at the bottom  Ghost Version 5.71.2+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file documentation-file other-file",no-bug,0.95
20304,Ghost,https://github.com/TryGhost/Ghost/issues/20304,Discord/Slack Webhook Integration," Issue Summary When using the native Slack integration with a Discord channel with no excerpt defined, the paywall feature is ignored in the snippet posted. This potentially leaks information that may be meant to keep from being public. Additionally, the post's Author is not listed properly and is attributed to the blog itself. ![image](https://github.com/TryGhost/Ghost/assets/5253894/0d0214f7-3db8-4894-8709-3f498bb84458) ![image](https://github.com/TryGhost/Ghost/assets/5253894/f56c9b8a-52e6-4f20-a206-589d63d96fa6)  Steps to Reproduce 1. Write a post with a paywall but without an excerpt. 2. Add the Slack integration to Discord by appending `/slack` to the end of the url and adding to Discord. 3. Publish the post.  Ghost Version 5.82.8  Node.js Version 18.19.1  How did you install Ghost? Digital Ocean droplet Ubuntu 24.04  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Discord/Slack Webhook Integration  Issue Summary When using the native Slack integration with a Discord channel with no excerpt defined, the paywall feature is ignored in the snippet posted. This potentially leaks information that may be meant to keep from being public. Additionally, the post's Author is not listed properly and is attributed to the blog itself. ![image](https://github.com/TryGhost/Ghost/assets/5253894/0d0214f7-3db8-4894-8709-3f498bb84458) ![image](https://github.com/TryGhost/Ghost/assets/5253894/f56c9b8a-52e6-4f20-a206-589d63d96fa6)  Steps to Reproduce 1. Write a post with a paywall but without an excerpt. 2. Add the Slack integration to Discord by appending `/slack` to the end of the url and adding to Discord. 3. Publish the post.  Ghost Version 5.82.8  Node.js Version 18.19.1  How did you install Ghost? Digital Ocean droplet Ubuntu 24.04  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.8
15500,Ghost,https://github.com/TryGhost/Ghost/issues/15500,Incorrect quotes in translate helper causes 500 error," Issue Summary Using smart quotes in the translate helper causes page visits to throw 500 errors. Mac OS for example will auto-convert quotes by default, and this a common and VERY hard to spot issue for people new to code. Smart quotes example: `{{t This causes an error}}` Straight quotes example: `{{t ""This causes an error""}}` As handlebars would always expect straight quotes, I suspect this is true for several helpers. Although the fact that this is an error is correct, we have a policy of never throwing 500 Internal Server errors for theme issues, but instead throw 400 Bad Request errors. This is slightly odd, but nothing is wrong with the server, it's doing everything correctly and therefore this is not an error that the person running Ghost needs to deal with, but rather the user who uploaded the theme. In this case, the error can probably be handled better.  Steps to Reproduce 1. Open the default.hbs file of the current active theme 2. Paste in the example translate helper with smart quotes `{{t This causes an error}}` 3. Try to visit any page 4. See the 500 error in the logs  Ghost Version 4.42.1  Node.js Version 16.14.2  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Any  Relevant log / error output shell HTTP/1.1 500 Internal Server Error -- TypeError: [default.hbs] Cannot read properties of undefined (reading 'hash') at Object.t (/home/ghost/core/frontend/helpers/t.js:18:26) at Object.wrapper (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js:15:19) at Object.eval [as main] (eval at createFunctionContext (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:13:92) at main (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21) at Object.invokePartial (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:334:12) at Object.invokePartialWrapper [as invokePartial] (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:84:39) at Object.eval [as main] (eval at createFunctionContext (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:39:28) at main (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21) at renderTemplate (/home/ghost/node_modules/express-hbs/lib/hbs.js:490:13) at _stackRenderer (/home/ghost/node_modules/express-hbs/lib/hbs.js:519:9) at renderTemplate (/home/ghost/node_modules/express-hbs/lib/hbs.js:499:5) at render (/home/ghost/node_modules/express-hbs/lib/hbs.js:526:5)    Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | test-file | source-file | source-file | source-file | test-file,"Incorrect quotes in translate helper causes 500 error  Issue Summary Using smart quotes in the translate helper causes page visits to throw 500 errors. Mac OS for example will auto-convert quotes by default, and this a common and VERY hard to spot issue for people new to code. Smart quotes example: `{{t This causes an error}}` Straight quotes example: `{{t ""This causes an error""}}` As handlebars would always expect straight quotes, I suspect this is true for several helpers. Although the fact that this is an error is correct, we have a policy of never throwing 500 Internal Server errors for theme issues, but instead throw 400 Bad Request errors. This is slightly odd, but nothing is wrong with the server, it's doing everything correctly and therefore this is not an error that the person running Ghost needs to deal with, but rather the user who uploaded the theme. In this case, the error can probably be handled better.  Steps to Reproduce 1. Open the default.hbs file of the current active theme 2. Paste in the example translate helper with smart quotes `{{t This causes an error}}` 3. Try to visit any page 4. See the 500 error in the logs  Ghost Version 4.42.1  Node.js Version 16.14.2  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version Any  Relevant log / error output shell HTTP/1.1 500 Internal Server Error -- TypeError: [default.hbs] Cannot read properties of undefined (reading 'hash') at Object.t (/home/ghost/core/frontend/helpers/t.js:18:26) at Object.wrapper (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js:15:19) at Object.eval [as main] (eval at createFunctionContext (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:13:92) at main (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21) at Object.invokePartial (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:334:12) at Object.invokePartialWrapper [as invokePartial] (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:84:39) at Object.eval [as main] (eval at createFunctionContext (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:39:28) at main (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/ghost/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21) at renderTemplate (/home/ghost/node_modules/express-hbs/lib/hbs.js:490:13) at _stackRenderer (/home/ghost/node_modules/express-hbs/lib/hbs.js:519:9) at renderTemplate (/home/ghost/node_modules/express-hbs/lib/hbs.js:499:5) at render (/home/ghost/node_modules/express-hbs/lib/hbs.js:526:5)    Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file test-file source-file source-file source-file test-file",no-bug,0.9
21123,Ghost,https://github.com/TryGhost/Ghost/issues/21123,Tips and Donation Feature - Request URL Issue," Issue Summary Hello, I am new to ghost so please let me know if I can offer further clarification to my problem. Thank you. I have a self-hosted ghost install, and I updated ghost to include the tips/donation feature. When I visit: https://domain.com/blog/#/portal/support, there is an issue with these two requests: session/ | 404 | fetch | FeedbackPage.js:12 create-stripe-checkout-session/ | 404 | fetch | FeedbackPage.js:12 and I see this message in the browser: Sorry, that didnt work. Something went wrong, please try again later. The request urls look like this: Request URL: https://domain.com/members/api/session/ Request URL: https://domain.com/members/api/create-stripe-checkout-session/ however I am expecting them to be: Request URL: https://domain.com/blog/members/api/session/ Request URL: https://domain.com/blog/members/api/create-stripe-checkout-session/ as https://domain.com/blog is what is setup in my ghost config Also, if I visit https://domain.com/blog/#/portal/signup this request, for example, returns 204 Fetchmember/ 204 fetch FeedbackPage.js:12 with the following request url: Request URL: https://domain.com/blog/members/api/member/ I am trying to understand why /blog/ is not being included in the requests sent when visiting https://domain.com/blog/#/portal/support For example, if I run curl -i https://domain.com/blog/members/api/session/ I get a 204 response. Thank you for your help. - Sally  Steps to Reproduce Assumes self-hosted ghost installation where ghost is located here: https://domain.com/blog Update ghost to include tips/donations Expected request url to match and behave similarly to #/portal/signup  Ghost Version 5.92.0  Node.js Version 18.20.4  How did you install Ghost? Digital Ocean Ubuntu  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"Tips and Donation Feature - Request URL Issue  Issue Summary Hello, I am new to ghost so please let me know if I can offer further clarification to my problem. Thank you. I have a self-hosted ghost install, and I updated ghost to include the tips/donation feature. When I visit: https://domain.com/blog/#/portal/support, there is an issue with these two requests: session/ | 404 | fetch | FeedbackPage.js:12 create-stripe-checkout-session/ | 404 | fetch | FeedbackPage.js:12 and I see this message in the browser: Sorry, that didnt work. Something went wrong, please try again later. The request urls look like this: Request URL: https://domain.com/members/api/session/ Request URL: https://domain.com/members/api/create-stripe-checkout-session/ however I am expecting them to be: Request URL: https://domain.com/blog/members/api/session/ Request URL: https://domain.com/blog/members/api/create-stripe-checkout-session/ as https://domain.com/blog is what is setup in my ghost config Also, if I visit https://domain.com/blog/#/portal/signup this request, for example, returns 204 Fetchmember/ 204 fetch FeedbackPage.js:12 with the following request url: Request URL: https://domain.com/blog/members/api/member/ I am trying to understand why /blog/ is not being included in the requests sent when visiting https://domain.com/blog/#/portal/support For example, if I run curl -i https://domain.com/blog/members/api/session/ I get a 204 response. Thank you for your help. - Sally  Steps to Reproduce Assumes self-hosted ghost installation where ghost is located here: https://domain.com/blog Update ghost to include tips/donations Expected request url to match and behave similarly to #/portal/signup  Ghost Version 5.92.0  Node.js Version 18.20.4  How did you install Ghost? Digital Ocean Ubuntu  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",bug,0.9
14640,Ghost,https://github.com/TryGhost/Ghost/issues/14640,Email stats don't work with Mailgun EU domain," Issue Summary Email stats are updated only for the first fetched page of stats from Mailgun due to a missing EU domain in the code. This is resolved in https://github.com/TryGhost/Publishing/pull/73 Opening a ticket here just in case the PR gets missed.  Steps to Reproduce 1. Send a lot of emails through EU Mailgun account 2. Wait until email stats are updated They will be updated only partially - only the first 300 events are fetched.  Ghost Version 4.46.0  Node.js Version 14  How did you install Ghost? cli  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell [2022-05-02 11:13:01] INFO Worker for job ""email-analytics-fetch-latest"" online 2022-05-02T11:13:01.652Z ghost:jobs:email-analytics:fetch-latest Starting email analytics fetch of latest events 2022-05-02T11:13:01.664Z ghost:services:email-analytics getLastSeenEventTimestamp: finished in 8ms 2022-05-02T11:13:01.664Z @tryghost/email-analytics-service:services:email-analytics fetchLatest: starting 2022-05-02T11:13:01.665Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: starting fetching first events page 2022-05-02T11:13:01.928Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: finished fetching first page with 300 events 2022-05-02T11:13:03.503Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: starting fetching next page https://api.eu.mailgun.net/v3/example.com/events/xxxxxxx 2022-05-02T11:13:03.553Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: finished fetching next page with 0 events 2022-05-02T11:13:03.553Z @tryghost/email-analytics-service:services:email-analytics fetchLatest: finished in 1889ms. Fetched 300 events 2022-05-02T11:13:03.553Z ghost:jobs:email-analytics:fetch-latest Finished fetching 300 analytics events in 1901ms 2022-05-02T11:13:03.553Z ghost:jobs:email-analytics:fetch-latest Starting email analytics aggregation for 1 emails 2022-05-02T11:13:04.847Z ghost:jobs:email-analytics:fetch-latest Finished aggregating email analytics in 1294ms [2022-05-02 11:13:04] INFO Worker for job email-analytics-fetch-latest sent a message: Fetched 300 events and aggregated stats for 1 emails in 3195ms [2022-05-02 11:13:04] INFO Worker for job email-analytics-fetch-latest sent a message: done    Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file | source-file | test-file | test-file | test-file,"Email stats don't work with Mailgun EU domain  Issue Summary Email stats are updated only for the first fetched page of stats from Mailgun due to a missing EU domain in the code. This is resolved in https://github.com/TryGhost/Publishing/pull/73 Opening a ticket here just in case the PR gets missed.  Steps to Reproduce 1. Send a lot of emails through EU Mailgun account 2. Wait until email stats are updated They will be updated only partially - only the first 300 events are fetched.  Ghost Version 4.46.0  Node.js Version 14  How did you install Ghost? cli  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell [2022-05-02 11:13:01] INFO Worker for job ""email-analytics-fetch-latest"" online 2022-05-02T11:13:01.652Z ghost:jobs:email-analytics:fetch-latest Starting email analytics fetch of latest events 2022-05-02T11:13:01.664Z ghost:services:email-analytics getLastSeenEventTimestamp: finished in 8ms 2022-05-02T11:13:01.664Z @tryghost/email-analytics-service:services:email-analytics fetchLatest: starting 2022-05-02T11:13:01.665Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: starting fetching first events page 2022-05-02T11:13:01.928Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: finished fetching first page with 300 events 2022-05-02T11:13:03.503Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: starting fetching next page https://api.eu.mailgun.net/v3/example.com/events/xxxxxxx 2022-05-02T11:13:03.553Z @tryghost/email-analytics-provider-mailgun:email-analytics-provider-mailgun _fetchPages: finished fetching next page with 0 events 2022-05-02T11:13:03.553Z @tryghost/email-analytics-service:services:email-analytics fetchLatest: finished in 1889ms. Fetched 300 events 2022-05-02T11:13:03.553Z ghost:jobs:email-analytics:fetch-latest Finished fetching 300 analytics events in 1901ms 2022-05-02T11:13:03.553Z ghost:jobs:email-analytics:fetch-latest Starting email analytics aggregation for 1 emails 2022-05-02T11:13:04.847Z ghost:jobs:email-analytics:fetch-latest Finished aggregating email analytics in 1294ms [2022-05-02 11:13:04] INFO Worker for job email-analytics-fetch-latest sent a message: Fetched 300 events and aggregated stats for 1 emails in 3195ms [2022-05-02 11:13:04] INFO Worker for job email-analytics-fetch-latest sent a message: done    Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file source-file test-file test-file test-file",no-bug,0.8
16057,Ghost,https://github.com/TryGhost/Ghost/issues/16057,Ghost appears to redundantly create Stripe Customer objects via API," Issue Summary While this isn't high impact, it appears that checkouts initiated in Ghost to create new subscriptions will redundantly create customer objects in Stripe, with one copy having only a name/email address and the other copy having the actual subscription inside of it. This will pollute search results and make customer counts inaccurate. Note here, for example, how the count of new customers is almost 2X the count of new successful payments. <img width=""680"" alt="" 2023-01-03 10 25 20"" src=""https://user-images.githubusercontent.com/32929/210289537-65d2f069-15b2-43af-bfcf-2f6db9e714c1.png""> I believe I've figured out what is happening via Ghost's invocation of Stripe APIs. Here's what the history of API calls looks like for a single new subscriber: <img width=""561"" alt="" 2023-01-03 10 17 43"" src=""https://user-images.githubusercontent.com/32929/210289211-f6eacd83-a02b-458c-88bb-fad8ced723ca.png""> We see Ghost pre-creating a Customer object prior to creating a Checkout session, which is one valid way to do it. However, the call to create the checkout session (POST /v1/checkout/sessions) does not reference the created Customer object. This results in Stripe creating a second Customer ""at need"", per the description [here](https://stripe.com/docs/api/checkout/sessions/create) > customer:  If blank for Checkout Sessions in payment or subscription mode, Checkout will create a new Customer object based on information provided during the payment flow. The fix is simple, I think: cause the /v1/checkout/sessions POST API call to contain the customer ID, which will look something like cust_ , in the request. There's some cleanup which could be done relatively trivially by Ghost on users' behalf, or in the alternative, you could release a snippet for users to query their Stripe API, search for the empty customers that duplicate live customers, and delete the empties. (I might write a script for this.)  Steps to Reproduce I think this should be observable for any Ghost instance making new subscriptions against Stripe. 1. Connect Ghost to Stripe. 2. Start a new paid subscription using a new email address. 3. Wait a few seconds for bookkeeping to happen. 4. Check the associated Stripe account; you will likely see two new customer objects, one with only the name/email and the other with the name/email and associated subscription/payment method/etc.  Ghost Version Current version via Ghost Pro hosting  Node.js Version Current version via Ghost Pro hosting  How did you install Ghost? Current version via Ghost Pro hosting  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | source-file | test-file,"Ghost appears to redundantly create Stripe Customer objects via API  Issue Summary While this isn't high impact, it appears that checkouts initiated in Ghost to create new subscriptions will redundantly create customer objects in Stripe, with one copy having only a name/email address and the other copy having the actual subscription inside of it. This will pollute search results and make customer counts inaccurate. Note here, for example, how the count of new customers is almost 2X the count of new successful payments. <img width=""680"" alt="" 2023-01-03 10 25 20"" src=""https://user-images.githubusercontent.com/32929/210289537-65d2f069-15b2-43af-bfcf-2f6db9e714c1.png""> I believe I've figured out what is happening via Ghost's invocation of Stripe APIs. Here's what the history of API calls looks like for a single new subscriber: <img width=""561"" alt="" 2023-01-03 10 17 43"" src=""https://user-images.githubusercontent.com/32929/210289211-f6eacd83-a02b-458c-88bb-fad8ced723ca.png""> We see Ghost pre-creating a Customer object prior to creating a Checkout session, which is one valid way to do it. However, the call to create the checkout session (POST /v1/checkout/sessions) does not reference the created Customer object. This results in Stripe creating a second Customer ""at need"", per the description [here](https://stripe.com/docs/api/checkout/sessions/create) > customer:  If blank for Checkout Sessions in payment or subscription mode, Checkout will create a new Customer object based on information provided during the payment flow. The fix is simple, I think: cause the /v1/checkout/sessions POST API call to contain the customer ID, which will look something like cust_ , in the request. There's some cleanup which could be done relatively trivially by Ghost on users' behalf, or in the alternative, you could release a snippet for users to query their Stripe API, search for the empty customers that duplicate live customers, and delete the empties. (I might write a script for this.)  Steps to Reproduce I think this should be observable for any Ghost instance making new subscriptions against Stripe. 1. Connect Ghost to Stripe. 2. Start a new paid subscription using a new email address. 3. Wait a few seconds for bookkeeping to happen. 4. Check the associated Stripe account; you will likely see two new customer objects, one with only the name/email and the other with the name/email and associated subscription/payment method/etc.  Ghost Version Current version via Ghost Pro hosting  Node.js Version Current version via Ghost Pro hosting  How did you install Ghost? Current version via Ghost Pro hosting  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file source-file test-file",no-bug,0.8
15563,Ghost,https://github.com/TryGhost/Ghost/issues/15563,Unexpected behaviour with Cmd+C keybinding on post page," Issue Summary When trying to copy text from an article using the Cmd+C key combination, the scroll goes straight to the comments section. When your blog provides code snippets that are frequently copied, this is really bad behaviour  Steps to Reproduce If it makes difference, the Journal theme activated 1. Visit any post page 2. Press Cmd+C  Ghost Version 5.17.2  Node.js Version v16.15.1  How did you install Ghost? Ubuntu, Ghost-CLI 1.19.3  Database type MySQL 5.7  Browser & OS version Safari, MacOS 12.6  Relevant log / error output shell -   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file,"Unexpected behaviour with Cmd+C keybinding on post page  Issue Summary When trying to copy text from an article using the Cmd+C key combination, the scroll goes straight to the comments section. When your blog provides code snippets that are frequently copied, this is really bad behaviour  Steps to Reproduce If it makes difference, the Journal theme activated 1. Visit any post page 2. Press Cmd+C  Ghost Version 5.17.2  Node.js Version v16.15.1  How did you install Ghost? Ubuntu, Ghost-CLI 1.19.3  Database type MySQL 5.7  Browser & OS version Safari, MacOS 12.6  Relevant log / error output shell -   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file",no-bug,0.95
16652,Ghost,https://github.com/TryGhost/Ghost/issues/16652,Card assets files aren't generated by Ghost when using the `include` keyword," Issue Summary According to the [CardAssetService file](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/card-assets/service.js#L33-L38), a theme developer could specify the list of assets files (JavaScript and CSS) they want Ghost to be generate. I don't know if I'm the only one having this bug, but when I add the `card_assets.include` keyword in my `package.json` file, the `cards.min.css` and `cards.min.js` files aren't generated by Ghost. json { ""config"": { ""card_assets"": { ""include"": [ ""audio"", ""header"" ] } }  And I tried to debug and see the generated globs [here](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/card-assets/service.js#L104), but I haven't been able to see any relevant debug logs. Maybe I'm doing something wrong with my debug configuration? Here is my `docker-compose` file with the `DEBUG` variable set to `card-assets`. yaml version: '3.8' services: ghost: container_name: ""ghost"" environment: NODE_ENV: 'development' server__port: 2368 url: 'http://localhost:2368' DEBUG: 'card-assets' image: ghost:5.43.0-alpine ports: - ""2368:2368"" volumes: - './.content/config.production.json:/var/lib/ghost/config.production.json' - './.content/data:/var/lib/ghost/content/data' - './.content/images:/var/lib/ghost/content/images' - './.content/logs:/var/lib/ghost/content/logs' - './.content/settings:/var/lib/ghost/content/settings' - './:/var/lib/ghost/content/themes/casper'  Here are some screenshots: **With `exclude` (working as expected):** ![image](https://user-images.githubusercontent.com/7907713/232500014-2df20a25-37ac-42f0-bf92-44143d305caa.png) **With `include` (not working):** ![image](https://user-images.githubusercontent.com/7907713/232500251-6fe8c344-16e8-4d0b-a892-cec1b2aa72eb.png)  Steps to Reproduce 1. Specify the `card_assets.include` keyword in your theme `package.json`. json { ""config"": { ""card_assets"": { ""include"": [ ""audio"", ""header"" ] } }  2. Restart Ghost 3. Open your website and check if the `cards.min.css` and `cards.min.js` files were generated and included by Ghost.  Ghost Version 5.43.0  Node.js Version v18.15.0  How did you install Ghost? Docker  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | test-file,"Card assets files aren't generated by Ghost when using the `include` keyword  Issue Summary According to the [CardAssetService file](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/card-assets/service.js#L33-L38), a theme developer could specify the list of assets files (JavaScript and CSS) they want Ghost to be generate. I don't know if I'm the only one having this bug, but when I add the `card_assets.include` keyword in my `package.json` file, the `cards.min.css` and `cards.min.js` files aren't generated by Ghost. json { ""config"": { ""card_assets"": { ""include"": [ ""audio"", ""header"" ] } }  And I tried to debug and see the generated globs [here](https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/services/card-assets/service.js#L104), but I haven't been able to see any relevant debug logs. Maybe I'm doing something wrong with my debug configuration? Here is my `docker-compose` file with the `DEBUG` variable set to `card-assets`. yaml version: '3.8' services: ghost: container_name: ""ghost"" environment: NODE_ENV: 'development' server__port: 2368 url: 'http://localhost:2368' DEBUG: 'card-assets' image: ghost:5.43.0-alpine ports: - ""2368:2368"" volumes: - './.content/config.production.json:/var/lib/ghost/config.production.json' - './.content/data:/var/lib/ghost/content/data' - './.content/images:/var/lib/ghost/content/images' - './.content/logs:/var/lib/ghost/content/logs' - './.content/settings:/var/lib/ghost/content/settings' - './:/var/lib/ghost/content/themes/casper'  Here are some screenshots: **With `exclude` (working as expected):** ![image](https://user-images.githubusercontent.com/7907713/232500014-2df20a25-37ac-42f0-bf92-44143d305caa.png) **With `include` (not working):** ![image](https://user-images.githubusercontent.com/7907713/232500251-6fe8c344-16e8-4d0b-a892-cec1b2aa72eb.png)  Steps to Reproduce 1. Specify the `card_assets.include` keyword in your theme `package.json`. json { ""config"": { ""card_assets"": { ""include"": [ ""audio"", ""header"" ] } }  2. Restart Ghost 3. Open your website and check if the `cards.min.css` and `cards.min.js` files were generated and included by Ghost.  Ghost Version 5.43.0  Node.js Version v18.15.0  How did you install Ghost? Docker  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file test-file",no-bug,0.9
15558,Ghost,https://github.com/TryGhost/Ghost/issues/15558,Some tests fail depending on system timezone," Issue Summary On a PC set to a UTC+7 timezone, the following tests fail: - filter-test (sometimes) - gh-date-picker-test - gh-date-time-picker-test.js  Steps to Reproduce 1. Change your system timezone to Asia/Bangkok 2. Run `yarn test`  Ghost Version main  Node.js Version v16.17.1  How did you install Ghost? From source  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output shell Acceptance: Members filtering filtering can filter by newsletter subscription  message: > # of initial member rows: expected 6 to equal 7 Integration: Component: gh-date-picker defaults to now when @value is empty  message: > date input: expected input.gh-input.gh-datepicker-input[placeholder=""YYYY-MM-DD""][aria-label=""Selected date""][data-test-date-picker-input][type=""text""] to have value '2022-02-22', but the value was '2022-02-23'   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | test-file,"Some tests fail depending on system timezone  Issue Summary On a PC set to a UTC+7 timezone, the following tests fail: - filter-test (sometimes) - gh-date-picker-test - gh-date-time-picker-test.js  Steps to Reproduce 1. Change your system timezone to Asia/Bangkok 2. Run `yarn test`  Ghost Version main  Node.js Version v16.17.1  How did you install Ghost? From source  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output shell Acceptance: Members filtering filtering can filter by newsletter subscription  message: > # of initial member rows: expected 6 to equal 7 Integration: Component: gh-date-picker defaults to now when @value is empty  message: > date input: expected input.gh-input.gh-datepicker-input[placeholder=""YYYY-MM-DD""][aria-label=""Selected date""][data-test-date-picker-input][type=""text""] to have value '2022-02-22', but the value was '2022-02-23'   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file test-file",no-bug,0.9
14452,Ghost,https://github.com/TryGhost/Ghost/issues/14452,"{{tiers}} helper with custom prefix, separator, last separator, and/or suffix does not pass GScan"," Issue Summary A theme includes `{{tiers}}` helper with custom prefix, separator, last separator, and/or suffix does not pass GScan. E.g. using `{{tiers prefix=""Access with:""}}` we receive an error during activation: ![Zrzut ekranu 2022-04-9 o 22 43 32](https://user-images.githubusercontent.com/23366922/162592830-7359fec0-1843-4e7f-b17f-fa892e9f0573.png) Custom prefix, separator, last separator, and/or suffix are consistent with the documentation => https://ghost.org/docs/themes/helpers/tiers/  Steps to Reproduce 1. Add a custom prefix, such as: `{{tiers prefix=""Access with:""}} 2. Upload and activate the theme in the Ghost Admin.  Ghost Version 4.43.0  Node.js Version v16.13.0  How did you install Ghost? production / ubuntu  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file,"{{tiers}} helper with custom prefix, separator, last separator, and/or suffix does not pass GScan  Issue Summary A theme includes `{{tiers}}` helper with custom prefix, separator, last separator, and/or suffix does not pass GScan. E.g. using `{{tiers prefix=""Access with:""}}` we receive an error during activation: ![Zrzut ekranu 2022-04-9 o 22 43 32](https://user-images.githubusercontent.com/23366922/162592830-7359fec0-1843-4e7f-b17f-fa892e9f0573.png) Custom prefix, separator, last separator, and/or suffix are consistent with the documentation => https://ghost.org/docs/themes/helpers/tiers/  Steps to Reproduce 1. Add a custom prefix, such as: `{{tiers prefix=""Access with:""}} 2. Upload and activate the theme in the Ghost Admin.  Ghost Version 4.43.0  Node.js Version v16.13.0  How did you install Ghost? production / ubuntu  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file",no-bug,0.9
15252,Ghost,https://github.com/TryGhost/Ghost/issues/15252,Unable to delete post with nested comment," Issue Summary Whenever you try to delete a post that has a comment and a reply to that comment, an internal server error occurs: `Internal server error, cannot delete post. Cannot set properties of undefined (setting 'message')`  Steps to Reproduce 1. Create a new blog post and publish it 2. Leave a comment on that blog post 3. Reply to that comment 4. Attempt to delete the blog post  Ghost Version 5.9.4  Node.js Version 16.16  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell {""name"":""Log"",""hostname"":""example"",""pid"":696855,""level"":50,""req"":{""meta"":{""requestId"":""07055caf-c581-4d77-81a3-01f7055c77c7"",""userId"":""1""},""url"":""/posts/62fdbbfb752fb6a221f26e9d/"",""method"":""DELETE"",""originalUrl"":""/ghost/api/admin/posts/62fdbbfb752fb6a221f26e9d/"",""params"":{},""headers"":{""host"":""blog.example.org"",""cf-ipcountry"":""US"",""cdn-loop"":""cloudflare"",""accept-encoding"":""gzip"",""x-forwarded-for"":""**REDACTED**"",""cf-ray"":""**REDACTED**"",""x-forwarded-proto"":""https, https"",""cf-visitor"":""{\""scheme\"":\""https\""}"",""accept"":""application/json, text/javascript, */*; q=0.01"",""x-requested-with"":""XMLHttpRequest"",""x-ghost-version"":""5.9"",""app-pragma"":""no-cache"",""user-agent"":""Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.81 Safari/537.36"",""content-type"":""application/json; charset=UTF-8"",""sec-gpc"":""1"",""origin"":""https://blog.example.org"",""sec-fetch-site"":""same-origin"",""sec-fetch-mode"":""cors"",""sec-fetch-dest"":""empty"",""referer"":""https://blog.example.org/ghost/"",""accept-language"":""en-US,en;q=0.9,de;q=0.8"",""cf-connecting-ip"":""**REDACTED**"",""cookie"":""**REDACTED**"",""x-forwarded-host"":""blog.example.org""},""query"":{}},""res"":{""_headers"":{""x-powered-by"":""Express"",""cache-control"":""no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0"",""access-control-allow-origin"":""https://blog.example.org"",""vary"":""Origin, Accept-Encoding"",""content-type"":""application/json; charset=utf-8"",""content-length"":""286"",""etag"":""W/\""11e-JGRxNJsjDWlG04oL0DLfIS39Z7M\""""},""statusCode"":500,""responseTime"":""70ms""},""err"":{""id"":""eec45ac0-1eab-11ed-8676-618ce3f5ed56"",""domain"":""https://blog.example.org"",""code"":null,""name"":""InternalServerError"",""statusCode"":500,""level"":""critical"",""message"":""Cannot set properties of undefined (setting 'message')"",""stack"":""TypeError: Cannot set properties of undefined (setting 'message')\n at module.exports.prepareError (/var/www/blog.example.org/versions/5.9.4/node_modules/@tryghost/mw-error-handler/lib/mw-error-handler.js:79:19)\n at ErrorCtor (/var/www/blog.example.org/versions/5.9.4/node_modules/create-error/create-error.js:29:18)\n at runMicrotasks (<anonymous>)\n at processTicksAndRejections (node:internal/process/task_queues:96:5)"",""hideStack"":false},""msg"":""Cannot set properties of undefined (setting 'message')"",""time"":""2022-08-18T04:12:11.248Z"",""v"":0}   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | test-file | source-file | source-file | test-file,"Unable to delete post with nested comment  Issue Summary Whenever you try to delete a post that has a comment and a reply to that comment, an internal server error occurs: `Internal server error, cannot delete post. Cannot set properties of undefined (setting 'message')`  Steps to Reproduce 1. Create a new blog post and publish it 2. Leave a comment on that blog post 3. Reply to that comment 4. Attempt to delete the blog post  Ghost Version 5.9.4  Node.js Version 16.16  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell {""name"":""Log"",""hostname"":""example"",""pid"":696855,""level"":50,""req"":{""meta"":{""requestId"":""07055caf-c581-4d77-81a3-01f7055c77c7"",""userId"":""1""},""url"":""/posts/62fdbbfb752fb6a221f26e9d/"",""method"":""DELETE"",""originalUrl"":""/ghost/api/admin/posts/62fdbbfb752fb6a221f26e9d/"",""params"":{},""headers"":{""host"":""blog.example.org"",""cf-ipcountry"":""US"",""cdn-loop"":""cloudflare"",""accept-encoding"":""gzip"",""x-forwarded-for"":""**REDACTED**"",""cf-ray"":""**REDACTED**"",""x-forwarded-proto"":""https, https"",""cf-visitor"":""{\""scheme\"":\""https\""}"",""accept"":""application/json, text/javascript, */*; q=0.01"",""x-requested-with"":""XMLHttpRequest"",""x-ghost-version"":""5.9"",""app-pragma"":""no-cache"",""user-agent"":""Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.81 Safari/537.36"",""content-type"":""application/json; charset=UTF-8"",""sec-gpc"":""1"",""origin"":""https://blog.example.org"",""sec-fetch-site"":""same-origin"",""sec-fetch-mode"":""cors"",""sec-fetch-dest"":""empty"",""referer"":""https://blog.example.org/ghost/"",""accept-language"":""en-US,en;q=0.9,de;q=0.8"",""cf-connecting-ip"":""**REDACTED**"",""cookie"":""**REDACTED**"",""x-forwarded-host"":""blog.example.org""},""query"":{}},""res"":{""_headers"":{""x-powered-by"":""Express"",""cache-control"":""no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0"",""access-control-allow-origin"":""https://blog.example.org"",""vary"":""Origin, Accept-Encoding"",""content-type"":""application/json; charset=utf-8"",""content-length"":""286"",""etag"":""W/\""11e-JGRxNJsjDWlG04oL0DLfIS39Z7M\""""},""statusCode"":500,""responseTime"":""70ms""},""err"":{""id"":""eec45ac0-1eab-11ed-8676-618ce3f5ed56"",""domain"":""https://blog.example.org"",""code"":null,""name"":""InternalServerError"",""statusCode"":500,""level"":""critical"",""message"":""Cannot set properties of undefined (setting 'message')"",""stack"":""TypeError: Cannot set properties of undefined (setting 'message')\n at module.exports.prepareError (/var/www/blog.example.org/versions/5.9.4/node_modules/@tryghost/mw-error-handler/lib/mw-error-handler.js:79:19)\n at ErrorCtor (/var/www/blog.example.org/versions/5.9.4/node_modules/create-error/create-error.js:29:18)\n at runMicrotasks (<anonymous>)\n at processTicksAndRejections (node:internal/process/task_queues:96:5)"",""hideStack"":false},""msg"":""Cannot set properties of undefined (setting 'message')"",""time"":""2022-08-18T04:12:11.248Z"",""v"":0}   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file test-file source-file source-file test-file source-file source-file test-file source-file source-file test-file",bug,0.95
18569,Ghost,https://github.com/TryGhost/Ghost/issues/18569,Pasting a link over selected text deletes the text," Issue Summary Having had my Ghost(Pro) instance updated to 5.68 yesterday and thus tried out the new editor for the first time, I noticed that pasting links onto selected text doesn't apply the link to the text but rather deletes the text. In mobiledoc-days executing that action would in fact apply the link to the text, obviating one having to hover over the selected text, click on the link icon, pasting the text into the box, and hitting enter.  Steps to Reproduce 1. Copy a link 2. Select some text in the editor 3. Attempt to paste the text 4. See the selected text disappear  Ghost Version 5.68  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file,"Pasting a link over selected text deletes the text  Issue Summary Having had my Ghost(Pro) instance updated to 5.68 yesterday and thus tried out the new editor for the first time, I noticed that pasting links onto selected text doesn't apply the link to the text but rather deletes the text. In mobiledoc-days executing that action would in fact apply the link to the text, obviating one having to hover over the selected text, click on the link icon, pasting the text into the box, and hitting enter.  Steps to Reproduce 1. Copy a link 2. Select some text in the editor 3. Attempt to paste the text 4. See the selected text disappear  Ghost Version 5.68  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file",no-bug,0.9
18836,Ghost,https://github.com/TryGhost/Ghost/issues/18836,"""Invalid Theme"" when trying to add limit specification to {{recommendations}} helper"," Issue Summary I've integrated the `{{recommendations}}` helper into my theme locally, and have successfully uploaded that theme to Ghost(Pro). However, with mention of the new `{{recommendations}}` functionalities via the docs, and having amended `{{recommendations}}` to `{{recommendations limit=""10""}}` (to use an example value given in the docs), the site works with the expected behaviour locally (without doing a restart) but the theme won't upload to Ghost(Pro). ![Xnapper-2023-11-02-12 17 13](https://github.com/TryGhost/Ghost/assets/27488257/05106cb1-a209-4cd1-bb06-1981a2b509ca) GScan gives a similar message. As expected, doing a restart on the local instance does in fact result in an error message being displayed (even though the actual local site continues to work fine). ![Xnapper-2023-11-02-12 55 07](https://github.com/TryGhost/Ghost/assets/27488257/cdef8362-0763-41d2-97d2-31422754a7ef)  Steps to Reproduce 1. Add the limit specification to the `{{recommendations}}` helper (such as `{{recommendations limit=""10""}}`). 2. Upload the zipped theme 3. See ""Invalid Theme"" message  Ghost Version 5.71.0+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file,"""Invalid Theme"" when trying to add limit specification to {{recommendations}} helper  Issue Summary I've integrated the `{{recommendations}}` helper into my theme locally, and have successfully uploaded that theme to Ghost(Pro). However, with mention of the new `{{recommendations}}` functionalities via the docs, and having amended `{{recommendations}}` to `{{recommendations limit=""10""}}` (to use an example value given in the docs), the site works with the expected behaviour locally (without doing a restart) but the theme won't upload to Ghost(Pro). ![Xnapper-2023-11-02-12 17 13](https://github.com/TryGhost/Ghost/assets/27488257/05106cb1-a209-4cd1-bb06-1981a2b509ca) GScan gives a similar message. As expected, doing a restart on the local instance does in fact result in an error message being displayed (even though the actual local site continues to work fine). ![Xnapper-2023-11-02-12 55 07](https://github.com/TryGhost/Ghost/assets/27488257/cdef8362-0763-41d2-97d2-31422754a7ef)  Steps to Reproduce 1. Add the limit specification to the `{{recommendations}}` helper (such as `{{recommendations limit=""10""}}`). 2. Upload the zipped theme 3. See ""Invalid Theme"" message  Ghost Version 5.71.0+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 119, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file",no-bug,0.9
18437,Ghost,https://github.com/TryGhost/Ghost/issues/18437,Update Twitter Icon in the Repository," Issue Summary Subject: Update Twitter Icon in the Repository Issue Description:  **Problem:** The current Twitter icon used in the repository is outdated, and it does not align with the latest design changes made by Twitter. Twitter recently updated their icon to the new ""x"" design, and it's important to ensure that our repository stays up-to-date to maintain a consistent and modern appearance. ![Screenshot 2023-10-03 115534](https://github.com/TryGhost/Ghost/assets/82380855/15293579-a74c-418e-b374-052243485d07) **Suggestion:** I propose that we update the Twitter icon in our repository to reflect the latest ""x"" design used by Twitter. This change will not only improve the visual appeal of our project but also show that we keep up with the latest trends and maintain our content relevancy. **Action Required:** I would like to work on this issue and contribute to the repository by updating the Twitter icon. I believe that this will be a valuable addition to the project, and I am committed to seeing it through. **Expected Results:** The Twitter icon in our repository should match the latest design used by Twitter. Let's keep our repository looking fresh and in line with current design standards. I'm excited to contribute to this improvement, and I welcome any guidance or feedback from the maintainers. Thank you for considering this enhancement.  Steps to Reproduce Navigate to https://ghost.org/ Observe the current Twitter icon. Compare it to the latest Twitter icon design.  Ghost Version 4.0+  Node.js Version 18+  How did you install Ghost? Operating System: Windows 11  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Update Twitter Icon in the Repository  Issue Summary Subject: Update Twitter Icon in the Repository Issue Description:  **Problem:** The current Twitter icon used in the repository is outdated, and it does not align with the latest design changes made by Twitter. Twitter recently updated their icon to the new ""x"" design, and it's important to ensure that our repository stays up-to-date to maintain a consistent and modern appearance. ![Screenshot 2023-10-03 115534](https://github.com/TryGhost/Ghost/assets/82380855/15293579-a74c-418e-b374-052243485d07) **Suggestion:** I propose that we update the Twitter icon in our repository to reflect the latest ""x"" design used by Twitter. This change will not only improve the visual appeal of our project but also show that we keep up with the latest trends and maintain our content relevancy. **Action Required:** I would like to work on this issue and contribute to the repository by updating the Twitter icon. I believe that this will be a valuable addition to the project, and I am committed to seeing it through. **Expected Results:** The Twitter icon in our repository should match the latest design used by Twitter. Let's keep our repository looking fresh and in line with current design standards. I'm excited to contribute to this improvement, and I welcome any guidance or feedback from the maintainers. Thank you for considering this enhancement.  Steps to Reproduce Navigate to https://ghost.org/ Observe the current Twitter icon. Compare it to the latest Twitter icon design.  Ghost Version 4.0+  Node.js Version 18+  How did you install Ghost? Operating System: Windows 11  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.95
18902,Ghost,https://github.com/TryGhost/Ghost/issues/18902,Toggle card icon doesn't appear on iOS browsers," Issue Summary The icon indicating that Toggles can be opened and closed don't appear on iOS browsers (and this isn't just a Firefox issue, but a Safari issue as well). I have no idea whether or not this affects Android mobiles as well, but I do know that the icon does appear on macOS Safari, including when the viewport is shrunken down as narrow as it'll go. ![Xnapper-2023-11-08-10 24 27](https://github.com/TryGhost/Ghost/assets/27488257/fd7e15f2-c525-4099-b110-84ceca980311)  Steps to Reproduce 1. Visit the [Changlelog's Toggle page](https://ghost.org/changelog/toggles/) on an iOS browser 2. See that the toggle card icons aren't appearing  Ghost Version 5.72.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version iOS 17.1.1  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Toggle card icon doesn't appear on iOS browsers  Issue Summary The icon indicating that Toggles can be opened and closed don't appear on iOS browsers (and this isn't just a Firefox issue, but a Safari issue as well). I have no idea whether or not this affects Android mobiles as well, but I do know that the icon does appear on macOS Safari, including when the viewport is shrunken down as narrow as it'll go. ![Xnapper-2023-11-08-10 24 27](https://github.com/TryGhost/Ghost/assets/27488257/fd7e15f2-c525-4099-b110-84ceca980311)  Steps to Reproduce 1. Visit the [Changlelog's Toggle page](https://ghost.org/changelog/toggles/) on an iOS browser 2. See that the toggle card icons aren't appearing  Ghost Version 5.72.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version iOS 17.1.1  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.95
15251,Ghost,https://github.com/TryGhost/Ghost/issues/15251,Manage your email preferences -> undefinedghost," Issue Summary When I leave a comment on my blog, I get an email notification with the comment. In the footer of that email is a link to ""Manage your email preferences"". When I click on that link, it leads me to: http://undefinedghost/#/settings/staff/ryan  Steps to Reproduce 1. Leave a comment on a blog post 2. Wait for email notification that a comment has been posted 3. Click on ""Manage your email preferences"" in footer of email 4. Observe browser going to http://undefinedghost/#/settings/staff/username  Ghost Version 5.9.4  Node.js Version 16.15  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Manage your email preferences -> undefinedghost  Issue Summary When I leave a comment on my blog, I get an email notification with the comment. In the footer of that email is a link to ""Manage your email preferences"". When I click on that link, it leads me to: http://undefinedghost/#/settings/staff/ryan  Steps to Reproduce 1. Leave a comment on a blog post 2. Wait for email notification that a comment has been posted 3. Click on ""Manage your email preferences"" in footer of email 4. Observe browser going to http://undefinedghost/#/settings/staff/username  Ghost Version 5.9.4  Node.js Version 16.15  How did you install Ghost? Ubuntu 20.04.4 LTS  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",no-bug,0.9
14365,Ghost,https://github.com/TryGhost/Ghost/issues/14365,"Wordcount in editor does not work for RTL Languages (Arabic, or Hebrew)"," Issue Summary If i type Arabic words, the wordcounter in editor bottom does not work. I think this applies to RTL Languages. For your testing, i suggest you copy text from https://ar.lipsum.com/ this javascript works for RTL languages https://www.javascripttutorial.net/javascript-dom/javascript-word-counter/ ![CleanShot 2022-03-23 at 00 10 15@2x](https://user-images.githubusercontent.com/2324349/159577003-0d913423-face-4efd-81e9-2c051b5a3424.png)  Steps to Reproduce 1. add new post 2. copy Arabic text from https://ar.lipsum.com/ 3. you'll notice the word counter does not change.  Ghost Version 4.41.0  Node.js Version latest  How did you install Ghost? self hosting on digitalocean  Database type MySQL 8  Browser & OS version all browsers  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file | documentation-file | other-file,"Wordcount in editor does not work for RTL Languages (Arabic, or Hebrew)  Issue Summary If i type Arabic words, the wordcounter in editor bottom does not work. I think this applies to RTL Languages. For your testing, i suggest you copy text from https://ar.lipsum.com/ this javascript works for RTL languages https://www.javascripttutorial.net/javascript-dom/javascript-word-counter/ ![CleanShot 2022-03-23 at 00 10 15@2x](https://user-images.githubusercontent.com/2324349/159577003-0d913423-face-4efd-81e9-2c051b5a3424.png)  Steps to Reproduce 1. add new post 2. copy Arabic text from https://ar.lipsum.com/ 3. you'll notice the word counter does not change.  Ghost Version 4.41.0  Node.js Version latest  How did you install Ghost? self hosting on digitalocean  Database type MySQL 8  Browser & OS version all browsers  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file documentation-file other-file",no-bug,0.9
16367,Ghost,https://github.com/TryGhost/Ghost/issues/16367,Generation of schemaorg according to the specification," Issue Summary It all started with a discussion on the forum: https://forum.ghost.org/t/schema-org-generate/36772/7 Apparently, schemaorg is not being generated correctly at the moment. Take, for example, a page https://ghost.org/changelog/vscode-extension/ Here's her json-id  <script type=""application/ld+json""> { ""@context"": ""https://schema.org"", ""@type"": ""Article"", ""publisher"": {  }, ""author"": {  }, ""headline"": ""Ghost VS Code extension"", ""url"": ""https://ghost.org/changelog/vscode-extension/"", ""datePublished"": ""2023-01-30T16:51:03.000Z"", ""dateModified"": ""2023-01-30T16:51:03.000Z"", ""image"": {  }, ""keywords"": ""New"", ""description"": """", ""mainEntityOfPage"": { ""@type"": ""WebPage"", ""@id"": ""https://ghost.org/changelog/"" } } </script>  mainEntityOfPage [according to the explanation of the developers schemaorg](https://github.com/schemaorg/schemaorg/discussions/3274) should contain a link to the article page, not a link to the blog.  Steps to Reproduce Run ghost :)  Ghost Version 5.36+  Node.js Version -  How did you install Ghost? docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | test-file | source-file | test-file | test-file,"Generation of schemaorg according to the specification  Issue Summary It all started with a discussion on the forum: https://forum.ghost.org/t/schema-org-generate/36772/7 Apparently, schemaorg is not being generated correctly at the moment. Take, for example, a page https://ghost.org/changelog/vscode-extension/ Here's her json-id  <script type=""application/ld+json""> { ""@context"": ""https://schema.org"", ""@type"": ""Article"", ""publisher"": {  }, ""author"": {  }, ""headline"": ""Ghost VS Code extension"", ""url"": ""https://ghost.org/changelog/vscode-extension/"", ""datePublished"": ""2023-01-30T16:51:03.000Z"", ""dateModified"": ""2023-01-30T16:51:03.000Z"", ""image"": {  }, ""keywords"": ""New"", ""description"": """", ""mainEntityOfPage"": { ""@type"": ""WebPage"", ""@id"": ""https://ghost.org/changelog/"" } } </script>  mainEntityOfPage [according to the explanation of the developers schemaorg](https://github.com/schemaorg/schemaorg/discussions/3274) should contain a link to the article page, not a link to the blog.  Steps to Reproduce Run ghost :)  Ghost Version 5.36+  Node.js Version -  How did you install Ghost? docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file test-file source-file test-file test-file",no-bug,0.8
15008,Ghost,https://github.com/TryGhost/Ghost/issues/15008,Update UI/UX for deleting staff users," Issue Summary In 5.0 we changed the behaviour of what happens when staff users are deleted in admin. Before: We downloaded a full site backup, then deleted the user and all their posts Now: We transfer the posts of the deleted staff user to the owner user However, there are still some left-over rough edges. ## 1. Messaging and copy is out of date <img width=""661"" alt=""Screenshot 2022-07-07 at 17 15 59@2x"" src=""https://user-images.githubusercontent.com/120485/177810061-7c274b90-6fd6-4797-92d1-e4733b44ea37.png""> The copy has not been updated to reflect what will happen. We need to tell people that the posts will be transferred to the owner user (and who that is) ## 2. We no longer need to download a site backup We should stop triggering a site export when a user is deleted. It was tenuously relevant before (because it was a nightmare to import again if you needed to), it's not at all relevant now. ## 3. We should tag all transferred posts, so they're easy to find/filter If you do accidentally delete a staff user, we should make it easy to find all old posts written by the deleted user - by adding a private/internal tag to all of the affected posts, based on the `slug` of the staff user who was deleted: <img width=""621"" alt=""Screenshot 2022-07-07 at 17 22 22@2x"" src=""https://user-images.githubusercontent.com/120485/177810992-a2fadaf2-a938-4f94-bdf5-df3cbf960f1b.png""> Todos to track progress: - [x] stop backup download https://github.com/TryGhost/Admin/pull/2423 - [ ] assign internal tag to transferred posts https://github.com/TryGhost/Ghost/pull/15019 - [x] copy update https://github.com/TryGhost/Admin/pull/2424",other-file | source-file | other-file | source-file | source-file | test-file | test-file | test-file,"Update UI/UX for deleting staff users  Issue Summary In 5.0 we changed the behaviour of what happens when staff users are deleted in admin. Before: We downloaded a full site backup, then deleted the user and all their posts Now: We transfer the posts of the deleted staff user to the owner user However, there are still some left-over rough edges. ## 1. Messaging and copy is out of date <img width=""661"" alt=""Screenshot 2022-07-07 at 17 15 59@2x"" src=""https://user-images.githubusercontent.com/120485/177810061-7c274b90-6fd6-4797-92d1-e4733b44ea37.png""> The copy has not been updated to reflect what will happen. We need to tell people that the posts will be transferred to the owner user (and who that is) ## 2. We no longer need to download a site backup We should stop triggering a site export when a user is deleted. It was tenuously relevant before (because it was a nightmare to import again if you needed to), it's not at all relevant now. ## 3. We should tag all transferred posts, so they're easy to find/filter If you do accidentally delete a staff user, we should make it easy to find all old posts written by the deleted user - by adding a private/internal tag to all of the affected posts, based on the `slug` of the staff user who was deleted: <img width=""621"" alt=""Screenshot 2022-07-07 at 17 22 22@2x"" src=""https://user-images.githubusercontent.com/120485/177810992-a2fadaf2-a938-4f94-bdf5-df3cbf960f1b.png""> Todos to track progress: - [x] stop backup download https://github.com/TryGhost/Admin/pull/2423 - [ ] assign internal tag to transferred posts https://github.com/TryGhost/Ghost/pull/15019 - [x] copy update https://github.com/TryGhost/Admin/pull/2424 other-file source-file other-file source-file source-file test-file test-file test-file",no-bug,0.9
15290,Ghost,https://github.com/TryGhost/Ghost/issues/15290,"Hidden error in ""Add tier"" modal","Try to add a tier but dont fill the tier name field. There should be a field error that name is mandatory and the button should switch to Retry. Instead, seems like nothing changes. <img width=""1103"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186172011-1e17a647-e2db-4138-b09a-da79941dc0bb.png""> ## Steps to reproduce 1. Visit Settings > Memberships > Premium > Add tier 2. Hit the ""Add tier"" button without entering a name 3. Notice that nothing happens 4. Look in the console, see the following error appearing: <img width=""875"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186172956-534dcb00-90cd-4c16-a9d0-20748891d86e.png""> Very unhelpful ""Uncaught undefined"" ## Expected behaviour - The title field should get a red border - A message should appear under the field saying name is required - The ""Add tier"" button should change to a red ""Retry"" button  Ghost Version 5.10",other-file | source-file | source-file,"Hidden error in ""Add tier"" modal Try to add a tier but dont fill the tier name field. There should be a field error that name is mandatory and the button should switch to Retry. Instead, seems like nothing changes. <img width=""1103"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186172011-1e17a647-e2db-4138-b09a-da79941dc0bb.png""> ## Steps to reproduce 1. Visit Settings > Memberships > Premium > Add tier 2. Hit the ""Add tier"" button without entering a name 3. Notice that nothing happens 4. Look in the console, see the following error appearing: <img width=""875"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186172956-534dcb00-90cd-4c16-a9d0-20748891d86e.png""> Very unhelpful ""Uncaught undefined"" ## Expected behaviour - The title field should get a red border - A message should appear under the field saying name is required - The ""Add tier"" button should change to a red ""Retry"" button  Ghost Version 5.10 other-file source-file source-file",no-bug,0.9
14354,Ghost,https://github.com/TryGhost/Ghost/issues/14354,"Ghost changes ""send-only"" posts to ""post and send"" after rescheduling"," Issue Summary Hello, I want to report a bug with Ghost. As the title says, this issue happens when I reschedule a send-only post to members. Context, I use Ghost as a blog and send my newsletter without publishing on the blog. But I found a strange behavior when I click on reschedule for those send-only posts. So, when I go back to edit a post that was already scheduled to only send by email, I have to revert to draft, or rescheduling will turn this post into a ""send & post"" without me wanting it to happen.  Steps to Reproduce 1. Schedule a post to **send-only by email** 2. Exit the editor 3. Go back to the editor and update the post 4. Go to publish and click **Reschedule** the post 5. Look at the pop up in the bottom left saying the post will be ""published and delivered"" without you changing it (see screenshot below) <img width=""328"" alt=""CleanShot 2022-03-22 at 08 28 20@2x"" src=""https://user-images.githubusercontent.com/79269148/159449683-0ae8de80-f1d2-42c0-b616-949e7b74f8f3.png"">  Ghost Version 4.36.1  Node.js Version I'm using managed hosting, I don't know  How did you install Ghost? I'm using Midnight managed hosting  Database type Other  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file | source-file | test-file,"Ghost changes ""send-only"" posts to ""post and send"" after rescheduling  Issue Summary Hello, I want to report a bug with Ghost. As the title says, this issue happens when I reschedule a send-only post to members. Context, I use Ghost as a blog and send my newsletter without publishing on the blog. But I found a strange behavior when I click on reschedule for those send-only posts. So, when I go back to edit a post that was already scheduled to only send by email, I have to revert to draft, or rescheduling will turn this post into a ""send & post"" without me wanting it to happen.  Steps to Reproduce 1. Schedule a post to **send-only by email** 2. Exit the editor 3. Go back to the editor and update the post 4. Go to publish and click **Reschedule** the post 5. Look at the pop up in the bottom left saying the post will be ""published and delivered"" without you changing it (see screenshot below) <img width=""328"" alt=""CleanShot 2022-03-22 at 08 28 20@2x"" src=""https://user-images.githubusercontent.com/79269148/159449683-0ae8de80-f1d2-42c0-b616-949e7b74f8f3.png"">  Ghost Version 4.36.1  Node.js Version I'm using managed hosting, I don't know  How did you install Ghost? I'm using Midnight managed hosting  Database type Other  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file source-file test-file",no-bug,0.8
19282,Ghost,https://github.com/TryGhost/Ghost/issues/19282,Signup card does not render the background 'Accent color' when an image is added," Issue Summary When setting up the Signup card with an image (split option), the background color will not be rendered. It is worth noting that the class responsible for this is not rendered in such cases: Classes when image is added: ![Zrzut ekranu 2023-12-7 o 12 29 12](https://github.com/TryGhost/Ghost/assets/23366922/1481e204-f845-4322-8fdc-45a88427d443) Classes without image: ![Zrzut ekranu 2023-12-7 o 12 29 39](https://github.com/TryGhost/Ghost/assets/23366922/c026cb86-5d9c-4ea3-ae0a-80681ec45c5e)  Steps to Reproduce Add a signup card, set the background color to 'Accent color,' then add an image in the Split option and check the result.  Ghost Version 5.75.1  Node.js Version 18.12.1  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version All  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Signup card does not render the background 'Accent color' when an image is added  Issue Summary When setting up the Signup card with an image (split option), the background color will not be rendered. It is worth noting that the class responsible for this is not rendered in such cases: Classes when image is added: ![Zrzut ekranu 2023-12-7 o 12 29 12](https://github.com/TryGhost/Ghost/assets/23366922/1481e204-f845-4322-8fdc-45a88427d443) Classes without image: ![Zrzut ekranu 2023-12-7 o 12 29 39](https://github.com/TryGhost/Ghost/assets/23366922/c026cb86-5d9c-4ea3-ae0a-80681ec45c5e)  Steps to Reproduce Add a signup card, set the background color to 'Accent color,' then add an image in the Split option and check the result.  Ghost Version 5.75.1  Node.js Version 18.12.1  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version All  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file documentation-file documentation-file other-file",no-bug,0.95
14863,Ghost,https://github.com/TryGhost/Ghost/issues/14863,Ghost URL cannot be set to an ipv6 address," Issue Summary The URL cannot be set to an ipv6 address, because ghost percent encodes the bracketed portion of the host.  Steps to Reproduce Start a docker container with the url set to a properly formatted ipv6 address like `-e url='http://[ffff::]:2368'`. Notice that the Home and About links at the top are not clickable. Inspect them and see that the URL is badly formatted: the host portion should not be percent encoded. If we edit the IP to be literal brackets the link will work. ![image](https://user-images.githubusercontent.com/4633048/169271824-57dd3d2e-e341-41fb-bc1f-b92707c09540.png)  Ghost Version 4.47.4  Node.js Version v14.19.3  How did you install Ghost? docker  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Ghost URL cannot be set to an ipv6 address  Issue Summary The URL cannot be set to an ipv6 address, because ghost percent encodes the bracketed portion of the host.  Steps to Reproduce Start a docker container with the url set to a properly formatted ipv6 address like `-e url='http://[ffff::]:2368'`. Notice that the Home and About links at the top are not clickable. Inspect them and see that the URL is badly formatted: the host portion should not be percent encoded. If we edit the IP to be literal brackets the link will work. ![image](https://user-images.githubusercontent.com/4633048/169271824-57dd3d2e-e341-41fb-bc1f-b92707c09540.png)  Ghost Version 4.47.4  Node.js Version v14.19.3  How did you install Ghost? docker  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.8
20028,Ghost,https://github.com/TryGhost/Ghost/issues/20028,Support Bluesky oEmbed auto-discovery," Issue Summary Bluesky (https://bsky.app) recently added post embeds, including oEmbed discovery. For the later, it looks like Ghost does not allow the `<script>` tag to be auto-included, probably as a safety/security feature. From a quick check, it looks like Ghost uses `@extractus/oembed-extractor` to parse out oEmbed, and that package doesn't seem to work with the bluesky oEmbed discovery: https://extractor-demos.pages.dev/oembed-extractor It looks like they synchronize with the ""official"" provider list at: https://oembed.com/providers.json I opened an issue to get us on that provider list (https://github.com/iamcal/oembed/pull/743). I'm opening this issue in Ghost to confirm that this is the correct way to get supported in Ghost, and to track interoperability with Ghost specifically. For what it is worth, the source code for our embed widget script, the embed.bsky.app service, and the Bluesky Social app itself are all open source: https://github.com/bluesky-social/social-app Thanks for all you do maintaining Ghost!  Steps to Reproduce Paste a bsky.app post link. Expect a fully-functional post (with JS/iframe). Instead get either a ""card"", or the raw embed `<blockquote>` without javascript re-write.  Ghost Version hosted  Node.js Version hosted  How did you install Ghost? hosted  Database type MySQL 5.7  Browser & OS version N/A  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file | source-file | test-file | source-file | test-file,"Support Bluesky oEmbed auto-discovery  Issue Summary Bluesky (https://bsky.app) recently added post embeds, including oEmbed discovery. For the later, it looks like Ghost does not allow the `<script>` tag to be auto-included, probably as a safety/security feature. From a quick check, it looks like Ghost uses `@extractus/oembed-extractor` to parse out oEmbed, and that package doesn't seem to work with the bluesky oEmbed discovery: https://extractor-demos.pages.dev/oembed-extractor It looks like they synchronize with the ""official"" provider list at: https://oembed.com/providers.json I opened an issue to get us on that provider list (https://github.com/iamcal/oembed/pull/743). I'm opening this issue in Ghost to confirm that this is the correct way to get supported in Ghost, and to track interoperability with Ghost specifically. For what it is worth, the source code for our embed widget script, the embed.bsky.app service, and the Bluesky Social app itself are all open source: https://github.com/bluesky-social/social-app Thanks for all you do maintaining Ghost!  Steps to Reproduce Paste a bsky.app post link. Expect a fully-functional post (with JS/iframe). Instead get either a ""card"", or the raw embed `<blockquote>` without javascript re-write.  Ghost Version hosted  Node.js Version hosted  How did you install Ghost? hosted  Database type MySQL 5.7  Browser & OS version N/A  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file source-file test-file source-file test-file",no-bug,0.9
15293,Ghost,https://github.com/TryGhost/Ghost/issues/15293,Links to archived tiers should be hidden in the Portal Links UI,"When viewing the links tab of the Portal UI settings in admin, links to archived tiers still appear (but don't work). ## Steps to reproduce 1. in Ghost Admin > Settings > Memberships > Premium 2. Add a tier called something like ""Old tier (archived)"" 3. Then click on the 3 dots and hit ""archive"" 4. Scroll up to ""Customize Portal"" 5. Choose ""Links"" from the preview dropdown 6. Attempt to find the link to your archived tier, and notice it's listed there <img width=""1728"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186190075-0987a581-04c9-4411-94ab-49506278451e.png""> ## Expected behaviour Only links to active tiers should be displayed in the Portal UI settings  Ghost Version 5.10",source-file,"Links to archived tiers should be hidden in the Portal Links UI When viewing the links tab of the Portal UI settings in admin, links to archived tiers still appear (but don't work). ## Steps to reproduce 1. in Ghost Admin > Settings > Memberships > Premium 2. Add a tier called something like ""Old tier (archived)"" 3. Then click on the 3 dots and hit ""archive"" 4. Scroll up to ""Customize Portal"" 5. Choose ""Links"" from the preview dropdown 6. Attempt to find the link to your archived tier, and notice it's listed there <img width=""1728"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/186190075-0987a581-04c9-4411-94ab-49506278451e.png""> ## Expected behaviour Only links to active tiers should be displayed in the Portal UI settings  Ghost Version 5.10 source-file",no-bug,0.9
17932,Ghost,https://github.com/TryGhost/Ghost/issues/17932,Admin portal crash: can't locate momentjs-timezone," Issue Summary While updating the Ghost package for Cloudron, the installation crashes when the admin portal is opened in the browser:  Uncaught Error: Could not find module `moment-timezone` imported from `ghost-admin/app`  With the same [Dockerimage](https://git.cloudron.io/cloudron/ghost-app/-/blob/master/Dockerfile?ref_type=heads#L20) version 5.60.0 produces a working installation. Thanks for any pointers on how to debug this.  Steps to Reproduce Installed with:  ghost install 5.61.0 --no-prompt --no-stack --no-setup --no-start --dbhost notlocalhost --dir /home/cloudron/ghost   Ghost Version 5.61.0  Node.js Version v18.12.1  How did you install Ghost? Cloudron / Docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Admin portal crash: can't locate momentjs-timezone  Issue Summary While updating the Ghost package for Cloudron, the installation crashes when the admin portal is opened in the browser:  Uncaught Error: Could not find module `moment-timezone` imported from `ghost-admin/app`  With the same [Dockerimage](https://git.cloudron.io/cloudron/ghost-app/-/blob/master/Dockerfile?ref_type=heads#L20) version 5.60.0 produces a working installation. Thanks for any pointers on how to debug this.  Steps to Reproduce Installed with:  ghost install 5.61.0 --no-prompt --no-stack --no-setup --no-start --dbhost notlocalhost --dir /home/cloudron/ghost   Ghost Version 5.61.0  Node.js Version v18.12.1  How did you install Ghost? Cloudron / Docker  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.9
16048,Ghost,https://github.com/TryGhost/Ghost/issues/16048,Improve error message for YouTube videos that disabled embedding," Issue Summary EDIT: I've figured out that this specific YouTube doesn't allow embedding. Maybe you could improve the error message shown to the user if you get the `Unauthorized` message (see below) so this causes less confusion. I have also updated the issue title to reflect this. I'm leaving the following text here as was to leave the context.  In general, YouTube embedding works. But this specific returns an error: `https://www.youtube.com/watch?v=5f-JlzBuUUU`. ![CleanShot 2022-12-25 at 20 10 24@2x](https://user-images.githubusercontent.com/1881676/209479558-2388988d-e2db-4116-b7bb-0b56eef57e1f.jpg) The request is the following:  https://cassandradispatch.org/ghost/api/admin/oembed/?url=https://www.youtube.com/watch?v=5f-JlzBuUUU&type=embed  The error response is the following: json { ""errors"": [ { ""message"": ""Internal server error, cannot read oembed."", ""context"": ""invalid json response body at https://www.youtube.com/oembed?format=json&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5f-JlzBuUUU reason: Unexpected token U in JSON at position 0"", ""type"": ""InternalServerError"", ""details"": null, ""property"": null, ""help"": null, ""code"": null, ""id"": ""e01223d0-8487-11ed-94c3-8df7a8a46270"", ""ghostErrorCode"": null } ] }  This is becaue the request `https://www.youtube.com/oembed?format=json&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5f-JlzBuUUU` Returns `Unauthorized` as the response body.  Steps to Reproduce 1. Create a new post (or edit an existing one) 2. Click the ""plus"" sign to add a new bloc and choose ""YouTube"" 3. Paste this URL: `https://www.youtube.com/watch?v=5f-JlzBuUUU` 4. See the error  Ghost Version 5.26.3  Node.js Version 16.18.1  How did you install Ghost? Hetzner, Ubuntu 22.04.1  Database type MySQL 8  Browser & OS version _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | source-file | source-file | documentation-file | test-file | source-file | documentation-file | other-file | other-file | other-file | source-file | source-file | documentation-file | test-file | source-file | documentation-file | other-file | other-file | other-file | source-file | source-file | documentation-file | test-file | source-file | documentation-file | other-file | other-file | other-file | source-file | source-file | documentation-file | test-file | source-file | documentation-file | other-file | other-file | other-file | source-file | source-file | documentation-file | test-file | source-file | documentation-file | other-file,"Improve error message for YouTube videos that disabled embedding  Issue Summary EDIT: I've figured out that this specific YouTube doesn't allow embedding. Maybe you could improve the error message shown to the user if you get the `Unauthorized` message (see below) so this causes less confusion. I have also updated the issue title to reflect this. I'm leaving the following text here as was to leave the context.  In general, YouTube embedding works. But this specific returns an error: `https://www.youtube.com/watch?v=5f-JlzBuUUU`. ![CleanShot 2022-12-25 at 20 10 24@2x](https://user-images.githubusercontent.com/1881676/209479558-2388988d-e2db-4116-b7bb-0b56eef57e1f.jpg) The request is the following:  https://cassandradispatch.org/ghost/api/admin/oembed/?url=https://www.youtube.com/watch?v=5f-JlzBuUUU&type=embed  The error response is the following: json { ""errors"": [ { ""message"": ""Internal server error, cannot read oembed."", ""context"": ""invalid json response body at https://www.youtube.com/oembed?format=json&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5f-JlzBuUUU reason: Unexpected token U in JSON at position 0"", ""type"": ""InternalServerError"", ""details"": null, ""property"": null, ""help"": null, ""code"": null, ""id"": ""e01223d0-8487-11ed-94c3-8df7a8a46270"", ""ghostErrorCode"": null } ] }  This is becaue the request `https://www.youtube.com/oembed?format=json&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5f-JlzBuUUU` Returns `Unauthorized` as the response body.  Steps to Reproduce 1. Create a new post (or edit an existing one) 2. Click the ""plus"" sign to add a new bloc and choose ""YouTube"" 3. Paste this URL: `https://www.youtube.com/watch?v=5f-JlzBuUUU` 4. See the error  Ghost Version 5.26.3  Node.js Version 16.18.1  How did you install Ghost? Hetzner, Ubuntu 22.04.1  Database type MySQL 8  Browser & OS version _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file source-file source-file documentation-file test-file source-file documentation-file other-file other-file other-file source-file source-file documentation-file test-file source-file documentation-file other-file other-file other-file source-file source-file documentation-file test-file source-file documentation-file other-file other-file other-file source-file source-file documentation-file test-file source-file documentation-file other-file other-file other-file source-file source-file documentation-file test-file source-file documentation-file other-file",bug,0.9
18879,Ghost,https://github.com/TryGhost/Ghost/issues/18879,Regression: links are invisible in Portal settings, Issue Summary Links in Portal settings are invisible and some fields are misaligned: ![CleanShot 2023-11-06 at 16 19 17@2x](https://github.com/TryGhost/Ghost/assets/353959/45a73bae-470d-4644-9ca6-3cc2e7cbb61b)  Steps to Reproduce 1. Open Portal settings 2. Links are not visible  Ghost Version 5.72.0  Node.js Version 18.14.2  How did you install Ghost? localhost macos  Database type MySQL 5.7  Browser & OS version Chrome  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,other-file | other-file | other-file | other-file | other-file | other-file,Regression: links are invisible in Portal settings  Issue Summary Links in Portal settings are invisible and some fields are misaligned: ![CleanShot 2023-11-06 at 16 19 17@2x](https://github.com/TryGhost/Ghost/assets/353959/45a73bae-470d-4644-9ca6-3cc2e7cbb61b)  Steps to Reproduce 1. Open Portal settings 2. Links are not visible  Ghost Version 5.72.0  Node.js Version 18.14.2  How did you install Ghost? localhost macos  Database type MySQL 5.7  Browser & OS version Chrome  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file other-file other-file,no-bug,0.9
17745,Ghost,https://github.com/TryGhost/Ghost/issues/17745,Issue with '@page.show_title_and_feature_image is not used' error," Issue Summary Hello My latest version of the Reiro theme includes the aforementioned `@page.show_title_and_feature_image` helper, added in the `post.hbs` file, as below: ![Zrzut ekranu 2023-08-17 o 00 17 01](https://github.com/TryGhost/Ghost/assets/23366922/8970fb01-2d4c-41b7-991d-bc672aa5de46) Unfortunately, despite this, many users experience an error when activating the theme. On my side, such an error no longer appears (localhost installation) and scan using GScan - gives no errors. So I am unable to answer why users continue to experience this error, despite the presence of a helper. So I am not able to give the steps for reproduction for this case. Therefore (if there is no solution) could I ask you to remove this error from GScan? Reason: This error relates to the Beta editor feature which is not yet an official release, this is a 'error' not a 'warning' which makes it all the more worrying for users (a lot of users don't even know that it is possible to activate the new Beta editor). Additionally when the helper is not used in a theme, there is already a nice message in the editor that explains why this function cannot be used: ![Zrzut ekranu 2023-08-17 o 00 28 01](https://github.com/TryGhost/Ghost/assets/23366922/e1c74738-6817-4126-be9c-cfc1ff48840e) It seems to me that at this stage (Beta) this information is sufficient. So given the above, I would ask the Ghost team to consider removing the error message  Steps to Reproduce Unfortunately, I do not know the exact circumstances why the error appears in some users, despite the fact that it is used in the theme.  Ghost Version 5.59.1  Node.js Version v18.17.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",test-file | documentation-file | test-file | other-file | documentation-file | other-file,"Issue with '@page.show_title_and_feature_image is not used' error  Issue Summary Hello My latest version of the Reiro theme includes the aforementioned `@page.show_title_and_feature_image` helper, added in the `post.hbs` file, as below: ![Zrzut ekranu 2023-08-17 o 00 17 01](https://github.com/TryGhost/Ghost/assets/23366922/8970fb01-2d4c-41b7-991d-bc672aa5de46) Unfortunately, despite this, many users experience an error when activating the theme. On my side, such an error no longer appears (localhost installation) and scan using GScan - gives no errors. So I am unable to answer why users continue to experience this error, despite the presence of a helper. So I am not able to give the steps for reproduction for this case. Therefore (if there is no solution) could I ask you to remove this error from GScan? Reason: This error relates to the Beta editor feature which is not yet an official release, this is a 'error' not a 'warning' which makes it all the more worrying for users (a lot of users don't even know that it is possible to activate the new Beta editor). Additionally when the helper is not used in a theme, there is already a nice message in the editor that explains why this function cannot be used: ![Zrzut ekranu 2023-08-17 o 00 28 01](https://github.com/TryGhost/Ghost/assets/23366922/e1c74738-6817-4126-be9c-cfc1ff48840e) It seems to me that at this stage (Beta) this information is sufficient. So given the above, I would ask the Ghost team to consider removing the error message  Steps to Reproduce Unfortunately, I do not know the exact circumstances why the error appears in some users, despite the fact that it is used in the theme.  Ghost Version 5.59.1  Node.js Version v18.17.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository test-file documentation-file test-file other-file documentation-file other-file",no-bug,0.9
19559,Ghost,https://github.com/TryGhost/Ghost/issues/19559,Custom excerpts containing escaped characters are truncated inappropriately," Issue Summary ref dc7e2b9, https://ghost.slack.com/archives/CTH5NDJMS/p1706034566392689 Customers using custom excerpts containing quotes and other escaped characters were seeing the text cut short, sometimes in the middle of words.  Steps to Reproduce 1. Create a custom excerpt using quotes 2. Publish the post 3. View the excerpt from the home page  Ghost Version v5.76.1  Node.js Version 18  How did you install Ghost? Mac Sonoma  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file,"Custom excerpts containing escaped characters are truncated inappropriately  Issue Summary ref dc7e2b9, https://ghost.slack.com/archives/CTH5NDJMS/p1706034566392689 Customers using custom excerpts containing quotes and other escaped characters were seeing the text cut short, sometimes in the middle of words.  Steps to Reproduce 1. Create a custom excerpt using quotes 2. Publish the post 3. View the excerpt from the home page  Ghost Version v5.76.1  Node.js Version 18  How did you install Ghost? Mac Sonoma  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file",no-bug,0.9
16301,Ghost,https://github.com/TryGhost/Ghost/issues/16301,Uploading an m4a file to an audio card fails when using Firefox on Windows," Issue Summary Hi, I noticed that it's not possible to upload an m4a file to an audio card using Firefox on Windows. If you try to do so, the error 'Please select a valid media file.' is displayed. There is no problem using Chrome. The difference I can see is that Firefox specifies the MIME type `audio/mp4`, while Chrome specifies `audio/x-m4a`. Perhaps `audio/mp4` is just missing from this list: https://github.com/TryGhost/Ghost/blob/066db4c46fec15d998325f287a5b5056e13dc961/ghost/core/core/shared/config/overrides.json#L34-L45  Steps to Reproduce 1. Create a draft post 2. Add an audio card 3. Upload an .m4a file using Firefox on Windows A zipped sample file of silence is attached (but any m4a file should do). [silence.zip](https://github.com/TryGhost/Ghost/files/10787960/silence.zip)  Ghost Version 5.35  Node.js Version 18.14.1  How did you install Ghost? Tested both native on Ubuntu 22.04 and using the container image  Database type MySQL 8  Browser & OS version Firefox 111 beta 2, Windows 10  Relevant log / error output shell [2023-02-20 21:36:24] ERROR ""POST /ghost/api/admin/media/upload/"" 415 25ms Please select a valid media file. Error ID: a0036130-b166-11ed-9f6d-e54eb9848d84  UnsupportedMediaTypeError: Please select a valid media file. at mediaUploadValidation (/var/lib/ghost/versions/5.35.0/core/server/web/api/middleware/upload.js:194:25) at Layer.handle [as handle_request] (/var/lib/ghost/versions/5.35.0/node_modules/express/lib/router/layer.js:95:5) at next (/var/lib/ghost/versions/5.35.0/node_modules/express/lib/router/route.js:144:13) at /var/lib/ghost/versions/5.35.0/core/server/web/api/middleware/upload.js:113:9 at Immediate._onImmediate (/var/lib/ghost/versions/5.35.0/node_modules/multer/lib/make-middleware.js:53:37) at processImmediate (node:internal/timers:468:21)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | test-file | test-file | documentation-file | test-file | test-file | documentation-file | test-file | test-file | documentation-file | test-file | test-file,"Uploading an m4a file to an audio card fails when using Firefox on Windows  Issue Summary Hi, I noticed that it's not possible to upload an m4a file to an audio card using Firefox on Windows. If you try to do so, the error 'Please select a valid media file.' is displayed. There is no problem using Chrome. The difference I can see is that Firefox specifies the MIME type `audio/mp4`, while Chrome specifies `audio/x-m4a`. Perhaps `audio/mp4` is just missing from this list: https://github.com/TryGhost/Ghost/blob/066db4c46fec15d998325f287a5b5056e13dc961/ghost/core/core/shared/config/overrides.json#L34-L45  Steps to Reproduce 1. Create a draft post 2. Add an audio card 3. Upload an .m4a file using Firefox on Windows A zipped sample file of silence is attached (but any m4a file should do). [silence.zip](https://github.com/TryGhost/Ghost/files/10787960/silence.zip)  Ghost Version 5.35  Node.js Version 18.14.1  How did you install Ghost? Tested both native on Ubuntu 22.04 and using the container image  Database type MySQL 8  Browser & OS version Firefox 111 beta 2, Windows 10  Relevant log / error output shell [2023-02-20 21:36:24] ERROR ""POST /ghost/api/admin/media/upload/"" 415 25ms Please select a valid media file. Error ID: a0036130-b166-11ed-9f6d-e54eb9848d84  UnsupportedMediaTypeError: Please select a valid media file. at mediaUploadValidation (/var/lib/ghost/versions/5.35.0/core/server/web/api/middleware/upload.js:194:25) at Layer.handle [as handle_request] (/var/lib/ghost/versions/5.35.0/node_modules/express/lib/router/layer.js:95:5) at next (/var/lib/ghost/versions/5.35.0/node_modules/express/lib/router/route.js:144:13) at /var/lib/ghost/versions/5.35.0/core/server/web/api/middleware/upload.js:113:9 at Immediate._onImmediate (/var/lib/ghost/versions/5.35.0/node_modules/multer/lib/make-middleware.js:53:37) at processImmediate (node:internal/timers:468:21)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file test-file test-file documentation-file test-file test-file documentation-file test-file test-file documentation-file test-file test-file",no-bug,0.8
18311,Ghost,https://github.com/TryGhost/Ghost/issues/18311,Translation Issue," Issue Summary Hi! There is translation issue (typo) on ghost/i18n/locales/tr/comments.json It must be ""imdi kayt ol"" instead of ""imdi kaydt ol"" Could you please fix it?  Steps to Reproduce Make it ""imdi kayt ol""  Ghost Version 5.65.0  Node.js Version --  How did you install Ghost? Ghost.org Pro Membership  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file,"Translation Issue  Issue Summary Hi! There is translation issue (typo) on ghost/i18n/locales/tr/comments.json It must be ""imdi kayt ol"" instead of ""imdi kaydt ol"" Could you please fix it?  Steps to Reproduce Make it ""imdi kayt ol""  Ghost Version 5.65.0  Node.js Version --  How did you install Ghost? Ghost.org Pro Membership  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file",no-bug,0.95
15502,Ghost,https://github.com/TryGhost/Ghost/issues/15502,i18n Milestone 2: Framework and build tools,"_This issue represents a single milestone within our i18n project. The full project is documented [on the Ghost forum](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062)._  **Expected structure** - A new `ghost/locales` folder in the monorepo contains namespaced JSON files e.g. `locales/es/common.json`, `/ocales/es/portal.json`, `locales/es/email.json` - For Node.js/email-templates we do one of: - (Preferred) The correct path is loaded from config based on environment - ghost/locales gets copied into ghost/core somehow - Then for react: - Use code-splitting to generate individual versions of portal for each supported locale. **Goals:** - [x] Get the basic pieces of i18next in place & configured according to [the tech spec](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062#technical-plan-3) - [x] Implement the expected structure (see above) - [x] Figure out if we need to switch to vitejs in Portal to achieve the desired build (may need help from Ghost team) - [x] Have 1 interpolated string in each of email and Portal - [x] Tooling for extracting strings & generating files  ## Tasks: - [x] Move Portal into the monorepo (Ghost team to complete soon) - [x] Demo/spike of the build tool for Portal - I think this is the hardest part so we should do it first - [x] Demo/spike of how locale files get pulled into Node.js for email templates - [x] Demo/spike of i18next wiring so that there's one interpolated string in Portal and one in an email template - [x] Demo/spike of a tooling that can grab the 2 interpolated strings e.g. `yarn translate es` would create `/locales/es/portal.js` and `/locales/es/email.js` each containing one string. I'm hoping to find people interested in the different parts to do initial spike implementations - then we can figure out the tasks more clearly.  **Notes on participating & Hacktoberfest:** We aren't going to merge half-baked spikes or wiring that doesn't match the spec yet - so if you're just trying to get through Hacktoberfest as fast as possible, this is not the issue for you! (There are plenty of small bugs though!) However, if you're using Hacktoberfest as a vehicle to find a cool & meaningful project to work on, this should be well up your street :) We'll do our best to ensure that those who actively contribute value to this project get something merged and appropriately labelled by the end of Hacktoberfest If you're interested, drop a note to say Hi and which part you're interested in before getting stuck in, just in case we end up with multiple people trying to get the same things merged.",source-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | other-file | source-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | other-file | source-file | source-file | documentation-file | source-file | documentation-file | source-file | source-file | documentation-file | other-file | source-file | source-file | documentation-file | source-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | other-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | test-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | documentation-file | test-file | documentation-file | test-file | source-file,"i18n Milestone 2: Framework and build tools _This issue represents a single milestone within our i18n project. The full project is documented [on the Ghost forum](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062)._  **Expected structure** - A new `ghost/locales` folder in the monorepo contains namespaced JSON files e.g. `locales/es/common.json`, `/ocales/es/portal.json`, `locales/es/email.json` - For Node.js/email-templates we do one of: - (Preferred) The correct path is loaded from config based on environment - ghost/locales gets copied into ghost/core somehow - Then for react: - Use code-splitting to generate individual versions of portal for each supported locale. **Goals:** - [x] Get the basic pieces of i18next in place & configured according to [the tech spec](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062#technical-plan-3) - [x] Implement the expected structure (see above) - [x] Figure out if we need to switch to vitejs in Portal to achieve the desired build (may need help from Ghost team) - [x] Have 1 interpolated string in each of email and Portal - [x] Tooling for extracting strings & generating files  ## Tasks: - [x] Move Portal into the monorepo (Ghost team to complete soon) - [x] Demo/spike of the build tool for Portal - I think this is the hardest part so we should do it first - [x] Demo/spike of how locale files get pulled into Node.js for email templates - [x] Demo/spike of i18next wiring so that there's one interpolated string in Portal and one in an email template - [x] Demo/spike of a tooling that can grab the 2 interpolated strings e.g. `yarn translate es` would create `/locales/es/portal.js` and `/locales/es/email.js` each containing one string. I'm hoping to find people interested in the different parts to do initial spike implementations - then we can figure out the tasks more clearly.  **Notes on participating & Hacktoberfest:** We aren't going to merge half-baked spikes or wiring that doesn't match the spec yet - so if you're just trying to get through Hacktoberfest as fast as possible, this is not the issue for you! (There are plenty of small bugs though!) However, if you're using Hacktoberfest as a vehicle to find a cool & meaningful project to work on, this should be well up your street :) We'll do our best to ensure that those who actively contribute value to this project get something merged and appropriately labelled by the end of Hacktoberfest If you're interested, drop a note to say Hi and which part you're interested in before getting stuck in, just in case we end up with multiple people trying to get the same things merged. source-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file other-file source-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file other-file source-file source-file documentation-file source-file documentation-file source-file source-file documentation-file other-file source-file source-file documentation-file source-file documentation-file source-file source-file source-file source-file documentation-file test-file test-file other-file source-file source-file documentation-file documentation-file documentation-file documentation-file source-file source-file test-file documentation-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file test-file documentation-file test-file documentation-file test-file source-file",no-bug,0.95
18718,Ghost,https://github.com/TryGhost/Ghost/issues/18718,Cannot have multiple custom images in new settings editor," Issue Summary When adding custom settings to a Ghost theme, it is not possible to have multiple images. One image can be uploaded (in either slot), but the second one cannot. It appears that the `<input>` tags for both image upload buttons have the same '`cover-image`' `id` assigned. Representative bit of the theme's package.json:  ""custom"": { ""bonus_image"": { ""type"": ""image"" }, ""bonus_image2"": { ""type"": ""image"" } }  The second button is non-functional. Unless the first image is removed, in which case it works, and then the first button doesn't work once an image is uploaded in the second slot. ![image](https://github.com/TryGhost/Ghost/assets/42299862/a964c2a8-de1b-4f6f-914f-cfd51c020e52) Behavior first described by another Ghost user here: https://forum.ghost.org/t/unable-to-add-more-images-via-custom-settings/42105/2 Personally confirmed by yours truly.  Steps to Reproduce Install Ghost 5.70.1. Add the custom settings above to any theme (I used Source). Attempt to upload images to both image fields.  Ghost Version 5.70.1  Node.js Version 18.16.0  How did you install Ghost? WSL.  Database type SQLite3  Browser & OS version Chrome, windows 10, recent version  Relevant log / error output shell No errors logged to console.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Cannot have multiple custom images in new settings editor  Issue Summary When adding custom settings to a Ghost theme, it is not possible to have multiple images. One image can be uploaded (in either slot), but the second one cannot. It appears that the `<input>` tags for both image upload buttons have the same '`cover-image`' `id` assigned. Representative bit of the theme's package.json:  ""custom"": { ""bonus_image"": { ""type"": ""image"" }, ""bonus_image2"": { ""type"": ""image"" } }  The second button is non-functional. Unless the first image is removed, in which case it works, and then the first button doesn't work once an image is uploaded in the second slot. ![image](https://github.com/TryGhost/Ghost/assets/42299862/a964c2a8-de1b-4f6f-914f-cfd51c020e52) Behavior first described by another Ghost user here: https://forum.ghost.org/t/unable-to-add-more-images-via-custom-settings/42105/2 Personally confirmed by yours truly.  Steps to Reproduce Install Ghost 5.70.1. Add the custom settings above to any theme (I used Source). Attempt to upload images to both image fields.  Ghost Version 5.70.1  Node.js Version 18.16.0  How did you install Ghost? WSL.  Database type SQLite3  Browser & OS version Chrome, windows 10, recent version  Relevant log / error output shell No errors logged to console.   Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.9
16444,Ghost,https://github.com/TryGhost/Ghost/issues/16444,Dark mode on Ghost Admin unsupported dark scrollbars on Chrome 111 for Windows. (CSS color-scheme)," Issue Summary Since Chrome 81, Firefox 96, and Safari 13, websites using ""dark themes"" can tell the web browser scroll-bar to use a dark theme rather than the white/light-grey theme that is used by default. This issue appears to be limited to Google Chrome 111 on Windows. The scroll bar is dark/subtle on firefox on this same machine. MacOS Chrome and iPadOS chrome do not suffer from this issue either. [Solution on stack overflow ->](https://stackoverflow.com/questions/65940522/how-do-i-switch-to-chromes-dark-scrollbar-like-github-does) ![image](https://user-images.githubusercontent.com/2158302/226151649-1bb57c54-9636-4710-9cf9-e57d5845d4e9.png)  Steps to Reproduce 1. Login to the admin panel 2. Click the toggle on the bottom of the left-hand panel to enter dark mode. 3. Any elements using a scroll-bar are not using a dark-themed scroll bar.  Ghost Version 5.39.0 (CLI 1.24.0)  Node.js Version 16.17.0  How did you install Ghost? Digital Ocean 1-click marketplace  Database type MySQL 8  Browser & OS version Chrome 111, Windows 11  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file,"Dark mode on Ghost Admin unsupported dark scrollbars on Chrome 111 for Windows. (CSS color-scheme)  Issue Summary Since Chrome 81, Firefox 96, and Safari 13, websites using ""dark themes"" can tell the web browser scroll-bar to use a dark theme rather than the white/light-grey theme that is used by default. This issue appears to be limited to Google Chrome 111 on Windows. The scroll bar is dark/subtle on firefox on this same machine. MacOS Chrome and iPadOS chrome do not suffer from this issue either. [Solution on stack overflow ->](https://stackoverflow.com/questions/65940522/how-do-i-switch-to-chromes-dark-scrollbar-like-github-does) ![image](https://user-images.githubusercontent.com/2158302/226151649-1bb57c54-9636-4710-9cf9-e57d5845d4e9.png)  Steps to Reproduce 1. Login to the admin panel 2. Click the toggle on the bottom of the left-hand panel to enter dark mode. 3. Any elements using a scroll-bar are not using a dark-themed scroll bar.  Ghost Version 5.39.0 (CLI 1.24.0)  Node.js Version 16.17.0  How did you install Ghost? Digital Ocean 1-click marketplace  Database type MySQL 8  Browser & OS version Chrome 111, Windows 11  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file",no-bug,0.95
14508,Ghost,https://github.com/TryGhost/Ghost/issues/14508,Impersonation tokens do signup action if no account is found, Issue Summary When a user is deleted it is expected that all tokens associated with that account are revoked. This is currently not the case. Creating a token before deleting a user creates the account again when pasted into the browser.  Steps to Reproduce 1. Create an access token for an account. 2. Delete that account. 3. Paste that token into your browser. 4. User is created again. The user should NOT be created again and all tokens should be revoked when a user is deleted.  Ghost Version 4.44.0  Node.js Version 16.14.2  How did you install Ghost? OS - Debian 11 with MariaDB 10.5.15  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository,source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | test-file | test-file | test-file | test-file | test-file | test-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | test-file | source-file | source-file | test-file | documentation-file,Impersonation tokens do signup action if no account is found  Issue Summary When a user is deleted it is expected that all tokens associated with that account are revoked. This is currently not the case. Creating a token before deleting a user creates the account again when pasted into the browser.  Steps to Reproduce 1. Create an access token for an account. 2. Delete that account. 3. Paste that token into your browser. 4. User is created again. The user should NOT be created again and all tokens should be revoked when a user is deleted.  Ghost Version 4.44.0  Node.js Version 16.14.2  How did you install Ghost? OS - Debian 11 with MariaDB 10.5.15  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file source-file documentation-file test-file test-file test-file test-file test-file test-file source-file source-file source-file source-file source-file source-file source-file test-file test-file source-file source-file test-file source-file source-file source-file source-file source-file source-file documentation-file test-file test-file test-file test-file test-file test-file source-file source-file source-file source-file source-file source-file source-file test-file test-file source-file source-file test-file documentation-file,bug,0.85
21104,Ghost,https://github.com/TryGhost/Ghost/issues/21104,Wrong translation in comments section for german," Issue Summary The translation in the comments section for the German language is incorrect. The same phrases are being used for both ""sign up"" and ""sign in."" ""Sign up"" is translated as ""Jetzt anmelden,"" but the correct translation would be ""Jetzt registrieren."" ""Sign in"" is translated as ""Anmelden."" ![Bildschirmfoto 2024-09-25 um 00 17 46](https://github.com/user-attachments/assets/44b771ee-a364-469a-9dda-0d495e60c5e3)  Steps to Reproduce 1. Install a Ghost CMS Blog 2. Select german as language 3. Create a Post 4. Navigate to the comments section  Ghost Version 5.94.0  Node.js Version 20  How did you install Ghost? Selfhosted  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file,"Wrong translation in comments section for german  Issue Summary The translation in the comments section for the German language is incorrect. The same phrases are being used for both ""sign up"" and ""sign in."" ""Sign up"" is translated as ""Jetzt anmelden,"" but the correct translation would be ""Jetzt registrieren."" ""Sign in"" is translated as ""Anmelden."" ![Bildschirmfoto 2024-09-25 um 00 17 46](https://github.com/user-attachments/assets/44b771ee-a364-469a-9dda-0d495e60c5e3)  Steps to Reproduce 1. Install a Ghost CMS Blog 2. Select german as language 3. Create a Post 4. Navigate to the comments section  Ghost Version 5.94.0  Node.js Version 20  How did you install Ghost? Selfhosted  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file",no-bug,0.9
14948,Ghost,https://github.com/TryGhost/Ghost/issues/14948,[ghost admin] Inserting items doesn't work on mobile post/page editor," Issue Summary On mobile, in either the post or page editor you cannot insert items suchas an image or web embed, without switching to the much less polished, disproportioned desktop site.  Steps to Reproduce on a new line, there is not a  icon like the desktop editor, to add objects other than text. also, typing a / on mobile, doesn't bring up a list like the plus button should.  Ghost Version latest [5.1.1]  Node.js Version NodeJS v16.14.2  How did you install Ghost? Hosted on a digitalocean droplet. Ubuntu 20.04  Database type MySQL 8  Browser & OS version Google Pixel 5, Chrome [all UTD]  Relevant log / error output _No response_  Code of Conduct - [x] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file | other-file,"[ghost admin] Inserting items doesn't work on mobile post/page editor  Issue Summary On mobile, in either the post or page editor you cannot insert items suchas an image or web embed, without switching to the much less polished, disproportioned desktop site.  Steps to Reproduce on a new line, there is not a  icon like the desktop editor, to add objects other than text. also, typing a / on mobile, doesn't bring up a list like the plus button should.  Ghost Version latest [5.1.1]  Node.js Version NodeJS v16.14.2  How did you install Ghost? Hosted on a digitalocean droplet. Ubuntu 20.04  Database type MySQL 8  Browser & OS version Google Pixel 5, Chrome [all UTD]  Relevant log / error output _No response_  Code of Conduct - [x] I agree to be friendly and polite to people in this repository other-file other-file other-file other-file",no-bug,0.9
18632,Ghost,https://github.com/TryGhost/Ghost/issues/18632,Attempting to delete the first character of an italicised word deletes the HTML card below the paragraph," Issue Summary I've had this situation occur a couple of times now, the first occurrence of which I wasn't quite clear what was going on. But having this happen again I've been able to isolate the issue and reproduce it. That is, trying to delete the first character of an italicised word ends up deleting the HTML card below. The bug apparently doesn't occur when trying to delete any other character of the word, nor when trying to do a backspace on the final or any other character of the word. In the video below I'm hitting the delete key, then CTRL-Z, delete, CTRL-Z. https://github.com/TryGhost/Ghost/assets/27488257/4945a719-4e18-408b-992b-1ba6aa1859ac  Steps to Reproduce 1. Create a paragraph and italicise one of the words in the middle 2. Create an HTML card below the paragraph 3. Move the cursor before the italicised word and hit the delete key 4. See the HTML card disappear  Ghost Version 5.68  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file | documentation-file | other-file,"Attempting to delete the first character of an italicised word deletes the HTML card below the paragraph  Issue Summary I've had this situation occur a couple of times now, the first occurrence of which I wasn't quite clear what was going on. But having this happen again I've been able to isolate the issue and reproduce it. That is, trying to delete the first character of an italicised word ends up deleting the HTML card below. The bug apparently doesn't occur when trying to delete any other character of the word, nor when trying to do a backspace on the final or any other character of the word. In the video below I'm hitting the delete key, then CTRL-Z, delete, CTRL-Z. https://github.com/TryGhost/Ghost/assets/27488257/4945a719-4e18-408b-992b-1ba6aa1859ac  Steps to Reproduce 1. Create a paragraph and italicise one of the words in the middle 2. Create an HTML card below the paragraph 3. Move the cursor before the italicised word and hit the delete key 4. See the HTML card disappear  Ghost Version 5.68  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 118.0.2, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file documentation-file other-file",no-bug,0.95
14981,Ghost,https://github.com/TryGhost/Ghost/issues/14981,Empty sitemap if a taxonomy is removed," Issue Summary By deleting a taxonomy from the `routes.yml` file, the deleted taxonomies pages are not generated, but their respective sitemap are. They are empty, but some tools like Google Search Console warn users that their sitemap is wrong because it's empty. Example of my [website](https://www.benjaminrancourt.ca/sitemap.xml), where I've disabled the `authors` taxonomy. html <tr> <td> <a href=""https://www.benjaminrancourt.ca/sitemap-authors.xml""> https://www.benjaminrancourt.ca/sitemap-authors.xml </a> </td> <td>1970-01-01 00:00</td> </tr>  ![image](https://user-images.githubusercontent.com/7907713/174452395-01298c43-b958-4844-9d08-e4daeb9bff8e.png) > The sitemap can be read, but it contains errors | Empty sitemap ![image](https://user-images.githubusercontent.com/7907713/174452417-ff20bcd4-ea8a-41cd-8fa3-3c7af6fcca02.png)  I tried to find a way to fix this in Ghost source code, but I couldn't run a working setup on my machine (I really should install Linux ). However, I'll paste my notes I've took while looking into this bug, in the hope that it will at least help you. **core/frontend/services/sitemap/manager.js** js // [Ben] The index sitemap is generated here getIndexXml() { return this.index.getXml(); } createIndexGenerator(options) { // [Ben] Solution 1: If some taxonomies are disabled, can we remove them from the options below? return new IndexMapGenerator({ types: { pages: this.pages, posts: this.posts, authors: this.authors, tags: this.tags }, maxPerPage: options.maxPerPage }); }  core/frontend/services/sitemap/index-generator.js js generateSiteMapUrlElements() { // [Ben] We iterate over each resource type here return _.map(this.types, (resourceType) => { // `|| 1` = even if there are no items we still have an empty sitemap file const noOfPages = Math.ceil(Object.keys(resourceType.nodeLookup).length / this.maxPerPage) || 1; const pages = []; for (let i = 0; i < noOfPages; i++) { const page = i  0 ? '' : `-${i + 1}`; const url = urlUtils.urlFor({relativeUrl: '/sitemap-' + resourceType.name + page + '.xml'}, true); const lastModified = resourceType.lastModified; // [Ben] Solution 2: For disabled taxonomies, I suspect their lastModified property is undefined. // Therefore, maybe we could not push this resource sitemap if it's the case? pages.push({ sitemap: [ {loc: url}, {lastmod: moment(lastModified).toISOString()} ] }); } return pages; }).flat(); }  Thanks to the Ghost team!  Steps to Reproduce 1. Disable a taxonomy like `tags` or `authors` (https://ghost.org/docs/themes/routing/#removing-taxonomies) 2. Go to `/sitemap.xml` 3. The disabled taxonomies will have an empty sitemap with a `Last Modified` date of `1970-01-01 00:00`  Ghost Version 5.2.3  Node.js Version v16.15.0  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version Google Chrome | Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | test-file | test-file | test-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | test-file | test-file | test-file,"Empty sitemap if a taxonomy is removed  Issue Summary By deleting a taxonomy from the `routes.yml` file, the deleted taxonomies pages are not generated, but their respective sitemap are. They are empty, but some tools like Google Search Console warn users that their sitemap is wrong because it's empty. Example of my [website](https://www.benjaminrancourt.ca/sitemap.xml), where I've disabled the `authors` taxonomy. html <tr> <td> <a href=""https://www.benjaminrancourt.ca/sitemap-authors.xml""> https://www.benjaminrancourt.ca/sitemap-authors.xml </a> </td> <td>1970-01-01 00:00</td> </tr>  ![image](https://user-images.githubusercontent.com/7907713/174452395-01298c43-b958-4844-9d08-e4daeb9bff8e.png) > The sitemap can be read, but it contains errors | Empty sitemap ![image](https://user-images.githubusercontent.com/7907713/174452417-ff20bcd4-ea8a-41cd-8fa3-3c7af6fcca02.png)  I tried to find a way to fix this in Ghost source code, but I couldn't run a working setup on my machine (I really should install Linux ). However, I'll paste my notes I've took while looking into this bug, in the hope that it will at least help you. **core/frontend/services/sitemap/manager.js** js // [Ben] The index sitemap is generated here getIndexXml() { return this.index.getXml(); } createIndexGenerator(options) { // [Ben] Solution 1: If some taxonomies are disabled, can we remove them from the options below? return new IndexMapGenerator({ types: { pages: this.pages, posts: this.posts, authors: this.authors, tags: this.tags }, maxPerPage: options.maxPerPage }); }  core/frontend/services/sitemap/index-generator.js js generateSiteMapUrlElements() { // [Ben] We iterate over each resource type here return _.map(this.types, (resourceType) => { // `|| 1` = even if there are no items we still have an empty sitemap file const noOfPages = Math.ceil(Object.keys(resourceType.nodeLookup).length / this.maxPerPage) || 1; const pages = []; for (let i = 0; i < noOfPages; i++) { const page = i  0 ? '' : `-${i + 1}`; const url = urlUtils.urlFor({relativeUrl: '/sitemap-' + resourceType.name + page + '.xml'}, true); const lastModified = resourceType.lastModified; // [Ben] Solution 2: For disabled taxonomies, I suspect their lastModified property is undefined. // Therefore, maybe we could not push this resource sitemap if it's the case? pages.push({ sitemap: [ {loc: url}, {lastmod: moment(lastModified).toISOString()} ] }); } return pages; }).flat(); }  Thanks to the Ghost team!  Steps to Reproduce 1. Disable a taxonomy like `tags` or `authors` (https://ghost.org/docs/themes/routing/#removing-taxonomies) 2. Go to `/sitemap.xml` 3. The disabled taxonomies will have an empty sitemap with a `Last Modified` date of `1970-01-01 00:00`  Ghost Version 5.2.3  Node.js Version v16.15.0  How did you install Ghost? Docker  Database type MySQL 8  Browser & OS version Google Chrome | Windows 10  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file test-file test-file test-file source-file source-file test-file test-file test-file source-file source-file test-file test-file test-file source-file source-file test-file test-file test-file",bug,0.9
20445,Ghost,https://github.com/TryGhost/Ghost/issues/20445,Bookmark for YouTube links not working," Issue Summary Adding a bookmark card with a link to YouTube seems to have broken in v5.86.0. Previously, adding a bookmark card with a valid link to a YouTube video resulted in this: ![CleanShot 2024-06-23 at 14 59 44@2x](https://github.com/TryGhost/Ghost/assets/25703384/44000a43-9c13-4823-a50a-143cb1ef3123) Response from XXX in v5.85.2:  { ""version"": ""1.0"", ""type"": ""bookmark"", ""url"": ""https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""metadata"": { ""url"": ""https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""title"": ""Big Buck Bunny 60fps 4K - Official Blender Foundation Short Film"", ""description"": ""Enjoy this UHD High Frame rate version of one of the iconic short films produced by Blender Institute!Learn more about the project here http://bbb3d.renderfa"", ""author"": null, ""publisher"": ""YouTube"", ""thumbnail"": ""https://i.ytimg.com/vi/aqz-KE-bpKQ/maxresdefault.jpg"", ""icon"": ""https://www.youtube.com/s/desktop/9f65bf98/img/favicon_144x144.png"" } }  From v5.86.0 onwards (tested in v5.86.1 as well), the same link in a bookmark card produces an error: ![CleanShot 2024-06-23 at 15 00 22@2x](https://github.com/TryGhost/Ghost/assets/25703384/2597c59b-b7d2-4d82-be45-7230d5c19580) Response from XXX in v5.86.0 and v5.86.1:  { ""errors"": [ { ""message"": ""Validation error, cannot read oembed."", ""context"": ""URL contains insufficient metadata. https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""type"": ""ValidationError"", ""details"": null, ""property"": null, ""help"": null, ""code"": null, ""id"": ""8c6cb290-3160-11ef-bc69-01c02bf2f945"", ""ghostErrorCode"": null } ] }   Steps to Reproduce 1. Create a new post in v5.86.0 or v5.86.1 2. Add a bookmark card 3. Enter any YouTube URL (for example https://www.youtube.com/watch?v=aqz-KE-bpKQ) 4. Error is shown  Ghost Version v5.86.0  Node.js Version 18 LTS  How did you install Ghost? Ubuntu 22.04 with Ghost CLI  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file,"Bookmark for YouTube links not working  Issue Summary Adding a bookmark card with a link to YouTube seems to have broken in v5.86.0. Previously, adding a bookmark card with a valid link to a YouTube video resulted in this: ![CleanShot 2024-06-23 at 14 59 44@2x](https://github.com/TryGhost/Ghost/assets/25703384/44000a43-9c13-4823-a50a-143cb1ef3123) Response from XXX in v5.85.2:  { ""version"": ""1.0"", ""type"": ""bookmark"", ""url"": ""https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""metadata"": { ""url"": ""https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""title"": ""Big Buck Bunny 60fps 4K - Official Blender Foundation Short Film"", ""description"": ""Enjoy this UHD High Frame rate version of one of the iconic short films produced by Blender Institute!Learn more about the project here http://bbb3d.renderfa"", ""author"": null, ""publisher"": ""YouTube"", ""thumbnail"": ""https://i.ytimg.com/vi/aqz-KE-bpKQ/maxresdefault.jpg"", ""icon"": ""https://www.youtube.com/s/desktop/9f65bf98/img/favicon_144x144.png"" } }  From v5.86.0 onwards (tested in v5.86.1 as well), the same link in a bookmark card produces an error: ![CleanShot 2024-06-23 at 15 00 22@2x](https://github.com/TryGhost/Ghost/assets/25703384/2597c59b-b7d2-4d82-be45-7230d5c19580) Response from XXX in v5.86.0 and v5.86.1:  { ""errors"": [ { ""message"": ""Validation error, cannot read oembed."", ""context"": ""URL contains insufficient metadata. https://www.youtube.com/watch?v=aqz-KE-bpKQ"", ""type"": ""ValidationError"", ""details"": null, ""property"": null, ""help"": null, ""code"": null, ""id"": ""8c6cb290-3160-11ef-bc69-01c02bf2f945"", ""ghostErrorCode"": null } ] }   Steps to Reproduce 1. Create a new post in v5.86.0 or v5.86.1 2. Add a bookmark card 3. Enter any YouTube URL (for example https://www.youtube.com/watch?v=aqz-KE-bpKQ) 4. Error is shown  Ghost Version v5.86.0  Node.js Version 18 LTS  How did you install Ghost? Ubuntu 22.04 with Ghost CLI  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file",bug,0.95
16685,Ghost,https://github.com/TryGhost/Ghost/issues/16685,images added to posts in markdown are displayed differently than images added using the '+' button," Issue Summary **Problem:** Images added to posts in Markdown are left aligned instead of center aligned, and they do not display the caption underneath. This behavior differs from images added to posts using the '+' button in the editor. **Expected Behavior:** Images added to posts using Markdown are displayed the same as images added to posts using the '+' button in the editor. This means they should be center aligned and the caption should be displayed if a caption is provided.  Steps to Reproduce 1. Add a Markdown element to a post. 2. Add an image to the Markdown element. 3. Add an image element to the post not using Markdown. 4. Compare how the two images are displayed when the post is published.  Ghost Version 5.44.0  Node.js Version v16.20.0  How did you install Ghost? Docker (ghost:alpine image)  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"images added to posts in markdown are displayed differently than images added using the '+' button  Issue Summary **Problem:** Images added to posts in Markdown are left aligned instead of center aligned, and they do not display the caption underneath. This behavior differs from images added to posts using the '+' button in the editor. **Expected Behavior:** Images added to posts using Markdown are displayed the same as images added to posts using the '+' button in the editor. This means they should be center aligned and the caption should be displayed if a caption is provided.  Steps to Reproduce 1. Add a Markdown element to a post. 2. Add an image to the Markdown element. 3. Add an image element to the post not using Markdown. 4. Compare how the two images are displayed when the post is published.  Ghost Version 5.44.0  Node.js Version v16.20.0  How did you install Ghost? Docker (ghost:alpine image)  Database type SQLite3  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.9
22439,Ghost,https://github.com/TryGhost/Ghost/issues/22439,Hebrew Support - Search," Issue Summary Hi I noticed that Hebrew characters are not supported in sodo-search. The issue is due to this line: [search-index.js#L146](https://github.com/TryGhost/Ghost/blob/main/apps/sodo-search/src/search-index.js#L146). It filters out the Hebrew Unicode block. I think the fix is simple: add \u0590-\u05FF to the regex  Steps to Reproduce 1. Create a blog with Hebrew content, including tags, titles, etc. 2. Even after setting the publication language to ""he"", the search does not find any matches.  Ghost Version 5.111.0  Node.js Version 18  How did you install Ghost? cli  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",source-file | test-file,"Hebrew Support - Search  Issue Summary Hi I noticed that Hebrew characters are not supported in sodo-search. The issue is due to this line: [search-index.js#L146](https://github.com/TryGhost/Ghost/blob/main/apps/sodo-search/src/search-index.js#L146). It filters out the Hebrew Unicode block. I think the fix is simple: add \u0590-\u05FF to the regex  Steps to Reproduce 1. Create a blog with Hebrew content, including tags, titles, etc. 2. Even after setting the publication language to ""he"", the search does not find any matches.  Ghost Version 5.111.0  Node.js Version 18  How did you install Ghost? cli  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.9
19375,Ghost,https://github.com/TryGhost/Ghost/issues/19375,Editor crashes on special character combination," Issue Summary The editor crashes when special characters are combined. Specifically typing `:|`. My expectation would have been that the emoji autocomplete opens. The error message inside the editor is `Loading has failed. Try refreshing the browser!`, there are no relevant logs in the browser console or on the server.  Steps to Reproduce 1. Open the editor 2. Type `:|` 3. See error  Ghost Version 5.75.1  Node.js Version 18  How did you install Ghost? Ghost CLI  Database type MySQL 8  Browser & OS version Chromium 119.0.6045.159  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file,"Editor crashes on special character combination  Issue Summary The editor crashes when special characters are combined. Specifically typing `:|`. My expectation would have been that the emoji autocomplete opens. The error message inside the editor is `Loading has failed. Try refreshing the browser!`, there are no relevant logs in the browser console or on the server.  Steps to Reproduce 1. Open the editor 2. Type `:|` 3. See error  Ghost Version 5.75.1  Node.js Version 18  How did you install Ghost? Ghost CLI  Database type MySQL 8  Browser & OS version Chromium 119.0.6045.159  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file",no-bug,0.9
16120,Ghost,https://github.com/TryGhost/Ghost/issues/16120,scriptUrl.includes is not a function when SodoSearch has url:false," Issue Summary Hi Ghost Team, When you want to disable the loading of SodoSearch library on Ghost using url:false described in the documentation : ` ""sodoSearch"": { ""url"": false } ` Ghost returns this message in the error log : ` ""ScriptUrl.includes is not a function at getFrontendAppConfig (/data/www/www.xxxx.org/versions/5.30.0/core/frontend/utils/frontend-apps.js:7:19) ` The code : ` let scriptUrl = config.get(`${app}:url`); let stylesUrl = config.get(`${app}:styles`); if (scriptUrl.includes('{version}')) { scriptUrl = scriptUrl.replace('{version}', appVersion); } if (stylesUrl?.includes('{version}')) { stylesUrl = stylesUrl.replace('{version}', appVersion); } ` Its look like a merge error : style.include and stylesUrl?.include are present twice in the function ? https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/utils/frontend-apps.js  Steps to Reproduce 1. Disable SodoSearch in the config file. 2. Check the Ghost error log  Ghost Version v5.30.0  Node.js Version v16.19.0  How did you install Ghost? Ghost CLI + Ghost Update  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell {""name"":""Log"",""hostname"":""sd-130779"",""pid"":1942748,""level"":50,""version"":""5.30.0"",""err"":{""domain"":""https://www.xxx.org"",""message"":""scriptUrl.includes is not a function"",""stack"":""TypeError: scriptUrl.includes is not a function\n at getFrontendAppConfig (/data/www/www.xxx.org/versions/5.30.0/core/frontend/utils/frontend-apps.js:7:19)\n at getSearchHelper (/data/www/www.xxx.org/versions/5.30.0/core/frontend/helpers/ghost_head.js:74:36)\n at Object.ghost_head (/data/www/www.xxx.org/versions/5.30.0/core/frontend/helpers/ghost_head.js:217:23)\n at async Object.returnAsync (/data/www/www.xxx.org/versions/5.30.0/core/frontend/services/helpers/handlebars.js:16:30)""},""msg"":""scriptUrl.includes is not a function"",""time"":""2023-01-14T15:22:33.637Z"",""v"":0}   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | source-file | source-file | source-file,"scriptUrl.includes is not a function when SodoSearch has url:false  Issue Summary Hi Ghost Team, When you want to disable the loading of SodoSearch library on Ghost using url:false described in the documentation : ` ""sodoSearch"": { ""url"": false } ` Ghost returns this message in the error log : ` ""ScriptUrl.includes is not a function at getFrontendAppConfig (/data/www/www.xxxx.org/versions/5.30.0/core/frontend/utils/frontend-apps.js:7:19) ` The code : ` let scriptUrl = config.get(`${app}:url`); let stylesUrl = config.get(`${app}:styles`); if (scriptUrl.includes('{version}')) { scriptUrl = scriptUrl.replace('{version}', appVersion); } if (stylesUrl?.includes('{version}')) { stylesUrl = stylesUrl.replace('{version}', appVersion); } ` Its look like a merge error : style.include and stylesUrl?.include are present twice in the function ? https://github.com/TryGhost/Ghost/blob/main/ghost/core/core/frontend/utils/frontend-apps.js  Steps to Reproduce 1. Disable SodoSearch in the config file. 2. Check the Ghost error log  Ghost Version v5.30.0  Node.js Version v16.19.0  How did you install Ghost? Ghost CLI + Ghost Update  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell {""name"":""Log"",""hostname"":""sd-130779"",""pid"":1942748,""level"":50,""version"":""5.30.0"",""err"":{""domain"":""https://www.xxx.org"",""message"":""scriptUrl.includes is not a function"",""stack"":""TypeError: scriptUrl.includes is not a function\n at getFrontendAppConfig (/data/www/www.xxx.org/versions/5.30.0/core/frontend/utils/frontend-apps.js:7:19)\n at getSearchHelper (/data/www/www.xxx.org/versions/5.30.0/core/frontend/helpers/ghost_head.js:74:36)\n at Object.ghost_head (/data/www/www.xxx.org/versions/5.30.0/core/frontend/helpers/ghost_head.js:217:23)\n at async Object.returnAsync (/data/www/www.xxx.org/versions/5.30.0/core/frontend/services/helpers/handlebars.js:16:30)""},""msg"":""scriptUrl.includes is not a function"",""time"":""2023-01-14T15:22:33.637Z"",""v"":0}   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file source-file source-file source-file",no-bug,0.9
17287,Ghost,https://github.com/TryGhost/Ghost/issues/17287,Dark mode Uploading interface of Import content modal is blank/white," Issue Summary While in dark mode, upon selecting a JSON or zip file to import via Labs --> Import content, the Uploading interface shows a blank/white rectangle. ![Xnapper-2023-07-11-14 57 43](https://github.com/TryGhost/Ghost/assets/27488257/f9c81741-8a20-4710-a267-945571c6bae2) ![Xnapper-2023-07-11-18 34 31](https://github.com/TryGhost/Ghost/assets/27488257/a3c3e444-dfb5-4153-84bf-fd2288847d2f) ![Xnapper-2023-07-11-14 57 58](https://github.com/TryGhost/Ghost/assets/27488257/aefa5330-f117-4c33-afdf-c24b3e759b20)  Steps to Reproduce 1. While in dark mode, click on Open Importer under Labs 2. Select a JSON or zip file 3. See the blank/white rectangle in the Uploading modal  Ghost Version 5.54.0  Node.js Version ?  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 115  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Dark mode Uploading interface of Import content modal is blank/white  Issue Summary While in dark mode, upon selecting a JSON or zip file to import via Labs --> Import content, the Uploading interface shows a blank/white rectangle. ![Xnapper-2023-07-11-14 57 43](https://github.com/TryGhost/Ghost/assets/27488257/f9c81741-8a20-4710-a267-945571c6bae2) ![Xnapper-2023-07-11-18 34 31](https://github.com/TryGhost/Ghost/assets/27488257/a3c3e444-dfb5-4153-84bf-fd2288847d2f) ![Xnapper-2023-07-11-14 57 58](https://github.com/TryGhost/Ghost/assets/27488257/aefa5330-f117-4c33-afdf-c24b3e759b20)  Steps to Reproduce 1. While in dark mode, click on Open Importer under Labs 2. Select a JSON or zip file 3. See the blank/white rectangle in the Uploading modal  Ghost Version 5.54.0  Node.js Version ?  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 115  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.9
19557,Ghost,https://github.com/TryGhost/Ghost/issues/19557,Styles are broken when video is inserted into the editor," Issue Summary When I insert an mp4 video into the editor, the style is severely out of place. This did not change with drag and drop or with the slash command. I have tried different videos and it reproduces the problem. https://github.com/TryGhost/Ghost/assets/10510365/9a88435d-12aa-4b15-aa46-5655f67f4cc2  Steps to Reproduce 1. Upload your video using `/video`  Ghost Version Ghost(Pro)  Node.js Version Ghost(Pro)  How did you install Ghost? Ghost(Pro)  Database type Other  Browser & OS version Google Chrome Version 120.0.6099.234 (Official Build) (arm64) / macOS Sonoma Version 14.2.1 (23C71)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file | documentation-file | other-file | documentation-file | other-file | documentation-file | other-file,"Styles are broken when video is inserted into the editor  Issue Summary When I insert an mp4 video into the editor, the style is severely out of place. This did not change with drag and drop or with the slash command. I have tried different videos and it reproduces the problem. https://github.com/TryGhost/Ghost/assets/10510365/9a88435d-12aa-4b15-aa46-5655f67f4cc2  Steps to Reproduce 1. Upload your video using `/video`  Ghost Version Ghost(Pro)  Node.js Version Ghost(Pro)  How did you install Ghost? Ghost(Pro)  Database type Other  Browser & OS version Google Chrome Version 120.0.6099.234 (Official Build) (arm64) / macOS Sonoma Version 14.2.1 (23C71)  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file documentation-file other-file documentation-file other-file documentation-file other-file",no-bug,0.95
16628,Ghost,https://github.com/TryGhost/Ghost/issues/16628,i18n Milestone 3: Wrap all public-facing strings,"_This issue is part of our community i18n project. The full project is documented [on the Ghost forum](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062)._   We have now started shipping our [i18n beta](https://forum.ghost.org/t/help-translate-ghost-beta/37461) in Ghost, and we're merging community pull requests to [add & update languages](https://github.com/TryGhost/Ghost/tree/main/ghost/i18n/locales). However, not all public-facing strings in Portal and our member emails are currently interpolated for translations. In order to have a full set of translations, we need to ensure all strings are wrapped with the `t(..)` helper.  How to work on this issue  Setting up 1. Clone the Ghost repository and [set up your local environment for development](https://ghost.org/docs/install/source/) 2. Run `yarn dev --portal` to get things running at http://localhost:2368/ 3. Toggle `Enable Portal translations (beta)` from http://localhost:2368/ghost/#/settings/labs 4. (optional) Change the Publication Language to make it easier to find uninterpolated strings: http://localhost:2368/ghost/#/settings/general  Wrapping strings Once you've found a public-facing string from code review or by using Portal/Ghost signup emails, you can easily wrap it so it will be picked up for translation. 1. Add `t('..')` around the string a. You may need to import the `t` function from the AppContext in Portal 2. Run `yarn translate` within `ghost/i18n` to ensure the locale JSON files include the new strings You can see plenty of examples of how this is currently done using this search query: https://github.com/search?q=repo%3ATryGhost%2FGhost+path%3Aghost%2Fportal+%7Bt%28%27&type=code Please take extra care to ensure you pass any variables into the `t` function, and make sure HTML escaping does not cause problems with the output.  Contributing Commit the changes and submit a PR for us to review and merge Be sure to read the contributing guide and reference this issue on the 3rd line of the commit: https://github.com/TryGhost/Ghost/blob/main/.github/CONTRIBUTING.md  Thank you to all contributors on the i18n beta so far If you speak a language that is not included in our current set of supported languages, please consider [submitting it](https://forum.ghost.org/t/help-translate-ghost-beta/37461)",documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | source-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | source-file | source-file | source-file | source-file | source-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file,"i18n Milestone 3: Wrap all public-facing strings _This issue is part of our community i18n project. The full project is documented [on the Ghost forum](https://forum.ghost.org/t/hacktoberfest-project-i18n-for-portal-member-emails-comments-ui-sodosearch/33062)._   We have now started shipping our [i18n beta](https://forum.ghost.org/t/help-translate-ghost-beta/37461) in Ghost, and we're merging community pull requests to [add & update languages](https://github.com/TryGhost/Ghost/tree/main/ghost/i18n/locales). However, not all public-facing strings in Portal and our member emails are currently interpolated for translations. In order to have a full set of translations, we need to ensure all strings are wrapped with the `t(..)` helper.  How to work on this issue  Setting up 1. Clone the Ghost repository and [set up your local environment for development](https://ghost.org/docs/install/source/) 2. Run `yarn dev --portal` to get things running at http://localhost:2368/ 3. Toggle `Enable Portal translations (beta)` from http://localhost:2368/ghost/#/settings/labs 4. (optional) Change the Publication Language to make it easier to find uninterpolated strings: http://localhost:2368/ghost/#/settings/general  Wrapping strings Once you've found a public-facing string from code review or by using Portal/Ghost signup emails, you can easily wrap it so it will be picked up for translation. 1. Add `t('..')` around the string a. You may need to import the `t` function from the AppContext in Portal 2. Run `yarn translate` within `ghost/i18n` to ensure the locale JSON files include the new strings You can see plenty of examples of how this is currently done using this search query: https://github.com/search?q=repo%3ATryGhost%2FGhost+path%3Aghost%2Fportal+%7Bt%28%27&type=code Please take extra care to ensure you pass any variables into the `t` function, and make sure HTML escaping does not cause problems with the output.  Contributing Commit the changes and submit a PR for us to review and merge Be sure to read the contributing guide and reference this issue on the 3rd line of the commit: https://github.com/TryGhost/Ghost/blob/main/.github/CONTRIBUTING.md  Thank you to all contributors on the i18n beta so far If you speak a language that is not included in our current set of supported languages, please consider [submitting it](https://forum.ghost.org/t/help-translate-ghost-beta/37461) documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file source-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file source-file source-file source-file source-file source-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file",no-bug,0.95
19129,Ghost,https://github.com/TryGhost/Ghost/issues/19129,Inline Code Formatting in Callout Card," Issue Summary # Issue Synopsis In previous versions of Ghost -- prior to upgrading to `5.74.3` -- inline code was formatted as expected in callout cards. Upon upgrading to the latest version, the inline code formatting still displays as expected in the editor view. However, when reading the published article, the formatting of the inline code is lost, and the inline code appears as plain text. This makes it difficult to emphasize and distinguish code and/or commands in callout cards. Inline code formatting in callout cards was last known to be working for me in Ghost `5.59`. # Screenshots **Callout Card with Code in Ghost `5.74.3` Editor** ![image](https://github.com/TryGhost/Ghost/assets/26947869/837e67c9-0bfd-41e8-9606-dfa7734c04c3) **Callout Card in Ghost `5.74.3` Published Article** ![image](https://github.com/TryGhost/Ghost/assets/26947869/e7a83f03-4b92-43b8-977c-88c44c8632e5) **Callout Card in Google Cache (Ghost `5.59`)** ![image](https://github.com/TryGhost/Ghost/assets/26947869/8cd49210-4179-490b-82ca-a7b148cdae75)  Steps to Reproduce 1. Create a new post or update an existing one 2. Add a new callout card or update an existing one 3. Add some text to the callout card, as well as one or many inline code blocks. Inline code blocks are created by wrapping text between backticks. \`inline code example\` == `inline code example` 4. Note that the inline code appears to be formatted correctly within the callout card 5. Publish or update the post, then open the published post 6. Note that the inline code formatting in the callout card does not match what's shown in the editor  Ghost Version 5.74.3  Node.js Version 18.17.1  How did you install Ghost? Followed self-hosting guidance, Ubuntu 22.04  Database type MySQL 8  Browser & OS version Google Chrome 119.0.6045.160  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | other-file | documentation-file | other-file | documentation-file | other-file,"Inline Code Formatting in Callout Card  Issue Summary # Issue Synopsis In previous versions of Ghost -- prior to upgrading to `5.74.3` -- inline code was formatted as expected in callout cards. Upon upgrading to the latest version, the inline code formatting still displays as expected in the editor view. However, when reading the published article, the formatting of the inline code is lost, and the inline code appears as plain text. This makes it difficult to emphasize and distinguish code and/or commands in callout cards. Inline code formatting in callout cards was last known to be working for me in Ghost `5.59`. # Screenshots **Callout Card with Code in Ghost `5.74.3` Editor** ![image](https://github.com/TryGhost/Ghost/assets/26947869/837e67c9-0bfd-41e8-9606-dfa7734c04c3) **Callout Card in Ghost `5.74.3` Published Article** ![image](https://github.com/TryGhost/Ghost/assets/26947869/e7a83f03-4b92-43b8-977c-88c44c8632e5) **Callout Card in Google Cache (Ghost `5.59`)** ![image](https://github.com/TryGhost/Ghost/assets/26947869/8cd49210-4179-490b-82ca-a7b148cdae75)  Steps to Reproduce 1. Create a new post or update an existing one 2. Add a new callout card or update an existing one 3. Add some text to the callout card, as well as one or many inline code blocks. Inline code blocks are created by wrapping text between backticks. \`inline code example\` == `inline code example` 4. Note that the inline code appears to be formatted correctly within the callout card 5. Publish or update the post, then open the published post 6. Note that the inline code formatting in the callout card does not match what's shown in the editor  Ghost Version 5.74.3  Node.js Version 18.17.1  How did you install Ghost? Followed self-hosting guidance, Ubuntu 22.04  Database type MySQL 8  Browser & OS version Google Chrome 119.0.6045.160  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file other-file documentation-file other-file documentation-file other-file",no-bug,0.9
15470,Ghost,https://github.com/TryGhost/Ghost/issues/15470,Saving different settings screens open in different tabs can overwrite with old values," Issue Summary If you open two settings screens in different tabs, make changes in the first and save, make changes in the second and save, then the second save will have overwritten your changes from the first save with the old values. Related forum discussion: https://forum.ghost.org/t/editing-code-injection-and-navigation-at-the-same-time-does-not-work/32984/7  Steps to Reproduce 1. Open ""Code injection"" settings screen in one tab 2. Open ""Navigation"" settings screen in another tab 3. Enter some text into the code injection fields and save 4. Make a change on the navigation screen and save 5. Refresh the code injection screen After doing this you'll find that the changes you made on the code injection screen have been ""undone"".  Ghost Version 5.16.0  Node.js Version 16.15.0  How did you install Ghost? Local  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | source-file | test-file | test-file | test-file | source-file | source-file | source-file | test-file | test-file | test-file,"Saving different settings screens open in different tabs can overwrite with old values  Issue Summary If you open two settings screens in different tabs, make changes in the first and save, make changes in the second and save, then the second save will have overwritten your changes from the first save with the old values. Related forum discussion: https://forum.ghost.org/t/editing-code-injection-and-navigation-at-the-same-time-does-not-work/32984/7  Steps to Reproduce 1. Open ""Code injection"" settings screen in one tab 2. Open ""Navigation"" settings screen in another tab 3. Enter some text into the code injection fields and save 4. Make a change on the navigation screen and save 5. Refresh the code injection screen After doing this you'll find that the changes you made on the code injection screen have been ""undone"".  Ghost Version 5.16.0  Node.js Version 16.15.0  How did you install Ghost? Local  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file test-file test-file test-file source-file source-file source-file test-file test-file test-file source-file source-file source-file test-file test-file test-file source-file source-file source-file test-file test-file test-file",bug,0.8
15324,Ghost,https://github.com/TryGhost/Ghost/issues/15324,Adding a new member with Admin API does not trigger member email alerts," Issue Summary When adding a new member with the Admin API endpoint the new member is added but the notification is not sent to the staff users and all staff users have notifications enabled.  Steps to Reproduce Enable new signup email alerts for staff users. Create a new member using the Admin API. The user is created, it is listed in the members page. Staff users do not receive email about new member. Email sending works, other email (ex: staff user invite) are sent and received.  Ghost Version 5.12.0  Node.js Version 16.17.0  How did you install Ghost? digital ocean + ubuntu  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell No errors   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | source-file,"Adding a new member with Admin API does not trigger member email alerts  Issue Summary When adding a new member with the Admin API endpoint the new member is added but the notification is not sent to the staff users and all staff users have notifications enabled.  Steps to Reproduce Enable new signup email alerts for staff users. Create a new member using the Admin API. The user is created, it is listed in the members page. Staff users do not receive email about new member. Email sending works, other email (ex: staff user invite) are sent and received.  Ghost Version 5.12.0  Node.js Version 16.17.0  How did you install Ghost? digital ocean + ubuntu  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output shell No errors   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file source-file",no-bug,0.9
22445,Ghost,https://github.com/TryGhost/Ghost/issues/22445,Add user role to for expanded editor permissions," Issue Summary Currently only admins (or owners) can manage members and moderate comments, with the only next-most-privileged role being the editor. It would be beneficial to add another level between that can do editing, member management, comment moderation, etc. that doesn't give full control over the site and settings.  Steps to Reproduce f  Ghost Version current  Node.js Version 20  How did you install Ghost? local  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository",test-file | test-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | test-file | source-file | source-file | documentation-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | config-file | source-file | source-file | source-file | other-file | other-file | other-file | source-file | source-file | test-file | test-file | source-file | other-file | other-file | other-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | source-file | other-file | source-file | source-file | source-file | source-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | test-file | other-file | test-file | source-file | source-file | source-file | test-file,"Add user role to for expanded editor permissions  Issue Summary Currently only admins (or owners) can manage members and moderate comments, with the only next-most-privileged role being the editor. It would be beneficial to add another level between that can do editing, member management, comment moderation, etc. that doesn't give full control over the site and settings.  Steps to Reproduce f  Ghost Version current  Node.js Version 20  How did you install Ghost? local  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output shell   Code of Conduct - [x] I agree to be friendly and polite to people in this repository test-file test-file other-file source-file source-file source-file source-file source-file source-file test-file source-file source-file documentation-file source-file source-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file config-file source-file source-file source-file other-file other-file other-file source-file source-file test-file test-file source-file other-file other-file other-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file source-file other-file source-file source-file source-file source-file test-file test-file test-file test-file test-file test-file test-file test-file test-file test-file other-file test-file source-file source-file source-file test-file",no-bug,0.9
19246,Ghost,https://github.com/TryGhost/Ghost/issues/19246,Bottom portions of Recommendations area in admin appears white in dark mode," Issue Summary As the title says, the bottom portions of the Recommendations area in the admin appears white in dark mode. Your recommendations: ![Xnapper-2023-12-06-10 47 18](https://github.com/TryGhost/Ghost/assets/27488257/1801884e-a8a4-48ac-b59a-0b2260561cdd) Recommending you: ![Xnapper-2023-12-06-10 48 03](https://github.com/TryGhost/Ghost/assets/27488257/3f815c31-74aa-498e-8b86-bc7a012f7fc6)  Steps to Reproduce 1. Set the admin to dark mode 2. Visit the Recommendations section 3. See white bands at the bottom  Ghost Version 5.75.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 120.0.1, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | other-file | other-file,"Bottom portions of Recommendations area in admin appears white in dark mode  Issue Summary As the title says, the bottom portions of the Recommendations area in the admin appears white in dark mode. Your recommendations: ![Xnapper-2023-12-06-10 47 18](https://github.com/TryGhost/Ghost/assets/27488257/1801884e-a8a4-48ac-b59a-0b2260561cdd) Recommending you: ![Xnapper-2023-12-06-10 48 03](https://github.com/TryGhost/Ghost/assets/27488257/3f815c31-74aa-498e-8b86-bc7a012f7fc6)  Steps to Reproduce 1. Set the admin to dark mode 2. Visit the Recommendations section 3. See white bands at the bottom  Ghost Version 5.75.1+moya  Node.js Version Yes  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version Firefox 120.0.1, macOS 13.6  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file other-file other-file",no-bug,0.95
18834,Ghost,https://github.com/TryGhost/Ghost/issues/18834,"Missing helper: ""readable_url"""," Issue Summary With the new recommendations feature, a helper called `readable_url `has been added. Unfortunately, using this helper results in a GScan error `Missing helper: ""readable_url""`.  Steps to Reproduce Add this code `{{readable_url ""https://google.com""}}` to any file, restart Ghost, and check the GScan message: ![Zrzut ekranu 2023-11-2 o 00 26 12](https://github.com/TryGhost/Ghost/assets/23366922/e523aba9-c428-42a9-b37f-2c3242dd71e2)  Ghost Version 5.71.1  Node.js Version v18.17.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version Any  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | other-file,"Missing helper: ""readable_url""  Issue Summary With the new recommendations feature, a helper called `readable_url `has been added. Unfortunately, using this helper results in a GScan error `Missing helper: ""readable_url""`.  Steps to Reproduce Add this code `{{readable_url ""https://google.com""}}` to any file, restart Ghost, and check the GScan message: ![Zrzut ekranu 2023-11-2 o 00 26 12](https://github.com/TryGhost/Ghost/assets/23366922/e523aba9-c428-42a9-b37f-2c3242dd71e2)  Ghost Version 5.71.1  Node.js Version v18.17.0  How did you install Ghost? localhost  Database type SQLite3  Browser & OS version Any  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file other-file",no-bug,0.9
20027,Ghost,https://github.com/TryGhost/Ghost/issues/20027,Newlines not correctly handled in product card titles," Issue Summary If I press shift-enter while creating a title for a product card, then each line of the product title ends up in a separate span. I can publish and it displays without issues. (This is handy, because I might want to change how those spans are styled or laid out.) Everything is OK until I open the post a second time in the editor. At that point, the title is consolidated into a single span. Maybe titles shouldn't be breakable into multiple spans, but it'd be nice if the behavior (whatever it is) were consistent, and opening a published post didn't reformat it.  Steps to Reproduce Create a product card. Give it a title that spans multiple lines. Publish. Observe the output of the post HTML, with the title in multiple spans. Open the post in the editor again. (Line breaks will be gone.) Save, without making other changes. Observe the output of the HTML, with the title now in a single span.  Ghost Version 5.81.1  Node.js Version 18  How did you install Ghost? WSL2/using Ghost-cli  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | other-file,"Newlines not correctly handled in product card titles  Issue Summary If I press shift-enter while creating a title for a product card, then each line of the product title ends up in a separate span. I can publish and it displays without issues. (This is handy, because I might want to change how those spans are styled or laid out.) Everything is OK until I open the post a second time in the editor. At that point, the title is consolidated into a single span. Maybe titles shouldn't be breakable into multiple spans, but it'd be nice if the behavior (whatever it is) were consistent, and opening a published post didn't reformat it.  Steps to Reproduce Create a product card. Give it a title that spans multiple lines. Publish. Observe the output of the post HTML, with the title in multiple spans. Open the post in the editor again. (Line breaks will be gone.) Save, without making other changes. Observe the output of the HTML, with the title now in a single span.  Ghost Version 5.81.1  Node.js Version 18  How did you install Ghost? WSL2/using Ghost-cli  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository documentation-file documentation-file documentation-file documentation-file documentation-file other-file",no-bug,0.9
15506,Ghost,https://github.com/TryGhost/Ghost/issues/15506,"Menu items lose active state when ""New "" modal is open"," Issue Summary The relevant item in the left-hand menu should remain bold when the ""New X"" modal is open <img width=""1181"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193123657-99e81c05-7ffb-4e72-b4bc-2f9a35b818c5.png""> <img width=""1191"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193123751-738decd0-19bb-4ab5-b1e0-907f01f2f947.png"">  Steps to Reproduce 1. Open Ghost admin 2. Click on tags, note that ""Tags"" in the left menu is bold 3. Click on ""New tag"" and notice that ""Tags"" in the left menu is no longer bold Same for Members, Offers, etc.  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file | test-file | test-file | test-file | test-file,"Menu items lose active state when ""New "" modal is open  Issue Summary The relevant item in the left-hand menu should remain bold when the ""New X"" modal is open <img width=""1181"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193123657-99e81c05-7ffb-4e72-b4bc-2f9a35b818c5.png""> <img width=""1191"" alt=""image"" src=""https://user-images.githubusercontent.com/101513/193123751-738decd0-19bb-4ab5-b1e0-907f01f2f947.png"">  Steps to Reproduce 1. Open Ghost admin 2. Click on tags, note that ""Tags"" in the left menu is bold 3. Click on ""New tag"" and notice that ""Tags"" in the left menu is no longer bold Same for Members, Offers, etc.  Ghost Version 5.16  Node.js Version 16  How did you install Ghost? ghost install  Database type MySQL 8  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file test-file test-file test-file test-file",no-bug,0.9
21766,Ghost,https://github.com/TryGhost/Ghost/issues/21766,Translation Request for Stripe Checkout (Tips & Donations): pt-BR," Issue Summary Hi there! I wanted to reach out because I've noticed that when I use the Tips & Donations feature in pt-BR, the English phrase Add a personal note still appears. The other labels are correctly displayed in Brazilian Portuguese, but this one is still in English. It seems to be a custom field generated by Ghost when calling Stripe Checkout. I thought it might be helpful to suggest a translation: how about Deixar comentrio for that phrase? If you need any more information or have questions, I'm here to help! Best, Angelo ![ghost-stripe-checkout-tip-jar-json](https://github.com/user-attachments/assets/e2a01b6a-3982-417c-aac2-3a35c958927d) ![ghost-stripe-checkout-tip-jar](https://github.com/user-attachments/assets/8909c4ec-2c4f-4b89-bee4-f84f7b993cb0)  Steps to Reproduce - Set the publication language to ""pt-BR"" in the General settings. - Enable the Tips & Donations feature https://ghost.org/help/tips-and-donations/. - Open the shareable link displayed in the Tips & Donations settings.  Ghost Version Ghost Pro  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | source-file | test-file | test-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | documentation-file | test-file | source-file | test-file | source-file | source-file,"Translation Request for Stripe Checkout (Tips & Donations): pt-BR  Issue Summary Hi there! I wanted to reach out because I've noticed that when I use the Tips & Donations feature in pt-BR, the English phrase Add a personal note still appears. The other labels are correctly displayed in Brazilian Portuguese, but this one is still in English. It seems to be a custom field generated by Ghost when calling Stripe Checkout. I thought it might be helpful to suggest a translation: how about Deixar comentrio for that phrase? If you need any more information or have questions, I'm here to help! Best, Angelo ![ghost-stripe-checkout-tip-jar-json](https://github.com/user-attachments/assets/e2a01b6a-3982-417c-aac2-3a35c958927d) ![ghost-stripe-checkout-tip-jar](https://github.com/user-attachments/assets/8909c4ec-2c4f-4b89-bee4-f84f7b993cb0)  Steps to Reproduce - Set the publication language to ""pt-BR"" in the General settings. - Enable the Tips & Donations feature https://ghost.org/help/tips-and-donations/. - Open the shareable link displayed in the Tips & Donations settings.  Ghost Version Ghost Pro  Node.js Version Ghost Pro  How did you install Ghost? Ghost Pro  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file source-file test-file test-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file documentation-file test-file source-file test-file source-file source-file",no-bug,0.9
16332,Ghost,https://github.com/TryGhost/Ghost/issues/16332,Handlebars helper for assets errors when input is SafeString," Issue Summary Try to compute asset path with `asset` helper and passing `(concat ""some"" ""string"")` as input i.e. check `{{asset (concat 'some' 'string'}}`. It will error with `[error.hbs] path.match is not a function`. Relevant lines of code: https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/helpers/asset.js#L28 https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/meta/asset-url.js#L16 https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/helpers/concat.js#L7  Steps to Reproduce `{{asset (concat 'some' 'string'}}` produces error regardless of the concatenated string provided. The reason is that asset helper expect plain strings as input but `(concat )` produces `SafeString` object which results in the above error.  Ghost Version 5.35.1-alpine (https://hub.docker.com/_/ghost)  Node.js Version Comes with https://hub.docker.com/_/ghost  How did you install Ghost? https://hub.docker.com/_/ghost  Relevant log / error output shell TypeError: path.match is not a function at getAssetUrl (core/frontend/meta/asset-url.js:16:14) at Object.asset (core/frontend/helpers/asset.js:40:9) at Object.wrapper (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js:15:19) at Object.eval [as main] (eval at createFunctionContext (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:10:123) at main (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository",source-file | test-file,"Handlebars helper for assets errors when input is SafeString  Issue Summary Try to compute asset path with `asset` helper and passing `(concat ""some"" ""string"")` as input i.e. check `{{asset (concat 'some' 'string'}}`. It will error with `[error.hbs] path.match is not a function`. Relevant lines of code: https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/helpers/asset.js#L28 https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/meta/asset-url.js#L16 https://github.com/TryGhost/Ghost/blob/c667620d8f2e32c96fe376ad0f3dabc79488532a/ghost/core/core/frontend/helpers/concat.js#L7  Steps to Reproduce `{{asset (concat 'some' 'string'}}` produces error regardless of the concatenated string provided. The reason is that asset helper expect plain strings as input but `(concat )` produces `SafeString` object which results in the above error.  Ghost Version 5.35.1-alpine (https://hub.docker.com/_/ghost)  Node.js Version Comes with https://hub.docker.com/_/ghost  How did you install Ghost? https://hub.docker.com/_/ghost  Relevant log / error output shell TypeError: path.match is not a function at getAssetUrl (core/frontend/meta/asset-url.js:16:14) at Object.asset (core/frontend/helpers/asset.js:40:9) at Object.wrapper (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js:15:19) at Object.eval [as main] (eval at createFunctionContext (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js:262:23), <anonymous>:10:123) at main (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/runtime.js:208:32) at ret (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/runtime.js:212:12) at ret (/home/monkeysees/ghost-git/node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js:519:21)   Code of Conduct - [X] I agree to be friendly and polite to people in this repository source-file test-file",no-bug,0.9
15931,Ghost,https://github.com/TryGhost/Ghost/issues/15931,`latest` tag on NPM is not updated for @tryghost/portal,"https://unpkg.com/@tryghost/portal@latest/umd/portal.min.js still points to an outdated version  2.13.2  but it should to 2.21.0. The problem is that the `latest` tag has not been updated after a few last releases  NPM also shows outdated version: <img width=""389"" alt=""Screenshot 2022-12-13 at 13 10 57"" src=""https://user-images.githubusercontent.com/1338731/207314549-62ea365e-1718-408c-a1d7-d1363ae95473.png""> <img width=""775"" alt=""Screenshot 2022-12-13 at 13 11 21"" src=""https://user-images.githubusercontent.com/1338731/207314620-f1bb1612-9837-49d2-a34d-e41c339106d2.png""> <details> <summary>Original (incorrect) issue</summary> ## `url` in Stripe `members/api/create-stripe-checkout-session/` is not handled  `publicKey` is expected  Issue Summary When a request to `members/api/create-stripe-checkout-session/` is made, the response is an object with a single field: `{url: """"}`. Yet, some functions do not handled that well. For example, it's correctly handled here: https://github.com/TryGhost/Ghost/blob/74d0fee1259476cd29962ecae2181c7e13b3932b/ghost/portal/src/utils/api.js#L385-L387 but not here: https://github.com/TryGhost/Ghost/blob/74d0fee1259476cd29962ecae2181c7e13b3932b/ghost/portal/src/utils/api.js#L432  Steps to Reproduce 1. Go to https://news.typeofweb.com 2. Scroll down a bit 3. Click on the blue floating ""Subskrybuj"" button in the bottom right corner. 4. Continue with a paid subscription PLN 5/month 5. See error in the console. 6. Inspect network tab and notice that the endpoint returned `{url}` instead of `{publicKey}`  Ghost Version 74d0fee1259476cd29962ecae2181c7e13b3932b  Node.js Version irrelevant  How did you install Ghost? irrelevant  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository </details>",source-file,"`latest` tag on NPM is not updated for @tryghost/portal https://unpkg.com/@tryghost/portal@latest/umd/portal.min.js still points to an outdated version  2.13.2  but it should to 2.21.0. The problem is that the `latest` tag has not been updated after a few last releases  NPM also shows outdated version: <img width=""389"" alt=""Screenshot 2022-12-13 at 13 10 57"" src=""https://user-images.githubusercontent.com/1338731/207314549-62ea365e-1718-408c-a1d7-d1363ae95473.png""> <img width=""775"" alt=""Screenshot 2022-12-13 at 13 11 21"" src=""https://user-images.githubusercontent.com/1338731/207314620-f1bb1612-9837-49d2-a34d-e41c339106d2.png""> <details> <summary>Original (incorrect) issue</summary> ## `url` in Stripe `members/api/create-stripe-checkout-session/` is not handled  `publicKey` is expected  Issue Summary When a request to `members/api/create-stripe-checkout-session/` is made, the response is an object with a single field: `{url: """"}`. Yet, some functions do not handled that well. For example, it's correctly handled here: https://github.com/TryGhost/Ghost/blob/74d0fee1259476cd29962ecae2181c7e13b3932b/ghost/portal/src/utils/api.js#L385-L387 but not here: https://github.com/TryGhost/Ghost/blob/74d0fee1259476cd29962ecae2181c7e13b3932b/ghost/portal/src/utils/api.js#L432  Steps to Reproduce 1. Go to https://news.typeofweb.com 2. Scroll down a bit 3. Click on the blue floating ""Subskrybuj"" button in the bottom right corner. 4. Continue with a paid subscription PLN 5/month 5. See error in the console. 6. Inspect network tab and notice that the endpoint returned `{url}` instead of `{publicKey}`  Ghost Version 74d0fee1259476cd29962ecae2181c7e13b3932b  Node.js Version irrelevant  How did you install Ghost? irrelevant  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository </details> source-file",bug,0.9
16819,Ghost,https://github.com/TryGhost/Ghost/issues/16819,Dark mode notice about Ghost(Pro) udpate has incorrect BG colour," Issue Summary When in dark mode, the notice about Ghost(Pro) having been updated to the newest version has an incorrect background colour. ![Xnapper-2023-05-18-13 54 48](https://github.com/TryGhost/Ghost/assets/27488257/1071ea71-5394-47cc-b8b3-be50619ecb29)  Steps to Reproduce 1. Set admin to dark mode 2. Wait for notice about update to come through  Ghost Version 5.48.0+moya  Node.js Version Whatever Ghost(Pro) is using  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository",other-file,"Dark mode notice about Ghost(Pro) udpate has incorrect BG colour  Issue Summary When in dark mode, the notice about Ghost(Pro) having been updated to the newest version has an incorrect background colour. ![Xnapper-2023-05-18-13 54 48](https://github.com/TryGhost/Ghost/assets/27488257/1071ea71-5394-47cc-b8b3-be50619ecb29)  Steps to Reproduce 1. Set admin to dark mode 2. Wait for notice about update to come through  Ghost Version 5.48.0+moya  Node.js Version Whatever Ghost(Pro) is using  How did you install Ghost? Ghost(Pro)  Database type MySQL 5.7  Browser & OS version _No response_  Relevant log / error output _No response_  Code of Conduct - [X] I agree to be friendly and polite to people in this repository other-file",no-bug,0.95
