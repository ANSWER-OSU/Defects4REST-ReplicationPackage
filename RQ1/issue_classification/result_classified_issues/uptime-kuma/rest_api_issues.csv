issue_no,repo,issue_url,title,description,patched_file_types,text_for_topic_modeling,prediction,confidence
491,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/491,Created Incident message incorrect Timezone bug,**Is it a duplicate question?** NO **Describe the bug** Created incident message on the Status Page does not show the right time for my Timezone even though the Timezone is set up correctly in my admin dashboard. **Info** Uptime Kuma Version: 1.7.0 Using Docker?: Yes Docker Version: 20.10.3 Browser: Chrome Latest **Screenshots** ![htimezone correct](https://user-images.githubusercontent.com/37554361/134824464-c8b8552f-d537-4b86-9c6d-b425e2e1d19b.png) ![aerror1](https://user-images.githubusercontent.com/37554361/134824465-decf23fc-6e3b-4484-859e-86b6eb61e9e3.png),source-file | other-file | source-file | other-file,Created Incident message incorrect Timezone bug **Is it a duplicate question?** NO **Describe the bug** Created incident message on the Status Page does not show the right time for my Timezone even though the Timezone is set up correctly in my admin dashboard. **Info** Uptime Kuma Version: 1.7.0 Using Docker?: Yes Docker Version: 20.10.3 Browser: Chrome Latest **Screenshots** ![htimezone correct](https://user-images.githubusercontent.com/37554361/134824464-c8b8552f-d537-4b86-9c6d-b425e2e1d19b.png) ![aerror1](https://user-images.githubusercontent.com/37554361/134824465-decf23fc-6e3b-4484-859e-86b6eb61e9e3.png) source-file other-file source-file other-file,bug,0.85
2447,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/2447,Discord notification failing with Docker monitor,"  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Using docker monitor in conjunction with discord notifications results in error:  2022-12-21T09:55:44.132Z [MONITOR] ERROR: Cannot send notification to BCS INC Error: Error: AxiosError: Request failed with status code 400 {""embeds"":[""0""]} at Discord.throwGeneralAxiosError (/app/server/notification-providers/notification-provider.js:38:15) at Discord.send (/app/server/notification-providers/discord.js:116:18) at runMicrotasks (<anonymous>) at processTicksAndRejections (node:internal/process/task_queues:96:5) at async Function.sendNotification (/app/server/model/monitor.js:939:21) at async beat (/app/server/model/monitor.js:615:25) at async Timeout.safeBeat [as _onTimeout] (/app/server/model/monitor.js:658:17)  Most likely cause is `undefined` value for `Failing` variable (which I assume is passed on to the Discord)  2022-12-21T09:55:23.928Z [MONITOR] WARN: Monitor #16 'BOT | Docker': Failing: undefined | Interval: 20 seconds | Type: docker | Down Count: 4 | Resend Interval: 5  Notification when container goes back `UP` works, so this seems to be strictly something with `DOWN` notifications.  Reproduction steps 1) Monitor Docker container with Discord notifications enabled 2) Shut down container 3) Check UptimeKuma logs  Expected behavior A Discord message to pop-up once notify gets triggered  Actual Behavior Errors mentioned above in logs  Uptime-Kuma Version 1.18.5  Operating System and Arch Debian 10  Browser Google Chrome 108.0.5359.124  Docker Version _No response_  NodeJS Version _No response_  Relevant log output _No response_",source-file,"Discord notification failing with Docker monitor   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Using docker monitor in conjunction with discord notifications results in error:  2022-12-21T09:55:44.132Z [MONITOR] ERROR: Cannot send notification to BCS INC Error: Error: AxiosError: Request failed with status code 400 {""embeds"":[""0""]} at Discord.throwGeneralAxiosError (/app/server/notification-providers/notification-provider.js:38:15) at Discord.send (/app/server/notification-providers/discord.js:116:18) at runMicrotasks (<anonymous>) at processTicksAndRejections (node:internal/process/task_queues:96:5) at async Function.sendNotification (/app/server/model/monitor.js:939:21) at async beat (/app/server/model/monitor.js:615:25) at async Timeout.safeBeat [as _onTimeout] (/app/server/model/monitor.js:658:17)  Most likely cause is `undefined` value for `Failing` variable (which I assume is passed on to the Discord)  2022-12-21T09:55:23.928Z [MONITOR] WARN: Monitor #16 'BOT | Docker': Failing: undefined | Interval: 20 seconds | Type: docker | Down Count: 4 | Resend Interval: 5  Notification when container goes back `UP` works, so this seems to be strictly something with `DOWN` notifications.  Reproduction steps 1) Monitor Docker container with Discord notifications enabled 2) Shut down container 3) Check UptimeKuma logs  Expected behavior A Discord message to pop-up once notify gets triggered  Actual Behavior Errors mentioned above in logs  Uptime-Kuma Version 1.18.5  Operating System and Arch Debian 10  Browser Google Chrome 108.0.5359.124  Docker Version _No response_  NodeJS Version _No response_  Relevant log output _No response_ source-file",bug,0.9
3712,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/3712,"""No certificate"" badge is shown for http monitors","  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description _No response_  Reproduction steps 1. Create a monitor with http url 2. Add the monitor to a status page 3. Enable ""Show Certificate Expiry"" for that status page  Expected behavior No badge is shown for http monitors.  Actual Behavior A red badge with the text ""Cert Exp.: No/Bad Certificate"" is shown for a monitor with an http address. This looks like there's an error, but it's expected to have no certificate when it's http only.  Uptime-Kuma Version 1.23.1  Operating System and Arch Docker  Browser Firefox  Docker Version _No response_  NodeJS Version _No response_  Relevant log output _No response_",source-file | other-file,"""No certificate"" badge is shown for http monitors   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description _No response_  Reproduction steps 1. Create a monitor with http url 2. Add the monitor to a status page 3. Enable ""Show Certificate Expiry"" for that status page  Expected behavior No badge is shown for http monitors.  Actual Behavior A red badge with the text ""Cert Exp.: No/Bad Certificate"" is shown for a monitor with an http address. This looks like there's an error, but it's expected to have no certificate when it's http only.  Uptime-Kuma Version 1.23.1  Operating System and Arch Docker  Browser Firefox  Docker Version _No response_  NodeJS Version _No response_  Relevant log output _No response_ source-file other-file",bug,0.85
1802,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/1802,New http monitors add port as empty string,"  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Hello- I am attempting to write my own RESTful API for Uptime Kuma and have been poking around the database. I noticed that if I add a new https monitor through the Uptime Kuma gui, the `port` column in the database is added as an empty string. Well in my RESTful API I am going to enforce strict type checking at the API level (both incoming and outgoing data using [pydantic](https://pydantic-docs.helpmanual.io/usage/types/)), so I want to enforce this to be an `INTEGER` only or `NULL`. This is because a port **cannot** be anything other than an `INTEGER`. I noticed that in previous Uptime Kuma builds (months ago), https monitors had the value of `port` as `NULL`, then it was changed somewhere along the way to be empty strings. Now I see [SQLite embraces dynamic type checking](https://www.sqlite.org/flextypegood.html), but am wondering if this was a conscious design decision to make new `port` entries an empty string as opposed to `NULL`. I can make my API handle empty strings as well, but I would prefer making it a strict `NULL` or `INTEGER`. I wanted to check if it was a bug first though. I would argue that if the front end only allows an `INTEGER` to be selected (which is the case), then it is a bug. :) -Joe  Reproduction steps 1. Make a new https monitor. 2. Look in the database and see `port` is an empty string, not `NULL`.  Expected behavior I would expect a monitor without a used `port` to be added as `NULL`.  Actual Behavior It is added as an empty string.  Uptime-Kuma Version 1.16.1  Operating System and Arch MacOS 11.6.6  Browser Chrome Version 102.0.5005.115  Docker Version Docker version 20.10.12, build e91ed5707e  NodeJS Version _No response_  Relevant log output shell Here is the output from my pydantic logs: pydantic.error_wrappers.ValidationError: 1 validation error for Monitor response -> 0 -> port value is not a valid integer (type=type_error.integer) <class 'str'>  ",source-file | other-file,"New http monitors add port as empty string   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Hello- I am attempting to write my own RESTful API for Uptime Kuma and have been poking around the database. I noticed that if I add a new https monitor through the Uptime Kuma gui, the `port` column in the database is added as an empty string. Well in my RESTful API I am going to enforce strict type checking at the API level (both incoming and outgoing data using [pydantic](https://pydantic-docs.helpmanual.io/usage/types/)), so I want to enforce this to be an `INTEGER` only or `NULL`. This is because a port **cannot** be anything other than an `INTEGER`. I noticed that in previous Uptime Kuma builds (months ago), https monitors had the value of `port` as `NULL`, then it was changed somewhere along the way to be empty strings. Now I see [SQLite embraces dynamic type checking](https://www.sqlite.org/flextypegood.html), but am wondering if this was a conscious design decision to make new `port` entries an empty string as opposed to `NULL`. I can make my API handle empty strings as well, but I would prefer making it a strict `NULL` or `INTEGER`. I wanted to check if it was a bug first though. I would argue that if the front end only allows an `INTEGER` to be selected (which is the case), then it is a bug. :) -Joe  Reproduction steps 1. Make a new https monitor. 2. Look in the database and see `port` is an empty string, not `NULL`.  Expected behavior I would expect a monitor without a used `port` to be added as `NULL`.  Actual Behavior It is added as an empty string.  Uptime-Kuma Version 1.16.1  Operating System and Arch MacOS 11.6.6  Browser Chrome Version 102.0.5005.115  Docker Version Docker version 20.10.12, build e91ed5707e  NodeJS Version _No response_  Relevant log output shell Here is the output from my pydantic logs: pydantic.error_wrappers.ValidationError: 1 validation error for Monitor response -> 0 -> port value is not a valid integer (type=type_error.integer) <class 'str'>   source-file other-file",bug,0.9
833,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/833,[Bug?]: User Data Leaked to Client Without Two Step Auth Token Verified," Reproduction steps Input the right username and password but do not input auth-token.  Expected behavior Nothing send back.  Actual Behavior Sending monitor list back, with url in it. <img width=""634"" alt=""2021-10-29 11 48 23"" src=""https://user-images.githubusercontent.com/25259084/139465445-850d0372-5dc7-434f-a04e-9d743cb84a04.png"">  Uptime-Kuma version 1.9.1 ? current upstream master d4c9431  Have you spent some time to check if this issue has been raised before? - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)",source-file,"[Bug?]: User Data Leaked to Client Without Two Step Auth Token Verified  Reproduction steps Input the right username and password but do not input auth-token.  Expected behavior Nothing send back.  Actual Behavior Sending monitor list back, with url in it. <img width=""634"" alt=""2021-10-29 11 48 23"" src=""https://user-images.githubusercontent.com/25259084/139465445-850d0372-5dc7-434f-a04e-9d743cb84a04.png"">  Uptime-Kuma version 1.9.1 ? current upstream master d4c9431  Have you spent some time to check if this issue has been raised before? - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy) source-file",bug,0.95
3520,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/3520,Incorrect accepted_statuscodes via API (using python uptime-kuma-api package) made kuma completely non-functional,"  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Passing incorrect input [200] to accepted_statuscodes via the python api package made kuma completely non-functional. The backend should do atleast some validation on fields, before saving monitors.  Reproduction steps Create a Monitor via the Python API using ""uptime-kuma-api""  api = UptimeKumaApi(f'https://kuma.example.com') api.login('root', '1234') monitor = api.add_monitor( type=MonitorType.HTTP, name=f'Customer: xy', url='https://something.example.com', interval=60 * 5, maxretries=3, accepted_statuscodes=[200], )   Expected behavior Throwing some sort of error and not saving the incorrect monitor.  Actual Behavior Server crashes directly and on every startup, can not reach Backend or use the API.  Uptime-Kuma Version 1.22.1 with docker alpine  Operating System and Arch Ubuntu 22.04.2 LTS  Browser Firefox 115  Docker Version Docker version 24.0.5  NodeJS Version 16  Relevant log output shell 2023-08-03T07:47:03+02:00 [MONITOR] INFO: Added Monitor: undefined User ID: 1 /app/server/util-server.js:585 const codeRangeSplit = codeRange.split(""-"").map(string => parseInt(string)); ^ TypeError: codeRange.split is not a function at exports.checkStatusCode (/app/server/util-server.js:585:42) at validateStatus (/app/server/model/monitor.js:356:36) at settle (/app/node_modules/axios/lib/core/settle.js:14:46) at IncomingMessage.handleStreamEnd (/app/node_modules/axios/lib/adapters/http.js:347:11) at IncomingMessage.emit (node:events:402:35) at endReadableNT (node:internal/streams/readable:1343:12) at processTicksAndRejections (node:internal/process/task_queues:83:21) ==> Performing startup jobs and maintenance tasks ==> Starting application with user 0 group 0 Welcome to Uptime Kuma Your Node.js version: 16 2023-08-03T05:47:03Z [SERVER] INFO: Welcome to Uptime Kuma 2023-08-03T05:47:03Z [SERVER] INFO: Node Env: production 2023-08-03T05:47:03Z [SERVER] INFO: Importing Node libraries 2023-08-03T05:47:03Z [SERVER] INFO: Importing 3rd-party libraries 2023-08-03T05:47:05Z [SERVER] INFO: Creating express and socket.io instance 2023-08-03T05:47:05Z [SERVER] INFO: Server Type: HTTP 2023-08-03T05:47:05Z [SERVER] INFO: Importing this project modules 2023-08-03T05:47:05Z [NOTIFICATION] INFO: Prepare Notification Providers 2023-08-03T05:47:05Z [SERVER] INFO: Version: 1.22.1 2023-08-03T05:47:05Z [DB] INFO: Data Dir: ./data/ 2023-08-03T05:47:05Z [SERVER] INFO: Connecting to the Database 2023-08-03T05:47:05Z [DB] INFO: SQLite config: [ { journal_mode: 'wal' } ] [ { cache_size: -12000 } ] 2023-08-03T05:47:05Z [DB] INFO: SQLite Version: 3.41.1 2023-08-03T05:47:05Z [SERVER] INFO: Connected 2023-08-03T05:47:05Z [DB] INFO: Your database version: 10 2023-08-03T05:47:05Z [DB] INFO: Latest database version: 10 2023-08-03T05:47:05Z [DB] INFO: Database patch not needed 2023-08-03T05:47:05Z [DB] INFO: Database Patch 2.0 Process 2023-08-03T05:47:05Z [SERVER] INFO: Load JWT secret from database. 2023-08-03T07:47:05+02:00 [SERVER] INFO: Adding route 2023-08-03T07:47:05+02:00 [SERVER] INFO: Adding socket handler 2023-08-03T07:47:05+02:00 [SERVER] INFO: Init the server 2023-08-03T07:47:05+02:00 [SERVER] INFO: Listening on 3001 /app/server/util-server.js:585 const codeRangeSplit = codeRange.split(""-"").map(string => parseInt(string)); ^ TypeError: codeRange.split is not a function at exports.checkStatusCode (/app/server/util-server.js:585:42) at validateStatus (/app/server/model/monitor.js:356:36) at settle (/app/node_modules/axios/lib/core/settle.js:14:46) at IncomingMessage.handleStreamEnd (/app/node_modules/axios/lib/adapters/http.js:347:11) at IncomingMessage.emit (node:events:402:35) at endReadableNT (node:internal/streams/readable:1343:12) at processTicksAndRejections (node:internal/process/task_queues:83:21) ",source-file | source-file | source-file | source-file | source-file,"Incorrect accepted_statuscodes via API (using python uptime-kuma-api package) made kuma completely non-functional   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Passing incorrect input [200] to accepted_statuscodes via the python api package made kuma completely non-functional. The backend should do atleast some validation on fields, before saving monitors.  Reproduction steps Create a Monitor via the Python API using ""uptime-kuma-api""  api = UptimeKumaApi(f'https://kuma.example.com') api.login('root', '1234') monitor = api.add_monitor( type=MonitorType.HTTP, name=f'Customer: xy', url='https://something.example.com', interval=60 * 5, maxretries=3, accepted_statuscodes=[200], )   Expected behavior Throwing some sort of error and not saving the incorrect monitor.  Actual Behavior Server crashes directly and on every startup, can not reach Backend or use the API.  Uptime-Kuma Version 1.22.1 with docker alpine  Operating System and Arch Ubuntu 22.04.2 LTS  Browser Firefox 115  Docker Version Docker version 24.0.5  NodeJS Version 16  Relevant log output shell 2023-08-03T07:47:03+02:00 [MONITOR] INFO: Added Monitor: undefined User ID: 1 /app/server/util-server.js:585 const codeRangeSplit = codeRange.split(""-"").map(string => parseInt(string)); ^ TypeError: codeRange.split is not a function at exports.checkStatusCode (/app/server/util-server.js:585:42) at validateStatus (/app/server/model/monitor.js:356:36) at settle (/app/node_modules/axios/lib/core/settle.js:14:46) at IncomingMessage.handleStreamEnd (/app/node_modules/axios/lib/adapters/http.js:347:11) at IncomingMessage.emit (node:events:402:35) at endReadableNT (node:internal/streams/readable:1343:12) at processTicksAndRejections (node:internal/process/task_queues:83:21) ==> Performing startup jobs and maintenance tasks ==> Starting application with user 0 group 0 Welcome to Uptime Kuma Your Node.js version: 16 2023-08-03T05:47:03Z [SERVER] INFO: Welcome to Uptime Kuma 2023-08-03T05:47:03Z [SERVER] INFO: Node Env: production 2023-08-03T05:47:03Z [SERVER] INFO: Importing Node libraries 2023-08-03T05:47:03Z [SERVER] INFO: Importing 3rd-party libraries 2023-08-03T05:47:05Z [SERVER] INFO: Creating express and socket.io instance 2023-08-03T05:47:05Z [SERVER] INFO: Server Type: HTTP 2023-08-03T05:47:05Z [SERVER] INFO: Importing this project modules 2023-08-03T05:47:05Z [NOTIFICATION] INFO: Prepare Notification Providers 2023-08-03T05:47:05Z [SERVER] INFO: Version: 1.22.1 2023-08-03T05:47:05Z [DB] INFO: Data Dir: ./data/ 2023-08-03T05:47:05Z [SERVER] INFO: Connecting to the Database 2023-08-03T05:47:05Z [DB] INFO: SQLite config: [ { journal_mode: 'wal' } ] [ { cache_size: -12000 } ] 2023-08-03T05:47:05Z [DB] INFO: SQLite Version: 3.41.1 2023-08-03T05:47:05Z [SERVER] INFO: Connected 2023-08-03T05:47:05Z [DB] INFO: Your database version: 10 2023-08-03T05:47:05Z [DB] INFO: Latest database version: 10 2023-08-03T05:47:05Z [DB] INFO: Database patch not needed 2023-08-03T05:47:05Z [DB] INFO: Database Patch 2.0 Process 2023-08-03T05:47:05Z [SERVER] INFO: Load JWT secret from database. 2023-08-03T07:47:05+02:00 [SERVER] INFO: Adding route 2023-08-03T07:47:05+02:00 [SERVER] INFO: Adding socket handler 2023-08-03T07:47:05+02:00 [SERVER] INFO: Init the server 2023-08-03T07:47:05+02:00 [SERVER] INFO: Listening on 3001 /app/server/util-server.js:585 const codeRangeSplit = codeRange.split(""-"").map(string => parseInt(string)); ^ TypeError: codeRange.split is not a function at exports.checkStatusCode (/app/server/util-server.js:585:42) at validateStatus (/app/server/model/monitor.js:356:36) at settle (/app/node_modules/axios/lib/core/settle.js:14:46) at IncomingMessage.handleStreamEnd (/app/node_modules/axios/lib/adapters/http.js:347:11) at IncomingMessage.emit (node:events:402:35) at endReadableNT (node:internal/streams/readable:1343:12) at processTicksAndRejections (node:internal/process/task_queues:83:21)  source-file source-file source-file source-file source-file",bug,0.95
2468,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/2468,"""unexpected end of file"" error with 1.19.0",  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description After upgrading to latest version (1.19.0) I noticed several targets I was monitoring was detected as down with this error: unexpected end of file After downgrading to 1.18.5 everything works fine again!  Reproduction steps Install 1.19.0 and try to monitor this url: http://REDACTED/  Expected behavior monitoring should work  Actual Behavior This will fail on 1.19.0 and is working on previous versions  Uptime-Kuma Version 1.19.0  Operating System and Arch Ubuntu 22.04  Browser Google Chrome  Docker Version _No response_  NodeJS Version _No response_  Relevant log output shell [MONITOR] WARN: Monitor #6 'node 4': Failing: unexpected end of file | Interval: 20 seconds | Type: http | Down Count: 0 | Resend Interval: 0 ,source-file,"""unexpected end of file"" error with 1.19.0   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description After upgrading to latest version (1.19.0) I noticed several targets I was monitoring was detected as down with this error: unexpected end of file After downgrading to 1.18.5 everything works fine again!  Reproduction steps Install 1.19.0 and try to monitor this url: http://REDACTED/  Expected behavior monitoring should work  Actual Behavior This will fail on 1.19.0 and is working on previous versions  Uptime-Kuma Version 1.19.0  Operating System and Arch Ubuntu 22.04  Browser Google Chrome  Docker Version _No response_  NodeJS Version _No response_  Relevant log output shell [MONITOR] WARN: Monitor #6 'node 4': Failing: unexpected end of file | Interval: 20 seconds | Type: http | Down Count: 0 | Resend Interval: 0  source-file",bug,0.9
2727,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/2727,Discord Webhook Display Empty Service URL (MYSQL/MariaDB Check),  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description _No response_  Reproduction steps 1. Create service (MYSQL/MariaDB) ![image](https://user-images.githubusercontent.com/25010528/217066104-a5c68a3f-6057-4a14-a912-58c5205b0896.png) 2. Create Discord Webhook and setup alert 3. Get down your service  Expected behavior You didn't get any service URL or should get right address (like IP:PORT)  Actual Behavior You get discord embed message with empty (`https://`) **Service URL** ![image](https://user-images.githubusercontent.com/25010528/217065653-03f0374b-c6ef-4ed4-a98d-d578c04770bc.png)  Uptime-Kuma Version 1.19.4  Operating System and Arch <Not Required>  Browser <Not Required>  Docker Version <Not Required>  NodeJS Version <Not Required>  Relevant log output _No response_,source-file,Discord Webhook Display Empty Service URL (MYSQL/MariaDB Check)   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description _No response_  Reproduction steps 1. Create service (MYSQL/MariaDB) ![image](https://user-images.githubusercontent.com/25010528/217066104-a5c68a3f-6057-4a14-a912-58c5205b0896.png) 2. Create Discord Webhook and setup alert 3. Get down your service  Expected behavior You didn't get any service URL or should get right address (like IP:PORT)  Actual Behavior You get discord embed message with empty (`https://`) **Service URL** ![image](https://user-images.githubusercontent.com/25010528/217065653-03f0374b-c6ef-4ed4-a98d-d578c04770bc.png)  Uptime-Kuma Version 1.19.4  Operating System and Arch <Not Required>  Browser <Not Required>  Docker Version <Not Required>  NodeJS Version <Not Required>  Relevant log output _No response_ source-file,bug,0.9
5564,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/5564,[BUG] Slack Notifications - [no preview available]," I have found these related issues/pull requests N/A   Security Policy - [x] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Slack Notifications worked as expected in the Uptime Kuma **`1.x.x`** and displayed a notification preview correctly. Now in Uptime Kuma **`2.x.x`**, Slack Notifications do not work as expected and now display **`[no preview available]`**  Reproduction steps Any Uptime Kuma **POST** Request to a Slack webhook causes this issue  Expected behavior Slack is meant to display a brief Notification Preview  Actual Behavior Slack doesn't display a notification preview ![Image](https://github.com/user-attachments/assets/6f00032d-2ef8-4672-a496-b1414c361957)  Uptime-Kuma Version 2.0.0-beta.1  Operating System and Arch Debian 12.9 - ARM64  Browser Safari 18.3 (20620.2.4.11.4)   Deployment Environment - Runtime: Docker 27.5.0 - Database: SQLite - Filesystem used to store the database on: EXT4 on an NVMe - Number of Monitors: 42  Relevant log output shell 2025-01-22T19:41:12+11:00 [MONITOR] ERROR: Cannot send notification to Slack 2025-01-22T19:41:12+11:00 [MONITOR] ERROR: Error: Error: AxiosError: Request failed with status code 400 invalid_attachments at Slack.throwGeneralAxiosError (/app/server/notification-providers/notification-provider.js:69:15) at Slack.send (/app/server/notification-providers/slack.js:172:18) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async Monitor.sendNotification (/app/server/model/monitor.js:1343:21) at async beat (/app/server/model/monitor.js:925:21) at async Timeout.safeBeat [as _onTimeout] (/app/server/model/monitor.js:1010:17) ",source-file,"[BUG] Slack Notifications - [no preview available]  I have found these related issues/pull requests N/A   Security Policy - [x] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description Slack Notifications worked as expected in the Uptime Kuma **`1.x.x`** and displayed a notification preview correctly. Now in Uptime Kuma **`2.x.x`**, Slack Notifications do not work as expected and now display **`[no preview available]`**  Reproduction steps Any Uptime Kuma **POST** Request to a Slack webhook causes this issue  Expected behavior Slack is meant to display a brief Notification Preview  Actual Behavior Slack doesn't display a notification preview ![Image](https://github.com/user-attachments/assets/6f00032d-2ef8-4672-a496-b1414c361957)  Uptime-Kuma Version 2.0.0-beta.1  Operating System and Arch Debian 12.9 - ARM64  Browser Safari 18.3 (20620.2.4.11.4)   Deployment Environment - Runtime: Docker 27.5.0 - Database: SQLite - Filesystem used to store the database on: EXT4 on an NVMe - Number of Monitors: 42  Relevant log output shell 2025-01-22T19:41:12+11:00 [MONITOR] ERROR: Cannot send notification to Slack 2025-01-22T19:41:12+11:00 [MONITOR] ERROR: Error: Error: AxiosError: Request failed with status code 400 invalid_attachments at Slack.throwGeneralAxiosError (/app/server/notification-providers/notification-provider.js:69:15) at Slack.send (/app/server/notification-providers/slack.js:172:18) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async Monitor.sendNotification (/app/server/model/monitor.js:1343:21) at async beat (/app/server/model/monitor.js:925:21) at async Timeout.safeBeat [as _onTimeout] (/app/server/model/monitor.js:1010:17)  source-file",bug,0.9
1422,uptime-kuma,https://github.com/louislam/uptime-kuma/issues/1422,Race condition in push monitors,"  Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description There is a race condition in the code for push monitors that can cause repeat notifications within the same second or shortly thereafter. (see some background in #922) ![image](https://user-images.githubusercontent.com/1147328/160219491-5d077488-49b8-4a77-99b4-7397873384f3.png) http logs show that the GET calls are generally 60s apart, but because of discrepancies in system time down to the ms level, it can appear that they happen a second apart, even if they're very close together (ie.e 17:58:05.999 to 17:59:06.000)  [25/Mar/2022:17:54:05 -0700] ""GET /api/push/xxxx?msg=OK&ping=92.177 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567 [25/Mar/2022:17:55:05 -0700] ""GET /api/push/xxxx?msg=OK&ping=92.196 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567  [25/Mar/2022:17:58:05 -0700] ""GET /api/push/xxx?msg=OK&ping=90.552 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567 [25/Mar/2022:17:59:06 -0700] ""GET /api/push/xxx?msg=OK&ping=91.308 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567   Reproduction steps Repro is tricky, but it could be possible by monitoring uptime kuma debug logs and synchronizing to them. Basically, the push URL calls have to happen just shortly after the monitor's calls to `beat()` or `safe_beat()`  Expected behavior Uptime kuma should be robust against very small clock discrepancies  Actual Behavior Get double notifications  Uptime-Kuma Version 1.12.1  Operating System and Arch Docker on Ubuntu 20.04  Browser Firefox  Docker Version Latest  NodeJS Version _No response_  Relevant log output _No response_",documentation-file | documentation-file | source-file | source-file,"Race condition in push monitors   Please verify that this bug has NOT been raised before. - [X] I checked and didn't find similar issue   Security Policy - [X] I agree to have read this project [Security Policy](https://github.com/louislam/uptime-kuma/security/policy)  Description There is a race condition in the code for push monitors that can cause repeat notifications within the same second or shortly thereafter. (see some background in #922) ![image](https://user-images.githubusercontent.com/1147328/160219491-5d077488-49b8-4a77-99b4-7397873384f3.png) http logs show that the GET calls are generally 60s apart, but because of discrepancies in system time down to the ms level, it can appear that they happen a second apart, even if they're very close together (ie.e 17:58:05.999 to 17:59:06.000)  [25/Mar/2022:17:54:05 -0700] ""GET /api/push/xxxx?msg=OK&ping=92.177 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567 [25/Mar/2022:17:55:05 -0700] ""GET /api/push/xxxx?msg=OK&ping=92.196 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567  [25/Mar/2022:17:58:05 -0700] ""GET /api/push/xxx?msg=OK&ping=90.552 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567 [25/Mar/2022:17:59:06 -0700] ""GET /api/push/xxx?msg=OK&ping=91.308 HTTP/1.1"" ""-"" ""curl/7.74.0"" TLSv1.3 TLS_AES_256_GCM_SHA384 200 5567   Reproduction steps Repro is tricky, but it could be possible by monitoring uptime kuma debug logs and synchronizing to them. Basically, the push URL calls have to happen just shortly after the monitor's calls to `beat()` or `safe_beat()`  Expected behavior Uptime kuma should be robust against very small clock discrepancies  Actual Behavior Get double notifications  Uptime-Kuma Version 1.12.1  Operating System and Arch Docker on Ubuntu 20.04  Browser Firefox  Docker Version Latest  NodeJS Version _No response_  Relevant log output _No response_ documentation-file documentation-file source-file source-file",bug,0.85
