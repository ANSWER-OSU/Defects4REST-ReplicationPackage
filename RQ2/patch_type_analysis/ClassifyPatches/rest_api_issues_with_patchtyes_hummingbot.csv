issue_no,repo,issue_url,title,description,patched_file_types
5251,hummingbot,https://github.com/hummingbot/hummingbot/issues/5251,Binance market order without price fail with illegal characters,"**Describe the bug** New market orders to Binance without a price (which is optional) fail with illegal characters because price is being submitted as string NaN. **Steps To Reproduce** Create a custom strategy that utilises market orders and attempt to submit a market order without a price e.g `if side == 'buy': order_id = self.buy_with_specific_market( market_trading_pair_tuple=self._market_info, amount=self._order_amount, order_type=OrderType.MARKET )` Here are the steps to reproduce the issue (see attachments in the section below): 1. Set up your configuration file with these parameters:  2. Start the bot using this command:   **Release version** v1.3.0 **Error Message** `{2022-04-24 03:02:10,118 - 28767 - hummingbot.connector.exchange.binance.binance_exchange - NETWORK - Error submitting SELL MARKET order to Binance for 0.00020000 BTC-AUD NaN. Traceback (most recent call last): File ""/opt/hummingbot/hummingbot/connector/exchange/binance/binance_exchange.py"", line 526, in _create_order order_result = await self._api_request( File ""/opt/hummingbot/hummingbot/connector/exchange/binance/binance_exchange.py"", line 1010, in _api_request return await web_utils.api_request( File ""/opt/hummingbot/hummingbot/connector/exchange/binance/binance_web_utils.py"", line 113, in api_request raise IOError(f""The request to Binance failed. Error: {error_response}. Request: {request}"") OSError: The request to Binance failed. Error: {""code"":-1100,""msg"":""Illegal characters found in parameter 'price'; legal range is '^([0-9]{1,20})(\\.[0-9]{1,20})?$'.""}. Request: RESTRequest(method=POST, url='https://api.binance.com/api/v3/order', params=None, data={'symbol': 'BTCAUD', 'side': 'SELL', 'quantity': '0.00020000', 'type': 'MARKET', 'newClientOrderId': 'x-XEKWYICXSBCAD1805984ff5179a47b1306', 'price': 'NaN'}, headers={'Content-Type': 'application/json'}, is_auth_required=True, throttler_limit_id='/order') 2022-04-24 03:02:10,119 - 28767 - hummingbot.connector.exchange.binance.binance_exchange - WARNING - The request to Binance failed. Error: {""code"":-1100,""msg"":""Illegal characters found in parameter 'price'; legal range is '^([0-9]{1,20})(\\.[0-9]{1,20})?$'.""}. Request: RESTRequest(method=POST, url='https://api.binance.com/api/v3/order', params=None, data={'symbol': 'BTCAUD', 'side': 'SELL', 'quantity': '0.00020000', 'type': 'MARKET', 'newClientOrderId': 'x-XEKWYICXSBCAD1805984ff5179a47b1306', 'price': 'NaN'}, headers={'Content-Type': 'application/json'}, is_auth_required=True, throttler_limit_id='/order') 2022-04-24 03:02:10,120 - 28767 - hummingbot.core.event.event_reporter - EVENT_LOG - {""timestamp"": 1650769330.0, ""order_id"": ""x-XEKWYICXSBCAD1805984ff5179a47b1306"", ""order_type"": ""OrderType.MARKET"", ""event_name"": ""MarketOrderFailureEvent"", ""event_source"": ""binance""} 2022-04-24 03:02:10,120 - 28767 - hummingbot.connector.client_order_tracker - INFO - Order x-XEKWYICXSBCAD1805984ff5179a47b1306 has failed. Order Update: OrderUpdate(trading_pair='BTC-AUD', update_timestamp=1650769330.0, new_state=<OrderState.FAILED: 6>, client_order_id='x-XEKWYICXSBCAD1805984ff5179a47b1306', exchange_order_id=None)` *WARNING: Do NOT publish any exchange API keys or your wallet's private key. Whoever has access to them may steal your assets!* **discord username:** J0E",source-file | test-file
5273,hummingbot,https://github.com/hummingbot/hummingbot/issues/5273,KuCoin : Could not fetch new trading fees from Kucoin. Filling log file and too many API calls,"**Describe the bug** Upgraded two robots to Ubuntu 22.04 LTS and Hummingbot 1.3.0 , when I start the robot, the robot creates trades on KuCoin but then starts spamming the log file and API every second with the message ""WARNING - Could not fetch new trading fees from Kucoin. Check network connection."". It says ""Check network connection"" but the network connection is working fine. Then a few lines up it says invalid KC-API-SIGN, yet the robot successfully made orders on KuCoin. When left running, this behavior leads to a full log file and a temporary ban on the KuCoin API. Other projects are having similar issues it looks like: https://github.com/mscheetz/KuCoinApi.Net/issues/13 https://github.com/mscheetz/KuCoinApi.Net/issues/10 **Steps To Reproduce** - Set up a Docker robot with - Ubuntu 22.04 LTS VPS - Snap Docker - Hummingbot 1.3.0 - API Connect to KuCoin - Liquidity Mining strategy - 5 coinpairs - start - observe that the robot creates 5 to 10 orders - observe the robot throwing the warning message - observe the log file filling up rapidly - let run for 24 hours - observe a rate limit temporary ban on the KuCoin API **Screenshots** ![image](https://user-images.githubusercontent.com/10052587/166113851-bbed3e27-a1f8-4228-9fce-003973c8f6d4.png) **Release version** 1.3.0 **Attachments** // Please attach your config file and log file to help us debug. It would be difficult for us to help you without those! `Traceback (most recent call last): File ""/home/hummingbot/hummingbot/connector/exchange/kucoin/kucoin_exchange.py"", line 767, in _trading_fees_polling_loop await self._update_trading_fees() File ""/home/hummingbot/hummingbot/connector/exchange/kucoin/kucoin_exchange.py"", line 817, in _update_trading_fees resp = await self._api_request( File ""/home/hummingbot/hummingbot/connector/exchange/kucoin/kucoin_exchange.py"", line 946, in _api_request return await web_utils.api_request( File ""/home/hummingbot/hummingbot/connector/exchange/kucoin/kucoin_web_utils.py"", line 107, in api_request raise IOError(f""The request to Kucoin failed. Error: {error_response}. Request: {request}"") OSError: The request to Kucoin failed. Error: {""code"":""400005"",""msg"":""Invalid KC-API-SIGN""}. Request: RESTRequest(method=GET, url='https://api.kucoin.com/api/v1/trade-fees', endpoint_url=None, params={'symbols': 'ALGO-USDT,AVAX-USDT,DAO-USDT,FEAR-USDT'}, data=None, headers={'Content-Type': 'application/x-www-form-urlencoded'}, is_auth_required=True, throttler_limit_id='/api/v1/trade-fees') 2022-04-30 14:23:29,906 - 1 - hummingbot.connector.exchange.kucoin.kucoin_exchange - WARNING - Could not fetch new trading fees from Kucoin. Check network connection. ` **Optional: your discord username:** Bhagavate bilala#6332",source-file
