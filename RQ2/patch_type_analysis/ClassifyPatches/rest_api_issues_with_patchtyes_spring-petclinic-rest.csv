issue_no,repo,issue_url,title,description,patched_file_types
165,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/165,Error when executing requests with basic auth under non-admin,"After creating a user with ROLE_OWNER_ADMIN and trying to make requests using Basic Authentication, I get a 401 Unauthorized response. The following error appears in the logs:  java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id ""null"" at org.springframework.security.crypto.password.DelegatingPasswordEncoder$UnmappedIdPasswordEncoder.matches(DelegatingPasswordEncoder.java:289) at org.springframework.security.crypto.password.DelegatingPasswordEncoder.matches(DelegatingPasswordEncoder.java:237) at org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration$LazyPasswordEncoder.matches(AuthenticationConfiguration.java:321) at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:86) at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147) at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201) at org.springframework.security.authentication.ObservationAuthenticationManager.lambda$authenticate$1(ObservationAuthenticationManager.java:54) at io.micrometer.observation.Observation.observe(Observation.java:565) at org.springframework.security.authentication.ObservationAuthenticationManager.authenticate(ObservationAuthenticationManager.java:53) at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:187) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)",config-file
61,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/61,petDto not working propely,"petDto is creating the following body { ""birthDate"": ""Mon Sep 06 21:00:00 UTC 2010"", ""name"": ""Leo"", ""type"": { ""name"": ""cat"" }, ""typeId"": 1 } with this the push operation is refused and the following message is returned ( that is after changing the date to the yyyy-MM-dd format ) cache-control: no-cacheno-storemax-age=0must-revalidate connection: close content-length: 0 date: Sat20 Nov 2021 06:08:20 GMT errors: [{""objectName"":""petDto"",""fieldName"":""id"",""fieldValue"":""null"",""errorMessage"":""not null""},{""objectName"":""petDto"",""fieldName"":""type.id"",""fieldValue"":""null"",""errorMessage"":""not null""}] expires: 0 pragma: no-cache vary: OriginAccess-Control-Request-MethodAccess-Control-Request-Headers x-content-type-options: nosniff x-frame-options: DENY x-xss-protection: 1; mode=block",source-file | ui-file | documentation-file
9,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/9,Request body of POST /pets,"I am using spring-petclinic-rest as an example of a REST API. As a part of that, I am attempting to perform a POST request against /pets in order to create a new Pet record. It however seems that the 'id' field is required, with the associated behaviour that - I can replace the contents of an existing pet via a POST to /pets (which does return a 201 instead of a 200) - if I want to create an entirely new Pet record, I need to know which values for 'id' are not in use, rather than leave 'id' out and have an available value be assigned to it",source-file | data-file | ui-file
17,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/17,self-href urls are not proper in rest api,"I was trying to run spring-petclinic-rest in my local. I was able to run and build properly. But when I hit the URL http://localhost:9966/petclinic/ This shows me below response ` { ""_links"" : { ""petTypes"" : { ""href"" : ""http://localhost:9966/petclinic/petTypes"" }, ""vets"" : { ""href"" : ""http://localhost:9966/petclinic/vets"" }, ""users"" : { ""href"" : ""http://localhost:9966/petclinic/users"" }, ""visits"" : { ""href"" : ""http://localhost:9966/petclinic/visits"" }, ""pets"" : { ""href"" : ""http://localhost:9966/petclinic/pets"" }, ""specialties"" : { ""href"" : ""http://localhost:9966/petclinic/specialties"" }, ""owners"" : { ""href"" : ""http://localhost:9966/petclinic/owners"" }, ""profile"" : { ""href"" : ""http://localhost:9966/petclinic/profile"" } } } ` Upon clicking vets link from above, I got below response - ` { ""firstName"" : ""Helena"", ""lastName"" : ""Leary"", ""_links"" : { ""self"" : { ""href"" : ""http://localhost:9966/petclinic/vets/1"" }, ""vet"" : { ""href"" : ""http://localhost:9966/petclinic/vets/1"" }, ""specialties"" : { ""href"" : ""http://localhost:9966/petclinic/vets/1/specialties"" } } } ` But when I click on the self href url- it end up in being GET method not supported exception. Actual URL for getting vets by id is http://localhost:9966/petclinic/api/vets/1 In code I could not find where it is configured or from where these links are coming. Can someone suggest how to add api in self href urls.",source-file | data-file
86,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/86,Create pet endpoint,"According to the open API spec, there is the following endpoint to create a pet: `http://localhost:9966/petclinic/api/pets`, however I am getting a `501` error whenever I send a POST request to that URL, indicating that it is not implemented. Is this the case?",source-file | test-file | documentation-file
220,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/220,PUT /api/owners/{ownerId}/pets/{petId} Endpoint Not Implemented,"The `PUT /api/owners/{ownerId}/pets/{petId}` endpoint is defined in the OpenAPI spec, but has not been implemented in the application's controller layer. When sending a request to this endpoint, the API returns: `HTTP 501 Not Implemented` ![Image](https://github.com/user-attachments/assets/14aa9e59-d67d-4291-86ff-7e48f4ebfcef) - The OpenAPI spec defines a `PUT method` for `/api/owners/{ownerId}/pets/{petId}`. - However, I checked both files ([`OwnerRestController.java`](../blob/master/src/main/java/org/springframework/samples/petclinic/rest/controller/OwnerRestController.java) and [`PetRestController.java`](../blob/master/src/main/java/org/springframework/samples/petclinic/rest/controller/PetRestController.java) to make sure if either of them has the corresponding method, but it does not contain a method to handle this route. - Impact that i see: - It is currently not possible to validate a owner's pet data updates via the REST API. - The documentation is out of sync with the actual implementation, which may confuse API consumers. - With this issue, the development of a second API test scenario with the recently implemented Newman in #219 is unfeasible. ## What we can do? - Implement the PUT method in the corresponding controller to handle pet updates. - Ensuring input validation matches constraints defined in the OpenAPI spec - Returns `204 No content` or `200 OK` with the updated pet object _(The latter [200], would facilitate assertion in Postman + Newman test scenarios.)_ - Add appropriate unit and/or integration tests",source-file | test-file
102,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/102,Location header on specialties endpoint is wrong,https://github.com/spring-petclinic/spring-petclinic-rest/blob/master/src/main/java/org/springframework/samples/petclinic/rest/controller/SpecialtyRestController.java#L80 describes the /specialties endpoint as /specialtys on the location header,source-file | data-file
145,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/145,Bad Request Error while trying to get pet for a specific owner,"The `GET/api/owners/{id}/pets/{petId}` endpoint seems to be returning an incorrect response or handling errors improperly. This issue was encountered while attempting to retrieve specific pet for a given owner. cURL: bash curl -X 'GET' \ 'http://localhost:9966/petclinic/api/owners/1/pets/1' \ -H 'accept: application/json'  Response on Swagger-ui: `Error: response status is 400` I tried to debug code and found out that it comes from `OwnerRestController` : java @RestController @RequestMapping(""/api"") public class OwnerRestController implements OwnersApi { //  @PreAuthorize(""hasRole(@roles.OWNER_ADMIN)"") @Override public ResponseEntity<PetDto> getOwnersPet(Integer ownerId, Integer petId) { Owner owner = this.clinicService.findOwnerById(ownerId); Pet pet = this.clinicService.findPetById(petId); if (owner == null || pet == null) { return new ResponseEntity<>(HttpStatus.NOT_FOUND); } else { if (!pet.getOwner().equals(owner)) { return new ResponseEntity<>(HttpStatus.BAD_REQUEST); } else { return new ResponseEntity<>(petMapper.toPetDto(pet), HttpStatus.OK); } } } }  The problem is here : `if (!pet.getOwner().equals(owner)) {}`: the `equals()` check returns `false`. Ive checked the entity Owner class and found out that it doesn't have `equals` and `hashcode()` (same for Pet entity class), which is not recommended !",source-file | data-file | test-file
130,spring-petclinic-rest,https://github.com/spring-petclinic/spring-petclinic-rest/issues/130,Handle 404 error while adding a pet to an owner,"The `POST /owners/{ownerId}/pets` does not return a 404 error when the `ownerId` does not exist but an error `400`  { ""className"": ""org.springframework.dao.DataIntegrityViolationException"", ""exMessage"": ""could not execute statement [integrity constraint violation: foreign key no parent ; FK_PETS_OWNERS table: PETS value: 222] [insert into pets (birth_date,name,owner_id,type_id,id) values (?,?,?,?,default)]; SQL [insert into pets (birth_date,name,owner_id,type_id,id) values (?,?,?,?,default)]; constraint [FK_PETS_OWNERS]"" }  Same behaviour when a Pet does not exist",source-file
