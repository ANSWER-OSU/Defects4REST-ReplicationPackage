issue_no,repo,issue_url,title,description,patched_file_types
7314,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7314,"RePostPayment fails with System.InvalidOperationException: Headers are read-only, response has already started.","nopCommerce version: 4.6+ Steps to reproduce the problem: Calling RePostPayment fails with ""System.InvalidOperationException: Headers are read-only, response has already started."" at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException() at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value) at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value) at Microsoft.AspNetCore.Mvc.Infrastructure.ContentResultExecutor.ExecuteAsync(ActionContext context, ContentResult result) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()  End of stack trace from previous location  https://github.com/nopSolutions/nopCommerce/blob/020f7571c2f37beedc33c8bfb04ab53565623c1b/src/Presentation/Nop.Web/Controllers/OrderController.cs#L237 Will write the form to the body. https://github.com/nopSolutions/nopCommerce/blob/020f7571c2f37beedc33c8bfb04ab53565623c1b/src/Presentation/Nop.Web/Controllers/OrderController.cs#L242 Will try to set Content Type header because of Content(""Redirected"").  Consider ""return new EmptyResult()"" instead of ""Content(""Redirected"")"", along with adding a <noscript> wrapped text ""please enable javascript"" or similar, to RemotePost https://github.com/nopSolutions/nopCommerce/blob/020f7571c2f37beedc33c8bfb04ab53565623c1b/src/Presentation/Nop.Web.Framework/RemotePost.cs#L115",source-file
2776,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/2776,/customer/productreviews doesn't respect Product's LimitToStores setting,"How to reproduce - 1. Setup two stores 2. Create a product and limit it to Store 1 3. Write a review for the product 4. Go to /customer/productreviews at Store 2 5. The review will be visible, even though it cannot be loaded",data-file | database-file | source-file | other-file | documentation-file | config-file
7308,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7308,AJAX catalog requests should be converted from GET to POST,**nopCommerce version: 4.70.4** URL from Google results redirects to page without CSS In continuation of https://github.com/nopSolutions/nopCommerce/issues/7286. We should not allow to directly access them with GET (convert them to POST if possible),source-file | test-file
5359,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5359,Country State Ajax loader is not stopped,nopCommerce version: 4.40 Beta Steps to reproduce the problem: 1) Register new customer 2) Add any product to cart 3) Do checkout while filling the billing address click on country dropdown and select country ajax loader is continues loading. If state is filling based on country than also it is loading continuously. ![image](https://user-images.githubusercontent.com/41533502/108676031-9cc34680-750d-11eb-93b4-02288076bf31.png),source-file
183,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/183,"General error fix for the ""Error during serialization"" issues (admin area only)","When we have too long json return we can get an exception - http://www.nopcommerce.com/boards/t/38582/blog-posts-not-appearing-in-admin-screen.aspx However, adding this override on BaseController will fix the issue in cases we need the content to be on the first place:  protected override JsonResult Json(object data, string contentType, Encoding contentEncoding, JsonRequestBehavior behavior) { return new JsonResult() { Data = data, ContentType = contentType, ContentEncoding = contentEncoding, JsonRequestBehavior = behavior, MaxJsonLength = Int32.MaxValue }; }  Source: http://www.nopcommerce.com/boards/t/38582/blog-posts-not-appearing-in-admin-screen.aspx?p=2",source-file
3946,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3946,"Registration activation with ""+"" in the email addres will not be successfull","nopCommerce version: 4.20 Steps to reproduce the problem: If the activation link contains the email in an unescaped format like this (user+name@gmail.com) then the plus sign in the URL is represents a space, so the activation will not be successful for the email ""user name@gmail.com"". Source: Premium Support #14907",source-file | ui-file
3630,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3630,"Return 404 page when a topic, blog post, news item cannot be loaded",Right now it redirects to the home page,source-file
7101,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7101,Add more checks when validate shopping cart item attributes,"nopCommerce version: 4.60 > 1. Create a new nop installation, including the demo data (no plugins, no themes). > 2. Go to ""Nike Tailwind Loose Short-Sleeve Running Shirt"" in the frontend > 3. Select size ""Small"" > 4. Add the product to the cart, and place the order. > 5. Open exactly the same product in the backend > 6. Delete the product attribute value ""small"" from within the backend > 7. Navigate to the frontend, ""My Account > Orders"" and select the last order > 8. Press ""Rebuy"" and wait for redirect into the shopping cart > > And here is the problem. Once you are in the shopping cart you can see that there is already something weird happing. There is no product attribute description displayed. If you have a look at the database, your shopping cart item still contains the old product attribute Id that you previously deleted. > > 9. Place the order > > You were now successfully able to purchase a product (product attribute value) that no longer exists. Source: https://www.nopcommerce.com/boards/topic/98780/inconsistent-product-attribute-handling-in-reorder-functionality",source-file
3139,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3139,Error when using a URL (store) that does not exist. It should throw error with usable errormessage.,"nopCommerce version: 4.1 Steps to reproduce the problem: If you have a url in the store(settings) that does not exist, you get a 502 error with no real error message. In order to find the real error, you have to debug the solution and get ""No such host"". Should there be a seperate URL for development?",source-file
3584,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3584,Customer is Null when updating Return Request,"When i try to update the status of a return request the customer information is not populated at all, and so a null reference is thrown. Source: https://www.nopcommerce.com/boards/t/58325/customer-is-null-when-updating-return-request-local-environment-sqlexpress.aspx",config-file
6444,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6444,Search by ipaddress on customer search page list not working properly,nopCommerce version: 460beta Steps to reproduce the problem: Search by ipaddress on customer search page list not working properly domain/Admin/Customer/List Search in ip address with space and without space before number 172.70.218.52,source-file
5746,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5746,Sequence contains no elements,"nopCommerce version: 4.40.x Steps to reproduce the problem: We're getting a lot of 'Sequence contains no elements' errors in the logs, relating to '/catalog/getcatalogsubcategories' - we're using the ajax main menu. `System.InvalidOperationException: Sequence contains no elements at System.Linq.ThrowHelper.ThrowNoElementsException() at System.Linq.Enumerable.First[TSource](IEnumerable`1 source) at Nop.Web.Factories.CatalogModelFactory.PrepareSubCategoriesAsync(Int32 id) at Nop.Web.Controllers.CatalogController.GetCatalogSubCategories(Int32 id) at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments) at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask) at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context) at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()  End of stack trace from previous location  at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted) at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()  End of stack trace from previous location  at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker) at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger) at WebMarkupMin.AspNetCore5.WebMarkupMinMiddlewareBase.Invoke(HttpContext context) at StackExchange.Profiling.MiniProfilerMiddleware.Invoke(HttpContext context) in C:\projects\dotnet\src\MiniProfiler.AspNetCore\MiniProfilerMiddleware.cs:line 125 at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context) at Nop.Services.Authentication.AuthenticationMiddleware.InvokeAsync(HttpContext context) at FoxNetSoft.Plugin.Misc.CDNConnector.Infrastructure.CDNConnectorMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context) at Nop.Services.Installation.InstallUrlMiddleware.InvokeAsync(HttpContext context, IWebHelper webHelper) at Nop.Services.Common.KeepAliveMiddleware.InvokeAsync(HttpContext context, IWebHelper webHelper) at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context) at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)` ![Screen Shot 2021-06-25 at 13 32 29](https://user-images.githubusercontent.com/12123259/123425273-d8544700-d5b9-11eb-8411-b58fe9038743.png)",source-file
5400,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5400,Adding a new forum display wrong error message / Admin side,nopCommerce version: 4.40 Beta Steps to reproduce the problem: 1. Admin > Forum -> CreateForum 2. Click on Save or save and Continue Edit 3. display wrong error message of forum https://prnt.sc/104oq24,source-file | data-file
4621,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4621,GetAllCheckoutAttributes returns incorrect list of store-specific attributes,"nopCommerce version: 4.20 For example, if we have this setup: Stores: * Store1 (ID: **1**) * Store2 (ID: **2**) Checkout attributes: * Attribute1 (All stores - not limited) * Attribute2 (Limited to Store2) Calling `GetAllCheckoutAttributes(2)` while in the admin area of Store1, will only return Attribute1. Given that I'm passing in the store id of Store2, shouldn't that have returned both Attribute1 and Attribute2? Shouldn't this authorization check `_storeMappingService.Authorize(ca)` be passing in the `storeId` parameter instead? (i.e. `_storeMappingService.Authorize(ca, storeId)`). At the moment, the `storeId` parameter is not used anywhere to actually limit the list to that store. More info: https://github.com/nopSolutions/nopCommerce/blob/develop/src/Libraries/Nop.Services/Orders/CheckoutAttributeService.cs#L103",source-file
5553,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5553,VisibleIndividually option ignored,"nopCommerce version: 4.40 Steps to reproduce the problem: - Set a product in the catalog so 'Visible individually' option is not selected. - Start the store where this product is available - In the search box or in the item by category list, the product appears when it should not Fix: - In Nop.Services\Catalog\ProductServices.cs, - In public virtual async Task<IPagedList<Product>> SearchProductsAsync - Check the value (after line 815) with the below code `if (visibleIndividuallyOnly) productsQuery = productsQuery.Where(p => p.VisibleIndividually);`",source-file
3174,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3174,"Entity (Product, category, manufacturer, etc) seo name isn't changed based on language selection","nopCommerce version: beta 4.10 Steps to reproduce the problem: I added one language German. After i edited Apple-Icam product name and seo name in German language product name = to ICAM(German tab) Seo name = v-scla-hiu-new-york Front side when i opened product detail for English and German language . Working fine for both but **url seo** name is not changed based on language. Also,i enabled seo friendly url.",source-file
6610,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6610,"In My Account-Addresses section, address gets saved when 'country'(required field) is kept empty.","nopCommerce version: 4.60.2 Steps to reproduce the problem: 1. Open My Account-Addresses menu. 2. Click on ""ADD NEW"" button. 3. Enter data in all fields except in ""Country"" field(do not select any country). 4. Click on ""SAVE"" button. 5. Check that the address gets saved successfully. ![MicrosoftTeams-image](https://user-images.githubusercontent.com/121164051/220570342-95fa71ef-e5ba-4359-a75c-438d3a68328f.png)",source-file
3411,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3411,Form value count limit 2048 exceeded.,"nopCommerce version: 4.1 Steps to reproduce the problem: We have around 25 methods in Admin/Shipping/Restrictions multiplied for around 250 countries we get around 6250 elements in the form, far more than 2048 limit. Full error here: > System.IO.InvalidDataException: Form value count limit 2048 exceeded. > at Microsoft.AspNetCore.WebUtilities.FormReader.Append(KeyValueAccumulator& accumulator) > at Microsoft.AspNetCore.WebUtilities.FormReader.ReadFormAsync(CancellationToken cancellationToken) > at Microsoft.AspNetCore.Http.Features.FormFeature.InnerReadFormAsync(CancellationToken cancellationToken) > at Microsoft.AspNetCore.Mvc.ModelBinding.FormValueProviderFactory.AddValueProviderAsync(ValueProviderFactoryContext context) > at Microsoft.AspNetCore.Mvc.ModelBinding.CompositeValueProvider.CreateAsync(ActionContext actionContext, IList`1 factories) > at Microsoft.AspNetCore.Mvc.ModelBinding.CompositeValueProvider.CreateAsync(ControllerContext controllerContext) > at Microsoft.AspNetCore.Mvc.Internal.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext() >  End of stack trace from previous location where exception was thrown  > at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync() > at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter() > at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context) > at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted) > at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync() > at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync() > at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext) > at StackExchange.Profiling.MiniProfilerMiddleware.Invoke(HttpContext context) in C:\projects\dotnet\src\MiniProfiler.AspNetCore\MiniProfilerMiddleware.cs:line 94 > at Nop.Services.Authentication.AuthenticationMiddleware.Invoke(HttpContext context) in C:\andrei\nopcommerce\sources\src\Libraries\Nop.Services\Authentication\AuthenticationMiddleware.cs:line 79 > at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context) > at Nop.Core.Http.InstallUrlMiddleware.Invoke(HttpContext context, IWebHelper webHelper) in C:\andrei\nopcommerce\sources\src\Libraries\Nop.Core\Http\InstallUrlMiddleware.cs:line 51 > at Nop.Core.Http.KeepAliveMiddleware.Invoke(HttpContext context, IWebHelper webHelper) in C:\andrei\nopcommerce\sources\src\Libraries\Nop.Core\Http\KeepAliveMiddleware.cs:line 50 > at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context) > at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.Invoke(HttpContext context) >",source-file
5990,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5990,"Estimate shipping not applying on the shopping cart page when enabled setting ""Use a city name for estimate shipping""","nopCommerce version: 4.50 Steps to reproduce the problem: Turn on the ""Use city name to estimate shipping"" option and try calculating shipping on the shopping cart page. You will receive a validation error for the ZipPostalCode field, which should not be validated in this case.",source-file
2532,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/2532,"Make ""Country"" required in the Estimate shipping form",It has a required asterisk but you still can leave this field empty,database-file | source-file | data-file
5198,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5198,Don't throw an exception on incorrect model binding from URL params,"nopCommerce version: develop An exception may throw for example due to a type mismatch, when a model property is bool and the value comes in int. In this case the binding should just ignore the value and not throw an exception.",source-file
7490,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7490,Error messages aren't showing on uploading pictures for product,nopCommerce version: 4.80 Steps to reproduce the problem: Json-responses containing an error message aren't displayed on client side when picture uploading fails,ui-file
3751,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3751,Redis serialization self-referencing loop for SpecificationAttributes,"nopCommerce version: 4.20 beta Steps to reproduce the problem: 1. Enable Redis caching 2. In admin panel, edit a product with specification attributes An internal server error occurs: `JsonSerializationException: Self referencing loop detected for property 'SpecificationAttribute' with type 'Castle.Proxies.SpecificationAttributeProxy'. Path '[0].SpecificationAttributeOptions[0]'.` The Models for `SpecificationAttribute` and `SpecificationAttributeOption` refer to each other so when they get serialized it's causing this circular reference error. Locally I added a `[JsonIgnore]` attribute to the `SpecificationAttributeOption`'s `SpecificationAttribute` property, which seems to fix the issue.",source-file
6859,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6859,MultiPage-Checkout: edit address redirects to 404 when state not selected,"nopCommerce version: 4.60.1+ (unable to reproduce in 4.60.0) Steps to reproduce the problem: 1. Make sure the following prerequisites are in place a) One page checkout is disabled b) State / province setting for Addresses enabled 2. Put an item in your cart and start an checkout. Proceed to the billing address page 3. Make sure you have an address that you can edit (if not, create a new one first and place an order with it, so that the address gets properly saved) 4. Edit an address 5. Select a country with states, but do not touch the state. If there is already a state set, please select ""Select state"" 6. Click ""Next"" You will be redirect to the 404 page not found page. Expected behavior: Show an error message, indicating that a state needs to be selected.",source-file
6403,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6403,Add missed vendor access check to orders,nopCommerce version: 4.50.4 Steps to reproduce the problem: The /Admin/Orders/PdfInvoice does not sufficiently check if a vendor should have access to an invoice https://github.com/nopSolutions/nopCommerce/blob/23e3edf92ccaa4887d2aa8e4b5939eb97d1a1efa/src/Presentation/Nop.Web/Areas/Admin/Controllers/OrderController.cs#L906,source-file
4432,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4432,Cart page - No warning message displaying on apply discount coupon or gift card message,nopCommerce version: 4.30 Beta Steps to reproduce the problem: Add few products to cart Then apply wrong coupon code or gift card code. It should display proper message but it nothing display. Current demo store(4.20) is display proper message. See this video - https://www.loom.com/share/5a87e2d190244363bc7f84bcaf5d2fac,source-file
3604,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3604,Non-developer internal server error page not returning 500,"nopCommerce version: 4.1 Steps to reproduce the problem: Add a code or data change that causes an internal server error (e.g. adding a divide by zero to a controller's action) Run nop, making sure that the developer exception page is not enabled (see ApplicationBuilderExtensions's UseNopExceptionHandler) Navigate to the page that causes that error The response code will be something other than 500.",source-file
6723,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6723,400 bad request when trying to cancel/edit large order,"nopCommerce version: 4.60.3 Steps to reproduce the problem: The order that I'm working with has 432 items. When i try to cancel the order with the `cancel` button, or perform a manual status change, the change fails and the user receives a blank page. Dev tools and nop log show 400 bad request. Since the edit page is one big form that posts all input values regardless of what action is being taken on the order, and each order item has 6 attributes being posted, this results in 2,592 form fields being posted + approximately 25 other fields. So, the edit form for this order is submitting over 2,600 fields. This exceeds the default value of 1024 for the `RequestFormLimits` action attribute. I ran into a similar problem when developing a plugin for wholesale ordering. The best fix, in my opinion would involve limiting the form fields to only submit the values to what is necessary for what is being changed. The quick, less secure/robust fix would be adding `[DisableRequestSizeLimit]`, `[RequestFormLimits(ValueCountLimit = int.MaxValue, KeyLengthLimit = int.MaxValue)]` attributes to the `CancelOrder` action and other edit related actions which could suffer from this same issue. I can certainly apply the attribute overrides to my local build to get it working, but I would like to see a more robust upstream fix for this.",source-file | ui-file
5469,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5469,Required field condition is not checked at Shipping origin tab,nopCommerce version : 4.40 beta Steps to reproduce the problem: 1) /Admin/Setting/Shipping 2) GO Shipping origin 3) Some of the field screen shot attached here Required field condition is not checked. **It will save with blank value.** ![image](https://user-images.githubusercontent.com/41533502/109268087-98aa6800-7830-11eb-84e3-4d12361556c7.png),source-file
7212,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7212,Import orders. Set the region depending on the country,"nopCommerce version: 4.70 When importing orders, the state code is reading the first matching value from the StateProvince table without regard for what country was specified. See also #7211",source-file
4717,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4717,"Empty ""Name"" fileld after adding new record to messages list in SendinBlue plugin",nopCommerce version: 4.30 RC It should be set to some default value instead of empty string.,config-file | source-file
4919,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4919,Display more user-friendly error when uploading non-picture file as a picture,"Steps to reproduce the problem: 1. Upload any non-picture file (e.g. XML or .cs) as a picture. For example, on a product details page 2. It gives a correct message that uploading failed. But also, 'Object reference not set to an instance of an object.' throwing error on picture controller side. Let's handle the exception so it's not thrown. There should be just an error text without an unhandled exception ![download](https://user-images.githubusercontent.com/5019111/86886520-c440dc80-c0ff-11ea-9869-c83c6e70e069.png) Source: https://www.nopcommerce.com/en/boards/topic/84221/picture-controller-in-get-error-object-reference-not-set-to-an-instance-of-an-object",source-file | ui-file
1811,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/1811,Vendors can see other vendor products in PDF,"When customer made order with products from at least two different vendors, each vendor may see just only own products, without any information about other products which do not belong to others. But if this same vendor will print invoice, will be able to see all products made by customer. Source: http://www.nopcommerce.com/boards/t/44621/vendor-pdf.aspx Furthermore, on some pages this button is hidden (details page) and on some it's not (list). And ""PdfInvoiceAll"" method has validation for vendors. But ""PdfInvoiceSelected"" has not",source-file | ui-file
5368,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5368,Selected Other State on admin edit address click on save it will success but it is not updated in DB,"nopCommerce version: 4.40 beta Steps to reproduce the problem: 1. Admin > Edit Order 2. Click on Edit address 3. Select in State as ""other"", and click on save but it not reflected or updated https://prnt.sc/103n9t7",source-file
1738,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/1738,"Do not allow to specify 0 as ""Page Size"" (categories, vendors, manufacturers). Only positive values","Otherwise, exception will be thrown in public store - http://www.nopcommerce.com/boards/t/44098/bugexception-when-you-put-page-size-to-0-for-category.aspx let's just ensure that it'll work fine when ""Allow customers to select page size"" is enable (hence ""Page Size"" field is hidden but still set to 0)",database-file | source-file | data-file
7106,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/7106,CustomProperties have been marked as JsonIgnore,We use this property to extend the models by attaching data to them and passing the models to javascript. With the latest changes (see below) we are not able to do that anymore. Is there an alternative solution for us now if you have made this on purpose? How could we pass additional data to the exisiting models and use it in js? https://github.com/nopSolutions/nopCommerce/blob/8c45936960958d75eac5097bcf69fe88c8d10274/src/Presentation/Nop.Web.Framework/Models/BaseNopModel.cs#L42,source-file
1731,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/1731,Search starts with < shows error,When we search any term starting with < sign (i.e: <abc) in search box it goest to errorpage and show internal issue. kindly check this Source: http://www.nopcommerce.com/boards/t/44053/search-starts-with-shows-error.aspx,source-file
6007,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6007,"Do not allow to delete the only one template (category, manufacturer, product, topic)",nopCommerce version: 4.5 beta Steps to reproduce the problem: step 1 : Go Admin/Template/List step 2: delete manufacture and category template step 3 : open detail page of both template at front end you will get internal server error. **Note** : validation is there at least one template is there. https://www.loom.com/share/5c691d9e162f4feba4a902e57442ebd3,source-file | data-file
1602,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/1602,Category/manufacturer import/export doesn't work as expected,"SeName is not exported. Hence it's not imported for new categories. New categories and manufacturers don't have ""search engine friendly name""",source-file
6458,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6458,News details page Redirect page not found after reload,"nopCommerce version: 4.60- Beta Steps to reproduce the problem: - Open news details page, (*) sing are missing for validation - Submit new Comment without putting title and comment - Now page url will change /nopcommerce-new-release to /News/NewsCommentAdd?newsitemid=2 - Please Refresh Page from URL - You will redirect into **Page not found** page",ui-file
4611,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4611,Case sensitive ErrorPage.htm on Linux,nopCommerce version: 4.20 Steps to reproduce the problem: Any server error on Linux. The file is named ErrorPage.htm in wwwroot but the Error action in ErrorController returns lower case errorpage.htm resulting in a 404 error.,source-file
4548,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4548,Activity Types data table - Invalid JSON response when refresh grid,"nopCommerce version: 4.30 beta Steps to reproduce the problem: 1) Go /Admin/ActivityLog/ActivityTypes 2) scroll down and refresh table You will get this error **DataTables warning: table id=activityLogType-grid - Invalid JSON response. For more information about this error, please see http://datatables.net/tn/1**",ui-file
3468,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3468,Shopping carts and wishlists page (admin). Product name is not displayed,"Right now it displays ""null"" instead of actual product names",source-file
3260,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3260,Price not updated when multiples rental products are linked to the same grouped product,"nopCommerce version: 4.1 (not tested on previous version) Steps to reproduce the problem: - Create a **grouped** product. Let's call it ""Book"" - Create a simple product of type **rental**. Let's call it ""Book Daily"" and link it to the grouped product named Book - Create a simple product of type **rental**. Let's call it ""Book Monthly"" and link it to the grouped product named Book - On front end side, open the product page ""Book"", below are displayed all the products linked to this grouped product family ""Book"":. - When we update the starting and ending rental date of ""Book Daily"", the price is not updated at all First investigation: - Analysing the issue with Chrome console, it seems that the bug is linked to multiple definition of JS functions that should update the price. (they use the same name). Because of that, the wrong method is called and therefore wrong parameters are sent to the backend. After that on backend side, a null pointer exception happended and the price cannot be calculated again. Thanks",ui-file
2777,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/2777,/customer/productreviews shows reviews on deleted products,"How to reproduce - 1. Create a product 2. Leave a review on said product 3. Delete said product 4. Go to /customer/productreviews 5. Note, the review is visible",data-file | config-file | source-file | other-file | documentation-file
3376,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3376,Advance search is not working,"nopCommerce version: 4.10 Steps to reproduce the problem: 1. Go to nopCommerce demo store 2. Type ""Apple"" in search box and click on search button (page URL - http://demo.nopcommerce.com/search?q=apple ) 3. Now check Advanced search checkbox and click on search button (page URL - http://demo.nopcommerce.com/search?q=apple&adv=true&cid=0&mid=0&pf=&pt=&adv=false&isc=false&sid=false ) 4. Now select any option from Catalog selector (Sort option/Page Size/Display Mode) - **it will throw an error** (Selected sort by Name - A to Z - http://demo.nopcommerce.com/search?q=apple&adv=true,false&cid=0&mid=0&pf=&pt=&isc=false&sid=false&orderby=5) Error Message:  An unhandled exception occurred while processing the request. FormatException: String was not recognized as a valid Boolean. bool.Parse(ReadOnlySpan<char> value) FormatException: true,false is not a valid value for Boolean. Nop.Web.Framework.Infrastructure.Extensions.ApplicationBuilderExtensions+<>c.<UseNopExceptionHandler>b__1_1(HttpContext context) in ApplicationBuilderExtensions.cs, line 85  Here in last url parameter adv = adv=true,false if you selected option **Search In product descriptions ** as true then parameter : sid=true,false I looked in source and found input tag (i.e. <input asp-for=""sid"" />)generate two times input. Here is source image: ![advance-search](https://user-images.githubusercontent.com/13154058/46921627-4f6c6b80-d01b-11e8-88aa-7a4a63d140c0.png)",source-file
6484,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6484,Estimate Shipping Errors not showing,"nopCommerce version: 4.50.3 Steps to reproduce the problem: Errors provided by the Property Error in GetShippingOptionResponse is not being shown in frontend. In Nop.Services.Shipping.GetShippingOptionsResponse: csharp  <summary>  Gets a value indicating whether request has been completed successfully  </summary> public bool Success => !Errors.Any();  It says that Success is only True when there are no Errors. But: On Nop.Web.Factories.ShoppingCartModelFactory: csharp var getShippingOptionResponse = await _shippingService.GetShippingOptionsAsync(cart, address, customer, storeId: store.Id); if (getShippingOptionResponse.Success) { if (getShippingOptionResponse.ShippingOptions.Any()) { foreach (var shippingOption in getShippingOptionResponse.ShippingOptions) { rawShippingOptions.Add(new ShippingOption { Name = shippingOption.Name, Description = shippingOption.Description, Rate = shippingOption.Rate, TransitDays = shippingOption.TransitDays, ShippingRateComputationMethodSystemName = shippingOption.ShippingRateComputationMethodSystemName }); } } else { foreach (var error in getShippingOptionResponse.Errors) model.Errors.Add(error); } }  So The errors will only add when if (getShippingOptionResponse.Success) is True But Success indicate no errors. When Success is False, the code that add the errors will not execute. This is causing estimate Shipping Errors not showing on estimateshipping popup. Thx",source-file
5907,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5907,Estimate shipping not applying on the shopping cart page,"> I have found a bug in the Cart page where after selecting a shipping method it's not updating in the order summary section > > 1. nopCommerce version: 4.40.4 > > 2. Expected behavior: After selecting a shipping method order summary should show the selected > shipping method and prices should adjust accordingly if applicable > > 3. Actual behavior: Order Summary not updating after selecting shipping method > > 4. Steps to reproduce the problem: Go to cart page after you have added products , then click on estimate shipping and select a shipping method > > 5. Any private modifications : No > > Reasons for the problem : > An Invalid url parameter is being sent as a ""$"" sign is placed in the requested url . > > > Solution : > Remove `$` sign from the the following cshtml => [src/Presentation/Nop.Web/Views/Shared/Components/ShoppingCartEstimateShipping/Default.cshtml](https://github.com/nopSolutions/nopCommerce/blob/develop/src/Presentation/Nop.Web/Views/Shared/Components/ShoppingCartEstimateShipping/Default.cshtml#L57) > where a ajax request is being sent to the following route ""shoppingcart/selectshippingoption"" Source: https://www.nopcommerce.com/boards/topic/92236/cart-page-estimate-shipping-not-applying-bug",test-file
5384,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/5384,Can't properly decode an URL if it contains slugs names that are also parameter names.,"nopCommerce 4.3 Please read: [Link to NopCommerce](https://www.nopcommerce.com/en/boards/topic/90303/receiving-404-error-on-the-root-category-after-upgrade-to-43) Using a debugger, I set a breakpoint on Line 96 of Category  public virtual IActionResult Category(int categoryId, CatalogPagingFilteringModel command) { var category = _categoryService.GetCategoryById(categoryId); if (category == null || category.Deleted) return InvokeHttp404();   At first, I thought there was something wrong with my debugger setup because I couldn't hit the breakpoint www.store.com/products. When I clicked on another category, however, it worked. The 404 error wasn't generated in the Category method. I changed the slug name to ""products-test"" under **Catalog > Categories > ""Products"" > Search engine friendly page name ** and it magically again hit my breakpoint. Very strange! I also tried to clear the Slug name, but it automatically generated ""products"" after the category name and still didn't hit the break point. Finally, I deleted the Slug in **System > Search engine friendly page names** and the Slug field became blank. Navigating, however, to the page didn't result in a 404 error, but gave me a blank page. I checked my configuration to see if I had any URL redirections at the web server level, but I didn't have any. I also cleared the cache to rid any stale values from the system. I finally found the cause of the error. The fact ""products"" gave me a 404, but not other slug names lead me to suspect it may be a parsing issue. I tried ""category""and ""product"" as a slug names and it also gave me 404 errors! The URL routing in NopCommerce 4.3 cannot handle cases where the Slug is the same as a parameter name! It appears the URL decoding has changed since 4.2. The best fix would be to either correct the URL decoding or add validation logic on all user entered slug names.",source-file
6686,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6686,Wrong product URL in email message,"nopCommerce version: 4.60 Steps to reproduce the problem: We have created new message template for products and in MessageTokenProvide.cs at method AddProductTokensAsync the line  await RouteUrlAsync(routeName: ""Product"", routeValues: new { SeName = await _urlRecordService.GetSeNameAsync(product) });  returns always empty string. We changed the route name to ""ProductDetails"" and the URL is now correct. But I think, here should be used something similar like in the RouteProductUrlAsync (NopUrlHelper.cs) where is much complex logic for creating product url.",source-file
3382,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/3382,Redis cache clear error in nopCommerce 4.10,"nopCommerce version: 4.10 Steps to reproduce the problem: 1. Enable Redis cache. 2. Open admin page. 3. Click ""Clear cache"" Application returns code 500 error.",source-file
6033,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/6033,Reset password does not work when an email contains a +,"nopCommerce version: Latest Steps to reproduce the problem: - Create an account with an email like ""test+test@gmail.com"" - Send the password reset link - The URL in the email will contain ""email=test+test@gmail.com"" which model binds in MVC to email=""test test@gmail.com"". - Clicking the reset link sends you to the homepage and does not allow you to reset your password The URL parameters should be escaped as ""email=test%2Btest@gmail.com"". In a URL, the + acts as a space. It appears this is caused in MessageTokenProvider.cs. ![image](https://user-images.githubusercontent.com/214307/146073863-d955273f-67b0-4019-b362-0557a4609845.png) `urlHelper.RouteUrl(routeName, routeValues))` results in a properly escaped URL. But when you pass this into the PathString constructor, it escapes everything. You then UrlDecode it later resulting in an unecoded + in the email value. Microsoft's documentation specifically says not to use PathString with an encoded URL. I don't have time to issue a pull request now but we fixed it by doing this: ![image](https://user-images.githubusercontent.com/214307/146074406-95ef1780-b03d-48df-9644-91511893969e.png)",source-file
4943,nopCommerce,https://github.com/nopSolutions/nopCommerce/issues/4943,Estimate Shipping - shipping provider warnings not displayed,"1. nopCommerce version 4.30 2. Expected behavior - error/warning messages from shipping providers should be displayed 3. Actual behavior - if a shipping provider plugin returns any errors, they are ignored 4. Steps to reproduce the problem - Select ""Estimate Shipping"" button on the cart page. The dialog pops up. - Enter address information - If the shipping provider plugin reports any errors (like UPS indicating invalid address, or Shipping Director's Error/ErrorExit rule returning a warning message like ""call for shipping""), they are not displayed. (Note that if you blank out the zip/postal code field, you do see an error message for ""Zip / postal code is required"", so the dialog does support the display of messages) The code does not look right. Only when 'Success' is true does it enter the block where Warnings are set: \Presentation\Nop.Web\Factories\ShoppingCartModelFactory.cs csharp public virtual EstimateShippingResultModel PrepareEstimateShippingResultModel()  var getShippingOptionResponse = _shippingService.GetShippingOptions(); if (getShippingOptionResponse.Success) { if (getShippingOptionResponse.ShippingOptions.Any()) { foreach (var shippingOption in getShippingOptionResponse.ShippingOptions) {} } else foreach (var error in getShippingOptionResponse.Errors) model.Warnings.Add(error); }  see also: https://www.nopcommerce.com/en/boards/topic/84921/estimate-shipping-on-cart-page-for-430-shipping-provider-warnings-not-displayed",source-file
